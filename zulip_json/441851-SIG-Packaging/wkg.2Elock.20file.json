[
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"479055\">@Calvin Prewitt</span> ! I'm working on adding support for pulling component dependencies via wasm-pkg-client to wasmCloud's CLI, and after talking with Taylor last week I heard there's some interest in a wkg.lock file. At the very least, an idea of a lockfile to maintain integrity/track digests/etc. I put a total strawman in <a href=\"https://github.com/wasmCloud/wasmCloud/pull/2879\">https://github.com/wasmCloud/wasmCloud/pull/2879</a> which is mostly based off of deps.lock from wit-deps to start that conversation <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/wasmCloud/wasmCloud/pull/2879\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/b295a0179b2933ec6cd24f6097aa66fe828136c5/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f396630346361656561306538633766656331376165353366346431653834396237353333386661333134656436633935623233343432376232626133653637352f7761736d436c6f75642f7761736d436c6f75642f70756c6c2f32383739&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/wasmCloud/wasmCloud/pull/2879\" title=\"feat: use wasm-pkg-client to pull component deps by brooksmtownsend · Pull Request #2879 · wasmCloud/wasmCloud\">feat: use wasm-pkg-client to pull component deps by brooksmtownsend · Pull Request #2879 · wasmCloud/wasmCloud</a></div><div class=\"message_embed_description\">feat(wash-lib)!: allow wit-world to be optional\nfeat(wash-lib)!: fetch wasm dependencies with wkg\n\nFeature or Problem\nThis PR is an initial implementation of using the wasm-pkg-client crate from ht...</div></div></div>",
        "id": 465524289,
        "sender_full_name": "Brooks Townsend",
        "timestamp": 1724782177
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"345681\">@Brooks Townsend</span> . Yeah, looping <span class=\"user-mention\" data-user-id=\"486181\">@Daniel Macovei</span> in as well.</p>",
        "id": 465525287,
        "sender_full_name": "Calvin Prewitt",
        "timestamp": 1724782349
    },
    {
        "content": "<p>Awesome stuff!  Would be cool to chat about plans for it.  What would your thoughts be about a <code>.lock</code> living in <code>wasm-pkg-tools</code>?  We were also kindof thinking that there are some cool things about the <code>wit</code> tool in <code>cargo-component</code> that might be worth taking inspiration from.</p>",
        "id": 465526395,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1724782553
    },
    {
        "content": "<p><a href=\"https://github.com/bytecodealliance/cargo-component/tree/main/crates/wit\">https://github.com/bytecodealliance/cargo-component/tree/main/crates/wit</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/cargo-component/tree/main/crates/wit\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/ac0d279552b5b9edc292d1f1ce47b6f05f3fd4a2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323261646239393139386363376365623363646137323432363633396136303932363438326165373633353237376362326433396263346263626231643466642f62797465636f6465616c6c69616e63652f636172676f2d636f6d706f6e656e74&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/cargo-component/tree/main/crates/wit\" title=\"cargo-component/crates/wit at main · bytecodealliance/cargo-component\">cargo-component/crates/wit at main · bytecodealliance/cargo-component</a></div><div class=\"message_embed_description\">A Cargo subcommand for creating WebAssembly components based on the component model proposal. - bytecodealliance/cargo-component</div></div></div>",
        "id": 465526644,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1724782594
    },
    {
        "content": "<p>Ooh yeah, <a href=\"https://github.com/bytecodealliance/cargo-component/blob/main/crates/wit/src/lock.rs\">https://github.com/bytecodealliance/cargo-component/blob/main/crates/wit/src/lock.rs</a> looks like great inspiration. Yeah I think this <code>.lock</code> format should definitely live in <code>wasm-pkg-tools</code></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/cargo-component/blob/main/crates/wit/src/lock.rs\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/ac0d279552b5b9edc292d1f1ce47b6f05f3fd4a2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323261646239393139386363376365623363646137323432363633396136303932363438326165373633353237376362326433396263346263626231643466642f62797465636f6465616c6c69616e63652f636172676f2d636f6d706f6e656e74&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/cargo-component/blob/main/crates/wit/src/lock.rs\" title=\"cargo-component/crates/wit/src/lock.rs at main · bytecodealliance/cargo-component\">cargo-component/crates/wit/src/lock.rs at main · bytecodealliance/cargo-component</a></div><div class=\"message_embed_description\">A Cargo subcommand for creating WebAssembly components based on the component model proposal. - bytecodealliance/cargo-component</div></div></div>",
        "id": 465527132,
        "sender_full_name": "Brooks Townsend",
        "timestamp": 1724782720
    },
    {
        "content": "<p>If you want you should come to the packaging meeting tomorrow.  Or we could hop on a call somewhere else.  Or chat here.  But it would be cool to exchange some ideas about this.  I've been doing a bad job of keeping up to date with Taylor's progress, but I think atm it still only interacts with warg?</p>",
        "id": 465527469,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1724782839
    },
    {
        "content": "<p>I may attend the packaging meeting tomorrow <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> Taylor's been rocking it, I was able to use this to pull all the <a href=\"mailto:wasi@0.2.0\">wasi@0.2.0</a> deps via OCI from the released GitHub packages <a href=\"https://github.com/orgs/WebAssembly/packages?repo_name=WASI\">https://github.com/orgs/WebAssembly/packages?repo_name=WASI</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/orgs/WebAssembly/packages?repo_name=WASI\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/33bfd30bde61bfd938502e4c1fdeaa24486f1e2b/68747470733a2f2f6769746875622e6769746875626173736574732e636f6d2f6173736574732f6769746875622d6f63746f6361742d3133633836623862333336642e706e67&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/orgs/WebAssembly/packages?repo_name=WASI\" title=\"Build software better, together\">Build software better, together</a></div><div class=\"message_embed_description\">GitHub is where people build software. More than 100 million people use GitHub to discover, fork, and contribute to over 420 million projects.</div></div></div>",
        "id": 465528338,
        "sender_full_name": "Brooks Townsend",
        "timestamp": 1724783166
    },
    {
        "content": "<p>So in the end after running through my PR I had the components and the lockfile:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"err\">➜</span><span class=\"w\"> </span><span class=\"n\">lt</span><span class=\"w\"> </span><span class=\"n\">wit</span>\n<span class=\"n\">Permissions</span><span class=\"w\"> </span><span class=\"n\">Size</span><span class=\"w\"> </span><span class=\"n\">User</span><span class=\"w\">   </span><span class=\"n\">Date</span><span class=\"w\"> </span><span class=\"n\">Modified</span><span class=\"w\"> </span><span class=\"n\">Name</span>\n<span class=\"n\">drwxr</span><span class=\"o\">-</span><span class=\"n\">xr</span><span class=\"o\">-</span><span class=\"n\">x</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"n\">wit</span><span class=\"o\">/</span>\n<span class=\"n\">drwxr</span><span class=\"o\">-</span><span class=\"n\">xr</span><span class=\"o\">-</span><span class=\"n\">x</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wkg_deps</span><span class=\"o\">/</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">26</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_cli_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">  </span><span class=\"mf\">3.6</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_clocks_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">29</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_filesystem_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">38</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_http_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">14</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_io_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">  </span><span class=\"mf\">3.4</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wasi_random_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">52</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">│</span><span class=\"w\">  </span><span class=\"err\">└──</span><span class=\"w\"> </span><span class=\"n\">wasi_sockets_0</span><span class=\"p\">.</span><span class=\"mf\">2.0.</span><span class=\"n\">wasm</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">  </span><span class=\"mf\">1.3</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">56</span><span class=\"w\">  </span><span class=\"err\">├──</span><span class=\"w\"> </span><span class=\"n\">wkg</span><span class=\"p\">.</span><span class=\"n\">lock</span>\n<span class=\"p\">.</span><span class=\"n\">rw</span><span class=\"o\">-</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"n\">r</span><span class=\"o\">--</span><span class=\"w\">   </span><span class=\"mi\">133</span><span class=\"w\"> </span><span class=\"n\">brooks</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"n\">Aug</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"mi\">37</span><span class=\"w\">  </span><span class=\"err\">└──</span><span class=\"w\"> </span><span class=\"n\">world</span><span class=\"p\">.</span><span class=\"n\">wit</span>\n</code></pre></div>",
        "id": 465528433,
        "sender_full_name": "Brooks Townsend",
        "timestamp": 1724783221
    },
    {
        "content": "<p>awesome</p>",
        "id": 465528514,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1724783256
    }
]