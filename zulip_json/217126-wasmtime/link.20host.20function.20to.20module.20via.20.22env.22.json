[
    {
        "content": "<p>hello! <span class=\"user-mention\" data-user-id=\"276003\">@zach</span> and I are working on a host environment and have run into an issue now that we're attempting to execute wasm code compiled from other languages. </p>\n<p>when executing a Rust module:</p>\n<div class=\"codehilite\"><pre><span></span>Caused by:\n    Link error: env/list_sites: unknown import function: function not provided&#39;, src/bin/host-wasm.rs:7:16\n</pre></div>\n\n\n<p>We also observe similar behavior when executing wasm code compiled from C. It seems like we can't define the host functions (in Rust) on the \"env\" name. We are using the <code>Module::new_with_name</code> fn, but possibly incorrectly? ex:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Module</span>::<span class=\"n\">new_with_name</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"p\">.</span><span class=\"n\">as_ref</span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"s\">&quot;env&quot;</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span><span class=\"w\"></span>\n</pre></div>\n\n\n<p>Any tips would be much appreciated!</p>",
        "id": 191930408,
        "sender_full_name": "Steve Manuel",
        "timestamp": 1585247842
    },
    {
        "content": "<p>The imports for the instance needs to be resolved as documented in <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/docs/embed-rust.md#importing-host-functionality\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/docs/embed-rust.md#importing-host-functionality\">https://github.com/bytecodealliance/wasmtime/blob/master/docs/embed-rust.md#importing-host-functionality</a> , means exports names needs to be resolved. A week ago the <code>Linker</code> helper was add, check <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/crates/api/src/linker.rs#L218\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/crates/api/src/linker.rs#L218\">https://github.com/bytecodealliance/wasmtime/blob/master/crates/api/src/linker.rs#L218</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/blob/master/docs/embed-rust.md#importing-host-functionality\" style=\"background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/docs/embed-rust.md#importing-host-functionality\" title=\"bytecodealliance/wasmtime\">bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">Standalone JIT-style runtime for WebAssembly, using Cranelift - bytecodealliance/wasmtime</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/blob/master/crates/api/src/linker.rs#L218\" style=\"background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/crates/api/src/linker.rs#L218\" title=\"bytecodealliance/wasmtime\">bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">Standalone JIT-style runtime for WebAssembly, using Cranelift - bytecodealliance/wasmtime</div></div></div>",
        "id": 191931499,
        "sender_full_name": "Yury Delendik",
        "timestamp": 1585248367
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253991\">@Yury Delendik</span> - that definitely helped, now bumping into some other issues :) Appreciate your quick reply!!</p>",
        "id": 191936052,
        "sender_full_name": "Steve Manuel",
        "timestamp": 1585250533
    }
]