[
    {
        "content": "<p>Hi guys, just upgraded our stuff to latest wasmtime &amp; seems breakpoint behaviour has changed.</p>\n<p>Previously got lldb::eStopReasonBreakpoint event on a breakpoint.<br>\nNow apparently  lldb::eStopReasonException</p>\n<p>Does anyone know anything about this, please. Is it intentional ? A regression of some kind ? <br>\nDo I have something setup wrong ?</p>\n<p>Haven't worked on this code for quite some time so very rusty &amp; may be user error.</p>",
        "id": 353737840,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682672312
    },
    {
        "content": "<p>Rebuilt my previous (working) wasmtime from scratch on same system to attempt to determine whether something else on my system responsible for regression. Triggers breakpoint as expected.</p>",
        "id": 353746159,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682673429
    },
    {
        "content": "<p>reviewing previous releases - the one I was working from was pre-1.0 ... to attempt to figure out where the regression/change occured.</p>",
        "id": 353755803,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682674609
    },
    {
        "content": "<p>weird. 1.0.1 also generates an exception - so change isnt recent.</p>",
        "id": 353760594,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682675145
    },
    {
        "content": "<p>fresh pull of 0.3.0 which I was working from acting unexpectedly, so my issue for the time being.</p>",
        "id": 353768605,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682676138
    },
    {
        "content": "<p>v0.31.0 triggers breakpoints correctly. v0.32.0, the next tagged release triggers an exception &amp; subsequent releases trigger exceptions.</p>",
        "id": 353847208,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682686097
    },
    {
        "content": "<p>[ above should have said 0.30.0 not 0.3.0 but in any case, that release is irrelevant - the change in behaviour occurs between 0.31.0 &amp; 0.32.0 ]</p>",
        "id": 353848884,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682686291
    },
    {
        "content": "<p>Seems this is the cause of the regression :</p>\n<p>Revision: ce67e7fcd1d2d6da1899d2b46cc41ef877bd9462<br>\nAuthor: Amanieu d'Antras &lt;<a href=\"mailto:amanieu@gmail.com\">amanieu@gmail.com</a>&gt;<br>\nDate: 02/12/2021 11:53:04<br>\nMessage:<br>\nFix ownership in *_vec_new functions in the C API</p>\n<p>These functions are specified to take ownership of the objects in the given slice, not clone them.</p>\n<p>Modified: crates/c-api/src/vec.rs</p>",
        "id": 353891802,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682691045
    },
    {
        "content": "<p>yup, replacing those couple of lines with previous implementation restores Breakpoint behaviour (minimal testing thus far).<br>\nnext will try migrating that fix to trunk to see if that resolves regression there.<br>\nbeyond that, this is rust code I have no clue about so will have to defer to others for complete resolution.<br>\nI'm going as far as just get it working again.</p>",
        "id": 353900985,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682692033
    },
    {
        "content": "<p>yup, revert of that change to trunk gets breakpoints running again. yay :)</p>",
        "id": 353917441,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682693868
    },
    {
        "content": "<p>needs a little more testing, then will push if wanted.</p>",
        "id": 353917907,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682693918
    },
    {
        "content": "<p>as to the clone/ownership issue the change was supposed to address, its implications &amp; why it generates an exception, dunno.<br>\nI need working recent version. this can be considered in more depth later. worked before that change, works with it removed. what it's supposed to do needs further consideration to avoid debugger breakpoint regression.</p>",
        "id": 353919530,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682694083
    },
    {
        "content": "<p>likely a duplicate release of something if was assumed cloned before &amp; behaviour changed to ownership change. so could be fixed properly by tracking that down, but beyond scope of my current work.</p>",
        "id": 353922423,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682694389
    },
    {
        "content": "<p>that works for me :) &amp; gets this running wasmtime trunk.<br>\n<a href=\"http://advance-software.com/develop\">advance-software.com/develop</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"http://advance-software.com/develop\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/b1f8aab018684565453b07fa130bd90a0e154afe\\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"http://advance-software.com/develop\" title=\"Advance Software\">Advance Software</a></div><div class=\"message_embed_description\">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div>",
        "id": 353947934,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682697152
    },
    {
        "content": "<p>I dont have permission to push apparently so here's the change in its current form. </p>\n<p><a href=\"https://pastebin.com/2Yt3FG9E\">https://pastebin.com/2Yt3FG9E</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/2Yt3FG9E\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/2Yt3FG9E\" title=\" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com\"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 353952431,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682697637
    },
    {
        "content": "<p>Referenced here, as perhaps the same issue :  <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3999\">https://github.com/bytecodealliance/wasmtime/issues/3999</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/issues/3999\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/b6f2800bc4085cbfbde6af22d2b3b3622e29830f\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f373731663963653532326262613563633339333334613064336638303834623138316361373830386231336435626632356261393136626165636530613234662f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f33393939)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/issues/3999\" title=\"Assertion in debugger mode (left &lt; right) 路 Issue #3999 路 bytecodealliance/wasmtime\">Assertion in debugger mode (left &lt; right) 路 Issue #3999 路 bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">Test Case preinitialized.mov ( couldn't upload .wasm file so I'd changed extension to .mov, it is actually .wasm file) Steps to Reproduce RUST_BACKTRACE=1 gdb --args wasmtime run -g preinitialized....</div></div></div>",
        "id": 353991525,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682702478
    },
    {
        "content": "<p>If you run valgrind on your program built against the latest wasmtime version without your patch does it give any errors?</p>",
        "id": 353997182,
        "sender_full_name": "bjorn3",
        "timestamp": 1682703230
    },
    {
        "content": "<p>Hi Bjorn, can't run valgrind as windows user but could run drmemory. cant go much deeper as we're severely resource constrained so interaction must be limited to fire fighting for now. fire out - debugging working again.</p>\n<p>concerned this has regressed for 17 months now. does nobody else use a debugger ? do we have a test that ensures debugger breakpoints are emitted properly ?</p>\n<p>link with issue 3999 perhaps false but the issue itself genuine &amp; corrected with this patch.</p>",
        "id": 354009789,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682704920
    },
    {
        "content": "<p>let me see if I can get some useful diagnostics out of this.</p>",
        "id": 354014212,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682705555
    },
    {
        "content": "<p>What would be most helpful is a minimal test program demonstrating the issue. As far as I know, Wasmtime doesn't have anything to do with emitting breakpoints, so I don't understand what behavior you were expecting.</p>",
        "id": 354021974,
        "sender_full_name": "Jamey Sharp",
        "timestamp": 1682706687
    },
    {
        "content": "<p>Hi Jamey,</p>\n<p>Ran lldbg under visual studio debugger &amp; used it to identify the regression &amp; locate when the code regressed. That's all I've got for now. Its using some lldb API I don't fully understand yet as inherited code. Perhaps as we have a behaviour change, the  issue causing the exception is in the app. Will investigate further. Will see if I can get lldb command line version to exhibit same behaviour.</p>\n<p>My version : <a href=\"https://github.com/adv-sw/lldbg\">https://github.com/adv-sw/lldbg</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/adv-sw/lldbg\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/9f607682d88fb6be9b11e715af9185e1227863e7\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653339323662396631663066396264383530306262373264636439623332396538333435626264396364306230373132646232393439323161626438343564642f6164762d73772f6c6c646267)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/adv-sw/lldbg\" title=\"GitHub - adv-sw/lldbg: A lightweight native GUI for LLDB.\">GitHub - adv-sw/lldbg: A lightweight native GUI for LLDB.</a></div><div class=\"message_embed_description\">A lightweight native GUI for LLDB. Contribute to adv-sw/lldbg development by creating an account on GitHub.</div></div></div>",
        "id": 354024717,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682707098
    },
    {
        "content": "<p>With above fix, the following is hit : <a href=\"https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127\">https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127</a></p>\n<p>without it, get an exception. That's all I currently know.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/9f607682d88fb6be9b11e715af9185e1227863e7\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653339323662396631663066396264383530306262373264636439623332396538333435626264396364306230373132646232393439323161626438343564642f6164762d73772f6c6c646267)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/adv-sw/lldbg/blob/master/src/Application.cpp#L2127\" title=\"lldbg/Application.cpp at master 路 adv-sw/lldbg\">lldbg/Application.cpp at master 路 adv-sw/lldbg</a></div><div class=\"message_embed_description\">A lightweight native GUI for LLDB. Contribute to adv-sw/lldbg development by creating an account on GitHub.</div></div></div>",
        "id": 354025558,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682707220
    },
    {
        "content": "<p>Specifically a lldb::eStopReasonException which isn't handled by the above code, but I can see it in the Visual Studio debugger.</p>\n<p>Looks like will need a debug build of lldb to figure out why that's getting emitted.</p>",
        "id": 354026109,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682707304
    },
    {
        "content": "<p>I'll investigate this a little but with respect, its not my problem. The patch caused a regression in a key component - lldb debugger.<br>\nThe patch should be backed out as debugger was functioning perfectly well before it was introduced and does so again with it removed.</p>\n<p>Patch should be re-accepted when it doesnt cause failure side effect. Fixing may be non-trivial &amp; production work needs to proceed.</p>",
        "id": 354289761,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682762126
    },
    {
        "content": "<p>An issue of contention may be, is lldbg using lldb API correctly. perhaps there is a programming error there. dont know at this point if fault is exhibited by lldb itself. will attempt to repro there when I get a minute.</p>",
        "id": 354296068,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682762950
    },
    {
        "content": "<p>Are you trying to reuse any of the objects passed to <code>wasm_*_vec_new</code>? If so make sure to clone them. Accoring to the commit message it was documented that <code>wasm_*_vec_new</code> is taking ownership, but the implementation incorrectly cloned them instead. That commit fixes the discrepancy by changing the implementation to take ownership as documented.</p>",
        "id": 354297665,
        "sender_full_name": "bjorn3",
        "timestamp": 1682763166
    },
    {
        "content": "<p>See <a href=\"https://github.com/bytecodealliance/wasmtime/pull/3582\">https://github.com/bytecodealliance/wasmtime/pull/3582</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/pull/3582\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/47a275b8bfe8b779dda634acbcb773f66ff138ad\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363133346163373664643336393336353637626339353036393433643537643731656261623238376561346334646466353237323665653261663163356337632f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f33353832)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/pull/3582\" title=\"Fix issues with the C API vector implementation by Amanieu 路 Pull Request #3582 路 bytecodealliance/wasmtime\">Fix issues with the C API vector implementation by Amanieu 路 Pull Request #3582 路 bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">While working on wasmerio/wasmer#2683 I noticed a few bugs in wasmtime's implementation of the Wasm C API, specifically the vector types.\nThe first issue is the incorrect implementation of Clone us...</div></div></div>",
        "id": 354297955,
        "sender_full_name": "bjorn3",
        "timestamp": 1682763205
    },
    {
        "content": "<p>lldbg is an inherited project. I didnt write it. its using lldb interface. like I say, its possible there's an error in api use. unknown at this point.</p>",
        "id": 354298291,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682763245
    },
    {
        "content": "<p>I meant the use of <code>wasm_*_vec_new</code> in the code you wrote, not in the debugger.</p>",
        "id": 354298546,
        "sender_full_name": "bjorn3",
        "timestamp": 1682763285
    },
    {
        "content": "<p>Note that the <code>wasm_*</code> api's are implemented not just by wasmtime, but also by wasmer and some other wasm engines. Before the commit in question wasmtime's implementation didn't match the other implementations.</p>",
        "id": 354299227,
        "sender_full_name": "bjorn3",
        "timestamp": 1682763368
    },
    {
        "content": "<p>will simplify repro as far as possible so we can eliminate or otherwise that concern. thanks.</p>",
        "id": 354300204,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682763509
    },
    {
        "content": "<p>building debug lldb is taking forever. left it going overnight &amp; still hadnt linked in the morning. trying on ms azure cloud thing.<br>\nif I'm to undertake heavy development work, I need a machine that can handle it. happy to contribute but not a magician :)</p>",
        "id": 354620990,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682838453
    },
    {
        "content": "<p>my quick fix is the patch I provided which is sufficient for our purposes for the time being. this is going beyond my needs.</p>",
        "id": 354621104,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682838527
    },
    {
        "content": "<p>I'm running a very old version of wasi. could be that's the issue if nobody else experiencing a problem. will upgrade when I can figure out where to obtain latest wasi from.</p>",
        "id": 354634561,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682844263
    },
    {
        "content": "<p>from this : <a href=\"https://docs.wasmtime.dev/wasm-c.html\">https://docs.wasmtime.dev/wasm-c.html</a></p>\n<p>I get latest wasi by building llvm/clang for webassembly target ?</p>",
        "id": 354636059,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682844873
    },
    {
        "content": "<p><a href=\"https://github.com/WebAssembly/wasi-sdk/releases\">https://github.com/WebAssembly/wasi-sdk/releases</a></p>\n<p>apologies, going a little all over the place at the moment getting up to date.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-sdk/releases\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/2371c7294b7f005d95d01efd60779f5d506d7b4a\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343131323036336536613566633139373439383234373037313932663934343239633666386131306331616330616236336433373866383739353734383532372f576562417373656d626c792f776173692d73646b)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-sdk/releases\" title=\"Releases 路 WebAssembly/wasi-sdk\">Releases 路 WebAssembly/wasi-sdk</a></div><div class=\"message_embed_description\">WASI-enabled WebAssembly C/C++ toolchain. Contribute to WebAssembly/wasi-sdk development by creating an account on GitHub.</div></div></div>",
        "id": 354637435,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682845336
    },
    {
        "content": "<p>built lldb &amp; clang in azure cloud as my local machine apparently has issues. debug build completed. building release version too so we have clang tools latest for test compilation. slow progress, but progress. switched to wasi 20 &amp; compiled a simple test successfully.</p>",
        "id": 354646472,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682848315
    },
    {
        "content": "<p>doh. yesterday's local lldb build failed coz I over compensated for an out of memory error &amp; made a huge swap file on that drive, leaving insufficient room for build directory, so its stalled during linking <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 354689550,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682862543
    },
    {
        "content": "<p>update: our stuff running latest wasmtime, latest wasi, latest llvm. now we're up to date, will investigate cause of the exception.</p>",
        "id": 354822048,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682931900
    },
    {
        "content": "<p>latest everything same behaviour as previous, with patch, works, without exception.</p>",
        "id": 354927054,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682960394
    },
    {
        "content": "<p>Finally, cause of that exception.</p>\n<p><a href=\"/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png\" title=\"image.png\"><img src=\"/user_uploads/15107/MdztSurglJESbf5hMgtuj4Tg/image.png\"></a></div>",
        "id": 354935258,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682962512
    },
    {
        "content": "<p>dinner then will try to get my head around why its doing that.</p>",
        "id": 354936009,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682962722
    },
    {
        "content": "<p>Error is : \"RVA 0x0 for export ordinal table not found\"</p>\n<p>Currently means nothing to me. Dont yet understand what the problem is.</p>",
        "id": 354940657,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682964078
    },
    {
        "content": "<p>not understanding why an ownership change rather than clone should cause that. its not a duplicate release issue as  I first thought.</p>",
        "id": 354941500,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682964286
    },
    {
        "content": "<p>next step, I think is to simplify the repro.</p>",
        "id": 354941866,
        "sender_full_name": "Steve Williams",
        "timestamp": 1682964374
    },
    {
        "content": "<p>I see Microsoft has documentation on the \"export ordinal table\" as part of their PE format documentation, if that helps any: <a href=\"https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table\">https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/ca6f0df6d0c485fdc91cdcf10df670490c2092fa\\/68747470733a2f2f6c6561726e2e6d6963726f736f66742e636f6d2f656e2d75732f6d656469612f6c6f676f732f6c6f676f2d6d732d736f6369616c2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://learn.microsoft.com/en-us/windows/win32/debug/pe-format#export-ordinal-table\" title=\"PE Format - Win32 apps\">PE Format - Win32 apps</a></div><div class=\"message_embed_description\">This specification describes the structure of executable (image) files and object files under the Windows family of operating systems. These files are referred to as Portable Executable (PE) and Common Object File Format (COFF) files, respectively.</div></div></div>",
        "id": 354944591,
        "sender_full_name": "Jamey Sharp",
        "timestamp": 1682965072
    },
    {
        "content": "<p>So, the issue appears to be  in liblldb.dll!ObjectFilePECOFF::AppendFromExportTable which is PE specific, which is Windows platform.</p>\n<p>I had to patch lldb years ago to get it running on Windows. The patch wasnt accepted as they require a test for every patch &amp; I'm swamped with work as it is. Practical upshot: Fairly sure nobody else is testing on windows.</p>\n<p>Here's the patch : <a href=\"https://pastebin.com/L1Q1d4hS\">https://pastebin.com/L1Q1d4hS</a></p>\n<p>Patch works latest lldb - 16.0.2</p>\n<p>Not really sure what test can be provided to verify it works &amp; hence why not accepted yet.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/L1Q1d4hS\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/L1Q1d4hS\" title=\"diff --git &quot;a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp&quot; &quot;b/lldb/source - Pastebin.com\">diff --git \"a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp\" \"b/lldb/source - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 355030251,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683005337
    },
    {
        "content": "<p>On Windows, it appears you need to build lldb with x86 as well as web assembly target for it to function.</p>\n<p>I'm using</p>\n<p>cmake -S llvm  -DLLVM_TARGETS_TO_BUILD=\"X86;WebAssembly\" -DCMAKE_BUILD_TYPE=\"Debug\" -DLLVM_ENABLE_PROJECTS=\"clang;lldb;lld\" -B build_d -G Ninja</p>\n<p>Then : ninja lldb</p>\n<p>From the build_d directory.</p>",
        "id": 355032134,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683006141
    },
    {
        "content": "<p>Seem to remember there were issues with debugging native windows binaries last time I looked at this &amp; perhaps still now, though all this is irrelevant. We're not trying to do that. We're trying to figure out why the change of a memory op in wasmtime from clone to re-assign owner causes a fault in the debugger.</p>",
        "id": 355032496,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683006271
    },
    {
        "content": "<p>update: compiled the simplest c program possible :</p>\n<p>void _start() {}</p>\n<p>ran directly under wasmtime.exe rather than our runtime, under lldbg debugger. runs clean.</p>\n<p>so my bug. next steps - reduce our stuff to the point where it no longer faults to identify cause.</p>",
        "id": 355099804,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683022729
    },
    {
        "content": "<p>sounds to me that I should try to find someone to have a look here.</p>",
        "id": 355286433,
        "sender_full_name": "Ralph",
        "timestamp": 1683071984
    },
    {
        "content": "<p>working on a minimal repro. should have something soon.</p>",
        "id": 355329537,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683094113
    },
    {
        "content": "<p>the lldb patch is something I need help with. confirm resolves lldb functionality on windows &amp; accept into trunk. can maintain out of tree but seems silly. helps everyone.</p>",
        "id": 355330580,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683094371
    },
    {
        "content": "<p>windows support obv not important for server based delivery but is for client front end (web browsers, etc.), coz like it or not, windows is the primary end user platform. so we must be solid there.</p>",
        "id": 355354422,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683101615
    },
    {
        "content": "<p>update: got simple test case. test case running standalone works correctly. test case running as plugin for our engine faults the same way our regular web assembly plugin faults. so its something configuration specific or perhaps a fault in our engine having a side effect.</p>\n<p>fun times. will isolate.</p>",
        "id": 355555286,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683132527
    },
    {
        "content": "<p>wheeeeeeeee</p>",
        "id": 355560138,
        "sender_full_name": "Ralph",
        "timestamp": 1683133842
    },
    {
        "content": "<p>hmmm ... suspect this is bug in our engine having a side effect &amp; nothing for anyone else to worry about, but we'll see. narrowing in on it.</p>",
        "id": 355705629,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683190748
    },
    {
        "content": "<p>You DID have my attention, but now I'm merely curious.</p>",
        "id": 355793689,
        "sender_full_name": "Ralph",
        "timestamp": 1683210739
    },
    {
        "content": "<p><em>think</em> I've got something</p>\n<p>http:/advance-software.com/misc/repro.zip</p>\n<p>extracts into your [wasmtime]/examples directory</p>\n<p>so you have [wasmtime]/examples/repro <em>not</em> [wasmtime]/examples/repro/repro</p>\n<p>fault: on windows, when compiled as a win64 visual studio project using included project file, wasm_module_new fails.</p>\n<p>when compiled using \\repro\\native\\make_d or make_r works - console verison.</p>",
        "id": 355793735,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683210751
    },
    {
        "content": "<p>this has been really fiddly to put together so still possibility of something silly on my part.</p>",
        "id": 355794058,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683210818
    },
    {
        "content": "<p>for those not on windows or not wanting to download that large archive which includes full wasi sdk we're linking against &amp; llvm compilation tools being used, here's the wasm native sdk code I'm using.</p>\n<p><a href=\"https://pastebin.com/R4JSYBPC\">https://pastebin.com/R4JSYBPC</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/R4JSYBPC\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/R4JSYBPC\" title=\"/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com\">/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 355794542,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683210910
    },
    {
        "content": "<p>so first step is quick skim over that anyone curious, plz. any obvious derp on my part, plz.</p>",
        "id": 355794716,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683210939
    },
    {
        "content": "<p>happy to run it here so we can figure out why wasm_module_new fails &amp; that's my next job. will figure it out all the way if I can.</p>",
        "id": 355795351,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683211046
    },
    {
        "content": "<p>debug build of the native win64 .exe doesn't fail, release does which is always a fun situation.<br>\nthey both compile to the same location as of that drop - should tweak that.</p>",
        "id": 355796304,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683211229
    },
    {
        "content": "<p>update : <a href=\"http://advance-software.com/misc/repro_2.zip\">http://advance-software.com/misc/repro_2.zip</a></p>\n<p>exactly the same as the first drop except native win64 example links to repro_d.exe &amp; repro_r.exe instead of both to repro.exe</p>",
        "id": 355798619,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683211680
    },
    {
        "content": "<p>step 1 - am I doing anything obviously stupid. <br>\nstep 2 - can anyone else reproduce the problem.</p>",
        "id": 355799042,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683211744
    },
    {
        "content": "<p>repro doesn't contain or reference our engine so api use error, genuine wasmtime bug or I'm misunderstanding something.</p>",
        "id": 355800613,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683212035
    },
    {
        "content": "<p>repro release build linking against wasmtime debug build fails so can step through wasmtime &amp; hopefully understand why. more caffeine than a look at that.</p>",
        "id": 355806153,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683213026
    },
    {
        "content": "<p>can step into it but I'm rust stupid so this will be fun :)</p>",
        "id": 355809289,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683213632
    },
    {
        "content": "<p>debug native app, targeting debug wasmtime correctly hits this :<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459\">https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459</a></p>\n<p>release native app, targeting debug wasmtime doesn't &amp; fails.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/e94eb790b0f9fe9f3dc4905a1b3fec13873b667e\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f646463376262313138353065656635643030366162633964353466636362363937393062343339623963356663313834316664363130643937386666386566392f62797465636f6465616c6c69616e63652f7761736d74696d65)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L459\" title=\"wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 路 bytecodealliance/wasmtime\">wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 路 bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>",
        "id": 355813767,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683214403
    },
    {
        "content": "<p>not sure this is the same issue. tried replacing the clone/ownership change to see if behaviour changes &amp; it doesnt.<br>\nso I still perhaps have a stupid in here.</p>",
        "id": 355815477,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683214772
    },
    {
        "content": "<p>though regardless, this is unexpected result as far as I can tell so suggest we nail whatever this is &amp; onwards.</p>",
        "id": 355816086,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683214908
    },
    {
        "content": "<p>native app release build failing here : <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590\">https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/e94eb790b0f9fe9f3dc4905a1b3fec13873b667e\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f646463376262313138353065656635643030366162633964353466636362363937393062343339623963356663313834316664363130643937386666386566392f62797465636f6465616c6c69616e63652f7761736d74696d65)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/blob/4b3c50b147f9f96717becf44bcfcff2de9b06c68/crates/wasmtime/src/module.rs#L590\" title=\"wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 路 bytecodealliance/wasmtime\">wasmtime/module.rs at 4b3c50b147f9f96717becf44bcfcff2de9b06c68 路 bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>",
        "id": 355819444,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683215734
    },
    {
        "content": "<p>\\wasmparser-0.103.0\\src\\parser.rs  <br>\npub fn parse_all(self, mut data: &amp;[u8])</p>\n<p>data is all 0s in the native app release build that's failing.</p>",
        "id": 355822663,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683216385
    },
    {
        "content": "<p>this one is my derp. apologies. data is coming thru 0s release build. so test has an error.</p>",
        "id": 355824385,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683216747
    },
    {
        "content": "<p>so, ummmm. </p>\n<p>int count = fread(<a href=\"http://wasm.data\">wasm.data</a>, file_size,1, file);</p>\n<p>fixed by doing this instead :<br>\nint count = fread(<a href=\"http://wasm.data\">wasm.data</a>, 1, file_size, file);</p>\n<p>have no idea why that was failing release build. </p>\n<p>so test fixed &amp; currently working. which is good coz this wasnt a repro for the original problem.</p>",
        "id": 355827567,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683217538
    },
    {
        "content": "<p>hence anyone looking at my repro, plz drop it for now. its not a repro for the problem we're looking at. was a test error.<br>\nnow I have a sane test environment will see if I can repro the actual problem.</p>",
        "id": 355827808,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683217589
    },
    {
        "content": "<p>&amp; changed that to a size_t now its working</p>",
        "id": 355829662,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683218019
    },
    {
        "content": "<p>doesnt require anyone else on this right now as we dont have a repro yet. will try again now test environment sane. update when I have something.</p>",
        "id": 355830201,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683218145
    },
    {
        "content": "<p>Got it.</p>\n<p>The call : </p>\n<p>wasm_functype_new_1_1(val_i32, val_i32);</p>\n<p>in : <a href=\"https://pastebin.com/ZGKuqzPt\">https://pastebin.com/ZGKuqzPt</a></p>\n<p>faults with whatever trunk I'm running (will update so at tip), passes with my workaround patch : <a href=\"https://pastebin.com/2Yt3FG9E\">https://pastebin.com/2Yt3FG9E</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/ZGKuqzPt\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/ZGKuqzPt\" title=\"/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com\">/*Wasmtime failure repro.Author: Steve Williams, Advance SoftwareCom - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/2Yt3FG9E\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/2Yt3FG9E\" title=\" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com\"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 356041380,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683289942
    },
    {
        "content": "<p>don't think its specific to the wasm I'm loading but we'll see. will reduce to minimal example &amp; move to tip.</p>",
        "id": 356041795,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683290033
    },
    {
        "content": "<p>fault exists wasmtime tip</p>",
        "id": 356049026,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683291463
    },
    {
        "content": "<p>minimal repro.</p>\n<p>this faults for me wasmtime trunk.</p>\n<p><a href=\"https://pastebin.com/m2KNqPEK\">https://pastebin.com/m2KNqPEK</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/m2KNqPEK\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/m2KNqPEK\" title=\"#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;wasm.h&gt;#include &lt;wasmtime.h - Pastebin.com\">#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;wasm.h&gt;#include &lt;wasmtime.h - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 356051772,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683292018
    },
    {
        "content": "<p>windows - dunno about other o/s.</p>",
        "id": 356051866,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683292039
    },
    {
        "content": "<p>passes with my workaround patch : <a href=\"https://pastebin.com/2Yt3FG9E\">https://pastebin.com/2Yt3FG9E</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://pastebin.com/2Yt3FG9E\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/0dd7fd84c0d50799f92983226fb62fb426402b54\\/68747470733a2f2f706173746562696e2e636f6d2f692f66616365626f6f6b2e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://pastebin.com/2Yt3FG9E\" title=\" crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com\"> crates/c-api/src/vec.rs | 4 ++-- 1 file changed, 2 insertions(+), 2 deletions - Pastebin.com</a></div><div class=\"message_embed_description\">Pastebin.com is the number one paste tool since 2002. Pastebin is a website where you can store text online for a set period of time.</div></div></div>",
        "id": 356052790,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683292180
    },
    {
        "content": "<p>this thread far more verbose than it needs to be. apologies.</p>\n<p>reduced to the following hopefully actionable issue : <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6347\">https://github.com/bytecodealliance/wasmtime/issues/6347</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/issues/6347\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/def45454dd69f0b8cfa70334dd6c121029b02046\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353262326661616162616663333637396265663738633435393235393464373131383931343865653734376361336362343162643839643432313134356138612f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f36333437)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/issues/6347\" title=\"wasm_functype_new_1_1 &amp; similar faulting 路 Issue #6347 路 bytecodealliance/wasmtime\">wasm_functype_new_1_1 &amp; similar faulting 路 Issue #6347 路 bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">Test Case #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;wasm.h&gt; #include &lt;wasmtime.h&gt; int main() { wasm_config_t* wasm_config = wasm_config_new(); wasmtime_config_debug_info_set(wasm_config, tru...</div></div></div>",
        "id": 356057946,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683293180
    },
    {
        "content": "<p>thanks bjorn3  :)</p>\n<p>weird api tripped me up, apparently. will rework as advised. excess allocation that way, but if its the spec, its the spec :)</p>",
        "id": 356065117,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683294575
    },
    {
        "content": "<p>perhaps debug build of wasmtime could fail gracefully in that api misuse case as its quite unintuitive.</p>",
        "id": 356066721,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683294901
    },
    {
        "content": "<p>you'd think what's effectively a constant could be reused multiple times.</p>",
        "id": 356066868,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683294932
    },
    {
        "content": "<p>so we never call wasm_valtype_delete ? faults when I do so assume not, so seems odd that's an api function.</p>",
        "id": 356067895,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683295149
    },
    {
        "content": "<p>resolved. thanks guys. weird api but is what it is.</p>",
        "id": 356079080,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683297274
    },
    {
        "content": "<p>from a language perspective, c has no way of saying after you pass this thing to me, you may never use it again - the api own keyword must be a null macro. best you can do is pass thing ** &amp; inside the call *thing = NULL so caller cannot reuse.</p>",
        "id": 356082108,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683297852
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">__owned</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">NULL</span><span class=\"p\">;</span>\n<span class=\"n\">void</span><span class=\"w\"> </span><span class=\"n\">Consume</span><span class=\"p\">(</span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"o\">**</span><span class=\"n\">thing</span><span class=\"p\">)</span>\n<span class=\"p\">{</span>\n<span class=\"w\">   </span><span class=\"n\">__owned</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">thing</span><span class=\"p\">;</span>\n<span class=\"w\">   </span><span class=\"o\">*</span><span class=\"n\">thing</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">NULL</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">int</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n<span class=\"w\">   </span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">my_thing</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span>\n<span class=\"w\">   </span><span class=\"n\">Consume</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">my_thing</span><span class=\"w\"> </span><span class=\"p\">);</span>\n<span class=\"w\">   </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"n\">my_thing</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">NULL</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 356085317,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683298541
    },
    {
        "content": "<p>or, I guess, upgrade C :)</p>",
        "id": 356086346,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683298767
    },
    {
        "content": "<p>this is my new favorite soap opera</p>",
        "id": 356120018,
        "sender_full_name": "Ralph",
        "timestamp": 1683306196
    },
    {
        "content": "<p>apologies. haven't upgraded our wasmtime or wasi stuff in ages so had a bit of an omg what moment :)</p>\n<p>but now we're up to date. thanks guys :)</p>\n<p><a href=\"http://advance-software.com/develop\">http://advance-software.com/develop</a><br>\n<a href=\"http://advance-software.com/products/browser\">http://advance-software.com/products/browser</a><br>\n<a href=\"http://advance-software.com/xsg\">http://advance-software.com/xsg</a></p>\n<p>still early but we've got a next-gen browser &amp; next-gen web grammar (xsg) featuring web assembly secure programming interface, currently powered by wasmtime.</p>\n<p>we're only using the wasm api so theoretically could swap out for any of the others, but happy with how things are for the now.</p>\n<p>all the hard work very much appreciated.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"http://advance-software.com/develop\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/b1f8aab018684565453b07fa130bd90a0e154afe\\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"http://advance-software.com/develop\" title=\"Advance Software\">Advance Software</a></div><div class=\"message_embed_description\">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"http://advance-software.com/products/browser\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/b1f8aab018684565453b07fa130bd90a0e154afe\\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"http://advance-software.com/products/browser\" title=\"Advance Software\">Advance Software</a></div><div class=\"message_embed_description\">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"http://advance-software.com/xsg\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/b1f8aab018684565453b07fa130bd90a0e154afe\\/687474703a2f2f616476616e63652d736f6674776172652e636f6d2f696d616765732f6765745f696e66696e6974792e706e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"http://advance-software.com/xsg\" title=\"Advance Software\">Advance Software</a></div><div class=\"message_embed_description\">Developers of the &lt;&gt;&lt;&gt; Infinity Immersive Web Browser.</div></div></div>",
        "id": 356135555,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683310474
    },
    {
        "content": "<p>happy to add some credits if there's a document for stuff like that or we can put one together.</p>",
        "id": 356136319,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683310697
    },
    {
        "content": "<p>&amp; this thread can go :)</p>",
        "id": 356136672,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683310817
    },
    {
        "content": "<p>WUT NO</p>",
        "id": 356140607,
        "sender_full_name": "Ralph",
        "timestamp": 1683311943
    },
    {
        "content": "<p>DAMMIT STEVE, PLEASE KEEP DIGGING FOR MORE</p>",
        "id": 356140639,
        "sender_full_name": "Ralph",
        "timestamp": 1683311955
    },
    {
        "content": "<p>I'm done for now :) debugger needs refinement but that's a side project. lldb needs that patch pushing but can maintain out of tree.<br>\nfread weirdness - very odd but not my problem :) we're solid. thanks all :)</p>",
        "id": 356141395,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683312194
    },
    {
        "content": "<p>&amp; wasm sdk is what it is. not a big deal, just gotta know how to drive :)</p>",
        "id": 356141575,
        "sender_full_name": "Steve Williams",
        "timestamp": 1683312248
    }
]