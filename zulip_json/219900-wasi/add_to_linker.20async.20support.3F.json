[
    {
        "content": "<p>Hi! <br>\nI'm doing a toy project where I'm trying to run wasmtime with async_support with a custom executor, and it seems like the wasmtime_wasi::add_to_linker doesn't support adding the functions as async? Am I doing something simple wrong? </p>\n<p>I thought i could work around it by using the tokio exported one which sets the macro Async token, even if I'm not using tokio, but that still didn't work. I still get a panic:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">must</span><span class=\"w\"> </span><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">instantiation</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">enabled</span><span class=\"o\">'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">coo</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">github</span><span class=\"p\">.</span><span class=\"n\">com</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"n\">ecc6299db9ec823</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">1.0.0</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">173</span>:<span class=\"mi\">9</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Do i have to add to the linker instance manually if I want async support? I couldn't find any good examples or docs online. Thanks!</p>",
        "id": 299865401,
        "sender_full_name": "Chris Oo",
        "timestamp": 1663718514
    },
    {
        "content": "<p>ah... I see the issue. I was using <code>Linker::module</code> instead of <code>Linker::module_async</code> :(. Wish the error message was a bit more helpful</p>",
        "id": 299865807,
        "sender_full_name": "Chris Oo",
        "timestamp": 1663718799
    }
]