[
    {
        "content": "<p>Hi all!</p>\n<p>I've been looking for the best way to link worlds dynamically, for example I have two wit worlds:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">world</span><span class=\"w\"> </span><span class=\"n\">runner</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"n\">import</span><span class=\"w\"> </span><span class=\"n\">runner</span><span class=\"o\">-</span><span class=\"k\">impl</span><span class=\"p\">;</span>\n<span class=\"w\">  </span><span class=\"n\">export</span><span class=\"w\"> </span><span class=\"n\">runner</span><span class=\"o\">-</span><span class=\"n\">interface</span><span class=\"p\">;</span>\n\n<span class=\"p\">}</span>\n\n<span class=\"n\">world</span><span class=\"w\"> </span><span class=\"k\">impl</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"n\">export</span><span class=\"w\"> </span><span class=\"n\">runner</span><span class=\"o\">-</span><span class=\"k\">impl</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>I want to be able in my host (wasmtime) to dynamically select the world impl wasm (i can have a few of wasm files with different impls) every time the runner uses it. I've looked at all tests and example, but I couldn't figure what it the best way to do it.</p>\n<p>Thank you</p>",
        "id": 395714281,
        "sender_full_name": "Omer Sadika",
        "timestamp": 1696862525
    },
    {
        "content": "<p>There isn't a <em>great</em> solution for this yet, but you have a couple of options:</p>\n<ul>\n<li>if your components are always generated by wit-bindgen (or otherwise compatible tooling) you can introspect the embedded type information with <a href=\"https://docs.rs/wit-component/latest/wit_component/fn.decode.html\"><code>wit_component::decode</code></a></li>\n<li>you can use <code>wasmparser</code> to inspect the component import/export sections</li>\n</ul>",
        "id": 395717158,
        "sender_full_name": "Lann Martin",
        "timestamp": 1696863354
    },
    {
        "content": "<p>a 3rd option that _might_ work in your case would be to create a world that includes all the <code>import</code>s that might be used by a component, actually instantiate your component linked against that world, then inspect the <a href=\"https://docs.rs/wasmtime/13.0.0/wasmtime/component/struct.Instance.html#method.exports\"><code>Instance::exports</code></a></p>",
        "id": 395717701,
        "sender_full_name": "Lann Martin",
        "timestamp": 1696863519
    }
]