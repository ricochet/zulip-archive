[
    {
        "content": "<p>For my wasm component generated with <code>cargo component build</code>, I get this error when trying to run <code>python -m wasmtime.bindgen test_component.wasm --out-dir ./</code>to generate Python bindings. What could be wrong?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'&lt;</span><span class=\"n\">unnamed</span><span class=\"o\">&gt;'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">2912</span><span class=\"p\">:</span><span class=\"mi\">29</span><span class=\"p\">:</span>\n<span class=\"nc\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">imported</span><span class=\"w\"> </span><span class=\"n\">resources</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">yet</span><span class=\"w\"> </span><span class=\"n\">supported</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n<span class=\"n\">Traceback</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">most</span><span class=\"w\"> </span><span class=\"n\">recent</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"n\">last</span><span class=\"p\">):</span>\n<span class=\"w\">  </span><span class=\"nc\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/runpy.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">196</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">_run_module_as_main</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">_run_code</span><span class=\"p\">(</span><span class=\"n\">code</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">main_globals</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">None</span><span class=\"p\">,</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/runpy.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">_run_code</span>\n<span class=\"w\">    </span><span class=\"n\">exec</span><span class=\"p\">(</span><span class=\"n\">code</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">run_globals</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/bindgen/__main__.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">main</span><span class=\"p\">()</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/bindgen/__main__.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">main</span>\n<span class=\"w\">    </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">generate</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">contents</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/bindgen/__init__.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">151</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">generate</span>\n<span class=\"w\">    </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"p\">.</span><span class=\"n\">generate</span><span class=\"p\">(</span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/bindgen/generated/__init__.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">301</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">generate</span>\n<span class=\"w\">    </span><span class=\"n\">ret</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">lift_callee0</span><span class=\"p\">(</span><span class=\"n\">caller</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ptr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">len0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ptr1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">len2</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/_func.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">__call__</span>\n<span class=\"w\">    </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">enter_wasm</span><span class=\"p\">(</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nc\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/contextlib.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">142</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">__exit__</span>\n<span class=\"w\">    </span><span class=\"n\">next</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">gen</span><span class=\"p\">)</span>\n<span class=\"w\">  </span><span class=\"n\">File</span><span class=\"w\"> </span><span class=\"s\">\"/Users/link/.pyenv/versions/3.10.14/lib/python3.10/site-packages/wasmtime/_func.py\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">265</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">enter_wasm</span>\n<span class=\"w\">    </span><span class=\"n\">raise</span><span class=\"w\"> </span><span class=\"n\">trap_obj</span>\n<span class=\"n\">wasmtime</span><span class=\"p\">.</span><span class=\"n\">_trap</span><span class=\"p\">.</span><span class=\"n\">Trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x22002d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__rust_start_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21fec7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21fc7d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">rust_panic_with_hook</span><span class=\"p\">::</span><span class=\"n\">h8bb4f94cf9e68e20</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21f0d6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">begin_panic_handler</span><span class=\"p\">::{{</span><span class=\"n\">closure</span><span class=\"p\">}}::</span><span class=\"n\">h2c354a3372fcca00</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21f006</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">sys_common</span><span class=\"p\">::</span><span class=\"n\">backtrace</span><span class=\"p\">::</span><span class=\"n\">__rust_end_short_backtrace</span><span class=\"p\">::</span><span class=\"n\">hf791a0fba63af5e9</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21f815</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_begin_unwind</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x22d087</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">panic_fmt</span><span class=\"p\">::</span><span class=\"n\">haadcabb094f4c85b</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x17351</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!&lt;</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">FunctionBindgen</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">wit_bindgen_core</span><span class=\"p\">::</span><span class=\"n\">abi</span><span class=\"p\">::</span><span class=\"n\">Bindgen</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"n\">emit</span><span class=\"p\">::</span><span class=\"n\">h635a20f3d6400f8e</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x29d9d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">wit_bindgen_core</span><span class=\"p\">::</span><span class=\"n\">abi</span><span class=\"p\">::</span><span class=\"n\">Generator</span><span class=\"o\">&lt;</span><span class=\"n\">B</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"n\">emit</span><span class=\"p\">::</span><span class=\"n\">h848ae597d3316472</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2ae1f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">wit_bindgen_core</span><span class=\"p\">::</span><span class=\"n\">abi</span><span class=\"p\">::</span><span class=\"n\">Generator</span><span class=\"o\">&lt;</span><span class=\"n\">B</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"n\">lift</span><span class=\"p\">::</span><span class=\"n\">h81beb8073ceff217</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x3129b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">wit_bindgen_core</span><span class=\"p\">::</span><span class=\"n\">abi</span><span class=\"p\">::</span><span class=\"n\">call</span><span class=\"p\">::</span><span class=\"n\">hb3befabe2422e81c</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0xd9bc</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">Instantiator</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">hb3f0b54582245b85</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0xb80d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">WasmtimePy</span><span class=\"p\">::</span><span class=\"n\">instantiate</span><span class=\"p\">::</span><span class=\"n\">h273134b8fef86c5a</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x670f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">WasmtimePy</span><span class=\"p\">::</span><span class=\"n\">generate</span><span class=\"p\">::</span><span class=\"n\">h769c77b772b97fad</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x36cc2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!&lt;</span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindings</span><span class=\"p\">::</span><span class=\"n\">PythonBindings</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">::</span><span class=\"n\">bindings</span><span class=\"p\">::</span><span class=\"n\">Guest</span><span class=\"o\">&gt;</span><span class=\"p\">::</span><span class=\"n\">generate</span><span class=\"p\">::</span><span class=\"n\">hf29e157707bcbd77</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x36e75</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">bindgen</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">generate</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n</code></pre></div>",
        "id": 468491694,
        "sender_full_name": "link-verses",
        "timestamp": 1725757063
    }
]