[
    {
        "content": "<p>After writing a wasm component in Rust, and building to wasm32-wasi, I am trying to convert it to a wasm component with <code>wasm-tools component new</code> using the <a href=\"https://github.com/bytecodealliance/preview2-prototyping\">https://github.com/bytecodealliance/preview2-prototyping</a> adapter, but when executing the command I get this error:</p>\n<blockquote>\n<p>Error: decoding custom section component-type:aggregate</p>\n<p>Caused by:<br>\n    unsupported component version: 0xa (at offset 0x0)</p>\n</blockquote>\n<p>This only happened after updating all my dependencies. Any ideas?</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/preview2-prototyping\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/96fa33ce36f41c6c2518b9563e5b8eb4498e3230\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f336464306161323938663938663463313231373163326232363261376334663961386237633162653539313731356366633638373131356166613132336337362f62797465636f6465616c6c69616e63652f70726576696577322d70726f746f747970696e67)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/preview2-prototyping\" title=\"GitHub - bytecodealliance/preview2-prototyping: Polyfill adapter for preview1-using wasm modules to call preview2 functions.\">GitHub - bytecodealliance/preview2-prototyping: Polyfill adapter for preview1-using wasm modules to call preview2 functions.</a></div><div class=\"message_embed_description\">Polyfill adapter for preview1-using wasm modules to call preview2 functions. - GitHub - bytecodealliance/preview2-prototyping: Polyfill adapter for preview1-using wasm modules to call preview2 func...</div></div></div>",
        "id": 321581079,
        "sender_full_name": "Ari Seyhun",
        "timestamp": 1673856240
    },
    {
        "content": "<p>The binary format is changing over time for the component model and not all tools are always kept up to date with <code>main</code> of all other tools. What you're seeing here is the <code>main</code> branch of <code>wasm-tools</code> is ahead of what <code>wasmtime</code> and other tooling supports, so binaries produced by <code>wasm-tools</code> main branch can't be consumed by runtimes yet.</p>",
        "id": 321743172,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1673920833
    },
    {
        "content": "<p>Hey there, I have a working demo that uses both <code>wasm-tools</code> and <code>prevew2-prototyping</code> and I am trying my best to keey a compatiable set of dependencies. You can see the wasm-tools commit and preview2-prototyping wasm binary in the repo. <a href=\"https://github.com/Mossaka/keyvalue-component-model-demo\">https://github.com/Mossaka/keyvalue-component-model-demo</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/Mossaka/keyvalue-component-model-demo\" style=\"background-image: url(https\\:\\/\\/uploads\\.zulipusercontent\\.net\\/95e24ba04c363894f7b525b93e4fe22fe4e8d1e6\\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393364303265326636636332316334346436306534646161366634643836343430316162626337346233663738643663326364663036666134383362396232322f4d6f7373616b612f6b657976616c75652d636f6d706f6e656e742d6d6f64656c2d64656d6f)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/Mossaka/keyvalue-component-model-demo\" title=\"GitHub - Mossaka/keyvalue-component-model-demo: A demo repo that shows how to use the latest component model feature in wasmtime to implement a key-value capability defined in a WIT file.\">GitHub - Mossaka/keyvalue-component-model-demo: A demo repo that shows how to use the latest component model feature in wasmtime to implement a key-value capability defined in a WIT file.</a></div><div class=\"message_embed_description\">A demo repo that shows how to use the latest component model feature in wasmtime to implement a key-value capability defined in a WIT file. - GitHub - Mossaka/keyvalue-component-model-demo: A demo ...</div></div></div>",
        "id": 321890655,
        "sender_full_name": "Mossaka (Joe)",
        "timestamp": 1673978073
    }
]