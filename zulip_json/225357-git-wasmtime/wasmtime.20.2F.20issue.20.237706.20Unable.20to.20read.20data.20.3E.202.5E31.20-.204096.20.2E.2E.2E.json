[
    {
        "content": "<p>ac000 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706\">issue #7706</a>:</p>\n<blockquote>\n<p>HI,</p>\n<p>I have a wasi-http component written in C that stores an uploaded file to the filesystem. (it runs under <a href=\"https://github.com/ac000/unit/blob/wasm-wasi-http/src/wasm-wasi-http/src/lib.rs\">this</a>).</p>\n<p>This seems to work fine up to a file size of 2^31 - 4096 (2147479552), i.e 4KiB shy of 2GiB, which seems suspicious ;).</p>\n<p>I'm basically doing</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasi_io_streams_method_input_stream_blocking_read</span><span class=\"p\">(</span>\n<span class=\"w\">                                                        </span><span class=\"n\">b_in_stream</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1024</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"o\">&amp;</span><span class=\"n\">data</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"o\">&amp;</span><span class=\"n\">in_stream_err</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">ok</span><span class=\"p\">)</span>\n<span class=\"w\">                </span><span class=\"k\">break</span><span class=\"p\">;</span>\n\n<span class=\"w\">        </span><span class=\"n\">bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">ptr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">len</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">\"Read : %ld bytes, Wrote : %ld bytes</span><span class=\"se\">\\n</span><span class=\"s\">\"</span><span class=\"p\">,</span>\n<span class=\"w\">               </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">len</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">bytes_wrote</span><span class=\"p\">);</span>\n\n<span class=\"w\">        </span><span class=\"n\">total_bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">bytes_wrote</span><span class=\"p\">;</span>\n<span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">total_bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">content_len</span><span class=\"p\">);</span>\n</code></pre></div>\n<p>With a 2GiB file I see</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8384512</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8384512</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n</code></pre></div>\n<p>The last read was 4KiB short. The next call to <code>wasi_io_streams_method_input_stream_blocking_read()</code> returns <code>false</code>.</p>\n<p>(Note: I've stripped the version information from the function/type names for usability)</p>\n<p>If I try and read the error from <code>in_stream_err</code> I get</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">tokio</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"n\">worker</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">221</span>:<span class=\"mi\">45</span>:\n<span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">handle</span><span class=\"w\"> </span><span class=\"n\">request</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">handle</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n           <span class=\"mi\">0</span>: <span class=\"mh\">0x1d441</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span>:<span class=\"nc\">shim</span><span class=\"o\">!</span><span class=\"n\">indirect</span><span class=\"o\">-</span><span class=\"n\">wasi</span>:<span class=\"nc\">io</span><span class=\"o\">/</span><span class=\"n\">streams</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">rc</span><span class=\"o\">-</span><span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">18</span><span class=\"o\">-</span><span class=\"p\">[</span><span class=\"n\">method</span><span class=\"p\">]</span><span class=\"n\">error</span><span class=\"p\">.</span><span class=\"n\">to</span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"o\">-</span><span class=\"n\">string</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span>: <span class=\"mh\">0x1772</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wasi_io_streams_method_error_to_debug_string</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">proxy</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">738</span>:<span class=\"mi\">3</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span>: <span class=\"mh\">0x26e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">exports_wasi_http_incoming_handler_handle</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">90</span>:<span class=\"mi\">4</span>\n<span class=\"w\">           </span><span class=\"mi\">3</span>: <span class=\"mh\">0x2299</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">__wasm_export_exports_wasi_http_incoming_handler_handle</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">proxy</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">2098</span>:<span class=\"mi\">3</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">unknown</span><span class=\"w\"> </span><span class=\"n\">handle</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>_Maybe_ because <code>in_stream_err.tag</code> is <code>1</code> which is _maybe_ <code>WASI_IO_STREAMS_STREAM_ERROR_CLOSED</code></p>\n<p>Is something using a <code>s32</code> somewhere it shouldn't?</p>\n</blockquote>",
        "id": 408983423,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1703006645
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706#issuecomment-1863270834\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706\">issue #7706</a>:</p>\n<blockquote>\n<p>Thanks for the report! Would you be able to create a standalone wasm file that works in the Wasmtime CLI to reproduce this? I tried locally and a Rust-compiled component which uses <code>std::fs::copy</code> copied a 5G file without problems for me locally, so I wasn't able to trivially reproduce</p>\n</blockquote>",
        "id": 408992301,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1703010025
    },
    {
        "content": "<p>ac000 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706#issuecomment-1863436460\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706\">issue #7706</a>:</p>\n<blockquote>\n<p>Hi Alex, I was able to modify my component to run under <code>wasmtime serve</code> minus the writing of the data as I can't do <code>--dir</code> with <code>serve</code>, but that bit's not important here anyway.</p>\n<p>For some reason my printf(3)'s don't work under <code>wasmtime serve</code> 14.0.4 (this is the version this needs to currently work with) but do with 15.0.1, so I had to send the important info back to curl, but long story short</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>curl<span class=\"w\"> </span>-T<span class=\"w\"> </span>2G<span class=\"w\"> </span>localhost:8080\nContent-Length<span class=\"w\"> </span>:<span class=\"w\"> </span><span class=\"m\">2147483648</span>,<span class=\"w\"> </span>total_bytes_read<span class=\"w\"> </span>:<span class=\"w\"> </span><span class=\"m\">2147483648</span>\n</code></pre></div>\n<p>so it seems my problem lies elsewhere...</p>\n</blockquote>",
        "id": 409012324,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1703018087
    },
    {
        "content": "<p>ac000 closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7706\">issue #7706</a>:</p>\n<blockquote>\n<p>HI,</p>\n<p>I have a wasi-http component written in C that stores an uploaded file to the filesystem. (it runs under <a href=\"https://github.com/ac000/unit/blob/wasm-wasi-http/src/wasm-wasi-http/src/lib.rs\">this</a>).</p>\n<p>This seems to work fine up to a file size of 2^31 - 4096 (2147479552), i.e 4KiB shy of 2GiB, which seems suspicious ;).</p>\n<p>I'm basically doing</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">ok</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasi_io_streams_method_input_stream_blocking_read</span><span class=\"p\">(</span>\n<span class=\"w\">                                                        </span><span class=\"n\">b_in_stream</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1024</span><span class=\"o\">*</span><span class=\"mi\">1024</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"o\">&amp;</span><span class=\"n\">data</span><span class=\"p\">,</span>\n<span class=\"w\">                                                        </span><span class=\"o\">&amp;</span><span class=\"n\">in_stream_err</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">ok</span><span class=\"p\">)</span>\n<span class=\"w\">                </span><span class=\"k\">break</span><span class=\"p\">;</span>\n\n<span class=\"w\">        </span><span class=\"n\">bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">fd</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">ptr</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">len</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">\"Read : %ld bytes, Wrote : %ld bytes</span><span class=\"se\">\\n</span><span class=\"s\">\"</span><span class=\"p\">,</span>\n<span class=\"w\">               </span><span class=\"n\">data</span><span class=\"p\">.</span><span class=\"n\">len</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">bytes_wrote</span><span class=\"p\">);</span>\n\n<span class=\"w\">        </span><span class=\"n\">total_bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">bytes_wrote</span><span class=\"p\">;</span>\n<span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">total_bytes_wrote</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">content_len</span><span class=\"p\">);</span>\n</code></pre></div>\n<p>With a 2GiB file I see</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8388608</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"n\">Read</span><span class=\"w\"> </span>: <span class=\"mi\">8384512</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Wrote</span><span class=\"w\"> </span>: <span class=\"mi\">8384512</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n</code></pre></div>\n<p>The last read was 4KiB short. The next call to <code>wasi_io_streams_method_input_stream_blocking_read()</code> returns <code>false</code>.</p>\n<p>(Note: I've stripped the version information from the function/type names for usability)</p>\n<p>If I try and read the error from <code>in_stream_err</code> I get</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">tokio</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"n\">worker</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">221</span>:<span class=\"mi\">45</span>:\n<span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">handle</span><span class=\"w\"> </span><span class=\"n\">request</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">handle</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n           <span class=\"mi\">0</span>: <span class=\"mh\">0x1d441</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span>:<span class=\"nc\">shim</span><span class=\"o\">!</span><span class=\"n\">indirect</span><span class=\"o\">-</span><span class=\"n\">wasi</span>:<span class=\"nc\">io</span><span class=\"o\">/</span><span class=\"n\">streams</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">rc</span><span class=\"o\">-</span><span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">10</span><span class=\"o\">-</span><span class=\"mi\">18</span><span class=\"o\">-</span><span class=\"p\">[</span><span class=\"n\">method</span><span class=\"p\">]</span><span class=\"n\">error</span><span class=\"p\">.</span><span class=\"n\">to</span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"o\">-</span><span class=\"n\">string</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span>: <span class=\"mh\">0x1772</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wasi_io_streams_method_error_to_debug_string</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">proxy</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">738</span>:<span class=\"mi\">3</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span>: <span class=\"mh\">0x26e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">exports_wasi_http_incoming_handler_handle</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">90</span>:<span class=\"mi\">4</span>\n<span class=\"w\">           </span><span class=\"mi\">3</span>: <span class=\"mh\">0x2299</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">__wasm_export_exports_wasi_http_incoming_handler_handle</span>\n<span class=\"w\">                           </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">andrew</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">project_blackbird</span><span class=\"o\">/</span><span class=\"n\">c</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">spin</span><span class=\"o\">/</span><span class=\"n\">large</span><span class=\"o\">-</span><span class=\"n\">upload</span><span class=\"o\">/</span><span class=\"n\">proxy</span><span class=\"p\">.</span><span class=\"n\">c</span>:<span class=\"mi\">2098</span>:<span class=\"mi\">3</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">unknown</span><span class=\"w\"> </span><span class=\"n\">handle</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>_Maybe_ because <code>in_stream_err.tag</code> is <code>1</code> which is _maybe_ <code>WASI_IO_STREAMS_STREAM_ERROR_CLOSED</code></p>\n<p>Is something using a <code>s32</code> somewhere it shouldn't?</p>\n</blockquote>",
        "id": 409033621,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1703028841
    }
]