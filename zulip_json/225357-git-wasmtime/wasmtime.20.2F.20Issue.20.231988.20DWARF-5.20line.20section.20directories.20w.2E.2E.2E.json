[
    {
        "content": "<p>ggreif labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>For a DWARF-5 equipped <code>.wasm</code> file, translated to <code>.o</code> (via <code>wasmtime wasm2obj -g</code>) the containing directories are mixed up:</p>\n<ul>\n<li>from</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x000288fa\n         version: 5\n...\ninclude_directories[  0] = &quot;.&quot;\ninclude_directories[  1] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  2] = &quot;tests/debug/testsuite&quot;\nfile_names[  0]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\nfile_names[  1]:\n</code></pre></div>\n\n\n<ul>\n<li>to:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x0000e747\n         version: 4\n...\ninclude_directories[  1] = &quot;.&quot;\ninclude_directories[  2] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  3] = &quot;tests/debug/testsuite&quot;\nfile_names[  1]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\n</code></pre></div>\n\n\n<p>Since the latter is one-based, the index but be incremented.</p>\n<p>(I'm working on a PR.)</p>\n</blockquote>",
        "id": 203095186,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594124781
    },
    {
        "content": "<p>ggreif opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>For a DWARF-5 equipped <code>.wasm</code> file, translated to <code>.o</code> (via <code>wasmtime wasm2obj -g</code>) the containing directories are mixed up:</p>\n<ul>\n<li>from</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x000288fa\n         version: 5\n...\ninclude_directories[  0] = &quot;.&quot;\ninclude_directories[  1] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  2] = &quot;tests/debug/testsuite&quot;\nfile_names[  0]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\nfile_names[  1]:\n</code></pre></div>\n\n\n<ul>\n<li>to:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x0000e747\n         version: 4\n...\ninclude_directories[  1] = &quot;.&quot;\ninclude_directories[  2] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  3] = &quot;tests/debug/testsuite&quot;\nfile_names[  1]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\n</code></pre></div>\n\n\n<p>Since the latter is one-based, the index but be incremented.</p>\n<p>(I'm working on a PR.)</p>\n</blockquote>",
        "id": 203095187,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594124781
    },
    {
        "content": "<p>ggreif edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>For a DWARF-5 equipped <code>.wasm</code> file, translated to <code>.o</code> (via <code>wasmtime wasm2obj -g</code>) the containing directories are mixed up:</p>\n<ul>\n<li>from</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x000288fa\n         version: 5\n...\ninclude_directories[  0] = &quot;.&quot;\ninclude_directories[  1] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  2] = &quot;tests/debug/testsuite&quot;\nfile_names[  0]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\nfile_names[  1]:\n</code></pre></div>\n\n\n<ul>\n<li>to:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x0000e747\n         version: 4\n...\ninclude_directories[  1] = &quot;.&quot;\ninclude_directories[  2] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  3] = &quot;tests/debug/testsuite&quot;\nfile_names[  1]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\n</code></pre></div>\n\n\n<p>Since the latter is one-based, the index must be incremented.</p>\n<p>(I'm working on a PR.)</p>\n</blockquote>",
        "id": 203095225,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594124810
    },
    {
        "content": "<p>ggreif <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988#issuecomment-654824584\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>Alternatively we could honour this commentary from the DWARF-5 standard:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>Prior to DWARF Version 5, the current directory was not represented in the directories field and a directory index of 0 implicitly referred to that directory as found in the DW_AT_comp_dir attribute of the compilation unit debugging information entry. In DWARF Version 5, the current directory is explicitly present in the directories field. This is needed to support the common practice of stripping all but the line number sections (.debug_line and .debug_line_str) from an executable.</p>\n</blockquote>\n</blockquote>\n</blockquote>\n</blockquote>",
        "id": 203095802,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594125216
    },
    {
        "content": "<p>ggreif edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988#issuecomment-654824584\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>Alternatively we could honour this commentary from the DWARF-5 standard:</p>\n<blockquote>\n<p>Prior to DWARF Version 5, the current directory was not represented in the directories field and a directory index of 0 implicitly referred to that directory as found in the DW_AT_comp_dir attribute of the compilation unit debugging information entry. In DWARF Version 5, the current directory is explicitly present in the directories field. This is needed to support the common practice of stripping all but the line number sections (.debug_line and .debug_line_str) from an executable.</p>\n</blockquote>\n</blockquote>",
        "id": 203095815,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594125229
    },
    {
        "content": "<p>ggreif edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988#issuecomment-654824584\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>Alternatively we could honour this commentary from the DWARF-5 standard:</p>\n<blockquote>\n<p>Prior to DWARF Version 5, the current directory was not represented in the directories field and a directory index of 0 implicitly referred to that directory as found in the DW_AT_comp_dir attribute of the compilation unit debugging information entry. In DWARF Version 5, the current directory is explicitly present in the directories field. This is needed to support the common practice of stripping all but the line number sections (.debug_line and .debug_line_str) from an executable.<br>\nThis is a bit more involved, since, it needs to compare the translation unit's directory with the DWARF-5 <code>.debug_line</code> section's <code>include_directories[0]</code> entry, and when equal, jettison the latter, keeping the file indices.</p>\n</blockquote>\n</blockquote>",
        "id": 203096155,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594125453
    },
    {
        "content": "<p>ggreif edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988#issuecomment-654824584\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>Alternatively we could honour this commentary from the DWARF-5 standard:</p>\n<blockquote>\n<p>Prior to DWARF Version 5, the current directory was not represented in the directories field and a directory index of 0 implicitly referred to that directory as found in the DW_AT_comp_dir attribute of the compilation unit debugging information entry. In DWARF Version 5, the current directory is explicitly present in the directories field. This is needed to support the common practice of stripping all but the line number sections (.debug_line and .debug_line_str) from an executable.</p>\n</blockquote>\n<p>This is a bit more involved, since, it needs to compare the translation unit's directory with the DWARF-5 <code>.debug_line</code> section's <code>include_directories[0]</code> entry, and when equal, jettison the latter, keeping the file indices.</p>\n</blockquote>",
        "id": 203096178,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594125464
    },
    {
        "content": "<p>ggreif edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988#issuecomment-654824584\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>Alternatively we could honour this commentary from the DWARF-5 standard:</p>\n<blockquote>\n<p>Prior to DWARF Version 5, the current directory was not represented in the directories field and a directory index of 0 implicitly referred to that directory as found in the DW_AT_comp_dir attribute of the compilation unit debugging information entry. In DWARF Version 5, the current directory is explicitly present in the directories field. This is needed to support the common practice of stripping all but the line number sections (.debug_line and .debug_line_str) from an executable.</p>\n</blockquote>\n<p>This is a bit more involved, since it needs to compare the translation unit's directory with the DWARF-5 <code>.debug_line</code> section's <code>include_directories[0]</code> entry, and when equal, jettison the latter, keeping the file indices.</p>\n</blockquote>",
        "id": 203096203,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594125477
    },
    {
        "content": "<p>yurydelendik closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1988\">Issue #1988</a>:</p>\n<blockquote>\n<p>For a DWARF-5 equipped <code>.wasm</code> file, translated to <code>.o</code> (via <code>wasmtime wasm2obj -g</code>) the containing directories are mixed up:</p>\n<ul>\n<li>from</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x000288fa\n         version: 5\n...\ninclude_directories[  0] = &quot;.&quot;\ninclude_directories[  1] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  2] = &quot;tests/debug/testsuite&quot;\nfile_names[  0]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\nfile_names[  1]:\n</code></pre></div>\n\n\n<ul>\n<li>to:</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>.debug_line contents:\ndebug_line[0x00000000]\nLine table prologue:\n    total_length: 0x0000e747\n         version: 4\n...\ninclude_directories[  1] = &quot;.&quot;\ninclude_directories[  2] = &quot;&lt;moc-asset&gt;&quot;\ninclude_directories[  3] = &quot;tests/debug/testsuite&quot;\nfile_names[  1]:\n           name: &quot;fib-wasm.mo&quot;\n      dir_index: 2\n</code></pre></div>\n\n\n<p>Since the latter is one-based, the index must be incremented.</p>\n<p>(I'm working on a PR.)</p>\n</blockquote>",
        "id": 203125169,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1594138834
    }
]