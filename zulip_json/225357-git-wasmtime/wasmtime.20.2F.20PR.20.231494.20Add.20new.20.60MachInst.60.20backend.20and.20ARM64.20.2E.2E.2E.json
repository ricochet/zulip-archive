[
    {
        "content": "<p>cfallin opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193513122,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586468566
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193513287,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586468683
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406509156\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406509156\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is this a temporary workaround? If so, could you add a comment here explaining what the real fix is? If not, could you add a comment explaining why probing isn't needed? :-)</p>\n</blockquote>",
        "id": 193519208,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391167425\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391167425\">PR Review</a>.</p>",
        "id": 193519209,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391167425\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391167425\">PR Review</a>.</p>",
        "id": 193519210,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406508477\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406508477\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This suggests you're generating an <code>OutOfBounds</code> trap code rather than a <code>HeapOutOfBounds</code> trap code. Is that a temporary limitation, or something more fundamental? If it's temporary, could you add a TODO comment here or so?</p>\n</blockquote>",
        "id": 193519211,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406510393\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406510393\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>pp</code> isn't something I can guess the meaning of without more context. What would you think about renaming it to <code>pretty-print.rs</code> or so?</p>\n</blockquote>",
        "id": 193519212,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406517410\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406517410\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>all-arch</code> was deliberately removed from the default in <a href=\"https://github.com/bytecodealliance/cranelift/pull/853\" title=\"https://github.com/bytecodealliance/cranelift/pull/853\">https://github.com/bytecodealliance/cranelift/pull/853</a>. Is there a new need for it to be enabled here, or is this something that could be enabled by downstream users of cranelift?</p>\n</blockquote>",
        "id": 193519213,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406507417\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406507417\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Could you put this under a <code>cfg!(target_arch = \"aarch64\")</code> so that we don't register handlers for things we don't need to on x86?</p>\n</blockquote>",
        "id": 193519214,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586472436
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193520024,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586473022
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193521879,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474260
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391189958\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391189958\">PR Review</a>.</p>",
        "id": 193521939,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474298
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406527632\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406527632\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Actually, a few days ago we found an alternative opcode that does deliver <code>SIGILL</code> on arm64, and I hadn't updated this yet -- so we can just remove it.</p>\n</blockquote>",
        "id": 193521940,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474299
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190529\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190529\">PR Review</a>.</p>",
        "id": 193522067,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474410
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528166\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528166\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Hmm, I need to look into this one more. I remember making the edit thinking it was just a message change that a merge had missed, but I think you're correct that we're generating a different trap code now. We have some other failing tests on arm64 (i.e. only when running <code>cargo test</code> on arm64 hardware), so I'll revert and this just joins the club to be resolved later.</p>\n</blockquote>",
        "id": 193522068,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474410
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190569\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190569\">PR Review</a>.</p>",
        "id": 193522078,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474420
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528196\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528196\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Renamed!</p>\n</blockquote>",
        "id": 193522079,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474421
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190648\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391190648\">PR Review</a>.</p>",
        "id": 193522099,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474438
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528272\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406528272\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Sorry, that was added for development convenience only; reverted.</p>\n</blockquote>",
        "id": 193522100,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474438
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193522781,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586474978
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391193736\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391193736\">PR Review</a>.</p>",
        "id": 193522907,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586475040
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406531202\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406531202\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Addressed -- it seems that stack probes are only supported on x86 / x86-64. I added a link to Rust's compiler-builtins impl of <code>__rust_probestack</code> where a comment describes the situation. Modified the code here to refer to <code>empty_probestack</code> only on non-x86, non-x86-64 architectures.</p>\n</blockquote>",
        "id": 193522908,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586475041
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391211358\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391211358\">PR Review</a>.</p>",
        "id": 193526919,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586478798
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406547472\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406547472\">PR Review Comment</a>:</p>\n<blockquote>\n<p>FWIW with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1490\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1490\">https://github.com/bytecodealliance/wasmtime/pull/1490</a> we won't need this anymore anyway.</p>\n</blockquote>",
        "id": 193526920,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586478799
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406549179\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406549179\">PR Review Comment</a>:</p>\n<blockquote>\n<p>FWIW I'm adding the necessary Rust definitions here in <a href=\"https://github.com/rust-lang/libc/pull/1728\" title=\"https://github.com/rust-lang/libc/pull/1728\">https://github.com/rust-lang/libc/pull/1728</a>, but this I think is the way to go for now.</p>\n</blockquote>",
        "id": 193527434,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586479227
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391213065\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391213065\">PR Review</a>.</p>",
        "id": 193527435,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586479227
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391331128\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391331128\">PR Review</a>.</p>",
        "id": 193552089,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510697
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391331128\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391331128\">PR Review</a>.</p>",
        "id": 193552090,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510697
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406667813\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406667813\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This assertion fires when there are multiple <code>return</code> instructions, right?</p>\n</blockquote>",
        "id": 193552091,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510697
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406669044\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406669044\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Wildcard patterns make it easy to forget updating a place when a new instruction format is added.</p>\n</blockquote>",
        "id": 193552092,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510698
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406677651\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406677651\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can this be stored in <code>cranelift_codegen::Context</code> or some other context to prevent continuous reallocation.</p>\n</blockquote>",
        "id": 193552093,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510698
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406676898\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406676898\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Use accessors instead? This type has several invariants that are easily broken by modifying <code>insts</code>.</p>\n</blockquote>",
        "id": 193552094,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510698
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406678612\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406678612\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>/// Pretty-printing with `RealRegUniverse` context.\n</pre></div>\n\n\n<p>Rustdoc supports doc comments on <code>impl</code>'s</p>\n</blockquote>",
        "id": 193552095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510698
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406679581\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406679581\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                write!(s,\n</pre></div>\n\n\n<p>You may need to import <code>std::fmt::Write</code> though.</p>\n</blockquote>",
        "id": 193552096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510698
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406678901\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406678901\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        s.push_str(&quot;VCode_ShowWithRRU {{&quot;);\n</pre></div>\n\n\n</blockquote>",
        "id": 193552097,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510699
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406679777\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406679777\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Why is this printing two <code>{</code> by the way.</p>\n</blockquote>",
        "id": 193552098,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510700
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406675525\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406675525\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe use something like</p>\n<div class=\"codehilite\"><pre><span></span>        let [a, b] = value.to_be_bytes();\n        self.put1(a);\n        self.put1(b);\n</pre></div>\n\n\n</blockquote>",
        "id": 193552099,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586510700
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391355066\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391355066\">PR Review</a>.</p>",
        "id": 193552573,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511077
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391355066\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391355066\">PR Review</a>.</p>",
        "id": 193552574,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511078
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406682193\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406682193\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Same as above</p>\n</blockquote>",
        "id": 193552575,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511078
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406681710\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406681710\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>            s.replace_range(0..1, &quot;w&quot;);\n</pre></div>\n\n\n</blockquote>",
        "id": 193552576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511078
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406681839\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406681839\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>            s.push(&#39;w&#39;);\n</pre></div>\n\n\n</blockquote>",
        "id": 193552577,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511078
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406682156\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406682156\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    s.replace_range(0..1, prefix);\n    s\n</pre></div>\n\n\n</blockquote>",
        "id": 193552578,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511078
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391356576\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391356576\">PR Review</a>.</p>",
        "id": 193552698,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511196
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406683025\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406683025\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This can take <code>self</code> by value.</p>\n</blockquote>",
        "id": 193552699,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511197
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391356673\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391356673\">PR Review</a>.</p>",
        "id": 193552714,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511211
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406683133\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406683133\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    pub fn value(self) -&gt; u8 {\n</pre></div>\n\n\n</blockquote>",
        "id": 193552715,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511211
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391359147\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391359147\">PR Review</a>.</p>",
        "id": 193553144,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511586
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406685231\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406685231\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The <code>aligned</code> memflag is never checked. Are stores always lowered to unaligned stores, or will it just emit a signal on unaligned stores?</p>\n</blockquote>",
        "id": 193553145,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511586
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391361258\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391361258\">PR Review</a>.</p>",
        "id": 193553565,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511910
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406686993\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406686993\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Assert that the triple has <code>aarch64</code> as isa?</p>\n</blockquote>",
        "id": 193553566,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586511910
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406687496\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406687496\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        constructor: |_, shared_flags, _| {\n            let backend = Arm64Backend::new_with_flags(shared_flags);\n            Box::new(TargetIsaAdapter::new(backend))\n        },\n</pre></div>\n\n\n<p>If a closure doesn't capture any variables, it can coerce to a function pointer.</p>\n</blockquote>",
        "id": 193553702,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512006
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391361841\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391361841\">PR Review</a>.</p>",
        "id": 193553703,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512006
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391362697\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391362697\">PR Review</a>.</p>",
        "id": 193553852,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512140
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688260\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688260\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Previously you could just reuse the allocations inside <code>Function, but this will discard all allocations inside </code>Function`.</p>\n</blockquote>",
        "id": 193553853,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512140
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363137\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363137\">PR Review</a>.</p>",
        "id": 193553976,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512210
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688652\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688652\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Why are these clears no longer done for the new backend?</p>\n</blockquote>",
        "id": 193553977,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512210
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363340\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363340\">PR Review</a>.</p>",
        "id": 193554026,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512241
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688823\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406688823\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Please keep this for the new backend.</p>\n</blockquote>",
        "id": 193554027,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512241
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363609\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391363609\">PR Review</a>.</p>",
        "id": 193554063,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512278
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689024\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689024\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This doesn't seem to be used.</p>\n</blockquote>",
        "id": 193554064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512278
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391364106\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391364106\">PR Review</a>.</p>",
        "id": 193554176,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512356
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689448\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689448\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        use std::fmt::Write;\n        let mut s = String::new();\n        for b in &amp;self.bytes {\n            write!(s, &quot;{:02X}, b);\n        }\n        s\n</pre></div>\n\n\n</blockquote>",
        "id": 193554177,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512356
    },
    {
        "content": "<p>bjorn3 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689448\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406689448\">PR Review Comment</a>.</p>",
        "id": 193554197,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512378
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391364883\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391364883\">PR Review</a>.</p>",
        "id": 193554319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512471
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406690143\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406690143\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Why not use the existing <code>target aarch64</code> directive?</p>\n</blockquote>",
        "id": 193554320,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586512471
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391375040\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391375040\">PR Review</a>.</p>",
        "id": 193556140,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586514146
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406698893\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406698893\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The <code>probestack</code> has an ABI that is not compatible with <code>C</code>. This means that this will only work correctly if the compiler happened to decide that only a <code>ret</code> should be emitted. If it does anything else, like writing to a caller saved register that was used as argument for the caller of <code>probestack</code>, you will likely get a crash.</p>\n</blockquote>",
        "id": 193556141,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586514147
    },
    {
        "content": "<p>bnjbvr submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391464729\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391464729\">PR Review</a>.</p>",
        "id": 193573137,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586528145
    },
    {
        "content": "<p>bnjbvr created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406776678\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406776678\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Actually, I think it'd be even better to defer this choice to later; LSRA isn't properly working yet (I'll switch back when i'm done with the Spidermonkey integration), so we shouldn't give a false sentiment of safety to people by allowing them to use it. So I'd strongly recommend to just always select the backtracking allocator.</p>\n</blockquote>",
        "id": 193573138,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586528146
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391471035\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391471035\">PR Review</a>.</p>",
        "id": 193574389,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586528846
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406782020\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406782020\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe name the LSRA option <code>experimental_lsra</code>?</p>\n</blockquote>",
        "id": 193574390,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586528846
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391510461\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391510461\">PR Review</a>.</p>",
        "id": 193583184,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586533338
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406814978\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406814978\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This should be the triple passed to <code>isa_builder</code>. This value will result in a binary format of unknown, which means that <code>cranelift_object</code> will not work.</p>\n</blockquote>",
        "id": 193583185,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586533338
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391511404\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391511404\">PR Review</a>.</p>",
        "id": 193583416,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586533449
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406815816\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406815816\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Also <code>target-lexicon</code> calls it <code>aarch64</code>.</p>\n</blockquote>",
        "id": 193583418,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586533450
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391570607\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391570607\">PR Review</a>.</p>",
        "id": 193600439,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542571
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391570607\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391570607\">PR Review</a>.</p>",
        "id": 193600440,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542571
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406872505\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406872505\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Reusing this predicate logic is a good idea, but we should move it (and its dependencies) out of <a href=\"http://dce.rs\" title=\"http://dce.rs\">dce.rs</a> so that <a href=\"http://dce.rs\" title=\"http://dce.rs\">dce.rs</a> can focus on being a DCE pass. Perhaps we could start a new file, <a href=\"http://inst_predicates.rs\" title=\"http://inst_predicates.rs\">inst_predicates.rs</a> or so?</p>\n</blockquote>",
        "id": 193600441,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542571
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406873157\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406873157\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This may be an artifact of development, but we should avoid adding warning overrides like this in the main tree unless there's a practical reason we can't just fix the warning.</p>\n</blockquote>",
        "id": 193600442,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542571
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406865936\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406865936\">PR Review Comment</a>:</p>\n<blockquote>\n<p>AArch64 is indeed the more official name for the architecture, and the name rustc uses, though target-lexicon and other tools do recognize \"arm64\" as an alias for \"aarch64\". I don't think it's necessary, but it would be kind of nice to rename the whole  \"arm64\" target to \"aarch64\" while we have the chance. Anyone have opinions?</p>\n</blockquote>",
        "id": 193600443,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542571
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406875930\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406875930\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The optimization here is converting a comparison opcode that produces an integer result and a branch that consumes an integer result into a comparison that produces a flags result and a branch that consumes the flags result. Currently it does this by rewriting the comparison in place, so there could be instructions between the compare and the branch. If they clobber the flags, the optimization isn't correct. So it isn't safe to disable this check. A possible alternative though would be to change the optimization to move the comparison just before the branch, to ensure that the flags value isn't clobbered.</p>\n</blockquote>",
        "id": 193600444,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542572
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406876697\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406876697\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can you comment on why it makes sense to disable the FlagsVerifier with the mach backend?</p>\n</blockquote>",
        "id": 193600445,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586542572
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193687833,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653720
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812290\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812290\">PR Review</a>.</p>",
        "id": 193687835,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653728
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129842\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129842\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Added comment.</p>\n</blockquote>",
        "id": 193687836,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653728
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812295\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812295\">PR Review</a>.</p>",
        "id": 193687837,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653733
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129855\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129855\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done, thanks!</p>\n</blockquote>",
        "id": 193687838,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653733
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812319\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812319\">PR Review</a>.</p>",
        "id": 193687848,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653764
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129912\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129912\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Eh, I think that's probably unnecessary complexity -- the <code>ABIBody</code> is specialized to, and only lives for the duration of, one function compilation anyway.</p>\n</blockquote>",
        "id": 193687849,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653764
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812360\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812360\">PR Review</a>.</p>",
        "id": 193687903,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653818
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129985\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407129985\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Also unnecessary complexity IMHO; we'd then need to store it twice to allow the outer layer (VCode) to return information upward.</p>\n</blockquote>",
        "id": 193687905,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653818
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812412\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812412\">PR Review</a>.</p>",
        "id": 193687918,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653890
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130057\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130057\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Simply reverted to <code>RegAllocAlgorithm::Backtracking</code> for now; we can keep an env var backdoor as part of a local development-setup patch if needed, but for now the only stable/fast choice for mainline is BT, without checker, I think (Ben/Julian: correct me if wrong, if you think we should enable checker by default).</p>\n</blockquote>",
        "id": 193687919,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653890
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812421\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812421\">PR Review</a>.</p>",
        "id": 193687921,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653902
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130075\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130075\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done.</p>\n</blockquote>",
        "id": 193687922,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586653902
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812535\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812535\">PR Review</a>.</p>",
        "id": 193688041,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654069
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130306\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130306\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I'm not sure it's reasonable to list out all <code>InstructionData</code> variants here and in the other helpers, as there are (at present) 50 of them; that's quite a lot of verbosity. Ideally we would add new accessors to the generated code. I'm not as familiar with the DSL mechanisms for that; thoughts?</p>\n</blockquote>",
        "id": 193688042,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654070
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812932\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391812932\">PR Review</a>.</p>",
        "id": 193688316,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654637
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130959\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407130959\">PR Review Comment</a>:</p>\n<blockquote>\n<p>In a subsequent commit on our dev branch, it becomes a function of the flags. I think this addresses both of your comments (for the former, we can't return a static instance because it might be dynamically computed per the settings).</p>\n</blockquote>",
        "id": 193688317,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654637
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193688360,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654677
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813034\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813034\">PR Review</a>.</p>",
        "id": 193688415,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654773
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131133\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131133\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Instructions are lowered in reverse order, so I think this is actually correct (albeit counterintuitive!). I'll add a comment to explain this better.</p>\n</blockquote>",
        "id": 193688416,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654774
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813064\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813064\">PR Review</a>.</p>",
        "id": 193688427,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654825
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131180\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131180\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Perhaps, but <code>TargetIsa</code> requires the information to come from somewhere. If we eventually remove more vestigial code when all backends migrate to the new framework, I think we'll be able to remove this altogether.</p>\n</blockquote>",
        "id": 193688428,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654825
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813137\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813137\">PR Review</a>.</p>",
        "id": 193688490,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654922
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131305\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131305\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The intent is to allow multiple sections to be constructed simultaneously; this rules out a streaming approach. (We've currently folded the constants and jumptables in as inline data on ARM64, but we previously actually build the sections this way, and could change again when we have proper support for long-range PC-relative addressing.)</p>\n</blockquote>",
        "id": 193688491,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586654922
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813317\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813317\">PR Review</a>.</p>",
        "id": 193688646,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655218
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131647\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131647\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Did one better and removed the <code>pub</code> qualifiers (only used for access by the <code>BlockRPO</code> computation).</p>\n</blockquote>",
        "id": 193688647,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655218
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813416\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813416\">PR Review</a>.</p>",
        "id": 193688718,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655357
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131848\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407131848\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This is @julian-seward1's debug-printing format; I'm not entirely sure but I am sure there is a good reason for it :-) Perhaps it allows for easier log-grepping. I'll resolve this for now but we can always come back and refine the debug-printing format later if it needs to be more concise, or machine-readable, or whatever.</p>\n</blockquote>",
        "id": 193688719,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655357
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813501\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813501\">PR Review</a>.</p>",
        "id": 193688777,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655474
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132024\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132024\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I'm not sure what you mean by \"continuous\" -- this is one reallocation that happens per function compilation (<code>replace_insns_from_regalloc</code> is called once in the compilation pipeline). Holding a persistent vector to reuse in <code>Context</code> wouldn't really work with parallel compilation, if I understand your proposal correctly.</p>\n</blockquote>",
        "id": 193688778,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655475
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813599\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813599\">PR Review</a>.</p>",
        "id": 193688883,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655609
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132204\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132204\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I learn something new about the standard library every day -- thanks!</p>\n</blockquote>",
        "id": 193688884,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655609
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813639\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813639\">PR Review</a>.</p>",
        "id": 193688897,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655671
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132282\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132282\">PR Review Comment</a>:</p>\n<blockquote>\n<p>OK, I haven't used rust-analyzer before; but for basic source-code readability, I'd prefer to keep the argument-name comment here.</p>\n</blockquote>",
        "id": 193688898,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655671
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813772\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391813772\">PR Review</a>.</p>",
        "id": 193689017,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655855
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132533\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407132533\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yes, but this only happens when the \"fallthrough return\" mode is used (grep for <code>GenerateReturn::No</code> in <code>machinst/lower.rs</code>, <code>gen_retval_setup()</code>), which comes from SpiderMonkey (the Baldrdash ABI). In that case, a return in the middle of the function doesn't make sense anyway.</p>\n</blockquote>",
        "id": 193689018,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586655856
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814067\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814067\">PR Review</a>.</p>",
        "id": 193689174,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586656308
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407133023\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407133023\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I was going to make this change at first, but it's quite a refactor to a bunch of debug-printing code (and more in the x64 backend which is not included here) which I'm not inclined to think is worth the effort. The <code>show_rru()</code> impls are meant to help debug-logging and are never called in production, so I think it's probably OK to keep this interface as-is, unless Dan/Ben/Julian disagree?</p>\n</blockquote>",
        "id": 193689175,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586656309
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814147\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814147\">PR Review</a>.</p>",
        "id": 193689246,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586656414
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407133145\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407133145\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The comment here is wrong, on closer inspection -- removed. (If <code>final_block_order</code> is empty, that line of the output just shows an empty list.)</p>\n</blockquote>",
        "id": 193689247,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586656414
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814705\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391814705\">PR Review</a>.</p>",
        "id": 193689682,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586657274
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407134166\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407134166\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Apparently, aarch64 supports unaligned accesses with the ordinary load/store instructions. I just tested this on real hardware and it seems to work; [1] also confirms.</p>\n<p>[1] <a href=\"https://stackoverflow.com/questions/38535738/does-aarch64-support-unaligned-access\" title=\"https://stackoverflow.com/questions/38535738/does-aarch64-support-unaligned-access\">https://stackoverflow.com/questions/38535738/does-aarch64-support-unaligned-access</a></p>\n</blockquote>",
        "id": 193689683,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586657274
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193689735,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586657354
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391815319\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391815319\">PR Review</a>.</p>",
        "id": 193690104,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586658023
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407135155\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407135155\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yes, that's a theoretical concern. In practice, the empty function <code>{}</code> compiles to just a <code>ret</code> in both debug and release mode on both x86-64 and aarch64 (just tested all four combinations). Do you have a suggestion for a better approach (compiler attributes, etc)?</p>\n</blockquote>",
        "id": 193690105,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586658023
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193690458,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586658734
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193690533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586658939
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391816590\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391816590\">PR Review</a>.</p>",
        "id": 193690790,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586659467
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407136965\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407136965\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I agree, we might as well standardize on the official name. Renamed the backend to <code>aarch64</code>. There are still a few vestigial remnants of <code>Arm64</code> around, e.g. the <code>Arm64Call</code> reloc type which is exposed in the public API.</p>\n</blockquote>",
        "id": 193690791,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586659467
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193690802,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586659509
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391816843\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391816843\">PR Review</a>.</p>",
        "id": 193690939,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586659816
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407137389\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407137389\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah, OK -- the arm64 backend at least will correctly handle an <code>icmp</code> + <code>brz</code>/<code>brnz</code> sequence, so we don't need this optimization -- I've just altered it to skip this mutation entirely when a MachBackend is in use.</p>\n</blockquote>",
        "id": 193690940,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586659816
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193691001,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586660023
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391817048\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391817048\">PR Review</a>.</p>",
        "id": 193691063,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586660109
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407137732\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407137732\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The FlagsVerifier as written uses the encoding info to determine whether instructions clobber the flags. We could certainly build an equivalent with the new infrastructure, or else add a target-independent notion of \"clobbers flags\" to the CLIF opcodes themselves, but it would be some extra plumbing. What do you think?</p>\n</blockquote>",
        "id": 193691064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586660109
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391817603\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391817603\">PR Review</a>.</p>",
        "id": 193691436,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586660956
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407138754\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407138754\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The simple answer is that I couldn't work out how to fetch it. It doesn't appear to be included in the <code>preamble_comments</code> of the <code>Context</code>. It doesn't seem too important to me; but I'm happy to change it if you can point out the proper plumbing to make use of here.</p>\n</blockquote>",
        "id": 193691437,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586660956
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193691650,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586661443
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193691791,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586661840
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391818214\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391818214\">PR Review</a>.</p>",
        "id": 193691829,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586661861
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407139801\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407139801\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Actually, upon second look, worked this out -- the tests now use the <code>target</code> directive. Resolving!</p>\n</blockquote>",
        "id": 193691830,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586661861
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193691859,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586661924
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391826605\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391826605\">PR Review</a>.</p>",
        "id": 193697707,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586673520
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407154469\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407154469\">PR Review Comment</a>:</p>\n<blockquote>\n<p>With continuous I mean that it reallocates for every function, instead of once per <code>Context</code>. (Apart reallocations necessary resize the vec.) The <code>Context</code> holds allocations that are reused between compilations of different functions. It works fine with parallel compilation, as you can just allocate a single <code>Context</code> per thread.</p>\n</blockquote>",
        "id": 193697708,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586673520
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835170\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835170\">PR Review</a>.</p>",
        "id": 193701860,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586681166
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407167412\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407167412\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe use Cranelift to create the function?</p>\n</blockquote>",
        "id": 193701861,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586681166
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835603\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835603\">PR Review</a>.</p>",
        "id": 193702508,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835603\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391835603\">PR Review</a>.</p>",
        "id": 193702509,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168029\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168029\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>/// A location for an argument or return value.\n</pre></div>\n\n\n</blockquote>",
        "id": 193702510,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168047\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168047\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// In a real register.\n</pre></div>\n\n\n</blockquote>",
        "id": 193702511,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407167992\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407167992\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Legalizations are only supposed to run when there is no encoding for an instruction. The generic legalization group contains a lot of legalizations for instructions that can be implemented more efficiently using native instructions. For example 8 and 16 bit operators are legalized using <code>ireduce</code>/<code>uextend</code>/<code>sextend</code>. Is it possible to only run legalizations during lowering when there is no encoding?</p>\n</blockquote>",
        "id": 193702512,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168060\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168060\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// Arguments only: on stack, at given offset from SP at entry.\n</pre></div>\n\n\n</blockquote>",
        "id": 193702513,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168072\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168072\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// (first and only) return value only: in memory pointed to by x8 on entry.\n</pre></div>\n\n\n</blockquote>",
        "id": 193702514,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168114\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168114\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Should this be removed?</p>\n</blockquote>",
        "id": 193702515,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168222\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168222\">PR Review Comment</a>:</p>\n<blockquote>\n<p>It is allowed to use them as long as it restores them before returning, right?</p>\n</blockquote>",
        "id": 193702516,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168321\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168321\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Please use doc comments.</p>\n</blockquote>",
        "id": 193702517,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168701\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168701\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe check that the call conv is either <code>Fast</code>, <code>Cold</code>, <code>SystemV</code> or <code>BaldrdashSystemV</code> and not <code>WindowsFastCall</code> or <code>Probestack</code>? The later two are not yet implemented.</p>\n</blockquote>",
        "id": 193702518,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168453\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168453\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        _ =&gt; unimplemented!(&quot;load_stack({})&quot;, ty),\n</pre></div>\n\n\n</blockquote>",
        "id": 193702519,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682224
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168914\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407168914\">PR Review Comment</a>:</p>\n<blockquote>\n<p>And check for call conv here too.</p>\n</blockquote>",
        "id": 193702520,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682225
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169020\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169020\">PR Review Comment</a>:</p>\n<blockquote>\n<p>If arg is <code>Copy</code> you can do:</p>\n<div class=\"codehilite\"><pre><span></span>        for &amp;arg in &amp;self.sig.args {\n</pre></div>\n\n\n</blockquote>",
        "id": 193702521,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682225
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169169\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169169\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Please take <code>u64</code> or <code>i64</code> instead. This is platform dependent, so won't work nice for cross-compilation.</p>\n</blockquote>",
        "id": 193702522,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586682225
    },
    {
        "content": "<p>bjorn3 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169169\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407169169\">PR Review Comment</a>.</p>",
        "id": 193709886,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586692295
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391837506\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391837506\">PR Review</a>.</p>",
        "id": 193712508,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407187810\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407187810\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is there an assertion that <code>MOV</code> doesn't have <code>x31</code> as register just in case?</p>\n</blockquote>",
        "id": 193712509,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407170556\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407170556\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        let fp_off: i64 = -(self.stackslots_size as i64) - (8 * islot) - i64::from(ty_size);\n</pre></div>\n\n\n</blockquote>",
        "id": 193712510,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391837506\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391837506\">PR Review</a>.</p>",
        "id": 193712511,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188403\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188403\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>#[derive(Clone, Copy, Debug)]\n#[repr(u8)]\npub enum ShiftOp {\n    LSL = 0b00,\n    LSR = 0b01,\n    ASR = 0b10,\n    ROR = 0b11,\n}\n\nimpl ShiftOp {\n    /// Get the encoding of this shift op.\n    pub fn bits(self) -&gt; u8 {\n        self as u8\n    }\n}\n</pre></div>\n\n\n</blockquote>",
        "id": 193712512,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407187925\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407187925\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        u32::try_from(\n            self.frame_size\n                .expect(&quot;frame size not computed before prologue generation&quot;\n        ).expect(&quot;overflow&quot;)\n</pre></div>\n\n\n</blockquote>",
        "id": 193712513,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188550\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188550\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        self.op\n</pre></div>\n\n\n<p><code>ShiftOp</code> is <code>Copy</code></p>\n</blockquote>",
        "id": 193712514,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188704\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188704\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can you move this down to just above the impl block for this?</p>\n</blockquote>",
        "id": 193712515,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189007\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189007\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This doc comment is attached to <code>SPOffset</code> not both.</p>\n</blockquote>",
        "id": 193712516,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189156\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189156\">PR Review Comment</a>:</p>\n<blockquote>\n<p>If <code>offset</code> is zero, this returns <code>Some(SImm9::zero())</code>, right?</p>\n</blockquote>",
        "id": 193712517,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696864
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189195\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189195\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>reg_plus_reg</code>?</p>\n</blockquote>",
        "id": 193712518,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189256\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189256\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This doesn't mention <code>op</code>.</p>\n</blockquote>",
        "id": 193712519,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188876\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188876\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>#[derive(Clone, Copy, Debug)]\n#[repr(u8)]\npub enum ExtendOp {\n    UXTB = 0b000,\n    UXTH = 0b001,\n    UXTW = 0b010,\n    UXTX = 0b011,\n    SXTB = 0b100,\n    SXTH = 0b101,\n    SXTW = 0b110,\n    SXTX = 0b111,\n}\n\nimpl ExtendOp {\n    /// Encoding of this op.\n    pub fn bits(self) -&gt; u8 {\n        self as u8\n    }\n}\n</pre></div>\n\n\n</blockquote>",
        "id": 193712520,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189333\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189333\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe put a empty line between every pair of conditions inverting each other?</p>\n</blockquote>",
        "id": 193712521,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188945\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407188945\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can you add a doc comment describing what <code>PostIndexed</code> and <code>PreIndexed</code> mean?</p>\n</blockquote>",
        "id": 193712522,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190070\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190070\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// Get the offset as a 19-bit offset, or `None` if overflow.\n</pre></div>\n\n\n</blockquote>",
        "id": 193712523,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190131\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190131\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                let n = block_index_map[usize::try_from(*bix).unwrap()];\n</pre></div>\n\n\n</blockquote>",
        "id": 193712524,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190985\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190985\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                        //// RRR ops.\n</pre></div>\n\n\n<p>Typo?</p>\n</blockquote>",
        "id": 193712525,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190485\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190485\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    let data = bits.to_le_bytes();\n</pre></div>\n\n\n<p>This is little endian, right?</p>\n</blockquote>",
        "id": 193712526,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190232\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190232\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        _ =&gt; panic!(&quot;unknown type {}&quot;, ty),\n</pre></div>\n\n\n</blockquote>",
        "id": 193712527,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190736\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190736\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    (u32::from(bits_31_21) &lt;&lt; 21)\n        | (u32::from(bits_15_10) &lt;&lt; 10)\n</pre></div>\n\n\n</blockquote>",
        "id": 193712528,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189657\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407189657\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                let bix = usize::try_from(bix).unwrap();\n</pre></div>\n\n\n<p>The unwrap will never fire, as <code>bix</code> is a <code>u32</code> and Cranelift likely doesn't work on 16 bit machines.</p>\n</blockquote>",
        "id": 193712529,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190580\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190580\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Does <code>to_real_reg()</code> contain the <code>is_real()</code> assertion?</p>\n</blockquote>",
        "id": 193712530,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193006\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193006\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// signed saturating add\n    SQAddScalar,\n    /// unsigned saturating add\n    UQAddScalar,\n    /// signed saturating subtract\n    SQSubScalar,\n    /// unsigned saturating subtract\n    UQSubScalar,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712531,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190967\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190967\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                        panic!(&quot;Bad ALUOp {:?} in RRR form!&quot;, alu_op);\n</pre></div>\n\n\n</blockquote>",
        "id": 193712532,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192710\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192710\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// Multiply add\n    MAdd32,\n    /// Multiply add\n    MAdd64,\n    /// Multiply sub\n    MSub32,\n    /// Multiply sub\n    MSub64,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192413\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192413\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>value</code> is shifted to the right not left to form <code>bits</code>.</p>\n</blockquote>",
        "id": 193712534,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193595\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193595\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This is attached only to <code>FpuLoad32</code>.</p>\n</blockquote>",
        "id": 193712535,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193663\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193663\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    Ret,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712536,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407191873\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407191873\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        ((self.N as u16) &lt;&lt; 12) | (u16::from(self.R) &lt;&lt; 6) | u16::from(self.S)\n</pre></div>\n\n\n</blockquote>",
        "id": 193712537,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193611\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193611\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// Round to integer.\n</pre></div>\n\n\n</blockquote>",
        "id": 193712538,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193242\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193242\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    /// Bit reverse\n    RBit32,\n    /// Bit reverse\n    RBit64,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712539,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190654\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407190654\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    u32::from(m.to_real_reg().get_hw_encoding())\n</pre></div>\n\n\n<p>I assume <code>get_hw_encoding</code> returns a integer type smaller than <code>u32</code>.</p>\n</blockquote>",
        "id": 193712540,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193768\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193768\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>count_zero_half_words</code>?</p>\n</blockquote>",
        "id": 193712541,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407194920\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407194920\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Does AArch64 have native 128bit integer operations? Otherwise these should be legalized to 64bit integer operations and the <code>I128</code> and <code>B128</code> types should have no register class assigned to them.</p>\n</blockquote>",
        "id": 193712542,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192807\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192807\">PR Review Comment</a>:</p>\n<blockquote>\n<p>What does the <code>H</code> mean?</p>\n</blockquote>",
        "id": 193712543,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192753\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407192753\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is this the arm name for XOR?</p>\n</blockquote>",
        "id": 193712544,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193694\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193694\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    EpiloguePlaceholder,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712545,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407194479\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407194479\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe do something like </p>\n<div class=\"codehilite\"><pre><span></span>    match inst {\n        Inst::AluRRR { alu_op: _, rd, rn, rm } =&gt; {\n            map_wr(d, rd);\n            map(u, rn);\n            map(u, rm);\n        }\n</pre></div>\n\n\n<p>and let the map functions take the register by mutable reference?</p>\n</blockquote>",
        "id": 193712546,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407195438\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407195438\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Who came up with this order? It is even worse than <code>eax</code>, <code>ecx</code>, <code>edx</code>, <code>ebx</code> on x86.</p>\n</blockquote>",
        "id": 193712547,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193363\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193363\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    Nop0,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712548,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193304\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407193304\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>            BitOp::RBit32 | BitOp::Clz32 | BitOp::Cls32 =&gt; true,\n            BitOp::RBit64 | BitOp::Clz64 | BitOp::Cls64 =&gt; false,\n</pre></div>\n\n\n</blockquote>",
        "id": 193712549,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407191578\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407191578\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        let scale = i64::from(scale);\n</pre></div>\n\n\n</blockquote>",
        "id": 193712550,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586696865
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392086522\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392086522\">PR Review</a>.</p>",
        "id": 193762318,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586776199
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407430683\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407430683\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                &amp;InstructionData::UnaryIeee32 { opcode: _, imm } =&gt; Some(u64::from(imm.bits())),\n</pre></div>\n\n\n</blockquote>",
        "id": 193762319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586776199
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392087287\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392087287\">PR Review</a>.</p>",
        "id": 193770196,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392087287\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392087287\">PR Review</a>.</p>",
        "id": 193770197,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407438118\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407438118\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This is only implemented for <code>Lower</code>. Why not just pass <code>Lower</code> everywhere?</p>\n</blockquote>",
        "id": 193770198,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431821\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431821\">PR Review Comment</a>:</p>\n<blockquote>\n<p>What about <code>narrow_mode == NarrowValueMode::None &amp;&amp; out_bits &lt; 64</code>?</p>\n</blockquote>",
        "id": 193770199,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439153\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439153\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The domtree already knows this.</p>\n</blockquote>",
        "id": 193770200,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439320\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439320\">PR Review Comment</a>:</p>\n<blockquote>\n<p>A function without entry block is not allowed, right?</p>\n</blockquote>",
        "id": 193770201,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431300\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431300\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        (NarrowValueMode::ZeroExtend64, 64) | (NarrowValueMode::SignExtend64, 64) =&gt; in_reg,\n</pre></div>\n\n\n</blockquote>",
        "id": 193770202,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431395\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407431395\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        (NarrowValueMode::ZeroExtend32, 32) | (NarrowValueMode::SignExtend32, 32) =&gt; {\n</pre></div>\n\n\n</blockquote>",
        "id": 193770203,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783380
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439690\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439690\">PR Review Comment</a>:</p>\n<blockquote>\n<p>You can use <code>bbs.iter().rev()</code> below instead to prevent moving everything around.</p>\n</blockquote>",
        "id": 193770204,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439820\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407439820\">PR Review Comment</a>:</p>\n<blockquote>\n<p>What does cf-inst mean?</p>\n</blockquote>",
        "id": 193770205,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407468251\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407468251\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        for &amp;block in &amp;self.final_block_order {\n</pre></div>\n\n\n</blockquote>",
        "id": 193770206,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407466058\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407466058\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Maybe inline this at the two use sites to prevent a possible allocation of a temporary vec?</p>\n</blockquote>",
        "id": 193770207,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407469277\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407469277\">PR Review Comment</a>:</p>\n<blockquote>\n<p>What if nops are always say 4 bytes, but there needs to be a 3 byte offset to align to the required 4 bytes. That would mean <code>I::gen_nop</code> will always need to return a 0 byte nop, which means that the loop will never terminate.</p>\n</blockquote>",
        "id": 193770208,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407466281\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407466281\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Also I think 16 elements is more than likely will be used most of the cases.</p>\n</blockquote>",
        "id": 193770209,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407465531\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407465531\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>                for &amp;dest in f.jump_tables[table].as_slice() {\n                    ret.push(dest);\n</pre></div>\n\n\n</blockquote>",
        "id": 193770210,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586783381
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391596985\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391596985\">PR Review</a>.</p>",
        "id": 193772909,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391596985\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-391596985\">PR Review</a>.</p>",
        "id": 193772910,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406888359\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406888359\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is the logic to do DCE the fly required for correctness of the algorithm, or is it just an optimization? If the latter, can you comment on the tradeoffs of doing an eager num_uses pass and DCE on the fly vs just doing a separate DCE pass afterwards?</p>\n</blockquote>",
        "id": 193772913,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406889301\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r406889301\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is this using reverse postorder (of a DFS)? Can you comment on the differences with <code>domtree.cfg_postorder()</code>?</p>\n</blockquote>",
        "id": 193772914,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407477693\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407477693\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Could you remove these few remaining <code>unused_imports</code> directives in a few files?</p>\n</blockquote>",
        "id": 193772915,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407481016\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407481016\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Minor nit: use a <code>//</code>-style comment here.</p>\n</blockquote>",
        "id": 193772916,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785479
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407480663\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407480663\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Several files have <code>allow(non_snake_case)</code> and <code>allow(non_camel_case_types)</code>. Could you either remove these and change the names to follow the regular Rust conventions, or add comments explaining why exceptions to the rules are justified in these files?</p>\n</blockquote>",
        "id": 193772918,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785480
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407483671\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407483671\">PR Review Comment</a>:</p>\n<blockquote>\n<p>There are a lot of <code>is32</code> parameters being passed around in a lot of code. Would it be worth adding a dedicated enum type to use in place of bool, to catch errors and make the code more self-documenting?</p>\n</blockquote>",
        "id": 193772919,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586785480
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392167704\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392167704\">PR Review</a>.</p>",
        "id": 193775438,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586787043
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407497590\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407497590\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The flags verifier can still check target-independent properties -- the <code>encinfo</code> is an <code>Option</code> to allow it to run without this information, so I think we can still enable the verifier, just by passing <code>None</code> for the <code>encinfo</code> argument when the mach backend is enabled.</p>\n</blockquote>",
        "id": 193775440,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586787043
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392423191\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392423191\">PR Review</a>.</p>",
        "id": 193818687,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586810435
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407707688\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407707688\">PR Review Comment</a>:</p>\n<blockquote>\n<p>That seems like quite a bit of overhead, and potentially fragile and complex code to maintain (a new \"probestack\" ABI to implement on ARM64, a codegen step at startup, a way to lazily initialize the <code>PROBESTACK</code> global, etc.) for a theoretical concern that does not actually occur in practice. I'll defer to @sunfishcode 's judgment here, but my inclination is to leave it as-is.</p>\n</blockquote>",
        "id": 193818688,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586810435
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193820138,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811305
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392432544\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392432544\">PR Review</a>.</p>",
        "id": 193820149,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811312
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407715549\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407715549\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah, yes, that makes sense -- done!</p>\n</blockquote>",
        "id": 193820150,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811312
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392434128\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392434128\">PR Review</a>.</p>",
        "id": 193820388,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811464
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407716766\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407716766\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The new backend takes a different approach. We want to get away from the DSL-based pattern/legalization/recipe world and write the backends in a more explicit way. This should lead to more simplicity and maintainability (one of the main motivations of the new backend design). E.g., in the ARM64 backend, we handle different operand widths explicitly. It still makes sense to do some expansions with the existing code, such as for <code>heap_addr</code> or <code>global_value</code>, which is where <code>simple_legalize()</code> comes in.</p>\n</blockquote>",
        "id": 193820389,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811465
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392435606\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392435606\">PR Review</a>.</p>",
        "id": 193820609,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811597
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407717997\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407717997\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yeah, actually, probably better to remove the partial impl of <code>RetMem</code> until we actually need it. Thanks.</p>\n</blockquote>",
        "id": 193820610,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811597
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392436975\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392436975\">PR Review</a>.</p>",
        "id": 193820990,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811730
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407719163\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407719163\">PR Review Comment</a>:</p>\n<blockquote>\n<p>@bnjbvr would be the person to answer this (this is his SpiderMonkey-integration code); Ben, comments?</p>\n</blockquote>",
        "id": 193820991,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811731
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439264\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439264\">PR Review</a>.</p>",
        "id": 193821384,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811951
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721033\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721033\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done; added check to toplevel <code>new()</code> instead.</p>\n</blockquote>",
        "id": 193821385,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811951
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439436\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439436\">PR Review</a>.</p>",
        "id": 193821454,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811965
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721165\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721165\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Added check to toplevel <code>new()</code>.</p>\n</blockquote>",
        "id": 193821456,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811969
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439664\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392439664\">PR Review</a>.</p>",
        "id": 193821467,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811986
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721336\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407721336\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Many legalizations are shared between backends. Also legalizations may enable optimizations that would otherwise have to be rewritten for each backend.</p>\n</blockquote>",
        "id": 193821468,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586811986
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392444228\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392444228\">PR Review</a>.</p>",
        "id": 193822203,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812429
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407725028\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407725028\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Will use <code>u32</code>, actually; we don't expect a stackframe to be larger than 4GB.</p>\n</blockquote>",
        "id": 193822204,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812430
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193822294,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812476
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392445447\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392445447\">PR Review</a>.</p>",
        "id": 193822394,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812554
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407726061\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407726061\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Any particular reason (and if so, why not throughout the entire codebase for every <code>as</code> cast)?</p>\n</blockquote>",
        "id": 193822396,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812554
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392447283\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392447283\">PR Review</a>.</p>",
        "id": 193822711,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812729
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407727551\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407727551\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Just added to <code>emit.rs</code>, thanks.</p>\n</blockquote>",
        "id": 193822712,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812729
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392448267\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392448267\">PR Review</a>.</p>",
        "id": 193822896,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812831
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407728370\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407728370\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This prevents accidential truncation of integers.</p>\n</blockquote>",
        "id": 193822897,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812831
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392449422\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392449422\">PR Review</a>.</p>",
        "id": 193823071,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812946
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407729303\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407729303\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Using <code>u32</code> in stack-frame layout code instead; as above, we don't expect &gt;4GB frames.</p>\n</blockquote>",
        "id": 193823073,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586812947
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392454163\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392454163\">PR Review</a>.</p>",
        "id": 193823862,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813446
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407733271\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407733271\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah, yes, this was left over from an earlier version that used a different mode; removed redundant case.</p>\n</blockquote>",
        "id": 193823863,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813446
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392456677\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392456677\">PR Review</a>.</p>",
        "id": 193824327,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813709
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407735348\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407735348\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Eh, perhaps it's just a style thing, but I don't like these casts that require trait imports and this <code>unwrap()</code>; it complexifies the code for no good reason, and makes it harder to audit the code for potentially panic'ing operations.</p>\n<p>In fact, the <code>bix as usize</code> does one better if we do ever try to build on a 16-bit host: it will statically fail to compile, because <code>u32 as u16</code> is not a valid cast. I'd prefer that over an <code>unwrap()</code> that fires at runtime.</p>\n</blockquote>",
        "id": 193824328,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813709
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392457374\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392457374\">PR Review</a>.</p>",
        "id": 193824487,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813783
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407735922\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407735922\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Not making this change for same reason as above; would prefer a static compilation failure to a dynamic panic.</p>\n</blockquote>",
        "id": 193824488,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813784
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392458472\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392458472\">PR Review</a>.</p>",
        "id": 193824707,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813911
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407736881\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407736881\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>u32 as u16</code> is actually valid. It truncates.</p>\n</blockquote>",
        "id": 193824708,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586813912
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392461201\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392461201\">PR Review</a>.</p>",
        "id": 193825230,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814218
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407739162\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407739162\">PR Review Comment</a>:</p>\n<blockquote>\n<p>No, this one is intentional; the RRRR ops are the 3-source, 1-dest ops.</p>\n</blockquote>",
        "id": 193825232,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814218
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392461990\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392461990\">PR Review</a>.</p>",
        "id": 193825388,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814308
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407739811\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407739811\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Holding off on this for now, as above. I'm curious if there's an idiomatic-Rust reason for this -- is there some downside to using the <code>x as T</code> operator built into the language?</p>\n</blockquote>",
        "id": 193825389,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814308
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392462793\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392462793\">PR Review</a>.</p>",
        "id": 193825525,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814401
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407740495\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407740495\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ambiguous subject, I suppose; the result is <code>bits</code> shifted to the left. Edited to clarify.</p>\n</blockquote>",
        "id": 193825526,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814402
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392464075\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392464075\">PR Review</a>.</p>",
        "id": 193825789,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814557
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407741616\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407741616\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yep, it's an ARM-ism. In general we tried to maintain consistent naming w.r.t. the instruction manual unless there was a good reason otherwise. Added a doc comment to clarify.</p>\n</blockquote>",
        "id": 193825790,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814557
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392464455\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392464455\">PR Review</a>.</p>",
        "id": 193825849,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814591
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407741835\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407741835\">PR Review Comment</a>:</p>\n<blockquote>\n<p>High word result of multiply (e.g., bits 127-64 for the i64 case), either signed or unsigned variant. Added doc comment.</p>\n</blockquote>",
        "id": 193825850,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814591
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193826527,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586814999
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392470911\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392470911\">PR Review</a>.</p>",
        "id": 193827064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815346
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747069\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747069\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Removed. I'm not sure if NEON has a plain 128-bit load or not, but we plan to handle vector ops after our initial merge and evaluation, so I'll defer the proper implementation of this to later.</p>\n</blockquote>",
        "id": 193827066,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815346
    },
    {
        "content": "<p>cfallin edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747069\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747069\">PR Review Comment</a>.</p>",
        "id": 193827084,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815359
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392471500\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392471500\">PR Review</a>.</p>",
        "id": 193827158,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815425
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747554\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407747554\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I am glad we could provide some entertainment :-) It's actually intentional: the register allocator library (<a href=\"http://regalloc.rs\" title=\"http://regalloc.rs\">regalloc.rs</a>) expects all allocatable registers in a contiguous index range. Because the ABI and codegen constraints poke random holes in this range, the mapping has to be a piecewise-linear thing. It's ugly, but it works...</p>\n</blockquote>",
        "id": 193827159,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815426
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392472371\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392472371\">PR Review</a>.</p>",
        "id": 193827352,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815538
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407748293\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407748293\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah! I had been under the impression that it was a type error to cast to narrower integers. I'll go back and audit these now.</p>\n</blockquote>",
        "id": 193827353,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815539
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392474870\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392474870\">PR Review</a>.</p>",
        "id": 193827903,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815872
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407750398\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407750398\">PR Review Comment</a>:</p>\n<blockquote>\n<p>As it turns out, @alexcrichton's <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1490\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1490\">https://github.com/bytecodealliance/wasmtime/pull/1490</a> will eliminate the need for this call entirely, which avoids this question entirely.</p>\n<p>Beyond that, if we want to reintroduce stack probes, we should add a <code>__rust_probestack</code> for AArch64 and any other platform we need it on <a href=\"https://github.com/rust-lang/compiler-builtins/blob/master/src/probestack.rs\" title=\"https://github.com/rust-lang/compiler-builtins/blob/master/src/probestack.rs\">here</a> rather than having our own version in Cranelift.</p>\n</blockquote>",
        "id": 193827905,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815872
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392475267\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392475267\">PR Review</a>.</p>",
        "id": 193828024,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815923
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407750722\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407750722\">PR Review Comment</a>:</p>\n<blockquote>\n<p>OK -- we can incorporate legalizations as required, then, into the new pipeline, I think. The issue with the original request that I see is that \"when there is no encoding\" is no longer meaningful: we are no longer taking the approach of directly mapping CLIF instructions to hardware encodings and editing in place otherwise. Pulling in some of the existing legalizations here is meant to be an intermediate state, in place until we transition fully to the new backend and then can rewrite the expansions as a more straightforward pass. @sunfishcode and I have talked about various ways of having a \"pattern-matching\" approach to this.</p>\n</blockquote>",
        "id": 193828025,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586815923
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392476244\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392476244\">PR Review</a>.</p>",
        "id": 193828254,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816053
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407751635\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407751635\">PR Review Comment</a>:</p>\n<blockquote>\n<p>(But in this particular case, we're casting from <code>u32</code> to <code>i64</code>, so truncation should be an issue.)</p>\n</blockquote>",
        "id": 193828255,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816054
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392477061\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392477061\">PR Review</a>.</p>",
        "id": 193828463,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816171
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407752295\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407752295\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yup, just realized this -- thanks!</p>\n</blockquote>",
        "id": 193828464,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816171
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392477537\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392477537\">PR Review</a>.</p>",
        "id": 193828540,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816236
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407752673\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407752673\">PR Review Comment</a>:</p>\n<blockquote>\n<p>(Actually making this change now, as per realization above.)</p>\n</blockquote>",
        "id": 193828541,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586816236
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392484765\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392484765\">PR Review</a>.</p>",
        "id": 193830188,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586817247
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407758891\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407758891\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Updated now; thanks for the education on Rust casts!</p>\n</blockquote>",
        "id": 193830189,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586817247
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193830261,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586817320
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193832753,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819125
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392497799\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392497799\">PR Review</a>.</p>",
        "id": 193832944,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819260
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407770226\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407770226\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Unreachable because of surrounding conditional's <code>narrow_mode != NarrowValueMode::None</code>.</p>\n</blockquote>",
        "id": 193832945,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819261
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392498417\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392498417\">PR Review</a>.</p>",
        "id": 193833140,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819362
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407770799\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407770799\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The intention is to also eventually have other <code>Lower</code> impls. For one, there has been some conversation about verification efforts that plug in a different impl to get symbolic lowerings out (this is very handwavy now, but we want to leave the door open). For another, we might eventually want to drive the lowering logic with a different IR, and so we're trying to keep as much behind this API as possible (it's not perfect, e.g. <code>Opcode</code> type, but this will help with that goal). Everything is monomorphized, so the only cost now should be a little extra type verbosity.</p>\n</blockquote>",
        "id": 193833141,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819362
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499075\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499075\">PR Review</a>.</p>",
        "id": 193833318,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819463
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407771364\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407771364\">PR Review Comment</a>:</p>\n<blockquote>\n<p>We didn't want to rely on the domtree here, for the same reason as above (portability); though perhaps a followup PR could plumb the domtree info through the <code>LowerCtx</code>.</p>\n</blockquote>",
        "id": 193833319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819463
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499694\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499694\">PR Review</a>.</p>",
        "id": 193833492,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819564
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407771871\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407771871\">PR Review Comment</a>:</p>\n<blockquote>\n<p>It might trigger errors elsewhere, but I had wanted to provide a robust impl here; the code should still do the right thing (i.e., nothing) when presented with an empty function body.</p>\n</blockquote>",
        "id": 193833493,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819564
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499852\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392499852\">PR Review</a>.</p>",
        "id": 193833522,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819589
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407772013\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407772013\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Control-flow instruction; expanded.</p>\n</blockquote>",
        "id": 193833523,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819590
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392500634\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392500634\">PR Review</a>.</p>",
        "id": 193833706,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819705
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407772680\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407772680\">PR Review Comment</a>:</p>\n<blockquote>\n<p>At first I had thought this wouldn't work, because we initialize the vcode BB map with <code>bbs</code> just below this; but it turns out that that code is invariant to the block order (we'll just get different <code>BlockIndex</code>es in the vcode, but this is arbitrary anyway). So, done!</p>\n</blockquote>",
        "id": 193833707,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819705
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193833963,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586819940
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392503155\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392503155\">PR Review</a>.</p>",
        "id": 193834154,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820113
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407774848\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407774848\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done by reworking as <code>visit_branch_targets()</code> (internal iteration, accepts a closure, monomorphized at each call site).</p>\n</blockquote>",
        "id": 193834156,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820113
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392504078\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392504078\">PR Review</a>.</p>",
        "id": 193834401,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820267
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407775721\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407775721\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The invariant that the machine backend must satisfy is that <code>gen_nop</code> returns an instruction with nonzero size, and must be smaller than the requested size, so by that invariant, this loop will always terminate. Here's the doc comment from <code>gen_nop()</code> for reference:</p>\n<div class=\"codehilite\"><pre><span></span>/// Generate a NOP. The `preferred_size` parameter allows the caller to                                                                     \n/// request a NOP of that size, or as close to it as possible. The machine                                                                  \n/// backend may return a NOP whose binary encoding is smaller than the                                                                      \n/// preferred size, but must not return a NOP that is larger. However,                                                                      \n/// the instruction must have a nonzero size.\n</pre></div>\n\n\n</blockquote>",
        "id": 193834402,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820267
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392507766\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392507766\">PR Review</a>.</p>",
        "id": 193835211,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820881
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407779016\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407779016\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done!</p>\n</blockquote>",
        "id": 193835212,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820882
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392507951\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392507951\">PR Review</a>.</p>",
        "id": 193835229,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820912
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407779172\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407779172\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Removed! None of the names were actually unconventional; I think this was left over from an earlier prototype.</p>\n</blockquote>",
        "id": 193835230,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586820912
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392509212\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392509212\">PR Review</a>.</p>",
        "id": 193835433,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586821122
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407780286\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407780286\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Nope, not required; the reasoning behind including it here is that it is intertwined with the operand-matching/merging behavior. For example, an <code>iadd</code> can incorporate an <code>iconst</code> on an input; it then calls <code>ctx.merged(input)</code> which indicates that the use was incorporated directly, updating the refcounts (use counts). This could just as well be handled by a later inst-level DCE, but it seemed cheaper to avoid the lowering logic in the first place (Julian's measurement earlier today was ~4K host x86 instructions spent to lower one target instruction; that should improve but still). If you think we should factor these apart, I'm happy to do that, though!</p>\n</blockquote>",
        "id": 193835434,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586821122
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392510770\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392510770\">PR Review</a>.</p>",
        "id": 193835691,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586821380
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407781785\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407781785\">PR Review Comment</a>:</p>\n<blockquote>\n<p>It's actually a BFS (<code>find_reachable_bbs()</code> further up in this file), but the order doesn't matter here, as we <em>also</em> compute RPO later in <a href=\"http://blockorder.rs\" title=\"http://blockorder.rs\">blockorder.rs</a> :-)</p>\n<p>My thinking here was that I wanted to avoid creating a dependency on the <code>domtree</code> in order to remain as portable as possible, i.e., given later alternative implementations of the frontend driving the lowering logic, and that the <code>O(blocks)</code> cost would hopefully not be too bad. (I reserve the right to change my mind later in the week when I start looking at profiling results in detail!) But I can plumb this through if you'd prefer.</p>\n</blockquote>",
        "id": 193835692,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586821380
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193835872,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586821529
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193838994,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586824271
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193840385,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586825524
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392532822\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392532822\">PR Review</a>.</p>",
        "id": 193840392,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586825529
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407802217\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407802217\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Good idea -- done!</p>\n</blockquote>",
        "id": 193840393,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586825529
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 193840703,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586825853
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392535666\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392535666\">PR Review</a>.</p>",
        "id": 193840981,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586826104
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407804889\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407804889\">PR Review Comment</a>:</p>\n<blockquote>\n<p>@sunfishcode, that sounds perfect. Would you like us to wait for #1490 to land, or would it be acceptable to land this with the temporary \"empty function\" stack probe in the meantime (if the timing works out that way)?</p>\n</blockquote>",
        "id": 193840982,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586826105
    },
    {
        "content": "<p>julian-seward1 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392599503\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392599503\">PR Review</a>.</p>",
        "id": 193849995,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839424
    },
    {
        "content": "<p>julian-seward1 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407863743\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407863743\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I would just leave it as it is.  CL will fail at run time the first time someone implementing a new instruction format tries to run any test case, so it'll be obvious it needs to be fixed.</p>\n</blockquote>",
        "id": 193849996,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839424
    },
    {
        "content": "<p>julian-seward1 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392599982\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392599982\">PR Review</a>.</p>",
        "id": 193850067,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839534
    },
    {
        "content": "<p>julian-seward1 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407864215\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407864215\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Leave it as is, I say; this will never be used in production.</p>\n</blockquote>",
        "id": 193850068,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839535
    },
    {
        "content": "<p>julian-seward1 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392601090\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392601090\">PR Review</a>.</p>",
        "id": 193850212,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839777
    },
    {
        "content": "<p>julian-seward1 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407865266\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407865266\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is that really an improvement?  (1) It requires the reader to know (or look up) <code>to_be_bytes</code>; the original was quite clear.  (2) In order for it to not be a performance loss, it relies on <code>rustc</code> to inline away the call, the array construction and the array use, which is quite a big ask.</p>\n</blockquote>",
        "id": 193850213,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586839778
    },
    {
        "content": "<p>julian-seward1 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392604291\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392604291\">PR Review</a>.</p>",
        "id": 193850713,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586840486
    },
    {
        "content": "<p>julian-seward1 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407868218\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407868218\">PR Review Comment</a>:</p>\n<blockquote>\n<p>As a general comment -- I have been profiling the new backend (Chris' stuff and the new regalloc) extensively with DHAT and plan to keep doing so.  That is very effective at finding pointless or low-value repeated reallocation -- in the week 6-13 Apr I reduced the number of allocation calls by a factor of 2 to 3, and there is much more to come.  Given that such allocation-avoiding restructurings potentially make code harder to understand, I'd prefer to restrict them to cases where the profile numbers show there's a clear benefit to be had, or that the change is very local and so doesn't impact readability -- eg, replacing a <code>Vec</code> with a <code>SmallVec</code>.</p>\n</blockquote>",
        "id": 193850714,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586840486
    },
    {
        "content": "<p>julian-seward1 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392604856\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392604856\">PR Review</a>.</p>",
        "id": 193850810,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586840599
    },
    {
        "content": "<p>julian-seward1 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407868704\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r407868704\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Just because I like these top level debug markers to be easy to spot in the thousands of lines of debug output.  No other reason.</p>\n</blockquote>",
        "id": 193850811,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586840600
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392777082\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392777082\">PR Review</a>.</p>",
        "id": 193873882,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586858160
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408013059\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408013059\">PR Review Comment</a>:</p>\n<blockquote>\n<p>In cg_clif I write the clif ir before and after compilation to a file in debug mode. This makes debugging miscompilations much easier. It is unfortunately responsible for a nontrivial amount of compilation time, which means that I have to disable it in release mode. I would prefer if the new backend counter part to after compilation clif ir (vcode) could be printed as fast as possible.</p>\n</blockquote>",
        "id": 193873883,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586858160
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392784071\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392784071\">PR Review</a>.</p>",
        "id": 193874958,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586858728
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408018869\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408018869\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The code would fallthrough to the next function when there are no blocks, which shouldn't be allowed.</p>\n</blockquote>",
        "id": 193874961,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586858728
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392786937\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392786937\">PR Review</a>.</p>",
        "id": 193876979,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392786937\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-392786937\">PR Review</a>.</p>",
        "id": 193876980,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408021337\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408021337\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This applies only to the <code>use crate::binemit::CodeOffset;</code>.</p>\n</blockquote>",
        "id": 193876981,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408023251\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408023251\">PR Review Comment</a>:</p>\n<blockquote>\n<p>You could use the same <code>#[repr(u8)</code> + <code>Eq = 0</code> + <code>self as u8</code> here as <code>ShiftOp</code> and <code>ExtendOp</code>.</p>\n</blockquote>",
        "id": 193876982,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408027825\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408027825\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>        f.debug_struct(&quot;MachBackend&quot;)\n            .field(&quot;name&quot;, self.backend.name())\n            .field(&quot;triple&quot;, self.backend.triple())\n            .field(&quot;flags&quot;, self.backend.flags())\n            .finish()\n</pre></div>\n\n\n</blockquote>",
        "id": 193876984,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408026036\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408026036\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This should be removed if you accept the suggestion above.</p>\n</blockquote>",
        "id": 193876985,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408029191\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408029191\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    let encinfo = if isa.is_none() || isa.unwrap().get_mach_backend().is_some() {\n</pre></div>\n\n\n</blockquote>",
        "id": 193876986,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408025796\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408025796\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>#[derive(Clone, Copy, Debug, Eq, PartialEq)]\npub enum Size {\n    Size32,\n    Size64,\n}\n</pre></div>\n\n\n<p><code>Eq</code> can be used as replacement for <code>is32</code> and <code>is64</code> if you think that isn't worse.</p>\n<p>If you have a better suggestion for the name of the variants, feel free to use that instead.</p>\n</blockquote>",
        "id": 193876988,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408030091\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408030091\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>/// If `ireg` denotes an I64-classed reg, make a best-effort attempt to show\n</pre></div>\n\n\n</blockquote>",
        "id": 193876989,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408029430\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408029430\">PR Review Comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>    // This is pretty lame, but whatever ..\n</pre></div>\n\n\n</blockquote>",
        "id": 193876990,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586859957
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393914251\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393914251\">PR Review</a>.</p>",
        "id": 194052568,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586966273
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408954437\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408954437\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Please remove this.</p>\n</blockquote>",
        "id": 194052570,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586966273
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393934328\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393934328\">PR Review</a>.</p>",
        "id": 194056000,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586967726
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408970643\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408970643\">PR Review Comment</a>:</p>\n<blockquote>\n<p><code>as</code> casts silently pick between widening, narrowing, and value-changing casts, while <code>::from</code> casts get a type error on any potentially value-changing cast, so it's nice to use <code>::from</code> when applicable.</p>\n</blockquote>",
        "id": 194056001,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586967727
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393939369\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393939369\">PR Review</a>.</p>",
        "id": 194057425,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586968326
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408974755\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r408974755\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I think it's fine to land it with this temporary workaround.</p>\n</blockquote>",
        "id": 194057426,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586968326
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393939369\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393939369\">PR Review</a>.</p>",
        "id": 194057427,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586968326
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393989876\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-393989876\">PR Review</a>.</p>",
        "id": 194065551,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586972078
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409015981\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409015981\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Makes sense!</p>\n</blockquote>",
        "id": 194065552,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586972078
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394198294\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394198294\">PR Review</a>.</p>",
        "id": 194240479,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586992608
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409188506\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409188506\">PR Review Comment</a>:</p>\n<blockquote>\n<p>That's a reasonable goal, but I suspect writing to the file will vastly outweigh allocation speeds here. In any case, the immediate costs are large -- a refactor, and a painful rebase of other work -- and the benefit is unclear and not driven by actual data. So let's leave this be for now, I think.</p>\n</blockquote>",
        "id": 194240480,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586992608
    },
    {
        "content": "<p>cfallin edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409188506\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409188506\">PR Review Comment</a>.</p>",
        "id": 194240509,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586992633
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394199004\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394199004\">PR Review</a>.</p>",
        "id": 194240606,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586992725
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409189197\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409189197\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Resolving this for now, as Ben is on top of ABI issues and has done further work on caller/callee-saves that will come in another PR.</p>\n</blockquote>",
        "id": 194240607,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586992725
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394201170\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394201170\">PR Review</a>.</p>",
        "id": 194240987,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586993092
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409191186\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409191186\">PR Review Comment</a>:</p>\n<blockquote>\n<p>It seems that rustc actually does this; I just tested (with <code>-O</code>). Happy to do a little work to be idiomatic, as long as the complexity cost is not too high!</p>\n</blockquote>",
        "id": 194240988,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586993092
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394203101\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394203101\">PR Review</a>.</p>",
        "id": 194241351,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586993432
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409192923\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409192923\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yes, perhaps, if the verifier allows this; but it seems that the old backend would have the same problem, no? (There would be no instruction to have an encoding, thus no return would be emitted.) It seems this would be good to follow up in a separate PR if it is indeed allowed, by updating the verifier instead. (As a general code-style thing I don't want to distribute implicit assumptions about data structure state throughout the code; if the entry is an <code>Option&lt;Block&gt;</code> then let's write code everywhere that supports that, and if it should always be a <code>Some</code>, then let's just make it a <code>Block</code> instead.)</p>\n</blockquote>",
        "id": 194241352,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586993432
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 194241414,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586993518
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394205616\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394205616\">PR Review</a>.</p>",
        "id": 194241974,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586994016
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394205616\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394205616\">PR Review</a>.</p>",
        "id": 194241975,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586994016
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195217\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195217\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This can take &amp;Function I think.</p>\n</blockquote>",
        "id": 194241976,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586994016
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195333\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195333\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Same here</p>\n</blockquote>",
        "id": 194241977,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586994016
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195763\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409195763\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Same here</p>\n</blockquote>",
        "id": 194241978,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586994016
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a> from <code>arm64-merge</code> to <code>master</code>:</p>\n<blockquote>\n<p>This PR contributes a new backend framework built around <code>MachInst</code>s (machine instructions) contained in <code>VCode</code> (virtual-registerized code) containers. Furthermore, it contains a working ARM64 backend built in this new framework. The new framework is properly connected into the main Cranelift compilation pipeline, and the appropriate integrations have been made so that <code>wasmtime</code> can run basic Wasm tests correctly on ARM64 hardware.</p>\n<p>This patch sequence contains code written by Julian Seward &lt;<a href=\"mailto:jseward@acm.org\" title=\"mailto:jseward@acm.org\">jseward@acm.org</a>&gt; and Benjamin Bouvier &lt;<a href=\"mailto:public@benj.me\" title=\"mailto:public@benj.me\">public@benj.me</a>&gt;, originally developed on a side-branch before rebasing and condensing into this patch series. See the <code>arm64</code> branch at <code>https://github.com/cfallin/wasmtime</code> for original development history.</p>\n<p>This patch also contains code written by Joey Gouly &lt;<a href=\"mailto:joey.gouly@arm.com\" title=\"mailto:joey.gouly@arm.com\">joey.gouly@arm.com</a>&gt; and contributed to the above branch. These contributions are \"Copyright (c) 2020, Arm Limited.\"</p>\n<p>Closes #1174 and #1075.</p>\n</blockquote>",
        "id": 194244956,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586996562
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394220560\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394220560\">PR Review</a>.</p>",
        "id": 194245000,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586996627
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409209300\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409209300\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yup, this was left over from an earlier version that did mutate the function; much nicer now to take an immutable input. Thanks!</p>\n</blockquote>",
        "id": 194245001,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586996627
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394499895\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394499895\">PR Review</a>.</p>",
        "id": 194283231,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587032756
    },
    {
        "content": "<p>cfallin merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494\">PR #1494</a>.</p>",
        "id": 194336006,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587056524
    },
    {
        "content": "<p>peterhuene submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394881754\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394881754\">PR Review</a>.</p>",
        "id": 194345386,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587060697
    },
    {
        "content": "<p>peterhuene submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394881754\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394881754\">PR Review</a>.</p>",
        "id": 194345387,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587060697
    },
    {
        "content": "<p>peterhuene created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409753727\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409753727\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Unfortunately I just caught this.  I  believe this accidentally moved the <code>#[cfg(feature = \"unwind\")]</code>.</p>\n<p>I have a PR that this merged conflicted with, so I'll correct it there.</p>\n</blockquote>",
        "id": 194345388,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587060697
    },
    {
        "content": "<p>peterhuene edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409753727\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409753727\">PR Review Comment</a>.</p>",
        "id": 194345478,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587060722
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394890117\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#pullrequestreview-394890117\">PR Review</a>.</p>",
        "id": 194346846,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587061369
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409760605\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1494#discussion_r409760605\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yikes, that was likely a rebase failure on my part. Sorry about that. (I suppose I got lucky as <code>unwind</code> is enabled by default.) Thanks for fixing!</p>\n</blockquote>",
        "id": 194346847,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587061369
    }
]