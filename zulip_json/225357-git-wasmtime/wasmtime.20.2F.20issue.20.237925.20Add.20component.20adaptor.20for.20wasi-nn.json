[
    {
        "content": "<p>danbev opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925\">issue #7925</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>Add component adaptor for wasi-nn (wasi_ephemeral_nn).</p>\n<h4>Benefit</h4>\n<p>Currently when trying to use <code>wasm-tools component new</code> with a core wasm module leads to the following error:<br>\n  ```console                                                                      <br>\n  $ wasm-tools component new -vvv ./target/wasm32-wasi/release/inf_wasi.wasm \\         <br>\n  --adapt wit-lib/wasi_snapshot_preview1.reactor.wasm \\                           <br>\n  -o target/inf-wasi-component.wasm                                               <br>\n  ...                                                                             </p>\n<p>error: failed to encode a component from module                                 </p>\n<p>Caused by:                                                                      <br>\n      0: module requires an import interface named <code>wasi_ephemeral_nn</code>            <br>\n<code>``\nMy thinking here is that adding an adapter similar to </code>wasi_snapshot_preview1<code> but for </code>wasi_ephemeral_nn` would enable the  component to be created.</p>\n<h4>Implementation</h4>\n<p>I don't have any suggestions here but if I can get some guidance I'd be willing to try to implement this.</p>\n<h4>Alternatives</h4>\n<p>N/A<br>\n</p>\n</blockquote>",
        "id": 421245196,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707831482
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925#issuecomment-1942057282\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925\">issue #7925</a>:</p>\n<blockquote>\n<p>I don't think a component adapter is the path to go for wasi-nn. The component adapter was created to solve a very specific problem: we needed to create components out of modules that had some of their imports created in difficult to modify (especially before standardization is complete) upstream source trees such as <code>wasi-libc</code> and rust's <code>std</code> libraries. Because we couldn't upgrade those module imports to use e.g. a <code>wit-bindgen!</code> macro to generate component imports, we created an adapter to go between them, but in practice the adapter is very difficult to maintain because it needs to be written in a subset of Rust that doesn't result in any table or data sections existing in the linked module, and also the adapter is in the process of becoming obsolete, now that WASI 0.2 is stabilized, because we are actively upstreaming the changes in libc and std to use <code>wit-bindgen</code> component bindings directly.</p>\n<p>Wasi-nn doesnt have those problems, that I am aware of: users of wasi-nn have much easier paths to upgrading their imports of wasi-nn from the (now legacy) witx abi module imports to wit-bindgen component imports. Have you tried to upgrade your wasi-nn user code in that way?</p>\n</blockquote>",
        "id": 421291402,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707845201
    },
    {
        "content": "<p>danbev closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925\">issue #7925</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>Add component adaptor for wasi-nn (wasi_ephemeral_nn).</p>\n<h4>Benefit</h4>\n<p>Currently when trying to use <code>wasm-tools component new</code> with a core wasm module leads to the following error:<br>\n  ```console                                                                      <br>\n  $ wasm-tools component new -vvv ./target/wasm32-wasi/release/inf_wasi.wasm \\         <br>\n  --adapt wit-lib/wasi_snapshot_preview1.reactor.wasm \\                           <br>\n  -o target/inf-wasi-component.wasm                                               <br>\n  ...                                                                             </p>\n<p>error: failed to encode a component from module                                 </p>\n<p>Caused by:                                                                      <br>\n      0: module requires an import interface named <code>wasi_ephemeral_nn</code>            <br>\n<code>``\nMy thinking here is that adding an adapter similar to </code>wasi_snapshot_preview1<code> but for </code>wasi_ephemeral_nn` would enable the  component to be created.</p>\n<h4>Implementation</h4>\n<p>I don't have any suggestions here but if I can get some guidance I'd be willing to try to implement this.</p>\n<h4>Alternatives</h4>\n<p>N/A<br>\n</p>\n</blockquote>",
        "id": 421378850,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707892306
    },
    {
        "content": "<p>danbev <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925#issuecomment-1943160356\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925\">issue #7925</a>:</p>\n<blockquote>\n<p>@pchickey Thanks for the detailed explanation about the adapter, I appreciate it! </p>\n<blockquote>\n<p>users of wasi-nn have much easier paths to upgrading their imports of wasi-nn from the (now legacy) witx abi module imports to wit-bindgen component imports. Have you tried to upgrade your wasi-nn user code in that way?</p>\n</blockquote>\n<p>I actually have not tried that which is a little embarrassing. I just ran into the error and it looked like the same issue I had seen before and I assumed it would have to be handled in the same way. I'll upgrade wasi-nn and try that out. Thanks!</p>\n</blockquote>",
        "id": 421378856,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707892307
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925#issuecomment-1944261753\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7925\">issue #7925</a>:</p>\n<blockquote>\n<p>Don't be embarrassed, this stuff is brand new and there are nowhere near enough docs. Happy to help.</p>\n</blockquote>",
        "id": 421493011,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707930819
    }
]