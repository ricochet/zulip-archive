[
    {
        "content": "<p><a href=\"https://github.com/dbaeumer\">dbaeumer</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">Issue #7310</a>.</p>",
        "id": 397655598,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697789879
    },
    {
        "content": "<p>dbaeumer opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">issue #7310</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n    <span class=\"mi\">0</span>: <span class=\"mh\">0x1eda65</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">atomic_compare_exchange</span>::<span class=\"n\">he4db91b5677645c3</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"mh\">0x1a2511</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">AtomicUsize</span>::<span class=\"n\">compare_exchange</span>::<span class=\"n\">h10d76addb394aeb4</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span>: <span class=\"mh\">0x191b87</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">context</span>::<span class=\"n\">Context</span>::<span class=\"n\">try_select</span>::<span class=\"n\">hedc42d580d0f5209</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span>: <span class=\"mh\">0x1c08f6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h861e99c8443efe4d</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span>: <span class=\"mh\">0x188745</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">slice</span>::<span class=\"n\">iter</span>::<span class=\"n\">Iter</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">iter</span>::<span class=\"n\">traits</span>::<span class=\"n\">iterator</span>::<span class=\"nb\">Iterator</span><span class=\"o\">&gt;</span>::<span class=\"n\">position</span>::<span class=\"n\">hd056e06b364e3e44</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span>: <span class=\"mh\">0x1c0784</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"n\">h8c5edd4b2c5fd9da</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span>: <span class=\"mh\">0x18a9a8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">flavors</span>::<span class=\"n\">zero</span>::<span class=\"n\">Channel</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">h8a671c75a1062370</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span>: <span class=\"mh\">0x1e0917</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">channel</span>::<span class=\"n\">Sender</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">hd7006c022325632f</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1c972c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">lsp_server</span>::<span class=\"n\">stdio</span>::<span class=\"n\">stdio_transport</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h95daef3273f8dae0</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span>: <span class=\"mh\">0x195d98</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">hae1a61c1cb243dba</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span>: <span class=\"mh\">0x17d215</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h8f84e616a49c3966</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span>: <span class=\"mh\">0x188a17</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">panic</span>::<span class=\"n\">unwind_safe</span>::<span class=\"n\">AssertUnwindSafe</span><span class=\"o\">&lt;</span><span class=\"n\">F</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;&gt;</span>::<span class=\"n\">call_once</span>::<span class=\"n\">h8419b25b3e5d3010</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span>: <span class=\"mh\">0x1ae909</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">do_call</span>::<span class=\"n\">hc2efa2fef97ee73a</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span>: <span class=\"mh\">0x1ae7e9</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">hb437d11b30ef124c</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span>: <span class=\"mh\">0x17cd7a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h48ecccc2f2bc6ed7</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1b5bf2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span>::<span class=\"n\">call_once</span><span class=\"p\">{{</span><span class=\"n\">vtable</span><span class=\"p\">.</span><span class=\"n\">shim</span><span class=\"p\">}}</span>::<span class=\"n\">hea4d8be1b607e767</span>\n<span class=\"w\">   </span><span class=\"mi\">16</span>: <span class=\"mh\">0x2a310b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys</span>::<span class=\"n\">wasi</span>::<span class=\"n\">thread</span>::<span class=\"n\">Thread</span>::<span class=\"n\">new</span>::<span class=\"n\">thread_start</span>::<span class=\"n\">h59449041806aed76</span>\n<span class=\"w\">   </span><span class=\"mi\">17</span>: <span class=\"mh\">0x2a7673</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__wasi_thread_start_C</span>\n<span class=\"w\">   </span><span class=\"mi\">18</span>: <span class=\"mh\">0x2a81ee</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">wasi_thread_start</span>\n<span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">unaligned</span><span class=\"w\"> </span><span class=\"n\">atomic</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>clone <a href=\"https://github.com/dbaeumer/wasm-lsp-server.git\">https://github.com/dbaeumer/wasm-lsp-server.git</a></li>\n<li>run <code>npm run build:wasm</code></li>\n<li>run <code>npm run test:wasm</code></li>\n</ul>\n<h3>Expected Results</h3>\n<ul>\n<li>run <code>npm run build:exe</code></li>\n<li>run <code>npm run test:exe</code></li>\n</ul>\n<p>wasm lsp server handles messages correctly</p>\n<h3>Actual Results</h3>\n<p>You get the above stack trace</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime: <code>wasmtime-cli 13.0.0</code><br>\nRustc: rustc 1.75.0-nightly (4578435e1 2023-10-19)</p>\n<p>Operating system: Ubuntu 20.04</p>\n<p>Architecture: x64</p>\n</blockquote>",
        "id": 397655600,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697789880
    },
    {
        "content": "<p>dbaeumer edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">issue #7310</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n    <span class=\"mi\">0</span>: <span class=\"mh\">0x1eda65</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">atomic_compare_exchange</span>::<span class=\"n\">he4db91b5677645c3</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"mh\">0x1a2511</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">AtomicUsize</span>::<span class=\"n\">compare_exchange</span>::<span class=\"n\">h10d76addb394aeb4</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span>: <span class=\"mh\">0x191b87</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">context</span>::<span class=\"n\">Context</span>::<span class=\"n\">try_select</span>::<span class=\"n\">hedc42d580d0f5209</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span>: <span class=\"mh\">0x1c08f6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h861e99c8443efe4d</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span>: <span class=\"mh\">0x188745</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">slice</span>::<span class=\"n\">iter</span>::<span class=\"n\">Iter</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">iter</span>::<span class=\"n\">traits</span>::<span class=\"n\">iterator</span>::<span class=\"nb\">Iterator</span><span class=\"o\">&gt;</span>::<span class=\"n\">position</span>::<span class=\"n\">hd056e06b364e3e44</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span>: <span class=\"mh\">0x1c0784</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"n\">h8c5edd4b2c5fd9da</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span>: <span class=\"mh\">0x18a9a8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">flavors</span>::<span class=\"n\">zero</span>::<span class=\"n\">Channel</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">h8a671c75a1062370</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span>: <span class=\"mh\">0x1e0917</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">channel</span>::<span class=\"n\">Sender</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">hd7006c022325632f</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1c972c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">lsp_server</span>::<span class=\"n\">stdio</span>::<span class=\"n\">stdio_transport</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h95daef3273f8dae0</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span>: <span class=\"mh\">0x195d98</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">hae1a61c1cb243dba</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span>: <span class=\"mh\">0x17d215</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h8f84e616a49c3966</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span>: <span class=\"mh\">0x188a17</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">panic</span>::<span class=\"n\">unwind_safe</span>::<span class=\"n\">AssertUnwindSafe</span><span class=\"o\">&lt;</span><span class=\"n\">F</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;&gt;</span>::<span class=\"n\">call_once</span>::<span class=\"n\">h8419b25b3e5d3010</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span>: <span class=\"mh\">0x1ae909</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">do_call</span>::<span class=\"n\">hc2efa2fef97ee73a</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span>: <span class=\"mh\">0x1ae7e9</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">hb437d11b30ef124c</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span>: <span class=\"mh\">0x17cd7a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h48ecccc2f2bc6ed7</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1b5bf2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span>::<span class=\"n\">call_once</span><span class=\"p\">{{</span><span class=\"n\">vtable</span><span class=\"p\">.</span><span class=\"n\">shim</span><span class=\"p\">}}</span>::<span class=\"n\">hea4d8be1b607e767</span>\n<span class=\"w\">   </span><span class=\"mi\">16</span>: <span class=\"mh\">0x2a310b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys</span>::<span class=\"n\">wasi</span>::<span class=\"n\">thread</span>::<span class=\"n\">Thread</span>::<span class=\"n\">new</span>::<span class=\"n\">thread_start</span>::<span class=\"n\">h59449041806aed76</span>\n<span class=\"w\">   </span><span class=\"mi\">17</span>: <span class=\"mh\">0x2a7673</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__wasi_thread_start_C</span>\n<span class=\"w\">   </span><span class=\"mi\">18</span>: <span class=\"mh\">0x2a81ee</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">wasi_thread_start</span>\n<span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">unaligned</span><span class=\"w\"> </span><span class=\"n\">atomic</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>clone <a href=\"https://github.com/dbaeumer/wasm-lsp-server.git\">https://github.com/dbaeumer/wasm-lsp-server.git</a></li>\n<li>run <code>npm run build:wasm</code></li>\n<li>run <code>npm run test:wasm</code></li>\n</ul>\n<h3>Expected Results</h3>\n<ul>\n<li>run <code>npm run build:exe</code></li>\n<li>run <code>npm run test:exe</code></li>\n</ul>\n<p>wasm lsp server handles messages correctly</p>\n<h3>Actual Results</h3>\n<p>You get the above stack trace</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime: <code>wasmtime-cli 13.0.0</code><br>\nRustc: rustc 1.75.0-nightly (4578435e1 2023-10-19) &amp; rustc 1.73.0</p>\n<p>Operating system: Ubuntu 20.04</p>\n<p>Architecture: x64</p>\n</blockquote>",
        "id": 397656076,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697790013
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310#issuecomment-1772965017\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">issue #7310</a>:</p>\n<blockquote>\n<p>Thanks for the report! I believe that Wasmtime is working correctly here because with some local debugging I found that the atomic is indeed not aligned correctly.</p>\n<p>Further debugging showed that when built in release mode the server works well. My guess is that you're running into a stack overflow here which would become a segfault in native code but is not caught in WebAssembly code. Release mode typically takes less stack space which is probably why it works in release mode and not in debug mode.</p>\n</blockquote>",
        "id": 397735709,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697816085
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">issue #7310</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n    <span class=\"mi\">0</span>: <span class=\"mh\">0x1eda65</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">atomic_compare_exchange</span>::<span class=\"n\">he4db91b5677645c3</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"mh\">0x1a2511</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">sync</span>::<span class=\"n\">atomic</span>::<span class=\"n\">AtomicUsize</span>::<span class=\"n\">compare_exchange</span>::<span class=\"n\">h10d76addb394aeb4</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span>: <span class=\"mh\">0x191b87</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">context</span>::<span class=\"n\">Context</span>::<span class=\"n\">try_select</span>::<span class=\"n\">hedc42d580d0f5209</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span>: <span class=\"mh\">0x1c08f6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h861e99c8443efe4d</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span>: <span class=\"mh\">0x188745</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">slice</span>::<span class=\"n\">iter</span>::<span class=\"n\">Iter</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">iter</span>::<span class=\"n\">traits</span>::<span class=\"n\">iterator</span>::<span class=\"nb\">Iterator</span><span class=\"o\">&gt;</span>::<span class=\"n\">position</span>::<span class=\"n\">hd056e06b364e3e44</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span>: <span class=\"mh\">0x1c0784</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">waker</span>::<span class=\"n\">Waker</span>::<span class=\"n\">try_select</span>::<span class=\"n\">h8c5edd4b2c5fd9da</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span>: <span class=\"mh\">0x18a9a8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">flavors</span>::<span class=\"n\">zero</span>::<span class=\"n\">Channel</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">h8a671c75a1062370</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span>: <span class=\"mh\">0x1e0917</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">crossbeam_channel</span>::<span class=\"n\">channel</span>::<span class=\"n\">Sender</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>::<span class=\"n\">send</span>::<span class=\"n\">hd7006c022325632f</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1c972c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">lsp_server</span>::<span class=\"n\">stdio</span>::<span class=\"n\">stdio_transport</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h95daef3273f8dae0</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span>: <span class=\"mh\">0x195d98</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">hae1a61c1cb243dba</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span>: <span class=\"mh\">0x17d215</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h8f84e616a49c3966</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span>: <span class=\"mh\">0x188a17</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">core</span>::<span class=\"n\">panic</span>::<span class=\"n\">unwind_safe</span>::<span class=\"n\">AssertUnwindSafe</span><span class=\"o\">&lt;</span><span class=\"n\">F</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;&gt;</span>::<span class=\"n\">call_once</span>::<span class=\"n\">h8419b25b3e5d3010</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span>: <span class=\"mh\">0x1ae909</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">do_call</span>::<span class=\"n\">hc2efa2fef97ee73a</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span>: <span class=\"mh\">0x1ae7e9</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"kr\">try</span>::<span class=\"n\">hb437d11b30ef124c</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span>: <span class=\"mh\">0x17cd7a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">thread</span>::<span class=\"n\">Builder</span>::<span class=\"n\">spawn_unchecked_</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h48ecccc2f2bc6ed7</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1b5bf2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span>::<span class=\"n\">call_once</span><span class=\"p\">{{</span><span class=\"n\">vtable</span><span class=\"p\">.</span><span class=\"n\">shim</span><span class=\"p\">}}</span>::<span class=\"n\">hea4d8be1b607e767</span>\n<span class=\"w\">   </span><span class=\"mi\">16</span>: <span class=\"mh\">0x2a310b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys</span>::<span class=\"n\">wasi</span>::<span class=\"n\">thread</span>::<span class=\"n\">Thread</span>::<span class=\"n\">new</span>::<span class=\"n\">thread_start</span>::<span class=\"n\">h59449041806aed76</span>\n<span class=\"w\">   </span><span class=\"mi\">17</span>: <span class=\"mh\">0x2a7673</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__wasi_thread_start_C</span>\n<span class=\"w\">   </span><span class=\"mi\">18</span>: <span class=\"mh\">0x2a81ee</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">wasi_thread_start</span>\n<span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">unaligned</span><span class=\"w\"> </span><span class=\"n\">atomic</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>clone <a href=\"https://github.com/dbaeumer/wasm-lsp-server.git\">https://github.com/dbaeumer/wasm-lsp-server.git</a></li>\n<li>run <code>npm run build:wasm</code></li>\n<li>run <code>npm run test:wasm</code></li>\n</ul>\n<h3>Expected Results</h3>\n<ul>\n<li>run <code>npm run build:exe</code></li>\n<li>run <code>npm run test:exe</code></li>\n</ul>\n<p>wasm lsp server handles messages correctly</p>\n<h3>Actual Results</h3>\n<p>You get the above stack trace</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime: <code>wasmtime-cli 13.0.0</code><br>\nRustc: rustc 1.75.0-nightly (4578435e1 2023-10-19) &amp; rustc 1.73.0</p>\n<p>Operating system: Ubuntu 20.04</p>\n<p>Architecture: x64</p>\n</blockquote>",
        "id": 397735710,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697816085
    },
    {
        "content": "<p>dbaeumer <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310#issuecomment-1772987734\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7310\">issue #7310</a>:</p>\n<blockquote>\n<p>@alexcrichton thanks for the pointer. Will use release mode instead.</p>\n</blockquote>",
        "id": 397738505,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1697817004
    }
]