[
    {
        "content": "<p>danthegoodman1 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>At <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html</a> the following example is shown:</p>\n<blockquote>\n<p>Calling a function which takes one string parameter and returns a string:<br>\n<code>rs\nlet typed = func.typed::&lt;(&amp;str,), (String,)&gt;(&amp;store)?;\nlet ret = typed.call(&amp;mut store, (\"Hello, \",))?.0;\nprintln!(\"returned string was: {}\", ret);\n</code></p>\n</blockquote>\n<p>I have recreated this setup via:</p>\n<p><a href=\"http://lib.rs\">lib.rs</a></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasm_bindgen</span><span class=\"p\">::</span><span class=\"n\">prelude</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"cp\">#[wasm_bindgen]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">uppercase</span><span class=\"p\">(</span><span class=\"n\">input</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">input</span><span class=\"p\">.</span><span class=\"n\">to_uppercase</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Compiled with <code>wasm-pack build --target web</code></p>\n<p><a href=\"http://main.rs\">main.rs</a> (another directory)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">wasm_bytes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"s\">\"/Users/dangoodman/code/learningRust/wasm/code/pkg/code_bg.wasm\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Engine</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Store</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"uppercase\"</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>Which gives me the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">learningRust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">41</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">   </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1563</span><span class=\"p\">:</span><span class=\"mi\">17</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1563</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Params</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">50</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1564</span><span class=\"p\">:</span><span class=\"mi\">18</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1564</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Results</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                  </span><span class=\"o\">^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0277</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">host</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">bin</span><span class=\"w\"> </span><span class=\"s\">\"host\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n</code></pre></div>\n<p>Is the example wrong, or am I using the crate incorrectly?</p>\n<p>The docs state:</p>\n<blockquote>\n<p>Types specified here must implement the <a href=\"https://docs.wasmtime.dev/api/wasmtime/component/trait.ComponentType.html\">ComponentType</a> trait. This trait is implemented for built-in types to Rust such as integer primitives, floats, Option&lt;T&gt;, Result&lt;T, E&gt;, strings, Vec&lt;T&gt;, and more. As parameters youâ€™ll be passing native Rust types.</p>\n</blockquote>\n<p>And the trait for these types seem to be implemented according to <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html</a></p>\n<p>It's being imported as <code>wasmtime = { version = \"26.0.1\", features = [\"component-model\", \"runtime\"] }</code></p>\n</blockquote>",
        "id": 481501348,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192230
    },
    {
        "content": "<p>danthegoodman1 edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>At <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html</a> the following example is shown:</p>\n<blockquote>\n<p>Calling a function which takes one string parameter and returns a string:<br>\n<code>rs\nlet typed = func.typed::&lt;(&amp;str,), (String,)&gt;(&amp;store)?;\nlet ret = typed.call(&amp;mut store, (\"Hello, \",))?.0;\nprintln!(\"returned string was: {}\", ret);\n</code></p>\n</blockquote>\n<p>I have recreated this setup via:</p>\n<p><a href=\"http://lib.rs\">lib.rs</a></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasm_bindgen</span><span class=\"p\">::</span><span class=\"n\">prelude</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"cp\">#[wasm_bindgen]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">uppercase</span><span class=\"p\">(</span><span class=\"n\">input</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">input</span><span class=\"p\">.</span><span class=\"n\">to_uppercase</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Compiled with <code>wasm-pack build --target web</code></p>\n<p><a href=\"http://main.rs\">main.rs</a> (another directory)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">wasm_bytes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"s\">\"/Users/dangoodman/code/learningRust/wasm/code/pkg/code_bg.wasm\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Engine</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Store</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"uppercase\"</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>Which gives me the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">learningRust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">41</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">   </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1563</span><span class=\"p\">:</span><span class=\"mi\">17</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1563</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Params</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">50</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1564</span><span class=\"p\">:</span><span class=\"mi\">18</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1564</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Results</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                  </span><span class=\"o\">^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0277</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">host</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">bin</span><span class=\"w\"> </span><span class=\"s\">\"host\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n</code></pre></div>\n<p>Is the example wrong, or am I using the crate incorrectly?</p>\n<p>The docs state:</p>\n<blockquote>\n<p>Types specified here must implement the <a href=\"https://docs.wasmtime.dev/api/wasmtime/component/trait.ComponentType.html\">ComponentType</a> trait. This trait is implemented for built-in types to Rust such as integer primitives, floats, Option&lt;T&gt;, Result&lt;T, E&gt;, strings, Vec&lt;T&gt;, and more. As parameters youâ€™ll be passing native Rust types.</p>\n</blockquote>\n<p>And the trait for these types seem to be implemented according to <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html</a></p>\n<p>It's being imported as <code>wasmtime = { version = \"26.0.1\", features = [\"component-model\", \"runtime\"] }</code></p>\n<p>Edit: it also seems to have a similar issue for calling the function:</p>\n<p>&lt;img width=\"1168\" alt=\"image\" src=\"<a href=\"https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f\">https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f</a>\"&gt;</p>\n</blockquote>",
        "id": 481501445,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192312
    },
    {
        "content": "<p>danthegoodman1 edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>At <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html</a> the following example is shown:</p>\n<blockquote>\n<p>Calling a function which takes one string parameter and returns a string:<br>\n<code>rs\nlet typed = func.typed::&lt;(&amp;str,), (String,)&gt;(&amp;store)?;\nlet ret = typed.call(&amp;mut store, (\"Hello, \",))?.0;\nprintln!(\"returned string was: {}\", ret);\n</code></p>\n</blockquote>\n<p>I have recreated this setup via:</p>\n<p><code>lib.rs</code></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasm_bindgen</span><span class=\"p\">::</span><span class=\"n\">prelude</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"cp\">#[wasm_bindgen]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">uppercase</span><span class=\"p\">(</span><span class=\"n\">input</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">input</span><span class=\"p\">.</span><span class=\"n\">to_uppercase</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Compiled with <code>wasm-pack build --target web</code></p>\n<p><code>main.rs</code> (another directory)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">wasm_bytes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"s\">\"/Users/dangoodman/code/learningRust/wasm/code/pkg/code_bg.wasm\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Engine</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Store</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"uppercase\"</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>Which gives me the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">learningRust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">41</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">   </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1563</span><span class=\"p\">:</span><span class=\"mi\">17</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1563</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Params</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">50</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1564</span><span class=\"p\">:</span><span class=\"mi\">18</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1564</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Results</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                  </span><span class=\"o\">^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0277</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">host</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">bin</span><span class=\"w\"> </span><span class=\"s\">\"host\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n</code></pre></div>\n<p>Is the example wrong, or am I using the crate incorrectly?</p>\n<p>The docs state:</p>\n<blockquote>\n<p>Types specified here must implement the <a href=\"https://docs.wasmtime.dev/api/wasmtime/component/trait.ComponentType.html\">ComponentType</a> trait. This trait is implemented for built-in types to Rust such as integer primitives, floats, Option&lt;T&gt;, Result&lt;T, E&gt;, strings, Vec&lt;T&gt;, and more. As parameters youâ€™ll be passing native Rust types.</p>\n</blockquote>\n<p>And the trait for these types seem to be implemented according to <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html</a></p>\n<p>It's being imported as <code>wasmtime = { version = \"26.0.1\", features = [\"component-model\", \"runtime\"] }</code></p>\n<p>Edit: it also seems to have a similar issue for calling the function:</p>\n<p>&lt;img width=\"1168\" alt=\"image\" src=\"<a href=\"https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f\">https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f</a>\"&gt;</p>\n</blockquote>",
        "id": 481501489,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192346
    },
    {
        "content": "<p>danthegoodman1 edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>At <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html</a> the following example is shown:</p>\n<blockquote>\n<p>Calling a function which takes one string parameter and returns a string:<br>\n<code>rs\nlet typed = func.typed::&lt;(&amp;str,), (String,)&gt;(&amp;store)?;\nlet ret = typed.call(&amp;mut store, (\"Hello, \",))?.0;\nprintln!(\"returned string was: {}\", ret);\n</code></p>\n</blockquote>\n<p>I have recreated this setup via:</p>\n<p><code>lib.rs</code></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasm_bindgen</span><span class=\"p\">::</span><span class=\"n\">prelude</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"cp\">#[wasm_bindgen]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">uppercase</span><span class=\"p\">(</span><span class=\"n\">input</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">input</span><span class=\"p\">.</span><span class=\"n\">to_uppercase</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Compiled with <code>wasm-pack build --target web</code></p>\n<p><code>main.rs</code> (another crate)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">wasm_bytes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"s\">\"/Users/dangoodman/code/learningRust/wasm/code/pkg/code_bg.wasm\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Engine</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Store</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"uppercase\"</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>Which gives me the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">learningRust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">41</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">   </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1563</span><span class=\"p\">:</span><span class=\"mi\">17</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1563</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Params</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">50</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1564</span><span class=\"p\">:</span><span class=\"mi\">18</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1564</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Results</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                  </span><span class=\"o\">^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0277</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">host</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">bin</span><span class=\"w\"> </span><span class=\"s\">\"host\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n</code></pre></div>\n<p>Is the example wrong, or am I using the crate incorrectly?</p>\n<p>The docs state:</p>\n<blockquote>\n<p>Types specified here must implement the <a href=\"https://docs.wasmtime.dev/api/wasmtime/component/trait.ComponentType.html\">ComponentType</a> trait. This trait is implemented for built-in types to Rust such as integer primitives, floats, Option&lt;T&gt;, Result&lt;T, E&gt;, strings, Vec&lt;T&gt;, and more. As parameters youâ€™ll be passing native Rust types.</p>\n</blockquote>\n<p>And the trait for these types seem to be implemented according to <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html</a></p>\n<p>It's being imported as <code>wasmtime = { version = \"26.0.1\", features = [\"component-model\", \"runtime\"] }</code></p>\n<p>Edit: it also seems to have a similar issue for calling the function:</p>\n<p>&lt;img width=\"1168\" alt=\"image\" src=\"<a href=\"https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f\">https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f</a>\"&gt;</p>\n</blockquote>",
        "id": 481501495,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192355
    },
    {
        "content": "<p>danthegoodman1 closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>At <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/struct.Func.html</a> the following example is shown:</p>\n<blockquote>\n<p>Calling a function which takes one string parameter and returns a string:<br>\n<code>rs\nlet typed = func.typed::&lt;(&amp;str,), (String,)&gt;(&amp;store)?;\nlet ret = typed.call(&amp;mut store, (\"Hello, \",))?.0;\nprintln!(\"returned string was: {}\", ret);\n</code></p>\n</blockquote>\n<p>I have recreated this setup via:</p>\n<p><code>lib.rs</code></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasm_bindgen</span><span class=\"p\">::</span><span class=\"n\">prelude</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"cp\">#[wasm_bindgen]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">uppercase</span><span class=\"p\">(</span><span class=\"n\">input</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">String</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">input</span><span class=\"p\">.</span><span class=\"n\">to_uppercase</span><span class=\"p\">()</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Compiled with <code>wasm-pack build --target web</code></p>\n<p><code>main.rs</code> (another crate)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"o\">*</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">wasm_bytes</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">fs</span><span class=\"p\">::</span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"s\">\"/Users/dangoodman/code/learningRust/wasm/code/pkg/code_bg.wasm\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Engine</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Store</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"uppercase\"</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>Which gives me the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">learningRust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">41</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">   </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmParams</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1563</span><span class=\"p\">:</span><span class=\"mi\">17</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1563</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Params</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmParams</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0277</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,):</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">satisfied</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">27</span><span class=\"p\">:</span><span class=\"mi\">50</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">27</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">upper_typed</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">uppercase</span><span class=\"p\">.</span><span class=\"n\">typed</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,),</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">store</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">-----</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">(</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">string</span><span class=\"p\">::</span><span class=\"nb\">String</span><span class=\"p\">,)</span><span class=\"err\">`</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                                 </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"n\">introduced</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">call</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"w\">     </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">implement</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WasmResults</span><span class=\"err\">`</span><span class=\"p\">:</span>\n<span class=\"w\">               </span><span class=\"p\">()</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">)</span>\n<span class=\"w\">               </span><span class=\"p\">(</span><span class=\"n\">A1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A5</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A7</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">A8</span><span class=\"p\">)</span>\n<span class=\"w\">             </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">others</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">dangoodman</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"mf\">26.0.1</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">func</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1564</span><span class=\"p\">:</span><span class=\"mi\">18</span>\n<span class=\"w\">     </span><span class=\"o\">|</span>\n<span class=\"mi\">1558</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">typed</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">-----</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"mi\">1564</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">Results</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WasmResults</span><span class=\"p\">,</span>\n<span class=\"w\">     </span><span class=\"o\">|</span><span class=\"w\">                  </span><span class=\"o\">^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">bound</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">Func</span><span class=\"p\">::</span><span class=\"n\">typed</span><span class=\"err\">`</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0277</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">host</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">bin</span><span class=\"w\"> </span><span class=\"s\">\"host\"</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n</code></pre></div>\n<p>Is the example wrong, or am I using the crate incorrectly?</p>\n<p>The docs state:</p>\n<blockquote>\n<p>Types specified here must implement the <a href=\"https://docs.wasmtime.dev/api/wasmtime/component/trait.ComponentType.html\">ComponentType</a> trait. This trait is implemented for built-in types to Rust such as integer primitives, floats, Option&lt;T&gt;, Result&lt;T, E&gt;, strings, Vec&lt;T&gt;, and more. As parameters youâ€™ll be passing native Rust types.</p>\n</blockquote>\n<p>And the trait for these types seem to be implemented according to <a href=\"https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html\">https://docs.rs/wasmtime/26.0.1/wasmtime/component/trait.ComponentType.html</a></p>\n<p>It's being imported as <code>wasmtime = { version = \"26.0.1\", features = [\"component-model\", \"runtime\"] }</code></p>\n<p>Edit: it also seems to have a similar issue for calling the function:</p>\n<p>&lt;img width=\"1168\" alt=\"image\" src=\"<a href=\"https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f\">https://github.com/user-attachments/assets/062b378c-e8d9-4999-8a12-c195088b5b8f</a>\"&gt;</p>\n</blockquote>",
        "id": 481501627,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192466
    },
    {
        "content": "<p>danthegoodman1 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589#issuecomment-2466488232\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>Seems I didn't use the component model for this. Wish there was a guide on that!</p>\n</blockquote>",
        "id": 481501628,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1731192467
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589#issuecomment-2521707833\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<blockquote>\n<p>Wish there was a guide on that!</p>\n</blockquote>\n<p>Have you seen <a href=\"https://component-model.bytecodealliance.org/\">https://component-model.bytecodealliance.org/</a> ?</p>\n</blockquote>",
        "id": 486410961,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1733440969
    },
    {
        "content": "<p>danthegoodman1 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589#issuecomment-2521718793\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9589\">issue #9589</a>:</p>\n<blockquote>\n<p>I had eventually, I think the problem is that it required I knew that ComponentModel was a totally different thing. I think the hierarchy of knowledge requirement in the wasm ecosystem can cause issues like this pretty easily, at least that was my exp. going through it</p>\n</blockquote>",
        "id": 486411954,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1733441513
    }
]