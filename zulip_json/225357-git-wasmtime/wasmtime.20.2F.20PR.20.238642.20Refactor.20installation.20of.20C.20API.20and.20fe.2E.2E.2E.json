[
    {
        "content": "<p>alexcrichton edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439142559,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715918132
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#issuecomment-2116597819\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>:</p>\n<blockquote>\n<p>@rockwotj would you be able to give this a once-over perhaps? If not no worries, but you probably know more about CMake than I!</p>\n</blockquote>",
        "id": 439146394,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715919783
    },
    {
        "content": "<p><strong>alexcrichton</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a> as ready for review.</p>",
        "id": 439146402,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715919784
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/elliottt\">elliottt</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439146406,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715919785
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439146409,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715919785
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439146410,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715919785
    },
    {
        "content": "<p>dundargoc submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063675512\">PR review</a>.</p>",
        "id": 439241361,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715958143
    },
    {
        "content": "<p>dundargoc created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605152297\">PR review comment</a>:</p>\n<blockquote>\n<p>Sus. <code>option</code> is for cache variables that are booleans, but it looks like <code>WASMTIME_USER_CARGO_BUILD_OPTIONS</code> is supposed to be a string. This doesn't look correct.</p>\n</blockquote>",
        "id": 439241362,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715958143
    },
    {
        "content": "<p>dundargoc created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605153541\">PR review comment</a>:</p>\n<blockquote>\n<p>Same thing, <code>option</code> is for booleans and this expects a string.</p>\n</blockquote>",
        "id": 439241501,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715958200
    },
    {
        "content": "<p>dundargoc submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063678184\">PR review</a>.</p>",
        "id": 439241502,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715958200
    },
    {
        "content": "<p>dundargoc submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063750268\">PR review</a>.</p>",
        "id": 439246239,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715959649
    },
    {
        "content": "<p>dundargoc created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605195001\">PR review comment</a>:</p>\n<blockquote>\n<p>Nitpick: arguably cleaner</p>\n<p><div class=\"codehilite\" data-code-language=\"suggestion\"><pre><span></span><code>  set(feature_default \"${default} AND NOT ${WASMTIME_DISABLE_ALL_FEATURES}\")\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 439246241,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715959649
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063770951\">PR review</a>.</p>",
        "id": 439248238,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715960239
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605207538\">PR review comment</a>:</p>\n<blockquote>\n<p>Thanks! I didn't really realize that <code>set(...)</code> here was doing that. I'll switch back.</p>\n</blockquote>",
        "id": 439248241,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715960239
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439248263,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715960249
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063775860\">PR review</a>.</p>",
        "id": 439248662,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715960389
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605210259\">PR review comment</a>:</p>\n<blockquote>\n<p>I don't think I fully understand cmake evaluation contexts and strings and what's a variable when, but when I use your suggestion it looks like it sets <code>feature_default</code> to the string <code>ON AND NOT OFF</code> and I'm not sure why but the default build has all features off.</p>\n<p>I'm also not sure if I'm supposed to do something like <code>if(${${cmake_name}})</code> below instead of just <code>if(${cmake_name})</code> (sorry I'm very new to cmake)</p>\n</blockquote>",
        "id": 439248663,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715960389
    },
    {
        "content": "<p>dundargoc submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063870181\">PR review</a>.</p>",
        "id": 439255379,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715962875
    },
    {
        "content": "<p>dundargoc created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605263553\">PR review comment</a>:</p>\n<blockquote>\n<blockquote>\n<p>I don't think I fully understand cmake evaluation contexts and strings and what's a variable when, but when I use your suggestion it looks like it sets <code>feature_default</code> to the string <code>ON AND NOT OFF</code> and I'm not sure why but the default build has all features off.</p>\n</blockquote>\n<p>You might need to delete the build folder. Since cache variables are persistent they will keep their values unless you change them specifically. If you build with <code>WASMTIME_DISABLE_ALL_FEATURES=OFF</code>, and then rebuild it with <code>WASMTIME_DISABLE_ALL_FEATURES=ON</code>, then it won't do anything since the other cache variables have already got a value. This problem exists in the original version of the code too. Cmake cache variables are in general footgunny.</p>\n<blockquote>\n<p>I'm also not sure if I'm supposed to do something like <code>if(${${cmake_name}})</code> below instead of just <code>if(${cmake_name})</code> (sorry I'm very new to cmake)</p>\n</blockquote>\n<p>Nah, <code>if(${cmake_name})</code> is correct. For some reason <code>if</code> expects the variable name and not the value itself. I'm not sure how to feel about it tbh :).</p>\n<p>In any case, I think the original code is fine as is, just wanted to present an alternative.</p>\n</blockquote>",
        "id": 439255384,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715962875
    },
    {
        "content": "<p>dundargoc deleted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605263553\">PR review comment</a>.</p>",
        "id": 439255658,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715962982
    },
    {
        "content": "<p>dundargoc submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2063879216\">PR review</a>.</p>",
        "id": 439256224,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715963204
    },
    {
        "content": "<p>dundargoc created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605269113\">PR review comment</a>:</p>\n<blockquote>\n<p>Actually I retried it and my suggestion was wrong. My bad, I should've investigated better beforehand. Ignore my comment, your method is the way to go.</p>\n</blockquote>",
        "id": 439256225,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715963204
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2064110379\">PR review</a>.</p>",
        "id": 439270628,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715969327
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605390630\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah ok makes sense, and no worries! Thanks for taking a look regardless!</p>\n</blockquote>",
        "id": 439270630,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715969328
    },
    {
        "content": "<p>rockwotj submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2064440087\">PR review</a>:</p>\n<blockquote>\n<p>Very nice! This is a great change. Just a few small things</p>\n</blockquote>",
        "id": 439297534,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715983431
    },
    {
        "content": "<p>rockwotj submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2064440087\">PR review</a>:</p>\n<blockquote>\n<p>Very nice! This is a great change. Just a few small things</p>\n</blockquote>",
        "id": 439297536,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715983431
    },
    {
        "content": "<p>rockwotj created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605579547\">PR review comment</a>:</p>\n<blockquote>\n<p>While I am thinking about it - the c compiler should be set as an environment variable for the cc crate. There are a number of ways to set it in cmake that don't involve the environment variables that the cc crate uses</p>\n</blockquote>",
        "id": 439297537,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715983432
    },
    {
        "content": "<p>rockwotj created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605578035\">PR review comment</a>:</p>\n<blockquote>\n<p>I generally see people do if not debug (inverting this check). It seems better to default to release builds for an external library</p>\n</blockquote>",
        "id": 439297538,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715983432
    },
    {
        "content": "<p>rockwotj created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1605577168\">PR review comment</a>:</p>\n<blockquote>\n<p>nit: you could move the WASMTIME_FEATURE_ prefix creation into the macro</p>\n</blockquote>",
        "id": 439297539,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1715983432
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439590980,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716217196
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2066417913\">PR review</a>.</p>",
        "id": 439591292,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716217267
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#discussion_r1606897277\">PR review comment</a>:</p>\n<blockquote>\n<p>True! I'm a bit wary to do that though since cmake's cross-compilation defaults are not always as good as the <code>cc</code> crate's auto-detection. Do you know if there's a way to only pass the C compiler env vars and such if explicitly configured in cmake? </p>\n</blockquote>",
        "id": 439591293,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716217267
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#pullrequestreview-2066457525\">PR review</a>.</p>",
        "id": 439595514,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716218483
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642#issuecomment-2120696938\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>:</p>\n<blockquote>\n<p>Thanks @dundargoc and @rockwotj!</p>\n</blockquote>",
        "id": 439597727,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716219123
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/8642\">PR #8642</a>.</p>",
        "id": 439600503,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1716220017
    }
]