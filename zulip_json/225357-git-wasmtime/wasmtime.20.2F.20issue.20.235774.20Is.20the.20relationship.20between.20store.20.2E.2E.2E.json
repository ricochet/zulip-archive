[
    {
        "content": "<p>Duslia opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>I have read the docs. It seems that a store can create multi instances.<br>\n&lt;img width=\"995\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png\">https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png</a>\"&gt;<br>\nBut the interface is defined as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">get_typed_func</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span>: <span class=\"nc\">S</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"n\">name</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">TypedFunc</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;&gt;</span>\n</code></pre></div>\n<p>It cannot be owned by multi instances simultaneously。 So I want to ask if the documentation says that I can build multiple instances with one store, but only one instance can have it at the same time. Does the second instance need to wait until the first instance is executed and released before building the second instance?</p>\n</blockquote>",
        "id": 327732238,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676368384
    },
    {
        "content": "<p>Duslia edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>I have read the docs. It seems that a store can create multi instances.<br>\n&lt;img width=\"995\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png\">https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png</a>\"&gt;<br>\nBut the interface is defined as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">get_typed_func</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span>: <span class=\"nc\">S</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"n\">name</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">TypedFunc</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;&gt;</span>\n</code></pre></div>\n<p>store cannot be owned by multi instances simultaneously。 So I want to ask if the documentation says that I can build multiple instances with one store, but only one instance can have it at the same time. Does the second instance need to wait until the first instance is executed and released before building the second instance?</p>\n</blockquote>",
        "id": 327732301,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676368404
    },
    {
        "content": "<p>Duslia edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>I have read the docs. It seems that a store can create multi instances.<br>\n&lt;img width=\"995\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png\">https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png</a>\"&gt;<br>\nBut the interface is defined as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">get_typed_func</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span>: <span class=\"nc\">S</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"n\">name</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">TypedFunc</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;&gt;</span>\n</code></pre></div>\n<p>Store cannot be owned by multi instances simultaneously。 So I want to ask if the documentation says that I can build multiple instances with one store, but only one instance can have it at the same time. Does the second instance need to wait until the first instance is executed and released before building the second instance?</p>\n</blockquote>",
        "id": 327732323,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676368411
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1429916817\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>Note that the <code>S</code> bound on that function is an <code>AsContextMut</code> which means you can pass in <code>&amp;mut store</code>, the API doesn't actually take ownership of the store.</p>\n<p>You can instantiate many instances within a store, e.g.:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">i1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">instantiate</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">module1</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">i2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">instantiate</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">module2</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div>\n<p>where here both <code>i1</code> and <code>i2</code> live in the same <code>Store</code>.</p>\n<p>Does that answer your question?</p>\n</blockquote>",
        "id": 327802104,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676387946
    },
    {
        "content": "<p>Duslia <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1429929344\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>emm. But it seems that I cannot execute them asynchronously.</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">ins</span><span class=\"p\">.</span><span class=\"n\">get_typed_func</span>::<span class=\"o\">&lt;</span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">method</span><span class=\"p\">)</span><span class=\"o\">?</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"n\">call_async</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">())</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"k\">await</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 327803985,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676388375
    },
    {
        "content": "<p>Duslia edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1429929344\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>emm. But it seems that I cannot execute them asynchronously. The second instance needs to wait for the first instance to complete execution.</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">ins</span><span class=\"p\">.</span><span class=\"n\">get_typed_func</span>::<span class=\"o\">&lt;</span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">method</span><span class=\"p\">)</span><span class=\"o\">?</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"n\">call_async</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">())</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"k\">await</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 327804292,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676388440
    },
    {
        "content": "<p>Duslia edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1429929344\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>emm. But it seems that I cannot execute them asynchronously. The second instance needs to wait for the first instance to complete execution. So I cannot execute two instances with the same store simultaneously.</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">ins</span><span class=\"p\">.</span><span class=\"n\">get_typed_func</span>::<span class=\"o\">&lt;</span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"p\">(),</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">method</span><span class=\"p\">)</span><span class=\"o\">?</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"n\">call_async</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">())</span>\n<span class=\"w\">            </span><span class=\"p\">.</span><span class=\"k\">await</span><span class=\"o\">?</span><span class=\"p\">;</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 327804562,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676388494
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1429970691\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>That's correct, only one asynchronous computation within a store may happen at any one point in time.</p>\n</blockquote>",
        "id": 327810206,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676389927
    },
    {
        "content": "<p>Duslia <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774#issuecomment-1430603354\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>Ok, I got it. Thanks! </p>\n</blockquote>",
        "id": 327904813,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676423016
    },
    {
        "content": "<p>Duslia closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5774\">issue #5774</a>:</p>\n<blockquote>\n<p>I have read the docs. It seems that a store can create multi instances.<br>\n&lt;img width=\"995\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png\">https://user-images.githubusercontent.com/37136584/218698949-9607bab1-a676-4fc1-86a6-8eee0ad0098f.png</a>\"&gt;<br>\nBut the interface is defined as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">get_typed_func</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">&gt;</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span>: <span class=\"nc\">S</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"n\">name</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">TypedFunc</span><span class=\"o\">&lt;</span><span class=\"n\">Params</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Results</span><span class=\"o\">&gt;&gt;</span>\n</code></pre></div>\n<p>Store cannot be owned by multi instances simultaneously。 So I want to ask if the documentation says that I can build multiple instances with one store, but only one instance can have it at the same time. Does the second instance need to wait until the first instance is executed and released before building the second instance?</p>\n</blockquote>",
        "id": 327904814,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676423017
    }
]