[
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I've been thinking recently about the Python and .NET bindings for wasmtime we have in this repository right now (<code>crates/misc/py</code> and <code>crates/misc/dotnet</code>). These two are wildly different from each other, mostly because of when they were written. The Python extension uses <code>pyo3</code> to mostly write Rust code and give a Python interface, whereas the .NET extension uses the C API of wasmtime exclusively. Additionally the .NET extension is much more full-featured compared to the Python extension, which currently mostly only has bare-bones support for loading modules.</p>\n<p>I think that the Python extension is overdue for a rewrite, but I wanted to also take the opportunity to discuss a bit what we see as the future of these language bindings. I think there's a few things to consider when thinking about other language bindings:</p>\n<ul>\n<li>Python/.NET are not the last languages, we're going to want to expand <em>somehow</em>. Having everything in one repository isn't necessarily scalable because CI will eventually become pretty burdensome, and we may not want to have as strict repository permissions around language bindings.</li>\n<li>I think we should strive for as much uniformity as we can across all language support. The Rust API will always be the source, but I think everything else should strive to basically provide the Rust API (as translated to the native language), but implemented through the C API. </li>\n<li>Documenting these extensions may be a bit tricky in the main repo. Ideally we'd have examples from all languages to show off, but if they're living in separate repos we may have to do some small sync'ing.</li>\n</ul>\n<p>I would personally propose the following plan of action for our bindings:</p>\n<ol>\n<li>Move the Python/.NET bindings out of this repository. For example bytecodealliance/wasmtime-dotnet and bytecodealliance/wasmtime-python.</li>\n<li>Rewrite the Python extension to use the C API (likely with <code>ctypes</code> or <code>cffi</code>, I'm not exactly a Python afficionado).</li>\n<li>Set up independent release processes for each extension (probably just document it for now)</li>\n<li>Set up local documentation for each extension (likely mdbook), and link the main wasmtime mdbook to this documentation.</li>\n</ol>\n<p>I personally don't think there's much of a future where everything lives in this repository since it feels like we'd clog things up too much, and given the stability of the C API I think it's pretty reasonable to build the extensions and maintain them externally.</p>\n<p>I'm curious what others think about this though!</p>\n</blockquote>",
        "id": 191618748,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585060869
    },
    {
        "content": "<p>alexcrichton labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I've been thinking recently about the Python and .NET bindings for wasmtime we have in this repository right now (<code>crates/misc/py</code> and <code>crates/misc/dotnet</code>). These two are wildly different from each other, mostly because of when they were written. The Python extension uses <code>pyo3</code> to mostly write Rust code and give a Python interface, whereas the .NET extension uses the C API of wasmtime exclusively. Additionally the .NET extension is much more full-featured compared to the Python extension, which currently mostly only has bare-bones support for loading modules.</p>\n<p>I think that the Python extension is overdue for a rewrite, but I wanted to also take the opportunity to discuss a bit what we see as the future of these language bindings. I think there's a few things to consider when thinking about other language bindings:</p>\n<ul>\n<li>Python/.NET are not the last languages, we're going to want to expand <em>somehow</em>. Having everything in one repository isn't necessarily scalable because CI will eventually become pretty burdensome, and we may not want to have as strict repository permissions around language bindings.</li>\n<li>I think we should strive for as much uniformity as we can across all language support. The Rust API will always be the source, but I think everything else should strive to basically provide the Rust API (as translated to the native language), but implemented through the C API. </li>\n<li>Documenting these extensions may be a bit tricky in the main repo. Ideally we'd have examples from all languages to show off, but if they're living in separate repos we may have to do some small sync'ing.</li>\n</ul>\n<p>I would personally propose the following plan of action for our bindings:</p>\n<ol>\n<li>Move the Python/.NET bindings out of this repository. For example bytecodealliance/wasmtime-dotnet and bytecodealliance/wasmtime-python.</li>\n<li>Rewrite the Python extension to use the C API (likely with <code>ctypes</code> or <code>cffi</code>, I'm not exactly a Python afficionado).</li>\n<li>Set up independent release processes for each extension (probably just document it for now)</li>\n<li>Set up local documentation for each extension (likely mdbook), and link the main wasmtime mdbook to this documentation.</li>\n</ol>\n<p>I personally don't think there's much of a future where everything lives in this repository since it feels like we'd clog things up too much, and given the stability of the C API I think it's pretty reasonable to build the extensions and maintain them externally.</p>\n<p>I'm curious what others think about this though!</p>\n</blockquote>",
        "id": 191618749,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585060869
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603278733\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603278733\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>cc @peterhuene, @tschneidereit </p>\n</blockquote>",
        "id": 191618772,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585060878
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I think separating them out into their own BA repos makes sense, especially regarding the CI tax.</p>\n<p>I also agree that the Python implementation should probably use the C API via FFI, as well as future supported languages.</p>\n<p>Currently the .NET projects build the local Wasmtime as part of the build process, but it wouldn't be that hard to refactor that to either provide a location of the Wasmtime libraries via a variable and perhaps default to pulling down a particular dev snapshot or official release (for tagged builds of the .NET NuGet package) from GitHub.</p>\n</blockquote>",
        "id": 191654402,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585074912
    },
    {
        "content": "<p>peterhuene edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I think separating them out into their own BA repos makes sense, especially regarding the CI tax.</p>\n<p>I also agree that the Python implementation should probably use the C API via FFI, as well as future supported languages.</p>\n<p>Currently the .NET projects build the local Wasmtime C library as part of the build process, but it wouldn't be that hard to refactor that to either provide a location of the Wasmtime libraries via a variable and perhaps default to pulling down a particular dev snapshot or official release (for tagged builds of the .NET NuGet package) from GitHub.</p>\n</blockquote>",
        "id": 191654445,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585074936
    },
    {
        "content": "<p>peterhuene edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603434380\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I think separating them out into their own BA repos makes sense, especially regarding the CI tax.</p>\n<p>I also agree that the Python implementation should probably use the C API via FFI, as well as future supported languages.</p>\n<p>Currently the .NET projects build the local Wasmtime C library as part of the build process, but it wouldn't be that hard to refactor that to either provide a location of the Wasmtime libraries via a variable and perhaps default to pulling down the latest dev snapshot or a particular official release (for tagged builds of the .NET NuGet package) from GitHub.</p>\n</blockquote>",
        "id": 191654546,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585074976
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603436559\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603436559\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I've also snagged the <code>bytecodealliance</code> organization on NuGet since I think we should start publishing the .NET packages there rather than to my own personal one.</p>\n</blockquote>",
        "id": 191654909,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585075175
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603488357\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603488357\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>Oh that explains why I got NuGet email on the bca list. I marked it as spam. sorry MS :(</p>\n</blockquote>",
        "id": 191667911,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585081806
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603491244\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-603491244\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>Sorry about that. The email address for the NuGet organization is also the contact email, unfortunately.  I've configured it to reduce the spam going forward.</p>\n</blockquote>",
        "id": 191668768,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585082172
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-610115193\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390#issuecomment-610115193\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>Bindings are now moved out!</p>\n</blockquote>",
        "id": 193121614,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586221468
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1390\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1390\">Issue #1390</a>:</p>\n<blockquote>\n<p>I've been thinking recently about the Python and .NET bindings for wasmtime we have in this repository right now (<code>crates/misc/py</code> and <code>crates/misc/dotnet</code>). These two are wildly different from each other, mostly because of when they were written. The Python extension uses <code>pyo3</code> to mostly write Rust code and give a Python interface, whereas the .NET extension uses the C API of wasmtime exclusively. Additionally the .NET extension is much more full-featured compared to the Python extension, which currently mostly only has bare-bones support for loading modules.</p>\n<p>I think that the Python extension is overdue for a rewrite, but I wanted to also take the opportunity to discuss a bit what we see as the future of these language bindings. I think there's a few things to consider when thinking about other language bindings:</p>\n<ul>\n<li>Python/.NET are not the last languages, we're going to want to expand <em>somehow</em>. Having everything in one repository isn't necessarily scalable because CI will eventually become pretty burdensome, and we may not want to have as strict repository permissions around language bindings.</li>\n<li>I think we should strive for as much uniformity as we can across all language support. The Rust API will always be the source, but I think everything else should strive to basically provide the Rust API (as translated to the native language), but implemented through the C API. </li>\n<li>Documenting these extensions may be a bit tricky in the main repo. Ideally we'd have examples from all languages to show off, but if they're living in separate repos we may have to do some small sync'ing.</li>\n</ul>\n<p>I would personally propose the following plan of action for our bindings:</p>\n<ol>\n<li>Move the Python/.NET bindings out of this repository. For example bytecodealliance/wasmtime-dotnet and bytecodealliance/wasmtime-python.</li>\n<li>Rewrite the Python extension to use the C API (likely with <code>ctypes</code> or <code>cffi</code>, I'm not exactly a Python afficionado).</li>\n<li>Set up independent release processes for each extension (probably just document it for now)</li>\n<li>Set up local documentation for each extension (likely mdbook), and link the main wasmtime mdbook to this documentation.</li>\n</ol>\n<p>I personally don't think there's much of a future where everything lives in this repository since it feels like we'd clog things up too much, and given the stability of the C API I think it's pretty reasonable to build the extensions and maintain them externally.</p>\n<p>I'm curious what others think about this though!</p>\n</blockquote>",
        "id": 193121615,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586221468
    }
]