[
    {
        "content": "<p>alexandruradovici <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1772#issuecomment-2084600433\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1772\">issue #1772</a>:</p>\n<blockquote>\n<p>Same problem here, any ideas?</p>\n</blockquote>",
        "id": 436212984,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1714462643
    },
    {
        "content": "<p>alexandruradovici <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1772#issuecomment-2084655225\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1772\">issue #1772</a>:</p>\n<blockquote>\n<p>It turns out that using </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">command</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_instance</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_wasi</span>::<span class=\"n\">bindings</span>::<span class=\"n\">sync</span>::<span class=\"n\">Command</span>::<span class=\"n\">instantiate</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"n\">component</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n</code></pre></div>\n<p>to instantiate the component make <code>preopened_dir</code> to work, but using </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">example_res</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Root</span>::<span class=\"n\">instantiate</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">component</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">linker</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">example_res</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"nb\">Ok</span><span class=\"p\">((</span><span class=\"n\">instance</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"p\">))</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">interface0</span><span class=\"p\">.</span><span class=\"n\">call_funcall</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"nb\">Err</span><span class=\"p\">(</span><span class=\"n\">e</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Error at calling function {:?}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"p\">),</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n</code></pre></div>\n<p>fails.</p>\n<p>We use a reactor component, so I think we are missing some wasi initialization step, we just cannot figure out which one.</p>\n</blockquote>",
        "id": 436216920,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1714464251
    }
]