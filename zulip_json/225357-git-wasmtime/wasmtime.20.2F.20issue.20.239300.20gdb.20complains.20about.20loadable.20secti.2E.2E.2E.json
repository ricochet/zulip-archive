[
    {
        "content": "<p><a href=\"https://github.com/bjorn3\">bjorn3</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9300\">Issue #9300</a>.</p>",
        "id": 472536892,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727197249
    },
    {
        "content": "<p>bjorn3 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9300\">issue #9300</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>Any wasm module.</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><code>wasmtime run -Ddebug-info=y /path/to/wasm</code></li>\n<li><code>gdb -p $(pidof wasmtime)</code></li>\n</ul>\n<h3>Expected Results</h3>\n<p>Gdb doesn't emit any warnings.</p>\n<h3>Actual Results</h3>\n<p>Gdb emits the following warnings:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.engine\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.bti\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".eh_frame\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.addrmap\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.traps\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".rodata.wasm\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".name.wasm\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.info\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7fdb64515010</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: v16.0.0, but almost certainly reproduces with current Wasmtime given that I can't see any recent changes to the relevant code.</p>\n<p>Operating system: Linux</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>This can probably be fixed by either clearing the loadable flag of all these sections or adding them to actual segments in case they are meant to be used at runtime like in the case of <code>.eh_frame</code> and <code>.rodata.wasm</code>.</p>\n</blockquote>",
        "id": 472536898,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727197250
    },
    {
        "content": "<p>bjorn3 edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9300\">issue #9300</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>Any wasm module.</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><code>wasmtime run -Ddebug-info=y /path/to/wasm</code></li>\n<li><code>gdb -p $(pidof wasmtime)</code></li>\n</ul>\n<h3>Expected Results</h3>\n<p>Gdb doesn't emit any warnings.</p>\n<h3>Actual Results</h3>\n<p>Gdb emits the following warnings:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.engine\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.bti\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".eh_frame\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.addrmap\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.traps\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".rodata.wasm\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".name.wasm\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n<span class=\"n\">warning</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Loadable</span><span class=\"w\"> </span><span class=\"n\">section</span><span class=\"w\"> </span><span class=\"s\">\".wasmtime.info\"</span><span class=\"w\"> </span><span class=\"n\">outside</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">ELF</span><span class=\"w\"> </span><span class=\"n\">segments</span>\n<span class=\"w\">  </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"k\">in</span><span class=\"o\">-</span><span class=\"n\">memory</span><span class=\"o\">@</span><span class=\"mh\">0x7f21a5259010</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: v25.0.0</p>\n<p>Operating system: Linux</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>This can probably be fixed by either clearing the loadable flag of all these sections or adding them to actual segments in case they are meant to be used at runtime like in the case of <code>.eh_frame</code> and <code>.rodata.wasm</code>.</p>\n</blockquote>",
        "id": 472538533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727197758
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9300#issuecomment-2372394525\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9300\">issue #9300</a>:</p>\n<blockquote>\n<p>I suspect the fix is that in <a href=\"https://github.com/bytecodealliance/wasmtime/blob/0ed182e1e2273f957255e1c895d4108a8c74ce41/crates/environ/src/compile/module_artifacts.rs\">this file</a> our usage of <code>SectionKind::ReadOnlyData</code> is probably all wrong and it may want to be something like <code>SectionKind::Metadata</code> or similar. Wasmtime doesn't use these flags at all so the choice of kind here is basically arbitrary from Wasmtime's perspective, but it'd be great to remove these warnings and get a \"more correct\" elf file too! Would you be able to test out <code>SectionKind::Metadata</code> and see if gdb still emits these warnings?</p>\n</blockquote>",
        "id": 472574426,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727212314
    }
]