[
    {
        "content": "<p><strong>cfallin</strong> requested <a href=\"https://github.com/bnjbvr\">bnjbvr</a> and <a href=\"https://github.com/julian-seward1\">julian-seward1</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a>.</p>",
        "id": 221492650,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609741287
    },
    {
        "content": "<p><strong>cfallin</strong> requested <a href=\"https://github.com/bnjbvr\">bnjbvr</a> and <a href=\"https://github.com/julian-seward1\">julian-seward1</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a>.</p>",
        "id": 221492651,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609741287
    },
    {
        "content": "<p>cfallin opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221492652,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609741287
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-560994852\">PR Review</a>.</p>",
        "id": 221517887,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609763528
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551290017\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Why this change?</p>\n</blockquote>",
        "id": 221517888,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609763528
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-560995343\">PR Review</a>.</p>",
        "id": 221517946,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609763580
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551290450\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can you add a binemit test? The exact byte sequence is important.</p>\n</blockquote>",
        "id": 221517948,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609763580
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221561597,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785016
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561246127\">PR Review</a>.</p>",
        "id": 221561700,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785064
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551490646\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah, this (and <code>legalizer/tls.rs</code>) was leftover from an earlier version of the change; reverted to original. Thanks!</p>\n</blockquote>",
        "id": 221561701,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785064
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561246565\">PR Review</a>.</p>",
        "id": 221561795,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785107
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551490979\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Unfortunately the <code>binemit</code> filetest backend doesn't support <code>MachInst</code> yet; I'll add an issue for that.</p>\n</blockquote>",
        "id": 221561796,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785107
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561251734\">PR Review</a>.</p>",
        "id": 221562829,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785637
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551495241\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Can you add a <code>todo!()</code> for non elf tls?</p>\n</blockquote>",
        "id": 221562830,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785637
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561251734\">PR Review</a>.</p>",
        "id": 221562831,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609785637
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221563656,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786052
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221563929,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786194
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561258263\">PR Review</a>.</p>",
        "id": 221564020,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786212
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r551500456\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done!</p>\n</blockquote>",
        "id": 221564021,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786212
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-561259436\">PR Review</a>.</p>",
        "id": 221564225,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786319
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221565147,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609786732
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221579205,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609793709
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221579802,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609793988
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221726439,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609899094
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 221800147,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1609956062
    },
    {
        "content": "<p>bnjbvr submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-566328292\">PR Review</a>.</p>",
        "id": 222438560,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610462088
    },
    {
        "content": "<p>bnjbvr submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-566328292\">PR Review</a>.</p>",
        "id": 222438562,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610462088
    },
    {
        "content": "<p>bnjbvr created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r555814768\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Would it make sense to use the return value of <code>ABIMachineSpec::get_regs_clobbered_by_call</code> here?</p>\n</blockquote>",
        "id": 222438563,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610462088
    },
    {
        "content": "<p>bnjbvr created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r555814809\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Is there something meaningful we can add as a comment, explaining what the sequence does?<br>\nAlso: can it be reframed as other Vcode::Inst instructions that would be recursively generated? This would act as documentation, and help understand and maintaining this sequence a bit better.</p>\n</blockquote>",
        "id": 222438564,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610462088
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-566364170\">PR Review</a>.</p>",
        "id": 222443219,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610463987
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r555841104\">PR Review Comment</a>:</p>\n<blockquote>\n<p>The thing is that it needs this exact byte sequence. Any tiny change will result in a linker error as the linker doesn't know how to rewrite it anymore. For the old backend I wrote a few comments that you could use here: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/f579d088baac9df6bb852ecc19d8216fb94438a1/cranelift/codegen/meta/src/isa/x86/recipes.rs#L3356-L3377\">https://github.com/bytecodealliance/wasmtime/blob/f579d088baac9df6bb852ecc19d8216fb94438a1/cranelift/codegen/meta/src/isa/x86/recipes.rs#L3356-L3377</a></p>\n</blockquote>",
        "id": 222443220,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610463987
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 222799436,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610666207
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-568704700\">PR Review</a>.</p>",
        "id": 222799474,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610666242
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r557761424\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Added comments similar to the original x86-backend ones, as well as a comment noting that the linker expects exactly these bytes.</p>\n</blockquote>",
        "id": 222799475,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610666242
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-568704764\">PR Review</a>.</p>",
        "id": 222799488,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610666251
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r557761480\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah yes, good idea! Done.</p>\n</blockquote>",
        "id": 222799489,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610666251
    },
    {
        "content": "<p>bnjbvr submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-569182804\">PR Review</a>.</p>",
        "id": 222846408,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610710489
    },
    {
        "content": "<p>bnjbvr submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-569182804\">PR Review</a>.</p>",
        "id": 222846409,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610710489
    },
    {
        "content": "<p>bnjbvr created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r558249237\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Double-check me here: we can hardcore SystemV here because this instruction is specific for Elf, right? If that's not the case, could we get the call_conv from the caller; if that's the case, can you add a comment to that effect please?</p>\n</blockquote>",
        "id": 222846410,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610710489
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-569260150\">PR Review</a>.</p>",
        "id": 222856970,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610717507
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r558307847\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Yes, this instruction is specific for ELF and must use the System-V call conv independently of the call conv of the function using TLS. Mach-O and PE use different TLS mechanisms.</p>\n</blockquote>",
        "id": 222856971,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610717507
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a> from <code>x64-tls</code> to <code>main</code>:</p>\n<blockquote>\n<p>Depends on #2538 and includes that commit in this PR.</p>\n<p>This follows the implementation in the legacy x86 backend, including<br>\nhardcoded sequence that is compatible with what the linker expects. We<br>\ncould potentially do better here, but it is likely not necessary.</p>\n<p>Thanks to @bjorn3 for a bugfix to an earlier version of this.<br>\n</p>\n</blockquote>",
        "id": 223086147,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610952551
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#pullrequestreview-570206819\">PR Review</a>.</p>",
        "id": 223086153,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610952569
    },
    {
        "content": "<p>cfallin created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540#discussion_r559346839\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Comment added!</p>\n</blockquote>",
        "id": 223086154,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610952569
    },
    {
        "content": "<p>cfallin merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2540\">PR #2540</a>.</p>",
        "id": 223087912,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610954760
    }
]