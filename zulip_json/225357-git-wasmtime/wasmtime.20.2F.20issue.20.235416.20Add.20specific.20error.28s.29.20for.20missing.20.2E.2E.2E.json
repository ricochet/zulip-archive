[
    {
        "content": "<p>lann opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5416\">issue #5416</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>I'd like a specific error for missing imports on e.g. <code>instantiate_pre</code>.</p>\n<h4>Benefit</h4>\n<p>A specific error would give access to the missing import information without parsing the (presumably unstable) message string, and provide access to the missing import's type which is currently inaccessible.</p>\n<p>Example code that would benefit from this: <a href=\"https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259\">https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259</a></p>\n<h4>Implementation</h4>\n<p>Copy the <code>ImportType</code> details into a new error struct:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">UnknownImport</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">module</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">name</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">ty</span>: <span class=\"nc\">ExternType</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Expose this info from a method e.g. <code>import(&amp;self) -&gt; &amp;ImportType</code> or just <code>AsRef&lt;ImportType&gt;</code>.</p>\n<h4>Alternatives</h4>\n<p>New error type(s) could be returned from relevant methods rather than wrapping in <code>anyhow::Error</code>. This has been discussed in <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3928\">https://github.com/bytecodealliance/wasmtime/issues/3928</a>.</p>\n</blockquote>",
        "id": 315390100,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1670857784
    },
    {
        "content": "<p>lann <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5416#issuecomment-1346673611\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5416\">issue #5416</a>:</p>\n<blockquote>\n<p>I'm happy to do the implementation for this if the approach works.</p>\n</blockquote>",
        "id": 315390299,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1670857831
    },
    {
        "content": "<p>lann edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5416\">issue #5416</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>I'd like a specific error for missing imports on e.g. <code>instantiate_pre</code>.</p>\n<h4>Benefit</h4>\n<p>A specific error would give access to the missing import information without parsing the (presumably unstable) message string, and provide access to the missing import's type which is currently inaccessible.</p>\n<p>Example code that would benefit from this: <a href=\"https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259\">https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259</a></p>\n<h4>Implementation</h4>\n<p>Copy the <code>ImportType</code> details into a new error struct:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">UnknownImport</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">module</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">name</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">ty</span>: <span class=\"nc\">ExternType</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Expose this info from a method e.g. <code>import(&amp;self) -&gt; &amp;ImportType</code> or just <code>AsRef&lt;ImportType&gt;</code>.</p>\n<h4>Alternatives</h4>\n<ul>\n<li>\n<p>New error type(s) could be returned from relevant methods rather than wrapping in <code>anyhow::Error</code>. This has been discussed in <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3928\">https://github.com/bytecodealliance/wasmtime/issues/3928</a>.</p>\n</li>\n<li>\n<p>Add some mechanism for returning a list of missing imports, e.g. <code>Linker::missing_imports(&amp;self, module: &amp;Module) -&gt; impl Iterator&lt;Item = &amp;ImportType&gt;</code>. I actually quite like this but it would add additional API surface area.</p>\n</li>\n</ul>\n</blockquote>",
        "id": 315391096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1670858068
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5416\">issue #5416</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>I'd like a specific error for missing imports on e.g. <code>instantiate_pre</code>.</p>\n<h4>Benefit</h4>\n<p>A specific error would give access to the missing import information without parsing the (presumably unstable) message string, and provide access to the missing import's type which is currently inaccessible.</p>\n<p>Example code that would benefit from this: <a href=\"https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259\">https://github.com/fermyon/spin/pull/959/files#diff-3df137e08da293bebdb5cbe1b81fcae6af75992a24c583f47e8040baecbf123aR259</a></p>\n<h4>Implementation</h4>\n<p>Copy the <code>ImportType</code> details into a new error struct:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">UnknownImport</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">module</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">name</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">ty</span>: <span class=\"nc\">ExternType</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Expose this info from a method e.g. <code>import(&amp;self) -&gt; &amp;ImportType</code> or just <code>AsRef&lt;ImportType&gt;</code>.</p>\n<h4>Alternatives</h4>\n<ul>\n<li>\n<p>New error type(s) could be returned from relevant methods rather than wrapping in <code>anyhow::Error</code>. This has been discussed in <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3928\">https://github.com/bytecodealliance/wasmtime/issues/3928</a>.</p>\n</li>\n<li>\n<p>Add some mechanism for returning a list of missing imports, e.g. <code>Linker::missing_imports(&amp;self, module: &amp;Module) -&gt; impl Iterator&lt;Item = &amp;ImportType&gt;</code>. I actually quite like this but it would add additional API surface area.</p>\n</li>\n</ul>\n</blockquote>",
        "id": 319261058,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1672772520
    }
]