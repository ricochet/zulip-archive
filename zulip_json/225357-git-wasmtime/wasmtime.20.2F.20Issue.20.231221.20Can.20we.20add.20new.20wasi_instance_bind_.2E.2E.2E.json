[
    {
        "content": "<p>rene-fonseca <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-594432738\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-594432738\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a>:</p>\n<blockquote>\n<p>Sounds ok to me.</p>\n</blockquote>",
        "id": 189676406,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1583316530
    },
    {
        "content": "<p>fitzgen labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a> (assigned to peterhuene):</p>\n<blockquote>\n<p>Since the WASI spec is still volatile it makes sense to support any module name to be able to let the caller control which functions to bind.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212\">https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212</a></p>\n<p><code>wasi_instance_bind_import</code> currently only accepts \"wasi_snapshot_preview1\". But for my testing I need \"wasi_unstable\". If wasmtime at some point only accepts a specific module - we should have a way to tell which modules are accepted by wasmtime wasi implementation. But hopefully all modules will be backwards compatible per API function. If that isn't true, we would maybe need something like glibc version per function.</p>\n<p>Alternatively we could have a wasi_instance_bind_import API which ignores the module - and lets it be up to the caller fully. wasi_instance_bind_import would still check function type and name.</p>\n</blockquote>",
        "id": 190308314,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1583947364
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-597762676\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-597762676\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>This issue or pull request has been labeled \"wasmtime:c-api\".</p>\n<p>&lt;details&gt; &lt;summary&gt;Users Subscribed to \"wasmtime:c-api\"&lt;/summary&gt;</p>\n<ul>\n<li>@peterhuene</li>\n</ul>\n<p>&lt;/details&gt;</p>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\" target=\"_blank\" title=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a></p>\n</blockquote>",
        "id": 190308327,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1583947375
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-601926635\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-601926635\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a>:</p>\n<blockquote>\n<p>So the problem with representing a WASI instance as a <code>wasm_instance_t</code> is that <code>wasm_instance_exports</code> will return a 1:1 mapping between the underlying <code>wasm_module_t</code>'s exports and the module's exports are what describe the symbolic name.  Thus the instance's exports don't provide any symbolic name information because normally you would know which instance extern goes to which module export based on array index.</p>\n<p>With a WASI instance, there is no <code>wasm_module_t</code> representation, so there's no way to describe what <code>wasm_instance_exports</code> would be returning (i.e. \"what is the name of the function?\").</p>\n<p>So I think we'll still need <code>wasi_instance_t</code>, but I think creating the instance should take the name of the WASI module to support different versions.</p>\n</blockquote>",
        "id": 191307694,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1584741297
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-601958763\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-601958763\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" target=\"_blank\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a>:</p>\n<blockquote>\n<p>I decided to fix this by transparently supporting <code>wasi_unstable</code> from the current API.  I've submitted PR #1376 which should hopefully work for you.</p>\n</blockquote>",
        "id": 191317033,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1584748741
    },
    {
        "content": "<p>peterhuene closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a> (assigned to peterhuene):</p>\n<blockquote>\n<p>Since the WASI spec is still volatile it makes sense to support any module name to be able to let the caller control which functions to bind.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212\" title=\"https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212\">https://github.com/bytecodealliance/wasmtime/blob/78b32e2527e1d857638f284153c308879828a5cd/crates/c-api/src/wasi.rs#L205-L212</a></p>\n<p><code>wasi_instance_bind_import</code> currently only accepts \"wasi_snapshot_preview1\". But for my testing I need \"wasi_unstable\". If wasmtime at some point only accepts a specific module - we should have a way to tell which modules are accepted by wasmtime wasi implementation. But hopefully all modules will be backwards compatible per API function. If that isn't true, we would maybe need something like glibc version per function.</p>\n<p>Alternatively we could have a wasi_instance_bind_import API which ignores the module - and lets it be up to the caller fully. wasi_instance_bind_import would still check function type and name.</p>\n</blockquote>",
        "id": 191937890,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585251342
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-604644220\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221#issuecomment-604644220\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1221\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1221\">Issue #1221</a>:</p>\n<blockquote>\n<p>So <code>wasi_instance_new</code> now takes a parameter for requesting a supported WASI module name and will return a trap if the module isn't supported.  Currently Wasmtime supports <code>wasm_unstable</code> and <code>wasi_snapshot_preview1</code> for WASI module names.</p>\n<p>The .NET API has also been radically changed to make it easier to instantiate modules in a customized host environment.</p>\n<p>Now you can configure a host to offer both versions of WASI to its modules, if desired:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"kt\">var</span> <span class=\"n\">host</span> <span class=\"p\">=</span> <span class=\"k\">new</span> <span class=\"n\">Wasmtime</span><span class=\"p\">.</span><span class=\"n\">Host</span><span class=\"p\">();</span>\n\n<span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">DefineWasi</span><span class=\"p\">(</span><span class=\"s\">&quot;wasi_unstable&quot;</span><span class=\"p\">);</span>\n<span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">DefineWasi</span><span class=\"p\">(</span><span class=\"s\">&quot;wasi_snapshot_preview1&quot;</span><span class=\"p\">);</span>\n\n<span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">DefineFunction</span><span class=\"p\">(</span><span class=\"s\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"s\">&quot;example&quot;</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"n\">Console</span><span class=\"p\">.</span><span class=\"n\">WriteLine</span><span class=\"p\">(</span><span class=\"s\">&quot;hello world&quot;</span><span class=\"p\">));</span>\n\n<span class=\"kt\">var</span> <span class=\"n\">module</span> <span class=\"p\">=</span> <span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">LoadModule</span><span class=\"p\">(</span><span class=\"s\">&quot;example.wasm&quot;</span><span class=\"p\">);</span>\n\n<span class=\"kt\">dynamic</span> <span class=\"n\">instance</span> <span class=\"p\">=</span> <span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">Instantiate</span><span class=\"p\">(</span><span class=\"n\">module</span><span class=\"p\">);</span>\n\n<span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">run</span><span class=\"p\">();</span>\n</pre></div>\n\n\n</blockquote>",
        "id": 191938393,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1585251635
    }
]