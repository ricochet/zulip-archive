[
    {
        "content": "<p>abc767234318 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<p>I constructed a clif file. <br>\n<a href=\"https://github.com/user-attachments/files/17867284/multi_func0.zip\">multi_func0.zip</a><br>\nI used the following command to run it.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">clif</span><span class=\"o\">-</span><span class=\"n\">util</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">file_tests</span><span class=\"o\">/</span><span class=\"n\">multi_func0</span><span class=\"p\">.</span><span class=\"n\">clif</span>\n</code></pre></div>\n<p>But I got following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">685</span><span class=\"p\">:</span><span class=\"mi\">21</span><span class=\"p\">:</span>\n<span class=\"nc\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">ISLE</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">inst</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">v37</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fpromote</span><span class=\"p\">.</span><span class=\"kt\">f32</span><span class=\"w\"> </span><span class=\"n\">v19</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">types</span><span class=\"p\">::</span><span class=\"n\">F32</span><span class=\"p\">)</span><span class=\"err\">`</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n</code></pre></div>\n</blockquote>",
        "id": 483860002,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732264520
    },
    {
        "content": "<p>abc767234318 edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<p>I constructed a clif file. <br>\n<a href=\"https://github.com/user-attachments/files/17867284/multi_func0.zip\">multi_func0.zip</a><br>\nI used the following command to run it.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">clif</span><span class=\"o\">-</span><span class=\"n\">util</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">file_tests</span><span class=\"o\">/</span><span class=\"n\">multi_func0</span><span class=\"p\">.</span><span class=\"n\">clif</span>\n</code></pre></div>\n<p>But I got the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">685</span><span class=\"p\">:</span><span class=\"mi\">21</span><span class=\"p\">:</span>\n<span class=\"nc\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">ISLE</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">inst</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">v37</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fpromote</span><span class=\"p\">.</span><span class=\"kt\">f32</span><span class=\"w\"> </span><span class=\"n\">v19</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">types</span><span class=\"p\">::</span><span class=\"n\">F32</span><span class=\"p\">)</span><span class=\"err\">`</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n</code></pre></div>\n</blockquote>",
        "id": 483860041,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732264536
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654#issuecomment-2493300518\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<p><code>fpromote</code> requires a float as input, not an i16. If you run the clif ir verifier on this input file it will likely catch this issue. Also please try to use bugpoint in the future to reduce your test case: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/src/bugpoint.rs\">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/src/bugpoint.rs</a> Something like <code>cd cranelift; cargo run -- bugpoint multi_func0.clif x86_64</code> would have worked in this particular case I think.</p>\n</blockquote>",
        "id": 483868704,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732267410
    },
    {
        "content": "<p>abc767234318 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654#issuecomment-2493341656\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<blockquote>\n<p><code>fpromote</code> requires a float as input, not an i16. If you run the clif ir verifier on this input file it will likely catch this issue. Also please try to use bugpoint in the future to reduce your test case: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/src/bugpoint.rs\">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/src/bugpoint.rs</a> Something like <code>cd cranelift; cargo run -- bugpoint multi_func0.clif x86_64</code> would have worked in this particular case I think.</p>\n</blockquote>\n<p>Why the type of <code>v19</code> is <code>i16</code>? The <code>v19</code> is generated by the following two instructions.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">678</span><span class=\"p\">:</span><span class=\"w\">  </span><span class=\"nc\">v7</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">f16const</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mh\">0x1</span><span class=\"p\">.</span><span class=\"mi\">774</span><span class=\"n\">p</span><span class=\"o\">-</span><span class=\"mi\">9</span>\n<span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">741</span><span class=\"p\">:</span><span class=\"w\">  </span><span class=\"nc\">v19</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">bnot</span><span class=\"p\">.</span><span class=\"n\">f16</span><span class=\"w\"> </span><span class=\"n\">v7</span><span class=\"w\">  </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">v7</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mh\">0x1</span><span class=\"p\">.</span><span class=\"mi\">774</span><span class=\"n\">p</span><span class=\"o\">-</span><span class=\"mi\">9</span>\n</code></pre></div>\n<p>My understanding is that the type of <code>v19</code> is <code>f16</code>, not sure what is wrong</p>\n</blockquote>",
        "id": 483872283,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732268582
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654#issuecomment-2493398118\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<p>I didn't notice that you had multiple functions in the clif file.</p>\n<p>f16 and f128 is currently basically unsupported in Cranelift. Anything beyond passing around f16 and f128 values should be assumed to not yet be implemented.</p>\n</blockquote>",
        "id": 483877676,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732270337
    },
    {
        "content": "<p>abc767234318 closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<p>I constructed a clif file. <br>\n<a href=\"https://github.com/user-attachments/files/17867284/multi_func0.zip\">multi_func0.zip</a><br>\nI used the following command to run it.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">clif</span><span class=\"o\">-</span><span class=\"n\">util</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">file_tests</span><span class=\"o\">/</span><span class=\"n\">multi_func0</span><span class=\"p\">.</span><span class=\"n\">clif</span>\n</code></pre></div>\n<p>But I got the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">685</span><span class=\"p\">:</span><span class=\"mi\">21</span><span class=\"p\">:</span>\n<span class=\"nc\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">implemented</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">ISLE</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">inst</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">v37</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fpromote</span><span class=\"p\">.</span><span class=\"kt\">f32</span><span class=\"w\"> </span><span class=\"n\">v19</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">types</span><span class=\"p\">::</span><span class=\"n\">F32</span><span class=\"p\">)</span><span class=\"err\">`</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n</code></pre></div>\n</blockquote>",
        "id": 484454820,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732608899
    },
    {
        "content": "<p>abc767234318 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654#issuecomment-2499947050\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9654\">issue #9654</a>:</p>\n<blockquote>\n<blockquote>\n<p>I didn't notice that you had multiple functions in the clif file.</p>\n<p>f16 and f128 is currently basically unsupported in Cranelift. Anything beyond passing around f16 and f128 values should be assumed to not yet be implemented.</p>\n</blockquote>\n<p>Thank you very much, I will close this issue.</p>\n</blockquote>",
        "id": 484454825,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732608900
    }
]