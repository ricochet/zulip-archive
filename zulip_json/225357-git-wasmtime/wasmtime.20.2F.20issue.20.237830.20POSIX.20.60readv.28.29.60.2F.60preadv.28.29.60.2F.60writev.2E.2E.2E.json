[
    {
        "content": "<p><a href=\"https://github.com/brettcannon\">brettcannon</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">Issue #7830</a>.</p>",
        "id": 418349005,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706302004
    },
    {
        "content": "<p>brettcannon opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>TODO: upload Wasm file here</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369</a></li>\n</ul>\n<h3>Expected Results</h3>\n<p>To be told 10 bytes were read/written.</p>\n<h3>Actual Results</h3>\n<p>5 bytes, which matches the first buffer, not the total bytes written across all buffers.</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 17.0.0</p>\n<p>Operating system: Linux/WSL</p>\n<p>Architecture: x64</p>\n<h3>Extra Info</h3>\n<p>Success logs when testing <code>readv()</code>: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069245/success-readv.txt\">success-readv.txt</a></p>\n<p>Failuse logs: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069247/failure-readv.txt\">failure-readv.txt</a><br>\n</p>\n</blockquote>",
        "id": 418349007,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706302004
    },
    {
        "content": "<p>brettcannon edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>TODO: upload Wasm file here</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369</a></li>\n</ul>\n<h3>Expected Results</h3>\n<p>To be told 10 bytes were read/written.</p>\n<h3>Actual Results</h3>\n<p>5 bytes, which matches the first buffer, not the total bytes written across all buffers.</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 17.0.0</p>\n<p>Operating system: Linux/WSL</p>\n<p>Architecture: x64</p>\n<h3>Extra Info</h3>\n<p>Success logs when testing <code>readv()</code>: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069245/success-readv.txt\">success-readv.txt</a></p>\n<p>Failuse logs: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069247/failure-readv.txt\">failure-readv.txt</a><br>\n</p>\n</blockquote>",
        "id": 418349025,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706302020
    },
    {
        "content": "<p>brettcannon <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1912680683\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<p>If I'm looking this up right, <a href=\"https://github.com/bytecodealliance/wasmtime/blob/5c0027be59553f085589ce7b11cb596a3704aff2/crates/wasi/src/preview2/preview1.rs#L1309\">https://github.com/bytecodealliance/wasmtime/blob/5c0027be59553f085589ce7b11cb596a3704aff2/crates/wasi/src/preview2/preview1.rs#L1309</a> seems to ignore all but the first buffer. <a href=\"https://github.com/bytecodealliance/wasmtime/blob/5c0027be59553f085589ce7b11cb596a3704aff2/crates/wasi-preview1-component-adapter/src/lib.rs#L989\">https://github.com/bytecodealliance/wasmtime/blob/5c0027be59553f085589ce7b11cb596a3704aff2/crates/wasi-preview1-component-adapter/src/lib.rs#L989</a> examines all of them.</p>\n</blockquote>",
        "id": 418349543,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706302323
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1912687136\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<p>The preview2 based preview1 implementation which is now used by default indeed only looks at the first buffer. See also <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7757\">https://github.com/bytecodealliance/wasmtime/issues/7757</a>. wasi-preview1-component-adapter also only looks at the first buffer as far as I can see.</p>\n</blockquote>",
        "id": 418350211,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706302699
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1912747162\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<p>Yes I can confirm that this is expected right now. It's expected that this is still posix-conformant in that posix doesn't guarantee everything is written. Vectored reads/writes aren't present in preview2 so they're polyfilled from preview1 by looking at the first buffer.</p>\n</blockquote>",
        "id": 418356612,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706306159
    },
    {
        "content": "<p>brettcannon <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1912831362\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<blockquote>\n<p>Yes I can confirm that this is expected right now.</p>\n</blockquote>\n<p>As in this isn't expected to change? I think I can mark those POSIX functions as unsupported in <a href=\"https://github.com/python/cpython/blob/main/Tools/wasm/config.site-wasm32-wasi\">https://github.com/python/cpython/blob/main/Tools/wasm/config.site-wasm32-wasi</a> so the tests pass if you plan to keep the current semantics.</p>\n</blockquote>",
        "id": 418366257,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706312377
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1913417233\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<p>Correct yeah, that's not expected to change. </p>\n</blockquote>",
        "id": 418464401,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706408574
    },
    {
        "content": "<p>brettcannon edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>TODO: upload Wasm file here</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369</a></li>\n</ul>\n<h3>Expected Results</h3>\n<p>To be told 10 bytes were read/written.</p>\n<h3>Actual Results</h3>\n<p>5 bytes, which matches the first buffer, not the total bytes written across all buffers.</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 17.0.0</p>\n<p>Operating system: Linux/WSL</p>\n<p>Architecture: x64</p>\n<h3>Extra Info</h3>\n<p>Success logs when testing <code>readv()</code>: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069245/success-readv.txt\">success-readv.txt</a></p>\n<p>Failuse logs: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069247/failure-readv.txt\">failure-readv.txt</a><br>\n</p>\n</blockquote>",
        "id": 418711732,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706559034
    },
    {
        "content": "<p>brettcannon closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>TODO: upload Wasm file here</p>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L520-L525</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L307-L311</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L487-L490</a></li>\n<li><a href=\"https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369\">https://github.com/python/cpython/blob/07236f5b39a2e534cf190cd4f7c73300d209520b/Lib/test/test_posix.py#L364-L369</a></li>\n</ul>\n<h3>Expected Results</h3>\n<p>To be told 10 bytes were read/written.</p>\n<h3>Actual Results</h3>\n<p>5 bytes, which matches the first buffer, not the total bytes written across all buffers.</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 17.0.0</p>\n<p>Operating system: Linux/WSL</p>\n<p>Architecture: x64</p>\n<h3>Extra Info</h3>\n<p>Success logs when testing <code>readv()</code>: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069245/success-readv.txt\">success-readv.txt</a></p>\n<p>Failuse logs: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/14069247/failure-readv.txt\">failure-readv.txt</a><br>\n</p>\n</blockquote>",
        "id": 418711853,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706559103
    },
    {
        "content": "<p>brettcannon <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830#issuecomment-1915479184\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7830\">issue #7830</a>:</p>\n<blockquote>\n<p>I've tweaked the title and closing this as it's working as intended. I'll patch CPython to consider these functions as unavailable.</p>\n</blockquote>",
        "id": 418711855,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1706559104
    }
]