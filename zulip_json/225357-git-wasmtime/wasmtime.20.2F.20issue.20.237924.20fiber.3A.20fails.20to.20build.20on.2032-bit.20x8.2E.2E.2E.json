[
    {
        "content": "<p>jbeich opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924\">issue #7924</a>:</p>\n<blockquote>\n<p>Regresed by #5459 (missed <code>x86.rs</code> and <code>arm.rs</code>). <a href=\"https://github.com/bytecodealliance/wasmtime/files/14254571/veloren-weekly-s20240211.log\">Found</a> while <a href=\"https://github.com/freebsd/freebsd-ports/commit/76756d2f6d52\">packaging</a> <a href=\"https://gitlab.com/veloren/veloren/-/commit/f56e1d84b598\">Veloren</a>.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">i686</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span>\n<span class=\"p\">[</span><span class=\"o\">..</span><span class=\"p\">.]</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0432</span><span class=\"p\">]</span>: <span class=\"nc\">unresolved</span><span class=\"w\"> </span><span class=\"n\">import</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime_asm_macros</span>::<span class=\"n\">asm_sym</span><span class=\"err\">`</span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">fiber</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"o\">/</span><span class=\"n\">x86</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">13</span>:<span class=\"mi\">37</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime_asm_macros</span>::<span class=\"p\">{</span><span class=\"n\">asm_func</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">asm_sym</span><span class=\"p\">};</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                     </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">asm_sym</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">root</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0432</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">fiber</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">lib</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span>\n</code></pre></div>\n</blockquote>",
        "id": 421161423,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707788490
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924#issuecomment-1940720364\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924\">issue #7924</a>:</p>\n<blockquote>\n<p>Wasmtime doesn't work on 32bit x86 and arm32. It is not just a missing fiber implementation (that would be easy to fix), but also missing backends for both architectures in Cranelift, which is a lot harder to fix. See <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1173\">https://github.com/bytecodealliance/wasmtime/issues/1173</a> and <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1980\">https://github.com/bytecodealliance/wasmtime/issues/1980</a>.</p>\n</blockquote>",
        "id": 421195567,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707812675
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924#issuecomment-1941812025\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924\">issue #7924</a>:</p>\n<blockquote>\n<p>To add more on what @bjorn3 already mentioned, can you clarify what you mean by regressed by #5459? Wasmtime/Cranelift haven't had support for x86 and arm in quite some time so that PR shouldn't have regressed anything \"in the large\". If, however, you only need the <code>wasmtime-fiber</code> crate and nothing else then I can see that PR regressing the support there. Do you only need the <code>wasmtime-fiber</code> crate? Given the <a href=\"https://gitlab.com/veloren/veloren/-/commit/f56e1d84b598\">commit you linked</a> it seems like you're packaging all of Wasmtime so while it doesn't seem like this is the case I wanted to ask to be sure. (if you need all of Wasmtime I'll close this in favor of the issues that @bjorn3 linked tracking 32-bit support)</p>\n</blockquote>",
        "id": 421269438,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707838732
    },
    {
        "content": "<p>jbeich closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924\">issue #7924</a>:</p>\n<blockquote>\n<p>Regresed by #5459 (missed <code>x86.rs</code> and <code>arm.rs</code>). <a href=\"https://github.com/bytecodealliance/wasmtime/files/14254571/veloren-weekly-s20240211.log\">Found</a> while <a href=\"https://github.com/freebsd/freebsd-ports/commit/76756d2f6d52\">packaging</a> <a href=\"https://gitlab.com/veloren/veloren/-/commit/f56e1d84b598\">Veloren</a>.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">i686</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span>\n<span class=\"p\">[</span><span class=\"o\">..</span><span class=\"p\">.]</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0432</span><span class=\"p\">]</span>: <span class=\"nc\">unresolved</span><span class=\"w\"> </span><span class=\"n\">import</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime_asm_macros</span>::<span class=\"n\">asm_sym</span><span class=\"err\">`</span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">fiber</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"o\">/</span><span class=\"n\">x86</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">13</span>:<span class=\"mi\">37</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime_asm_macros</span>::<span class=\"p\">{</span><span class=\"n\">asm_func</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">asm_sym</span><span class=\"p\">};</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                     </span><span class=\"o\">^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">asm_sym</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">root</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0432</span><span class=\"err\">`</span><span class=\"p\">.</span>\n<span class=\"n\">error</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">fiber</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">lib</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span>\n</code></pre></div>\n</blockquote>",
        "id": 421839331,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1708082368
    },
    {
        "content": "<p>jbeich <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924#issuecomment-1948208881\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7924\">issue #7924</a>:</p>\n<blockquote>\n<p>Indeed. I've got confused by the cruft i.e., <code>x86</code> and <code>arm</code> support in <code>wasmtime-fiber</code> which is trivial to fix by removing unused <code>asm_sym</code>. Veloren then failed in <code>wasmtime-runtime</code> due to missing assembly but otherwise built fine (I've stubbed the assembly using <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/runtime/src/arch/x86_64.rs\">x86_64 as example</a> to check for more errors but didn't find any).<br>\n</p>\n</blockquote>",
        "id": 421839343,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1708082369
    }
]