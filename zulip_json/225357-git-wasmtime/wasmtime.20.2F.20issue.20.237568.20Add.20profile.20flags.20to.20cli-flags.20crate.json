[
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1821452540\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>Thanks! Given though that there's already a <code>--profile</code> flag for <code>wasmtime run</code>, I think it would be best to reuse that rather than adding a separate version as well. I think that some code in <code>src/common.rs</code> might be good to extract to the cli-flags crate perhaps as I think that should have handling of the <code>--profile</code> flag (or it can be moved there)</p>\n</blockquote>",
        "id": 403441200,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700591749
    },
    {
        "content": "<p>rahulchaphalkar <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1821479441\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>Thanks, Alex. Let me take a look at that.</p>\n</blockquote>",
        "id": 403443871,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700592919
    },
    {
        "content": "<p>jlb6740 <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1822265630\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>@rahulchaphalkar +1, this is a needed patch. I think this was even putting profiling under the debug option was even referenced in the CLI refactoring issue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767\">https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767</a>. For this patch isn't what you want to do is move the --profile flag to under DebugOptions option_group here <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130\">https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130</a><br>\nand also add the supporting code for mapping the profile strategy. It looks like you've done that but don't you also need to delete the code in <a href=\"http://common.rs\">common.rs</a>, such as here: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72\">https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72</a> <br>\nand the implementation code so that the flag is not duplicated? Either that or crates/bench-api/src/lib.rs also parse the none CommonOptions <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252</a></p>\n<p>@alexcrichton are you suggesting the former, or something different all together?</p>\n</blockquote>",
        "id": 403537731,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700639385
    },
    {
        "content": "<p>jlb6740 edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1822265630\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>@rahulchaphalkar +1, this is a needed patch. I think this was even putting profiling under the debug option was even referenced in the CLI refactoring issue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767\">https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767</a>. For this patch isn't what you want to do is move the --profile flag to under DebugOptions option_group here <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130\">https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130</a><br>\nand also add the supporting code for mapping the profile strategy. It looks like you've done that but don't you also need to delete the code in <a href=\"http://common.rs\">common.rs</a>, such as here: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72\">https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72</a> <br>\nand the implementation code so that the flag is not duplicated? Either that or crates/bench-api/src/lib.rs parse RunCommon at  <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252</a></p>\n<p>@alexcrichton are you suggesting the former, or something different all together?</p>\n</blockquote>",
        "id": 403538818,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700639978
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1823104280\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>Ah so to clarify I'd prefer to not change the CLI, meaning not adding new options or removing any options. So my suggestion is to support profiling via the <code>--profile</code> flag. There's code to support that in <code>src/common.rs</code> which I wouldn't recommend duplicating for the bench-api crate, so I think it'd be best to refactor a bit to share the profiling-related code between the bench-api crate and the main CLI.</p>\n</blockquote>",
        "id": 403628240,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700670906
    },
    {
        "content": "<p>jlb6740 edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568#issuecomment-1822265630\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568\">issue #7568</a>:</p>\n<blockquote>\n<p>@rahulchaphalkar +1, this is a needed patch. Putting profiling under the debug option was even referenced in the CLI refactoring issue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767\">https://github.com/bytecodealliance/wasmtime/issues/6741#issuecomment-1639955767</a>. For this patch isn't what you want to do is move the --profile flag to under DebugOptions option_group here <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130\">https://github.com/bytecodealliance/wasmtime/pull/7568/files#diff-c971b96993f492c9102c58afb35a6cb1ce72351e8c32ffe9ffed91c656dc8484R129-R130</a><br>\nand also add the supporting code for mapping the profile strategy. It looks like you've done that but don't you also need to delete the code in <a href=\"http://common.rs\">common.rs</a>, such as here: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72\">https://github.com/bytecodealliance/wasmtime/blob/main/src/common.rs#L52-L72</a> <br>\nand the implementation code so that the flag is not duplicated? Either that or crates/bench-api/src/lib.rs parse RunCommon at  <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/bench-api/src/lib.rs#L252</a></p>\n<p>@alexcrichton are you suggesting the former, or something different all together?</p>\n</blockquote>",
        "id": 403652610,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1700680829
    }
]