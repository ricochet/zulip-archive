[
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1256327364\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @kubkon</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"wasi\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>kubkon: wasi</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 300385674,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663945185
    },
    {
        "content": "<p>npmccallum <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1256796420\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>@pchickey @sunfishcode We are blocked on this and would appreciate a prompt review. Thanks!</p>\n</blockquote>",
        "id": 300465874,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663976014
    },
    {
        "content": "<p>rvolosatovs <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1257964129\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>I've rebased the PR on latest <code>main</code> and added a commit, which extends the existing <code>readdir</code> test case and can be used to reproduce the error on latest <code>main</code> <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947/commits/6779f8c2a8c5b2d86bb00175a2a1dc9f644c5547\">https://github.com/bytecodealliance/wasmtime/pull/4947/commits/6779f8c2a8c5b2d86bb00175a2a1dc9f644c5547</a></p>\n<p>This is the failure on latest <code>main</code> (6779f8c2a8c5b2d86bb00175a2a1dc9f644c5547 <code>main</code> with the testing commit applied):</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">testing</span><span class=\"w\"> </span><span class=\"n\">Wasm</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">fd_readdir</span><span class=\"o\">'</span><span class=\"w\"></span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n        <span class=\"mi\">0</span>: <span class=\"mh\">0x928b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__rust_start_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">1</span>: <span class=\"mh\">0x91d2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">2</span>: <span class=\"mh\">0x91a1</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">rust_panic_with_hook</span>::<span class=\"n\">hc938c0552bc648ce</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">3</span>: <span class=\"mh\">0x8383</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">begin_panic_handler</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h4d01c9a24b253a57</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">4</span>: <span class=\"mh\">0x82b0</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_end_short_backtrace</span>::<span class=\"n\">hfd66980d7bb1538d</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">5</span>: <span class=\"mh\">0x8a43</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_begin_unwind</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">6</span>: <span class=\"mh\">0xe71c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">panicking</span>::<span class=\"n\">panic_fmt</span>::<span class=\"n\">h8d02db942d8b9e8f</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">7</span>: <span class=\"mh\">0xfee7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"n\">unwrap_failed</span>::<span class=\"n\">h806695779fe36d9c</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1fa7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">assert_empty_dir</span>::<span class=\"n\">h0e0aed0574ce8ed0</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">9</span>: <span class=\"mh\">0x28e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">main</span>::<span class=\"n\">h341e702fce5fa376</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">10</span>:  <span class=\"mh\">0xa24</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">h9de52a2ebd9540fa</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">11</span>: <span class=\"mh\">0x1a6e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h74c1c1c4b8e1fa2a</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">12</span>: <span class=\"mh\">0x5f8f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start_internal</span>::<span class=\"n\">h5e0caf35c22fb11b</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">13</span>: <span class=\"mh\">0x3653</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__original_main</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">14</span>:  <span class=\"mh\">0x56d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1367f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"p\">.</span><span class=\"n\">command_export</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"></span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">wasi_cap_std_sync</span>::<span class=\"n\">fd_readdir</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 300803125,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664195499
    },
    {
        "content": "<p>rvolosatovs edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1257964129\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>I've rebased the PR on latest <code>main</code> and added a commit, which extends the existing <code>readdir</code> test case and can be used to reproduce the error on latest <code>main</code> <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947/commits/8a9de05ee5e7cdea37bb5020856f4e8ee8d9a7a7\">https://github.com/bytecodealliance/wasmtime/pull/4947/commits/8a9de05ee5e7cdea37bb5020856f4e8ee8d9a7a7</a></p>\n<p>This is the failure on latest <code>main</code> (8a9de05ee5e7cdea37bb5020856f4e8ee8d9a7a7 <code>main</code> with the testing commit applied):</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">testing</span><span class=\"w\"> </span><span class=\"n\">Wasm</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">fd_readdir</span><span class=\"o\">'</span><span class=\"w\"></span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n        <span class=\"mi\">0</span>: <span class=\"mh\">0x928b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__rust_start_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">1</span>: <span class=\"mh\">0x91d2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">2</span>: <span class=\"mh\">0x91a1</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">rust_panic_with_hook</span>::<span class=\"n\">hc938c0552bc648ce</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">3</span>: <span class=\"mh\">0x8383</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">begin_panic_handler</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h4d01c9a24b253a57</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">4</span>: <span class=\"mh\">0x82b0</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_end_short_backtrace</span>::<span class=\"n\">hfd66980d7bb1538d</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">5</span>: <span class=\"mh\">0x8a43</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_begin_unwind</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">6</span>: <span class=\"mh\">0xe71c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">panicking</span>::<span class=\"n\">panic_fmt</span>::<span class=\"n\">h8d02db942d8b9e8f</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">7</span>: <span class=\"mh\">0xfee7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"n\">unwrap_failed</span>::<span class=\"n\">h806695779fe36d9c</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1fa7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">assert_empty_dir</span>::<span class=\"n\">h0e0aed0574ce8ed0</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">9</span>: <span class=\"mh\">0x28e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">main</span>::<span class=\"n\">h341e702fce5fa376</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">10</span>:  <span class=\"mh\">0xa24</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">h9de52a2ebd9540fa</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">11</span>: <span class=\"mh\">0x1a6e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h74c1c1c4b8e1fa2a</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">12</span>: <span class=\"mh\">0x5f8f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start_internal</span>::<span class=\"n\">h5e0caf35c22fb11b</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">13</span>: <span class=\"mh\">0x3653</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__original_main</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">14</span>:  <span class=\"mh\">0x56d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1367f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"p\">.</span><span class=\"n\">command_export</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"></span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">wasi_cap_std_sync</span>::<span class=\"n\">fd_readdir</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 300810562,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664197728
    },
    {
        "content": "<p>rvolosatovs edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1257964129\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>I've rebased the PR on latest <code>main</code> and added a commit, which extends the existing <code>readdir</code> test case and can be used to reproduce the error on latest <code>main</code> <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947/commits/fe33e2990bae149042361efcbb109541b734d4d8\">https://github.com/bytecodealliance/wasmtime/pull/4947/commits/fe33e2990bae149042361efcbb109541b734d4d8</a></p>\n<p>This is the failure on latest <code>main</code> (fe33e2990bae149042361efcbb109541b734d4d8 <code>main</code> with the testing commit applied):</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">testing</span><span class=\"w\"> </span><span class=\"n\">Wasm</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">fd_readdir</span><span class=\"o\">'</span><span class=\"w\"></span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n        <span class=\"mi\">0</span>: <span class=\"mh\">0x928b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__rust_start_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">1</span>: <span class=\"mh\">0x91d2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_panic</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">2</span>: <span class=\"mh\">0x91a1</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">rust_panic_with_hook</span>::<span class=\"n\">hc938c0552bc648ce</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">3</span>: <span class=\"mh\">0x8383</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">begin_panic_handler</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h4d01c9a24b253a57</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">4</span>: <span class=\"mh\">0x82b0</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_end_short_backtrace</span>::<span class=\"n\">hfd66980d7bb1538d</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">5</span>: <span class=\"mh\">0x8a43</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_begin_unwind</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">6</span>: <span class=\"mh\">0xe71c</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">panicking</span>::<span class=\"n\">panic_fmt</span>::<span class=\"n\">h8d02db942d8b9e8f</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">7</span>: <span class=\"mh\">0xfee7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"n\">unwrap_failed</span>::<span class=\"n\">h806695779fe36d9c</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1fa7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">assert_empty_dir</span>::<span class=\"n\">h0e0aed0574ce8ed0</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">9</span>: <span class=\"mh\">0x28e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">fd_readdir</span>::<span class=\"n\">main</span>::<span class=\"n\">h341e702fce5fa376</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">10</span>:  <span class=\"mh\">0xa24</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">h9de52a2ebd9540fa</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">11</span>: <span class=\"mh\">0x1a6e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h74c1c1c4b8e1fa2a</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">12</span>: <span class=\"mh\">0x5f8f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start_internal</span>::<span class=\"n\">h5e0caf35c22fb11b</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">13</span>: <span class=\"mh\">0x3653</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__original_main</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">14</span>:  <span class=\"mh\">0x56d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"mi\">15</span>: <span class=\"mh\">0x1367f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span><span class=\"p\">.</span><span class=\"n\">command_export</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"></span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">wasi_cap_std_sync</span>::<span class=\"n\">fd_readdir</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 300818207,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664200139
    },
    {
        "content": "<p>npmccallum <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1258524202\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>@pchickey I disagree strongly that downcasting should ever be used in <code>wasi-common</code>. In our wasi implementation, we are regularly working around downcasting just to make things work. Adopting downcasting in the first place was a huge mistake.</p>\n</blockquote>",
        "id": 300886633,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664220926
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1258637397\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>@npmccallum OK, send a PR to fix it then</p>\n</blockquote>",
        "id": 300900712,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664226708
    },
    {
        "content": "<p>npmccallum <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947#issuecomment-1258644420\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4947\">issue #4947</a>:</p>\n<blockquote>\n<p>@pchickey I discussed this and other issues with @sunfishcode and he recommended that I not try to patch the existing implementation and wait until preview2. Should I file an issue requesting the removal of downcasting under preview2?</p>\n</blockquote>",
        "id": 300901557,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1664227141
    }
]