[
    {
        "content": "<p>geekbeast opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a> from <code>geekbeast:feature/kserve</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>This implements a kserve backend allowing forwarding of wasi-nn calls over http to servers implementing the kserve protocol (documented here <a href=\"https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md\">https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md</a>). </p>\n<p>This makes it easy to offload evaluation of inference workloads through async methods to an external service that can support all the various frameworks. Inference workloads tend to be resource heavy and the most popular frameworks have large security attack surfaces. Being able to control when and where they run will make it easier for people to safely use wasmtime with wasi-nn without having to parse and execute model on arbitrary inputs in process. </p>\n<p>This a draft PR and still needs a few more items:</p>\n<ul>\n<li>Implementing a kserve registry</li>\n<li>Wiring the kserve implementation of backend trait to kserve client<br>\n</li>\n</ul>\n</blockquote>",
        "id": 386350122,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692611625
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 386361999,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692615302
    },
    {
        "content": "<p>geekbeast edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>:</p>\n<blockquote>\n<p>This implements a kserve backend allowing forwarding of wasi-nn calls over http to servers implementing the kserve protocol (documented here <a href=\"https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md\">https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md</a>). It also makes certain API calls that are expected to be expensive, async.</p>\n<p>This makes it easy to offload evaluation of inference workloads through async methods to an external service that can support all the various frameworks. Inference workloads tend to be resource heavy and the most popular frameworks have large security attack surfaces. Being able to control when and where they run will make it easier for people to safely use wasmtime with wasi-nn without having to parse and execute model on arbitrary inputs in process. </p>\n<p>This a draft PR and still needs a few more items:</p>\n<ul>\n<li>Implementing a kserve registry</li>\n<li>Wiring the kserve implementation of backend trait to kserve client<br>\n</li>\n</ul>\n</blockquote>",
        "id": 386472923,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692650740
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 386770098,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692771973
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 386770737,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692772299
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 386771313,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692772614
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 386810132,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692786188
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 387050238,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1692876364
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 387391522,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1693031010
    },
    {
        "content": "<p><strong>geekbeast</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a> as ready for review.</p>",
        "id": 390377600,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1694461783
    },
    {
        "content": "<p><strong>geekbeast</strong> requested <a href=\"https://github.com/pchickey\">pchickey</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 390377603,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1694461784
    },
    {
        "content": "<p><strong>geekbeast</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 390377604,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1694461784
    },
    {
        "content": "<p><strong>geekbeast</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 390377605,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1694461784
    },
    {
        "content": "<p><strong>pchickey</strong> requested <a href=\"https://github.com/abrown\">abrown</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 390379016,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1694462411
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#pullrequestreview-1634161536\">PR review</a>:</p>\n<blockquote>\n<p>Before I do a closer review, here might be some things to look at:</p>\n<ul>\n<li>you'll probably want to go through and clean up the conflicts, TODOs, commented-out code, etc., so I don't have to wade through that</li>\n<li>you can split this into separate PRs to parallelize this if you want, e.g., I'm thinking of the \"make wasi-nn host-<code>async</code>\" or \"improve the error handling parts\" (I mean, you don't have to but if you want to move some stuff forward faster it might help)</li>\n<li>I'm not sure what is going on with the tensor bytes type: that hasn't merged in the specification yet but I see a Git submodule update? What is going on with that?</li>\n</ul>\n</blockquote>",
        "id": 391992167,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695156302
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400685308,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699344473
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400696773,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699348567
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400697276,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699348794
    },
    {
        "content": "<p>geekbeast edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>:</p>\n<blockquote>\n<p>This implements a kserve backend allowing forwarding of wasi-nn calls over http to servers implementing the kserve protocol (documented here <a href=\"https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md\">https://github.com/kserve/kserve/blob/master/docs/predict-api/v2/required_api.md</a>). It also makes certain API calls that are expected to be expensive, async.</p>\n<p>This makes it easy to offload evaluation of inference workloads through async methods to an external service that can support all the various frameworks. Inference workloads tend to be resource heavy and the most popular frameworks have large security attack surfaces. Being able to control when and where they run will make it easier for people to safely use wasmtime with wasi-nn without having to parse and execute model on arbitrary inputs in process. </p>\n<p>This PR also implements a kserve registry so that models can be loaded via load named models and adds some better error reporting within what is possible in the current framework.</p>\n</blockquote>",
        "id": 400698005,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699349069
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400699077,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699349442
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400700991,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699350077
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400702989,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699350613
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400765389,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699371505
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400821865,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699394120
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400822109,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699394225
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400823039,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699394577
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400824459,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699395236
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400825087,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699395531
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400831848,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699399008
    },
    {
        "content": "<p>github-merge-queue[bot] updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400831852,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699399008
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400832218,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699399217
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400832286,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699399252
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400851641,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699409371
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400854069,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699410576
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400854319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699410712
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400863718,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699415039
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 400867948,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699417287
    },
    {
        "content": "<p>pchickey submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#pullrequestreview-1723144905\">PR review</a>:</p>\n<blockquote>\n<p>I don't have the context on wasi-nn and kserve to review this comprehensively but from the Rust prespective there are some idiomatic suggestions I provided, and in general this needs a pass to replace all uses of <code>expect</code> outside of #[test] with error handling, as well as cleaning out commented out code from earlier stages in the development process.</p>\n</blockquote>",
        "id": 401206676,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#pullrequestreview-1723144905\">PR review</a>:</p>\n<blockquote>\n<p>I don't have the context on wasi-nn and kserve to review this comprehensively but from the Rust prespective there are some idiomatic suggestions I provided, and in general this needs a pass to replace all uses of <code>expect</code> outside of #[test] with error handling, as well as cleaning out commented out code from earlier stages in the development process.</p>\n</blockquote>",
        "id": 401206677,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388348580\">PR review comment</a>:</p>\n<blockquote>\n<p>delete commented out code</p>\n</blockquote>",
        "id": 401206678,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388346357\">PR review comment</a>:</p>\n<blockquote>\n<p>for these debugging strings, better to use <code>tracing::error!</code> over eprintln</p>\n</blockquote>",
        "id": 401206679,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388348783\">PR review comment</a>:</p>\n<blockquote>\n<p>delete</p>\n</blockquote>",
        "id": 401206681,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388351231\">PR review comment</a>:</p>\n<blockquote>\n<p>this comment doesn't make sense, maybe its dead code?</p>\n</blockquote>",
        "id": 401206682,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388363528\">PR review comment</a>:</p>\n<blockquote>\n<p>commented out code, not clear to me whether this still needs to be implemented as part of this PR?</p>\n</blockquote>",
        "id": 401206683,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388358422\">PR review comment</a>:</p>\n<blockquote>\n<p>Instead of this helper function, use a <code>std::io::Cursor</code> and then the <code>byteorder::WriteBytesExt</code> trait at each of the call sites.</p>\n</blockquote>",
        "id": 401206685,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388365346\">PR review comment</a>:</p>\n<blockquote>\n<p>not clear what these commented out members are about</p>\n</blockquote>",
        "id": 401206686,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388365058\">PR review comment</a>:</p>\n<blockquote>\n<p>this code panics whenever the server url is malformed or the server doesn't respond correctly, please change it to return errors instead and handle those errors appropriately where this is invoked.</p>\n</blockquote>",
        "id": 401206687,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388361326\">PR review comment</a>:</p>\n<blockquote>\n<p>tracing::error! for this failure</p>\n</blockquote>",
        "id": 401206688,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388366059\">PR review comment</a>:</p>\n<blockquote>\n<p>tracing::debug! here</p>\n</blockquote>",
        "id": 401206689,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388365773\">PR review comment</a>:</p>\n<blockquote>\n<p>commented out code should be deleted?</p>\n</blockquote>",
        "id": 401206690,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>pchickey created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#discussion_r1388366240\">PR review comment</a>:</p>\n<blockquote>\n<p>? instead of expect</p>\n</blockquote>",
        "id": 401206691,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699552056
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867#pullrequestreview-1723449114\">PR review</a>:</p>\n<blockquote>\n<p>I am in favor of merging this PR. Obviously there are a bunch of Rust-level programming issues to clean up before we do that (like @pchickey points out) but, at the higher wasi-nn level, this mostly makes sense. Maybe if we resolve most of that here, we can do the following in follow up PRs:</p>\n<ul>\n<li>testing: I'm a bit worried about the testing story. From what I see, some of these tests depend on <code>http://localhost:8000</code>, a real kserve implementation, but I don't see that being set up in CI--how are those tests passing? At some point this new functionality needs to be validated during CI so that we immediately know if we've broken something by refactoring</li>\n<li>documentation: eventually, we should be able to look at the module documentation and  get a general idea of what the kserve backend is trying to do (\"it connects to ... then sends a GET request to do ...\"). Also, explaining why several of APIs _must_ become <code>async</code> would  be helpful later</li>\n</ul>\n<p>Otherwise, I think the general idea of plugging in a new backend is a good one and validates the refactoring to these <code>Box&lt;dyn ...&gt;</code> wrappers. Let's just clean up the extra code here that @pchickey notes and we can move on from there; @geekbeast, let me know if you want to pair up to finish this.</p>\n</blockquote>",
        "id": 401231962,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1699562000
    },
    {
        "content": "<p>mtr-fastly updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 428231739,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1711061888
    },
    {
        "content": "<p>geekbeast updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6867\">PR #6867</a>.</p>",
        "id": 443815434,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1718038061
    }
]