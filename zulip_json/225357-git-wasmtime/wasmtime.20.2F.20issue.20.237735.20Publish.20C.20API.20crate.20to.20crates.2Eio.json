[
    {
        "content": "<p>maxbrunsfeld opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735\">issue #7735</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>It would be useful to me to be able to download <code>wasmtime-c-api</code> from <a href=\"http://crates.io\">crates.io</a>, instead of from GitHub.</p>\n<h4>Benefit</h4>\n<p>I maintain a C library (<a href=\"https://github.com/tree-sitter/tree-sitter\">Tree-sitter</a>) that uses Wasmtime via the C API. Tree-sitter also has Rust bindings. The Tree-sitter Rust crate has a Cargo dependency on both <code>wasmtime</code> and <code>wasmtime-c-api</code> (<a href=\"https://github.com/bytecodealliance/wasmtime/pull/6765#issuecomment-1740115770\">previous discussion</a>). Right now, those dependencies specify Git revisions, not versions, because <code>wasmtime-c-api</code> is not available on <a href=\"http://crates.io\">crates.io</a>.</p>\n<p>It would be useful if those two cargo dependencies could both be expressed in terms of <em>version numbers</em>, as opposed to <code>git</code>/<code>rev</code> dependencies. That way, consumers of <code>tree-sitter</code> would have more flexibility in terms of which versions of wasmtime were compiled into their binaries.</p>\n<h4>Implementation</h4>\n<p>It looks like there is automation for publishing various crates to <a href=\"http://crates.io\">crates.io</a>, in the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs\"><code>publish.rs</code> script</a>. I think that <code>wasmtime-c-api</code> could be added to the list of \"public crates\" which are published whenever a <code>v</code> tag is pushed.</p>\n<h4>Alternatives</h4>\n<ul>\n<li>Don't support this use case of combining C and Rust, since it's uncommon. If a C library depends on wasmtime, and that C library has Rust bindings, that Rust crate should not try to use Cargo to build and link Wasmtime.</li>\n<li>Suggest that such crates should download and compile the wasmtime-c-api programmatically in a custom build script, as opposed to using a Cargo dependency.</li>\n<li>Some other person or organization publish the wasmtime C API to <a href=\"http://crates.io\">crates.io</a>. Don't do it as part of a Wasmtime workflow.</li>\n</ul>\n</blockquote>",
        "id": 410654388,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704050324
    },
    {
        "content": "<p>maxbrunsfeld edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735\">issue #7735</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>It would be useful to me to be able to download <code>wasmtime-c-api</code> from <a href=\"http://crates.io\">crates.io</a>, instead of from GitHub.</p>\n<h4>Benefit</h4>\n<p>I maintain a C library (<a href=\"https://github.com/tree-sitter/tree-sitter\">Tree-sitter</a>) that uses Wasmtime via the C API. Tree-sitter also has Rust bindings. The Tree-sitter Rust crate has a Cargo dependency on both <code>wasmtime</code> and <code>wasmtime-c-api</code> (<a href=\"https://github.com/bytecodealliance/wasmtime/pull/6765#issuecomment-1740115770\">previous discussion</a>). Right now, those dependencies specify Git revisions, not version numbers, because <code>wasmtime-c-api</code> is not available on <a href=\"http://crates.io\">crates.io</a>.</p>\n<p>It would be useful if those two cargo dependencies could both be expressed in terms of <em>version numbers</em>, as opposed to <code>git</code>/<code>rev</code> dependencies. That way, consumers of <code>tree-sitter</code> would have more flexibility in terms of which versions of wasmtime were compiled into their binaries.</p>\n<h4>Implementation</h4>\n<p>It looks like there is automation for publishing various crates to <a href=\"http://crates.io\">crates.io</a>, in the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs\"><code>publish.rs</code> script</a>. I think that <code>wasmtime-c-api</code> could be added to the list of \"public crates\" which are published whenever a <code>v</code> tag is pushed.</p>\n<h4>Alternatives</h4>\n<ul>\n<li>Don't support this use case of combining C and Rust, since it's uncommon. If a C library depends on wasmtime, and that C library has Rust bindings, that Rust crate should not try to use Cargo to build and link Wasmtime.</li>\n<li>Suggest that such crates should download and compile the wasmtime-c-api programmatically in a custom build script, as opposed to using a Cargo dependency.</li>\n<li>Some other person or organization publish the wasmtime C API to <a href=\"http://crates.io\">crates.io</a>. Don't do it as part of a Wasmtime workflow.</li>\n</ul>\n</blockquote>",
        "id": 410654419,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704050389
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735#issuecomment-1874494455\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735\">issue #7735</a>:</p>\n<blockquote>\n<p>I think this is reasonable to support but one tricky bit will be that the name of the crate is <code>wasmtime-c-api-impl</code> right now where <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/artifact/Cargo.toml\"><code>wasmtime-c-api</code></a> is taken by the \"artifact\" which is a <code>cdylib</code>. That's what enables <code>cargo build -p wasmtime-c-api</code> in this repository to build the dynamic/shared library. This would probably want to be published as <code>wasmtime-c-api</code> to <a href=\"http://crates.io\">crates.io</a>.</p>\n<p>Otherwise though for a git dependency you should be able to use <code>branch = 'release-16.0.0'</code> for versioned releases, albeit only major versions and not between minor versions.</p>\n</blockquote>",
        "id": 410899628,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704226204
    },
    {
        "content": "<p>maxbrunsfeld closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735\">issue #7735</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>It would be useful to me to be able to download <code>wasmtime-c-api</code> from <a href=\"http://crates.io\">crates.io</a>, instead of from GitHub.</p>\n<h4>Benefit</h4>\n<p>I maintain a C library (<a href=\"https://github.com/tree-sitter/tree-sitter\">Tree-sitter</a>) that uses Wasmtime via the C API. Tree-sitter also has Rust bindings. The Tree-sitter Rust crate has a Cargo dependency on both <code>wasmtime</code> and <code>wasmtime-c-api</code> (<a href=\"https://github.com/bytecodealliance/wasmtime/pull/6765#issuecomment-1740115770\">previous discussion</a>). Right now, those dependencies specify Git revisions, not version numbers, because <code>wasmtime-c-api</code> is not available on <a href=\"http://crates.io\">crates.io</a>.</p>\n<p>It would be useful if those two cargo dependencies could both be expressed in terms of <em>version numbers</em>, as opposed to <code>git</code>/<code>rev</code> dependencies. That way, consumers of <code>tree-sitter</code> would have more flexibility in terms of which versions of wasmtime were compiled into their binaries.</p>\n<h4>Implementation</h4>\n<p>It looks like there is automation for publishing various crates to <a href=\"http://crates.io\">crates.io</a>, in the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs\"><code>publish.rs</code> script</a>. I think that <code>wasmtime-c-api</code> could be added to the list of \"public crates\" which are published whenever a <code>v</code> tag is pushed.</p>\n<h4>Alternatives</h4>\n<ul>\n<li>Don't support this use case of combining C and Rust, since it's uncommon. If a C library depends on wasmtime, and that C library has Rust bindings, that Rust crate should not try to use Cargo to build and link Wasmtime.</li>\n<li>Suggest that such crates should download and compile the wasmtime-c-api programmatically in a custom build script, as opposed to using a Cargo dependency.</li>\n<li>Some other person or organization publish the wasmtime C API to <a href=\"http://crates.io\">crates.io</a>. Don't do it as part of a Wasmtime workflow.</li>\n</ul>\n</blockquote>",
        "id": 419908240,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707159702
    },
    {
        "content": "<p>maxbrunsfeld <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735#issuecomment-1927842872\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7735\">issue #7735</a>:</p>\n<blockquote>\n<p>Added in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7837\">https://github.com/bytecodealliance/wasmtime/pull/7837</a>.</p>\n</blockquote>",
        "id": 419908253,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1707159708
    }
]