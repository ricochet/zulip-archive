[
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276369989\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<p>Difference in benchmark results after the third commit:</p>\n<p>&lt;details&gt;</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">20</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">9.1573</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">9.2173</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">9.2943</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.1519</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.1698</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.1840</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">71.950</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">71.263</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">70.647</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">240.68</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">247.98</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">256.50</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">7.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">1.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">40</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">17.594</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">17.679</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">17.777</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.2500</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.2626</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.2735</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">82.311</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">82.060</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">81.828</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">450.31</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">457.42</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">465.32</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">21.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">12.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">low</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">2.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">low</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">3.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">4.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">60</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">24.421</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">24.825</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">25.198</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.3812</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.4169</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.4569</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">87.209</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">86.980</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">86.694</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">651.54</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">668.05</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">681.82</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">3.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">2.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">1.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">80</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">30.406</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">30.660</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">31.073</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.5746</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.6092</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.6311</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">90.168</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">90.023</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">89.849</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">885.12</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">902.27</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">917.09</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">2.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">2.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">100</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">41.574</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">41.822</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">42.132</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.3735</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3911</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.4053</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">91.218</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">91.097</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">90.974</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1007.9</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1023.2</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1038.7</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">18.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">7.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">11.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">120</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">50.096</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">50.518</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">51.109</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.3479</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3754</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3954</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">92.489</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">92.372</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">92.261</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1192.2</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1211.0</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1231.3</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">15.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">9.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">140</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">57.252</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">57.426</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">57.624</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.4295</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.4379</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.4453</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">93.581</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">93.502</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">93.423</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1420.4</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1438.8</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1457.9</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">13.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">7.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">160</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">68.391</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">70.340</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">72.333</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.2120</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.2747</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3395</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">94.214</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">94.064</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">93.903</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1540.2</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1584.6</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1628.4</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">14.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">8.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">180</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">76.005</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">77.580</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">79.369</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.2679</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3202</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.3683</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">95.074</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">94.871</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">94.668</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1775.4</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1849.9</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1930.2</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">11.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">5.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n<span class=\"n\">host</span><span class=\"o\">-</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">frames</span><span class=\"o\">-</span><span class=\"n\">traps</span><span class=\"o\">/</span><span class=\"mi\">200</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">time</span>:   <span class=\"p\">[</span><span class=\"mf\">90.825</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">94.718</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">98.745</span><span class=\"w\"> </span><span class=\"err\">µ</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"mf\">2.0254</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.1115</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mf\">2.2020</span><span class=\"w\"> </span><span class=\"n\">Melem</span><span class=\"o\">/</span><span class=\"n\">s</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                 </span><span class=\"n\">change</span>:\n                        <span class=\"nc\">time</span>:   <span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mf\">95.291</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">95.072</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mf\">94.844</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mf\">0.05</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">thrpt</span>:  <span class=\"p\">[</span><span class=\"o\">+</span><span class=\"mf\">1839.6</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">1929.0</span><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mf\">2023.4</span><span class=\"o\">%</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"n\">Performance</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">outliers</span><span class=\"w\"> </span><span class=\"n\">among</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">measurements</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">13.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">6.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">mild</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mf\">7.00</span><span class=\"o\">%</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"w\"> </span><span class=\"n\">severe</span><span class=\"w\"></span>\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n</blockquote>",
        "id": 303664913,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665588683
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276424701\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @peterhuene</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"wasmtime:api\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>peterhuene: wasmtime:api</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 303672879,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665591151
    },
    {
        "content": "<p>Stebalien <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276426145\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<p>Thanks for looking into this! Unfortunately, no difference. I tested it here: <a href=\"https://github.com/filecoin-project/ref-fvm/commit/4242e722dfc99e3b5153080be96d2c21f3413dbb\">https://github.com/filecoin-project/ref-fvm/commit/4242e722dfc99e3b5153080be96d2c21f3413dbb</a> (looks like I got the patches correct).</p>\n<p>I'll put a reproducer together by next week (have a few deadlines this week).</p>\n</blockquote>",
        "id": 303673031,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665591216
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276601531\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<p>@Stebalien to be clear, enabling backtraces will always have some overhead that is proportional to how many frames are on the stack (capturing the stack is <code>O(frames)</code>) so we shouldn't expect that performance is identical when backtraces are enabled and when they disabled. But comparing performance with this PR vs without this PR should ideally show a marked improvement in performance.</p>\n<p>Are you seeing identical performance with this patch applied vs without?</p>\n<p>If so, how is the trap being triggered? Is it an <code>unreachable</code> in Wasm, an out-of-bounds memory operation, a host function returning <code>Err(wasmtime::Trap::new(...))</code>, or something else?</p>\n<p>(Reproducer would still be appreciated, once you have the cycles.)</p>\n</blockquote>",
        "id": 303702006,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665600933
    },
    {
        "content": "<p>Stebalien <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276643285\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<blockquote>\n<p>Are you seeing identical performance with this patch applied vs without?</p>\n</blockquote>\n<p>Within the margin of error, yes. Basically, this test is 300-400x slower with backtraces enabled.</p>\n<blockquote>\n<p>Is it an unreachable in Wasm, an out-of-bounds memory operation, a host function returning Err(wasmtime::Trap::new(...)), or something else?</p>\n</blockquote>\n<p>The host is returning a <code>Trap</code> from a syscall. Specifically:</p>\n<ol>\n<li>Host returns a Trap.</li>\n<li>Host handles the Trap on the other side of the <code>func.call</code>.</li>\n<li>Host returns to the next wasm instance up the stack.</li>\n<li>The next wasm instance calls back into the host (asking the host to \"abort\").</li>\n<li>The host returns another trap, go back to step 2.</li>\n</ol>\n<p>In other words:</p>\n<ol>\n<li>Host -&gt; Wasm -&gt; Host -&gt; Wasm ... (1000x) ... -&gt; Host (traps) [Z]</li>\n<li>Wasm [W] &lt;- Host [X] &lt;- (Wasm [Y] skipped) &lt;- Host (traps) [Z].</li>\n<li>Wasm [W] -&gt; Host (traps) [X].</li>\n<li>Wasm [U] &lt;- Host [V] &lt;- (Wasm [W] skipped) &lt;- Host (traps) [X].</li>\n</ol>\n<p>And so on... Two steps backwards, one step forward, two steps backward, all the way to the top.</p>\n<blockquote>\n<p>(Reproducer would still be appreciated, once you have the cycles.)</p>\n</blockquote>\n<p>I'll also do a bit of profiling myself as well.</p>\n</blockquote>",
        "id": 303707485,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665603000
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276648524\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<blockquote>\n<p>The host is returning a <code>Trap</code> from a syscall. Specifically:</p>\n<ol>\n<li>Host returns a Trap.</li>\n<li>Host handles the Trap on the other side of the <code>func.call</code>.</li>\n<li>Host returns to the next wasm instance up the stack.</li>\n<li>The next wasm instance calls back into the host (asking the host to \"abort\").</li>\n<li>The host returns another trap, go back to step 2.</li>\n</ol>\n</blockquote>\n<p>To clarify, does this mean that for a stack of depth N, there are N traps?</p>\n<p>The \"quadratic slowdown with backtraces\" behavior is completely expected then, from first principles, I think: you're taking N traps, and they have cost 1, 2, 3, ... N frames/levels deep. I don't think there's anything we could do to make this <em>not</em> be quadratic, short of some sort of magical lazily-expanding constant-time stack capture (which we can't do because we don't keep the stack around after the trap fires).</p>\n</blockquote>",
        "id": 303708428,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665603374
    },
    {
        "content": "<p>Stebalien <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276702192\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<p>There's one trap at each level. If these stack traces cover the entire rust stack, not just the wasm module handling the trap, that would make sense.</p>\n<p>In that case, would the wasmtime team consider keeping the ability to disable backtraces?</p>\n</blockquote>",
        "id": 303716835,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665606648
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1277692598\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<p>I think it would make sense to add an optional max number of frames captured in a backtrace, which can be set to zero to completely disable backtraces. Then we can limit the cost of a backtrace from O(frames) to some user-chosen acceptable constant overhead.</p>\n<p>Going to go ahead and merge this PR and file a new issue for that config option. I'll cc you on it, @Stebalien.</p>\n</blockquote>",
        "id": 303848384,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665670806
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1277705028\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5049\">issue #5049</a>:</p>\n<blockquote>\n<blockquote>\n<p>I think it would make sense to add an optional max number of frames captured in a backtrace, which can be set to zero to completely disable backtraces. Then we can limit the cost of a backtrace from O(frames) to some user-chosen acceptable constant overhead.</p>\n</blockquote>\n<p>#5052 </p>\n</blockquote>",
        "id": 303850322,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1665671332
    }
]