[
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2939\">PR #2939</a> from <code>less-release-test</code> to <code>main</code>:</p>\n<blockquote>\n<p>This commit attempts to slim down our CI (more from #2933) by removing<br>\ntesting both in debug and release mode. I can't actually recall a<br>\nconcrete issue that this has turned up on CI itself, and otherwise we're<br>\nspending quite a lot of time building all of the dev-dependencies in<br>\nrelease mode when testing.</p>\n<p>Additionally it removes testing for nightly/beta channels of Rust. One<br>\nof the main benefits of this, staying on top of breakage, is already<br>\nmoot because we pin to a nightly anyway. We have a few nightly<br>\nreferences elsewhere in CI (fuzzing/docs) so we can largely rely on that<br>\n(and upstream testing with rust-lang/rust). We in general shouldn't need<br>\nto do nightly/beta testing on all builds.</p>\n<p>The release builders were actually the only location that MinGW and<br>\nAArch64 was tested however. This means that the old nightly/beta<br>\nbuilders are now replaced with AArch64 and MinGW builders. Overall, the<br>\nchanges made to CI here are:</p>\n<ul>\n<li>\n<p>Upgrade to QEMU 6.0.0. I thought this would make aarch64 emulation<br>\n  faster, but it didn't. Seems good to stay up to date though.</p>\n</li>\n<li>\n<p>Replace nightly/beta testing in debug mode with MinGW and AArch64 testing.</p>\n</li>\n<li>\n<p>Use <code>-g0</code> for C compilation on MinGW because otherwise <code>gcc</code> as used<br>\n  on CI generates an ICE (!!)</p>\n</li>\n<li>\n<p>Exclude <code>wasi-crypto</code> from testing. We already exclude<br>\n<code>wasmtime-wasi-crypto</code> and it was an accident we were testing the<br>\n<code>wasi-crypto</code> crate (which isn't even part of this workspace).</p>\n</li>\n<li>\n<p>Remove testing DWARF on the old backend step, which nowadays didn't<br>\n  actually do that.</p>\n</li>\n<li>\n<p>Remove testing on release builders, making then purely tasked with<br>\n  release builds, nothing else.</p>\n</li>\n<li>\n<p>Rename <code>QEMU_VERSION</code> to <code>QEMU_BUILD_VERSION</code> so qemu doesn't just<br>\n  immediately exit after printing its version.</p>\n</li>\n</ul>\n<p>Timing wise the release builds are ~20-30 minutes faster, depending on<br>\nthe platform. This is not really because of testing time but rather we<br>\nhave a huge dependency tree when <code>dev-dependencies</code> are considered<br>\n(criterion, tokio, proptest, ...).</p>\n<p>MinGW tests are pretty fast since we don't run examples (we're not too<br>\ninterested in doing examples there, just windows/mac/linux coverage).<br>\nAArch64 tests are run with optimizations enabled because unoptimized<br>\ntests take ~45 minutes to finish while optimized tests take ~20 minutes.<br>\nThe build is naturally much faster in debug mode but apparently under<br>\nQEMU emulation the debug mode binaries are <em>extremely</em> slow compared to<br>\nthe release binaries, which means that extra time we spend compiling<br>\nrelease tests is more than made up by faster test emulation time.</p>\n<p>Closes #2938</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;<br>\n</p>\n</blockquote>",
        "id": 240280688,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1622006189
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2939#pullrequestreview-668610205\">PR review</a>.</p>",
        "id": 240281464,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1622007353
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2939\">PR #2939</a> from <code>less-release-test</code> to <code>main</code>.</p>",
        "id": 240331478,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1622038701
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2939\">PR #2939</a>.</p>",
        "id": 240340370,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1622041951
    }
]