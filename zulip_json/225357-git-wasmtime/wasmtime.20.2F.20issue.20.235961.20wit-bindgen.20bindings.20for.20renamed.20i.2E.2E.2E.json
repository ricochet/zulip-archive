[
    {
        "content": "<p>sunfishcode opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>This wit:</p>\n<div class=\"codehilite\" data-code-language=\"wit\"><pre><span></span><code>interface red {\n  use self.green.{thing}\n\n  foo: func() -&gt; thing\n}\n\ninterface green {\n  type thing = s32\n}\n\ndefault world neptune {\n  import blue: self.red\n  import orange: self.green\n}\n</code></pre></div>\n<p>with this Rust:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span>::<span class=\"n\">component</span>::<span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"w\">   </span><span class=\"n\">path</span>: <span class=\"s\">\"test.wit\"</span><span class=\"p\">,</span>\n<span class=\"p\">});</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{}</span>\n</code></pre></div>\n<p>gets this error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0433</span><span class=\"p\">]</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">green</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"n\">root</span>\n<span class=\"w\"> </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"o\">|</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span>::<span class=\"n\">component</span>::<span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">    </span><span class=\"n\">path</span>: <span class=\"s\">\"a.wit\"</span><span class=\"p\">,</span>\n<span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">__</span><span class=\"o\">^</span><span class=\"w\"> </span><span class=\"n\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">green</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"n\">root</span>\n<span class=\"w\">  </span><span class=\"o\">|</span>\n</code></pre></div>\n<p>It appears the bindgen-generated bindings for the <code>neptune</code> world use the original name of the interface <code>green</code> rather than the world's name <code>orange</code>.</p>\n<p>For comparison, the wit-bindgen guest bindings do appear to use the <code>orange</code> name.<br>\n</p>\n</blockquote>",
        "id": 340240296,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678234479
    },
    {
        "content": "<p>sunfishcode <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961#issuecomment-1459082362\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>The cargo expand code has</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">orange</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">   </span><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">blue</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"w\">    </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">type</span> <span class=\"nc\">Thing</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">super</span>::<span class=\"n\">green</span>::<span class=\"n\">Thing</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"o\">..</span><span class=\"p\">.</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>That reference to <code>green</code> should be renamed to a reference to <code>orange</code>.</p>\n</blockquote>",
        "id": 340242501,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678235541
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961#issuecomment-1460378740\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>I think this would be reasonable enough to fix as-is, but I'll also take the opportunity to ask, would you expect something different to be generated here? For example do you think that <code>mod orange</code> should be called <code>mod green</code>? Or do you think it's reasonable to rename the <code>green</code> interface to <code>orange</code> because of the worlds exports/imports?</p>\n</blockquote>",
        "id": 340398894,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678290593
    },
    {
        "content": "<p>sunfishcode <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961#issuecomment-1460490939\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>Ah, I think I misspoke above. I'd expect it to have <code>mod orange</code> and reference orange, because the bindings are generated for a world, and not for interfaces in isolation. Inside the world here, the name is orange, so it should be orange in the bindings.</p>\n</blockquote>",
        "id": 340414555,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678294263
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961#issuecomment-1460972839\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>Oh no worries, just wanted to confirm! I think <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5968\">https://github.com/bytecodealliance/wasmtime/pull/5968</a> should fix this</p>\n</blockquote>",
        "id": 340477174,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678314782
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5961\">issue #5961</a>:</p>\n<blockquote>\n<p>This wit:</p>\n<div class=\"codehilite\" data-code-language=\"wit\"><pre><span></span><code>interface red {\n  use self.green.{thing}\n\n  foo: func() -&gt; thing\n}\n\ninterface green {\n  type thing = s32\n}\n\ndefault world neptune {\n  import blue: self.red\n  import orange: self.green\n}\n</code></pre></div>\n<p>with this Rust:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span>::<span class=\"n\">component</span>::<span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"w\">   </span><span class=\"n\">path</span>: <span class=\"s\">\"test.wit\"</span><span class=\"p\">,</span>\n<span class=\"p\">});</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{}</span>\n</code></pre></div>\n<p>gets this error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0433</span><span class=\"p\">]</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">green</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"n\">root</span>\n<span class=\"w\"> </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"o\">|</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span>::<span class=\"n\">component</span>::<span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">    </span><span class=\"n\">path</span>: <span class=\"s\">\"a.wit\"</span><span class=\"p\">,</span>\n<span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">__</span><span class=\"o\">^</span><span class=\"w\"> </span><span class=\"n\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">green</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"n\">root</span>\n<span class=\"w\">  </span><span class=\"o\">|</span>\n</code></pre></div>\n<p>It appears the bindgen-generated bindings for the <code>neptune</code> world use the original name of the interface <code>green</code> rather than the world's name <code>orange</code>.</p>\n<p>For comparison, the wit-bindgen guest bindings do appear to use the <code>orange</code> name.<br>\n</p>\n</blockquote>",
        "id": 340486215,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678319405
    }
]