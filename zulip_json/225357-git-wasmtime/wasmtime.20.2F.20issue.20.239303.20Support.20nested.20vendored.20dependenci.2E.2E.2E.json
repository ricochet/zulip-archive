[
    {
        "content": "<p>MarinPostma opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9303\">issue #9303</a>:</p>\n<blockquote>\n<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>\n<h4>Feature</h4>\n<p>It seems that the only way to import other packages right now is to vendor them, so I tried to do that by symlinking the dependee <br>\n into the dependant <code>deps</code> folder (showing dirs only for conciseness):<br>\n ```<br>\n ❯ tree -d -l wit<br>\nwit<br>\n└── deps -&gt; ../../wasi-http/wit<br>\n    └── deps<br>\n        ├── cli<br>\n        ├── clocks<br>\n        ├── filesystem<br>\n        ├── io<br>\n        ├── random<br>\n        └── sockets</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Then</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">attempt</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">generate</span><span class=\"w\"> </span><span class=\"n\">bindings</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"p\">:</span>\n<span class=\"err\">```</span><span class=\"n\">rust</span>\n<span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"n\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"../adhoc/wit\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">with</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"s\">\"wasi:http/proxy@0.2.1\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">http_proxy</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n<p>and I get the following compile error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">parsing</span><span class=\"w\"> </span><span class=\"n\">WIT</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">mpostma</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">rust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">experiments</span><span class=\"o\">/</span><span class=\"n\">adhoc</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"p\">]</span>\n\n<span class=\"w\">       </span><span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"n\">dependency</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">mpostma</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">rust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">experiments</span><span class=\"o\">/</span><span class=\"n\">adhoc</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">/</span><span class=\"n\">deps</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"n\">package</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">mpostma</span><span class=\"o\">/</span><span class=\"n\">Documents</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">rust</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">experiments</span><span class=\"o\">/</span><span class=\"n\">adhoc</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">/</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">deps</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">package</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">header</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"n\">WIT</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">package</span>\n</code></pre></div>\n<p>It seems to be because the second level of <code>deps</code> doesn't contain any <code>WIT</code> file, but only directories.</p>\n<h4>Benefit</h4>\n<p>I'm not sure what's the current plan, or the recommended way to deal with imports right now. I suspect that all of this will converge to a more streamlined experience, but until then, it would be nice if we could just symlink components as dependency for other components.<br>\n</p>\n</blockquote>",
        "id": 472565482,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727208382
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9303#issuecomment-2372316363\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9303\">issue #9303</a>:</p>\n<blockquote>\n<p>Thanks for the report! The structure of the <code>wit</code> directory is mostly defined by the wasm-tools project at this time (and doesn't have the greatest documentation unfortunately). You might be interested in <a href=\"https://github.com/bytecodealliance/wasm-tools/issues/1461\">https://github.com/bytecodealliance/wasm-tools/issues/1461</a> and <a href=\"https://github.com/bytecodealliance/wasm-tools/issues/1462\">https://github.com/bytecodealliance/wasm-tools/issues/1462</a> as well.</p>\n<p>Overall relaxing various bits of the <code>wit</code> directory are not the easiest thing to do as it needs to be balanced with the variety of consumers of WIT. If possible features like <a href=\"https://github.com/bytecodealliance/wasmtime/pull/9288\">https://github.com/bytecodealliance/wasmtime/pull/9288</a> are intended to help with this, though.</p>\n</blockquote>",
        "id": 472568709,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727209811
    },
    {
        "content": "<p>MarinPostma <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9303#issuecomment-2372351806\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9303\">issue #9303</a>:</p>\n<blockquote>\n<p>thanks @alexcrichton <span aria-label=\"folded hands\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"folded hands\">:folded_hands:</span> </p>\n</blockquote>",
        "id": 472570719,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1727210665
    }
]