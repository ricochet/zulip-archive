[
    {
        "content": "<p>yuyang-ok opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993</p>\n</blockquote>",
        "id": 341623175,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771225
    },
    {
        "content": "<p>yuyang-ok edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993<br>\nWe should normalize float type when convert to int on {i8,i16}.<br>\nBecause <code>riscv64</code> has no direct instruction support it.<br>\n</p>\n</blockquote>",
        "id": 341623243,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771301
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341623529,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771536
    },
    {
        "content": "<p>yuyang-ok edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993<br>\nWe should normalize float type when convert float to int on {i8,i16}.<br>\nBecause <code>riscv64</code> has no direct instruction support it.</p>\n<p>I also changed the <code>rounding mode</code>.<br>\n&lt;img width=\"929\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/96557710/224904674-f4de4893-f04a-49bc-b966-da0356e2aafc.png\">https://user-images.githubusercontent.com/96557710/224904674-f4de4893-f04a-49bc-b966-da0356e2aafc.png</a>\"&gt;</p>\n</blockquote>",
        "id": 341623685,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771644
    },
    {
        "content": "<p>yuyang-ok edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993<br>\nWe should normalize float type when convert float to int on {i8,i16}.<br>\nBecause <code>riscv64</code> has no direct instruction support it.</p>\n<p>I also changed the <code>rounding mode</code>.<br>\n&lt;img width=\"929\" alt=\"image\" src=\"<a href=\"https://user-images.githubusercontent.com/96557710/224904674-f4de4893-f04a-49bc-b966-da0356e2aafc.png\">https://user-images.githubusercontent.com/96557710/224904674-f4de4893-f04a-49bc-b966-da0356e2aafc.png</a>\"&gt;</p>\n</blockquote>",
        "id": 341623779,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771736
    },
    {
        "content": "<p>yuyang-ok edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993<br>\nWe should normalize float type when convert float to int on {i8,i16}.<br>\nBecause <code>riscv64</code> has no direct instruction support it.</p>\n</blockquote>",
        "id": 341623815,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771784
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341623899,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771841
    },
    {
        "content": "<p>yuyang-ok edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>:</p>\n<blockquote>\n<p>This will fix #5992 and #5993<br>\nWe should normalize float type when convert float to int on {i8,i16}.<br>\nBecause <code>riscv64</code> has no direct instruction to support it.</p>\n</blockquote>",
        "id": 341624013,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678771933
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341624218,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678772113
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341624419,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678772262
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341631013,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678775921
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1338785393\">PR review</a>.</p>",
        "id": 341661362,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678785736
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1338785393\">PR review</a>.</p>",
        "id": 341661363,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678785736
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1135220577\">PR review comment</a>:</p>\n<blockquote>\n<p>What do you think about moving this to ISLE? This seems like the type of code that would be really neatly written there.</p>\n</blockquote>",
        "id": 341661364,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678785736
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1135221205\">PR review comment</a>:</p>\n<blockquote>\n<p>I think this might have been included accidentally</p>\n</blockquote>",
        "id": 341661365,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678785736
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1135236438\">PR review comment</a>:</p>\n<blockquote>\n<p>Can we rename this to something like <code>clamp_*</code>? Unlike the normalize functions this one actually changes the value of the register.</p>\n</blockquote>",
        "id": 341661366,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678785736
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341670094,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678788106
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341670899,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678788311
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341951266,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678849962
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 341952330,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678850798
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1341931959\">PR review</a>.</p>",
        "id": 342113895,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899059
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1341931959\">PR review</a>.</p>",
        "id": 342113915,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899062
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137425964\">PR review comment</a>:</p>\n<blockquote>\n<p>Looks like we can't name this <code>fmin</code> since it conflicts with the preexisting declaration for the <code>fmin</code> clif instruction. I guess adding a prefix to all RISCV instruction helpers would make sense? The x86 backend has <code>x64_*</code> so we could add something like <code>rv_*</code>, what do you guys think about this?</p>\n<p>If everyone agrees I don't mind doing a pass on the backend adding the helpers and making sure everything is aligned.</p>\n</blockquote>",
        "id": 342113919,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899062
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137437172\">PR review comment</a>:</p>\n<blockquote>\n<p>I don't think we have an established coding style for isle, but we should probably try to keep it somewhat consistent. This would usually be something along these lines in the other backends:</p>\n<p><div class=\"codehilite\" data-code-language=\"suggestion\"><pre><span></span><code>   (let ((min_value i32 (i8_i16_min_value ty is_signed))\n         (min_reg Reg (imm in_ty (i32_2_float_bits min_value in_ty)))\n         (tmp Reg (fmax_ in_ty min_reg r))\n         (max_value i32 (i8_i16_max_value ty is_signed))\n         (max_reg Reg (imm in_ty (i32_2_float_bits max_value in_ty))))\n     (fmin_ in_ty tmp max_reg)))\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 342113920,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899063
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137428985\">PR review comment</a>:</p>\n<blockquote>\n<p>I guess I have a slight preference for having these on ISLE as well, but I'm not too sure. @jameysharp what do you think about this?</p>\n</blockquote>",
        "id": 342113922,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899063
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137411119\">PR review comment</a>:</p>\n<blockquote>\n<p>Shouldn't the type on <code>fpu_rrr</code> be <code>$F32</code> as well?</p>\n</blockquote>",
        "id": 342113931,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899064
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137417573\">PR review comment</a>:</p>\n<blockquote>\n<p>This seems to target the whole family of <code>fcvt_*</code> instructions, but the clamp here is really only needed for <code>fcvt_*_sat</code> which do the saturating conversions.</p>\n</blockquote>",
        "id": 342113992,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899076
    },
    {
        "content": "<p>afonso360 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137411119\">PR review comment</a>.</p>",
        "id": 342117020,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678899766
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1341931959\">PR review</a>.</p>",
        "id": 342150328,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678908966
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1341931959\">PR review</a>.</p>",
        "id": 342150463,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678909009
    },
    {
        "content": "<p>jameysharp submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1342482682\">PR review</a>.</p>",
        "id": 342179364,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678919413
    },
    {
        "content": "<p>jameysharp submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1342482682\">PR review</a>.</p>",
        "id": 342179365,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678919413
    },
    {
        "content": "<p>jameysharp created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137836288\">PR review comment</a>:</p>\n<blockquote>\n<p>This can be expressed more directly:</p>\n<p><div class=\"codehilite\" data-code-language=\"suggestion\"><pre><span></span><code>(rule (clamp_fcvt_from_float _ _ r _) r)\n(rule 1 (clamp_fcvt_from_float in_ty (fits_in_16 ty) r is_signed)\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 342179366,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678919413
    },
    {
        "content": "<p>jameysharp created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137810345\">PR review comment</a>:</p>\n<blockquote>\n<p>I think a prefix like <code>rv_</code> is a good idea. But I also think it would be okay to merge this with the <code>fmin_</code>/<code>fmax_</code> names, and clean it up later.</p>\n</blockquote>",
        "id": 342179367,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678919413
    },
    {
        "content": "<p>jameysharp created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137836435\">PR review comment</a>:</p>\n<blockquote>\n<p>In general I agree that I'd like to do as much in ISLE as possible.</p>\n<p>I think there are a number of tricks we can use which might clean this up, but I'm having trouble putting them together into a complete suggestion.</p>\n<p>The pure ISLE version of this probably would return the appropriate hex-literal float for each combination of type and is_signed. I'm not sure how easy that'll be to write, understand, or maintain.</p>\n<p>Leaving some of the work to Rust, we can factor it differently to shorten the code. With signed conversion, we can start with <code>i64::MAX</code> or <code>i64::MIN</code>, then <code>x &gt;&gt; (64 - ty.bits())</code>, then use <code>f32_bits(x as f32)</code> or <code>f64_bits(x as f64)</code>. Unsigned is the same except for starting with <code>u64::MAX</code> or <code>u64::MIN</code> and using unsigned shifts. Since we apparently only need to clamp for <code>fits_in_16</code> types (why is that though?) we can replace <code>64</code> with <code>16</code> in the first two steps.</p>\n</blockquote>",
        "id": 342179368,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678919413
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 342198521,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678929965
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a> from <code>issue5992</code> to <code>main</code>.</p>",
        "id": 342198534,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678929979
    },
    {
        "content": "<p>afonso360 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#pullrequestreview-1342727823\">PR review</a>.</p>",
        "id": 342199064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678930390
    },
    {
        "content": "<p>afonso360 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015#discussion_r1137986062\">PR review comment</a>:</p>\n<blockquote>\n<blockquote>\n<p>Since we apparently only need to clamp for fits_in_16 types (why is that though?) </p>\n</blockquote>\n<p>We have native instructions for this operation in both 32 and 64 bit variants, but for &lt;16 we clamp the values to the maximum range supported by i8/i16 and then do the 32 bit conversion.</p>\n</blockquote>",
        "id": 342199066,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678930390
    },
    {
        "content": "<p><strong>yuyang-ok</strong> requested <a href=\"https://github.com/jameysharp\">jameysharp</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 345559323,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680149563
    },
    {
        "content": "<p><strong>yuyang-ok</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 345559324,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680149563
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 345559325,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680149564
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 345559815,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680149992
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 352129248,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1682289987
    },
    {
        "content": "<p>yuyang-ok updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 365696136,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1686610024
    },
    {
        "content": "<p>afonso360 closed without merge <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6015\">PR #6015</a>.</p>",
        "id": 398157040,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1698095516
    }
]