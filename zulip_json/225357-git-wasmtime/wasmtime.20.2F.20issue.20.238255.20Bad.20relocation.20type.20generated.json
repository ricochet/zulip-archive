[
    {
        "content": "<p><a href=\"https://github.com/Wang-Zhongqi\">Wang-Zhongqi</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8255\">Issue #8255</a>.</p>",
        "id": 430014608,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1711613181
    },
    {
        "content": "<p>Wang-Zhongqi opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8255\">issue #8255</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"WebAssembly\"><pre><span></span><code><span class=\"p\">(</span><span class=\"k\">module</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"ceil\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.ceil</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"floor\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.floor</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"trunc\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.trunc</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"nearest\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.nearest</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>TODO: first, disable sse support</li>\n<li>TODO: second, wasmtime compile -Ccache=n -o test.cwasm test.wasm</li>\n<li>TODO: objdump -r test.cwasm</li>\n</ul>\n<h3>Expected Results</h3>\n<p>The expected relocation type is R_X86_64_64, indicating a 64-bit absolute relocation. <br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/1e3118be-161e-4812-ad37-6ad5d318f033\">https://github.com/bytecodealliance/wasmtime/assets/56493493/1e3118be-161e-4812-ad37-6ad5d318f033</a>)</p>\n<h3>Actual Results</h3>\n<p>The actual relocation type is 8-bit.<br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/5076d4d4-15e8-4886-8f0d-8aa33a959699\">https://github.com/bytecodealliance/wasmtime/assets/56493493/5076d4d4-15e8-4886-8f0d-8aa33a959699</a>)</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 16.0</p>\n<p>Operating system: ubuntu 20.04</p>\n<p>Architecture: X86_64</p>\n<h3>Extra Info</h3>\n<p>This could be 64, not 8.<br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/f7b3af91-2d40-4678-8850-020aa0e8dca3\">https://github.com/bytecodealliance/wasmtime/assets/56493493/f7b3af91-2d40-4678-8850-020aa0e8dca3</a>)</p>\n</blockquote>",
        "id": 430014611,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1711613182
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8255#issuecomment-2025448454\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8255\">issue #8255</a>:</p>\n<blockquote>\n<p>Yeah looks like a bug, thanks! Would you be up for sending a PR to update that constant? I believe an update will be required <a href=\"https://github.com/bytecodealliance/wasmtime/blob/9c92881d3b936b5d2e593ded370609a6e31717d8/crates/wasmtime/src/runtime/code_memory.rs#L105\">here</a> as well.</p>\n</blockquote>",
        "id": 430088816,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1711638286
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8255\">issue #8255</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"WebAssembly\"><pre><span></span><code><span class=\"p\">(</span><span class=\"k\">module</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"ceil\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.ceil</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"floor\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.floor</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"trunc\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.trunc</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n  <span class=\"p\">(</span><span class=\"k\">func</span> <span class=\"p\">(</span><span class=\"k\">export</span> <span class=\"s2\">\"nearest\"</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">param</span> <span class=\"nv\">$x</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"k\">result</span> <span class=\"kt\">f32</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"nb\">f32.nearest</span> <span class=\"p\">(</span><span class=\"nb\">local.get</span> <span class=\"nv\">$x</span><span class=\"p\">)))</span>\n<span class=\"p\">)</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>TODO: first, disable sse support</li>\n<li>TODO: second, wasmtime compile -Ccache=n -o test.cwasm test.wasm</li>\n<li>TODO: objdump -r test.cwasm</li>\n</ul>\n<h3>Expected Results</h3>\n<p>The expected relocation type is R_X86_64_64, indicating a 64-bit absolute relocation. <br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/1e3118be-161e-4812-ad37-6ad5d318f033\">https://github.com/bytecodealliance/wasmtime/assets/56493493/1e3118be-161e-4812-ad37-6ad5d318f033</a>)</p>\n<h3>Actual Results</h3>\n<p>The actual relocation type is 8-bit.<br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/5076d4d4-15e8-4886-8f0d-8aa33a959699\">https://github.com/bytecodealliance/wasmtime/assets/56493493/5076d4d4-15e8-4886-8f0d-8aa33a959699</a>)</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 16.0</p>\n<p>Operating system: ubuntu 20.04</p>\n<p>Architecture: X86_64</p>\n<h3>Extra Info</h3>\n<p>This could be 64, not 8.<br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/56493493/f7b3af91-2d40-4678-8850-020aa0e8dca3\">https://github.com/bytecodealliance/wasmtime/assets/56493493/f7b3af91-2d40-4678-8850-020aa0e8dca3</a>)</p>\n</blockquote>",
        "id": 430269003,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1711724483
    }
]