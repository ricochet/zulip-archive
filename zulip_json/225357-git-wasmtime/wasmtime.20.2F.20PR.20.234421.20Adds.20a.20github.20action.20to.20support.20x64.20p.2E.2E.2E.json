[
    {
        "content": "<p>jlb6740 opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>:</p>\n<blockquote>\n<p>…glass</p>\n<p>This github action allows performance testing using sightglass. The<br>\naction is triggered either via a workflow dispatch or with the comment<br>\n'/bench_x64', in a pull request. Once triggered the action will send<br>\na request to a private repository that supports using a self-hosted runner<br>\nto do comparisons of \"refs/feature/commit\" vs \"refs/heads/main\" for<br>\nwasmtime. If the action is triggered via a comment in a pull request<br>\n(with '/bench_x64') then the commit referenced by the pull request is used<br>\nfor the comparison against refs/head/main. If triggered via a workflow<br>\ndispatch the interface will request the commit to compare against<br>\nrefs/head/main. The results of the performance tests, run via sightglass,<br>\nwill be a table showing a percentage change in clock ticks in various stages<br>\nrequried for executing the benchmark, namely instantiate, compiliation,<br>\nand execution. This patch is intended to be just a starting patch with much<br>\nto tweak and improve. One of the TODOs will be adding support for aarch64<br>\n.. currently this patch supports only x64. Note also that the logic for<br>\nactually doing the comparison and parsing the results occurs with the action<br>\nassociated with the private repo and so this patch itself (though the trigger)<br>\nis fairly straight forward.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;<br>\n</p>\n</blockquote>",
        "id": 289015094,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657336747
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 289015102,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657336770
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 289015175,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657336830
    },
    {
        "content": "<p>jlb6740 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>:</p>\n<blockquote>\n<p>…glass</p>\n<p>This github action allows performance testing using sightglass. The<br>\naction is triggered either via a workflow dispatch or with the comment<br>\n'/bench_x64', in a pull request. Once triggered the action will send<br>\na request to a private repository that supports using a self-hosted runner<br>\nto do comparisons of \"refs/feature/commit\" vs \"refs/heads/main\" for<br>\nwasmtime. If the action is triggered via a comment in a pull request<br>\n(with '/bench_x64') then the commit referenced by the pull request is used<br>\nfor the comparison against refs/head/main. If triggered via a workflow<br>\ndispatch the interface will request the commit to compare against<br>\nrefs/head/main. The results of the performance tests, run via sightglass,<br>\nwill be a table showing a percentage change in clock ticks in various stages<br>\nrequried for executing the benchmark, namely instantiate, compiliation,<br>\nand execution. This patch is intended to be just a starting patch with much<br>\nto tweak and improve. One of the TODOs will be adding support for aarch64<br>\n.. currently this patch supports only x64. Note also that the logic for<br>\nactually doing the comparison and parsing the results occurs with the action<br>\nassociated with the private repo and so this patch itself (though the trigger)<br>\nis fairly straight forward.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;<br>\n</p>\n</blockquote>",
        "id": 289015184,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657336862
    },
    {
        "content": "<p>jlb6740 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>:</p>\n<blockquote>\n<p>This github action allows performance testing using sightglass. The<br>\naction is triggered either via a workflow dispatch or with the comment<br>\n'/bench_x64', in a pull request. Once triggered the action will send<br>\na request to a private repository that supports using a self-hosted runner<br>\nto do comparisons of \"refs/feature/commit\" vs \"refs/heads/main\" for<br>\nwasmtime. If the action is triggered via a comment in a pull request<br>\n(with '/bench_x64') then the commit referenced by the pull request is used<br>\nfor the comparison against refs/head/main. If triggered via a workflow<br>\ndispatch the interface will request the commit to compare against<br>\nrefs/head/main. The results of the performance tests, run via sightglass,<br>\nwill be a table showing a percentage change in clock ticks in various stages<br>\nrequried for executing the benchmark, namely instantiate, compiliation,<br>\nand execution. This patch is intended to be just a starting patch with much<br>\nto tweak and improve. One of the TODOs will be adding support for aarch64<br>\n.. currently this patch supports only x64. Note also that the logic for<br>\nactually doing the comparison and parsing the results occurs with the action<br>\nassociated with the private repo and so this patch itself (though the trigger)<br>\nis fairly straight forward.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;<br>\n</p>\n</blockquote>",
        "id": 289015192,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657336876
    },
    {
        "content": "<p><strong>jlb6740</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a>.</p>",
        "id": 289015380,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657337076
    },
    {
        "content": "<p><strong>jlb6740</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a>.</p>",
        "id": 289015381,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657337076
    },
    {
        "content": "<p><strong>jlb6740</strong> requested <a href=\"https://github.com/abrown\">abrown</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a>.</p>",
        "id": 289015382,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657337076
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1034663413\">PR review</a>.</p>",
        "id": 289221094,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657559039
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918161585\">PR review comment</a>:</p>\n<blockquote>\n<p>Should this default to <code>refs/heads/main</code>?</p>\n</blockquote>",
        "id": 289221095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657559039
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1034663413\">PR review</a>.</p>",
        "id": 289221096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657559039
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918160820\">PR review comment</a>:</p>\n<blockquote>\n<p>Do these triggers cover a comment (not review) on a pull request? I imagine that could fall under either of these buckets, but just want to make sure that we do actually allow a comment (as opposed to a review) on a pull request to trigger this.</p>\n</blockquote>",
        "id": 289221097,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657559039
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918162776\">PR review comment</a>:</p>\n<blockquote>\n<p>Is this used anywhere? Also, why is it a different hash from <code>sg_commit</code> above? If it is actually used, maybe we could have a comment giving a little context here?</p>\n</blockquote>",
        "id": 289221099,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657559039
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918274053\">PR review comment</a>:</p>\n<blockquote>\n<p>Yes, both. The top covers an issue comment (not review) and I've tested this. I haven't tried to do a pull_request_review_comment but this here <a href=\"https://docs.github.com/en/github-ae@latest/actions/using-workflows/events-that-trigger-workflows#pull_request_review_comment\">https://docs.github.com/en/github-ae@latest/actions/using-workflows/events-that-trigger-workflows#pull_request_review_comment</a> explains it should work in that instance.</p>\n</blockquote>",
        "id": 289237556,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567234
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1034824322\">PR review</a>.</p>",
        "id": 289237558,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567234
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1034826412\">PR review</a>.</p>",
        "id": 289237932,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567360
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918275444\">PR review comment</a>:</p>\n<blockquote>\n<p>Not anymore, will remove.</p>\n</blockquote>",
        "id": 289237933,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567360
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1034830137\">PR review</a>.</p>",
        "id": 289238438,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567579
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r918278071\">PR review comment</a>:</p>\n<blockquote>\n<p>Yeah, wasn't sure if we wanted to bump it every now and then or just use head. Currently the way backend is written I think this needs to be a commit SHA, but will look to change it to a symbolic ref in a future iteration.</p>\n</blockquote>",
        "id": 289238439,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1657567579
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298728037,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663145671
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298729477,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663146306
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298733670,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663148066
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298812866,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663175225
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298813667,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663175496
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 298814031,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663175633
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1108008280\">PR review</a>.</p>",
        "id": 298827274,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180348
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1108008280\">PR review</a>.</p>",
        "id": 298827275,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180348
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971159591\">PR review comment</a>:</p>\n<blockquote>\n<p>Could this perhaps change to <code>contains</code> instead of <code>startsWith</code> to allow something like</p>\n<blockquote>\n<p>blah blah blah words</p>\n<p>/bench_x64</p>\n</blockquote>\n<p>?</p>\n</blockquote>",
        "id": 298827276,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180348
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971161452\">PR review comment</a>:</p>\n<blockquote>\n<p>Are these two variables necessary to specify? I would assume that they could be omitted since the push itself is triggering the workflow</p>\n</blockquote>",
        "id": 298827277,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180349
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971161069\">PR review comment</a>:</p>\n<blockquote>\n<p>Would it be possible to use the <code>git merge-base</code> with the <code>main</code> branch of wasmtime and the previously benchmarked commit? That way the perf results could be more stable over time for comparison with a PR perhaps.</p>\n</blockquote>",
        "id": 298827278,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180349
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971163564\">PR review comment</a>:</p>\n<blockquote>\n<p>I would naively expect this to already be installed on github actions workers, but did you find this to be necessary?</p>\n</blockquote>",
        "id": 298827279,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180349
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971162581\">PR review comment</a>:</p>\n<blockquote>\n<p>Should this be <code>TOKEN</code> instead of <code>WASMTIME_PUBLISHING_TOKEN</code>?</p>\n</blockquote>",
        "id": 298827280,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180349
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r971159138\">PR review comment</a>:</p>\n<blockquote>\n<p>The <code>Wasmtime_Repo_On_PR_Comment</code> job below filters on <code>github.event_name == 'pull_request_review'</code> so I think this action is never used as part of the trigger here?</p>\n</blockquote>",
        "id": 298827281,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663180349
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109513055\">PR review</a>.</p>",
        "id": 299005819,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663259002
    },
    {
        "content": "<p>abrown created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972198268\">PR review comment</a>:</p>\n<blockquote>\n<p><code>jq</code> v1.6 is available on <code>ubuntu-latest</code> (see <a href=\"https://github.com/actions/runner-images/blob/main/images/linux/Ubuntu2204-Readme.md\">here</a>)</p>\n</blockquote>",
        "id": 299005821,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663259002
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109540597\">PR review</a>.</p>",
        "id": 299011468,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663260740
    },
    {
        "content": "<p>abrown created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972221729\">PR review comment</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"suggestion\"><pre><span></span><code>          export commit_url=${{ github.event.pull_request._links.commits.href }}\n          export committer_name=$(curl -sSL $commit_url | jq -r '.[].commit.committer.name' | tail -n 1)\n          export committer_email=$(curl -sSL $commit_url | jq -r '.[].commit.committer.email' | tail -n 1)\n          echo \"Pushing ${commit_url} using account: ${committer_name} &lt;${committer_email}&gt;\"\n          git config user.name ${committer_name}\n          git config user.email ${committer_email}\n</code></pre></div>\n<p>It seems like this is what we're trying to do here? This would eliminate the duplication.</p>\n</blockquote>",
        "id": 299011469,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663260740
    },
    {
        "content": "<p>abrown created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972217528\">PR review comment</a>:</p>\n<blockquote>\n<p>No need to change this now but I did find the <a href=\"https://docs.github.com/en/actions/learn-github-actions/expressions#example-matching-an-array-of-strings\">documentation for <code>contains</code></a> and it looks like this could work:</p>\n<p><div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"nx\">contains</span><span class=\"p\">(</span><span class=\"nx\">fromJson</span><span class=\"p\">(</span><span class=\"s1\">'[\"abrown\", \"afonso360\", \"etc\"]'</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"nx\">github</span><span class=\"p\">.</span><span class=\"nx\">event</span><span class=\"p\">.</span><span class=\"nx\">review</span><span class=\"p\">.</span><span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">login</span><span class=\"p\">)</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 299011471,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663260740
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109540597\">PR review</a>.</p>",
        "id": 299011472,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663260740
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972324412\">PR review comment</a>:</p>\n<blockquote>\n<p>@abrown .. This is definitely cleaner but I think it will match if someone created an account with the user name something like \"abrown_badactor\". Is that right? If so, looking here I don't see a way to do an exact match using the notion suggested. Any thoughts on that?</p>\n</blockquote>",
        "id": 299031991,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663267957
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109695859\">PR review</a>.</p>",
        "id": 299031992,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663267957
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972339687\">PR review comment</a>:</p>\n<blockquote>\n<p>If I understand what git merge-base is implying/doing we are in fact using the merged version of the patch to test. On the pull_request review side, the ref_name (for pull_request_review) is actually referring to the merged version of the patch:</p>\n<blockquote>\n<p>git fetch wasmtime refs/pull/<em>/merge:refs/remotes/wasmtime/pull/</em>/merge<br>\ngit checkout wasmtime/pull/${{ github.ref_name }} -b ${{ github.ref_name }}</p>\n</blockquote>\n<p>You can see that here where I am testing this in my fork of wasmtime:<br>\n<a href=\"https://github.com/jlb6740/wasmtime/actions/runs/3062995084/jobs/4944585819\">https://github.com/jlb6740/wasmtime/actions/runs/3062995084/jobs/4944585819</a></p>\n<p>![image](<a href=\"https://user-images.githubusercontent.com/45402135/190489557-aec73958-bec7-43ac-af01-7104c8b6cc37.png\">https://user-images.githubusercontent.com/45402135/190489557-aec73958-bec7-43ac-af01-7104c8b6cc37.png</a>)</p>\n</blockquote>",
        "id": 299035576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269181
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109718152\">PR review</a>.</p>",
        "id": 299035577,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269181
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109722496\">PR review</a>.</p>",
        "id": 299036127,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269423
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972342722\">PR review comment</a>:</p>\n<blockquote>\n<p>So, and I haven't tested this yet, but I believe if someone tried to trigger a perf run using a patch that github is saying does not merge cleanly into mainline then that request would fail. </p>\n</blockquote>",
        "id": 299036128,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269423
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109723826\">PR review</a>.</p>",
        "id": 299036291,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269498
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972343656\">PR review comment</a>:</p>\n<blockquote>\n<p>So I think this is already working as expected but let me know and we can iterate. <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n</blockquote>",
        "id": 299036292,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663269498
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109757289\">PR review</a>.</p>",
        "id": 299041107,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271444
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972366527\">PR review comment</a>:</p>\n<blockquote>\n<p>Good catch. This is why this is difficult to test. I am simulating all of this on my forked branch with it's own master and default branch yet things will work differently once merged. </p>\n</blockquote>",
        "id": 299041108,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271444
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972367838\">PR review comment</a>:</p>\n<blockquote>\n<p>Yep .. even says so in the logs that it is already at its latest values.</p>\n</blockquote>",
        "id": 299041407,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271564
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109759265\">PR review</a>.</p>",
        "id": 299041408,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271564
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109763970\">PR review</a>.</p>",
        "id": 299042092,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271835
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972370958\">PR review comment</a>:</p>\n<blockquote>\n<p>The echos were simply to provide some verbosity to the logs. I'd left them there on purpose but can remove.</p>\n</blockquote>",
        "id": 299042093,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663271835
    },
    {
        "content": "<p>abrown created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972409950\">PR review comment</a>:</p>\n<blockquote>\n<p>I don't think so; take a look at that <code>contains</code> link--my take is it matches if the item is in the array. But this is definitely not a high-priority thing.</p>\n</blockquote>",
        "id": 299049547,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663275097
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109820722\">PR review</a>.</p>",
        "id": 299049548,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663275097
    },
    {
        "content": "<p>abrown submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109821859\">PR review</a>.</p>",
        "id": 299049730,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663275159
    },
    {
        "content": "<p>abrown created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972410699\">PR review comment</a>:</p>\n<blockquote>\n<p>Yeah, I echoed a line to the log as well; I was just deduplicating the <code>curl | jq</code> code).</p>\n</blockquote>",
        "id": 299049731,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663275159
    },
    {
        "content": "<p>jlb6740 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r972440905\">PR review comment</a>:</p>\n<blockquote>\n<p>Actually .. no, this was correct. I'd created a WASMTIME_PUBLISHING_TOKEN on the perf server. I think this is fine. Whether it works once deployed is TBD but I think  we should be ok. </p>\n</blockquote>",
        "id": 299056131,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663277983
    },
    {
        "content": "<p>jlb6740 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1109864166\">PR review</a>.</p>",
        "id": 299056132,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663277983
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 299057769,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663278781
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 299058040,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663278922
    },
    {
        "content": "<p>jlb6740 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a> from <code>add-sightglass-benchmarking-actions</code> to <code>main</code>.</p>",
        "id": 299064325,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663282398
    },
    {
        "content": "<p>jlb6740 merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421\">PR #4421</a>.</p>",
        "id": 299067360,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663284278
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1110768485\">PR review</a>.</p>",
        "id": 299170697,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663338070
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r973079452\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah ok this makes sense, I always wondered what GitHub was doing here relative to merge commits and whatnot since testing merges is not really communicated all that well in the UI. In any case if the baseline changes over time I think that's reasonable as well since it's still testing where the only changes are the PR in question.</p>\n</blockquote>",
        "id": 299170698,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663338070
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#discussion_r973080741\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah right yes there's two sets of secrets, forgot!</p>\n</blockquote>",
        "id": 299170937,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663338145
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4421#pullrequestreview-1110770358\">PR review</a>.</p>",
        "id": 299170941,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1663338145
    }
]