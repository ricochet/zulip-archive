[
    {
        "content": "<p>bnjbvr opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003\">issue #6003</a>:</p>\n<blockquote>\n<p>In the <a href=\"https://buildkite.com/embark-studios/wasmtime-aarch64-apple-darwin/builds/663#0186d87e-e01b-4944-86c6-f068f6b87c96\">latest daily runs of wasmtime testing on our internal Aarch64 machine</a>, I see new failures related to multiple memories tests:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">----</span><span class=\"w\"> </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"w\"> </span><span class=\"o\">----</span>\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span>::<span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">create</span><span class=\"w\"> </span><span class=\"n\">memory</span><span class=\"w\"> </span><span class=\"n\">pool</span><span class=\"w\"> </span><span class=\"n\">mapping</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">mmap</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">allocate</span><span class=\"w\"> </span><span class=\"mh\">0x17bb80000000</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">Cannot</span><span class=\"w\"> </span><span class=\"n\">allocate</span><span class=\"w\"> </span><span class=\"n\">memory</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"p\">)</span><span class=\"o\">'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">homebrew</span><span class=\"o\">/</span><span class=\"n\">var</span><span class=\"o\">/</span><span class=\"n\">buildkite</span><span class=\"o\">-</span><span class=\"n\">agent</span><span class=\"o\">/</span><span class=\"n\">builds</span><span class=\"o\">/</span><span class=\"n\">mac</span><span class=\"o\">-</span><span class=\"n\">aarch64</span><span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"o\">/</span><span class=\"n\">embark</span><span class=\"o\">-</span><span class=\"n\">studios</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">aarch64</span><span class=\"o\">-</span><span class=\"n\">apple</span><span class=\"o\">-</span><span class=\"n\">darwin</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">cli</span><span class=\"o\">-</span><span class=\"mi\">5998</span><span class=\"n\">d6d2b565964d</span><span class=\"o\">/</span><span class=\"n\">out</span><span class=\"o\">/</span><span class=\"n\">wast_testsuite_tests</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">6063</span>:<span class=\"mi\">18</span>\n\n<span class=\"n\">failures</span>:\n    <span class=\"nc\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">data_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">exports0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_exprs0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_exprs1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_memory0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports3_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports4_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">linking1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">linking2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">load0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_init0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_multi_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size3_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_trap0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">simd_memory_multi_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span>\n</code></pre></div>\n<p>Are these large memory allocations expected to fail?</p>\n</blockquote>",
        "id": 341506866,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678723665
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003#issuecomment-1466463779\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003\">issue #6003</a>:</p>\n<blockquote>\n<p>I've been seeing this as well locally and I think it's related to running out of virtual address space given the number of memories being created. I've been fixing temporarily with <code>--test-threads 2</code> but I'll work on implementing a default solution for these tests.</p>\n</blockquote>",
        "id": 341509917,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678724419
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003\">issue #6003</a>:</p>\n<blockquote>\n<p>In the <a href=\"https://buildkite.com/embark-studios/wasmtime-aarch64-apple-darwin/builds/663#0186d87e-e01b-4944-86c6-f068f6b87c96\">latest daily runs of wasmtime testing on our internal Aarch64 machine</a>, I see new failures related to multiple memories tests:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">----</span><span class=\"w\"> </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"w\"> </span><span class=\"o\">----</span>\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span>::<span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">create</span><span class=\"w\"> </span><span class=\"n\">memory</span><span class=\"w\"> </span><span class=\"n\">pool</span><span class=\"w\"> </span><span class=\"n\">mapping</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">mmap</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">allocate</span><span class=\"w\"> </span><span class=\"mh\">0x17bb80000000</span><span class=\"w\"> </span><span class=\"n\">bytes</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">Cannot</span><span class=\"w\"> </span><span class=\"n\">allocate</span><span class=\"w\"> </span><span class=\"n\">memory</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">os</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"p\">)</span><span class=\"o\">'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">opt</span><span class=\"o\">/</span><span class=\"n\">homebrew</span><span class=\"o\">/</span><span class=\"n\">var</span><span class=\"o\">/</span><span class=\"n\">buildkite</span><span class=\"o\">-</span><span class=\"n\">agent</span><span class=\"o\">/</span><span class=\"n\">builds</span><span class=\"o\">/</span><span class=\"n\">mac</span><span class=\"o\">-</span><span class=\"n\">aarch64</span><span class=\"o\">-</span><span class=\"mi\">4</span><span class=\"o\">/</span><span class=\"n\">embark</span><span class=\"o\">-</span><span class=\"n\">studios</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">aarch64</span><span class=\"o\">-</span><span class=\"n\">apple</span><span class=\"o\">-</span><span class=\"n\">darwin</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">cli</span><span class=\"o\">-</span><span class=\"mi\">5998</span><span class=\"n\">d6d2b565964d</span><span class=\"o\">/</span><span class=\"n\">out</span><span class=\"o\">/</span><span class=\"n\">wast_testsuite_tests</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">6063</span>:<span class=\"mi\">18</span>\n\n<span class=\"n\">failures</span>:\n    <span class=\"nc\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">data_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">exports0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_exprs0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_exprs1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">float_memory0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports3_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports4_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">imports_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">linking1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">linking2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">load0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_init0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_multi_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size2_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size3_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_size_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">memory_trap0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">simd_memory_multi_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store0_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store1_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">store_pooling</span>\n<span class=\"w\">    </span><span class=\"n\">wast</span>::<span class=\"n\">Cranelift</span>::<span class=\"n\">spec</span>::<span class=\"n\">multi_memory</span>::<span class=\"n\">traps0_pooling</span>\n</code></pre></div>\n<p>Are these large memory allocations expected to fail?</p>\n</blockquote>",
        "id": 341571401,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678740946
    },
    {
        "content": "<p>bnjbvr <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003#issuecomment-1467765961\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/6003\">issue #6003</a>:</p>\n<blockquote>\n<p>Wow, thanks @alexcrichton, you rock <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> </p>\n</blockquote>",
        "id": 341668561,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678787668
    }
]