[
    {
        "content": "<p>Greensue opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Hi, I have met a \"Access denied \" error, when run wasi-socket tests using wasm cmd. please help me to check what it's the reason.<br>\nReally appreciate it.</p>\n<p>After build the artifacts under the test-programs,I got the .wasm file of the bin files under the test-programs(the .wasm file in my host under the dir /Wasmtime/target/debug/build/test-programs-artifacts-10901ff28f726621/out/wasm32-wasi/debug ). And then I execute the command:<br>\n<code> ~/work/Git/Wasmtime/target/debug/wasmtime run --wasm component-model preview2_udp_connect.component.wasm</code></p>\n<p>And then, error happends:<br>\n<code>thread 'main' panicked at crates/test-programs/src/bin/preview2_udp_connect.rs:14:50:\ncalled </code>Result::unwrap()<code> on an </code>Err<code> value: ErrorCode { code: 1, name: \"access-denied\", message: \"Access denied.\\n                \\n                POSIX equivalent: EACCES, EPERM\" }\nnote: run with </code>RUST_BACKTRACE=1<code> environment variable to display a backtrace\nError: failed to run main module </code>preview2_udp_connect.component.wasm`</p>\n<p>Caused by:<br>\n    0: failed to invoke <code>run</code> function<br>\n    1: error while executing at wasm backtrace:<br>\n           0: 0x10a67 - &lt;unknown&gt;!__rust_start_panic<br>\n           1: 0x108e3 - &lt;unknown&gt;!rust_panic<br>\n           2: 0x10816 - &lt;unknown&gt;!std::panicking::rust_panic_with_hook::h9c783872fdb901cc<br>\n           3: 0xfc4e - &lt;unknown&gt;!std::panicking::begin_panic_handler::{{closure}}::h6f255f7e971e1b6b<br>\n           4: 0xfb7d - &lt;unknown&gt;!std::sys_common::backtrace::__rust_end_short_backtrace::h1f5fd5151e12b76f<br>\n           5: 0x101f8 - &lt;unknown&gt;!rust_begin_unwind<br>\n           6: 0x14fd3 - &lt;unknown&gt;!core::panicking::panic_fmt::h4ed481ff677a9793<br>\n           7: 0x166f8 - &lt;unknown&gt;!core::result::unwrap_failed::h2af8885cc6bf29d0<br>\n           8: 0x1bae - &lt;unknown&gt;!core::result::Result&lt;T,E&gt;::unwrap::h5a6e23b18a4964d8<br>\n           9: 0x25b2 - &lt;unknown&gt;!preview2_udp_connect::test_udp_connect_disconnect_reconnect::h145f524d4d36d695<br>\n          10: 0x4ee6 - &lt;unknown&gt;!preview2_udp_connect::main::h97037918226e3811<br>\n          11: 0x21a6 - &lt;unknown&gt;!core::ops::function::FnOnce::call_once::hf213c3f9fe036fc6<br>\n          12: 0x51e2 - &lt;unknown&gt;!std::sys_common::backtrace::__rust_begin_short_backtrace::hade486873dc3ce94<br>\n          13: 0x209f - &lt;unknown&gt;!std::rt::lang_start::{{closure}}::hc2f7acdd2103b085<br>\n          14: 0xe5d6 - &lt;unknown&gt;!std::rt::lang_start_internal::hd6912adb8d399251<br>\n          15: 0x204a - &lt;unknown&gt;!std::rt::lang_start::h3e409c9ea6a77da0<br>\n          16: 0x50c5 - &lt;unknown&gt;!__main_void<br>\n          17: 0x1960 - &lt;unknown&gt;!_start<br>\n          18: 0x2cd9e4 - wit-component:adapter:wasi_snapshot_preview1!wasi:cli/run@0.2.0-rc-2023-12-05#run<br>\n       note: using the <code>WASMTIME_BACKTRACE_DETAILS=1</code> environment variable may show more debugging information<br>\n    2: wasm trap: wasm <code>unreachable</code> instruction executed<br>\n<code>\nthe content of preview2_udp_connect.rs:14:50 is :\n</code> 13     let client = UdpSocket::new(family).unwrap();<br>\n 14     client.blocking_bind(&amp;net, unspecified_addr).unwrap();<br>\n 15 <br>\n 16     _ = client.stream(None).unwrap();`</p>\n<p>And I found many files if it executing the blocking_bind() func, it would triggle this Error Code.<br>\nAnd I found it both in linux and macos.</p>\n</blockquote>",
        "id": 411965626,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704816418
    },
    {
        "content": "<p>alexcrichton edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Hi, I have met a \"Access denied \" error, when run wasi-socket tests using wasm cmd. please help me to check what it's the reason.<br>\nReally appreciate it.</p>\n<p>After build the artifacts under the test-programs,I got the .wasm file of the bin files under the test-programs(the .wasm file in my host under the dir /Wasmtime/target/debug/build/test-programs-artifacts-10901ff28f726621/out/wasm32-wasi/debug ). And then I execute the command:<br>\n<code> ~/work/Git/Wasmtime/target/debug/wasmtime run --wasm component-model preview2_udp_connect.component.wasm</code></p>\n<p>And then, error happends:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"n\">programs</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">preview2_udp_connect</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">14</span>:<span class=\"mi\">50</span>:\n<span class=\"nc\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span>::<span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">ErrorCode</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">code</span>: <span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">name</span>: <span class=\"s\">\"access-denied\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">message</span>: <span class=\"s\">\"Access denied.</span><span class=\"se\">\\n</span><span class=\"s\">                </span><span class=\"se\">\\n</span><span class=\"s\">                POSIX equivalent: EACCES, EPERM\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n<span class=\"n\">note</span>: <span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n<span class=\"n\">Error</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">preview2_udp_connect</span><span class=\"p\">.</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">run</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n           <span class=\"mi\">0</span>: <span class=\"mh\">0x10a67</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__rust_start_panic</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span>: <span class=\"mh\">0x108e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_panic</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span>: <span class=\"mh\">0x10816</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">rust_panic_with_hook</span>::<span class=\"n\">h9c783872fdb901cc</span>\n<span class=\"w\">           </span><span class=\"mi\">3</span>: <span class=\"mh\">0xfc4e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">begin_panic_handler</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h6f255f7e971e1b6b</span>\n<span class=\"w\">           </span><span class=\"mi\">4</span>: <span class=\"mh\">0xfb7d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_end_short_backtrace</span>::<span class=\"n\">h1f5fd5151e12b76f</span>\n<span class=\"w\">           </span><span class=\"mi\">5</span>: <span class=\"mh\">0x101f8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_begin_unwind</span>\n<span class=\"w\">           </span><span class=\"mi\">6</span>: <span class=\"mh\">0x14fd3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">panicking</span>::<span class=\"n\">panic_fmt</span>::<span class=\"n\">h4ed481ff677a9793</span>\n<span class=\"w\">           </span><span class=\"mi\">7</span>: <span class=\"mh\">0x166f8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"n\">unwrap_failed</span>::<span class=\"n\">h2af8885cc6bf29d0</span>\n<span class=\"w\">           </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1bae</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"p\">,</span><span class=\"n\">E</span><span class=\"o\">&gt;</span>::<span class=\"n\">unwrap</span>::<span class=\"n\">h5a6e23b18a4964d8</span>\n<span class=\"w\">           </span><span class=\"mi\">9</span>: <span class=\"mh\">0x25b2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">preview2_udp_connect</span>::<span class=\"n\">test_udp_connect_disconnect_reconnect</span>::<span class=\"n\">h145f524d4d36d695</span>\n<span class=\"w\">          </span><span class=\"mi\">10</span>: <span class=\"mh\">0x4ee6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">preview2_udp_connect</span>::<span class=\"n\">main</span>::<span class=\"n\">h97037918226e3811</span>\n<span class=\"w\">          </span><span class=\"mi\">11</span>: <span class=\"mh\">0x21a6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span>::<span class=\"n\">call_once</span>::<span class=\"n\">hf213c3f9fe036fc6</span>\n<span class=\"w\">          </span><span class=\"mi\">12</span>: <span class=\"mh\">0x51e2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">hade486873dc3ce94</span>\n<span class=\"w\">          </span><span class=\"mi\">13</span>: <span class=\"mh\">0x209f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">hc2f7acdd2103b085</span>\n<span class=\"w\">          </span><span class=\"mi\">14</span>: <span class=\"mh\">0xe5d6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start_internal</span>::<span class=\"n\">hd6912adb8d399251</span>\n<span class=\"w\">          </span><span class=\"mi\">15</span>: <span class=\"mh\">0x204a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"n\">h3e409c9ea6a77da0</span>\n<span class=\"w\">          </span><span class=\"mi\">16</span>: <span class=\"mh\">0x50c5</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__main_void</span>\n<span class=\"w\">          </span><span class=\"mi\">17</span>: <span class=\"mh\">0x1960</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span>\n<span class=\"w\">          </span><span class=\"mi\">18</span>: <span class=\"mh\">0x2cd9e4</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span>:<span class=\"nc\">adapter</span>:<span class=\"nc\">wasi_snapshot_preview1</span><span class=\"o\">!</span><span class=\"n\">wasi</span>:<span class=\"nc\">cli</span><span class=\"o\">/</span><span class=\"n\">run</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">rc</span><span class=\"o\">-</span><span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">12</span><span class=\"o\">-</span><span class=\"mi\">05</span>#<span class=\"n\">run</span>\n<span class=\"w\">       </span><span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n</code></pre></div>\n<p>the content of preview2_udp_connect.rs:14:50 is :</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">UdpSocket</span>::<span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">family</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"w\">     </span><span class=\"n\">client</span><span class=\"p\">.</span><span class=\"n\">blocking_bind</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">net</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">unspecified_addr</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\"> </span><span class=\"mi\">15</span>\n<span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\">     </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"p\">.</span><span class=\"n\">stream</span><span class=\"p\">(</span><span class=\"nb\">None</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n</code></pre></div>\n<p>And I found many files if it executing the blocking_bind() func, it would triggle this Error Code.<br>\nAnd I found it both in linux and macos.</p>\n</blockquote>",
        "id": 411980898,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704821173
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1883485681\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Would you perhaps have ipv6 disabled on your machine? If that's not the case this'll probably need some more debugging prints added to the tests to understand why this is failing.</p>\n<p>cc @badeend as well as you might have an idea too</p>\n</blockquote>",
        "id": 411981148,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704821276
    },
    {
        "content": "<p>badeend <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1883790132\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Nothing spings to mind. Like Alex said, it would be good to know whether this happens on a specific IP version or not. At the bottom of the test file you can comment out all Ipv6 invocations and see whether that changes anything, if not; maybe check with the Ipv4 tests commented out instead.</p>\n</blockquote>",
        "id": 412011993,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1704834302
    },
    {
        "content": "<p>Greensue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1888239652\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>I've tried removing the ipv6 related test functions, but it comes out the same error</p>\n</blockquote>",
        "id": 412454782,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1705022247
    },
    {
        "content": "<p>Greensue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1892989472\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>I fond the SocketAddrCheck  func are false as default, and I change that to True , then the  test passed. @badeend</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">impl</span><span class=\"w\"> </span><span class=\"nb\">Default</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">SocketAddrCheck</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"k\">fn</span> <span class=\"nf\">default</span><span class=\"p\">()</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Self</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"bp\">Self</span><span class=\"p\">(</span><span class=\"n\">Arc</span>::<span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">|</span><span class=\"n\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">))</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/23025897/4ced9b1b-51db-4224-9be4-476d3e6bc0c4\">https://github.com/bytecodealliance/wasmtime/assets/23025897/4ced9b1b-51db-4224-9be4-476d3e6bc0c4</a>)</p>\n</blockquote>",
        "id": 413068507,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1705373062
    },
    {
        "content": "<p>Greensue <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1894829589\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>another way to avoid access denied error:<br>\n![image](<a href=\"https://github.com/bytecodealliance/wasmtime/assets/23025897/f3cb68cc-0f53-411f-a400-beb551b55755\">https://github.com/bytecodealliance/wasmtime/assets/23025897/f3cb68cc-0f53-411f-a400-beb551b55755</a>)</p>\n</blockquote>",
        "id": 415937189,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1705457990
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Hi, I have met a \"Access denied \" error, when run wasi-socket tests using wasm cmd. please help me to check what it's the reason.<br>\nReally appreciate it.</p>\n<p>After build the artifacts under the test-programs,I got the .wasm file of the bin files under the test-programs(the .wasm file in my host under the dir /Wasmtime/target/debug/build/test-programs-artifacts-10901ff28f726621/out/wasm32-wasi/debug ). And then I execute the command:<br>\n<code> ~/work/Git/Wasmtime/target/debug/wasmtime run --wasm component-model preview2_udp_connect.component.wasm</code></p>\n<p>And then, error happends:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"n\">programs</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">preview2_udp_connect</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">14</span>:<span class=\"mi\">50</span>:\n<span class=\"nc\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span>::<span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">ErrorCode</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">code</span>: <span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">name</span>: <span class=\"s\">\"access-denied\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">message</span>: <span class=\"s\">\"Access denied.</span><span class=\"se\">\\n</span><span class=\"s\">                </span><span class=\"se\">\\n</span><span class=\"s\">                POSIX equivalent: EACCES, EPERM\"</span><span class=\"w\"> </span><span class=\"p\">}</span>\n<span class=\"n\">note</span>: <span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n<span class=\"n\">Error</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">preview2_udp_connect</span><span class=\"p\">.</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">run</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">function</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n           <span class=\"mi\">0</span>: <span class=\"mh\">0x10a67</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__rust_start_panic</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span>: <span class=\"mh\">0x108e3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_panic</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span>: <span class=\"mh\">0x10816</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">rust_panic_with_hook</span>::<span class=\"n\">h9c783872fdb901cc</span>\n<span class=\"w\">           </span><span class=\"mi\">3</span>: <span class=\"mh\">0xfc4e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">panicking</span>::<span class=\"n\">begin_panic_handler</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">h6f255f7e971e1b6b</span>\n<span class=\"w\">           </span><span class=\"mi\">4</span>: <span class=\"mh\">0xfb7d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_end_short_backtrace</span>::<span class=\"n\">h1f5fd5151e12b76f</span>\n<span class=\"w\">           </span><span class=\"mi\">5</span>: <span class=\"mh\">0x101f8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">rust_begin_unwind</span>\n<span class=\"w\">           </span><span class=\"mi\">6</span>: <span class=\"mh\">0x14fd3</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">panicking</span>::<span class=\"n\">panic_fmt</span>::<span class=\"n\">h4ed481ff677a9793</span>\n<span class=\"w\">           </span><span class=\"mi\">7</span>: <span class=\"mh\">0x166f8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"n\">unwrap_failed</span>::<span class=\"n\">h2af8885cc6bf29d0</span>\n<span class=\"w\">           </span><span class=\"mi\">8</span>: <span class=\"mh\">0x1bae</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">result</span>::<span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"p\">,</span><span class=\"n\">E</span><span class=\"o\">&gt;</span>::<span class=\"n\">unwrap</span>::<span class=\"n\">h5a6e23b18a4964d8</span>\n<span class=\"w\">           </span><span class=\"mi\">9</span>: <span class=\"mh\">0x25b2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">preview2_udp_connect</span>::<span class=\"n\">test_udp_connect_disconnect_reconnect</span>::<span class=\"n\">h145f524d4d36d695</span>\n<span class=\"w\">          </span><span class=\"mi\">10</span>: <span class=\"mh\">0x4ee6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">preview2_udp_connect</span>::<span class=\"n\">main</span>::<span class=\"n\">h97037918226e3811</span>\n<span class=\"w\">          </span><span class=\"mi\">11</span>: <span class=\"mh\">0x21a6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">core</span>::<span class=\"n\">ops</span>::<span class=\"n\">function</span>::<span class=\"nb\">FnOnce</span>::<span class=\"n\">call_once</span>::<span class=\"n\">hf213c3f9fe036fc6</span>\n<span class=\"w\">          </span><span class=\"mi\">12</span>: <span class=\"mh\">0x51e2</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">sys_common</span>::<span class=\"n\">backtrace</span>::<span class=\"n\">__rust_begin_short_backtrace</span>::<span class=\"n\">hade486873dc3ce94</span>\n<span class=\"w\">          </span><span class=\"mi\">13</span>: <span class=\"mh\">0x209f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"p\">{{</span><span class=\"n\">closure</span><span class=\"p\">}}</span>::<span class=\"n\">hc2f7acdd2103b085</span>\n<span class=\"w\">          </span><span class=\"mi\">14</span>: <span class=\"mh\">0xe5d6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start_internal</span>::<span class=\"n\">hd6912adb8d399251</span>\n<span class=\"w\">          </span><span class=\"mi\">15</span>: <span class=\"mh\">0x204a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">std</span>::<span class=\"n\">rt</span>::<span class=\"n\">lang_start</span>::<span class=\"n\">h3e409c9ea6a77da0</span>\n<span class=\"w\">          </span><span class=\"mi\">16</span>: <span class=\"mh\">0x50c5</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">__main_void</span>\n<span class=\"w\">          </span><span class=\"mi\">17</span>: <span class=\"mh\">0x1960</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!</span><span class=\"n\">_start</span>\n<span class=\"w\">          </span><span class=\"mi\">18</span>: <span class=\"mh\">0x2cd9e4</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span>:<span class=\"nc\">adapter</span>:<span class=\"nc\">wasi_snapshot_preview1</span><span class=\"o\">!</span><span class=\"n\">wasi</span>:<span class=\"nc\">cli</span><span class=\"o\">/</span><span class=\"n\">run</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">rc</span><span class=\"o\">-</span><span class=\"mi\">2023</span><span class=\"o\">-</span><span class=\"mi\">12</span><span class=\"o\">-</span><span class=\"mi\">05</span>#<span class=\"n\">run</span>\n<span class=\"w\">       </span><span class=\"n\">note</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n</code></pre></div>\n<p>the content of preview2_udp_connect.rs:14:50 is :</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\">     </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">UdpSocket</span>::<span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">family</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"w\">     </span><span class=\"n\">client</span><span class=\"p\">.</span><span class=\"n\">blocking_bind</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">net</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">unspecified_addr</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\"> </span><span class=\"mi\">15</span>\n<span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\">     </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"p\">.</span><span class=\"n\">stream</span><span class=\"p\">(</span><span class=\"nb\">None</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n</code></pre></div>\n<p>And I found many files if it executing the blocking_bind() func, it would triggle this Error Code.<br>\nAnd I found it both in linux and macos.</p>\n</blockquote>",
        "id": 416061701,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1705507153
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762#issuecomment-1896109816\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/7762\">issue #7762</a>:</p>\n<blockquote>\n<p>Aha I see what's going on here, I missed this earlier. Yes running the binaries from the CLI by default will require the <code>-Sinherit-network</code> option to be specified. The CLI disables network access by default, and the tests assume network access. This is configured as part of the test runner by when running outside of the runner you'll need to configure network access to be available.</p>\n</blockquote>",
        "id": 416061703,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1705507153
    }
]