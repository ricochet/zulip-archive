[
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1465474050\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey I think this is ready for an initial high-level review.</p>\n<p>Everything is implemented in terms of the <code>wit-bindgen</code> interfaces, and then an adapter is introduced which maps from the wit-bindgen to the current <code>wasmtime::Linker</code> implementation.</p>\n<p>This means that it is very forward compatible with the component model linker going forward.</p>\n<p>If you can take a quick look at the rough layout and see if this is on the path to merging that would be great.</p>\n<p>After we get the rough layout right, we can move on to a more detailed review.</p>\n<p>Thanks!</p>\n</blockquote>",
        "id": 341365778,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678680035
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1465474482\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>There's also a pretty extensive example that can be used to test this implementation in <code>crates/wasi-http/example</code></p>\n</blockquote>",
        "id": 341365811,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678680062
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1467350680\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Comments addressed except the macro vs fn comment because I'm not clear how to resolve the compile error.</p>\n<p>Please take another look.</p>\n</blockquote>",
        "id": 341620162,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678769053
    },
    {
        "content": "<p>brendandburns edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1467350680\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Comments addressed ~except the macro vs fn comment because I'm not clear how to resolve the compile error.~</p>\n<p>Please take another look.</p>\n</blockquote>",
        "id": 342163810,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678913521
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1474719918\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Ok, this was switched to hyper. I'm not sure it really saved you very many dependencies, but if there are other ways to reduce the dependency count, let me know. Hyper doesn't implement TLS, so I had to pull in <code>hyper_native_tls</code></p>\n<p>I think this is ready to go, let me know if there is a good way to add tests, it seems the other modules don't really have tests.</p>\n</blockquote>",
        "id": 342711647,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679117453
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1477235241\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey </p>\n<p>Ok, I implemented timeouts. I think that the client side implementation is now basically feature complete. Ready for a more detailed review whenever you have time.</p>\n<p>Thanks!</p>\n</blockquote>",
        "id": 343268089,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679369638
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1477235566\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Oh, and I plan on starting the server side implementation in a different branch.</p>\n</blockquote>",
        "id": 343268163,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679369668
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483370305\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I left some fixes last night in <a href=\"https://github.com/brendandburns/wasmtime/pull/1\">https://github.com/brendandburns/wasmtime/pull/1</a> but it looks like they now conflict</p>\n</blockquote>",
        "id": 344362138,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679689645
    },
    {
        "content": "<p>pchickey edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483370305\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I left some fixes last night in <a href=\"https://github.com/brendandburns/wasmtime/pull/1\">https://github.com/brendandburns/wasmtime/pull/1</a> but it looks like they now conflict - I'll rebase that PR on the current state of this branch</p>\n</blockquote>",
        "id": 344362184,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679689669
    },
    {
        "content": "<p>pchickey edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483370305\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I left some fixes last night in <a href=\"https://github.com/brendandburns/wasmtime/pull/1\">https://github.com/brendandburns/wasmtime/pull/1</a> but it looks like they now conflict - I'll rebase that PR on the current state of this branch (edit: done now!)</p>\n</blockquote>",
        "id": 344365576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679691071
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483393105\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>from my point of view we still need to fix 2 architectural issues before we can merge:</p>\n<ul>\n<li>wasmtime should be running in the tokio executor, rather than using block_on inside a Func. </li>\n<li>rather than examples provided in C, we need to rewrite those to be test-programs written in Rust, because our CI environment doesn't have a C compiler installed.</li>\n</ul>\n<p>I'll work on both of those things right now, and send them as PRs like the above:</p>\n</blockquote>",
        "id": 344365895,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679691208
    },
    {
        "content": "<p>eduardomourar <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483496665\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey , I believe you can borrow code from <a href=\"https://github.com/eduardomourar/smithy-rs/blob/support-wasi-http/aws/sdk/integration-tests/webassembly/src/adapter/http_client.rs\">here</a> for your Rust example.</p>\n</blockquote>",
        "id": 344376758,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679696159
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483506481\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey thanks for the PR, I merged it. Let me know if you want me to take on either of those tasks.<br>\n</p>\n</blockquote>",
        "id": 344377699,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679696537
    },
    {
        "content": "<p>eduardomourar edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1483496665\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey , I believe you can borrow code from <a href=\"https://github.com/bytecodealliance/preview2-prototyping/blob/63fd0626b38a99288c5e2fc1d531b9c203ae13ec/wasi/src/http.rs\">here</a> for your Rust example.</p>\n</blockquote>",
        "id": 344794638,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679905611
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1486077555\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey unless you've already started on this, I can take care of those two items.</p>\n</blockquote>",
        "id": 345005219,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679966845
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1486202629\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Ok, I switched the executor on the <code>Host</code> to use <code>tokio::Runtime::block_on</code> instead of <code>executors</code>.</p>\n<p>I don't think it is required to build out the full async support in this first PR, but if that's really a blocker, I will.</p>\n<p>I also added an example implemented in rust for use as a test or just another example.</p>\n<p>Please take another look.</p>\n</blockquote>",
        "id": 345021731,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679978156
    },
    {
        "content": "<p>brendandburns edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1486202629\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Ok, I switched the executor on the <code>Host</code> to use <code>tokio::Runtime::block_on</code> instead of <code>executors</code>.</p>\n<p>I don't think it is required to build out the full async support in this first PR, but if that's really a blocker, I will.</p>\n<p>We can't just use <code>spawn_task</code> and <code>await</code> in that function because it is not declared <code>async</code></p>\n<p>I also added an example implemented in rust for use as a test or just another example.</p>\n<p>Please take another look.</p>\n</blockquote>",
        "id": 345021802,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679978186
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1486228458\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I just finished writing basically the same rust example this morning but I didn't push it yet because I need to hook its build and execution into the <code>test-programs</code> machinery. I'll wrap that up tomorrow and push it to you.</p>\n<p>And yeah lets just do async after we land this PR. We'll have to string async through everywhere, including into the wasmtime cli to run things under tokio when the http module is enabled.</p>\n</blockquote>",
        "id": 345026304,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679980459
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1487145206\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey sounds good, I'm happy to delete my Rust example and just use yours if that is easier.</p>\n</blockquote>",
        "id": 345171272,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680017925
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1489069050\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/brendandburns/wasmtime/pull/2\">https://github.com/brendandburns/wasmtime/pull/2</a> finishes up the testing changes. I am working on the supply chain stuff today, I will send a PR with any changes needed here but most of those I'll have to submit to wasmtime in a separate PR that will merge before this one.</p>\n</blockquote>",
        "id": 345480233,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680113201
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1489278534\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Cool. I squashed/merged that PR. Let me know if you need anything else from me.</p>\n</blockquote>",
        "id": 345511332,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680122397
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1489515544\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/pull/6121\">https://github.com/bytecodealliance/wasmtime/pull/6121</a> will need to land and merge to make the deny and vet CI steps pass. Then, we expect the rest of the steps will pass, since they did locally, but windows and mac can surprise me sometimes.</p>\n<p>We will need to remove the contents of <code>crates/wasi-http/example/</code>, and at that point I think we are good to go, I'll make one pass with fresh eyes tomorrow.</p>\n</blockquote>",
        "id": 345536909,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680135828
    },
    {
        "content": "<p>pchickey edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1489515544\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/pull/6121\">https://github.com/bytecodealliance/wasmtime/pull/6121</a> will need to land and merge to make the deny and vet CI steps pass. Then, we expect the rest of the steps will pass, since they did locally, but windows and mac can surprise me sometimes.</p>\n<p>We will need to remove the contents of <code>crates/wasi-http/example/</code>: we don't want any code in the tree which isn't checked by CI, because it is bound to get out of date. At that point I think we are good to go, I'll make one more pass with fresh eyes tomorrow.</p>\n</blockquote>",
        "id": 345538259,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680136537
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1490539633\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/brendandburns/wasmtime/pull/3\">https://github.com/brendandburns/wasmtime/pull/3</a> will make the cargo vet step pass</p>\n</blockquote>",
        "id": 345718514,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680191500
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1490554085\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<ul>\n<li>PRs merged (thanks!)</li>\n<li>example directory removed</li>\n</ul>\n<p>I think this is ready to go.</p>\n</blockquote>",
        "id": 345721721,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680192086
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1490574910\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>It looks like I missed the vet of some stuff I introduced in #2, I'll get those if you can fix the warnings I sloppily left in the test</p>\n</blockquote>",
        "id": 345726025,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680192976
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491005323\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>in order to make CI faster, we don't run every step until its time to go in the merge queue. <a href=\"https://github.com/brendandburns/wasmtime/pull/4\">https://github.com/brendandburns/wasmtime/pull/4</a> fixes the publishing issues.</p>\n</blockquote>",
        "id": 345792571,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680212609
    },
    {
        "content": "<p>eduardomourar <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491035247\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey , I know this is a little bit late, but can we change this package name to <code>wasmtime-wasi-http</code>, please? I feel that the current name there will eventually be used for the guest bindings and its high-level basic implementation.</p>\n</blockquote>",
        "id": 345796582,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680214491
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491089961\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@eduardomourar I think that is a good idea but lets get things merged and then rename it - we have a few more days before the release gets cut.</p>\n</blockquote>",
        "id": 345805579,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680218689
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491116366\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Merged the PR. I will send a couple of follow on PRs (including the rename) this evening.</p>\n</blockquote>",
        "id": 345809486,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680221155
    },
    {
        "content": "<p>eduardomourar <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491150227\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Here is an initial stab at the guest binding: <a href=\"https://github.com/bytecodealliance/wasi/pull/69\">https://github.com/bytecodealliance/wasi/pull/69</a></p>\n</blockquote>",
        "id": 345815700,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680224638
    },
    {
        "content": "<p>jeffparsons <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491241013\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Is it easy/possible to play with these WASI module implementations from Rust as they land? E.g. if I copy a snapshot of the relevant wit files locally and then build a component using cargo-component and its adapter magic, could I then run that in Wasmtime and expect something to happen?</p>\n<p>Just having a bit of trouble understanding what pieces already work together, and which need other pieces (new WASI target in rustc, completed component model support in Wasmtime) to land first.</p>\n</blockquote>",
        "id": 345830235,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680233632
    },
    {
        "content": "<p>jeffparsons edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1491241013\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Is it easy/possible to play with these WASI module implementations from Rust as they land? E.g. if I copy a snapshot of the relevant wit files locally and then build a component using cargo-component and its adapter magic (edit: that attempts to use wasi-http), could I then run that in Wasmtime and expect something to happen?</p>\n<p>Just having a bit of trouble understanding what pieces already work together, and which need other pieces (new WASI target in rustc, completed component model support in Wasmtime) to land first.</p>\n</blockquote>",
        "id": 345830356,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680233697
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492125169\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@jeffparsons yes, it's pretty easy to play with the modules.</p>\n<p>You need to:</p>\n<p>Run <code>wit-bindgen rust wasmtime/crates/wasi-http/wit</code> this will generate the Rust client side bindings (you can substitute <code>wit-bindgen c ...</code> if you want the c bindings instead.</p>\n<p>Once you have that, here's a small example program that you can compile:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_fields</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_outgoing_request</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">MethodParam</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">SchemeParam</span><span class=\"p\">;</span>\n\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">proxy</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">request</span><span class=\"p\">(</span><span class=\"n\">method</span>: <span class=\"nc\">MethodParam</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span>: <span class=\"nb\">Option</span><span class=\"o\">&lt;</span><span class=\"n\">SchemeParam</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_fields</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"p\">[</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"text/plain\"</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"User-agent\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"wasm32-wasi-rust\"</span><span class=\"p\">),</span>\n<span class=\"w\">    </span><span class=\"p\">]);</span>\n\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">req</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_outgoing_request</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">fut</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">default_outgoing_http</span>::<span class=\"n\">handle</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">None</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">future_incoming_response_get</span><span class=\"p\">(</span><span class=\"n\">fut</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">()</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_status</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">response_headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_headers</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">stream</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_consume</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">body</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">streams</span>::<span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">stream</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1024</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">().</span><span class=\"mi\">0</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Status is {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Headers are:\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">fields_entries</span><span class=\"p\">(</span><span class=\"n\">response_headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"p\">.</span><span class=\"n\">iter</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}: {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">String</span>::<span class=\"n\">from_utf8</span><span class=\"p\">(</span><span class=\"n\">body</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">());</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Get</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/get\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Post</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/post\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Put</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Http</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/put\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 345985148,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680276361
    },
    {
        "content": "<p>brendandburns edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492125169\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@jeffparsons yes, it's pretty easy to play with the modules, it doesn't require any of the component stuff (yet)</p>\n<p>You need to:</p>\n<p>Run <code>wit-bindgen rust wasmtime/crates/wasi-http/wit</code> this will generate the Rust client side bindings (you can substitute <code>wit-bindgen c ...</code> if you want the c bindings instead.</p>\n<p>Once you have that, here's a small example program that you can compile:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_fields</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_outgoing_request</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">MethodParam</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">SchemeParam</span><span class=\"p\">;</span>\n\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">proxy</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">request</span><span class=\"p\">(</span><span class=\"n\">method</span>: <span class=\"nc\">MethodParam</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span>: <span class=\"nb\">Option</span><span class=\"o\">&lt;</span><span class=\"n\">SchemeParam</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_fields</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"p\">[</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"text/plain\"</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"User-agent\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"wasm32-wasi-rust\"</span><span class=\"p\">),</span>\n<span class=\"w\">    </span><span class=\"p\">]);</span>\n\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">req</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_outgoing_request</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">fut</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">default_outgoing_http</span>::<span class=\"n\">handle</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">None</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">future_incoming_response_get</span><span class=\"p\">(</span><span class=\"n\">fut</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">()</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_status</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">response_headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_headers</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">stream</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_consume</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">body</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">streams</span>::<span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">stream</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1024</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">().</span><span class=\"mi\">0</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Status is {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Headers are:\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">fields_entries</span><span class=\"p\">(</span><span class=\"n\">response_headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"p\">.</span><span class=\"n\">iter</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}: {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">String</span>::<span class=\"n\">from_utf8</span><span class=\"p\">(</span><span class=\"n\">body</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">());</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Get</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/get\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Post</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/post\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Put</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Http</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/put\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 345985373,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680276402
    },
    {
        "content": "<p>brendandburns edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492125169\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@jeffparsons yes, it's pretty easy to play with the modules, it doesn't require any of the component stuff (yet)</p>\n<p>You need to:</p>\n<p>Run <code>wit-bindgen rust wasmtime/crates/wasi-http/wit</code> this will generate the Rust client side bindings (you can substitute <code>wit-bindgen c ...</code> if you want the c bindings instead.</p>\n<p>Once you have that, here's a small example program that you can compile:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_fields</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">new_outgoing_request</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">MethodParam</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">SchemeParam</span><span class=\"p\">;</span>\n\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">proxy</span><span class=\"p\">;</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">request</span><span class=\"p\">(</span><span class=\"n\">method</span>: <span class=\"nc\">MethodParam</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span>: <span class=\"nb\">Option</span><span class=\"o\">&lt;</span><span class=\"n\">SchemeParam</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span>: <span class=\"kp\">&amp;</span><span class=\"kt\">str</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_fields</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"p\">[</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"Content-type\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"text/plain\"</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"p\">(</span><span class=\"s\">\"User-agent\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"wasm32-wasi-rust\"</span><span class=\"p\">),</span>\n<span class=\"w\">    </span><span class=\"p\">]);</span>\n\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">req</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new_outgoing_request</span><span class=\"p\">(</span><span class=\"n\">method</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">host</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">fut</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">default_outgoing_http</span>::<span class=\"n\">handle</span><span class=\"p\">(</span><span class=\"n\">req</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">None</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">future_incoming_response_get</span><span class=\"p\">(</span><span class=\"n\">fut</span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">()</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_status</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">response_headers</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_headers</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">stream</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">incoming_response_consume</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">body</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">streams</span>::<span class=\"n\">read</span><span class=\"p\">(</span><span class=\"n\">stream</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">1024</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">().</span><span class=\"mi\">0</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Status is {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"Headers are:\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span>::<span class=\"n\">proxy</span>::<span class=\"n\">types</span>::<span class=\"n\">fields_entries</span><span class=\"p\">(</span><span class=\"n\">response_headers</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"p\">.</span><span class=\"n\">iter</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}: {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tuple</span><span class=\"p\">.</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"{}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">String</span>::<span class=\"n\">from_utf8</span><span class=\"p\">(</span><span class=\"n\">body</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">());</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Get</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/get\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Post</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Https</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/post\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">request</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">MethodParam</span>::<span class=\"n\">Put</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">SchemeParam</span>::<span class=\"n\">Http</span><span class=\"p\">),</span>\n<span class=\"w\">        </span><span class=\"s\">\"postman-echo.com\"</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"s\">\"/put\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>once you compile that to <code>main.wasm</code> (or whatever) you can run:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasi</span><span class=\"o\">-</span><span class=\"n\">modules</span><span class=\"o\">=</span><span class=\"n\">experimental</span><span class=\"o\">-</span><span class=\"n\">wasi</span><span class=\"o\">-</span><span class=\"n\">http</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"w\"> </span><span class=\"n\">correctly</span><span class=\"p\">.</span>\n<span class=\"o\">~~~</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 345985533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680276445
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492230954\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@jeffparsons we still need to land the preview 1 adapter and a component model implementation of the rest of wasi before this becomes usable from components. the preview 1 adapter means we don't have to worry about a new wasi target in the rust toolchain at this time.</p>\n</blockquote>",
        "id": 346001233,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680279798
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492274125\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey looks like the merge failed b/c libssl isn't installed on some of the test environments :(</p>\n<p>How do you want to handle fixing this?</p>\n</blockquote>",
        "id": 346011590,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680282267
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492385735\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I am a bit stumped on how to fix this.</p>\n<p>To maximize linux libc compatibility, we perform our linux release builds on centos 7 (<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/ci/docker/x86_64-linux/Dockerfile\">https://github.com/bytecodealliance/wasmtime/blob/main/ci/docker/x86_64-linux/Dockerfile</a>). If we were to install the default libssl from centos 7 in the builder, it would mean all of our wasmtime linux users would need openssl 1.0.2 installed, which has been out of support since the start of 2020, so that isn't an acceptable solution.</p>\n<p>I don't know enough about the linux and openssl ecosystem to know what minimum version is acceptable, but clearly it reduce our binary compatibility to take on this dep. I also don't know if there are any knobs we can tweak in the build to lazily load the openssl dylib, so users are opting in to needing it by passing the <code>--wasi-modules=experimental-wasi-http</code> flag.</p>\n<p>Finally, I don't know if there are alternatives we can swap in for needing openssl on linux. I am aware that <code>rustls</code> exists, but I don't know if it is a complete alternative. I'll ask some of my colleagues who have spent more time in this space.</p>\n</blockquote>",
        "id": 346023572,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680285458
    },
    {
        "content": "<p>rvolosatovs <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492408406\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<blockquote>\n<p>I am a bit stumped on how to fix this.</p>\n<p>To maximize linux libc compatibility, we perform our linux release builds on centos 7 (<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/ci/docker/x86_64-linux/Dockerfile?rgh-link-date=2023-03-31T17%3A57%3A37Z\"><code>main</code>/ci/docker/x86_64-linux/Dockerfile</a>). If we were to install the default libssl from centos 7 in the builder, it would mean all of our wasmtime linux users would need openssl 1.0.2 installed, which has been out of support since the start of 2020, so that isn't an acceptable solution.</p>\n<p>I don't know enough about the linux and openssl ecosystem to know what minimum version is acceptable, but clearly it reduce our binary compatibility to take on this dep. I also don't know if there are any knobs we can tweak in the build to lazily load the openssl dylib, so users are opting in to needing it by passing the <code>--wasi-modules=experimental-wasi-http</code> flag.</p>\n<p>Finally, I don't know if there are alternatives we can swap in for needing openssl on linux. I am aware that <code>rustls</code> exists, but I don't know if it is a complete alternative. I'll ask some of my colleagues who have spent more time in this space.</p>\n</blockquote>\n<p>FWIW, we have used <code>rustls</code> in <a href=\"https://github.com/enarx/enarx\">https://github.com/enarx/enarx</a> to provide transparent TLS to guests by wrapping the wasmtime WASI TCP traits and it was perfectly sufficient for that particular use case, which seems quite related.</p>\n<p>Depending on <code>rustls</code> would be best for both compatibility and simplicity of development. Definitely would vote for depending on <code>rustls</code> instead of <code>openssl</code></p>\n<p>This would also make (perhaps eventually) static builds much easier</p>\n</blockquote>",
        "id": 346027450,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680286680
    },
    {
        "content": "<p>rvolosatovs edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492408406\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<blockquote>\n<p>I am a bit stumped on how to fix this.</p>\n<p>To maximize linux libc compatibility, we perform our linux release builds on centos 7 (<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/ci/docker/x86_64-linux/Dockerfile?rgh-link-date=2023-03-31T17%3A57%3A37Z\"><code>main</code>/ci/docker/x86_64-linux/Dockerfile</a>). If we were to install the default libssl from centos 7 in the builder, it would mean all of our wasmtime linux users would need openssl 1.0.2 installed, which has been out of support since the start of 2020, so that isn't an acceptable solution.</p>\n<p>I don't know enough about the linux and openssl ecosystem to know what minimum version is acceptable, but clearly it reduce our binary compatibility to take on this dep. I also don't know if there are any knobs we can tweak in the build to lazily load the openssl dylib, so users are opting in to needing it by passing the <code>--wasi-modules=experimental-wasi-http</code> flag.</p>\n<p>Finally, I don't know if there are alternatives we can swap in for needing openssl on linux. I am aware that <code>rustls</code> exists, but I don't know if it is a complete alternative. I'll ask some of my colleagues who have spent more time in this space.</p>\n</blockquote>\n<p>FWIW, we have used <code>rustls</code> in <a href=\"https://github.com/enarx/enarx\">https://github.com/enarx/enarx</a> to provide transparent TLS to guests by wrapping the wasmtime WASI TCP traits and it was perfectly sufficient for that particular use case, which seems quite related.</p>\n<p>Depending on <code>rustls</code> would be best for both compatibility and simplicity of development. Definitely would vote for depending on <code>rustls</code> instead of <code>openssl</code></p>\n<p>This would also make (perhaps eventually) static builds much easier</p>\n<p>The only drawback I see is that <code>rustls</code> has not been through the same audits as <code>openssl</code> has, but IMO that is acceptable</p>\n</blockquote>",
        "id": 346027627,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680286734
    },
    {
        "content": "<p>rvolosatovs edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492408406\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<blockquote>\n<p>I am a bit stumped on how to fix this.</p>\n<p>To maximize linux libc compatibility, we perform our linux release builds on centos 7 (<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/ci/docker/x86_64-linux/Dockerfile?rgh-link-date=2023-03-31T17%3A57%3A37Z\"><code>main</code>/ci/docker/x86_64-linux/Dockerfile</a>). If we were to install the default libssl from centos 7 in the builder, it would mean all of our wasmtime linux users would need openssl 1.0.2 installed, which has been out of support since the start of 2020, so that isn't an acceptable solution.</p>\n<p>I don't know enough about the linux and openssl ecosystem to know what minimum version is acceptable, but clearly it reduce our binary compatibility to take on this dep. I also don't know if there are any knobs we can tweak in the build to lazily load the openssl dylib, so users are opting in to needing it by passing the <code>--wasi-modules=experimental-wasi-http</code> flag.</p>\n<p>Finally, I don't know if there are alternatives we can swap in for needing openssl on linux. I am aware that <code>rustls</code> exists, but I don't know if it is a complete alternative. I'll ask some of my colleagues who have spent more time in this space.</p>\n</blockquote>\n<p>FWIW, we have used <code>rustls</code> in <a href=\"https://github.com/enarx/enarx\">https://github.com/enarx/enarx</a> to provide transparent TLS to guests by wrapping the wasmtime WASI TCP traits and it was perfectly sufficient for that particular use case (both incoming and outbound), which seems quite related.</p>\n<p>Depending on <code>rustls</code> would be best for both compatibility and simplicity of development. Definitely would vote for depending on <code>rustls</code> instead of <code>openssl</code></p>\n<p>This would also make (perhaps eventually) static builds much easier</p>\n<p>The only drawback I see is that <code>rustls</code> has not been through the same audits as <code>openssl</code> has, but IMO that is acceptable</p>\n</blockquote>",
        "id": 346027948,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680286831
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492423584\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Thanks, I asked around and we don't use rustls inside fastly for reasons that aren't relevant to this case. @brendandburns are you up for switching things to use rustls? I can do whatever supply chain audits that requires as soon as we know which crates it will take.</p>\n<p>I guess it is a good time to rename the <code>wasi-http</code> crate to <code>wasmtime-wasi-http</code> in this PR since we'll be squeaking in before the release is cut next week.</p>\n</blockquote>",
        "id": 346030262,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680287525
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492429600\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I was just told we use rustls in <a href=\"https://github.com/fastly/viceroy\">https://github.com/fastly/viceroy</a> and it has worked great for that use case.</p>\n</blockquote>",
        "id": 346031245,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680287864
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492574122\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I will try switching to <code>rustls</code> I believe that it should be a pretty easy switch. I have a commit for the rename queued up also, so I will add that to this PR too.</p>\n</blockquote>",
        "id": 346050884,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680294496
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1492628300\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey this is switched to <code>rustls</code> and the rename (and a few minor cleanups) are added also.</p>\n<p>Please take another look. I think you may have to vet a couple more packages :(</p>\n</blockquote>",
        "id": 346059390,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680297879
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1493449134\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I'm not a license lawyer at all but it appears the config our team selected for cargo-deny doesn't permit the use of <code>webpki-roots</code>:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160\">https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160</a><br>\nCould we swap it out to use <a href=\"https://github.com/rustls/rustls-native-certs\">https://github.com/rustls/rustls-native-certs</a> instead?</p>\n</blockquote>",
        "id": 346417742,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680472582
    },
    {
        "content": "<p>pchickey edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1493449134\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I'm not a license lawyer at all but it appears the config our team selected for cargo-deny doesn't permit the use of <code>webpki-roots</code>:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160\">https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160</a><br>\nCould we swap it out to use <a href=\"https://github.com/rustls/rustls-native-certs\">https://github.com/rustls/rustls-native-certs</a> instead?</p>\n<p>There is a related warning about <code>ring</code>, but it appears from the license file that it contains code with MIT, ISC, and the OpenSSL license <a href=\"https://github.com/briansmith/ring/blob/main/LICENSE\">https://github.com/briansmith/ring/blob/main/LICENSE</a>. The only one there we don't currently permit is OpenSSL. I will have to seek guidance from the Bytecode Alliance TSC or board to see if we can allow that.</p>\n</blockquote>",
        "id": 346418222,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680472996
    },
    {
        "content": "<p>pchickey edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1493449134\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I'm not a license lawyer at all but it appears the config our team selected for cargo-deny doesn't permit the use of <code>webpki-roots</code>:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160\">https://github.com/bytecodealliance/wasmtime/actions/runs/4579627092/jobs/8087593223?pr=5929#step:5:160</a><br>\nCould we swap it out to use <a href=\"https://github.com/rustls/rustls-native-certs\">https://github.com/rustls/rustls-native-certs</a> instead?</p>\n<p>There is a related warning about <code>ring</code>, but it appears from the license file that it contains code with MIT, ISC, and the OpenSSL license <a href=\"https://github.com/briansmith/ring/blob/main/LICENSE\">https://github.com/briansmith/ring/blob/main/LICENSE</a>. The only one there we don't currently permit is OpenSSL. I will have to seek guidance from the Bytecode Alliance TSC or board to see if we can allow that, cc @tschneidereit @ricochet @fitzgen </p>\n</blockquote>",
        "id": 346418233,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680473020
    },
    {
        "content": "<p>tschneidereit <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1493454356\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>If our cargo deny config doesn't accept MPL I'd argue we should change it. The MPL 2.0 is one of the most well designed and carefully legally vetted licenses out there, and has all the key properties we need, in particular only per-file copyleft and a patent grant</p>\n</blockquote>",
        "id": 346419821,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680474239
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1495089732\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@brendandburns please merge <code>main</code> and this should pass CI, fingers crossed</p>\n</blockquote>",
        "id": 346693532,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680562579
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496326630\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey thanks, rebased on <code>main</code> this looks like it's ready to go (again :))</p>\n</blockquote>",
        "id": 346923213,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680628475
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496456345\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey I missed the rename in <code>scripts/publish.rs</code> so this got bounced out of the queue. </p>\n<p>This is now fixed, hopefully it will pass the merge queue this time...</p>\n</blockquote>",
        "id": 346946349,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680634867
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496689481\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Unfortunately, it appears <code>ring</code> does not support riscv64. I think we will have to juggle some cargo feature flags around to disable including the <code>wasmtime-wasi-http</code> crate into <code>wasmtime-cli</code> on that platform.</p>\n<p>Also, I just learned that you can use the magic string <code>prtest:full</code> in a commit message, and github will run the complete CI instead of just the automatically-estimated subset. That will at least get these issues to show up more eagerly, rather than waiting to enter the main merge queue.</p>\n</blockquote>",
        "id": 346983198,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680648094
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496835783\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey ok, I will see about flipping the feature flags the right way (and thanks for the tip on the prtest:full, that will definitely enable quicker iteration.</p>\n</blockquote>",
        "id": 347007801,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680661914
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496872497\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey I conditionalized tls to disable it on <code>riscv64gc</code></p>\n<p>I tried the <code>prtest:full</code> thing but it didn't seem to work for me, maybe I did it wrong...</p>\n<p>Anyhow, perhaps we can give this another try? If there's a way for me to trigger the full test runs w/o you adding it to the merge queue, let me know what I need to change in my commit message.</p>\n<p>Thanks!</p>\n</blockquote>",
        "id": 347013064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680665390
    },
    {
        "content": "<p>brendandburns edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496872497\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey I conditionalized tls to disable it on <code>riscv64gc</code></p>\n<p>~I tried the <code>prtest:full</code> thing but it didn't seem to work for me, maybe I did it wrong...~</p>\n<p>~Anyhow, perhaps we can give this another try? If there's a way for me to trigger the full test runs w/o you adding it to the merge queue, let me know what I need to change in my commit message.~</p>\n<p>Turns out the gh status was just cached and lagging, <code>prtest:full</code> appears to work correctly.</p>\n<p>Turns out that <code>ring</code> doesn't work on <code>s390x</code> either, so I conditionalized that also. We may want to investigate how we can go back to native SSL, but that's for another PR...<br>\n</p>\n</blockquote>",
        "id": 347013559,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680665688
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496900371\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>cc @pchickey </p>\n<p>Ok, next issue hit:</p>\n<p>The <code>wasmtime::component::bindgen!</code> macro expects a folder named <code>wit</code> in the same directory as the <code>Cargo.toml</code></p>\n<p>The challenge is that if we want to pull the <code>wasi-http</code> repository in as a git submodule, then the directory structure is messed up, so I used a symbolic link to link <code>wit</code> -&gt; <code>wasi-http/wit</code> but it looks like those symbolic links don't work properly for Windows.</p>\n<p>I can get rid of the git submodule, and just check in the <code>wit</code> files directly into this repo, it will make it a little more annoying to keep the wit files in-sync but it's do-able.</p>\n<p>Let me know what you think.</p>\n<p>`</p>\n</blockquote>",
        "id": 347018462,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680668783
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496901912\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>It looks like _maybe_ setting <code>git config --global core.symlinks true</code> in our builds would fix things? But I'm not certain where those builds are configured, I can't seem to find them in <code>main.yml</code></p>\n</blockquote>",
        "id": 347018692,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680668962
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1496915598\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>Is it possible to modify the macro to have a configurable path? I think we'd probably prefer that over most any directory-structure or build-time hack (symlinks, copying files, or the like).</p>\n</blockquote>",
        "id": 347021228,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680670485
    },
    {
        "content": "<p>eduardomourar <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1497007469\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>I believe the macro does accept a path property and you can check it here: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/component-macro/tests/codegen.rs\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/component-macro/tests/codegen.rs</a></p>\n</blockquote>",
        "id": 347038249,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680677725
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1497530793\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@eduardomourar thanks for the pointer (I don't think that's documented anywhere :() I updated this to use <code>path</code> and I removed the symlink.</p>\n<p><em>crosses fingers</em></p>\n</blockquote>",
        "id": 347153535,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680702971
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1497885388\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p>@pchickey This passed complete CI, but it needed a rebase. I'm pretty sure that it will pass the merge queue this time.</p>\n<p>Thanks for the patience!</p>\n</blockquote>",
        "id": 347218810,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680716932
    },
    {
        "content": "<p>brendandburns <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929#issuecomment-1498191063\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/5929\">issue #5929</a>:</p>\n<blockquote>\n<p><span aria-label=\"clink\" class=\"emoji emoji-1f942\" role=\"img\" title=\"clink\">:clink:</span> <span aria-label=\"confetti\" class=\"emoji emoji-1f38a\" role=\"img\" title=\"confetti\">:confetti:</span> <span aria-label=\"clink\" class=\"emoji emoji-1f942\" role=\"img\" title=\"clink\">:clink:</span> </p>\n<p>Thanks for the patience here, I'll send in some follow-on PRs.</p>\n</blockquote>",
        "id": 347257709,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1680730524
    }
]