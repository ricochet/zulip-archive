[
    {
        "content": "<p>teapotd <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1187#issuecomment-628416885\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1187\">Issue #1187</a>:</p>\n<blockquote>\n<p>I'll look into this.</p>\n</blockquote>",
        "id": 197509998,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1589437636
    },
    {
        "content": "<p>abrown closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1187\">Issue #1187</a>:</p>\n<blockquote>\n<p>&lt;!-- Please try to describe precisely what you would like to do in Cranelift and/or<br>\nexpect from it. You can answer the questions below if they're relevant and<br>\ndelete this text before submitting. Thanks for opening an issue! --&gt;</p>\n<h4>Feature</h4>\n<p>&lt;!-- What is the feature or code improvement you would like to do in Cranelift? --&gt;<br>\nAs discussed in <a href=\"https://github.com/WebAssembly/simd/issues/192\">https://github.com/WebAssembly/simd/issues/192</a>, the Wasm SIMD <code>bitselect</code> instruction could be lowered to one of the x86 <code>BLEND*</code> family of instructions instead using 3-4 instructions.</p>\n<h4>Benefit</h4>\n<p>&lt;!-- What is the value of adding this in Cranelift? --&gt;<br>\nPotentially faster code, smaller code size.</p>\n<h4>Implementation</h4>\n<p>&lt;!-- Do you have an implementation plan, and/or ideas for data structures or algorithms to use? --&gt;<br>\nIf we know that the <code>bitselect</code> control mask value comes from a comparison instruction then, for each lane, all of the bits will be either 0s or 1s. This allows us to use a <code>BLEND*</code> instruction on x86, since the ISA has no bit-level selection like ARM's <code>VBSL</code>.</p>\n<h4>Alternatives</h4>\n<p>&lt;!-- Have you considered alternative implementations? If so, how are they better or worse than your proposal? --&gt;<br>\n<a href=\"https://github.com/WebAssembly/simd/issues/192\">https://github.com/WebAssembly/simd/issues/192</a> also proposed making this type of information explicit in the Wasm SIMD spec by having comparisons return a mask type that would allow following instructions to make the optimization above without looking up the control mask origin and through function calls. Unfortunately, this is not likely to happen soon--<a href=\"https://github.com/WebAssembly/simd/issues/192#issuecomment-589869555\">\"a lot of work\"</a>.</p>\n</blockquote>",
        "id": 199234247,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1590807192
    }
]