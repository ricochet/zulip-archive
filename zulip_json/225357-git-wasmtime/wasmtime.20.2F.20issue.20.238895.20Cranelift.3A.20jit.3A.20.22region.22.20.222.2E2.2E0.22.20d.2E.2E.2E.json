[
    {
        "content": "<p><a href=\"https://github.com/FrankReh\">FrankReh</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895\">Issue #8895</a>.</p>",
        "id": 448591643,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1719922564
    },
    {
        "content": "<p><a href=\"https://github.com/FrankReh\">FrankReh</a> added the cranelift label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895\">Issue #8895</a>.</p>",
        "id": 448591644,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1719922564
    },
    {
        "content": "<p>FrankReh opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895\">issue #8895</a>:</p>\n<blockquote>\n<p><code>region</code> 2.2.0 is from four years ago. Don't know if it was intended to compile on OpenBSD back then but it doesn't today.</p>\n<p>The most recent version is 3.0.2 and it does compile for OpenBSD 7.5. But some things about the API have changed and trying to call <code>cargo test --release</code> on <code>wasmtime</code> fails to compile:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">jit</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">110.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">frank</span><span class=\"o\">/</span><span class=\"n\">forks</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">jit</span><span class=\"p\">)</span>\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0308</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">mismatched</span><span class=\"w\"> </span><span class=\"n\">types</span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">cranelift</span><span class=\"o\">/</span><span class=\"n\">jit</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">memory</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"p\">:</span><span class=\"mi\">45</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">alloc_size</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">region</span><span class=\"p\">::</span><span class=\"n\">page</span><span class=\"p\">::</span><span class=\"n\">ceil</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">);</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                          </span><span class=\"o\">------------------</span><span class=\"w\"> </span><span class=\"o\">^^^^</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                          </span><span class=\"o\">|</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                          </span><span class=\"n\">arguments</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">incorrect</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">expected</span><span class=\"w\"> </span><span class=\"n\">raw</span><span class=\"w\"> </span><span class=\"n\">pointer</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span>\n<span class=\"w\">                     </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">function</span><span class=\"w\"> </span><span class=\"n\">defined</span><span class=\"w\"> </span><span class=\"n\">here</span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">frank</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">region</span><span class=\"o\">-</span><span class=\"mf\">3.0.2</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">page</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">54</span><span class=\"p\">:</span><span class=\"mi\">8</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">54</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">ceil</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">address</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">        </span><span class=\"o\">^^^^</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0308</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">mismatched</span><span class=\"w\"> </span><span class=\"n\">types</span>\n<span class=\"w\">   </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">cranelift</span><span class=\"o\">/</span><span class=\"n\">jit</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">memory</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">40</span><span class=\"p\">:</span><span class=\"mi\">27</span>\n<span class=\"w\">    </span><span class=\"o\">|</span>\n<span class=\"mi\">40</span><span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">MmapMut</span><span class=\"p\">::</span><span class=\"n\">map_anon</span><span class=\"p\">(</span><span class=\"n\">alloc_size</span><span class=\"p\">).</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"o\">|</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">mmap</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"o\">-----------------</span><span class=\"w\"> </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"o\">|</span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">         </span><span class=\"n\">arguments</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">incorrect</span>\n<span class=\"w\">    </span><span class=\"o\">|</span>\n<span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"nc\">expected</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span>\n<span class=\"w\">            </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"n\">raw</span><span class=\"w\"> </span><span class=\"n\">pointer</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">associated</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">defined</span><span class=\"w\"> </span><span class=\"n\">here</span>\n<span class=\"w\">   </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">frank</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">index</span><span class=\"p\">.</span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"o\">-</span><span class=\"mi\">6</span><span class=\"n\">f17d22bba15001f</span><span class=\"o\">/</span><span class=\"n\">memmap2</span><span class=\"o\">-</span><span class=\"mf\">0.2.3</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">658</span><span class=\"p\">:</span><span class=\"mi\">12</span>\n<span class=\"w\">    </span><span class=\"o\">|</span>\n<span class=\"mi\">658</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">map_anon</span><span class=\"p\">(</span><span class=\"n\">length</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kt\">usize</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">MmapMut</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">            </span><span class=\"o\">^^^^^^^^</span>\n\n<span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0308</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">mismatched</span><span class=\"w\"> </span><span class=\"n\">types</span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">cranelift</span><span class=\"o\">/</span><span class=\"n\">jit</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">memory</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">46</span><span class=\"p\">:</span><span class=\"mi\">22</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">46</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">                 </span><span class=\"n\">len</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">alloc_size</span><span class=\"p\">,</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                      </span><span class=\"o\">^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"w\">   </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"nc\">expected</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"kt\">usize</span><span class=\"err\">`</span>\n<span class=\"w\">           </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"n\">raw</span><span class=\"w\"> </span><span class=\"n\">pointer</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"err\">`</span>\n</code></pre></div>\n</blockquote>",
        "id": 448591647,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1719922566
    },
    {
        "content": "<p>FrankReh <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895#issuecomment-2203026155\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895\">issue #8895</a>:</p>\n<blockquote>\n<p>The change may be as simple as changing the type. Seems to be what occurred in the 02a1d481 commit to <code>region</code>.</p>\n</blockquote>",
        "id": 448593350,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1719923007
    },
    {
        "content": "<p>FrankReh <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895#issuecomment-2204488439\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8895\">issue #8895</a>:</p>\n<blockquote>\n<p>This seems to make the compiler happy. Still working out other test issues on OpenBSD so am not sure.</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">-        let alloc_size = region::page::ceil(size);</span>\n<span class=\"gi\">+        let alloc_size = region::page::ceil(size as *const ()) as usize;</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 448706918,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1719956045
    }
]