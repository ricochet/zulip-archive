[
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<p>I used <a href=\"https://github.com/bytecodealliance/wit-deps\">https://github.com/bytecodealliance/wit-deps</a> to populate the <code>wit/deps</code> directories, I checked in the corresponding <code>deps.toml</code> and <code>deps.lock</code> files for future <code>wit-deps update</code> usage, but I did not add a dependency on the tool (yet?) by either <code>build.rs</code> integration or direct binary usage like was requested in <a href=\"https://github.com/bytecodealliance/preview2-prototyping/pull/136\">https://github.com/bytecodealliance/preview2-prototyping/pull/136</a> earlier</p>\n<p>I also did not touch <code>crates/wasi/wit/deps</code> other than <code>preview</code>, since package is using dependency versions, which are different from upstream</p>\n<ul>\n<li>update outdated WIT files</li>\n<li>move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code>, since <code>preview</code> package is the WASI package</li>\n<li>fix <code>cargo vendor</code> use cases (downstream crates utilizing Wasmtime via <code>cargo vendor</code>) by ensuring that all WIT-using crates are self-contained</li>\n<li>use consistent naming and location scheme for dependencies (e.g. <code>deps/cli-base</code> for <code>wasi:cli-base</code>, just like <code>deps/io</code> is used for <code>wasi:io</code>)</li>\n</ul>\n</blockquote>",
        "id": 362553652,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685561464
    },
    {
        "content": "<p><strong>rvolosatovs</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a> as ready for review.</p>",
        "id": 362553945,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685561552
    },
    {
        "content": "<p><strong>rvolosatovs</strong> requested <a href=\"https://github.com/pchickey\">pchickey</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362553955,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685561553
    },
    {
        "content": "<p><strong>rvolosatovs</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362553956,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685561553
    },
    {
        "content": "<p><strong>rvolosatovs</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362702752,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685615348
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362702755,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685615348
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n</blockquote>",
        "id": 362703187,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685615418
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n<p>To update dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>To \"lock\" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"w\"> </span><span class=\"n\">lock</span>\n</code></pre></div>\n<p>Example of a lock operation:</p>\n<p>Diff like:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div>\n<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gh\">index f2ad0e1e5..475c51d56 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gh\">index 5c1e9d2f8..7897bb2dd 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>\n<span class=\"gh\">index 06e56aff9..55ae6d181 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps.lock</span>\n<span class=\"gu\">@@ -10,8 +10,8 @@ sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"w\"> </span>path = \"filesystem\"\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>url = \"https://github.com/WebAssembly/wasi-http/archive/main.tar.gz\"\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 362704882,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685615812
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362705129,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685615871
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362715062,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685617952
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 new dependency, so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href=\"https://github.com/bytecodealliance/wit-deps\">https://github.com/bytecodealliance/wit-deps</a> as a binary directly</p>\n<p>To update dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>To \"lock\" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">lock</span>\n</code></pre></div>\n<p>Example of a lock operation:</p>\n<p>Diff like:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div>\n<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gh\">index f2ad0e1e5..475c51d56 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gh\">index 5c1e9d2f8..7897bb2dd 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>\n<span class=\"gh\">index 06e56aff9..55ae6d181 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps.lock</span>\n<span class=\"gu\">@@ -10,8 +10,8 @@ sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"w\"> </span>path = \"filesystem\"\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>url = \"https://github.com/WebAssembly/wasi-http/archive/main.tar.gz\"\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 362715743,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685618099
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href=\"https://github.com/bytecodealliance/wit-deps\">https://github.com/bytecodealliance/wit-deps</a> as a binary directly</p>\n<p>To update dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>To \"lock\" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">lock</span>\n</code></pre></div>\n<p>Example of a lock operation:</p>\n<p>Diff like:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div>\n<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gh\">index f2ad0e1e5..475c51d56 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gh\">index 5c1e9d2f8..7897bb2dd 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>\n<span class=\"gh\">index 06e56aff9..55ae6d181 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps.lock</span>\n<span class=\"gu\">@@ -10,8 +10,8 @@ sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"w\"> </span>path = \"filesystem\"\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>url = \"https://github.com/WebAssembly/wasi-http/archive/main.tar.gz\"\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 362715858,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685618128
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href=\"https://github.com/bytecodealliance/wit-deps\">https://github.com/bytecodealliance/wit-deps</a> as a binary directly (see <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486/commits/d6d6b1c633ac9469e71f7c3877fc2ba52d4368bf\">https://github.com/bytecodealliance/wasmtime/pull/6486/commits/d6d6b1c633ac9469e71f7c3877fc2ba52d4368bf</a>)</p>\n<p>To update dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>To \"lock\" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">lock</span>\n</code></pre></div>\n<p>Example of a lock operation:</p>\n<p>Diff like:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div>\n<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gh\">index f2ad0e1e5..475c51d56 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gh\">index 5c1e9d2f8..7897bb2dd 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>\n<span class=\"gh\">index 06e56aff9..55ae6d181 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps.lock</span>\n<span class=\"gu\">@@ -10,8 +10,8 @@ sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"w\"> </span>path = \"filesystem\"\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>url = \"https://github.com/WebAssembly/wasi-http/archive/main.tar.gz\"\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 362716033,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685618165
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 362716244,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685618215
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>Refs #6390</p>\n<ul>\n<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>\n<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>\n<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>\n<li>Sync dependencies with upstream</li>\n<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>\n<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>\n</ul>\n<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href=\"https://github.com/bytecodealliance/wit-deps\">https://github.com/bytecodealliance/wit-deps</a> as a binary directly (see <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486/commits/b22c571b911c1bbdd2d9356d72de18606d3e08ce\">https://github.com/bytecodealliance/wasmtime/pull/6486/commits/b22c571b911c1bbdd2d9356d72de18606d3e08ce</a>)</p>\n<p>To update dependencies:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>To \"lock\" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">manifest</span><span class=\"o\">-</span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">deps</span><span class=\"o\">/</span><span class=\"n\">Cargo</span><span class=\"p\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">lock</span>\n</code></pre></div>\n<p>Example of a lock operation:</p>\n<p>Diff like:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div>\n<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gh\">index f2ad0e1e5..475c51d56 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gh\">index 5c1e9d2f8..7897bb2dd 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>\n<span class=\"gu\">@@ -7,8 +7,8 @@ sha256 = \"e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff\"</span>\n<span class=\"w\"> </span>sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62\"\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>sha256 = \"3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1\"\n<span class=\"gh\">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>\n<span class=\"gh\">index 06e56aff9..55ae6d181 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps.lock</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps.lock</span>\n<span class=\"gu\">@@ -10,8 +10,8 @@ sha512 = \"62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>\n\n<span class=\"w\"> </span>[filesystem]\n<span class=\"w\"> </span>path = \"filesystem\"\n<span class=\"gd\">-sha256 = \"2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9\"</span>\n<span class=\"gd\">-sha512 = \"4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5\"</span>\n<span class=\"gi\">+sha256 = \"6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a\"</span>\n<span class=\"gi\">+sha512 = \"c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120\"</span>\n\n<span class=\"w\"> </span>[http]\n<span class=\"w\"> </span>url = \"https://github.com/WebAssembly/wasi-http/archive/main.tar.gz\"\n<span class=\"gh\">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gh\">index 930f37567..3a60fe5c4 100644</span>\n<span class=\"gd\">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gi\">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>\n<span class=\"gu\">@@ -1,5 +1,6 @@</span>\n<span class=\"w\"> </span>package wasi:filesystem\n\n<span class=\"gi\">+</span>\n<span class=\"w\"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI\n<span class=\"w\"> </span>/// programs that access their files on their existing filesystems, without\n<span class=\"w\"> </span>/// significant overhead.\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 362716313,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685618232
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 363048255,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1685712063
    },
    {
        "content": "<p>rvolosatovs updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>.</p>",
        "id": 366457016,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1686827495
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>(I have removed the old description, since it's no longer relevant)<br>\nDuplicate WIT dependencies of <code>wasi</code> crate in <code>wasi-preview1-component-adapter</code> to avoid using relative paths in <code>wit-bindgen</code> invocations fixing downstream dependencies on <code>wasi-preview1-component-adapter</code> using <code>cargo vendor</code></p>\n</blockquote>",
        "id": 366458415,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1686827777
    },
    {
        "content": "<p>rvolosatovs edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/6486\">PR #6486</a>:</p>\n<blockquote>\n<p>(I have removed the old description, since it's no longer relevant)<br>\nDuplicate WIT dependencies of <code>wasi</code> crate in <code>wasi-preview1-component-adapter</code> to avoid using relative paths in <code>wit-bindgen</code> invocations fixing downstream dependencies on <code>wasi-preview1-component-adapter</code> using <code>cargo vendor</code></p>\n<p>This is checked in CI, but developers are free to use whichever tool they chose to achieve this. Running <code>wit-deps lock</code> from <code>crates/wasi-preview1-component-adapter</code> is one way to do it </p>\n</blockquote>",
        "id": 366458892,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1686827864
    }
]