[
    {
        "content": "<p>elliottt opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<h3><code>.clif</code> Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">f13</span><span class=\"p\">(</span><span class=\"n\">f32x4</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">i32x4</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">block0</span><span class=\"p\">(</span><span class=\"n\">v0</span>: <span class=\"nc\">f32x4</span><span class=\"p\">)</span>:\n  <span class=\"nc\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fcvt_to_uint</span><span class=\"p\">.</span><span class=\"n\">i32x4</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Compiling this causes an unreachable case to be reached: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804\">https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804</a></p>\n<h3>Expected Results</h3>\n<p>Either an error or a successful compilation.</p>\n<h3>Actual Results</h3>\n<p>Panic</p>\n<h3>Versions and Environment</h3>\n<p>Cranelift version or commit: 0c2e0494bdc63518962ad2773abc13d7d1d1dd8a</p>\n<p>Operating system: linux</p>\n<p>Architecture: x86_64<br>\n</p>\n</blockquote>",
        "id": 293001418,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660248757
    },
    {
        "content": "<p>elliottt labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<h3><code>.clif</code> Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">f13</span><span class=\"p\">(</span><span class=\"n\">f32x4</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">i32x4</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">block0</span><span class=\"p\">(</span><span class=\"n\">v0</span>: <span class=\"nc\">f32x4</span><span class=\"p\">)</span>:\n  <span class=\"nc\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fcvt_to_uint</span><span class=\"p\">.</span><span class=\"n\">i32x4</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Compiling this causes an unreachable case to be reached: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804\">https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804</a></p>\n<h3>Expected Results</h3>\n<p>Either an error or a successful compilation.</p>\n<h3>Actual Results</h3>\n<p>Panic</p>\n<h3>Versions and Environment</h3>\n<p>Cranelift version or commit: 0c2e0494bdc63518962ad2773abc13d7d1d1dd8a</p>\n<p>Operating system: linux</p>\n<p>Architecture: x86_64<br>\n</p>\n</blockquote>",
        "id": 293001419,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660248757
    },
    {
        "content": "<p>elliottt labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<h3><code>.clif</code> Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">f13</span><span class=\"p\">(</span><span class=\"n\">f32x4</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">i32x4</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">block0</span><span class=\"p\">(</span><span class=\"n\">v0</span>: <span class=\"nc\">f32x4</span><span class=\"p\">)</span>:\n  <span class=\"nc\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fcvt_to_uint</span><span class=\"p\">.</span><span class=\"n\">i32x4</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Compiling this causes an unreachable case to be reached: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804\">https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804</a></p>\n<h3>Expected Results</h3>\n<p>Either an error or a successful compilation.</p>\n<h3>Actual Results</h3>\n<p>Panic</p>\n<h3>Versions and Environment</h3>\n<p>Cranelift version or commit: 0c2e0494bdc63518962ad2773abc13d7d1d1dd8a</p>\n<p>Operating system: linux</p>\n<p>Architecture: x86_64<br>\n</p>\n</blockquote>",
        "id": 293001420,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660248757
    },
    {
        "content": "<p>jlb6740 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693#issuecomment-1212557254\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<p>Hi @elliottt . Does this unreachable case get hit before patch <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4684\">https://github.com/bytecodealliance/wasmtime/pull/4684</a> ? <br>\nI have not tried, but the comments here say this unreachable is guarded by both the Opcode::FcvtToUnit and Opcode::FcvtToSint. It looks like 4864 removed one of those branches and if so I wondering if that patch (removing that code) introduced the possibility of this fall through?</p>\n</blockquote>",
        "id": 293019044,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660256769
    },
    {
        "content": "<p>elliottt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693#issuecomment-1212567878\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<p>I hit the panic at <code>c4fd6a95da582a4a21802d981062c9202746ef19</code>, which is the direct parent of #4684. This panic is from <code>fcvt_to_uint</code>, vs <code>fcvt_from_uint</code> which was ported to ISLE in #4684.</p>\n</blockquote>",
        "id": 293021277,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660257997
    },
    {
        "content": "<p>elliottt edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693#issuecomment-1212567878\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<p>I hit the panic at c4fd6a95da582a4a21802d981062c9202746ef19, which is the direct parent of #4684. This panic is from <code>fcvt_to_uint</code>, vs <code>fcvt_from_uint</code> which was ported to ISLE in #4684.</p>\n</blockquote>",
        "id": 293021870,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1660258008
    },
    {
        "content": "<p>jlb6740 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693#issuecomment-1223288319\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<p>Hi @elliottt. I went to try and reproduce this issue and noticed that I was seeing the unreachable code but not where this original bug filing notes it. Looks like code has changed with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4704\">https://github.com/bytecodealliance/wasmtime/pull/4704</a>. Was that patch supposed to resolve this issue? I can reproduce still with this file:</p>\n<blockquote>\n<p>test run<br>\ntarget x86_64</p>\n<p>function %f13(f32x4) -&gt; i32x4 {<br>\nblock0(v0: f32x4):<br>\n  v1 = fcvt_to_uint.i32x4 v0<br>\n  return v1<br>\n}</p>\n<p>; run: %f13([0x1.0 0.0 0x1.0 0x75bcd18.0]) == [1 0 1 123456789])</p>\n</blockquote>\n<p>run with: </p>\n<p>RUST_BACKTRACE=1 ./target/debug/clif-util test cranelift/filetests/filetests/runtests/test.clif</p>\n</blockquote>",
        "id": 294779304,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661208821
    },
    {
        "content": "<p>jlb6740 deleted a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693#issuecomment-1223288319\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<p>Hi @elliottt. I went to try and reproduce this issue and noticed that I was seeing the unreachable code but not where this original bug filing notes it. Looks like code has changed with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/4704\">https://github.com/bytecodealliance/wasmtime/pull/4704</a>. Was that patch supposed to resolve this issue? I can reproduce still with this file:</p>\n<blockquote>\n<p>test run<br>\ntarget x86_64</p>\n<p>function %f13(f32x4) -&gt; i32x4 {<br>\nblock0(v0: f32x4):<br>\n  v1 = fcvt_to_uint.i32x4 v0<br>\n  return v1<br>\n}</p>\n<p>; run: %f13([0x1.0 0.0 0x1.0 0x75bcd18.0]) == [1 0 1 123456789])</p>\n</blockquote>\n<p>run with: </p>\n<p>RUST_BACKTRACE=1 ./target/debug/clif-util test cranelift/filetests/filetests/runtests/test.clif</p>\n</blockquote>",
        "id": 294781609,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661209932
    },
    {
        "content": "<p>abrown closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4693\">issue #4693</a>:</p>\n<blockquote>\n<h3><code>.clif</code> Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">f13</span><span class=\"p\">(</span><span class=\"n\">f32x4</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">i32x4</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"n\">block0</span><span class=\"p\">(</span><span class=\"n\">v0</span>: <span class=\"nc\">f32x4</span><span class=\"p\">)</span>:\n  <span class=\"nc\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fcvt_to_uint</span><span class=\"p\">.</span><span class=\"n\">i32x4</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Compiling this causes an unreachable case to be reached: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804\">https://github.com/bytecodealliance/wasmtime/blob/380db48ce6b7a754025e33bde02a8d14897376f3/cranelift/codegen/src/isa/x64/lower.rs#L800-L804</a></p>\n<h3>Expected Results</h3>\n<p>Either an error or a successful compilation.</p>\n<h3>Actual Results</h3>\n<p>Panic</p>\n<h3>Versions and Environment</h3>\n<p>Cranelift version or commit: 0c2e0494bdc63518962ad2773abc13d7d1d1dd8a</p>\n<p>Operating system: linux</p>\n<p>Architecture: x86_64<br>\n</p>\n</blockquote>",
        "id": 295936088,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661787643
    }
]