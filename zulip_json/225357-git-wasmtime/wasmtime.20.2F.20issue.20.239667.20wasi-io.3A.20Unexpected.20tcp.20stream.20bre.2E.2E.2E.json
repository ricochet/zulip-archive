[
    {
        "content": "<p>Heap-Hop edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9667\">issue #9667</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/wasi/src/tcp.rs#L719-L723\">https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/wasi/src/tcp.rs#L719-L723</a></p>\n<p>Returning <code>0</code> for <code>std::io::ErrorKind::WouldBlock</code> causes downstream to interpret it as a closed stream, see: <br>\n<a href=\"https://github.com/yoshuawuyts/wstd/issues/25#issuecomment-2493294087\">https://github.com/yoshuawuyts/wstd/issues/25#issuecomment-2493294087</a>.<br>\n<a href=\"https://github.com/yoshuawuyts/wstd/blob/5ce367add5e7bcb569b6487453cb9ba94468dc99/src/io/copy.rs#L12\">https://github.com/yoshuawuyts/wstd/blob/5ce367add5e7bcb569b6487453cb9ba94468dc99/src/io/copy.rs#L12</a></p>\n<p>This is also found in:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/test-programs/src/bin/preview2_tcp_streams.rs#L17-L22\">https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/test-programs/src/bin/preview2_tcp_streams.rs#L17-L22</a></p>\n<p>Given that the <code>wit</code> files already include many <code>would-block</code> errors, would it make sense to extend <code>stream-error</code> to include a <code>would-block</code>?<br>\n</p>\n</blockquote>",
        "id": 484657971,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732693877
    },
    {
        "content": "<p>Heap-Hop edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9667\">issue #9667</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/wasi/src/tcp.rs#L719-L723\">https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/wasi/src/tcp.rs#L719-L723</a></p>\n<p>Returning <code>0</code> for <code>std::io::ErrorKind::WouldBlock</code> causes downstream to interpret it as a closed stream, see: <br>\n<a href=\"https://github.com/yoshuawuyts/wstd/issues/25#issuecomment-2493294087\">https://github.com/yoshuawuyts/wstd/issues/25#issuecomment-2493294087</a>.<br>\n<a href=\"https://github.com/yoshuawuyts/wstd/blob/5ce367add5e7bcb569b6487453cb9ba94468dc99/src/io/copy.rs#L12\">https://github.com/yoshuawuyts/wstd/blob/5ce367add5e7bcb569b6487453cb9ba94468dc99/src/io/copy.rs#L12</a></p>\n<p>This is also found in:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/test-programs/src/bin/preview2_tcp_streams.rs#L17-L22\">https://github.com/bytecodealliance/wasmtime/blob/67674881db5fbdbba8594feb52655aaa351a5f77/crates/test-programs/src/bin/preview2_tcp_streams.rs#L17-L22</a></p>\n<p><del>Given that the <code>wit</code> files already include many <code>would-block</code> errors, would it make sense to extend <code>stream-error</code> to include a <code>would-block</code>?</del><br>\n</p>\n</blockquote>",
        "id": 484658142,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732693953
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9667#issuecomment-2504409827\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9667\">issue #9667</a>:</p>\n<blockquote>\n<p>Thanks, it sounds like this is indeed a bug in wasmtime-wasi then. Can you create a minimal reproduction so I can work on a fix and use it as a test once we have the fix in? Something along the lines of <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/preview2_tcp_streams.rs\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/preview2_tcp_streams.rs</a></p>\n</blockquote>",
        "id": 484767188,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1732728010
    }
]