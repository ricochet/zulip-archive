[
    {
        "content": "<p>pchickey opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a> from <code>bytecodealliance:trevor/wasi-http-server</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 393293737,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695750588
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393294528,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695750818
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393328955,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695762097
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393329709,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695762340
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393540669,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695836294
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393543276,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695837353
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393543817,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695837546
    },
    {
        "content": "<p>pchickey updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393546922,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695838749
    },
    {
        "content": "<p><strong>pchickey</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a> as ready for review.</p>",
        "id": 393547034,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695838778
    },
    {
        "content": "<p><strong>pchickey</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393547037,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695838778
    },
    {
        "content": "<p><strong>pchickey</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393547039,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695838779
    },
    {
        "content": "<p><strong>pchickey</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393547040,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695838779
    },
    {
        "content": "<p>pchickey edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>:</p>\n<blockquote>\n<p>This follows up #7056 with the remaining pieces used for the wasi-http proxy world.</p>\n<p>We made a tweak to the wasi-http wit definition which was missed in the prev PR, but wasn't caught because the incoming request side was still stubbed out.</p>\n<p>A new test suite wasi-http-proxy-tests has one trivial test for this new functionality.</p>\n<p>A new cli subcommand <code>wasmtime serve [--addr SOCKADDR] proxy_component.wasm</code> runs components in the wasi-http proxy world.</p>\n<p>We make some additional filesystem and cli imports to the proxy world in both the test runner and cli subdommand because the component adapter pulls them in unconditionally. We will work on fixing that in the adapter in the future.</p>\n</blockquote>",
        "id": 393548109,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695839096
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393568234,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695847635
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393568924,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695847996
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393568993,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695848037
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393569155,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695848126
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393569372,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695848261
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393573760,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695850336
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393577319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695852443
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393578321,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695853078
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393581217,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695854950
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393588497,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695860208
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393588570,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695860258
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393589093,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695860605
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393783353,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695925810
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649482104\">PR review</a>:</p>\n<blockquote>\n<p>Looks great to me <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n<p>Small comments here and there, please feel free to defer whatever you like to either issues or future PRs.</p>\n</blockquote>",
        "id": 393784981,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926424
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649482104\">PR review</a>:</p>\n<blockquote>\n<p>Looks great to me <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n<p>Small comments here and there, please feel free to defer whatever you like to either issues or future PRs.</p>\n</blockquote>",
        "id": 393784982,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926424
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340529155\">PR review comment</a>:</p>\n<blockquote>\n<p>While you're at it mind putting <code>=</code> constraints on these as well? (works around issues with Cargo's handling of pre-releases)</p>\n</blockquote>",
        "id": 393784983,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340534110\">PR review comment</a>:</p>\n<blockquote>\n<p>Another possibility here, if you're interested,  is to model this as subcommands-as-features. The <code>wasm-tools</code> CLI does this where there's a Cargo feature for each subcommand and they're all enabled by default. That way this could be enabled with <code>cargo build --features serve</code> and <code>serve</code> would implicitly enable the component model and <code>wasi-http</code></p>\n</blockquote>",
        "id": 393784984,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340538192\">PR review comment</a>:</p>\n<blockquote>\n<p>Out of curiosity is it easy enough to have a graceful shutdown here where ctrl-c sets a flag \"please exit ASAP\"? Otherwise this looks like it cancel all pending work if it's happening during ctrl-c (in which case this probably isn't much better than avoiding installing a ctrl-c in the first place)</p>\n</blockquote>",
        "id": 393784985,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340537640\">PR review comment</a>:</p>\n<blockquote>\n<p>I think it'd be best if this had similar options to <code>wasmtime run</code>, for example <code>--allow-precompiled</code>, <code>--dir</code>, <code>--env</code>, and <code>--profile</code>. That being said I think it's also totally ok for this to be a follow-up PR too.</p>\n<p>One thing that I think should also be done is to share the code that configures WASI, e.g. processing many of the <code>-S</code> options. For example in theory <code>wasi-nn</code> and such should all be possible to enable too. That would require some refactoring, however, so perhaps best to open an issue and/or file a follow-up PR for that.</p>\n</blockquote>",
        "id": 393784986,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340541008\">PR review comment</a>:</p>\n<blockquote>\n<p>This can all be moved outside of the enclosing <code>async move</code> I think and the <code>Future</code> return could actually be just the receiver (or a boxed receiver, either way)</p>\n</blockquote>",
        "id": 393784987,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340540137\">PR review comment</a>:</p>\n<blockquote>\n<p>I think this can probably be dropped because the task doesn't return <code>Err(_)</code> anywhere</p>\n</blockquote>",
        "id": 393784988,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340534442\">PR review comment</a>:</p>\n<blockquote>\n<p>I'll leave the decision up to y'all though, I don't feel strongly either way</p>\n</blockquote>",
        "id": 393784989,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695926425
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649546497\">PR review</a>.</p>",
        "id": 393789751,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928274
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340568944\">PR review comment</a>:</p>\n<blockquote>\n<p>I like that!</p>\n</blockquote>",
        "id": 393789752,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928274
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649548674\">PR review</a>.</p>",
        "id": 393789944,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928366
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340570227\">PR review comment</a>:</p>\n<blockquote>\n<p>Actually, <code>wasi-http</code> already enables <code>component-model</code>, so we could make this only depend on <code>wasi-http</code>. However, I don't like that as much because it's not quite as declarative as the <code>serve</code> command feature.</p>\n</blockquote>",
        "id": 393789945,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928366
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649554383\">PR review</a>.</p>",
        "id": 393790528,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928627
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340573906\">PR review comment</a>:</p>\n<blockquote>\n<p>Yep, agreed. I'll do that in a follow-up PR.</p>\n</blockquote>",
        "id": 393790531,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928628
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649555793\">PR review</a>.</p>",
        "id": 393790688,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928692
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340574781\">PR review comment</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/issues/7105\">https://github.com/bytecodealliance/wasmtime/issues/7105</a></p>\n</blockquote>",
        "id": 393790689,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928693
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649558080\">PR review</a>.</p>",
        "id": 393790879,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928783
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340576347\">PR review comment</a>:</p>\n<blockquote>\n<p>Yeah, I think that should be possible: we could share some state with the running thread that we check for each iteration of the accept loop.</p>\n</blockquote>",
        "id": 393790880,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695928783
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649579840\">PR review</a>.</p>",
        "id": 393793022,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695929720
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340589815\">PR review comment</a>:</p>\n<blockquote>\n<p>I'm going to punt this to a follow-up PR, in the interest of landing this so that the resourcification work can proceed.</p>\n</blockquote>",
        "id": 393793023,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695929720
    },
    {
        "content": "<p>elliottt updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393795129,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695930673
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649609842\">PR review</a>.</p>",
        "id": 393795476,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695930811
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340607354\">PR review comment</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/issues/7107\">https://github.com/bytecodealliance/wasmtime/issues/7107</a></p>\n</blockquote>",
        "id": 393795477,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695930811
    },
    {
        "content": "<p>elliottt submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#pullrequestreview-1649690248\">PR review</a>.</p>",
        "id": 393803259,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695934294
    },
    {
        "content": "<p>elliottt created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091#discussion_r1340655212\">PR review comment</a>:</p>\n<blockquote>\n<p>Great idea! I like that this makes it so much more clear that we spawn the task and return the future that waits on the oneshot channel, rather than returning a future that does both.</p>\n</blockquote>",
        "id": 393803260,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695934294
    },
    {
        "content": "<p>elliottt has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393803733,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695934513
    },
    {
        "content": "<p>elliottt merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/7091\">PR #7091</a>.</p>",
        "id": 393820310,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1695944523
    }
]