[
    {
        "content": "<p>bjorn3 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">version_check</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.3</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">typenum</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"p\">.</span><span class=\"mf\">14.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">opaque</span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">3.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">cpufeatures</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.1</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">generic</span><span class=\"o\">-</span><span class=\"n\">array</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">14.4</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"o\">-</span><span class=\"n\">buffer</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">digest</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">sha2</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.8</span><span class=\"w\"></span>\n</code></pre></div>\n<p>This regresses compilation time by a couple of seconds and requires me to add them to the list of permitted dependencies in rustc at <a href=\"https://github.com/rust-lang/rust/blob/f8402169aaa12e7bbb9630796a8caec90a3055ca/src/tools/tidy/src/deps.rs#L236\">https://github.com/rust-lang/rust/blob/f8402169aaa12e7bbb9630796a8caec90a3055ca/src/tools/tidy/src/deps.rs#L236</a></p>\n</blockquote>",
        "id": 265189059,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639675567
    },
    {
        "content": "<p>sunfishcode <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609#issuecomment-996288110\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<p>sha2 and its dependencies already appear in the <code>PERMITTED_DEPENDENCIES</code> list. Is it valuable for cranelift to avoid dependencies that rustc itself already depends on?</p>\n</blockquote>",
        "id": 265237808,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639699459
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609#issuecomment-996472549\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<p>I'm trying to keep the dependency list as small as reasonably possible.</p>\n</blockquote>",
        "id": 265258850,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639722751
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609#issuecomment-996479454\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<p>That's definitely a good first-order principle and I share that instinct too -- but in this case I think it's worthwhile to see the context: computing a hash in the build script and checking against the manifest lets us avoid building the whole ISLE compiler, so it's replacing an even larger dependency tree.</p>\n<p>The best option w.r.t. dependency-set size is to build without any up-to-date checks at all, but that's a huge developer-friction issue if it is the default when hacking away in a local checkout. (Forget <code>rebuild-isle</code>, spend time debugging mysterious issue, discover source was never updated, etc.)</p>\n<p>One option that <em>may</em> be reasonable is to put the manifest check under an on-by-default feature (say <code>check-isle-up-to-date</code>) so that we have safety / least-surprising behavior by default, but dependents that care strongly about minimal dependencies can specify <code>default-features = false</code> and then turn back on the features they need. The crate as uploaded to <a href=\"http://crates.io\">crates.io</a> or on <code>main</code> in the git repo should always have up-to-date generated source, so skipping the checks (and thus sha512-hashing) is safe. Thoughts?</p>\n</blockquote>",
        "id": 265259741,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639723853
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609#issuecomment-996563755\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<blockquote>\n<p>One option that may be reasonable is to put the manifest check under an on-by-default feature (say check-isle-up-to-date)</p>\n</blockquote>\n<p>That sounds great!</p>\n</blockquote>",
        "id": 265271589,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639733079
    },
    {
        "content": "<p>cfallin closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3609\">issue #3609</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">version_check</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.3</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">typenum</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"p\">.</span><span class=\"mf\">14.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">opaque</span><span class=\"o\">-</span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">3.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">cpufeatures</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.1</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">generic</span><span class=\"o\">-</span><span class=\"n\">array</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">14.4</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"o\">-</span><span class=\"n\">buffer</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">digest</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.0</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">sha2</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">9.8</span><span class=\"w\"></span>\n</code></pre></div>\n<p>This regresses compilation time by a couple of seconds and requires me to add them to the list of permitted dependencies in rustc at <a href=\"https://github.com/rust-lang/rust/blob/f8402169aaa12e7bbb9630796a8caec90a3055ca/src/tools/tidy/src/deps.rs#L236\">https://github.com/rust-lang/rust/blob/f8402169aaa12e7bbb9630796a8caec90a3055ca/src/tools/tidy/src/deps.rs#L236</a></p>\n</blockquote>",
        "id": 265361495,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1639775729
    }
]