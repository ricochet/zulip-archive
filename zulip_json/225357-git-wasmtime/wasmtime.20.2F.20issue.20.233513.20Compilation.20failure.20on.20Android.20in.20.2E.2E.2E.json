[
    {
        "content": "<p>bnjbvr opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>Seems that <code>wasmtime-runtime</code> tries to use map flags that don't exist in Android:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0599</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">named</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">FIXED</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">current</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">github</span><span class=\"p\">.</span><span class=\"n\">com</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"n\">ecc6299db9ec823</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"mf\">0.31.0</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"o\">/</span><span class=\"n\">allocator</span><span class=\"o\">/</span><span class=\"n\">pooling</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">21</span>:<span class=\"mi\">63</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">             </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">FIXED</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                                               </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Could we use another way / method to decommit memory on Android? cc @sunfishcode </p>\n</blockquote>",
        "id": 261017938,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636562975
    },
    {
        "content": "<p>bnjbvr labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>Seems that <code>wasmtime-runtime</code> tries to use map flags that don't exist in Android:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0599</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">named</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">FIXED</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">current</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">github</span><span class=\"p\">.</span><span class=\"n\">com</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"n\">ecc6299db9ec823</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"mf\">0.31.0</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"o\">/</span><span class=\"n\">allocator</span><span class=\"o\">/</span><span class=\"n\">pooling</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">21</span>:<span class=\"mi\">63</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">             </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">FIXED</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                                               </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Could we use another way / method to decommit memory on Android? cc @sunfishcode </p>\n</blockquote>",
        "id": 261017939,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636562975
    },
    {
        "content": "<p>sunfishcode <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-965660597\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>It looks like Android doesn't support <code>MAP_FIXED</code>. It looks like we'll need to add a way to disable the pooling instance allocator at compile time, and have it disable on Android.<br>\n</p>\n</blockquote>",
        "id": 261040084,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636571790
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-965709538\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>I can work on putting the pooling allocator behind a feature gate that you can opt out of for Android.</p>\n</blockquote>",
        "id": 261048282,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636575307
    },
    {
        "content": "<p>peterhuene closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>Seems that <code>wasmtime-runtime</code> tries to use map flags that don't exist in Android:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0599</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">named</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">FIXED</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">current</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">local</span><span class=\"o\">/</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">github</span><span class=\"p\">.</span><span class=\"n\">com</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"n\">ecc6299db9ec823</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"mf\">0.31.0</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"o\">/</span><span class=\"n\">allocator</span><span class=\"o\">/</span><span class=\"n\">pooling</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">21</span>:<span class=\"mi\">63</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">             </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">FIXED</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                                               </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Could we use another way / method to decommit memory on Android? cc @sunfishcode </p>\n</blockquote>",
        "id": 261061098,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636581635
    },
    {
        "content": "<p>peterhuene <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-965787629\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>@bnjbvr see if disabling the <code>pooling-allocator</code> feature in the wasmtime crate helps get things building again on Android.</p>\n</blockquote>",
        "id": 261061203,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636581675
    },
    {
        "content": "<p>bnjbvr <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-968724436\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>@peterhuene yes, that fixed it, thanks a bunch! Would it make sense to do a patch release to get that fix in the stable branch? cc @tschneidereit @alexcrichton </p>\n</blockquote>",
        "id": 261477533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636970490
    },
    {
        "content": "<p>tschneidereit <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-968749789\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<blockquote>\n<p>Would it make sense to do a patch release to get that fix in the stable branch?</p>\n</blockquote>\n<p>I'll leave it to Alex to comment on that, because I can't judge all that well how much effort that'd be.</p>\n<p>I wonder if we should have (an) Android CI configuration(s) though? This seems pretty likely to regress again otherwise. @bnjbvr, would you perhaps be up for adding this to our CI setup to ensure that the builds keep working for you?</p>\n</blockquote>",
        "id": 261479985,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636972156
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-968988472\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>We don't really have a clear/crisp definition of supported targets for Wasmtime, so to me it's somewhat unclear on whether we should do a patch/etc. I don't think we can release <code>main</code> as is since it technically contains semver-breaking changes to both Cranelift and Wasmtime, but we could do a patch-release where this is backported.</p>\n<p>Ideally we would have a list of targets along the same lines as rust-lang/rust where tier 1 is tested on CI, tier 2 is \"guaranteed to build\", and tier 3 is everything else. Changes to tiers 1/2 would necessitate a patch release of some kind, so whether or not doing a release here makes sense depends on how we want to think about Android.</p>\n</blockquote>",
        "id": 261506820,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636988002
    },
    {
        "content": "<p>bnjbvr <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-969135976\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>Ok, no worries, we can point at a specific commit in a fork of Wasmtime for our embedding, it is slightly less ideal but doable (we'll likely require other fixes, like <a href=\"https://github.com/bytecodealliance/wasmtime/commit/12bfbdfaca3ecd3da95b30670df1b71fdba01be0\">https://github.com/bytecodealliance/wasmtime/commit/12bfbdfaca3ecd3da95b30670df1b71fdba01be0</a>, which otherwise seem to break debugging entirely).</p>\n<p>Definitely it would be nice to have a list of officially supported targets, for documentation and for providing stability guarantees.</p>\n</blockquote>",
        "id": 261529381,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1636996948
    },
    {
        "content": "<p>densone <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-1014921008\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>I am running into this same issue for freebsd. </p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0599</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">named</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">FIXED</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">current</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"o\">/</span><span class=\"n\">root</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">cargo</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">github</span><span class=\"p\">.</span><span class=\"n\">com</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"n\">ecc6299db9ec823</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">runtime</span><span class=\"o\">-</span><span class=\"mf\">0.31.0</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">instance</span><span class=\"o\">/</span><span class=\"n\">allocator</span><span class=\"o\">/</span><span class=\"n\">pooling</span><span class=\"o\">/</span><span class=\"n\">unix</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">21</span>:<span class=\"mi\">63</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">21</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">             </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">PRIVATE</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">rsix</span>::<span class=\"n\">io</span>::<span class=\"n\">MapFlags</span>::<span class=\"n\">FIXED</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                                               </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">associated</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">MapFlags</span><span class=\"err\">`</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 268319728,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1642457682
    },
    {
        "content": "<p>bnjbvr <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513#issuecomment-1015181579\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/3513\">issue #3513</a>:</p>\n<blockquote>\n<p>@densone Switching to the latest version of wasmtime, which is 0.33 at this time, should fix it.</p>\n</blockquote>",
        "id": 268358130,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1642494944
    }
]