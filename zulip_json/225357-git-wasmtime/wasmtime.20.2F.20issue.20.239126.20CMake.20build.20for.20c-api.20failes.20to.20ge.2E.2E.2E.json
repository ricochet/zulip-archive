[
    {
        "content": "<p><a href=\"https://github.com/dev-null-undefined\">dev-null-undefined</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">Issue #9126</a>.</p>",
        "id": 462348756,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723642896
    },
    {
        "content": "<p>dev-null-undefined opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">issue #9126</a>:</p>\n<blockquote>\n<p>Error that you get:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"n\">ifndef</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"sd\">/** * \\file wasmtime/conf.h * * \\brief Build-time defines for how the C API was built. */</span><span class=\"p\">#</span><span class=\"n\">ifndef</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"p\">#</span><span class=\"n\">define</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"c1\">// WASMTIME_FEATURE_LIST#define WASMTIME_FEATURE_PROFILING#define WASMTIME_FEATURE_WAT#define WASMTIME_FEATURE_CACHE#define WASMTIME_FEATURE_PARALLEL_COMPILATION#define WASMTIME_FEATURE_WASI#define WASMTIME_FEATURE_LOGGING/* #undef WASMTIME_FEATURE_DISABLE_LOGGING */#define WASMTIME_FEATURE_COREDUMP#define WASMTIME_FEATURE_ADDR2LINE#define WASMTIME_FEATURE_DEMANGLE#define WASMTIME_FEATURE_THREADS#define WASMTIME_FEATURE_GC#define WASMTIME_FEATURE_ASYNC#define WASMTIME_FEATURE_CRANELIFT#define WASMTIME_FEATURE_WINCH// ... if you add a line above this be sure to change the other locations// marked WASMTIME_FEATURE_LIST#if defined(WASMTIME_FEATURE_CRANELIFT) || defined(WASMTIME_FEATURE_WINCH)#define WASMTIME_FEATURE_COMPILER#endif#endif // WASMTIME_CONF_H</span>\n<span class=\"w\">      </span><span class=\"o\">|</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">11</span><span class=\"p\">,</span>\n<span class=\"w\">                 </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">193</span><span class=\"p\">,</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>Follow the steps to build wasmtime from source <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md</a></li>\n<li>Check the <code>target/c-api/include/wasmtime/conf.h</code> see that there are missing new lines</li>\n<li>Try to compile anything with the c-api</li>\n</ul>\n<h3>Versions and Environment</h3>\n<ul>\n<li>Use cmake version 3.18.4 (for example from a docker container)</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Docker\"><pre><span></span><code><span class=\"k\">FROM</span><span class=\"w\"> </span><span class=\"s\">debian:bullseye</span>\n<span class=\"k\">ARG</span><span class=\"w\"> </span>RELEASE\n\n<span class=\"k\">RUN</span><span class=\"w\"> </span>apt-get<span class=\"w\"> </span>update<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>upgrade<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>install<span class=\"w\"> </span>--no-install-recommends<span class=\"w\"> </span>--no-install-suggests<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>build-essential<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>cmake<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>git<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>curl<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>clean<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>curl<span class=\"w\"> </span>--proto<span class=\"w\"> </span><span class=\"s1\">'=https'</span><span class=\"w\"> </span>--tlsv1.2<span class=\"w\"> </span>-sSf<span class=\"w\"> </span>https://sh.rustup.rs<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sh<span class=\"w\"> </span>-s<span class=\"w\"> </span>--<span class=\"w\"> </span>-y\n</code></pre></div>\n<p>Wasmtime version or commit: v23.0.2</p>\n<p>Operating system: NixOs, but running in dockercontainer debian:bullseye</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>Managed to fix the issue by changing <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14</a></p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">- file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\")</span>\n<span class=\"gi\">+ file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\" NEWLINE_STYLE LF)</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 462348760,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723642897
    },
    {
        "content": "<p>dev-null-undefined edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">issue #9126</a>:</p>\n<blockquote>\n<p>Error that you get:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"n\">ifndef</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"sd\">/** * \\file wasmtime/conf.h * * \\brief Build-time defines for how the C API was built. */</span><span class=\"p\">#</span><span class=\"n\">ifndef</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"p\">#</span><span class=\"n\">define</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"c1\">// WASMTIME_FEATURE_LIST#define WASMTIME_FEATURE_PROFILING#define WASMTIME_FEATURE_WAT#define WASMTIME_FEATURE_CACHE#define WASMTIME_FEATURE_PARALLEL_COMPILATION#define WASMTIME_FEATURE_WASI#define WASMTIME_FEATURE_LOGGING/* #undef WASMTIME_FEATURE_DISABLE_LOGGING */#define WASMTIME_FEATURE_COREDUMP#define WASMTIME_FEATURE_ADDR2LINE#define WASMTIME_FEATURE_DEMANGLE#define WASMTIME_FEATURE_THREADS#define WASMTIME_FEATURE_GC#define WASMTIME_FEATURE_ASYNC#define WASMTIME_FEATURE_CRANELIFT#define WASMTIME_FEATURE_WINCH// ... if you add a line above this be sure to change the other locations// marked WASMTIME_FEATURE_LIST#if defined(WASMTIME_FEATURE_CRANELIFT) || defined(WASMTIME_FEATURE_WINCH)#define WASMTIME_FEATURE_COMPILER#endif#endif // WASMTIME_CONF_H</span>\n<span class=\"w\">      </span><span class=\"o\">|</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">11</span><span class=\"p\">,</span>\n<span class=\"w\">                 </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">193</span><span class=\"p\">,</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>Follow the steps to build wasmtime from source <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md</a></li>\n<li>Check the <code>target/c-api/include/wasmtime/conf.h</code> see that there are missing new lines</li>\n<li>Try to compile anything with the c-api</li>\n</ul>\n<h3>Versions and Environment</h3>\n<ul>\n<li>Use cmake version 3.18.4 (for example from a docker container)</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Docker\"><pre><span></span><code><span class=\"k\">FROM</span><span class=\"w\"> </span><span class=\"s\">debian:bullseye</span>\n<span class=\"k\">ARG</span><span class=\"w\"> </span>RELEASE\n\n<span class=\"k\">RUN</span><span class=\"w\"> </span>apt-get<span class=\"w\"> </span>update<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>upgrade<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>install<span class=\"w\"> </span>--no-install-recommends<span class=\"w\"> </span>--no-install-suggests<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>build-essential<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>cmake<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>git<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>curl<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>clean<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>curl<span class=\"w\"> </span>--proto<span class=\"w\"> </span><span class=\"s1\">'=https'</span><span class=\"w\"> </span>--tlsv1.2<span class=\"w\"> </span>-sSf<span class=\"w\"> </span>https://sh.rustup.rs<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sh<span class=\"w\"> </span>-s<span class=\"w\"> </span>--<span class=\"w\"> </span>-y\n</code></pre></div>\n<p>Wasmtime version or commit: v23.0.2</p>\n<p>Operating system: NixOs, but running in dockercontainer debian:bullseye</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>Managed to fix the issue by changing <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14</a></p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">- file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\")</span>\n<span class=\"gi\">+ file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\" NEWLINE_STYLE LF)</span>\n</code></pre></div>\n<p>```[tasklist]</p>\n<h3>Tasks</h3>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">~~~</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 462348787,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723642912
    },
    {
        "content": "<p>dev-null-undefined edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">issue #9126</a>:</p>\n<blockquote>\n<p>Error that you get:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"n\">ifndef</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"sd\">/** * \\file wasmtime/conf.h * * \\brief Build-time defines for how the C API was built. */</span><span class=\"p\">#</span><span class=\"n\">ifndef</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"p\">#</span><span class=\"n\">define</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"c1\">// WASMTIME_FEATURE_LIST#define WASMTIME_FEATURE_PROFILING#define WASMTIME_FEATURE_WAT#define WASMTIME_FEATURE_CACHE#define WASMTIME_FEATURE_PARALLEL_COMPILATION#define WASMTIME_FEATURE_WASI#define WASMTIME_FEATURE_LOGGING/* #undef WASMTIME_FEATURE_DISABLE_LOGGING */#define WASMTIME_FEATURE_COREDUMP#define WASMTIME_FEATURE_ADDR2LINE#define WASMTIME_FEATURE_DEMANGLE#define WASMTIME_FEATURE_THREADS#define WASMTIME_FEATURE_GC#define WASMTIME_FEATURE_ASYNC#define WASMTIME_FEATURE_CRANELIFT#define WASMTIME_FEATURE_WINCH// ... if you add a line above this be sure to change the other locations// marked WASMTIME_FEATURE_LIST#if defined(WASMTIME_FEATURE_CRANELIFT) || defined(WASMTIME_FEATURE_WINCH)#define WASMTIME_FEATURE_COMPILER#endif#endif // WASMTIME_CONF_H</span>\n<span class=\"w\">      </span><span class=\"o\">|</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">11</span><span class=\"p\">,</span>\n<span class=\"w\">                 </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">193</span><span class=\"p\">,</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>Follow the steps to build wasmtime from source <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md</a></li>\n<li>Check the <code>target/c-api/include/wasmtime/conf.h</code> see that there are missing new lines</li>\n<li>Try to compile anything with the c-api</li>\n</ul>\n<h3>Versions and Environment</h3>\n<ul>\n<li>Use cmake version 3.18.4 (for example from a docker container)</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Docker\"><pre><span></span><code><span class=\"k\">FROM</span><span class=\"w\"> </span><span class=\"s\">debian:bullseye</span>\n<span class=\"k\">ARG</span><span class=\"w\"> </span>RELEASE\n\n<span class=\"k\">RUN</span><span class=\"w\"> </span>apt-get<span class=\"w\"> </span>update<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>upgrade<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>install<span class=\"w\"> </span>--no-install-recommends<span class=\"w\"> </span>--no-install-suggests<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>build-essential<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>cmake<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>git<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>curl<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>clean<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>curl<span class=\"w\"> </span>--proto<span class=\"w\"> </span><span class=\"s1\">'=https'</span><span class=\"w\"> </span>--tlsv1.2<span class=\"w\"> </span>-sSf<span class=\"w\"> </span>https://sh.rustup.rs<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sh<span class=\"w\"> </span>-s<span class=\"w\"> </span>--<span class=\"w\"> </span>-y\n</code></pre></div>\n<p>Wasmtime version or commit: v23.0.2</p>\n<p>Operating system: NixOs, but running in dockercontainer debian:bullseye</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>Managed to fix the issue by changing <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14</a></p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">- file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\")</span>\n<span class=\"gi\">+ file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\" NEWLINE_STYLE LF)</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 462348799,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723642918
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126#issuecomment-2289519184\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">issue #9126</a>:</p>\n<blockquote>\n<p>Thanks for the report! Looks like this is due to an older CMake version and should be fixed in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/9131\">https://github.com/bytecodealliance/wasmtime/pull/9131</a></p>\n</blockquote>",
        "id": 462396354,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723659405
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9126\">issue #9126</a>:</p>\n<blockquote>\n<p>Error that you get:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"n\">ifndef</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"sd\">/** * \\file wasmtime/conf.h * * \\brief Build-time defines for how the C API was built. */</span><span class=\"p\">#</span><span class=\"n\">ifndef</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"p\">#</span><span class=\"n\">define</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_CONF_H</span><span class=\"c1\">// WASMTIME_FEATURE_LIST#define WASMTIME_FEATURE_PROFILING#define WASMTIME_FEATURE_WAT#define WASMTIME_FEATURE_CACHE#define WASMTIME_FEATURE_PARALLEL_COMPILATION#define WASMTIME_FEATURE_WASI#define WASMTIME_FEATURE_LOGGING/* #undef WASMTIME_FEATURE_DISABLE_LOGGING */#define WASMTIME_FEATURE_COREDUMP#define WASMTIME_FEATURE_ADDR2LINE#define WASMTIME_FEATURE_DEMANGLE#define WASMTIME_FEATURE_THREADS#define WASMTIME_FEATURE_GC#define WASMTIME_FEATURE_ASYNC#define WASMTIME_FEATURE_CRANELIFT#define WASMTIME_FEATURE_WINCH// ... if you add a line above this be sure to change the other locations// marked WASMTIME_FEATURE_LIST#if defined(WASMTIME_FEATURE_CRANELIFT) || defined(WASMTIME_FEATURE_WINCH)#define WASMTIME_FEATURE_COMPILER#endif#endif // WASMTIME_CONF_H</span>\n<span class=\"w\">      </span><span class=\"o\">|</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">linker</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">11</span><span class=\"p\">,</span>\n<span class=\"w\">                 </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">usr</span><span class=\"o\">/</span><span class=\"n\">include</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"p\">:</span><span class=\"mi\">193</span><span class=\"p\">,</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<ul>\n<li>Follow the steps to build wasmtime from source <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/README.md</a></li>\n<li>Check the <code>target/c-api/include/wasmtime/conf.h</code> see that there are missing new lines</li>\n<li>Try to compile anything with the c-api</li>\n</ul>\n<h3>Versions and Environment</h3>\n<ul>\n<li>Use cmake version 3.18.4 (for example from a docker container)</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Docker\"><pre><span></span><code><span class=\"k\">FROM</span><span class=\"w\"> </span><span class=\"s\">debian:bullseye</span>\n<span class=\"k\">ARG</span><span class=\"w\"> </span>RELEASE\n\n<span class=\"k\">RUN</span><span class=\"w\"> </span>apt-get<span class=\"w\"> </span>update<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>upgrade<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>install<span class=\"w\"> </span>--no-install-recommends<span class=\"w\"> </span>--no-install-suggests<span class=\"w\"> </span>-y<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>build-essential<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>cmake<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>git<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">        </span>curl<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>apt-get<span class=\"w\"> </span>clean<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>curl<span class=\"w\"> </span>--proto<span class=\"w\"> </span><span class=\"s1\">'=https'</span><span class=\"w\"> </span>--tlsv1.2<span class=\"w\"> </span>-sSf<span class=\"w\"> </span>https://sh.rustup.rs<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sh<span class=\"w\"> </span>-s<span class=\"w\"> </span>--<span class=\"w\"> </span>-y\n</code></pre></div>\n<p>Wasmtime version or commit: v23.0.2</p>\n<p>Operating system: NixOs, but running in dockercontainer debian:bullseye</p>\n<p>Architecture: x86_64</p>\n<h3>Extra Info</h3>\n<p>Managed to fix the issue by changing <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14\">https://github.com/bytecodealliance/wasmtime/blob/main/crates/c-api/cmake/install-headers.cmake#L14</a></p>\n<p><div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">- file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\")</span>\n<span class=\"gi\">+ file(CONFIGURE OUTPUT \"${dst}/wasmtime/conf.h\" CONTENT \"${conf_h}\" NEWLINE_STYLE LF)</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 462400157,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1723661142
    }
]