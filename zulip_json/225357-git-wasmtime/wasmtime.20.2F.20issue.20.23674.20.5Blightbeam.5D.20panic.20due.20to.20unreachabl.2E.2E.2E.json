[
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/674#issuecomment-928095900\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/674\">issue #674</a>:</p>\n<blockquote>\n<p>Lightbeam was removed in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/3390\">https://github.com/bytecodealliance/wasmtime/pull/3390</a> as explained in <a href=\"https://github.com/bytecodealliance/rfcs/pull/14\">RFC 14</a>, so I'm going to close this.</p>\n</blockquote>",
        "id": 255087135,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1632763755
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/674\">issue #674</a>:</p>\n<blockquote>\n<h1>Issue description</h1>\n<p><code>wasmtime</code> with lightbeam backend panic due to an <code>unreachable!</code>. This issue will make program calling lightbeam as 3rd party library to crash. Instead an error should be through to let the caller handle it properly.</p>\n<h1>Reproduction</h1>\n<p>wasmtime commit: 3558d41cea889b4c91a8d2c40a87746fdfcd5e01</p>\n<p>Compilation with debug info:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$ <span class=\"nv\">RUSTFLAGS</span><span class=\"o\">=</span>-g cargo build --release --features lightbeam\n</code></pre></div>\n<p>Download &amp; run testcase: <br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/3928614/panic_internal_unreachable_code.zip\">panic_internal_unreachable_code.zip</a></p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$ unzip panic_internal_unreachable_code.zip\n$ ./target/release/wasmtime --lightbeam panic_internal_unreachable_code.wasm\nthread <span class=\"s1\">'main'</span> panicked at <span class=\"s1\">'internal error: entered unreachable code'</span>, crates/lightbeam/src/backend.rs:3559:22\nnote: run with <span class=\"sb\">`</span><span class=\"nv\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"m\">1</span><span class=\"sb\">`</span> environment variable to display a backtrace.\n</code></pre></div>\n<h1>Related piece of code</h1>\n<p>lightbeam panics because of a calling to <code>unreachable!</code> macro.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/3558d41cea889b4c91a8d2c40a87746fdfcd5e01/crates/lightbeam/src/backend.rs#L3558-L3560\">https://github.com/bytecodealliance/wasmtime/blob/3558d41cea889b4c91a8d2c40a87746fdfcd5e01/crates/lightbeam/src/backend.rs#L3558-L3560</a></p>\n<h1>Fix proposal</h1>\n<p>After applying the pull request <a href=\"https://github.com/bytecodealliance/wasmtime/pull/672\">672</a>, <code>wasmtime</code> will return:</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$ ./target/release/wasmtime --lightbeam panic_internal_unreachable_code.wasm\nError: failed to process main module <span class=\"sb\">`</span>panic_internal_unreachable_code.wasm<span class=\"sb\">`</span>\n\nCaused by:\n    <span class=\"m\">0</span>: WebAssembly failed to compile\n    <span class=\"m\">1</span>: Compilation error: Failed to translate <span class=\"k\">function</span>: Microwasm error: i32_extend_s unreachable code\n~~~\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 255087136,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1632763755
    }
]