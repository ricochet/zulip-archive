[
    {
        "content": "<p>jameysharp opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804\">issue #5804</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>The <code>EntitySet</code> type declared in <code>cranelift/entity/src/set.rs</code> is a fairly standard implementation of a bit-set. However, it uses 8-bit chunks in the <code>EntitySet::elems</code> storage vector. It should use a size closer to the width of a machine word.</p>\n<h4>Benefit</h4>\n<p>Using a larger size should give a small performance improvement.</p>\n<h4>Implementation</h4>\n<p>I'd prefer if <code>elems</code> were a <code>Vec&lt;usize&gt;</code>. Then the number of bits in each element is:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">BITS</span>: <span class=\"kt\">usize</span> <span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">mem</span>::<span class=\"n\">size_of</span>::<span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n</code></pre></div>\n<p>All the places which use the constant <code>8</code> should instead refer to <code>BITS</code>, and <code>7</code> should be replaced with <code>BITS - 1</code>.</p>\n<p>If someone wants to tackle this, it would also be great if you could add doc-tests for the methods on this type while you're there. If you do, you may be able to remove the existing tests as they should be redundant with reasonably comprehensive doc-tests.</p>\n<h4>Alternatives</h4>\n<p>We can always leave this alone; it's not terrible as-is.</p>\n</blockquote>",
        "id": 328313576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676573964
    },
    {
        "content": "<p>jameysharp labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804\">issue #5804</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>The <code>EntitySet</code> type declared in <code>cranelift/entity/src/set.rs</code> is a fairly standard implementation of a bit-set. However, it uses 8-bit chunks in the <code>EntitySet::elems</code> storage vector. It should use a size closer to the width of a machine word.</p>\n<h4>Benefit</h4>\n<p>Using a larger size should give a small performance improvement.</p>\n<h4>Implementation</h4>\n<p>I'd prefer if <code>elems</code> were a <code>Vec&lt;usize&gt;</code>. Then the number of bits in each element is:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">BITS</span>: <span class=\"kt\">usize</span> <span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">mem</span>::<span class=\"n\">size_of</span>::<span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n</code></pre></div>\n<p>All the places which use the constant <code>8</code> should instead refer to <code>BITS</code>, and <code>7</code> should be replaced with <code>BITS - 1</code>.</p>\n<p>If someone wants to tackle this, it would also be great if you could add doc-tests for the methods on this type while you're there. If you do, you may be able to remove the existing tests as they should be redundant with reasonably comprehensive doc-tests.</p>\n<h4>Alternatives</h4>\n<p>We can always leave this alone; it's not terrible as-is.</p>\n</blockquote>",
        "id": 328313577,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676573964
    },
    {
        "content": "<p>jameysharp labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804\">issue #5804</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>The <code>EntitySet</code> type declared in <code>cranelift/entity/src/set.rs</code> is a fairly standard implementation of a bit-set. However, it uses 8-bit chunks in the <code>EntitySet::elems</code> storage vector. It should use a size closer to the width of a machine word.</p>\n<h4>Benefit</h4>\n<p>Using a larger size should give a small performance improvement.</p>\n<h4>Implementation</h4>\n<p>I'd prefer if <code>elems</code> were a <code>Vec&lt;usize&gt;</code>. Then the number of bits in each element is:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">BITS</span>: <span class=\"kt\">usize</span> <span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">mem</span>::<span class=\"n\">size_of</span>::<span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n</code></pre></div>\n<p>All the places which use the constant <code>8</code> should instead refer to <code>BITS</code>, and <code>7</code> should be replaced with <code>BITS - 1</code>.</p>\n<p>If someone wants to tackle this, it would also be great if you could add doc-tests for the methods on this type while you're there. If you do, you may be able to remove the existing tests as they should be redundant with reasonably comprehensive doc-tests.</p>\n<h4>Alternatives</h4>\n<p>We can always leave this alone; it's not terrible as-is.</p>\n</blockquote>",
        "id": 328313579,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1676573964
    },
    {
        "content": "<p>maekawatoshiki <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804#issuecomment-1463607018\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804\">issue #5804</a>:</p>\n<blockquote>\n<p>Hi, I want to work on this.</p>\n</blockquote>",
        "id": 340821811,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1678444641
    },
    {
        "content": "<p>jameysharp closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/5804\">issue #5804</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p>The <code>EntitySet</code> type declared in <code>cranelift/entity/src/set.rs</code> is a fairly standard implementation of a bit-set. However, it uses 8-bit chunks in the <code>EntitySet::elems</code> storage vector. It should use a size closer to the width of a machine word.</p>\n<h4>Benefit</h4>\n<p>Using a larger size should give a small performance improvement.</p>\n<h4>Implementation</h4>\n<p>I'd prefer if <code>elems</code> were a <code>Vec&lt;usize&gt;</code>. Then the number of bits in each element is:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">BITS</span>: <span class=\"kt\">usize</span> <span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">mem</span>::<span class=\"n\">size_of</span>::<span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">8</span>\n</code></pre></div>\n<p>All the places which use the constant <code>8</code> should instead refer to <code>BITS</code>, and <code>7</code> should be replaced with <code>BITS - 1</code>.</p>\n<p>If someone wants to tackle this, it would also be great if you could add doc-tests for the methods on this type while you're there. If you do, you may be able to remove the existing tests as they should be redundant with reasonably comprehensive doc-tests.</p>\n<h4>Alternatives</h4>\n<p>We can always leave this alone; it's not terrible as-is.</p>\n</blockquote>",
        "id": 343503635,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1679427582
    }
]