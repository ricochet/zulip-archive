[
    {
        "content": "<p>sunfishcode opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194349105,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587062359
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124\">PR Review</a>.</p>",
        "id": 194351766,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063571
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124\">PR Review</a>.</p>",
        "id": 194351768,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063571
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773446\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773446\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I think this would probably be best done by keeping <code>&amp;self</code> as an argument, because that way if you want to test <code>Func</code> a few times you don't have to worry about cloning and getting the <code>Func</code> back in case of an error.</p>\n<p>I think we can still return a <code>'static</code> closure here, it just needs to close over the <code>InstanceHandle</code> as well.</p>\n</blockquote>",
        "id": 194351769,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063571
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774148\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774148\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Out of curiosity, how come this changed? Is the intention to avoid storing the <code>GlobalType</code> next to the <code>ExportGlobal</code> since they're basically inferred from one another?</p>\n</blockquote>",
        "id": 194351772,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063572
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773743\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773743\">PR Review Comment</a>:</p>\n<blockquote>\n<p>It looks like a lot of the diff is due to the change here, I'm curious how come this changed though?</p>\n</blockquote>",
        "id": 194351773,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063572
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409776080\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409776080\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I think if we return an <code>ExactSizeIterator</code> we can avoid adding an extra method for this, since it should still be possible to do <code>module.imports().len()</code> in that case.</p>\n</blockquote>",
        "id": 194351775,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063572
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409775432\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409775432\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This may need double-checking, but I think <code>self.module</code> may not be necessary any more after this change. I think the <code>Store</code> is still needed but we may be able to remove the <code>Module</code> field from an <code>Instance</code>?</p>\n</blockquote>",
        "id": 194351776,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063572
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774741\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774741\">PR Review Comment</a>:</p>\n<blockquote>\n<p>To enhance this a bit, perhaps this could return an <code>ExactSizeIterator</code> which should allow for enumeration and such?</p>\n</blockquote>",
        "id": 194351777,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063572
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409784268\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409784268\">PR Review Comment</a>:</p>\n<blockquote>\n<p>With <code>Instance::exports()</code> computing <code>Extern</code> values on demand, it now returns <code>Extern</code> instead of <code>&amp;Extern</code>. In code like <code>let func = instance.get_export(\"foo\").unwrap().func().unwrap()</code>, if <code>func()</code> took a <code>&amp;self</code>, it'd be taking a reference to a temporary.</p>\n</blockquote>",
        "id": 194352497,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063862
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394919724\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394919724\">PR Review</a>.</p>",
        "id": 194352498,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587063862
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926149\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926149\">PR Review</a>.</p>",
        "id": 194353665,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064428
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789357\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789357\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Makes sense yeah, could we perhaps add alternative methods for these idioms though? Idiomatically this feels like the correct signature for this function (a by-value perhaps being <code>into_func(self)</code>). Perhaps we could add <code>Instance::functions()</code> and such which return iterators over just those values?</p>\n</blockquote>",
        "id": 194353666,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064428
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926815\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926815\">PR Review</a>.</p>",
        "id": 194353812,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064486
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789915\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789915\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I did a quick experiment with this, and <code>Linker::instance</code> currently needs <code>Instance::module</code>. We don't currently store the export names in the instance otherwise.</p>\n</blockquote>",
        "id": 194353813,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064486
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394928112\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394928112\">PR Review</a>.</p>",
        "id": 194354041,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064600
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409790905\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409790905\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah ok no worries. We could make the internal handle <code>pub(crate)</code> so the linker could access it, but it's fine to tackle this later if really necessary.</p>\n</blockquote>",
        "id": 194354042,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587064600
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394964851\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394964851\">PR Review</a>.</p>",
        "id": 194360898,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587067948
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409820723\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409820723\">PR Review Comment</a>:</p>\n<blockquote>\n<p>This is because <code>Module::exports</code> is now giving you results by value instead of by reference, and without this a lot of common scenarios have to do awkward things to avoid taking a reference of a temporary.</p>\n</blockquote>",
        "id": 194360899,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587067948
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073794\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073794\">PR Review</a>.</p>",
        "id": 194381734,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587080998
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409912967\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409912967\">PR Review Comment</a>:</p>\n<blockquote>\n<p>And, it turns out, we can actually make <code>Instance::exports</code> provide the names in a reasonable way, which helps the <code>Linker</code>, and makes the API much nicer as you no longer need to <code>zip</code> with <code>Module::exports</code> just to get the names.</p>\n<p>Now, nothing in <code>Instance</code> itself or its users need it to have a <code>Module</code>. I've left it in for now because it looks like it might unregister some things in its <code>Drop</code>, but if we want to sort that out we could drop the <code>Module</code> after instantiation.</p>\n</blockquote>",
        "id": 194381735,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587080998
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073957\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073957\">PR Review</a>.</p>",
        "id": 194381798,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081029
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913121\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913121\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Cool, done.</p>\n</blockquote>",
        "id": 194381799,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081029
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913217\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913217\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Works great.</p>\n</blockquote>",
        "id": 194381813,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081050
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074071\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074071\">PR Review</a>.</p>",
        "id": 194381814,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081050
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074246\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074246\">PR Review</a>.</p>",
        "id": 194381842,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081084
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913345\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913345\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Makes sense. I've now implemented this.</p>\n</blockquote>",
        "id": 194381843,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081084
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194381861,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081107
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194382065,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587081286
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081798\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081798\">PR Review</a>.</p>",
        "id": 194383236,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587082450
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920187\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920187\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ok, renaming them to <code>into_func()</code>.</p>\n<p>We could add <code>Instance::functions()</code> if that's a common use case, but users could also write <code>Instance.exports().filter_map(|export| export.into_func())</code> if that's what they want.</p>\n</blockquote>",
        "id": 194383237,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587082450
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194383447,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587082632
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194384523,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587083677
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757\">PR Review</a>.</p>",
        "id": 194471080,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757\">PR Review</a>.</p>",
        "id": 194471081,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920150\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920150\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Stray lifetime?</p>\n</blockquote>",
        "id": 194471082,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410351976\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410351976\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Instead of having a struct for this could we perhaps return a tuple from the exports iterator?</p>\n</blockquote>",
        "id": 194471083,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353195\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353195\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I've worried historicaly that this is pretty unwieldy. The previous incantation was sort of <em>just</em> on the line of not motivating me to try to improve things, but this feels like it's pretty unergonomic to document as a pattern to call things. Would you be ok adding more accessors in this PR for <code>Instance</code>? For example I think we could make this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">get_func</span><span class=\"p\">(</span><span class=\"s\">&quot;foo&quot;</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">.</span><span class=\"n\">get2</span>::<span class=\"o\">&lt;</span><span class=\"kt\">i32</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">i32</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kt\">i32</span><span class=\"o\">&gt;</span><span class=\"p\">()</span><span class=\"o\">?</span><span class=\"p\">;</span><span class=\"w\"></span>\n</pre></div>\n\n\n</blockquote>",
        "id": 194471084,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410352307\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410352307\">PR Review Comment</a>:</p>\n<blockquote>\n<p>You can skip the <code>struct</code> type definition here, inside of the closure you can do <code>drop(&amp;instance_clone)</code> and just use <code>export</code> directly, and that'll capture everything necessary.</p>\n</blockquote>",
        "id": 194471085,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353782\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353782\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I also don't mind pushing up some new iterators/accessors for <code>Instance</code> as part of this PR too</p>\n</blockquote>",
        "id": 194471087,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354923\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354923\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Similar to above, I think we should keep this as an internal field with a public accessor so we can change the make up of the structure over time.</p>\n</blockquote>",
        "id": 194471088,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354691\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354691\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I personally don't think we should have public-structs-with-public-fields in the API. They're quite inflexible in terms of future additions as well as changing the makeup of the internals. For example committing to two <code>String</code> allocations here I think may be something we want to tweak in the future. We could, for example, have something like <code>Arc&lt;str&gt;</code> which is cheaply cloneable and contains module/string, along with an index of where to split the string.</p>\n</blockquote>",
        "id": 194471089,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410355275\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410355275\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Could the old methods be preserved since they can be useful in their own right too?</p>\n</blockquote>",
        "id": 194471090,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587143181
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194517834,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587171400
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194517883,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587171479
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194697152,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587398788
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411510324\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411510324\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Oops, yes. This was from an earlier experiment. Fixed now.</p>\n</blockquote>",
        "id": 194698490,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399423
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396607691\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396607691\">PR Review</a>.</p>",
        "id": 194698491,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399423
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396612010\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396612010\">PR Review</a>.</p>",
        "id": 194699140,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399736
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411514091\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411514091\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Good idea, I've now added <code>get_func</code> etc. accessors and update the examples and docs to use them, and that makes things much cleaner.</p>\n</blockquote>",
        "id": 194699142,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399736
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613405\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613405\">PR Review</a>.</p>",
        "id": 194699407,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399835
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515322\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515322\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I started cleaning this, and ended up finding it made sense to go ahead and eliminate the allocations. So we now have accessor functions, and they return <code>&amp; 'module str</code>.</p>\n</blockquote>",
        "id": 194699408,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399836
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613623\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613623\">PR Review</a>.</p>",
        "id": 194699478,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399852
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515518\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515518\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Also fixed.</p>\n</blockquote>",
        "id": 194699479,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399852
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194699771,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587399986
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396620307\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396620307\">PR Review</a>.</p>",
        "id": 194700602,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587400326
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411521449\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411521449\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I'm not opposed, I just haven't found cases where they're useful. For the \"I don't know what this is\" or \"This might be one of a few different things\" use cases, <code>Extern</code> is just an <code>enum</code> and you can plain old <code>match</code> or <code>if let</code> on it, which read better anyway.</p>\n<p>With the new <code>Instance::get_func</code> accessors, even <code>Extern::into_func</code> is a little dubious, because you can use <code>match</code> and <code>if let</code> to do that too, but they are handy when you want to report different errors in cases like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"w\">    </span><span class=\"n\">instance</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">get_export</span><span class=\"p\">(</span><span class=\"s\">&quot;_start&quot;</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">context</span><span class=\"p\">(</span><span class=\"s\">&quot;expected a _start export&quot;</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">into_func</span><span class=\"p\">()</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">context</span><span class=\"p\">(</span><span class=\"s\">&quot;expected export to be a func&quot;</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">call</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"p\">[])</span><span class=\"o\">?</span><span class=\"p\">;</span><span class=\"w\"></span>\n</pre></div>\n\n\n</blockquote>",
        "id": 194700603,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587400326
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396621064\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396621064\">PR Review</a>.</p>",
        "id": 194700696,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587400384
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411522132\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411522132\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Ah, cool. I've now done this.</p>\n</blockquote>",
        "id": 194700697,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587400384
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194715524,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587407777
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194716319,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587408104
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194719638,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587409745
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002\">PR Review</a>.</p>",
        "id": 194723690,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412076
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002\">PR Review</a>.</p>",
        "id": 194723691,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412076
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411643645\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411643645\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I think that this is auto-inferred, but could this be changed to <code>Export&lt;'me&gt;</code>?</p>\n</blockquote>",
        "id": 194723692,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412076
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644682\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644682\">PR Review Comment</a>:</p>\n<blockquote>\n<p>I think the <code>'module self</code> can just be <code>self</code> here (keeping the <code>&amp;'module str</code> ret)</p>\n</blockquote>",
        "id": 194723693,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412076
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644752\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644752\">PR Review Comment</a>:</p>\n<blockquote>\n<p>ditto as above</p>\n</blockquote>",
        "id": 194723694,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412076
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194723745,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587412084
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194725527,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413028
    },
    {
        "content": "<p>sunfishcode updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>\n<blockquote>\n<p>This contains refactorings and API changes split off from #1516.</p>\n<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>\n<p>&lt;!--</p>\n<p>Please ensure that the following steps are all taken care of before submitting<br>\nthe PR.</p>\n<ul>\n<li>\n<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>\n  here.</p>\n</li>\n<li>\n<p>[ ] A short description of what this does, why it is needed; if the<br>\n  description becomes long, the matter should probably be discussed in an issue<br>\n  first.</p>\n</li>\n<li>\n<p>[ ] This PR contains test cases, if meaningful.</p>\n</li>\n<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>\n  If you don't know who could review this, please indicate so. The list of<br>\n  suggested reviewers on the right can help you.</li>\n</ul>\n<p>Please ensure all communication adheres to the <a href=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\" title=\"https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md\">code of\nconduct</a>.<br>\n--&gt;</p>\n</blockquote>",
        "id": 194726205,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413358
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776658\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776658\">PR Review</a>.</p>",
        "id": 194726441,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413486
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659565\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659565\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done</p>\n</blockquote>",
        "id": 194726442,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413486
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776753\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776753\">PR Review</a>.</p>",
        "id": 194726452,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413494
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659643\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659643\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done</p>\n</blockquote>",
        "id": 194726453,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413494
    },
    {
        "content": "<p>sunfishcode submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776838\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776838\">PR Review</a>.</p>",
        "id": 194726472,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413502
    },
    {
        "content": "<p>sunfishcode created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659714\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659714\">PR Review Comment</a>:</p>\n<blockquote>\n<p>Done</p>\n</blockquote>",
        "id": 194726474,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587413502
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396805590\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396805590\">PR Review</a>.</p>",
        "id": 194732043,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587416130
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/1524\" title=\"https://github.com/bytecodealliance/wasmtime/pull/1524\">PR #1524</a>.</p>",
        "id": 194732054,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1587416135
    }
]