[
    {
        "content": "<p>alexcrichton labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Local bisection points to #4730 for this issue but that seems like it may also be just as likely to expose a preexisting issue. Reproducing this is somewhat nontrivial and <code>wasm-tools shrink</code> was pretty unsuccessful on this test case.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/files/9449320/foo.wasm.gz\">Using this input test case</a> on an x86_64 machine this crash can be reproduced with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"cp\">$HOME</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Note that this reproduction is quite specific to layout of code and the various options enabled here are all required with the input wasm above.</p>\n<p>cc @elliottt </p>\n</blockquote>",
        "id": 296030368,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661830072
    },
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Local bisection points to #4730 for this issue but that seems like it may also be just as likely to expose a preexisting issue. Reproducing this is somewhat nontrivial and <code>wasm-tools shrink</code> was pretty unsuccessful on this test case.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/files/9449320/foo.wasm.gz\">Using this input test case</a> on an x86_64 machine this crash can be reproduced with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"cp\">$HOME</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Note that this reproduction is quite specific to layout of code and the various options enabled here are all required with the input wasm above.</p>\n<p>cc @elliottt </p>\n</blockquote>",
        "id": 296030369,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661830072
    },
    {
        "content": "<p>elliottt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1231159798\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>When I run the test case I get the following output:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">Error</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span><span class=\"w\"></span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span>:\n    <span class=\"mi\">0</span>: <span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">instantiate</span><span class=\"w\"> </span><span class=\"s\">\"./foo.wasm\"</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mi\">1</span>: <span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span>: <span class=\"nc\">integer</span><span class=\"w\"> </span><span class=\"n\">overflow</span><span class=\"w\"></span>\n<span class=\"w\">       </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>:\n           <span class=\"mi\">0</span>:   <span class=\"mh\">0x61</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">&gt;</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 296037428,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661837326
    },
    {
        "content": "<p>elliottt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1231164039\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>I thought to try your example on cee4b209f346ea279490268fe434dc52d0e0680c (the commit where #4730 was merged) and it did indeed segfault. Could the behavior I'm seeing on <code>main</code> be due to the fix for #4761 that was fixed in #4790?</p>\n</blockquote>",
        "id": 296037884,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661837701
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1231690522\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Oh you know it was probably something to do with <code>--disable-cache</code> where my bisection went awry. I always forget to pass that flag, alas!</p>\n<p>In that case yeah it looks like this is fixed locally so I'll close.</p>\n</blockquote>",
        "id": 296104287,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661867048
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Local bisection points to #4730 for this issue but that seems like it may also be just as likely to expose a preexisting issue. Reproducing this is somewhat nontrivial and <code>wasm-tools shrink</code> was pretty unsuccessful on this test case.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/files/9449320/foo.wasm.gz\">Using this input test case</a> on an x86_64 machine this crash can be reproduced with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"cp\">$HOME</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Note that this reproduction is quite specific to layout of code and the various options enabled here are all required with the input wasm above.</p>\n<p>cc @elliottt </p>\n</blockquote>",
        "id": 296104291,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661867051
    },
    {
        "content": "<p>alexcrichton reopened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Local bisection points to #4730 for this issue but that seems like it may also be just as likely to expose a preexisting issue. Reproducing this is somewhat nontrivial and <code>wasm-tools shrink</code> was pretty unsuccessful on this test case.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/files/9449320/foo.wasm.gz\">Using this input test case</a> on an x86_64 machine this crash can be reproduced with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"cp\">$HOME</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Note that this reproduction is quite specific to layout of code and the various options enabled here are all required with the input wasm above.</p>\n<p>cc @elliottt </p>\n</blockquote>",
        "id": 296174862,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661880050
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1231953020\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>According to oss-fuzz the original test case here still crashes and trying again locally I'm able to reproduce:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">disable</span><span class=\"o\">-</span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">testcase42</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">wasmtime_linkopt_padding_between_functions</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">disable</span><span class=\"o\">-</span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">testcase42</span><span class=\"p\">.</span><span class=\"n\">wat</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"></span>\n</code></pre></div>\n<p>with <a href=\"https://github.com/bytecodealliance/wasmtime/files/9455130/testcase42.wasm.gz\">testcase42.wasm.gz</a> as an input. This is probably related to the <code>wasmtime_linkopt_padding_between_functions</code> option which is pretty nonstandard and only there for the fuzzers, but it may mean that there's a missing alignment calculation for when a function starts?</p>\n</blockquote>",
        "id": 296175348,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661880196
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1231953535\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Oh and to log, the reproduction for me locally is on 1a59b3e6c65cdc6510c6c9e98dd694a5a2e85a2d which should be <code>main</code> as of this writing</p>\n</blockquote>",
        "id": 296175439,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661880229
    },
    {
        "content": "<p>elliottt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812#issuecomment-1232041580\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>It's definitely coming from the <code>fcopysign</code> lowering:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"o\">%</span><span class=\"w\"> </span><span class=\"n\">lldb</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">disable</span><span class=\"o\">-</span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">testcase42</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">wasmtime_linkopt_padding_between_functions</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">Process</span><span class=\"w\"> </span><span class=\"mi\">3067456</span><span class=\"w\"> </span><span class=\"n\">stopped</span><span class=\"w\"></span>\n\n<span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">thread</span><span class=\"w\"> </span>#<span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">wasmtime</span><span class=\"o\">'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">stop</span><span class=\"w\"> </span><span class=\"n\">reason</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">signal</span><span class=\"w\"> </span><span class=\"n\">SIGSEGV</span>: <span class=\"nc\">invalid</span><span class=\"w\"> </span><span class=\"n\">address</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">fault</span><span class=\"w\"> </span><span class=\"n\">address</span>: <span class=\"mh\">0x0</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">frame</span><span class=\"w\"> </span>#<span class=\"mi\">0</span>: <span class=\"mh\">0x00007ffff6c57b3b</span><span class=\"w\"></span>\n-&gt;  <span class=\"mh\">0x7ffff6c57b3b</span>: <span class=\"nc\">andnps</span><span class=\"w\"> </span><span class=\"mh\">0x24ef</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rip</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm6</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b42</span>: <span class=\"nc\">andps</span><span class=\"w\">  </span><span class=\"o\">%</span><span class=\"n\">xmm3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b45</span>: <span class=\"nc\">orps</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm6</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b48</span>: <span class=\"nc\">movl</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x4f000000</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">edx</span><span class=\"w\">         </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x4F000000</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"n\">lldb</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">disassemble</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mh\">0x7ffff6c57b50</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mh\">0x7ffff6c57b0b</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b0b</span>: <span class=\"nc\">jge</span><span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b13</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b11</span>: <span class=\"nc\">ud2</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b13</span>: <span class=\"nc\">addl</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x80000000</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">edx</span><span class=\"w\">         </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x80000000</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b19</span>: <span class=\"nc\">movl</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">edx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">eax</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b1b</span>: <span class=\"nc\">cvtsi2ss</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm3</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b20</span>: <span class=\"nc\">movl</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x80000000</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">eax</span><span class=\"w\">         </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x80000000</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b25</span>: <span class=\"nc\">movd</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">eax</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b29</span>: <span class=\"nc\">xorps</span><span class=\"w\">  </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm3</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b2c</span>: <span class=\"nc\">movl</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x80000000</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">r11d</span><span class=\"w\">        </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x80000000</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b32</span>: <span class=\"nc\">movd</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">r11d</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b37</span>: <span class=\"nc\">movdqa</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm6</span><span class=\"w\"></span>\n-&gt;  <span class=\"mh\">0x7ffff6c57b3b</span>: <span class=\"nc\">andnps</span><span class=\"w\"> </span><span class=\"mh\">0x24ef</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rip</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm6</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b42</span>: <span class=\"nc\">andps</span><span class=\"w\">  </span><span class=\"o\">%</span><span class=\"n\">xmm3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b45</span>: <span class=\"nc\">orps</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">xmm4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">xmm6</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"mh\">0x7ffff6c57b48</span>: <span class=\"nc\">movl</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x4f000000</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">%</span><span class=\"n\">edx</span><span class=\"w\">         </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x4F000000</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"n\">lldb</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">register</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">eax</span><span class=\"w\"></span>\n<span class=\"w\">     </span><span class=\"n\">eax</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x80000000</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"n\">lldb</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">register</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">rip</span><span class=\"w\"></span>\n<span class=\"w\">     </span><span class=\"n\">rip</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mh\">0x00007ffff6c57b3b</span><span class=\"w\"></span>\n</code></pre></div>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Prelude</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mh\">0x24ef</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"mh\">0x00007ffff6c57b3b</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">divMod</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\"></span>\n<span class=\"p\">(</span><span class=\"mi\">8796083345922</span><span class=\"p\">,</span><span class=\"mi\">10</span><span class=\"p\">)</span><span class=\"w\"></span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 296193256,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661885674
    },
    {
        "content": "<p>elliottt closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/4812\">issue #4812</a>:</p>\n<blockquote>\n<p>Local bisection points to #4730 for this issue but that seems like it may also be just as likely to expose a preexisting issue. Reproducing this is somewhat nontrivial and <code>wasm-tools shrink</code> was pretty unsuccessful on this test case.</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/files/9449320/foo.wasm.gz\">Using this input test case</a> on an x86_64 machine this crash can be reproduced with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">cranelift</span><span class=\"o\">-</span><span class=\"n\">nan</span><span class=\"o\">-</span><span class=\"n\">canonicalization</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"> </span><span class=\"err\">\\</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n<span class=\"n\">zsh</span>: <span class=\"nc\">segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"w\">  </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"cp\">$HOME</span><span class=\"o\">/</span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\">     </span><span class=\"o\">-</span><span class=\"n\">g</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Note that this reproduction is quite specific to layout of code and the various options enabled here are all required with the input wasm above.</p>\n<p>cc @elliottt </p>\n</blockquote>",
        "id": 296454592,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1661982106
    }
]