[
    {
        "content": "<p>repi opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>Latest <code>libc</code> 0.2.82 changed the one of the context structures in <a href=\"https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15\">https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15</a> for the <code>aarch64-apple-darwin</code> target</p>\n<p>Repro:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.81</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.82</span><span class=\"w\"></span>\n\n<span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Results in: </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0609</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__rip</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"k\">type</span> <span class=\"err\">`</span><span class=\"n\">__darwin_arm_thread_state64</span><span class=\"err\">`</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">traphandlers</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">169</span>:<span class=\"mi\">44</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">169</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">                     </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">cx</span><span class=\"p\">.</span><span class=\"n\">uc_mcontext</span><span class=\"p\">).</span><span class=\"n\">__ss</span><span class=\"p\">.</span><span class=\"n\">__rip</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">                                            </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span>: <span class=\"nc\">available</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">are</span>: <span class=\"err\">`</span><span class=\"n\">__x</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__fp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__lr</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__sp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__pc</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">others</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Been meaning to also ask what the state is of wasmtime on <code>aarch64-apple-darwin</code> in general also, assume it is not fully supported yet but we have been somewhat successfully using it with some issues (will file another issue soon about invalid codegen on aarch64).</p>\n</blockquote>",
        "id": 222511454,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610494447
    },
    {
        "content": "<p>repi labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>Latest <code>libc</code> 0.2.82 changed the one of the context structures in <a href=\"https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15\">https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15</a> for the <code>aarch64-apple-darwin</code> target</p>\n<p>Repro:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.81</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.82</span><span class=\"w\"></span>\n\n<span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Results in: </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0609</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__rip</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"k\">type</span> <span class=\"err\">`</span><span class=\"n\">__darwin_arm_thread_state64</span><span class=\"err\">`</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">traphandlers</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">169</span>:<span class=\"mi\">44</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">169</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">                     </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">cx</span><span class=\"p\">.</span><span class=\"n\">uc_mcontext</span><span class=\"p\">).</span><span class=\"n\">__ss</span><span class=\"p\">.</span><span class=\"n\">__rip</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">                                            </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span>: <span class=\"nc\">available</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">are</span>: <span class=\"err\">`</span><span class=\"n\">__x</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__fp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__lr</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__sp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__pc</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">others</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Been meaning to also ask what the state is of wasmtime on <code>aarch64-apple-darwin</code> in general also, assume it is not fully supported yet but we have been somewhat successfully using it with some issues (will file another issue soon about invalid codegen on aarch64).</p>\n</blockquote>",
        "id": 222511455,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610494447
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-759127792\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>It looks to me like we just need to add a config case for darwin-aarch64 that reads <code>__pc</code>. I (sadly) don't have the right hardware to test, but would be happy to review a PR if you'd like!</p>\n</blockquote>",
        "id": 222516888,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610498602
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-759129962\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>Re: wasmtime on macOS aarch64 systems -- the main thing we'd need to do to claim 'official' support would be to add a CI runner for this platform. We support Linux/aarch64 in CI by cross-compiling and using user-mode qemu to run tests, but I'm not aware of an equivalent option for macOS. (Anyone have suggestions?) If/when GitHub adds hosted macOS aarch64 runners, or if there is some way to use emulation, then I think this would be a reasonable thing to add!</p>\n</blockquote>",
        "id": 222517350,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610498957
    },
    {
        "content": "<p>clearloop <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-759485844\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<blockquote>\n<p>It looks to me like we just need to add a config case for darwin-aarch64 that reads <code>__pc</code>. I (sadly) don't have the right hardware to test, but would be happy to review a PR if you'd like!</p>\n</blockquote>\n<p>Change it to <code>__pc</code> works!</p>\n</blockquote>",
        "id": 222587107,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610548257
    },
    {
        "content": "<p>hanqo <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-760876462\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>It looks to me like we just need to add a config case for darwin-aarch64 that reads <code>__pc</code>. I (sadly) don't have the right hardware to test, but would be happy to review a PR if you'd like!</p>\n</blockquote>\n<p>Change it to <code>__pc</code> works!</p>\n</blockquote>\n<p>I am facing the same problem. Could you explain how you did to solve it?</p>\n</blockquote>",
        "id": 222843999,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610708786
    },
    {
        "content": "<p>hanqo <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-760881939\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>My current workaround is to specify libc with 0.2.81 version in my cargo.toml and it works so far.</p>\n<blockquote>\n<p>libc = { version = '=0.2.81' }</p>\n</blockquote>\n</blockquote>",
        "id": 222844889,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610709449
    },
    {
        "content": "<p>clearloop <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-760883228\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<blockquote>\n<p>I am facing the same problem. Could you explain how you did to solve it?</p>\n</blockquote>\n<p>Well, just modifying the panicking line from <code>(*cx.uc_mcontext).__ss.__rip as *const u8</code> to <code>...__pc</code>.</p>\n</blockquote>",
        "id": 222845058,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1610709593
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575#issuecomment-764784410\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>I believe this was fixed in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/2588\">https://github.com/bytecodealliance/wasmtime/pull/2588</a></p>\n</blockquote>",
        "id": 223536518,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1611247703
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/2575\">Issue #2575</a>:</p>\n<blockquote>\n<p>Latest <code>libc</code> 0.2.82 changed the one of the context structures in <a href=\"https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15\">https://github.com/rust-lang/libc/commit/990659966e14b0258a5110992735dee65333df15</a> for the <code>aarch64-apple-darwin</code> target</p>\n<p>Repro:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"p\">.</span><span class=\"n\">io</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">Updating</span><span class=\"w\"> </span><span class=\"n\">libc</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.81</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">v0</span><span class=\"p\">.</span><span class=\"mf\">2.82</span><span class=\"w\"></span>\n\n<span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Results in: </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0609</span><span class=\"p\">]</span>: <span class=\"nc\">no</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__rip</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"k\">type</span> <span class=\"err\">`</span><span class=\"n\">__darwin_arm_thread_state64</span><span class=\"err\">`</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">traphandlers</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">169</span>:<span class=\"mi\">44</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">169</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">                     </span><span class=\"p\">(</span><span class=\"o\">*</span><span class=\"n\">cx</span><span class=\"p\">.</span><span class=\"n\">uc_mcontext</span><span class=\"p\">).</span><span class=\"n\">__ss</span><span class=\"p\">.</span><span class=\"n\">__rip</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\">                                            </span><span class=\"o\">^^^^^</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span>: <span class=\"nc\">available</span><span class=\"w\"> </span><span class=\"n\">fields</span><span class=\"w\"> </span><span class=\"n\">are</span>: <span class=\"err\">`</span><span class=\"n\">__x</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__fp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__lr</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__sp</span><span class=\"err\">`</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">__pc</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">others</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Been meaning to also ask what the state is of wasmtime on <code>aarch64-apple-darwin</code> in general also, assume it is not fully supported yet but we have been somewhat successfully using it with some issues (will file another issue soon about invalid codegen on aarch64).</p>\n</blockquote>",
        "id": 223536520,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1611247703
    }
]