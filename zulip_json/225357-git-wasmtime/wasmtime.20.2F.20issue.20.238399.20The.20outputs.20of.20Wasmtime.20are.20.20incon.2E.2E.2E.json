[
    {
        "content": "<p>abc767234318 opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399\">issue #8399</a>:</p>\n<blockquote>\n<p>I constructed a wasm binary with an exported function called \"main\". I compared the outputs of wasmtime and found they are inconsistent across different platforms.<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/15024610/file86.zip\">file86.zip</a></p>\n<p>Wasmtime  v18.0.2 Ubuntu22.04 x86_64:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">file86</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">warning</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">returns</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">experimental</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"k\">break</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">future</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n</code></pre></div>\n<p>Wasmtime  v18.0.2 MacOS arm64:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">file86</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">warning</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">returns</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">experimental</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"k\">break</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">future</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n</code></pre></div>\n</blockquote>",
        "id": 434032123,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1713442299
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399#issuecomment-2063744378\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399\">issue #8399</a>:</p>\n<blockquote>\n<p>Does the wasm module look at the raw bits of floats? NaN values are allowed to be non-deterministic by the wasm specification. Different cpu architectures have different handling of NaN values. This may be the cause of the difference here if the answer to my question is true.</p>\n</blockquote>",
        "id": 434034492,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1713443084
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399\">issue #8399</a>:</p>\n<blockquote>\n<p>I constructed a wasm binary with an exported function called \"main\". I compared the outputs of wasmtime and found they are inconsistent across different platforms.<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/files/15024610/file86.zip\">file86.zip</a></p>\n<p>Wasmtime  v18.0.2 Ubuntu22.04 x86_64:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">file86</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">warning</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">returns</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">experimental</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"k\">break</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">future</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n<span class=\"mi\">667210185897120983469013534608098645</span>\n</code></pre></div>\n<p>Wasmtime  v18.0.2 MacOS arm64:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">file86</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">warning</span>: <span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">--</span><span class=\"n\">invoke</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">returns</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">experimental</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"k\">break</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">future</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n<span class=\"mi\">667210185936411072606488982786049365</span>\n</code></pre></div>\n</blockquote>",
        "id": 434063116,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1713451170
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399#issuecomment-2064047466\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/8399\">issue #8399</a>:</p>\n<blockquote>\n<p>I can confirm locally that <code>wasmtime run --invoke main -W nan-canonicalization file86.wasm</code> produces the same result on both systems, whereas without it different results are produced. Given that I don't believe that there's a bug here since NaN is allowed to be nondeterministic across platforms and is a known part of the wasm spec.</p>\n</blockquote>",
        "id": 434063119,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1713451171
    }
]