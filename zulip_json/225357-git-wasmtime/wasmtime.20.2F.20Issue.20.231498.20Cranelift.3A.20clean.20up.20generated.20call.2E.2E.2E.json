[
    {
        "content": "<p>iximeow opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<p>In <code>isa/x86/abi.rs</code> we have to save callee-preserved FPRs for some calling conventions. We save these to the stack and reload them before exiting, but at the moment the Cranelift IR operations <code>stack_load</code> and <code>stack_store</code> are not directly encodable. In other parts of a function, <code>stack_load</code> and <code>stack_store</code> would be legalized and then optimized into the assembly we'd like (<code>movdqa [rsp + offset], xmm*</code>), but prologue/epilogue addition happen after both legalization and register allocation.</p>\n<p>When <code>stack_load</code> and <code>stack_store</code> can be directly encoded, we can switch to those, remove an explicit <code>stack_address</code>, and simplify x86 callee-preserved FPR machinery.</p>\n<p>For more, see <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\">this comment</a> and <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\">this comment</a>.</p>\n</blockquote>",
        "id": 193616749,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586552152
    },
    {
        "content": "<p>iximeow labeled <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<p>In <code>isa/x86/abi.rs</code> we have to save callee-preserved FPRs for some calling conventions. We save these to the stack and reload them before exiting, but at the moment the Cranelift IR operations <code>stack_load</code> and <code>stack_store</code> are not directly encodable. In other parts of a function, <code>stack_load</code> and <code>stack_store</code> would be legalized and then optimized into the assembly we'd like (<code>movdqa [rsp + offset], xmm*</code>), but prologue/epilogue addition happen after both legalization and register allocation.</p>\n<p>When <code>stack_load</code> and <code>stack_store</code> can be directly encoded, we can switch to those, remove an explicit <code>stack_address</code>, and simplify x86 callee-preserved FPR machinery.</p>\n<p>For more, see <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\">this comment</a> and <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\">this comment</a>.</p>\n</blockquote>",
        "id": 193616750,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586552152
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498#issuecomment-612213138\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1498#issuecomment-612213138\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @bnjbvr</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"cranelift\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>bnjbvr: cranelift</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\" title=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 193616756,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586552162
    },
    {
        "content": "<p>iximeow edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\" title=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<p>In <code>isa/x86/abi.rs</code> we have to save callee-preserved FPRs for some calling conventions. We save these to the stack and reload them before exiting, but at the moment the Cranelift IR operations <code>stack_load</code> and <code>stack_store</code> are not directly encodable. In other parts of a function, <code>stack_load</code> and <code>stack_store</code> would be legalized and then optimized into the assembly we'd like (<code>movdqa [rsp + offset], xmm*</code>), but prologue/epilogue addition happen after both legalization and register allocation.</p>\n<p>When <code>stack_load</code> and <code>stack_store</code> can be directly encoded, we can switch to those, remove an explicit <code>stack_address</code>, and simplify x86 callee-preserved FPR machinery. #1198 adds these encodings.</p>\n<p>For more, see <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\">this comment</a> and <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\" title=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\">this comment</a>.</p>\n</blockquote>",
        "id": 193616801,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1586552177
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498#issuecomment-772721743\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<p>I think this is fixed with the new backend framework.</p>\n</blockquote>",
        "id": 225058464,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1612376729
    },
    {
        "content": "<p>cfallin closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/1498\">Issue #1498</a>:</p>\n<blockquote>\n<p>In <code>isa/x86/abi.rs</code> we have to save callee-preserved FPRs for some calling conventions. We save these to the stack and reload them before exiting, but at the moment the Cranelift IR operations <code>stack_load</code> and <code>stack_store</code> are not directly encodable. In other parts of a function, <code>stack_load</code> and <code>stack_store</code> would be legalized and then optimized into the assembly we'd like (<code>movdqa [rsp + offset], xmm*</code>), but prologue/epilogue addition happen after both legalization and register allocation.</p>\n<p>When <code>stack_load</code> and <code>stack_store</code> can be directly encoded, we can switch to those, remove an explicit <code>stack_address</code>, and simplify x86 callee-preserved FPR machinery. #1198 adds these encodings.</p>\n<p>For more, see <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L899-L902\">this comment</a> and <a href=\"https://github.com/bytecodealliance/wasmtime/blob/4cca5100858cb7aa4bec9f68e80d3c309ae1007e/cranelift/codegen/src/isa/x86/abi.rs#L1024-L1028\">this comment</a>.</p>\n</blockquote>",
        "id": 225066504,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1612379884
    }
]