[
    {
        "content": "<p>tathanhdinh opened <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326\">Issue #1326</a>:</p>\n<blockquote>\n<p>Hello all,<br>\nI'm still not yet familiar with cranelift, sorry if the question is trivial.</p>\n<p>In my toy C compiler, after generating the following function</p>\n<div class=\"codehilite\"><pre><span></span>function u0:0(i32) -&gt; i32 system_v {\n    sig0 = (i32, i64) -&gt; i32 system_v\n    sig1 = (i32) -&gt; i32 system_v\n    fn0 = colocated u0:0 sig1\n\nebb0(v0: i32):\n    v10 -&gt; v0\n    v8 = iconst.i32 0\n    v6 -&gt; v8\n    v7 -&gt; v8\n    jump ebb1\n\nebb1:\n    v1 = func_addr.i64 fn0\n    v2 = imul.i32 v0, v0\n    v3 = iadd_imm v2, 1\n    v4 = imul.i32 v0, v2\n    br_icmp ne v3, v4, ebb2\n    jump ebb3\n\nebb3:\n    v5 = call_indirect.i32 sig0, v0(v0, v1)\n    jump ebb2\n\nebb2:\n    v9 = iconst.i32 1\n    v11 = iadd.i32 v10, v9\n    return v11\n}\n</pre></div>\n\n\n<p>then <code>module.define_function(...)</code> crashes with:</p>\n<blockquote>\n<p>Compilation(Verifier(VerifierErrors([VerifierError { location: inst7, context: Some(\"v5 = call_indirect.i32 sig0, v0(v0, v1)\"), message: \"Call must have an encoding\" }])))</p>\n</blockquote>\n<p>I still don't understand why this error occurs, does it mean <code>call_indirect</code> needs an encoding? so how can I set the encoding for the instruction?</p>\n<p>Many thanks for any response.</p>\n</blockquote>",
        "id": 185172765,
        "sender_full_name": "GitHub",
        "timestamp": 1578529613
    },
    {
        "content": "<p>tathanhdinh labeled <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326\">Issue #1326</a>:</p>\n<blockquote>\n<p>Hello all,<br>\nI'm still not yet familiar with cranelift, sorry if the question is trivial.</p>\n<p>In my toy C compiler, after generating the following function</p>\n<div class=\"codehilite\"><pre><span></span>function u0:0(i32) -&gt; i32 system_v {\n    sig0 = (i32, i64) -&gt; i32 system_v\n    sig1 = (i32) -&gt; i32 system_v\n    fn0 = colocated u0:0 sig1\n\nebb0(v0: i32):\n    v10 -&gt; v0\n    v8 = iconst.i32 0\n    v6 -&gt; v8\n    v7 -&gt; v8\n    jump ebb1\n\nebb1:\n    v1 = func_addr.i64 fn0\n    v2 = imul.i32 v0, v0\n    v3 = iadd_imm v2, 1\n    v4 = imul.i32 v0, v2\n    br_icmp ne v3, v4, ebb2\n    jump ebb3\n\nebb3:\n    v5 = call_indirect.i32 sig0, v0(v0, v1)\n    jump ebb2\n\nebb2:\n    v9 = iconst.i32 1\n    v11 = iadd.i32 v10, v9\n    return v11\n}\n</pre></div>\n\n\n<p>then <code>module.define_function(...)</code> crashes with:</p>\n<blockquote>\n<p>Compilation(Verifier(VerifierErrors([VerifierError { location: inst7, context: Some(\"v5 = call_indirect.i32 sig0, v0(v0, v1)\"), message: \"Call must have an encoding\" }])))</p>\n</blockquote>\n<p>I still don't understand why this error occurs, does it mean <code>call_indirect</code> needs an encoding? so how can I set the encoding for the instruction?</p>\n<p>Many thanks for any response.</p>\n</blockquote>",
        "id": 185172766,
        "sender_full_name": "GitHub",
        "timestamp": 1578529613
    },
    {
        "content": "<p>tathanhdinh edited <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326\">Issue #1326</a>:</p>\n<blockquote>\n<p>Hello all,<br>\nI'm still not yet familiar with cranelift, sorry if the question is trivial.</p>\n<p>In my toy C compiler, after generating the following function</p>\n<div class=\"codehilite\"><pre><span></span>function u0:0(i32) -&gt; i32 system_v {\n    sig0 = (i32, i64) -&gt; i32 system_v\n    sig1 = (i32) -&gt; i32 system_v\n    fn0 = colocated u0:0 sig1\n\nebb0(v0: i32):\n    v10 -&gt; v0\n    v8 = iconst.i32 0\n    v6 -&gt; v8\n    v7 -&gt; v8\n    jump ebb1\n\nebb1:\n    v1 = func_addr.i64 fn0\n    v2 = imul.i32 v0, v0\n    v3 = iadd_imm v2, 1\n    v4 = imul.i32 v0, v2\n    br_icmp ne v3, v4, ebb2\n    jump ebb3\n\nebb3:\n    v5 = call_indirect.i32 sig0, v0(v0, v1)\n    jump ebb2\n\nebb2:\n    v9 = iconst.i32 1\n    v11 = iadd.i32 v10, v9\n    return v11\n}\n</pre></div>\n\n\n<p>then <code>module.define_function(...)</code> crashes with:</p>\n<blockquote>\n<p>Compilation(Verifier(VerifierErrors([VerifierError { location: inst7, context: Some(\"v5 = call_indirect.i32 sig0, v0(v0, v1)\"), message: \"Call must have an encoding\" }])))</p>\n</blockquote>\n<p>I still don't understand why this error occurs, does it mean <code>call_indirect</code> need an encoding? so how can I set the encoding for the instruction?</p>\n<p>Many thanks for any response.</p>\n</blockquote>",
        "id": 185172998,
        "sender_full_name": "GitHub",
        "timestamp": 1578529850
    },
    {
        "content": "<p>tathanhdinh <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326#issuecomment-572327140\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326#issuecomment-572327140\">commented</a> on <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326\">Issue #1326</a>:</p>\n<blockquote>\n<p>I found it, <code>v0</code> must be a pointer type.</p>\n</blockquote>",
        "id": 185173663,
        "sender_full_name": "GitHub",
        "timestamp": 1578530627
    },
    {
        "content": "<p>tathanhdinh closed <a href=\"https://github.com/bytecodealliance/cranelift/issues/1326\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/1326\">Issue #1326</a>:</p>\n<blockquote>\n<p>Hello all,<br>\nI'm still not yet familiar with cranelift, sorry if the question is trivial.</p>\n<p>In my toy C compiler, after generating the following function</p>\n<div class=\"codehilite\"><pre><span></span>function u0:0(i32) -&gt; i32 system_v {\n    sig0 = (i32, i64) -&gt; i32 system_v\n    sig1 = (i32) -&gt; i32 system_v\n    fn0 = colocated u0:0 sig1\n\nebb0(v0: i32):\n    v10 -&gt; v0\n    v8 = iconst.i32 0\n    v6 -&gt; v8\n    v7 -&gt; v8\n    jump ebb1\n\nebb1:\n    v1 = func_addr.i64 fn0\n    v2 = imul.i32 v0, v0\n    v3 = iadd_imm v2, 1\n    v4 = imul.i32 v0, v2\n    br_icmp ne v3, v4, ebb2\n    jump ebb3\n\nebb3:\n    v5 = call_indirect.i32 sig0, v0(v0, v1)\n    jump ebb2\n\nebb2:\n    v9 = iconst.i32 1\n    v11 = iadd.i32 v10, v9\n    return v11\n}\n</pre></div>\n\n\n<p>then <code>module.define_function(...)</code> crashes with:</p>\n<blockquote>\n<p>Compilation(Verifier(VerifierErrors([VerifierError { location: inst7, context: Some(\"v5 = call_indirect.i32 sig0, v0(v0, v1)\"), message: \"Call must have an encoding\" }])))</p>\n</blockquote>\n<p>I still don't understand why this error occurs, does it mean <code>call_indirect</code> need an encoding? so how can I set the encoding for the instruction?</p>\n<p>Many thanks for any response.</p>\n</blockquote>",
        "id": 185173664,
        "sender_full_name": "GitHub",
        "timestamp": 1578530627
    }
]