[
    {
        "content": "<p>alexcrichton transferred <a href=\"https://github.com/bytecodealliance/cranelift/issues/767\" target=\"_blank\" title=\"https://github.com/bytecodealliance/cranelift/issues/767\">Issue #767</a>:</p>\n<blockquote>\n<p>I think cranelift-preopt was separated from cranelift-codegen because we assume that, in general, the input IR has been generated by an optimizing compiler (namely, one that ran constant folding). This being said, in our use case, when translating wasm to clif, we're likely to introduce redundancies and constant-foldable instructions that aren't obvious to catch (because we're operating on one wasm binary opcode at a time). There was also another instance of constant-foldable operations being emitted by legalization recently.</p>\n<p>In principle, every pass that takes IR and augments it (by adding more IR nodes) is likely to introduce redundancies / constant-foldable instructions. I'd like someone to get more data on this, but how would people feel about putting the cranelift-preopt constant folding facilities into codegen instead?</p>\n</blockquote>",
        "id": 189361452,
        "sender_full_name": "GitHub",
        "timestamp": 1582932360
    }
]