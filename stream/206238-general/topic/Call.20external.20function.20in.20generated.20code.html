<html>
<head><meta charset="utf-8"><title>Call external function in generated code · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Call.20external.20function.20in.20generated.20code.html">Call external function in generated code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="400326167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Call%20external%20function%20in%20generated%20code/near/400326167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tianyu Geng <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Call.20external.20function.20in.20generated.20code.html#400326167">(Nov 04 2023 at 20:48)</a>:</h4>
<p>Hi folks, I am newbie trying to learn cranelift. I am wondering how to call an external function (say <code>sin</code> from libmath) from the generated code when emitting <code>.o</code> files with <code>cranelift-object</code>. Is it as simple as declaring a function with <code>module.declare_function("sin", Linkdage::Import, proper_signature)</code> and then the linker would be able to link correctly?</p>



<a name="400381118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Call%20external%20function%20in%20generated%20code/near/400381118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Call.20external.20function.20in.20generated.20code.html#400381118">(Nov 05 2023 at 10:00)</a>:</h4>
<p>Yes, it should be. Just make sure to add <code>-lm</code> to the linker invocation to depend on libm as that is where <code>sin</code> is defined.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>