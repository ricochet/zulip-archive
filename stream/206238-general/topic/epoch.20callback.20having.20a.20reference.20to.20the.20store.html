<html>
<head><meta charset="utf-8"><title>epoch callback having a reference to the store · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/epoch.20callback.20having.20a.20reference.20to.20the.20store.html">epoch callback having a reference to the store</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="341574647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/epoch%20callback%20having%20a%20reference%20to%20the%20store/near/341574647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Marco Concetto Rudilosso <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/epoch.20callback.20having.20a.20reference.20to.20the.20store.html#341574647">(Mar 13 2023 at 21:16)</a>:</h4>
<p>Currently the callback that you can set in <a href="https://docs.wasmtime.dev/api/wasmtime/struct.Store.html#method.epoch_deadline_callback">https://docs.wasmtime.dev/api/wasmtime/struct.Store.html#method.epoch_deadline_callback</a> does not have access to the store itself (nor any kind of reference to it) but only to its internal data. I do have a somehow weird use case where having access to the store could be useful: from a signal handler I would increase the epoch. When we hit the epoch deadline, I'd like to get a backtrace. This would allow me to build a very rudimentary profiler by just using <a href="https://docs.wasmtime.dev/api/wasmtime/struct.WasmBacktrace.html">https://docs.wasmtime.dev/api/wasmtime/struct.WasmBacktrace.html</a> </p>
<p>Would this be okay? I'm happy to make the change, but maybe it's wrong for some reason I do not understand.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>