<html>
<head><meta charset="utf-8"><title>running example wasi · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html">running example wasi</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="451415944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451415944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451415944">(Jul 15 2024 at 05:55)</a>:</h4>
<p>HI</p>
<p>I was trying to run one of the examples which is wasi, <a href="http://main.rs">main.rs</a> file.<br>
these are the two commands I executed.<br>
cmake examples/<br>
cargo run --example wasi</p>
<p>but I Gott he following error </p>
<p><em><strong><em>error</em></strong></em>:** failed to run custom build command for <code>test-programs-artifacts v0.0.0 (/Users/celinesantosh/Desktop/sem_5/wasmtime/crates/test-programs/artifacts)</code></p>
<p>Caused by:</p>
<p>process didn't exit successfully: <code>/Users/celinesantosh/Desktop/sem_5/wasmtime/target/debug/build/test-programs-artifacts-22b912d9b572dd6f/build-script-build</code> (exit status: 101)</p>
<p>--- stdout</p>
<p>cargo:rerun-if-changed=../../wasi-preview1-component-adapter</p>
<p>--- stderr</p>
<p>running: env -u CARGO_ENCODED_RUSTFLAGS CARGO_TARGET_DIR="/Users/celinesantosh/Desktop/sem_5/wasmtime/target/debug/build/test-programs-artifacts-2e8e593f7698d1fd/out" RUSTFLAGS="" "cargo" "build" "--release" "--package=wasi-preview1-component-adapter" "--target=wasm32-unknown-unknown"</p>
<p>Compiling indexmap v2.2.6</p>
<p>Compiling serde_json v1.0.107</p>
<p>Compiling serde_derive v1.0.188</p>
<p>Compiling memchr v2.5.0</p>
<p>Compiling prettyplease v0.2.20</p>
<p>Compiling byte-array-literals v24.0.0 (/Users/celinesantosh/Desktop/sem_5/wasmtime/crates/wasi-preview1-component-adapter/byte-array-literals)</p>
<p>Compiling wit-bindgen-rust-macro v0.27.0</p>
<p>Compiling object v0.36.0</p>
<p>Compiling wasi v0.11.0+wasi-snapshot-preview1</p>
<p>error[E0463]: can't find crate for <code>core</code></p>
<p>|</p>
<p>= note: the <code>wasm32-unknown-unknown</code> target may not be installed</p>
<p>= help: consider downloading the target with <code>rustup target add wasm32-unknown-unknown</code></p>
<p>= help: consider building the standard library from source with <code>cargo build -Zbuild-std</code></p>
<p>For more information about this error, try <code>rustc --explain E0463</code>.</p>
<p>error: could not compile <code>wasi</code> (lib) due to 1 previous error</p>
<p>warning: build failed, waiting for other jobs to finish...</p>
<p>thread 'main' panicked at crates/test-programs/artifacts/build.rs:138:5:</p>
<p>assertion failed: status.success()</p>
<p>note: run with <code>RUST_BACKTRACE=1</code> environment variable to display a backtrace<br>
<strong>warning</strong><strong>:</strong> build failed, waiting for other jobs to finish...**</p>



<a name="451438192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451438192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Levick (rylev) <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451438192">(Jul 15 2024 at 08:15)</a>:</h4>
<p>The solution is buried a bit in the output, but it's there:</p>
<blockquote>
<p>= note: the <code>wasm32-unknown-unknown</code> target may not be installed</p>
<p>= help: consider downloading the target with <code>rustup target add wasm32-unknown-unknown</code></p>
</blockquote>



<a name="451438265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451438265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Levick (rylev) <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451438265">(Jul 15 2024 at 08:16)</a>:</h4>
<p>If you run that <code>rustup</code> command, that should fix the issue.</p>



<a name="451456414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451456414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451456414">(Jul 15 2024 at 09:46)</a>:</h4>
<p>that fixed it  but still I am encountering issues.</p>
<p>MacBook-Air-2 wasmtime % cargo run --example wasi-async</p>
<p><strong>Compiling</strong> wasmtime-cli v24.0.0 (/Users/celinesantosh/Desktop/sem_5/wasmtime)</p>
<p><strong>Finished</strong> <code>dev</code> profile [unoptimized + debuginfo] target(s) in 3.81s</p>
<p><strong>Running</strong> <code>target/debug/examples/wasi-async</code></p>
<p>Error: failed to read input file: target/wasm32-wasi/debug/wasi.wasm</p>
<p>Caused by:</p>
<p>No such file or directory (os error 2)</p>



<a name="451461114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451461114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451461114">(Jul 15 2024 at 10:11)</a>:</h4>
<p>I'm going to ask the obvious question: <em>is there such a file or directory?</em></p>



<a name="451482902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451482902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451482902">(Jul 15 2024 at 12:11)</a>:</h4>
<p>I don't think <code>cargo run</code> works for wasm32-wasi binaries.  You'll need to use e.g. 'wasmtime run' to run the output, or else consider using <a href="https://github.com/bytecodealliance/cargo-wasi">https://github.com/bytecodealliance/cargo-wasi</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/cargo-wasi" style="background-image: url(&quot;https://uploads.zulipusercontent.net/35d49d62949090e50b80072a58abfb7ae6558bab/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613138623361366236313231616565643065643431623534656537346266383835343039393765363437323838373264633431663233616634326564373065622f62797465636f6465616c6c69616e63652f636172676f2d77617369&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/cargo-wasi" title="GitHub - bytecodealliance/cargo-wasi: A lightweight Cargo subcommand to build Rust code for the `wasm32-wasi` target">GitHub - bytecodealliance/cargo-wasi: A lightweight Cargo subcommand to build Rust code for the `wasm32-wasi` target</a></div><div class="message_embed_description">A lightweight Cargo subcommand to build Rust code for the `wasm32-wasi` target - bytecodealliance/cargo-wasi</div></div></div>



<a name="451747253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451747253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451747253">(Jul 16 2024 at 12:25)</a>:</h4>
<p>Hi</p>
<p>thanks a lot for the quick replies. <br>
For the wasi example , in the <a href="http://main.rs">main.rs</a> file I changed the path to /target/wasm32-wasi/release/wasi.wasm.<br>
I found that the wasi.wasm was being generated at this location. So I changed the <a href="http://main.rs">main.rs</a> file and now it prints the output.</p>



<a name="451749371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/running%20example%20wasi/near/451749371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/running.20example.20wasi.html#451749371">(Jul 16 2024 at 12:38)</a>:</h4>
<p>Yay! !</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>