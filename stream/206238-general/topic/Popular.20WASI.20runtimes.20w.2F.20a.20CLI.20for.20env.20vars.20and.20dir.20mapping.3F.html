<html>
<head><meta charset="utf-8"><title>Popular WASI runtimes w/ a CLI for env vars and dir mapping? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html">Popular WASI runtimes w/ a CLI for env vars and dir mapping?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="393822661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393822661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393822661">(Sep 29 2023 at 00:11)</a>:</h4>
<p>I realize this might a slightly controversial ask, but I'm trying to get a list of popular WASI runtimes to compare their CLIs. I'm trying to see if there's any commonality in how they specify environment variables and host:local directory mappings. I've already checked wasmtime, wasmedge, and wazero out (wasmtime uses <code>--mapdir</code>, the other two use <code>--dir</code>; all three use <code>--env</code>). WAMR/iwasm doesn't seem to suport mapping directories to a different location within the runtime.</p>



<a name="393862033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393862033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Diego Antonio Rosario Palomino <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393862033">(Sep 29 2023 at 06:13)</a>:</h4>
<p>Most wasm runtimes are embedded in Javascript. You could try like the one in chrome</p>



<a name="393904437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393904437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramon Klass <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393904437">(Sep 29 2023 at 10:30)</a>:</h4>
<p>I think he is currently only investigating WASI (not WASM) runtimes that can run server-side WASI with virtualization, the browser wasm is boring, we all know what it supports and what it doesn't ;)</p>



<a name="393906721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393906721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393906721">(Sep 29 2023 at 10:46)</a>:</h4>
<p>wasmtime, wasm3, wamr, wazero, wasmedge, wasmer, node, deno? are the  ones off the top of my head, each one doing some "version" of wasi - up to you to explore to what extent.</p>



<a name="393906768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393906768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393906768">(Sep 29 2023 at 10:47)</a>:</h4>
<p>if you want more, I can find them, because there are a lot of experimental and academic ones as well.</p>



<a name="393910282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393910282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393910282">(Sep 29 2023 at 11:10)</a>:</h4>
<p>WaVe, Wizard, F&lt;number goes here&gt;, ....</p>



<a name="393915305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393915305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393915305">(Sep 29 2023 at 11:47)</a>:</h4>
<p>For browser wasi there is the <a href="http://runno.dev">runno.dev</a><br>
JS API: <a href="https://runno.dev/docs/wasi/#md:quickstart">https://runno.dev/docs/wasi/#md:quickstart</a><br>
And declarative web component API: <a href="https://runno.dev/articles/wasi-web-component">https://runno.dev/articles/wasi-web-component</a></p>
<div class="message_embed"><a class="message_embed_image" href="http://runno.dev" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/fe6d3301f804baf8846a92b4f1100e2854007063\/68747470733a2f2f6173736574732e72756e6e6f2e6465762f736f6369616c2d6d656469612e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="http://runno.dev" title="Runno">Runno</a></div><div class="message_embed_description">Make your code samples Runno.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://runno.dev/articles/wasi-web-component" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/fe6d3301f804baf8846a92b4f1100e2854007063\/68747470733a2f2f6173736574732e72756e6e6f2e6465762f736f6369616c2d6d656469612e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://runno.dev/articles/wasi-web-component" title="Runno">Runno</a></div><div class="message_embed_description">Make your code samples Runno.</div></div></div>



<a name="393915695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/393915695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#393915695">(Sep 29 2023 at 11:50)</a>:</h4>
<p>wasi-virt could also be in the list of clis setting up mappings for wasi apis</p>



<a name="394025604"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/394025604" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#394025604">(Sep 30 2023 at 00:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="550770">Ramon Klass</span> <a href="#narrow/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F/near/393904437">said</a>:</p>
<blockquote>
<p>I think he is currently only investigating WASI (not WASM) runtimes that can run server-side WASI with virtualization</p>
</blockquote>
<p>Correct! This is specifically about seeing what it would take to support various WASI runtimes for building CPython instead of hard-coding wasmtime (as I'm doing right now out of laziness).</p>



<a name="394385575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/394385575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#394385575">(Oct 02 2023 at 10:18)</a>:</h4>
<p>wasmtime is about to support preview 2 wasi, jco will soon, wamr will take a bit more, outside of that I have no knowledge at this time.</p>



<a name="394418046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/394418046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#394418046">(Oct 02 2023 at 12:39)</a>:</h4>
<p>I think possibly more interesting is the ability for a runtime that supports preview 2 to also run preview 1, which is something that the ecosystem is making possible.....</p>



<a name="394936696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/394936696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#394936696">(Oct 05 2023 at 00:41)</a>:</h4>
<p>I looked at wasmtime, wazero, wasmer, wasmedge, wasm3, and WAMR/iwasm. The last two don't have all the CLI flags I was looking for. For for the 4 that did, they all support <code>--env</code>, but vary on how to map a guest directory to a host directory (there's <code>--mapdir</code>, <code>--dir</code> via <code>host:guest</code> format, and <code>--mount</code> among them).</p>



<a name="394991611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/394991611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#394991611">(Oct 05 2023 at 08:41)</a>:</h4>
<p>right, I'll reach out to the wamr team about these flags.</p>



<a name="397558784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/397558784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#397558784">(Oct 19 2023 at 18:46)</a>:</h4>
<p>FYI wasmtime 14 is switching to <code>--dir</code> according to <a href="https://github.com/bytecodealliance/wasmtime/pull/6925">https://github.com/bytecodealliance/wasmtime/pull/6925</a>, although they are using <code>::</code> as the path separator while wasmedge uses <code>:</code></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/6925" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/03b87f36e4e0ce134ae9492370b5fa452f43b351\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663861366638343665626565653531623364376337386439613062313030356461356530313762363735343334333933363963626136616538323638323037642f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f36393235)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/6925" title="Redesign Wasmtime's CLI by alexcrichton · Pull Request #6925 · bytecodealliance/wasmtime">Redesign Wasmtime's CLI by alexcrichton · Pull Request #6925 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit follows through on discussion from #6741 to redesign the flags that the wasmtime binary accepts on the CLI. Almost all flags have been renamed/moved and will require callers to update. ...</div></div></div>



<a name="397595528"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Popular%20WASI%20runtimes%20w/%20a%20CLI%20for%20env%20vars%20and%20dir%20mapping%3F/near/397595528" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Popular.20WASI.20runtimes.20w.2F.20a.20CLI.20for.20env.20vars.20and.20dir.20mapping.3F.html#397595528">(Oct 20 2023 at 00:14)</a>:</h4>
<p>I've opened an <a href="https://github.com/bytecodealliance/wasmtime/issues/7309">issue for this</a> for what syntax to pick for Wasmtime</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/7309" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/d5bd765896a42023db221006cebfb2bad1fea14c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643565393730663131363232636632386664386564646161663237616431323265316331663432386432383938646332393931393234613531336566333931302f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f37333039)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/7309" title="Consider new syntax or a new option for the `--dir` CLI option · Issue #7309 · bytecodealliance/wasmtime">Consider new syntax or a new option for the `--dir` CLI option · Issue #7309 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This issue is inspired by discussion on #7301 and Zulip. To summarize a bit, the --dir syntax is inconsistent between Wasmtime and other runtimes, and a notable inconsistency of Wasmtime is the usa...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>