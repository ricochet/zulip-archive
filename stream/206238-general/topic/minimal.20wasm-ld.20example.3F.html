<html>
<head><meta charset="utf-8"><title>minimal wasm-ld example? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html">minimal wasm-ld example?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197031420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/minimal%20wasm-ld%20example%3F/near/197031420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BC <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html#197031420">(May 10 2020 at 04:08)</a>:</h4>
<p>Hello.  Does anyone have a minimal example of static linking of two wasm files (outputs of wat2wasm) using wasm-ld?  I have two wat files.  One exports a function "f" that the other imports.  Using wat2wasm with --relocatable followed by wasm-ld-11 gives the error <code>wasm-ld-11: error: a.wasm: Out of order section type: 0</code>    This gist <a href="https://gist.github.com/bcdroid/57c5cf048c585d60894b2e91c5b7119a" title="https://gist.github.com/bcdroid/57c5cf048c585d60894b2e91c5b7119a">https://gist.github.com/bcdroid/57c5cf048c585d60894b2e91c5b7119a</a> contains the wat files and commands I used.  Is this kind of static linking intended?  Do I need to create a custom section in the wasm files to control static linking?</p>
<div class="message_embed"><a class="message_embed_image" href="https://gist.github.com/bcdroid/57c5cf048c585d60894b2e91c5b7119a" style="background-image: url(https://github.githubassets.com/images/modules/gists/gist-og-image.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://gist.github.com/bcdroid/57c5cf048c585d60894b2e91c5b7119a" title="a.wat">a.wat</a></div><div class="message_embed_description">GitHub Gist: instantly share code, notes, and snippets.</div></div></div>



<a name="197317210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/minimal%20wasm-ld%20example%3F/near/197317210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html#197317210">(May 12 2020 at 18:21)</a>:</h4>
<p>Wasm-ld is designed to link llvm wasm object files, which are not the same thing as wasm modules</p>



<a name="197317266"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/minimal%20wasm-ld%20example%3F/near/197317266" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html#197317266">(May 12 2020 at 18:22)</a>:</h4>
<p>I’m not aware of a tool that does what you are describing</p>



<a name="197317727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/minimal%20wasm-ld%20example%3F/near/197317727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html#197317727">(May 12 2020 at 18:25)</a>:</h4>
<p>Connecting imports to exports is functionality typically provided by the runtime. The apis for specifying how this works are specific to runtimes (js api works one way, Wasmtime another). There is currently some work going on to describe this sort of cross-module linking in a standard way, called the Linking proposal, which is closely related to the Interface Types proposal</p>



<a name="197324078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/minimal%20wasm-ld%20example%3F/near/197324078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BC <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/minimal.20wasm-ld.20example.3F.html#197324078">(May 12 2020 at 19:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253992">Pat Hickey</span> <a href="#narrow/stream/206238-general/topic/minimal.20wasm-ld.20example.3F/near/197317210">said</a>:</p>
<blockquote>
<p>Wasm-ld is designed to link llvm wasm object files, which are not the same thing as wasm modules</p>
</blockquote>
<p>Thank you very much for that!  I will try linking in the runtime instead (and read through the Linking proposal).  </p>
<p>In case it is of interest to anyone, the context is that I am teaching a class on wasm to students with a little Python but no systems programming experience.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>