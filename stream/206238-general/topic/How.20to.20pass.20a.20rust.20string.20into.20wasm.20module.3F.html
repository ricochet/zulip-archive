<html>
<head><meta charset="utf-8"><title>How to pass a rust string into wasm module? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html">How to pass a rust string into wasm module?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="310742910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310742910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310742910">(Nov 18 2022 at 03:38)</a>:</h4>
<p>How to pass a string into wasm then manipulate it, then return with a new string defined in wasm? is there any example for this?</p>



<a name="310760257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310760257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310760257">(Nov 18 2022 at 07:09)</a>:</h4>
<p>can I pass a tcp connection to wasm module and handle it as a File? If I implement the WasiFile trait for it</p>



<a name="310833765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310833765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310833765">(Nov 18 2022 at 14:27)</a>:</h4>
<p>As of wasmtime 1.0 you don't even need to implement <code>WasiFile</code>: <a href="https://docs.rs/wasmtime-wasi/2.0.2/wasmtime_wasi/sync/struct.WasiCtxBuilder.html#method.preopened_socket">https://docs.rs/wasmtime-wasi/2.0.2/wasmtime_wasi/sync/struct.WasiCtxBuilder.html#method.preopened_socket</a></p>



<a name="310975666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310975666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310975666">(Nov 19 2022 at 08:00)</a>:</h4>
<p>what does the fd in the function mean? the fd of the opened socket?</p>



<a name="310984258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310984258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310984258">(Nov 19 2022 at 09:27)</a>:</h4>
<p>The fd that will be assigned to the socket in the guest.</p>



<a name="310990713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/310990713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#310990713">(Nov 19 2022 at 10:20)</a>:</h4>
<p>okay thanks, I will try it out</p>



<a name="311010361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/311010361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#311010361">(Nov 19 2022 at 12:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="480579">Lann Martin</span> <a href="#narrow/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F/near/310833765">said</a>:</p>
<blockquote>
<p>As of wasmtime 1.0 you don't even need to implement <code>WasiFile</code>: <a href="https://docs.rs/wasmtime-wasi/2.0.2/wasmtime_wasi/sync/struct.WasiCtxBuilder.html#method.preopened_socket">https://docs.rs/wasmtime-wasi/2.0.2/wasmtime_wasi/sync/struct.WasiCtxBuilder.html#method.preopened_socket</a></p>
</blockquote>
<p>I am quite confused on this function, the Into&lt;Socket&gt; requires cap_std::net::TcpStream, while that is based on <code>non-wasi</code> feature, which is kind of confusing, can you possibly explain it to me? thanks</p>



<a name="311029166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20pass%20a%20rust%20string%20into%20wasm%20module%3F/near/311029166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Zhang <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20pass.20a.20rust.20string.20into.20wasm.20module.3F.html#311029166">(Nov 19 2022 at 14:49)</a>:</h4>
<p>Can anyone show me a very simple example of that function usage? I really don't know how to handle it correctly.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>