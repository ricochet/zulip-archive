<html>
<head><meta charset="utf-8"><title>exception handling · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html">exception handling</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="255729320"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255729320" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255729320">(Oct 01 2021 at 11:34)</a>:</h4>
<p>wasmtime  status plz : functional or not ?</p>
<p>(don't personally need it right now - someone on another board asked)</p>



<a name="255794809"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255794809" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255794809">(Oct 01 2021 at 19:22)</a>:</h4>
<p>Do you mean wasm traps (work), the wasm exceptions proposal (no implementations anywhere AFAIK), panics from inside rust functions provided to the wasm code (work) or C++ exceptions when compiling to wasm (emscripten has a pass to turn them into mvp wasm code, so no engine support necessary in that case, emscripten doesn't work in wasmtime though) or something else?</p>



<a name="255795490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255795490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255795490">(Oct 01 2021 at 19:27)</a>:</h4>
<p>I mean this on mozilla web assembly group : <a href="https://matrix.to/#/!KoNjfbMUbtwPSBcKlx:mozilla.org/$eKZr2a4teGWVUC6qFFuVWuruuAzbYW-vDXrR0RtYGwc?via=mozilla.org&amp;via=igalia.com&amp;via=matrix.org">https://matrix.to/#/!KoNjfbMUbtwPSBcKlx:mozilla.org/$eKZr2a4teGWVUC6qFFuVWuruuAzbYW-vDXrR0RtYGwc?via=mozilla.org&amp;via=igalia.com&amp;via=matrix.org</a></p>
<p>shouldn't get involved, not my current issue. but fyi. he asked if wasmtime supports exceptions &amp; I don't know.</p>



<a name="255795913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255795913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255795913">(Oct 01 2021 at 19:30)</a>:</h4>
<p>unsure if that link is valid, <a href="https://chat.mozilla.org/#/room/#webassembly:mozilla.org">https://chat.mozilla.org/#/room/#webassembly:mozilla.org</a></p>
<p>jmux posts, just above my lldbg stuff.</p>
<div class="message_embed"><a class="message_embed_image" href="https://chat.mozilla.org/#/room/#webassembly:mozilla.org" style="background-image: url(https://app.element.io/themes/element/img/logos/opengraph.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://chat.mozilla.org/#/room/#webassembly:mozilla.org" title="Element">Element</a></div></div></div>



<a name="255797664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255797664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255797664">(Oct 01 2021 at 19:45)</a>:</h4>
<p>Replied over on Matrix; the answer is, unfortunately, that we don't support Wasm exception handling in Wasmtime yet</p>



<a name="255797707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255797707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255797707">(Oct 01 2021 at 19:45)</a>:</h4>
<p>At some point we should  but it's not being actively worked on by anyone (AFAIK)</p>



<a name="255798571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255798571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255798571">(Oct 01 2021 at 19:53)</a>:</h4>
<p>we do have exceptions support in <code>wasmparser</code>/<code>wasm-encoder</code>/<code>wasm-smith</code>/etc. fwiw so it is "just" a matter of implementing support in wasmtime (and cranelift)</p>



<a name="255855082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255855082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255855082">(Oct 02 2021 at 09:00)</a>:</h4>
<p>to complete my tangent, if he really must do something wasm with exceptions right now, emscripten is the way ?</p>



<a name="255855315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255855315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255855315">(Oct 02 2021 at 09:04)</a>:</h4>
<p><a href="https://emscripten.org/">https://emscripten.org/</a></p>
<p>apparently not.  its a toolchain, not a runtime.</p>



<a name="255855409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255855409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255855409">(Oct 02 2021 at 09:06)</a>:</h4>
<p><a href="https://emscripten.org/docs/porting/exceptions.html">https://emscripten.org/docs/porting/exceptions.html</a></p>



<a name="255871443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/255871443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jan-Marek Glogowski <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#255871443">(Oct 02 2021 at 13:29)</a>:</h4>
<p>For now I can use Emscripten's "JavaScript-based exception" handling. LibreOffice (LO) uses exceptions + threads. My build with -fwasm-exceptions failed, because the libpng + libjpeg based image decoders use setjmp + longjmp (patches tagged with SjLj in LLVM), which isn't supported by LLVM. Otherwise I have a LO demo app running in the browser (vcldemo), but that just tests the graphics backend. Still need to find a way to figure out dynamic function calls based on some mangled data, probably using call_indirect somehow. I've read somewhere, that WASM function tables + function typedef are dynamic, so eventually I can generate the entries on demand. On other platforms it uses assembler to prepare the needed registers with the systems call convention and eventual some trampoline code.</p>



<a name="326695309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/326695309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Woods <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#326695309">(Feb 08 2023 at 22:16)</a>:</h4>
<p>It's been a long time since there was a conversation here. I'm pleased to report that we are working on adding Exception handling support to WAMR (not Wasmtime currently). There is a Github issue we are using to track this, you can find it here : <a href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1884">https://github.com/bytecodealliance/wasm-micro-runtime/issues/1884</a></p>
<p>Please feel free to comment.</p>
<p>At the moment we've working through an implementation just for WAMR's interpreter, so not JIT / AOT support, at least initially.</p>
<p>We do have compatibility concerns, and would like to reach out to the browser teams to ensure that replicate whatever compliance that was completed between Spidermonkey and V8 to ensure exception handling worked between both teams, and of course to understand how the emscripten folk modified the clang++ tool chain to support WASM's exceptions..... some more learning to do, but we are making progress at the moment.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1884" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/019f0b60743b61b1eaa5ba8b572b0d9c145ffb3c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f626533363634633562383562663064636238333639653863643033346630346436333932376439666331356635633830633465323630663135356235636266372f62797465636f6465616c6c69616e63652f7761736d2d6d6963726f2d72756e74696d652f6973737565732f31383834)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-micro-runtime/issues/1884" title="Adding Support for Exception Handling · Issue #1884 · bytecodealliance/wasm-micro-runtime">Adding Support for Exception Handling · Issue #1884 · bytecodealliance/wasm-micro-runtime</a></div><div class="message_embed_description">This issue has been created to track the implementation of exception handling support. This is based on the: Exception proposal. Exception WASM Specification. Current Status Exception handling is c...</div></div></div>



<a name="326703425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/326703425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#326703425">(Feb 08 2023 at 23:12)</a>:</h4>
<p>For the record I'm going to work on adding exception support to Cranelift for my bachlor thesis.</p>



<a name="352649564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352649564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352649564">(Apr 25 2023 at 22:26)</a>:</h4>
<p>Is there any non -browser runtime that support wasm exceptions yet?</p>



<a name="352663812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352663812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bailey Hayes <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352663812">(Apr 26 2023 at 00:38)</a>:</h4>
<p><a href="https://webassembly.org/roadmap/">https://webassembly.org/roadmap/</a>  only if  you count wasm2c.</p>
<p>Wasmtime does not: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals-support.md">https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals-support.md</a><br>
I scanned wamr and did not find mentions of the proposal there: <a href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/a2d4744a2b2c587eacca66c357dc2e88925fcadd/RELEASE_NOTES.md">https://github.com/bytecodealliance/wasm-micro-runtime/blob/a2d4744a2b2c587eacca66c357dc2e88925fcadd/RELEASE_NOTES.md</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals-support.md" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/6f47072d72e253623343286283176fccbff09411\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f336265323563326432656266653966666633346237613565306137303331316161303539316231653935306632323861336635303766376261646530316665362f62797465636f6465616c6c69616e63652f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals-support.md" title="wasmtime/stability-wasm-proposals-support.md at main · bytecodealliance/wasmtime">wasmtime/stability-wasm-proposals-support.md at main · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/a2d4744a2b2c587eacca66c357dc2e88925fcadd/RELEASE_NOTES.md" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/205225df17f730c22ba333356d717f186c0bb9a6\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f656432383161356262636363636432353335383063383334646338353161376133383334343863656232633766306365623564663766386239366162633038342f62797465636f6465616c6c69616e63652f7761736d2d6d6963726f2d72756e74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-micro-runtime/blob/a2d4744a2b2c587eacca66c357dc2e88925fcadd/RELEASE_NOTES.md" title="wasm-micro-runtime/RELEASE_NOTES.md at a2d4744a2b2c587eacca66c357dc2e88925fcadd · bytecodealliance/wasm-micro-runtime">wasm-micro-runtime/RELEASE_NOTES.md at a2d4744a2b2c587eacca66c357dc2e88925fcadd · bytecodealliance/wasm-micro-runtime</a></div><div class="message_embed_description">WebAssembly Micro Runtime (WAMR). Contribute to bytecodealliance/wasm-micro-runtime development by creating an account on GitHub.</div></div></div>



<a name="352665184"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352665184" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352665184">(Apr 26 2023 at 00:50)</a>:</h4>
<p>Thanks, I guess there is node/v8 depending if you count that as browser.  Runs from the CLI so it is available where the other runtimes are generally at least.</p>



<a name="352702674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352702674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352702674">(Apr 26 2023 at 06:43)</a>:</h4>
<p>I'm currently working on adding exception support to Cranelift for my bachelor thesis.</p>



<a name="352780193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352780193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352780193">(Apr 26 2023 at 12:13)</a>:</h4>
<p>Awesome, good luck and look forward to seeing it</p>



<a name="352780613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/352780613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#352780613">(Apr 26 2023 at 12:14)</a>:</h4>
<p>Thanks!</p>



<a name="358730645"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exception%20handling/near/358730645" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exception.20handling.html#358730645">(May 16 2023 at 13:24)</a>:</h4>
<p>Status update: Got exception handling working with cg_clif. Currently working on implementing it for wasmtime.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>