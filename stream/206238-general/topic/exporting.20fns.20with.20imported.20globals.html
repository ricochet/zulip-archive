<html>
<head><meta charset="utf-8"><title>exporting fns with imported globals · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exporting.20fns.20with.20imported.20globals.html">exporting fns with imported globals</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="199762728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exporting%20fns%20with%20imported%20globals/near/199762728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub Konka <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exporting.20fns.20with.20imported.20globals.html#199762728">(Jun 04 2020 at 15:19)</a>:</h4>
<p>Here's a trick question that maybe someone could help me out with: does anyone know if it is possible to generate a lib-style Wasm from C/Rust (with LLVM as backend) where we export a function which makes use of an imported global variable? For some context, here are some gists with C, Rust and desired WAT sources: <a href="https://gist.github.com/kubkon/56ee4359fceeef469c9c0e58bf648292">https://gist.github.com/kubkon/56ee4359fceeef469c9c0e58bf648292</a>. Both Rust and C which AFAIK utilise <code>wasm-ld</code> behind the scenes don't seem to play ball here with me. I wanted to double check here before asking/submitting a potential bug in upstream LLVM. Oh, cc <span class="user-mention" data-user-id="253994">@Alex Crichton</span> <span class="user-mention" data-user-id="254083">@Dan Gohman</span> <span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> perhaps you'll know more on this.</p>
<div class="message_embed"><a class="message_embed_image" href="https://gist.github.com/kubkon/56ee4359fceeef469c9c0e58bf648292" style="background-image: url(https://github.githubassets.com/images/modules/gists/gist-og-image.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://gist.github.com/kubkon/56ee4359fceeef469c9c0e58bf648292" title="Import globals and export func that uses them">Import globals and export func that uses them</a></div><div class="message_embed_description">Import globals and export func that uses them. GitHub Gist: instantly share code, notes, and snippets.</div></div></div>



<a name="199770374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exporting%20fns%20with%20imported%20globals/near/199770374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exporting.20fns.20with.20imported.20globals.html#199770374">(Jun 04 2020 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="263195">@Jakub Konka</span> currently, no</p>



<a name="199770431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exporting%20fns%20with%20imported%20globals/near/199770431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exporting.20fns.20with.20imported.20globals.html#199770431">(Jun 04 2020 at 16:08)</a>:</h4>
<p>I don't think LLVM has any ability to import a custom global</p>



<a name="199773675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/exporting%20fns%20with%20imported%20globals/near/199773675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub Konka <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/exporting.20fns.20with.20imported.20globals.html#199773675">(Jun 04 2020 at 16:31)</a>:</h4>
<p>That’s what I thought, thanks <span class="user-mention" data-user-id="253994">@Alex Crichton</span>!</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>