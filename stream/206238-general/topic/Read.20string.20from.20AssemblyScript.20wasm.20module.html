<html>
<head><meta charset="utf-8"><title>Read string from AssemblyScript wasm module · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Read.20string.20from.20AssemblyScript.20wasm.20module.html">Read string from AssemblyScript wasm module</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="299550176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Read%20string%20from%20AssemblyScript%20wasm%20module/near/299550176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ari Seyhun <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Read.20string.20from.20AssemblyScript.20wasm.20module.html#299550176">(Sep 19 2022 at 11:59)</a>:</h4>
<p>I'm trying to read a string from an assemblyscript wasm module.</p>
<p>I've loaded the module sucessfully, and tried calling console.log. console.log provides one argument: <code>u32</code>, which is an offset to where the string is stored in memory, though my problem is that I don't know the length of this string, which is required for the <code>memory.read(...)</code> method.<br>
I was thinking I might need something like read_until, but I'm not sure exactly.</p>
<p>Any ideas on how I can read a full string from an AssemblyScript compiled module from wasmtime Rust?</p>



<a name="299633137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Read%20string%20from%20AssemblyScript%20wasm%20module/near/299633137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Peter Huene <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Read.20string.20from.20AssemblyScript.20wasm.20module.html#299633137">(Sep 19 2022 at 19:42)</a>:</h4>
<p>According to <a href="https://www.assemblyscript.org/runtime.html#memory-layout">https://www.assemblyscript.org/runtime.html#memory-layout</a>, strings have their length encoded in the <code>rtSize</code> member of the header that is at offset <code>-4</code> from the string's data pointer, which is in bytes and not UTF-16 (or perhaps WTF-16?) code units.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>