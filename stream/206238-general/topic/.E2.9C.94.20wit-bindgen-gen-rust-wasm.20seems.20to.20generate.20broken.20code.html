<html>
<head><meta charset="utf-8"><title>✔ wit-bindgen-gen-rust-wasm seems to generate broken code · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html">✔ wit-bindgen-gen-rust-wasm seems to generate broken code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="264577947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264577947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> handicraftsman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264577947">(Dec 11 2021 at 18:48)</a>:</h4>
<p>Hi, for WIT like below:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">resource</span><span class="w"> </span><span class="n">Task</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">execute</span>: <span class="nc">function</span><span class="p">()</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Is it okay that wit-bindgen-gen-rust-wasm generates broken code? (rustc screams at it with errors)<br>
It is mostly screaming about trait references not having <code>dyn</code> keyword, etc.</p>



<a name="264578065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264578065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> handicraftsman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264578065">(Dec 11 2021 at 18:50)</a>:</h4>
<p>Let me send cargo/rustc logs<br>
<a href="https://www.toptal.com/developers/hastebin/bemanikogi.log">https://www.toptal.com/developers/hastebin/bemanikogi.log</a></p>



<a name="264578191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264578191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> handicraftsman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264578191">(Dec 11 2021 at 18:52)</a>:</h4>
<p>Running it in export mode</p>



<a name="264580374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264580374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264580374">(Dec 11 2021 at 19:39)</a>:</h4>
<p>Does it work if you use the 2018 edition of rust instead of 2021? Trait object without <code>dyn</code> had been deprecated in the 2018 edition and removed in the 2021 edition.</p>



<a name="264582913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264582913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> handicraftsman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264582913">(Dec 11 2021 at 20:30)</a>:</h4>
<p>This was my misunderstanding, sorry - I thought the declarations can be freestanding</p>



<a name="264582917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/%E2%9C%94%20wit-bindgen-gen-rust-wasm%20seems%20to%20generate%20broken%20code/near/264582917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/.E2.9C.94.20wit-bindgen-gen-rust-wasm.20seems.20to.20generate.20broken.20code.html#264582917">(Dec 11 2021 at 20:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="463856">handicraftsman</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>