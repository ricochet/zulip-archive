<html>
<head><meta charset="utf-8"><title>How to store f32 using the Rust API? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20store.20f32.20using.20the.20Rust.20API.3F.html">How to store f32 using the Rust API?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="484087020"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20store%20f32%20using%20the%20Rust%20API%3F/near/484087020" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Farooq <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20store.20f32.20using.20the.20Rust.20API.3F.html#484087020">(Nov 23 2024 at 18:51)</a>:</h4>
<p>Hello. I'm using cranelift to compile a set of arithmetic operations on F32 and then execute them for more efficient use of computation time. But I can't find out how should I store a F32 after I've done some arithmetics on them. Here's my code and it fails during verification:<br>
<a href="https://codeberg.org/farooqkz/wakegp/src/branch/master/src/compiler.rs#L95">https://codeberg.org/farooqkz/wakegp/src/branch/master/src/compiler.rs#L95</a></p>
<p>The message is:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Verification</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">VerifierErrors</span><span class="p">([</span><span class="n">VerifierError</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">location</span><span class="p">:</span><span class="w"> </span><span class="nc">inst5</span><span class="p">,</span><span class="w"> </span><span class="n">context</span><span class="p">:</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">"store.i64 v2, v6  ; v2 = 0x7ffd_7df4_bd80, v6 = 0x1.800000p1"</span><span class="p">),</span><span class="w"> </span><span class="n">message</span><span class="p">:</span><span class="w"> </span><span class="s">"arg 1 (v6) with type f32 failed to satisfy type set ValueTypeSet { lanes: cranelift_bitset::scalar::ScalarBitSet&lt;u16&gt; { 0: true, 1: false, 2: false, 3: false, 4: false, 5: false, 6: false, 7: false, 8: false, 9: false, 10: false, 11: false, 12: false, 13: false, 14: false, 15: false }, ints: cranelift_bitset::scalar::ScalarBitSet&lt;u8&gt; { 0: false, 1: false, 2: false, 3: false, 4: false, 5: true, 6: true, 7: false }, floats: cranelift_bitset::scalar::ScalarBitSet&lt;u8&gt; { 0: false, 1: false, 2: false, 3: false, 4: false, 5: false, 6: false, 7: false }, dynamic_lanes: cranelift_bitset::scalar::ScalarBitSet&lt;u16&gt; { 0: false, 1: false, 2: false, 3: false, 4: false, 5: false, 6: false, 7: false, 8: false, 9: false, 10: false, 11: false, 12: false, 13: false, 14: false, 15: false } }"</span><span class="w"> </span><span class="p">}])</span>
</code></pre></div>
<p>Thanks in advance!</p>
<div class="message_embed"><a class="message_embed_image" href="https://codeberg.org/farooqkz/wakegp/src/branch/master/src/compiler.rs#L95" style="background-image: url(&quot;https://uploads.zulipusercontent.net/776324b1528ffb4fde3a7d0cd8261b7c74306dcd/68747470733a2f2f636f6465626572672e6f72672f617661746172732f6133653939613562666333633638303466633062656635386234366663333466&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://codeberg.org/farooqkz/wakegp/src/branch/master/src/compiler.rs#L95" title="wakegp/src/compiler.rs at master">wakegp/src/compiler.rs at master</a></div><div class="message_embed_description">wakegp - Detecting wake words using Linear Genetic Programming</div></div></div>



<a name="484087597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20store%20f32%20using%20the%20Rust%20API%3F/near/484087597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Farooq <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20store.20f32.20using.20the.20Rust.20API.3F.html#484087597">(Nov 23 2024 at 18:59)</a>:</h4>
<p>BTW, meanwhile if you have suggestions for improving my code, I will appreciate that. Been programming for a quite long time but it's my first time trying to generate IR and using a compiler back-end. I am generating programs on the fly and then I want to compile them before testing them on a few thousands of testcases to gain a hopefully massive speedup.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>