<html>
<head><meta charset="utf-8"><title>contributing to rsix · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html">contributing to rsix</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="251915616"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251915616" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251915616">(Sep 03 2021 at 17:29)</a>:</h4>
<p>Hello everyone!</p>
<p>I'd like to contribute to <code>rsix</code> and would like some guidance as to things I could implement or issues I could solve</p>



<a name="251916033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251916033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251916033">(Sep 03 2021 at 17:32)</a>:</h4>
<p>Hello and welcome! cc <span class="user-mention" data-user-id="254083">@Dan Gohman</span> for this -- he might have some thoughts on good starter issues</p>



<a name="251923421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251923421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251923421">(Sep 03 2021 at 18:28)</a>:</h4>
<p>Hello! Are there specific features you're interested in working on, or are you looking for ideas? :-)</p>



<a name="251927165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251927165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251927165">(Sep 03 2021 at 18:58)</a>:</h4>
<p>Hello Dan and Chris! :D</p>
<p>Nothing in specific right now (although making bindings for <code>mlock</code> and <code>mlockall</code> would be nice), I'd be happy helping in any way possible</p>



<a name="251929289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251929289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251929289">(Sep 03 2021 at 19:16)</a>:</h4>
<p>As it happens, I implemented <code>mlock</code> just yesterday :-)</p>



<a name="251929419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251929419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251929419">(Sep 03 2021 at 19:17)</a>:</h4>
<p>But not <code>mlockall</code>, so that's something you could start with</p>



<a name="251930536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251930536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251930536">(Sep 03 2021 at 19:28)</a>:</h4>
<p>And along those lines, <code>mincore</code>, <code>msync</code>, <code>mremap</code></p>



<a name="251931600"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251931600" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251931600">(Sep 03 2021 at 19:35)</a>:</h4>
<p>Right on!!</p>
<p>I've faced the same  <code>MCL_ONFAULT</code> issue before and resorted to FFI in order to get it (<a href="https://github.com/vrmiguel/bustd/blob/master/cc/helper.c">https://github.com/vrmiguel/bustd/blob/master/cc/helper.c</a>)</p>
<p>Would that be suitable for <code>rsix</code> or should we just ignore this constant for now?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/vrmiguel/bustd/blob/master/cc/helper.c" style="background-image: url(https://opengraph.githubassets.com/f80b8fdae8cd3b97f42b85b2bae983a0ca440e56bbd79aa49249fa867da7490f/vrmiguel/bustd)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/vrmiguel/bustd/blob/master/cc/helper.c" title="bustd/helper.c at master · vrmiguel/bustd">bustd/helper.c at master · vrmiguel/bustd</a></div><div class="message_embed_description">Process killer daemon for out-of-memory scenarios. Contribute to vrmiguel/bustd development by creating an account on GitHub.</div></div></div>



<a name="251932003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251932003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251932003">(Sep 03 2021 at 19:39)</a>:</h4>
<p>In general, it's fine to ignore stuff. In effect, we're currently ignoring <em>all</em> the <code>MCL_*</code> flags, so just implementing some of them is progress :-)</p>



<a name="251932569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251932569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251932569">(Sep 03 2021 at 19:44)</a>:</h4>
<p>Also, yeah, in general we want to stay away from emulating things, or providing our own definitions. If someone really wants <code>MCL_ONFAULT</code>, the linux_raw backend should get it from linux-raw-sys (which already has a definition of <code>MCL_ONFAULT</code>), and the libc backend should get it from libc (which doesn't yet, so the first step would be to add it upstream)</p>



<a name="251935277"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251935277" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251935277">(Sep 03 2021 at 20:08)</a>:</h4>
<p>No problem :D</p>
<p>I've open a PR for mlockall and munlockall although it's still a WIP (no linux_raw support yet)</p>



<a name="251935360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251935360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251935360">(Sep 03 2021 at 20:09)</a>:</h4>
<p>I've previously done a conversion for mlockall's errnos into proper Rust error enums</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="nb">Err</span><span class="p">(</span><span class="k">match</span><span class="w"> </span><span class="n">errno</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Some or all of the memory identified by the operation could not be locked when the call was made.</span>
<span class="w">        </span><span class="n">EAGAIN</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Error</span>::<span class="n">CouldNotLockMemoryError</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// The flags argument is zero, or includes unimplemented flags.</span>
<span class="w">        </span><span class="n">EINVAL</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Error</span>::<span class="n">InvalidFlagsError</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Locking all of the pages currently mapped into the address space of the process</span>
<span class="w">        </span><span class="c1">// would exceed an implementation-defined limit on the amount of memory</span>
<span class="w">        </span><span class="c1">// that the process may lock.</span>
<span class="w">        </span><span class="n">ENOMEM</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Error</span>::<span class="n">TooMuchMemoryToLockError</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// The calling process does not have appropriate privileges to perform the requested operation</span>
<span class="w">        </span><span class="n">EPERM</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Error</span>::<span class="n">NoPermission</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Should not happen</span>
<span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Error</span>::<span class="n">UnknownMlockallError</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
</code></pre></div>



<a name="251935409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251935409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251935409">(Sep 03 2021 at 20:09)</a>:</h4>
<p>are higher-level error enums like that out of place for rsix?</p>



<a name="251936477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251936477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251936477">(Sep 03 2021 at 20:19)</a>:</h4>
<p>That's a good question. rsix doesn't yet provide any enums like that, but that doesn't mean it shouldn't.</p>



<a name="251936630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251936630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251936630">(Sep 03 2021 at 20:20)</a>:</h4>
<p>For the more portable system calls, enums like that would sometimes get tricky, becuase there are a lot of subtle errno differences between eg. Linux and FreeBSD and other things.</p>



<a name="251938243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/251938243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#251938243">(Sep 03 2021 at 20:33)</a>:</h4>
<p>I think my gut feeling is that rsix shouldn't define enums like that; that can be done in higher-level APIs that wrap rsix. But it's just a feeling, and I could be convinced otherwise.</p>



<a name="252465914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/252465914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#252465914">(Sep 08 2021 at 14:08)</a>:</h4>
<p>Makes sense!</p>



<a name="252466055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/252466055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#252466055">(Sep 08 2021 at 14:09)</a>:</h4>
<p>Hey there, Dan! </p>
<p>I plan on finishing the PR soon(-ish), I just haven't had great availability :-P</p>



<a name="252466809"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/252466809" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#252466809">(Sep 08 2021 at 14:13)</a>:</h4>
<p>Hi! No worries :-)</p>



<a name="257420213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/257420213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vinícius Miguel <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#257420213">(Oct 13 2021 at 19:07)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="254083">@Dan Gohman</span> !</p>
<p>so sorry for the delay</p>



<a name="257428471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/257428471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#257428471">(Oct 13 2021 at 20:02)</a>:</h4>
<p>Hello!</p>



<a name="258060366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/contributing%20to%20rsix/near/258060366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/contributing.20to.20rsix.html#258060366">(Oct 18 2021 at 16:46)</a>:</h4>
<p>Is there anything you're blocked on, or that's confusing?</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>