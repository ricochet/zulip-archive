<html>
<head><meta charset="utf-8"><title>wasi-libc · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html">wasi-libc</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="200086735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200086735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200086735">(Jun 08 2020 at 11:53)</a>:</h4>
<p>Only one release from over a year ago. </p>
<p><a href="https://github.com/WebAssembly/wasi-libc">https://github.com/WebAssembly/wasi-libc</a></p>
<p>As I'd like a refresh to bring us up to date with this stuff, will have a go at compiling myself, but there should probably be an official update too :)</p>
<p>wasmtime rocking. thanks guys :)</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-libc" style="background-image: url(https://avatars3.githubusercontent.com/u/11578470?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-libc" title="WebAssembly/wasi-libc">WebAssembly/wasi-libc</a></div><div class="message_embed_description">WASI libc implementation for WebAssembly. Contribute to WebAssembly/wasi-libc development by creating an account on GitHub.</div></div></div>



<a name="200086890"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200086890" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200086890">(Jun 08 2020 at 11:55)</a>:</h4>
<p>the <a href="https://github.com/WebAssembly/wasi-sdk/">wasi-sdk repo</a> has releases that include the sysroot, i.e. wasi-libc. E.g. <a href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-11">here's wasi-sdk-11</a>, released 4 days ago</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/" style="background-image: url(https://avatars3.githubusercontent.com/u/11578470?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/" title="WebAssembly/wasi-sdk">WebAssembly/wasi-sdk</a></div><div class="message_embed_description">WASI-enabled WebAssembly C/C++ toolchain. Contribute to WebAssembly/wasi-sdk development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-11" style="background-image: url(https://avatars3.githubusercontent.com/u/11578470?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-11" title="WebAssembly/wasi-sdk">WebAssembly/wasi-sdk</a></div><div class="message_embed_description">WASI-enabled WebAssembly C/C++ toolchain. Contribute to WebAssembly/wasi-sdk development by creating an account on GitHub.</div></div></div>



<a name="200087012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087012">(Jun 08 2020 at 11:56)</a>:</h4>
<p>ahh, thanks. was looking in the wrong place then :)</p>



<a name="200087144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087144">(Jun 08 2020 at 11:58)</a>:</h4>
<p>It'd be good to have wasi-libc's README point to those releases. I don't have the time to do that right now, but I'd gladly review a PR ;)</p>



<a name="200087234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087234">(Jun 08 2020 at 11:59)</a>:</h4>
<p>I prob wouldn't have read it :)</p>



<a name="200087363"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087363" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087363">(Jun 08 2020 at 12:00)</a>:</h4>
<p>we're pre-funding so I'm cutting every corner going until we're stable. so please don't mistake my limited engagement for not caring. I do. once rent covered, can breathe again.</p>



<a name="200087406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087406">(Jun 08 2020 at 12:01)</a>:</h4>
<p>my problem, not yours just explaining in crunch mode. light at end of tunnel spotted. this is coming together nicely.</p>



<a name="200087705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200087705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200087705">(Jun 08 2020 at 12:04)</a>:</h4>
<p>Maybe just replace the text here :</p>
<p><a href="https://github.com/WebAssembly/wasi-libc/releases">https://github.com/WebAssembly/wasi-libc/releases</a></p>
<p>... with :</p>
<p>wasi-sdk is now available from :</p>
<p><a href="https://github.com/WebAssembly/wasi-sdk/releases">https://github.com/WebAssembly/wasi-sdk/releases</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-libc/releases" style="background-image: url(https://avatars3.githubusercontent.com/u/11578470?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-libc/releases" title="WebAssembly/wasi-libc">WebAssembly/wasi-libc</a></div><div class="message_embed_description">WASI libc implementation for WebAssembly. Contribute to WebAssembly/wasi-libc development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/releases" style="background-image: url(https://avatars3.githubusercontent.com/u/11578470?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/releases" title="WebAssembly/wasi-sdk">WebAssembly/wasi-sdk</a></div><div class="message_embed_description">WASI-enabled WebAssembly C/C++ toolchain. Contribute to WebAssembly/wasi-sdk development by creating an account on GitHub.</div></div></div>



<a name="200103151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200103151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200103151">(Jun 08 2020 at 14:16)</a>:</h4>
<p>&lt;&gt;&lt;&gt; infinity XSG / web assembly SDK 1.0 has shipped !</p>
<p><a href="http://advance-software.com/develop">http://advance-software.com/develop</a></p>
<p>wasmtime inside</p>
<div class="message_embed"><a class="message_embed_image" href="http://advance-software.com/develop" style="background-image: url(http://advance-software.com/images/get_infinity.png)"></a><div class="data-container"><div class="message_embed_title"><a href="http://advance-software.com/develop" title="Advance Software">Advance Software</a></div><div class="message_embed_description">Developers of the &lt;&gt;&lt;&gt; Infinity Virtual Reality 3D Web Browser.</div></div></div>



<a name="200103826"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200103826" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200103826">(Jun 08 2020 at 14:21)</a>:</h4>
<p>I found at typo: "Please install latest <strong>LLLVM</strong> for your operating system of choice."</p>



<a name="200103850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200103850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200103850">(Jun 08 2020 at 14:21)</a>:</h4>
<p>happy to add a logo, link to credits &amp; anything else you want. no debugger support yet - that's on my todo list.<br>
also happy for this not to be here if its considered inappropriate promo. thought you'd like to see your baby in action.<br>
critique welcome.</p>



<a name="200103861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200103861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200103861">(Jun 08 2020 at 14:21)</a>:</h4>
<p>thanks :)</p>



<a name="200104086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200104086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200104086">(Jun 08 2020 at 14:22)</a>:</h4>
<p>typo fixed. good spot.</p>



<a name="200104278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200104278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200104278">(Jun 08 2020 at 14:24)</a>:</h4>
<p>np</p>



<a name="200104280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200104280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200104280">(Jun 08 2020 at 14:24)</a>:</h4>
<p>on that, how do I drop debugger in, reminders of what's required welcome. that should probably be next.</p>



<a name="200105535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200105535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200105535">(Jun 08 2020 at 14:32)</a>:</h4>
<p>/me reviews previous threads regarding debugger support.</p>



<a name="200108004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108004">(Jun 08 2020 at 14:49)</a>:</h4>
<p><span class="user-mention" data-user-id="297332">@Steve Williams</span> and how is it going?</p>



<a name="200108563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108563">(Jun 08 2020 at 14:53)</a>:</h4>
<p>good, thanks. next step is how to compile with debug info, then how to invoke the debugger.<br>
this: <a href="https://hacks.mozilla.org/2019/09/debugging-webassembly-outside-of-the-browser/">https://hacks.mozilla.org/2019/09/debugging-webassembly-outside-of-the-browser/</a><br>
explains how to start a debug session from scratch on a simple binary. we're not quite so simple, we're an interactive app with wasm stuff running deep within that.<br>
we could still break on the first wasm instruction hit &amp; drop into the lldb gui from the command prompt when that occurs.<br>
assistance welcome getting to that point.<br>
then ms code support once that's working, maybe. <br>
or a different route if you prefer.</p>
<div class="message_embed"><a class="message_embed_image" href="https://hacks.mozilla.org/2019/09/debugging-webassembly-outside-of-the-browser/" style="background-image: url(https://hacks.mozilla.org/files/2019/09/wasmtime-lldb.png)"></a><div class="data-container"><div class="message_embed_title"><a href="https://hacks.mozilla.org/2019/09/debugging-webassembly-outside-of-the-browser/" title="Debugging WebAssembly Outside of the Browser">Debugging WebAssembly Outside of the Browser</a></div><div class="message_embed_description">WebAssembly has begun to establish itself outside of the browser via dedicated runtimes like Mozilla’s Wasmtime and Fastly’s Lucet. While the promise of a new, universal format for programs is ...</div></div></div>



<a name="200108716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108716">(Jun 08 2020 at 14:54)</a>:</h4>
<p>so, we have these options - any preference ?<br>
<a href="https://clang.llvm.org/docs/ClangCommandLineReference.html#debug-information-generation">https://clang.llvm.org/docs/ClangCommandLineReference.html#debug-information-generation</a></p>



<a name="200108848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108848">(Jun 08 2020 at 14:55)</a>:</h4>
<p>let's start from basics: do you have wasi-sdk installed?</p>



<a name="200108884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108884">(Jun 08 2020 at 14:55)</a>:</h4>
<p>yes, latest installed this morning.</p>



<a name="200108912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108912">(Jun 08 2020 at 14:55)</a>:</h4>
<p>all our examples link against it</p>



<a name="200108992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200108992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200108992">(Jun 08 2020 at 14:56)</a>:</h4>
<p>when you produce wasm code, can you run llvm-dwarfdump (from wasi-sdk) to check debug information presence?</p>



<a name="200109030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109030">(Jun 08 2020 at 14:56)</a>:</h4>
<p>however, we don't call your main. we have our own entrypoints we call one to init, one per tick process</p>



<a name="200109129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109129">(Jun 08 2020 at 14:56)</a>:</h4>
<p>you still load code via <code>wasm_module_new</code>, is it correct?</p>



<a name="200109154"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109154" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109154">(Jun 08 2020 at 14:57)</a>:</h4>
<p>I could, but right now we don't have any as I haven't passed the flags as was only concerned with release build to start with</p>



<a name="200109160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109160">(Jun 08 2020 at 14:57)</a>:</h4>
<p>yes</p>



<a name="200109227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109227">(Jun 08 2020 at 14:57)</a>:</h4>
<p>so first job is compile debug build, with debug info, of which there are various formats, hence the q which format would you prefer</p>



<a name="200109430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109430">(Jun 08 2020 at 14:58)</a>:</h4>
<p>llvm's wasm output with dwarf section is what we are looking for</p>



<a name="200109458"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109458" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109458">(Jun 08 2020 at 14:58)</a>:</h4>
<p>-g --debug</p>
<p>or something more specific</p>



<a name="200109463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109463">(Jun 08 2020 at 14:58)</a>:</h4>
<p><code>clang -g</code> will do the trick</p>



<a name="200109492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109492">(Jun 08 2020 at 14:58)</a>:</h4>
<p>k, so -g</p>



<a name="200109504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109504">(Jun 08 2020 at 14:59)</a>:</h4>
<p>don't need --debug ?</p>



<a name="200109535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109535">(Jun 08 2020 at 14:59)</a>:</h4>
<p>you can drop optimization to <code>-O0</code> if you want too</p>



<a name="200109635"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109635" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109635">(Jun 08 2020 at 14:59)</a>:</h4>
<p>/me never used <code>--debug</code></p>



<a name="200109893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200109893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200109893">(Jun 08 2020 at 15:01)</a>:</h4>
<p>didn't actually have optimize on, but should for release build. thanks.</p>



<a name="200110074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110074">(Jun 08 2020 at 15:02)</a>:</h4>
<p>JIT can be configured to transform DWARF via <a href="https://github.com/bytecodealliance/wasmtime/blob/master/examples/fib-debug/main.c#L18">https://github.com/bytecodealliance/wasmtime/blob/master/examples/fib-debug/main.c#L18</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/master/examples/fib-debug/main.c#L18" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/master/examples/fib-debug/main.c#L18" title="bytecodealliance/wasmtime">bytecodealliance/wasmtime</a></div><div class="message_embed_description">Standalone JIT-style runtime for WebAssembly, using Cranelift - bytecodealliance/wasmtime</div></div></div>



<a name="200110319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110319">(Jun 08 2020 at 15:03)</a>:</h4>
<p>, so you want :</p>
<p>wasm_config_t* config = wasm_config_new();<br>
  wasmtime_config_debug_info_set(config, true);</p>
<p>... if we're running in debug mode.  on it.</p>



<a name="200110325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110325">(Jun 08 2020 at 15:03)</a>:</h4>
<p>you can also choose to not run JIT optimization via <code>wasmtime_config_cranelift_opt_level</code> (see <a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/c-api/include/wasmtime.h#L35">https://github.com/bytecodealliance/wasmtime/blob/master/crates/c-api/include/wasmtime.h#L35</a>)</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/c-api/include/wasmtime.h#L35" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/c-api/include/wasmtime.h#L35" title="bytecodealliance/wasmtime">bytecodealliance/wasmtime</a></div><div class="message_embed_description">Standalone JIT-style runtime for WebAssembly, using Cranelift - bytecodealliance/wasmtime</div></div></div>



<a name="200110475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110475">(Jun 08 2020 at 15:04)</a>:</h4>
<p>lets keep it simple &amp; just get the debugger working first, then second pass tweaks if that's ok.</p>



<a name="200110478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110478">(Jun 08 2020 at 15:04)</a>:</h4>
<p>It is not really a "debug mode" but flag to compile debug info along with code (<code>wasmtime_config_debug_info_set</code> is)</p>



<a name="200110575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110575">(Jun 08 2020 at 15:05)</a>:</h4>
<p>well, its something that's only needed if we're debugging. or you suggest I always have this set ?</p>



<a name="200110684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110684">(Jun 08 2020 at 15:05)</a>:</h4>
<p>It will degrade to startup performance and memory consumption</p>



<a name="200110859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110859">(Jun 08 2020 at 15:06)</a>:</h4>
<p>I would pref it with environment at this moment</p>



<a name="200110970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110970">(Jun 08 2020 at 15:07)</a>:</h4>
<p>k, will do. thanks</p>



<a name="200110990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200110990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200110990">(Jun 08 2020 at 15:07)</a>:</h4>
<p>/me is working on caching debug info with code at this moment</p>



<a name="200111081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200111081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200111081">(Jun 08 2020 at 15:08)</a>:</h4>
<p>good to hear. I'll just be happy to have it running for now :)</p>



<a name="200111311"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200111311" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200111311">(Jun 08 2020 at 15:09)</a>:</h4>
<p>if you using Linux, LLDB-10 or GDB will work without additional configuration</p>



<a name="200111726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200111726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200111726">(Jun 08 2020 at 15:12)</a>:</h4>
<p>k, that's compiled in. let me grab my tea then lets see if its that simple (from user perspective)</p>



<a name="200112965"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200112965" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200112965">(Jun 08 2020 at 15:20)</a>:</h4>
<p>example you provided called wasm_config_t* config = wasm_config_new();</p>
<p>no matching delete. not sure significant but spotted that.</p>



<a name="200113356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200113356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200113356">(Jun 08 2020 at 15:23)</a>:</h4>
<p><code>own wasm_engine_t* wasm_engine_new_with_config(own wasm_config_t*)</code> -- it is consumed/owned by engine now</p>



<a name="200113420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200113420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200113420">(Jun 08 2020 at 15:23)</a>:</h4>
<p>k</p>



<a name="200113533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200113533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200113533">(Jun 08 2020 at 15:24)</a>:</h4>
<p>ah that's what your weird own macro means :)</p>



<a name="200115536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115536">(Jun 08 2020 at 15:35)</a>:</h4>
<p>lldb has a python36.dll dependency. python 3.6 only available as source :)</p>



<a name="200115568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115568">(Jun 08 2020 at 15:35)</a>:</h4>
<p>if it needs it, llvm should include it in their bundle.</p>



<a name="200115686"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115686" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115686">(Jun 08 2020 at 15:36)</a>:</h4>
<p>grumble :) if you have one, you're as trusted as anywhere else I'm likely to find it.</p>



<a name="200115755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115755">(Jun 08 2020 at 15:37)</a>:</h4>
<p>or I could just build it I guess.</p>



<a name="200115918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115918">(Jun 08 2020 at 15:38)</a>:</h4>
<p><a href="https://apt.llvm.org/">https://apt.llvm.org/</a> ?</p>



<a name="200115958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200115958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200115958">(Jun 08 2020 at 15:38)</a>:</h4>
<p>windows</p>



<a name="200116050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116050">(Jun 08 2020 at 15:39)</a>:</h4>
<p>alright... it is all in your hands from this moment</p>



<a name="200116156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116156">(Jun 08 2020 at 15:40)</a>:</h4>
<p>so, my next job is building python3.6 from source, which I wasn't expecting. we'll ship it with our stuff so all our users don't have to.</p>



<a name="200116172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116172">(Jun 08 2020 at 15:40)</a>:</h4>
<p>/me heard it works there, but never tried</p>



<a name="200116272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116272">(Jun 08 2020 at 15:41)</a>:</h4>
<p>yup. that part not your problem, but fyi. your stuff harder to use when a key component (in this case lldb) doesn't just work (tm)</p>



<a name="200116385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116385">(Jun 08 2020 at 15:42)</a>:</h4>
<p>is there something in vscode ?</p>



<a name="200116436"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116436" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116436">(Jun 08 2020 at 15:42)</a>:</h4>
<p>dunno. doing lldb from command line for now.</p>



<a name="200116494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200116494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200116494">(Jun 08 2020 at 15:43)</a>:</h4>
<p>building python should be easy, but we'll see.</p>



<a name="200120439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/wasi-libc/near/200120439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/wasi-libc.html#200120439">(Jun 08 2020 at 16:08)</a>:</h4>
<p><span class="user-mention" data-user-id="297332">@Steve Williams</span> did you try lldb-9 instead of lldb-10?</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>