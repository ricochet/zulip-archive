<html>
<head><meta charset="utf-8"><title>with field in wit_bindgen::generate! not working · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html">with field in wit_bindgen::generate! not working</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="454394931"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/with%20field%20in%20wit_bindgen%3A%3Agenerate%21%20not%20working/near/454394931" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SeanOMik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html#454394931">(Jul 27 2024 at 00:01)</a>:</h4>
<p>I'm trying to use the macro <code>wit_bindgen::generate!</code> and need to use the <code>with</code> field to add some existing bindings. This is what I tried:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wit_bindgen</span><span class="p">::</span><span class="n">generate</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"example"</span><span class="p">,</span>

<span class="w">    </span><span class="n">with</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"lyra:api/ecs"</span><span class="p">:</span><span class="w"> </span><span class="nc">common_api</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">lyra</span><span class="p">::</span><span class="n">api</span><span class="p">::</span><span class="n">ecs</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">});</span>
</code></pre></div>
<p>but I get an error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resolve</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">parsing</span><span class="w"> </span><span class="n">WIT</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">path</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">data_drive</span><span class="o">/</span><span class="n">Development</span><span class="o">/</span><span class="n">Rust</span><span class="o">/</span><span class="n">lyra</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">scripting</span><span class="o">-</span><span class="n">test</span><span class="o">/</span><span class="n">witguest</span><span class="o">/</span><span class="n">wit</span><span class="p">]</span>

<span class="w">       </span><span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">         </span><span class="nc">package</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span>
<span class="w">            </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">media</span><span class="o">/</span><span class="n">data_drive</span><span class="o">/</span><span class="n">Development</span><span class="o">/</span><span class="n">Rust</span><span class="o">/</span><span class="n">lyra</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">scripting</span><span class="o">-</span><span class="n">test</span><span class="o">/</span><span class="n">witguest</span><span class="o">/</span><span class="n">wit</span><span class="o">/</span><span class="n">world</span><span class="p">.</span><span class="n">wit</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span><span class="mi">9</span>
<span class="w">             </span><span class="o">|</span>
<span class="w">          </span><span class="mi">14</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">use</span><span class="w"> </span><span class="n">lyra</span><span class="p">:</span><span class="nc">api</span><span class="o">/</span><span class="n">ecs</span><span class="p">.{</span><span class="n">ecs</span><span class="o">-</span><span class="n">world</span><span class="p">};</span>
<span class="w">             </span><span class="o">|</span><span class="w">         </span><span class="o">^-------</span>
</code></pre></div>
<p>I tried to change the with to <code>"lyra:api": common_api::bindings::lyra::api</code> and I also got the same error. I'm not sure how I can fix it.</p>



<a name="454395339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/with%20field%20in%20wit_bindgen%3A%3Agenerate%21%20not%20working/near/454395339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html#454395339">(Jul 27 2024 at 00:07)</a>:</h4>
<p>The lyra:api package needs to be found in a subdue of your wit/deps directory</p>



<a name="454395384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/with%20field%20in%20wit_bindgen%3A%3Agenerate%21%20not%20working/near/454395384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html#454395384">(Jul 27 2024 at 00:07)</a>:</h4>
<p>So mkdir deps/lyraapi and stick it in there</p>



<a name="454395678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/with%20field%20in%20wit_bindgen%3A%3Agenerate%21%20not%20working/near/454395678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SeanOMik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html#454395678">(Jul 27 2024 at 00:11)</a>:</h4>
<p>Ahh that was it! The only issue is that now I have duplicates of <code>.wit</code> files in my repo. I guess I could create symlinks though</p>



<a name="454395682"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/with%20field%20in%20wit_bindgen%3A%3Agenerate%21%20not%20working/near/454395682" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> SeanOMik <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/with.20field.20in.20wit_bindgen.3A.3Agenerate.21.20not.20working.html#454395682">(Jul 27 2024 at 00:11)</a>:</h4>
<p>Thanks!</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>