<html>
<head><meta charset="utf-8"><title>cranelift / PR #1391 Add maximum threshold for number of ... · git-cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/index.html">git-cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html">cranelift / PR #1391 Add maximum threshold for number of ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="188141187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188141187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188141187">(Feb 13 2020 at 19:28)</a>:</h4>
<p>nalmt opened <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a> from <code>pathological_case_951</code> to <code>master</code>:</p>
<blockquote>
<p>To fix this case that may take forever to compile (issue #951):<br>
function %a() {<br>
ebb477777777:<br>
}</p>
<p>We decide to define a maximum threshold for the number of ebbs in functions.</p>
<p>Based on a large WASM program (<a href="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm" target="_blank" title="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm">https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm</a>), its IR functions does not exceed 1414 ebbs.<br>
A number 100 times greater seems (currently) enough to define our maximum threshold.</p>
<p>static MAX_EBBS_IN_A_FUNCTION: u32 = 100000;</p>
<p>if ebb_num.as_u32() &gt; MAX_EBBS_IN_A_FUNCTION {<br>
    return Err(self.error("too many ebbs"));<br>
}</p>
</blockquote>



<a name="188141556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188141556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188141556">(Feb 13 2020 at 19:31)</a>:</h4>
<p><strong>nalmt</strong> requested <a href="https://github.com/bnjbvr" target="_blank" title="https://github.com/bnjbvr">bnjbvr</a> for a review on <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a>.</p>



<a name="188214108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188214108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188214108">(Feb 14 2020 at 15:09)</a>:</h4>
<p>nalmt updated <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a> from <code>pathological_case_951</code> to <code>master</code>:</p>
<blockquote>
<p>To fix this case that may take forever to compile (issue #951):<br>
function %a() {<br>
ebb477777777:<br>
}</p>
<p>We decide to define a maximum threshold for the number of ebbs in functions.</p>
<p>Based on a large WASM program (<a href="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm" target="_blank" title="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm">https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm</a>), its IR functions does not exceed 1414 ebbs.<br>
A number 100 times greater seems (currently) enough to define our maximum threshold.</p>
<p>static MAX_EBBS_IN_A_FUNCTION: u32 = 100000;</p>
<p>if ebb_num.as_u32() &gt; MAX_EBBS_IN_A_FUNCTION {<br>
    return Err(self.error("too many ebbs"));<br>
}</p>
</blockquote>



<a name="188214248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188214248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188214248">(Feb 14 2020 at 15:11)</a>:</h4>
<p>nalmt updated <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a> from <code>pathological_case_951</code> to <code>master</code>:</p>
<blockquote>
<p>To fix this case that may take forever to compile (issue #951):<br>
function %a() {<br>
ebb477777777:<br>
}</p>
<p>We decide to define a maximum threshold for the number of ebbs in functions.</p>
<p>Based on a large WASM program (<a href="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm" target="_blank" title="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm">https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm</a>), its IR functions does not exceed 1414 ebbs.<br>
A number 100 times greater seems (currently) enough to define our maximum threshold.</p>
<p>static MAX_EBBS_IN_A_FUNCTION: u32 = 100000;</p>
<p>if ebb_num.as_u32() &gt; MAX_EBBS_IN_A_FUNCTION {<br>
    return Err(self.error("too many ebbs"));<br>
}</p>
</blockquote>



<a name="188214367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188214367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188214367">(Feb 14 2020 at 15:12)</a>:</h4>
<p>nalmt updated <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a> from <code>pathological_case_951</code> to <code>master</code>:</p>
<blockquote>
<p>To fix this case that may take forever to compile (issue #951):<br>
function %a() {<br>
ebb477777777:<br>
}</p>
<p>We decide to define a maximum threshold for the number of ebbs in functions.</p>
<p>Based on a large WASM program (<a href="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm" target="_blank" title="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm">https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm</a>), its IR functions does not exceed 1414 ebbs.<br>
A number 100 times greater seems (currently) enough to define our maximum threshold.</p>
<p>static MAX_EBBS_IN_A_FUNCTION: u32 = 100000;</p>
<p>if ebb_num.as_u32() &gt; MAX_EBBS_IN_A_FUNCTION {<br>
    return Err(self.error("too many ebbs"));<br>
}</p>
</blockquote>



<a name="188215486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188215486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188215486">(Feb 14 2020 at 15:25)</a>:</h4>
<p>nalmt updated <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a> from <code>pathological_case_951</code> to <code>master</code>:</p>
<blockquote>
<p>To fix this case that may take forever to compile (issue #951):<br>
function %a() {<br>
ebb477777777:<br>
}</p>
<p>We decide to define a maximum threshold for the number of ebbs in functions.</p>
<p>Based on a large WASM program (<a href="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm" target="_blank" title="https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm">https://github.com/mozilla/perf-automation/blob/master/benchmarks/wasm-misc/AngryBots.wasm</a>), its IR functions does not exceed 1414 ebbs.<br>
A number 100 times greater seems (currently) enough to define our maximum threshold.</p>
<p>static MAX_EBBS_IN_A_FUNCTION: u32 = 100000;</p>
<p>if ebb_num.as_u32() &gt; MAX_EBBS_IN_A_FUNCTION {<br>
    return Err(self.error("too many ebbs"));<br>
}</p>
</blockquote>



<a name="188217624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231391%20Add%20maximum%20threshold%20for%20number%20of%20.../near/188217624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231391.20Add.20maximum.20threshold.20for.20number.20of.20.2E.2E.2E.html#188217624">(Feb 14 2020 at 15:46)</a>:</h4>
<p>nalmt closed without merge <a href="https://github.com/bytecodealliance/cranelift/pull/1391" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1391">PR #1391</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>