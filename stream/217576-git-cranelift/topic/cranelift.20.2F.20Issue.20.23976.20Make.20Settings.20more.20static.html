<html>
<head><meta charset="utf-8"><title>cranelift / Issue #976 Make Settings more static · git-cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/index.html">git-cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.23976.20Make.20Settings.20more.20static.html">cranelift / Issue #976 Make Settings more static</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="185540943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%23976%20Make%20Settings%20more%20static/near/185540943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.23976.20Make.20Settings.20more.20static.html#185540943">(Jan 13 2020 at 21:42)</a>:</h4>
<p>sstangl closed <a href="https://github.com/bytecodealliance/cranelift/issues/976" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/976">Issue #976</a>:</p>
<blockquote>
<p>Right now, methods on the settings builder are all taking strings as inputs, and maybe strings as values. This makes it very dynamic, and allows a range of runtime errors like a setting doesn't exist, or the provided value doesn't have the right type.</p>
<p>Instead, we could generate methods on the settings builder for each setting:</p>
<ul>
<li>for bool values, they would take a bool parameter.</li>
<li>for enum values, they would take a (Rust) enum parameter.</li>
</ul>
<p>Then, the entire range of errors described by the enum SetError would disappear, and all these errors would become compile-time errors, which I think is safer and less error-prone.</p>
<p>This implies generating more code for these settings. We don't have thousands of them, so it shouldn't be a problem. It would be a breaking API change, too.</p>
</blockquote>



<a name="185575520"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%23976%20Make%20Settings%20more%20static/near/185575520" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.23976.20Make.20Settings.20more.20static.html#185575520">(Jan 14 2020 at 08:56)</a>:</h4>
<p>bnjbvr reopened <a href="https://github.com/bytecodealliance/cranelift/issues/976" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/976">Issue #976</a>:</p>
<blockquote>
<p>Right now, methods on the settings builder are all taking strings as inputs, and maybe strings as values. This makes it very dynamic, and allows a range of runtime errors like a setting doesn't exist, or the provided value doesn't have the right type.</p>
<p>Instead, we could generate methods on the settings builder for each setting:</p>
<ul>
<li>for bool values, they would take a bool parameter.</li>
<li>for enum values, they would take a (Rust) enum parameter.</li>
</ul>
<p>Then, the entire range of errors described by the enum SetError would disappear, and all these errors would become compile-time errors, which I think is safer and less error-prone.</p>
<p>This implies generating more code for these settings. We don't have thousands of them, so it shouldn't be a problem. It would be a breaking API change, too.</p>
</blockquote>



<a name="185575521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%23976%20Make%20Settings%20more%20static/near/185575521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.23976.20Make.20Settings.20more.20static.html#185575521">(Jan 14 2020 at 08:56)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/cranelift/issues/976#issuecomment-574070836" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/976#issuecomment-574070836">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/issues/976" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/976">Issue #976</a>:</p>
<blockquote>
<p>Oops, wrong commit number; it was supposed to close #1164. </p>
</blockquote>



<a name="189361572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%23976%20Make%20Settings%20more%20static/near/189361572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.23976.20Make.20Settings.20more.20static.html#189361572">(Feb 28 2020 at 23:26)</a>:</h4>
<p>alexcrichton transferred <a href="https://github.com/bytecodealliance/cranelift/issues/976" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/976">Issue #976</a>:</p>
<blockquote>
<p>Right now, methods on the settings builder are all taking strings as inputs, and maybe strings as values. This makes it very dynamic, and allows a range of runtime errors like a setting doesn't exist, or the provided value doesn't have the right type.</p>
<p>Instead, we could generate methods on the settings builder for each setting:</p>
<ul>
<li>for bool values, they would take a bool parameter.</li>
<li>for enum values, they would take a (Rust) enum parameter.</li>
</ul>
<p>Then, the entire range of errors described by the enum SetError would disappear, and all these errors would become compile-time errors, which I think is safer and less error-prone.</p>
<p>This implies generating more code for these settings. We don't have thousands of them, so it shouldn't be a problem. It would be a breaking API change, too.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>