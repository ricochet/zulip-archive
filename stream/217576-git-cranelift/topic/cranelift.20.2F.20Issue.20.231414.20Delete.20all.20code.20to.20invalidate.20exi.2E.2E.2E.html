<html>
<head><meta charset="utf-8"><title>cranelift / Issue #1414 Delete all code to invalidate exi... · git-cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/index.html">git-cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html">cranelift / Issue #1414 Delete all code to invalidate exi...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="201523988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201523988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201523988">(Jun 21 2020 at 08:29)</a>:</h4>
<p>redradist <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647097177">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@alexcrichton </p>
<p>One question ... Why Cranelift was moved in wasmtime ?</p>
<p>Seems like Cranelift could be used not only for wasm target, but also as native compiler and so on</p>
</blockquote>



<a name="201525124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201525124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201525124">(Jun 21 2020 at 09:01)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647100739">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>I think the reason was to make it easier to coordinate changes that affect both Cranelift and Wasmtime. Cranelift can indeed be used for purposes other than wasm compilation.</p>
</blockquote>



<a name="201525426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201525426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201525426">(Jun 21 2020 at 09:07)</a>:</h4>
<p>redradist <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647101446">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@bjorn3 </p>
<blockquote>
<p>I think the reason was to make it easier to coordinate changes that affect both Cranelift and Wasmtime. Cranelift can indeed be used for purposes other than wasm compilation.</p>
</blockquote>
<p>But it makes hard for other projects to integrate it as submodule !!<br>
If I want only <code>cranelift</code> and do not want <code>wasmtime</code> at all, I use only <code>x86_64</code> code generation ... ?!</p>
</blockquote>



<a name="201525668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201525668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201525668">(Jun 21 2020 at 09:12)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647101935">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>Just include the whole Wasmtime repo. For path dependencies, you have to use <code>wasmtime/cranelift/codegen</code>. For git dependencies cargo will search for crates in every directory: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9c0d18c8db1e60343f61641a71d8b69bb1ad6233/Cargo.toml#L12-L15">https://github.com/bjorn3/rustc_codegen_cranelift/blob/9c0d18c8db1e60343f61641a71d8b69bb1ad6233/Cargo.toml#L12-L15</a>.</p>
</blockquote>



<a name="201525841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201525841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201525841">(Jun 21 2020 at 09:16)</a>:</h4>
<p>redradist <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647102243">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@bjorn3 </p>
<blockquote>
<p>Just include the whole Wasmtime repo. For path dependencies, you have to use <code>wasmtime/cranelift/codegen</code>. For git dependencies cargo will search for crates in every directory: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9c0d18c8db1e60343f61641a71d8b69bb1ad6233/Cargo.toml#L12-L15">https://github.com/bjorn3/rustc_codegen_cranelift/blob/9c0d18c8db1e60343f61641a71d8b69bb1ad6233/Cargo.toml#L12-L15</a>.</p>
</blockquote>
<p>And then what ?<br>
If one day <code>wasmtime</code> become part of other project ? I would need to include whole <code>some_other_project/wasmtime/cranelift</code> ?</p>
<p>Seems like it was done for persons that cannot use <code>git submodule update --recursive</code> command ((</p>
</blockquote>



<a name="201527976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201527976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201527976">(Jun 21 2020 at 10:17)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647108342">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@redradist please don't jump to conclusions quite this quickly, in particular if they involve assuming that we're all somehow incompetent.</p>
<p>We had good reasons to do this, see [my comment here for background].(<a href="https://github.com/bytecodealliance/wasmtime/issues/1185#issuecomment-591050388">https://github.com/bytecodealliance/wasmtime/issues/1185#issuecomment-591050388</a>)</p>
<p>(Note also that compiling Wasmtime still requires the exact git submodule handling you mention.)</p>
</blockquote>



<a name="201531807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201531807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201531807">(Jun 21 2020 at 12:12)</a>:</h4>
<p>redradist <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647119950">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@tschneidereit </p>
<blockquote>
<p>@redradist please don't jump to conclusions quite this quickly, in particular if they involve assuming that we're all somehow incompetent.</p>
<p>We had good reasons to do this, see [my comment here for background].(<a href="https://github.com/bytecodealliance/wasmtime/issues/1185#issuecomment-591050388">bytecodealliance/wasmtime#1185 (comment)</a>)</p>
<p>(Note also that compiling Wasmtime still requires the exact git submodule handling you mention.)</p>
</blockquote>
<p>But according that I have read from this comment, it would be better to rename <code>wasmtime</code> to <code>bytecode vm</code> (like LLVM) or <code>bytecode toolchain</code> or other fancy name and make <code>wasmtime</code> as sub-project:</p>
<div class="codehilite"><pre><span></span><code>bytecode_vm
  |_
    \_ cranelift
  |_
    \_ wasmtime
</code></pre></div>


<p>It would make more sense ...</p>
</blockquote>



<a name="201533190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201533190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201533190">(Jun 21 2020 at 12:53)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647124478">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<blockquote>
<p>But according that I have read from this comment, it would be better to rename <code>wasmtime</code> to <code>bytecode vm</code> (like LLVM) or <code>bytecode toolchain</code> or other fancy name and make <code>wasmtime</code> as sub-project</p>
</blockquote>
<p>I guess I'll just note your opinion on this. I disagree with it, but I also don't think it makes sense to continue this discussion, and hope that you don't expect us to go and change everything based on the argument you gave. A lot of thought and discussion has gone into this decision, and I'd once again kindly ask you to consider that there might be more to it than seems immediately intuitive to you.</p>
</blockquote>



<a name="201533482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201533482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201533482">(Jun 21 2020 at 13:02)</a>:</h4>
<p>redradist <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647125420">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<blockquote>
<blockquote>
<p>But according that I have read from this comment, it would be better to rename <code>wasmtime</code> to <code>bytecode vm</code> (like LLVM) or <code>bytecode toolchain</code> or other fancy name and make <code>wasmtime</code> as sub-project</p>
</blockquote>
<p>I guess I'll just note your opinion on this. I disagree with it, but I also don't think it makes sense to continue this discussion, and hope that you don't expect us to go and change everything based on the argument you gave. A lot of thought and discussion has gone into this decision, and I'd once again kindly ask you to consider that there might be more to it than seems immediately intuitive to you.</p>
</blockquote>
<p>It was just suggestion that will clear little bit why for example somebody integrates whole <code>wasmtime</code>, if it would named as I suggest, it would be clear that submodule is just toolchain ...</p>
<p>But anyway it was suggestion, thank for clarifying your decision point ;)</p>
</blockquote>



<a name="201544853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231414%20Delete%20all%20code%20to%20invalidate%20exi.../near/201544853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231414.20Delete.20all.20code.20to.20invalidate.20exi.2E.2E.2E.html#201544853">(Jun 21 2020 at 17:36)</a>:</h4>
<p>redradist edited a <a href="https://github.com/bytecodealliance/cranelift/pull/1414#issuecomment-647125420">comment</a> on <a href="https://github.com/bytecodealliance/cranelift/pull/1414">Issue #1414</a>:</p>
<blockquote>
<p>@tschneidereit </p>
<blockquote>
<blockquote>
<p>But according that I have read from this comment, it would be better to rename <code>wasmtime</code> to <code>bytecode vm</code> (like LLVM) or <code>bytecode toolchain</code> or other fancy name and make <code>wasmtime</code> as sub-project</p>
</blockquote>
<p>I guess I'll just note your opinion on this. I disagree with it, but I also don't think it makes sense to continue this discussion, and hope that you don't expect us to go and change everything based on the argument you gave. A lot of thought and discussion has gone into this decision, and I'd once again kindly ask you to consider that there might be more to it than seems immediately intuitive to you.</p>
</blockquote>
<p>It was just suggestion that will clear little bit why for example somebody integrates whole <code>wasmtime</code>, if it would named as I suggest, it would be clear that submodule is just toolchain ...</p>
<p>But anyway it was suggestion, thank for clarifying your decision point ;)</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>