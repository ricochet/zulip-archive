<html>
<head><meta charset="utf-8"><title>cranelift / PR #1336 Add CI to auto-publish to crates.io ... · git-cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/index.html">git-cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html">cranelift / PR #1336 Add CI to auto-publish to crates.io ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="185358162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185358162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185358162">(Jan 10 2020 at 22:34)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a> from <code>auto-publish</code> to <code>master</code>:</p>
<blockquote>
<p>This commit updates the publication process for the cranelift suite of<br>
crates. the <code>publish-all.sh</code> script was removed in favor of a new Rust<br>
script located at <code>ci/publish.rs</code> This script is based off the one in<br>
the [wasm-bindgen repository][wbg]. Additionally publication<br>
instructions have been added to <code>CONTRIBUTING.md</code>.</p>
<p>The new process of publication looks like:</p>
<ul>
<li>Run <code>rustc ci/publish.rs &amp;&amp; ./publish bump</code></li>
<li>Commit the change and get it merged (either push it or go through a PR)</li>
<li>Push a tag with the versions bumped</li>
</ul>
<p>The CI for the last step, the tag push, will automatically publish the<br>
crates once CI has finished.</p>
<p>[wbg]: <a href="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs" target="_blank" title="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs">https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs</a></p>
</blockquote>



<a name="185358376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185358376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185358376">(Jan 10 2020 at 22:38)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a> from <code>auto-publish</code> to <code>master</code>:</p>
<blockquote>
<p>This commit updates the publication process for the cranelift suite of<br>
crates. the <code>publish-all.sh</code> script was removed in favor of a new Rust<br>
script located at <code>ci/publish.rs</code> This script is based off the one in<br>
the [wasm-bindgen repository][wbg]. Additionally publication<br>
instructions have been added to <code>CONTRIBUTING.md</code>.</p>
<p>The new process of publication looks like:</p>
<ul>
<li>Run <code>rustc ci/publish.rs &amp;&amp; ./publish bump</code></li>
<li>Commit the change and get it merged (either push it or go through a PR)</li>
<li>Push a tag with the versions bumped</li>
</ul>
<p>The CI for the last step, the tag push, will automatically publish the<br>
crates once CI has finished.</p>
<p>[wbg]: <a href="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs" target="_blank" title="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs">https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs</a></p>
</blockquote>



<a name="185358423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185358423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185358423">(Jan 10 2020 at 22:40)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/bnjbvr" target="_blank" title="https://github.com/bnjbvr">bnjbvr</a> for a review on <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a>.</p>



<a name="185358424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185358424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185358424">(Jan 10 2020 at 22:40)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/sunfishcode" target="_blank" title="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a>.</p>



<a name="185358487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185358487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185358487">(Jan 10 2020 at 22:40)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/bnjbvr" target="_blank" title="https://github.com/bnjbvr">bnjbvr</a>, and <a href="https://github.com/sunfishcode" target="_blank" title="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a>.</p>



<a name="185361419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361419">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341469016" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341469016">PR Review</a>.</p>



<a name="185361420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361420">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341469016" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341469016">PR Review</a>.</p>



<a name="185361421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361421">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365466161" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365466161">PR Review Comment</a>:</p>
<blockquote>
<p>To my knowledge, cranelift-simplejit doesn't do anything special wrt cargo, and doesn't have any unusual dependencies. Can you point to what it is about this crate that causes problems?</p>
</blockquote>



<a name="185361422"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361422" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361422">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365468270" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365468270">PR Review Comment</a>:</p>
<blockquote>
<p>This is unlikely, but could you append and prepend <code>"</code> to the version string, so that <code>1.1.1</code> doesn't match <code>1.1.11</code>?</p>
</blockquote>



<a name="185361423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361423">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365469512" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365469512">PR Review Comment</a>:</p>
<blockquote>
<p>Do we need to do anything special to tell it to only publish if this is the master branch, and not some random feature branch?</p>
</blockquote>



<a name="185361424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185361424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185361424">(Jan 10 2020 at 23:30)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365469842" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365469842">PR Review Comment</a>:</p>
<blockquote>
<p>Would it be difficult to add a <code>publish</code> subcommand to do this part too? Assuming the merge doesn't get a new sha, it seems like we should be able to pick up the sha from the top of the local repo.</p>
</blockquote>



<a name="185503693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503693">(Jan 13 2020 at 15:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341927970" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341927970">PR Review</a>.</p>



<a name="185503694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503694">(Jan 13 2020 at 15:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365867205" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365867205">PR Review Comment</a>:</p>
<blockquote>
<p>It's sort of a weird part of Cargo, but if Cargo for some crates decides to put a <code>Cargo.lock</code> in the package, meaning it needs to resolve the crate graph. If a crate depends on something not published on <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a>, however, as would be the case in the "dry run" mode which happens on PRs, then this step will fail because <code>Cargo.lock</code> cannot be generated. I hit this locally when I prefixed all the crates with <code>alexcrichton-*</code> and nothing existed on <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a>.</p>
<p>Cargo decides to put <code>Cargo.lock</code> in crates that contains examples or binaries, and simplejit happened to be the only cranelift crate that met that criteria (had an example)</p>
</blockquote>



<a name="185503849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503849">(Jan 13 2020 at 15:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341928861" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341928861">PR Review</a>.</p>



<a name="185503850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503850">(Jan 13 2020 at 15:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365867845" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365867845">PR Review Comment</a>:</p>
<blockquote>
<p>This'll only actually do things for tags (previous step enables), and only for tags that start with a <code>v</code> (I'm not great on regexes). Do you think it should be limited further though?</p>
</blockquote>



<a name="185503993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503993">(Jan 13 2020 at 15:34)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341929658" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#pullrequestreview-341929658">PR Review</a>.</p>



<a name="185503994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185503994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185503994">(Jan 13 2020 at 15:34)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365868430" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336#discussion_r365868430">PR Review Comment</a>:</p>
<blockquote>
<p>Sure yeah, I'll edit this in</p>
</blockquote>



<a name="185504403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185504403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185504403">(Jan 13 2020 at 15:38)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a> from <code>auto-publish</code> to <code>master</code>:</p>
<blockquote>
<p>This commit updates the publication process for the cranelift suite of<br>
crates. the <code>publish-all.sh</code> script was removed in favor of a new Rust<br>
script located at <code>ci/publish.rs</code> This script is based off the one in<br>
the [wasm-bindgen repository][wbg]. Additionally publication<br>
instructions have been added to <code>CONTRIBUTING.md</code>.</p>
<p>The new process of publication looks like:</p>
<ul>
<li>Run <code>rustc ci/publish.rs &amp;&amp; ./publish bump</code></li>
<li>Commit the change and get it merged (either push it or go through a PR)</li>
<li>Push a tag with the versions bumped</li>
</ul>
<p>The CI for the last step, the tag push, will automatically publish the<br>
crates once CI has finished.</p>
<p>[wbg]: <a href="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs" target="_blank" title="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs">https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs</a></p>
</blockquote>



<a name="185504801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/185504801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#185504801">(Jan 13 2020 at 15:42)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a> from <code>auto-publish</code> to <code>master</code>:</p>
<blockquote>
<p>This commit updates the publication process for the cranelift suite of<br>
crates. the <code>publish-all.sh</code> script was removed in favor of a new Rust<br>
script located at <code>ci/publish.rs</code> This script is based off the one in<br>
the [wasm-bindgen repository][wbg]. Additionally publication<br>
instructions have been added to <code>CONTRIBUTING.md</code>.</p>
<p>The new process of publication looks like:</p>
<ul>
<li>Run <code>rustc ci/publish.rs &amp;&amp; ./publish bump</code></li>
<li>Commit the change and get it merged (either push it or go through a PR)</li>
<li>Push a tag with the versions bumped</li>
</ul>
<p>The CI for the last step, the tag push, will automatically publish the<br>
crates once CI has finished.</p>
<p>[wbg]: <a href="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs" target="_blank" title="https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs">https://github.com/rustwasm/wasm-bindgen/blob/master/publish.rs</a></p>
</blockquote>



<a name="188918912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/188918912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#188918912">(Feb 24 2020 at 11:50)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/bnjbvr" target="_blank" title="https://github.com/bnjbvr">bnjbvr</a>, and <a href="https://github.com/sunfishcode" target="_blank" title="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a>.</p>



<a name="189362346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20PR%20%231336%20Add%20CI%20to%20auto-publish%20to%20crates.io%20.../near/189362346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20PR.20.231336.20Add.20CI.20to.20auto-publish.20to.20crates.2Eio.20.2E.2E.2E.html#189362346">(Feb 28 2020 at 23:36)</a>:</h4>
<p>alexcrichton closed without merge <a href="https://github.com/bytecodealliance/cranelift/pull/1336" target="_blank" title="https://github.com/bytecodealliance/cranelift/pull/1336">PR #1336</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>