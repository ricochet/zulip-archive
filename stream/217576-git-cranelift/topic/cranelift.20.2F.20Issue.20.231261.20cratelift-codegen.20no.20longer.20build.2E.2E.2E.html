<html>
<head><meta charset="utf-8"><title>cranelift / Issue #1261 cratelift-codegen no longer build... · git-cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/index.html">git-cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231261.20cratelift-codegen.20no.20longer.20build.2E.2E.2E.html">cranelift / Issue #1261 cratelift-codegen no longer build...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="188699822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231261%20cratelift-codegen%20no%20longer%20build.../near/188699822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231261.20cratelift-codegen.20no.20longer.20build.2E.2E.2E.html#188699822">(Feb 21 2020 at 02:59)</a>:</h4>
<p>IcyDefiance <a href="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589475011" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589475011">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/issues/1261" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261">Issue #1261</a>:</p>
<blockquote>
<p>I got cranelift-wasm and its dependencies (including cranelift-codegen) to compile with no_std in <a href="https://github.com/IcyDefiance/cranelift" target="_blank" title="https://github.com/IcyDefiance/cranelift">my fork</a>. To do so, I also had to fork <a href="https://github.com/IcyDefiance/thiserror" target="_blank" title="https://github.com/IcyDefiance/thiserror">thiserror</a> and v0.48.2 of <a href="https://github.com/IcyDefiance/wasmparser" target="_blank" title="https://github.com/IcyDefiance/wasmparser">wasmparser</a> (there have been breaking changes since then).</p>
<p>I also copied the <code>extern crate alloc as std;</code> line from cranelift-wasm to cranelift-codegen, and eliminated all use of alloc there. (It also reduced the changes I had to make to thiserror.) Unfortunately I don't think there's a way to do the same thing with core.</p>
<p>Considering the current lack of interest in supporting no_std, as expressed in my PR, I won't bother making any new PRs. However, they're good enough for the project I'm playing with, so they may also be useful to someone else, and they may be informative if there is any future interest in supporting no_std.</p>
</blockquote>



<a name="188699962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231261%20cratelift-codegen%20no%20longer%20build.../near/188699962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231261.20cratelift-codegen.20no.20longer.20build.2E.2E.2E.html#188699962">(Feb 21 2020 at 03:03)</a>:</h4>
<p>IcyDefiance edited a <a href="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589475011" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589475011">comment</a> on <a href="https://github.com/bytecodealliance/cranelift/issues/1261" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261">Issue #1261</a>:</p>
<blockquote>
<p>I got cranelift-wasm and its dependencies (including cranelift-codegen) to compile with no_std in <a href="https://github.com/IcyDefiance/cranelift" target="_blank" title="https://github.com/IcyDefiance/cranelift">my fork</a>. To do so, I also had to fork <a href="https://github.com/IcyDefiance/thiserror" target="_blank" title="https://github.com/IcyDefiance/thiserror">thiserror</a> and v0.48.2 of <a href="https://github.com/IcyDefiance/wasmparser" target="_blank" title="https://github.com/IcyDefiance/wasmparser">wasmparser</a> (there have been breaking changes since then).</p>
<p>I also copied the <code>extern crate alloc as std;</code> line from cranelift-wasm to cranelift-codegen, and eliminated all direct use of alloc there. (It also reduced the changes I had to make to thiserror.) Unfortunately I don't think there's a way to do the same thing with core.</p>
<p>Considering the current lack of interest in supporting no_std, as expressed in my PR, I won't bother making any new PRs. However, they're good enough for the project I'm playing with, so they may also be useful to someone else, and they may be informative if there is any future interest in supporting no_std.</p>
</blockquote>



<a name="188700120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217576-git-cranelift/topic/cranelift%20/%20Issue%20%231261%20cratelift-codegen%20no%20longer%20build.../near/188700120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GitHub <a href="https://bytecodealliance.github.io/zulip-archive/stream/217576-git-cranelift/topic/cranelift.20.2F.20Issue.20.231261.20cratelift-codegen.20no.20longer.20build.2E.2E.2E.html#188700120">(Feb 21 2020 at 03:07)</a>:</h4>
<p>iximeow <a href="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589476808" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261#issuecomment-589476808">commented</a> on <a href="https://github.com/bytecodealliance/cranelift/issues/1261" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1261">Issue #1261</a>:</p>
<blockquote>
<p>I happen to know of at least one project where building cranelift-wasm as no_std is really helpful, so I just want to say I appreciate this work.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>