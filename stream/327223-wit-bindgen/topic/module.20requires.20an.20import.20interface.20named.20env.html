<html>
<head><meta charset="utf-8"><title>module requires an import interface named env · wit-bindgen · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/index.html">wit-bindgen</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html">module requires an import interface named env</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="423206201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423206201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423206201">(Feb 24 2024 at 21:46)</a>:</h4>
<p>I've tried using both cargo component and manual wit-bindgen, but both give me an error <code>error: module requires an import interface named </code>env`` converting a preview1 wasm module to a preview2 wasm component ,  and I can't find a reference to it in the example</p>



<a name="423208848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423208848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423208848">(Feb 24 2024 at 22:26)</a>:</h4>
<p>You can use e.g. <code>wasm-tools print</code> to see what functions the module is importing from <code>env</code>, which might point to what's wrong.</p>



<a name="423209022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209022">(Feb 24 2024 at 22:29)</a>:</h4>
<p>Interesting, I guess it's these:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_Znwm"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_Znwm</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">4</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZdlPv"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZdlPv</span><span class="w"> </span><span class="p">(;</span><span class="mi">1</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">0</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"__cxa_allocate_exception"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$__cxa_allocate_exception</span><span class="w"> </span><span class="p">(;</span><span class="mi">2</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">4</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZNSt12length_errorD1Ev"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZNSt12length_errorD1Ev</span><span class="w"> </span><span class="p">(;</span><span class="mi">3</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">4</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"__cxa_throw"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$__cxa_throw</span><span class="w"> </span><span class="p">(;</span><span class="mi">4</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">6</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZNSt20bad_array_new_lengthD1Ev"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZNSt20bad_array_new_lengthD1Ev</span><span class="w"> </span><span class="p">(;</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">4</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZNSt20bad_array_new_lengthC1Ev"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZNSt20bad_array_new_lengthC1Ev</span><span class="w"> </span><span class="p">(;</span><span class="mi">6</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">4</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZnwmSt11align_val_t"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZnwmSt11align_val_t</span><span class="w"> </span><span class="p">(;</span><span class="mi">20</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">3</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">import</span><span class="w"> </span><span class="s">"env"</span><span class="w"> </span><span class="s">"_ZdlPvSt11align_val_t"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$_ZdlPvSt11align_val_t</span><span class="w"> </span><span class="p">(;</span><span class="mi">21</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span> <span class="mi">2</span><span class="p">)))</span>
</code></pre></div>



<a name="423209206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209206">(Feb 24 2024 at 22:32)</a>:</h4>
<p>Did you by chance link C++ code using the <code>clang</code> command? If so, you may need to link with the <code>clang++</code> command.</p>



<a name="423209254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209254">(Feb 24 2024 at 22:33)</a>:</h4>
<p>Yeah, this was the build command</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nv">RUSTFLAGS</span><span class="o">=</span><span class="s1">'-L /opt/wasi-sdk-21.0/share/wasi-sysroot/lib/wasm32-wasi'</span><span class="w"> </span><span class="nv">CXXSTDLIB</span><span class="o">=</span>c++<span class="w"> </span><span class="nv">CC</span><span class="o">=</span>/opt/wasi-sdk-21.0/bin/clang<span class="w"> </span><span class="nv">CXX</span><span class="o">=</span>/opt/wasi-sdk-21.0/bin/clang<span class="w">  </span>cargo<span class="w"> </span>component<span class="w"> </span>build
</code></pre></div>



<a name="423209352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209352">(Feb 24 2024 at 22:34)</a>:</h4>
<p>Yeah; try changing the <code>clang</code> at the end of the <code>CXX</code> to <code>clang++</code></p>



<a name="423209371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209371">(Feb 24 2024 at 22:35)</a>:</h4>
<p>Context: this rust library pulls in a wrapper crate for tree-sitter, which is written (partly) in C++</p>



<a name="423209521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423209521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423209521">(Feb 24 2024 at 22:37)</a>:</h4>
<p>This gives the same error and the same env lines</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">RUSTFLAGS</span><span class="o">='-</span><span class="n">L</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">'</span><span class="w"> </span><span class="n">CXXSTDLIB</span><span class="o">=</span><span class="n">c</span><span class="o">++</span><span class="w"> </span><span class="n">CC</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">clang</span><span class="w"> </span><span class="n">CXX</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">clang</span><span class="o">++</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">build</span>
</code></pre></div>



<a name="423210075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423210075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423210075">(Feb 24 2024 at 22:46)</a>:</h4>
<p>IIRC, the linker was rust-lld</p>



<a name="423210138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423210138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423210138">(Feb 24 2024 at 22:47)</a>:</h4>
<p>I did get that error at one point that mentioned rust-lld<br>
This is the repo if anyone wants to try: <a href="https://github.com/benwis/femark/tree/wasi">https://github.com/benwis/femark/tree/wasi</a><br>
Running on latest Rust stable on Arch Linux</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/benwis/femark/tree/wasi" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b21f9fc59514ad135de8f62a6a1f9bae33b73921\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663735643739333538366532343263353731393464613935333433646530393561383064393134323437383233636334343266636339303464393434343935612f62656e7769732f66656d61726b)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/benwis/femark/tree/wasi" title="GitHub - benwis/femark at wasi">GitHub - benwis/femark at wasi</a></div><div class="message_embed_description">A Markdown to HTML compiler and Syntax Highlighter, built using Rust's pulldown-cmark and tree-sitter-highlight crates. Compiled for use via the Node FFI. - GitHub - benwis/femark at wasi</div></div></div>



<a name="423211839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423211839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423211839">(Feb 24 2024 at 23:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="509936">Joel Dice</span> <a href="#narrow/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env/near/423210075">said</a>:</p>
<blockquote>
<p>IIRC, the linker was rust-lld</p>
</blockquote>
<p>I could tell cargo to try using an alternate linker, is the lld in the same folder the recommended one?</p>



<a name="423213047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423213047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423213047">(Feb 24 2024 at 23:33)</a>:</h4>
<p>I'd guess rust-lld is fine, but what's needed is to link in the C++ standard library. You may need to add something like <code>-lc++ -lc++abi</code> to the link line..</p>



<a name="423221493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423221493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423221493">(Feb 25 2024 at 01:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="254083">Dan Gohman</span> <a href="#narrow/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env/near/423213047">said</a>:</p>
<blockquote>
<p>I'd guess rust-lld is fine, but what's needed is to link in the C++ standard library. You may need to add something like <code>-lc++ -lc++abi</code> to the link line..</p>
</blockquote>
<p>For a C build noob, where would I add that?</p>



<a name="423225996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423225996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423225996">(Feb 25 2024 at 03:15)</a>:</h4>
<p>Ok I tried adding it to RUSTFLAGS like so </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">RUSTFLAGS</span><span class="o">='-</span><span class="n">L</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sysroot</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">-</span><span class="n">lstatic</span><span class="o">=</span><span class="n">c</span><span class="o">++</span><span class="w"> </span><span class="o">-</span><span class="n">lstatic</span><span class="o">=</span><span class="n">c</span><span class="o">++</span><span class="n">abi</span><span class="o">'</span><span class="w"> </span><span class="n">CXXSTDLIB</span><span class="o">=</span><span class="n">c</span><span class="o">++</span><span class="w"> </span><span class="n">CC</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">clang</span><span class="w"> </span><span class="n">CXX</span><span class="o">=/</span><span class="n">opt</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">sdk</span><span class="o">-</span><span class="mf">21.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">clang</span><span class="o">++</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">build</span>
</code></pre></div>
<p>it seems to throw the same error, I'll play with this a bit. I don't understand where the env interface comes from and what controls what goes into it</p>



<a name="423229172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423229172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423229172">(Feb 25 2024 at 04:08)</a>:</h4>
<p>A thought occurs to me that this might not be a cargo issue, since it successfully builds</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">parser</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">200.0</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">metadata</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">200.0</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">tree</span><span class="o">-</span><span class="n">sitter</span><span class="o">-</span><span class="n">highlight</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">20.1</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">19.1</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">200.0</span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">femark</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.3</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">celCluster</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">femark</span><span class="p">)</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">10.67</span><span class="n">s</span>
<span class="w">    </span><span class="n">Creating</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">/</span><span class="n">celCluster</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">femark</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">femark</span><span class="p">.</span><span class="n">wasm</span>
<span class="n">error</span>: <span class="nc">module</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">`</span><span class="n">env</span><span class="err">`</span>

<span class="n">femark</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="err"></span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="p">[</span><span class="cp">$</span><span class="o">!?</span><span class="p">]</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="err">📦</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.3</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="err">🦀</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">76.0</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">10</span><span class="n">s</span>
</code></pre></div>
<p>and it's only the conversion to preview2 that's failing</p>



<a name="423236349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/module%20requires%20an%20import%20interface%20named%20env/near/423236349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> benwis <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/module.20requires.20an.20import.20interface.20named.20env.html#423236349">(Feb 25 2024 at 06:10)</a>:</h4>
<p>Fixed it, turns out I needed to set <code>CXXFLAGS=-fno-exceptions</code> and that cleared it right up</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>