<html>
<head><meta charset="utf-8"><title>rust &amp; pointer provenance · wit-bindgen · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/index.html">wit-bindgen</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html">rust &amp; pointer provenance</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="423689049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689049">(Feb 27 2024 at 20:19)</a>:</h4>
<p><span class="user-mention" data-user-id="254083">@Dan Gohman</span> is <a href="https://github.com/bytecodealliance/wit-bindgen/pull/870">https://github.com/bytecodealliance/wit-bindgen/pull/870</a> only blocked on a wasm-tools release?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wit-bindgen/pull/870" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/6bd5f986baee987f8ae26618b4bedac40bebc0db\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313661393933373331363465373565383766663033353533626661343564323838313465633163666361653635323631643730313631383733626438306630642f62797465636f6465616c6c69616e63652f7769742d62696e6467656e2f70756c6c2f383730)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wit-bindgen/pull/870" title="Preserve pointer provenance in the Rust backend. by sunfishcode · Pull Request #870 · bytecodealliance/wit-bindgen">Preserve pointer provenance in the Rust backend. by sunfishcode · Pull Request #870 · bytecodealliance/wit-bindgen</a></div><div class="message_embed_description">Use the new Pointer and Length types in the Rust backend to emit code that uses *mut c_void and usize instead of i32 when working with pointers and array lengths.
To represent PointerOrI64, use a M...</div></div></div>



<a name="423689155"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689155" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689155">(Feb 27 2024 at 20:20)</a>:</h4>
<p>Yes; I've tested it with a local dependency.</p>



<a name="423689186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689186">(Feb 27 2024 at 20:20)</a>:</h4>
<p>Could I perhaps recruit you as a guinea pig to do a wasm-tools release without me?</p>



<a name="423689206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689206">(Feb 27 2024 at 20:20)</a>:</h4>
<p>Sure</p>



<a name="423689207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689207">(Feb 27 2024 at 20:20)</a>:</h4>
<p>in the theory that the recent changes should make it much simpler</p>



<a name="423689250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689250">(Feb 27 2024 at 20:21)</a>:</h4>
<p>ok then in the hopes that it can be done without me I'm going to say "alright it's on you now" and do nothing else</p>



<a name="423689266"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689266" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689266">(Feb 27 2024 at 20:21)</a>:</h4>
<p>or at least try to do nothing else :)</p>



<a name="423689323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689323">(Feb 27 2024 at 20:21)</a>:</h4>
<p>Ok, I'll give it a try!</p>



<a name="423689879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689879">(Feb 27 2024 at 20:25)</a>:</h4>
<p>Ok, we have <a href="https://github.com/bytecodealliance/wasm-tools/pull/1427">https://github.com/bytecodealliance/wasm-tools/pull/1427</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/pull/1427" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/ffd2d9f9c9256adade1624baecce39cbde44bbd6\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f316633326430323639393061383335323635333639333239303930623935386363383937623930336663643331643132336663313665346562316633306533662f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c732f70756c6c2f31343237)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/pull/1427" title="Release wasm-tools 1.201.0 by github-actions[bot] · Pull Request #1427 · bytecodealliance/wasm-tools">Release wasm-tools 1.201.0 by github-actions[bot] · Pull Request #1427 · bytecodealliance/wasm-tools</a></div><div class="message_embed_description">This is an automated pull request from CI to release
wasm-tools 1.201.0 when merged. The commit
message for this PR has a marker that is detected by CI to create
tags and publish crate artifacts.
W...</div></div></div>



<a name="423689915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423689915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423689915">(Feb 27 2024 at 20:25)</a>:</h4>
<p>I'm contractually obliged to have no comment</p>



<a name="423692832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423692832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423692832">(Feb 27 2024 at 20:44)</a>:</h4>
<p>it is a little silly to think about the number of times CI runs on exactly the same codebase</p>



<a name="423692923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423692923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423692923">(Feb 27 2024 at 20:45)</a>:</h4>
<p>it's ok we just say "that's not my problem for today"</p>



<a name="423692955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423692955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423692955">(Feb 27 2024 at 20:45)</a>:</h4>
<p>oh totally, just musing</p>



<a name="423692963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423692963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423692963">(Feb 27 2024 at 20:45)</a>:</h4>
<p>I'd like to set up something Wasmtime-like where PRs only run a subset of CI, but it was kind of hard to do that in wasmtime</p>



<a name="423693046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423693046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423693046">(Feb 27 2024 at 20:45)</a>:</h4>
<p>in infra in rust I was always convinced that 90% of rust/crate downloads are from CI</p>



<a name="423693101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423693101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423693101">(Feb 27 2024 at 20:46)</a>:</h4>
<p>probably from like the same set of machines that are all used on github actions</p>



<a name="423694140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423694140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423694140">(Feb 27 2024 at 20:53)</a>:</h4>
<p>and we're done!</p>



<a name="423694256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423694256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423694256">(Feb 27 2024 at 20:53)</a>:</h4>
<p>huzzah it worked!</p>



<a name="423755412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423755412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Christof Petig <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423755412">(Feb 28 2024 at 06:39)</a>:</h4>
<p><span class="user-mention" data-user-id="254083">@Dan Gohman</span> congratulations, this was very fast!</p>
<p>In the same time I was only able to get to a working prototype of the c++ binding on 64bit with lots of open codegen issues I hand-patched around. Now I need to clean it up to get closer to releasable state.</p>
<p>But this PoC was only possible leveraging your ground work in wasm tools. <span aria-label="bouquet" class="emoji emoji-1f490" role="img" title="bouquet">:bouquet:</span></p>



<a name="423891080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891080">(Feb 28 2024 at 19:47)</a>:</h4>
<p><span class="user-mention" data-user-id="254083">@Dan Gohman</span> I hit <a href="https://github.com/bytecodealliance/wit-bindgen/blob/a0c7383542183d0d9bb60d370477961f8118224a/crates/core/src/abi.rs#L1925">this panic</a> when testing if Wasmtime worked with <code>wit-bindgen</code> main now that this provenance work has landed. I think there's some missing bitcasts in there.</p>
<p>I started to write a test for <code>tests/codegen/*.wit</code> and got as far as:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">package</span><span class="w"> </span><span class="n">test</span>:<span class="nc">variants</span><span class="o">-</span><span class="n">unioning</span><span class="o">-</span><span class="n">types</span><span class="p">;</span>

<span class="n">world</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">variant</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">a</span><span class="p">(</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">u8</span><span class="o">&gt;</span><span class="p">),</span>
<span class="w">    </span><span class="n">b</span><span class="p">(</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="o">&gt;</span><span class="p">),</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">f1</span>: <span class="nc">func</span><span class="p">(</span><span class="n">x</span>: <span class="nc">v1</span><span class="p">);</span>

<span class="w">  </span><span class="n">variant</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">a</span><span class="p">(</span><span class="n">list</span><span class="o">&lt;</span><span class="kt">u8</span><span class="o">&gt;</span><span class="p">),</span>
<span class="w">    </span><span class="n">b</span><span class="p">(</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="kt">f32</span><span class="o">&gt;</span><span class="p">),</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">f2</span>: <span class="nc">func</span><span class="p">(</span><span class="n">x</span>: <span class="nc">v2</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>but I fear that this rabbit hole may be a bit deeper than I imagined. Would you be up for filling out that test and the panics there?</p>



<a name="423891151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891151">(Feb 28 2024 at 19:48)</a>:</h4>
<p>basically I think more conversions need to be handled in the into-and-out-of pointer/length cases</p>



<a name="423891301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891301">(Feb 28 2024 at 19:48)</a>:</h4>
<p>Ah, ok. Yeah, I'll write more tests for variants and implement them.</p>



<a name="423891334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891334">(Feb 28 2024 at 19:49)</a>:</h4>
<p>ok cool, thanks!</p>



<a name="423891398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891398">(Feb 28 2024 at 19:49)</a>:</h4>
<p>all of these cases are already handled by <code>join</code> in <code>wasm-tools</code> so no need to touch things there, I think it's basically more of those join cases that need to be reflected in the bitcasts</p>



<a name="423891512"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891512" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891512">(Feb 28 2024 at 19:50)</a>:</h4>
<p>Cool, should be straightforward then</p>



<a name="423891723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891723">(Feb 28 2024 at 19:51)</a>:</h4>
<p>we can theoretically generate these tests with <code>wasm-tools wit-smith</code> and then use that to fuzz the bindings generators</p>



<a name="423891755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423891755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423891755">(Feb 28 2024 at 19:51)</a>:</h4>
<p>but honestly I'm afraid of the volume of bugs when hooking up bindings generators to the fuzzer</p>



<a name="423900465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423900465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423900465">(Feb 28 2024 at 20:49)</a>:</h4>
<p>Ok, <a href="https://github.com/bytecodealliance/wit-bindgen/pull/872">https://github.com/bytecodealliance/wit-bindgen/pull/872</a> is up. It's straightforward, but there are getting to be a lot of bitcasts. I'm thinking about whether to remove the Bitcast enum and just have each backend match on the (to, from) pair itself.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wit-bindgen/pull/872" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/d4551ceb1fd8e1b3e2c64f995e9db2ed5432f4f3\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f356361346265393963393763666261376237376330616131663932613664316564323165666466353463303165303833633434643035313265656631393532342f62797465636f6465616c6c69616e63652f7769742d62696e6467656e2f70756c6c2f383732)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wit-bindgen/pull/872" title="Implement more `Bitcast` conversions. by sunfishcode · Pull Request #872 · bytecodealliance/wit-bindgen">Implement more `Bitcast` conversions. by sunfishcode · Pull Request #872 · bytecodealliance/wit-bindgen</a></div><div class="message_embed_description">Implement Bitcast conversions between more combinations of f32, f64, pointer, and length types.</div></div></div>



<a name="423902414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/rust%20%26%20pointer%20provenance/near/423902414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/rust.20.26.20pointer.20provenance.html#423902414">(Feb 28 2024 at 21:01)</a>:</h4>
<p>(following up on the PR)</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>