<html>
<head><meta charset="utf-8"><title>wasi_snapshot_preview1.wasm question · wit-bindgen · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/index.html">wit-bindgen</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.2Ewasm.20question.html">wasi_snapshot_preview1.wasm question</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="347485453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.wasm%20question/near/347485453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.2Ewasm.20question.html#347485453">(Apr 06 2023 at 17:55)</a>:</h4>
<p>So I (finally) got an end to end build working with a c++ guest and a JS host.</p>
<p>Q1 I am coming from emcc and am used to thinking of my wasm file like a DLL or SO file, should I be using wasi_snapshot_preview1.command.wasm or wasi_snapshot_preview1.reactor.wasm?<br>
Q2 When building the c++ code, how do I control which wasi features to enable (or disable)?  Initially I want to create a wasm component with no WASI support, to match what I had in my emcc + IDL build (so I can compare the two built wasm files in a browser and NodeJS) at which point I can start introducing some simple WASI support.<br>
Q3 Has anyone thought about creating a vcpkg triplet for wasi-sdk as an optional replacement for the "wasm32-emscripten" triplet?</p>
<p>(Thx in advance)</p>



<a name="347487338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.wasm%20question/near/347487338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramon Klass <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.2Ewasm.20question.html#347487338">(Apr 06 2023 at 18:04)</a>:</h4>
<p>as to your first question, commands have stdin, stdout, stderr and a main function while reactors can export any interface, so reactors are most close to SO libs</p>



<a name="347490823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.wasm%20question/near/347490823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.2Ewasm.20question.html#347490823">(Apr 06 2023 at 18:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="550770">Ramon Klass</span> <a href="#narrow/stream/327223-wit-bindgen/topic/wasi_snapshot_preview1.2Ewasm.20question/near/347487338">said</a>:</p>
<blockquote>
<p>as to your first question, commands have stdin, stdout, stderr and a main function while reactors can export any interface, so reactors are most close to SO libs</p>
</blockquote>
<p>Thanks - I switched to use that, added <code>-mexec-model=reactor</code> to my CXX_FLAGS and was able to remove my "main" function.<br>
I should be in a good position to start adding some interfaces to my wit file now...</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>