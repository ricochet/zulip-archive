<html>
<head><meta charset="utf-8"><title>✔ options without types? · wit-bindgen · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/index.html">wit-bindgen</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html">✔ options without types?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="412858577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412858577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412858577">(Jan 15 2024 at 00:13)</a>:</h4>
<p>Is this valid wit</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">oint</span><span class="o">-</span><span class="n">arg</span>: <span class="nc">func</span><span class="p">(</span><span class="n">x</span>: <span class="nc">option</span><span class="o">&lt;</span><span class="n">s32</span><span class="o">&gt;</span><span class="p">);</span>
</code></pre></div>
<p>I.e. an option without a <code>type</code> ?</p>



<a name="412858811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412858811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412858811">(Jan 15 2024 at 00:15)</a>:</h4>
<p>If so, for the codgen, would it be typical to create an implicit <code>type</code> for it?</p>



<a name="412858979"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412858979" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412858979">(Jan 15 2024 at 00:16)</a>:</h4>
<p>I think it is, at least the c codegen does it</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">typedef</span><span class="w"> </span><span class="k">struct</span> <span class="p">{</span>
<span class="w">  </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_some</span><span class="p">;</span>
<span class="w">  </span><span class="n">int32_t</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">my_world_option_s32_t</span><span class="p">;</span>
</code></pre></div>



<a name="412880020"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412880020" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412880020">(Jan 15 2024 at 03:28)</a>:</h4>
<p>I guess I'm just curious why the c and go codegen have logic for anonymous types but not the others.</p>



<a name="412880049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412880049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412880049">(Jan 15 2024 at 03:29)</a>:</h4>
<p><a href="#narrow/stream/327223-wit-bindgen/topic/options.20without.20types.3F/near/412880020">A message</a> was moved here from <a class="stream-topic" data-stream-id="327223" href="/#narrow/stream/327223-wit-bindgen/topic/Relation.20between.20imported.20and.20exported.20types">#wit-bindgen &gt; Relation between imported and exported types</a> by <span class="user-mention silent" data-user-id="395878">Scott Waye</span>.</p>



<a name="412896529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412896529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Slava Kuzmich <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412896529">(Jan 15 2024 at 07:02)</a>:</h4>
<p><code>option</code> is one of the <a href="https://component-model.bytecodealliance.org/design/wit.html#built-in-types">built-in WIT types</a> and can be used without attaching a name. As for bindings for statically typed languages:</p>
<ul>
<li>Some languages have option type built-in.</li>
<li>Some languages with the concept of "nullability" in type system, and can express shallow options.</li>
<li>Some languages with generics/templates can define option once, and reuse it for all WIT options.</li>
<li>Otherwise, you can create a new option type for each payload type, like was shown in your C example.</li>
</ul>



<a name="412948407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/%E2%9C%94%20options%20without%20types%3F/near/412948407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/.E2.9C.94.20options.20without.20types.3F.html#412948407">(Jan 15 2024 at 12:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395878">Scott Waye</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>