<html>
<head><meta charset="utf-8"><title>JIT Hot Swapping · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html">JIT Hot Swapping</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="447176960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/JIT%20Hot%20Swapping/near/447176960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dima <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html#447176960">(Jun 26 2024 at 10:18)</a>:</h4>
<p>If someone would like to have a hot-reloadable rust functions using cranelift rust backend, how would someone start to implement such a feature? Any links or resources would be appreciated.</p>



<a name="447194113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/JIT%20Hot%20Swapping/near/447194113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html#447194113">(Jun 26 2024 at 11:37)</a>:</h4>
<p>cc <a href="https://github.com/rust-lang/rustc_codegen_cranelift/tree/wip_hot_code_swapping">https://github.com/rust-lang/rustc_codegen_cranelift/tree/wip_hot_code_swapping</a> Be aware however that it crashes after just a couple of reloads as every reload will recompile all functions and memory fragmentation will quickly cause all jitted code to be spread out over more than 2GB of memory, which cranelift-jit doesn't like.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rustc_codegen_cranelift/tree/wip_hot_code_swapping" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ed435ee551eb87eeadf5363ccfb592924f4f0e1c/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613434643632666339653133616532663033353362343435633764393339643532356439636161393061633630643931393037303866396233343566373535612f727573742d6c616e672f72757374635f636f646567656e5f6372616e656c696674&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rustc_codegen_cranelift/tree/wip_hot_code_swapping" title="GitHub - rust-lang/rustc_codegen_cranelift at wip_hot_code_swapping">GitHub - rust-lang/rustc_codegen_cranelift at wip_hot_code_swapping</a></div><div class="message_embed_description">Cranelift based backend for rustc. Contribute to rust-lang/rustc_codegen_cranelift development by creating an account on GitHub.</div></div></div>



<a name="447200783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/JIT%20Hot%20Swapping/near/447200783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dima <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html#447200783">(Jun 26 2024 at 12:11)</a>:</h4>
<p><span class="user-mention" data-user-id="264278">@bjorn3</span> nice! </p>
<p>2222 commits behind master... any plans to update the branch to current master, any roadmap how to bring functional hot reloading? :)</p>



<a name="447201407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/JIT%20Hot%20Swapping/near/447201407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html#447201407">(Jun 26 2024 at 12:14)</a>:</h4>
<p>I guess I will update it at some point. No plans at all for when though. Don't expect it within the next couple of months at least. There are bigger priorities than hot code swapping.</p>



<a name="447202434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/JIT%20Hot%20Swapping/near/447202434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dima <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/JIT.20Hot.20Swapping.html#447202434">(Jun 26 2024 at 12:18)</a>:</h4>
<p>I see... thanks for incredible work.. just tried cranelift backend yesterday on m1 and it compiled big project fine 20% faster then llvm backend.. and it felt much lighter compilation (I guess it's due to less CPU time needed for cranelift).</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>