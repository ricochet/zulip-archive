<html>
<head><meta charset="utf-8"><title>✔ `bitselect`on vector semantics · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html">✔ `bitselect`on vector semantics</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="348794198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348794198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kmeakin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348794198">(Apr 12 2023 at 17:34)</a>:</h4>
<p>What are the semantics of <code>bitselect</code> on vectors?</p>



<a name="348794652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348794652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kmeakin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348794652">(Apr 12 2023 at 17:36)</a>:</h4>
<p>Will an instruction like <code>bitselect 0b10 x y</code> result in a vector where the first lane is the first lane of x and the second lane is the second lane of y?</p>



<a name="348794998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348794998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kmeakin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348794998">(Apr 12 2023 at 17:38)</a>:</h4>
<p>Or is the bitmask applied to each lane separately? ie the first lane would be <code>bitselect(0b10 x[0] y[0])</code> and the second lane would be <code>bitselect(0b10 x[1] y[1])</code>?</p>



<a name="348795064"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348795064" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> kmeakin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348795064">(Apr 12 2023 at 17:38)</a>:</h4>
<p>What about when the bitmask is itself a vector?</p>



<a name="348796370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348796370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jamey Sharp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348796370">(Apr 12 2023 at 17:44)</a>:</h4>
<p>The documentation for <code>bitselect</code> says "For each bit in <code>c</code>, this instruction selects the corresponding bit from <code>x</code> if the bit in <code>x</code> is 1 and the corresponding bit from <code>y</code> if the bit in <code>c</code> is 0." I believe that applies the same to vectors as scalars, so this instruction doesn't care about lane boundaries: each bit in each lane is used to determine which input to use for the corresponding bit of the result.</p>



<a name="348812920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20%60bitselect%60on%20vector%20semantics/near/348812920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20.60bitselect.60on.20vector.20semantics.html#348812920">(Apr 12 2023 at 19:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="600668">kmeakin</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>