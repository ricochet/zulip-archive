<html>
<head><meta charset="utf-8"><title>✔ Cranelift cdecl abi · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html">✔ Cranelift cdecl abi</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="445021136"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20Cranelift%20cdecl%20abi/near/445021136" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cherry <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html#445021136">(Jun 16 2024 at 21:17)</a>:</h4>
<p>(Note, using Windows x86_64)</p>
<p>I've been looking in the list of abi's for cranelift, which for stable abi's supports fastcall and systemv (as far as I understand).</p>
<p>I'm looking to make my JIT function callable from a cdecl abi. Is there a way to do this, or is there something obvious I'm missing? I have been looking online and see some people say cdecl == fastcall == stdcall, but I look at the abi docs and they seem to be slightly different, e.g. caller or callee cleans up stack, which I would think should be pretty crucial things. So I'm not sure if I can rely on the advice that "cdecl == fastcall".</p>
<p>What am I missing here?</p>
<p>Edit: Just to be clear, I'm talking about <code>CallConv</code></p>



<a name="445021525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20Cranelift%20cdecl%20abi/near/445021525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Rønne Petersen <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html#445021525">(Jun 16 2024 at 21:23)</a>:</h4>
<p>It is correct that cdecl == stdcall == fastcall on Windows x86-64. There is basically only one calling convention there (if you ignore vectorcall anyway).</p>
<p>If you look at the MSVC documentation, it explicitly states that these CC modifiers are ignored on x64. (IIRC the only exception is that cdecl can be used as an override if you've told the compiler to default to vectorcall.)</p>



<a name="445037348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20Cranelift%20cdecl%20abi/near/445037348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Cherry <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html#445037348">(Jun 17 2024 at 01:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="726532">Alex Rønne Petersen</span> <a href="#narrow/stream/206238-general/topic/Cranelift.20cdecl.20abi/near/445021525">said</a>:</p>
<blockquote>
<p>It is correct that cdecl == stdcall == fastcall on Windows x86-64. There is basically only one calling convention there (if you ignore vectorcall anyway).</p>
</blockquote>
<p>Thank you for clarifying this point!</p>



<a name="445188016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20Cranelift%20cdecl%20abi/near/445188016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html#445188016">(Jun 17 2024 at 17:37)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="206238" href="/#narrow/stream/206238-general/topic/Cranelift.20cdecl.20abi">#general &gt; Cranelift cdecl abi</a> by <span class="user-mention silent" data-user-id="253990">fitzgen (he/him)</span>.</p>



<a name="445730917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/%E2%9C%94%20Cranelift%20cdecl%20abi/near/445730917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/.E2.9C.94.20Cranelift.20cdecl.20abi.html#445730917">(Jun 20 2024 at 00:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="702818">Cherry</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>