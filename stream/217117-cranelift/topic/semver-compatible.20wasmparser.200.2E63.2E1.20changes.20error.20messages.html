<html>
<head><meta charset="utf-8"><title>semver-compatible wasmparser 0.63.1 changes error messages · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html">semver-compatible wasmparser 0.63.1 changes error messages</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="212589228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212589228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212589228">(Oct 07 2020 at 17:06)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="253994">@Alex Crichton</span> et al -- quick note that wasmparser 0.63.1 is potentially an issue for Firefox as it changes error messages slightly, but is semver-compatible with cranelift-codegen's "0.63" dep; so when we develop locally (not against the wasmparser version that is vendored into the mozilla-central repo) we have non-passing tests that pass otherwise</p>



<a name="212589254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212589254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212589254">(Oct 07 2020 at 17:07)</a>:</h4>
<p>Could we have a policy of semver-bumping when we change error messages?</p>



<a name="212596051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596051">(Oct 07 2020 at 18:00)</a>:</h4>
<p>oh hm, so typically semver-bumps are generally about APIs as in "your code keeps compiling and probably keeps working"</p>



<a name="212596066"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596066" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596066">(Oct 07 2020 at 18:00)</a>:</h4>
<p>"keeps working" is sorta vague, though, and typically things like error messages don't fall under that category</p>



<a name="212596089"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596089" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596089">(Oct 07 2020 at 18:00)</a>:</h4>
<p>if it's causing issues though I can yank it and publish as 0.64.0</p>



<a name="212596120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596120">(Oct 07 2020 at 18:00)</a>:</h4>
<p>ideally making error messages better though wouldn't cause too much process to get engaged</p>



<a name="212596660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596660">(Oct 07 2020 at 18:04)</a>:</h4>
<p>I don't think a yank is necessary, probably, it'll just need some updating in the tests next time someone vendors Cranelift</p>



<a name="212596680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596680">(Oct 07 2020 at 18:05)</a>:</h4>
<p>(... which may be me, today or tomorrow)</p>



<a name="212596881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212596881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212596881">(Oct 07 2020 at 18:06)</a>:</h4>
<p>in any case I don't want SM to be a drag on improving error messages :-) ideally if things are somewhat stable then this will mostly be a non-issue. And longer-term we should find a better strategy for asserting specific errors</p>



<a name="212711600"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212711600" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212711600">(Oct 08 2020 at 15:59)</a>:</h4>
<p>in <code>build.rs</code>-generated tests we only check that the spec test expected error messages are a prefix of the actual error messages, so we have some wiggle room. is SM testing full messages? is there a way we could relax it a bit like we do in <code>build.rs</code>?</p>



<a name="212711689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212711689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212711689">(Oct 08 2020 at 15:59)</a>:</h4>
<p>Yep, it's matching on full messages, or at least more of the text than the prefix (e.g., it wants to assert specific types in type-mismatch messages)</p>



<a name="212711804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212711804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212711804">(Oct 08 2020 at 16:00)</a>:</h4>
<p>I suppose it could be relaxed, but that's more of a question for Lars over in SpiderMonkey-land (we can certainly bring it up!)</p>



<a name="212711837"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/semver-compatible%20wasmparser%200.63.1%20changes%20error%20messages/near/212711837" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/semver-compatible.20wasmparser.200.2E63.2E1.20changes.20error.20messages.html#212711837">(Oct 08 2020 at 16:00)</a>:</h4>
<p>yeah it's a trade off</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>