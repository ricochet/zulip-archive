<html>
<head><meta charset="utf-8"><title>WASM backend · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html">WASM backend</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="389890880"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/389890880" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Nunley <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#389890880">(Sep 08 2023 at 14:19)</a>:</h4>
<p>Would a WASM backend for cranelift make sense at all? I was thinking about using cranelift for a bootstrapping project of mine</p>



<a name="390033123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/390033123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#390033123">(Sep 09 2023 at 12:57)</a>:</h4>
<p>Yes :) <a href="https://github.com/bytecodealliance/wasmtime/issues/2566">https://github.com/bytecodealliance/wasmtime/issues/2566</a> Also see <a href="https://github.com/cfallin/waffle">https://github.com/cfallin/waffle</a> which may be useful in implementing such backend.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/2566" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/b65081c7af59a359a4d7dd29933afab4a7e25b22\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393338366236353364323236353131666363636434373937356237323730333235366238316335656635356235323337303261363263373031373735633439652f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f32353636)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/2566" title="Add Webassembly backend · Issue #2566 · bytecodealliance/wasmtime">Add Webassembly backend · Issue #2566 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Feature Add a Cranelift backend that compiles to Webassembly. Benefit This would allow a compiler to run in the browser and compile code to run in the browser. Implementation No plan yet Alternativ...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/cfallin/waffle" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/aa28d7c8bd361aa618727b5e76c5d711d21c8022\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343662653165383738653563616161326263633937303231653939663333653933303338353134646261643330313462313630393836663664306234666235312f6366616c6c696e2f776166666c65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cfallin/waffle" title="GitHub - cfallin/waffle">GitHub - cfallin/waffle</a></div><div class="message_embed_description">Contribute to cfallin/waffle development by creating an account on GitHub.</div></div></div>



<a name="463538672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463538672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463538672">(Aug 19 2024 at 23:36)</a>:</h4>
<p>Have there been any updates on this in the last few months?</p>



<a name="463539009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463539009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463539009">(Aug 19 2024 at 23:40)</a>:</h4>
<p>nope, no one has written a Wasm backend for CL or is working on it to my knowledge; anyone who wants to is encouraged to comment on the issue above</p>



<a name="463611957"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463611957" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463611957">(Aug 20 2024 at 07:03)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc_codegen_cranelift/blob/waffle/src/driver/wasm.rs">https://github.com/rust-lang/rustc_codegen_cranelift/blob/waffle/src/driver/wasm.rs</a> has a very bare bones wasm backend.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rustc_codegen_cranelift/blob/waffle/src/driver/wasm.rs" style="background-image: url(&quot;https://uploads.zulipusercontent.net/10e7466a8b7d2c0cc53ee65bff562c2e1505b53e/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f306165663438333466346337626437336333393437616237636333663636393962303539633833616165666664663032376531323237376163643662356163382f727573742d6c616e672f72757374635f636f646567656e5f6372616e656c696674&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rustc_codegen_cranelift/blob/waffle/src/driver/wasm.rs" title="rustc_codegen_cranelift/src/driver/wasm.rs at waffle · rust-lang/rustc_codegen_cranelift">rustc_codegen_cranelift/src/driver/wasm.rs at waffle · rust-lang/rustc_codegen_cranelift</a></div><div class="message_embed_description">Cranelift based backend for rustc. Contribute to rust-lang/rustc_codegen_cranelift development by creating an account on GitHub.</div></div></div>



<a name="463634112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463634112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vulcain <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463634112">(Aug 20 2024 at 08:49)</a>:</h4>
<p>I will do it once I'm done with the winch aarch64 implementation <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="463786586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463786586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463786586">(Aug 20 2024 at 19:04)</a>:</h4>
<p>I was going to say I can make a bit of an attempt over next month or so but would definitely be the largest contribution to cranelift I’ve really tried to do</p>



<a name="463789864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/463789864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#463789864">(Aug 20 2024 at 19:18)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/wasmtime/pull/9089">https://github.com/bytecodealliance/wasmtime/pull/9089</a> is a relatively recent example of what adding a new backend to cranelift looks like</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/9089" style="background-image: url(&quot;https://uploads.zulipusercontent.net/4b502e1ec1d1176d24688ffe1a95162e583b47a1/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633331376264373238343233623737303937633432313134333065306332643239373030323665666531333665393936396234656335633764653766666364332f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f39303839&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/9089" title="Cranelift: Add a new backend for emitting Pulley bytecode by fitzgen · Pull Request #9089 · bytecodealliance/wasmtime">Cranelift: Add a new backend for emitting Pulley bytecode by fitzgen · Pull Request #9089 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit adds two new backends for Cranelift that emits 32- and 64-bit Pulley
bytecode. The backends are both actually the same, with a common implementation
living in cranelift/codegen/src/isa/...</div></div></div>



<a name="464668663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/WASM%20backend/near/464668663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kirp <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/WASM.20backend.html#464668663">(Aug 23 2024 at 15:11)</a>:</h4>
<p>Looking at isle instructions, I guess most of this set corresponds to MInsts of the wasm virtual machine <a href="https://webassembly.github.io/spec/core/appendix/index-instructions.html">https://webassembly.github.io/spec/core/appendix/index-instructions.html</a></p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>