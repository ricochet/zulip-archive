<html>
<head><meta charset="utf-8"><title>getting started with traps · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/getting.20started.20with.20traps.html">getting started with traps</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="220452473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/getting%20started%20with%20traps/near/220452473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nathan Ringo <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/getting.20started.20with.20traps.html#220452473">(Dec 19 2020 at 04:02)</a>:</h4>
<p>I'm trying out cranelift for the first time for a JIT, and I'm unclear on how traps are meant to be used. I did <code>fb.ins().resumable_trap(TrapCode::User(0x51f1));</code>, but the generated assembly appears to only contain a <code>ud2</code>, with no reference to <code>0x51f1</code>. I'm using a <code>NullTrapSink</code> right now; it would make sense if I needed to implement a <code>TrapSink</code>, but that doesn't appear to answer resumableness.</p>



<a name="220488593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/getting%20started%20with%20traps/near/220488593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/getting.20started.20with.20traps.html#220488593">(Dec 19 2020 at 21:40)</a>:</h4>
<p>The trap code is only written to the trap sink. If yoy need it, you must store it somewhere. You can resume from the trap by returning from the SIGILL signal handler and resuming execution at the next instructiin.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>