<html>
<head><meta charset="utf-8"><title>basic blocks · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html">basic blocks</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="183791968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183791968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183791968">(Dec 18 2019 at 21:24)</a>:</h4>
<p><span class="user-mention" data-user-id="254393">@Benjamin Bouvier</span> Are we ready to remove the basic-blocks feature gate and make it default?</p>



<a name="183792095"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183792095" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183792095">(Dec 18 2019 at 21:26)</a>:</h4>
<p>is the plan to completely remove EBBs, or make them available-but-not-on-by-default? or first disable, but eventually remove?</p>



<a name="183792152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183792152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183792152">(Dec 18 2019 at 21:27)</a>:</h4>
<p>The plan is to remove them in the near-term. I'd still like to keep them as an optimization for one particular pass (I believe wasm IR to CLIF conversion) as an internal detail.</p>



<a name="183792219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183792219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183792219">(Dec 18 2019 at 21:28)</a>:</h4>
<p>The new regallocs that <span class="user-mention" data-user-id="254393">@Benjamin Bouvier</span> and Julian Seward (who's not here!) are writing likely depend on non-ebb representations.</p>



<a name="183796243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183796243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> iximeow <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183796243">(Dec 18 2019 at 22:19)</a>:</h4>
<blockquote>
<p><span class="user-mention silent" data-user-id="254393">Benjamin Bouvier</span> Are we ready to remove the basic-blocks feature gate and make it default?</p>
</blockquote>
<p><a href="https://github.com/bytecodealliance/cranelift/commit/decec8bb4e29572c13e6e325c2c2ebb1a6ea7b4f" target="_blank" title="https://github.com/bytecodealliance/cranelift/commit/decec8bb4e29572c13e6e325c2c2ebb1a6ea7b4f">https://github.com/bytecodealliance/cranelift/commit/decec8bb4e29572c13e6e325c2c2ebb1a6ea7b4f</a> &lt;-- basic-blocks has been default for a few months now, fwiw. as soon as EBBs are removed i plan on closing <a href="https://github.com/bytecodealliance/cranelift/issues/1219" target="_blank" title="https://github.com/bytecodealliance/cranelift/issues/1219">https://github.com/bytecodealliance/cranelift/issues/1219</a>.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/cranelift/commit/decec8bb4e29572c13e6e325c2c2ebb1a6ea7b4f" style="background-image: url(https://avatars3.githubusercontent.com/u/1179566?s=200&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/cranelift/commit/decec8bb4e29572c13e6e325c2c2ebb1a6ea7b4f" target="_blank" title="Fix #796: Enable basic-blocks by default. · bytecodealliance/cranelift@decec8b">Fix #796: Enable basic-blocks by default. · bytecodealliance/cranelift@decec8b</a></div><div class="message_embed_description">Cranelift code generator. Contribute to bytecodealliance/cranelift development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/cranelift/issues/1219" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)" target="_blank"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/cranelift/issues/1219" target="_blank" title="Verifier(?) bug in divert-heavy function · Issue #1219 · bytecodealliance/cranelift">Verifier(?) bug in divert-heavy function · Issue #1219 · bytecodealliance/cranelift</a></div><div class="message_embed_description">First, some clif: ; guest_func_73448 function u0:73448(i64 vmctx, i32, i32) -&gt; i32 system_v { gv0 = vmctx heap0 = static gv0, min 0x0052_0000, bound 0x0052_0000, offset_guard 0x0040_0000, index_...</div></div></div>



<a name="183824655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183824655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183824655">(Dec 19 2019 at 08:16)</a>:</h4>
<p>Yes, the plan is to remove basic blocks entirely. If we wanted to keep them, we'd need either to maintain all the optimization passes so they work with EBBs, or disable them all. So I'm strongly in favor of removing them entirely.</p>



<a name="183824693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/basic%20blocks/near/183824693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/basic.20blocks.html#183824693">(Dec 19 2019 at 08:17)</a>:</h4>
<p>For the bikeshedding matters, I think "Block" / "block" is better than "Bb" / "bb" as a replacement for "Ebb" / "ebb". We've had "Value" in the past, same number of letters, and fully-expanded is less ambiguous and more readable than the acronym.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>