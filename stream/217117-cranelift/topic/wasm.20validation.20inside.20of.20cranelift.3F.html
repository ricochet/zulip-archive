<html>
<head><meta charset="utf-8"><title>wasm validation inside of cranelift? · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html">wasm validation inside of cranelift?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="203747476"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747476" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747476">(Jul 13 2020 at 17:56)</a>:</h4>
<p>I've got a question for folks who manage cranelift-in-spidermonkey, currently cranelift does no validation of the input wasm module assuming that the embedder does the actual validation (e.g. wasmtime calls <code>wasmparser::validate</code> and presumably spidermonkey validates elsewhere). I think though this may not be tenable too much further into the future.</p>



<a name="203747533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747533">(Jul 13 2020 at 17:57)</a>:</h4>
<p>One example is that <code>ref.is_null</code> no longer encodes its type in the instruction, so to figure out whether you're testing <code>externref</code> or <code>funcref</code> you need to look at the type stack</p>



<a name="203747596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747596">(Jul 13 2020 at 17:57)</a>:</h4>
<p>wasmtime gets away with this by using a different representation so we can look at the type of the cranelift value, but there may be instructions in the future which need non-local information about how to codegen something</p>



<a name="203747726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747726">(Jul 13 2020 at 17:58)</a>:</h4>
<p>Additionally validation has a nontrivial cost in wasmtime right now because we simply "run it up front" and throw away all the results, so for Wasmtime specifically it'd be best actually if the module was validated during translation (this would also make validation parallel, which it currently isn't in wasmtime)</p>



<a name="203747749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747749">(Jul 13 2020 at 17:58)</a>:</h4>
<p>so all of that to ask, what would folks think about adding validation interleaved with cranelift-wasm's translation?</p>



<a name="203747823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747823">(Jul 13 2020 at 17:59)</a>:</h4>
<p>Is this a cost specifically avoided in the spidermonkey integration? For example do we need to make validation a compile time or runtime switch for cranelift? Or would spidermonkey be ok if cranelift double-validated</p>



<a name="203747862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203747862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203747862">(Jul 13 2020 at 17:59)</a>:</h4>
<p>as in, if cranelift validated what spidermonkey has already validated</p>



<a name="203749822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203749822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203749822">(Jul 13 2020 at 18:12)</a>:</h4>
<p>AFAICT, the wasm module has already been parsed by other bits of SM's wasm frontend by the time that Cranelift is invoked to compile functions; there are a bunch of shims to move the types/signatures over that I haven't internalized. So validation that happens during wasm parsing in Cranelift would be an extra cost; but intuitively it seems to me that it might not be <em>too much</em> extra cost if the work is essentially shared by parsing and validation</p>



<a name="203749918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203749918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203749918">(Jul 13 2020 at 18:13)</a>:</h4>
<p>My instinct at first, at least, is to say that it's better for CL to remain simple, rather than trying to make all validation conditional. If it's too much latency later, we can definitely come back and refactor. But <span class="user-mention" data-user-id="254393">@Benjamin Bouvier</span> probably has better thoughts on this! (AFAIK he's out today and tomorrow)</p>



<a name="203749956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203749956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203749956">(Jul 13 2020 at 18:14)</a>:</h4>
<p>That's a good point that I'm also not familiar with the spidermonkey integration, I'm assuming it just hands a blob of bytes to cranelift but I could be wrong</p>



<a name="203750080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750080">(Jul 13 2020 at 18:14)</a>:</h4>
<p>And yeah doing this conditionally would be tricky, mainly because I'm not sure how to conditionalize the translation phase where we actually need the type information</p>



<a name="203750096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750096">(Jul 13 2020 at 18:14)</a>:</h4>
<p>well, eventually would probably need the type information, today we're getting by ok</p>



<a name="203750423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750423">(Jul 13 2020 at 18:17)</a>:</h4>
<p>Yup, so here's the loop that drives function compilations -- uses a <code>Decoder</code> which is a SM-side wasm parser: <a href="https://searchfox.org/mozilla-central/source/js/src/wasm/WasmCraneliftCompile.cpp#476">https://searchfox.org/mozilla-central/source/js/src/wasm/WasmCraneliftCompile.cpp#476</a> .</p>



<a name="203750721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750721">(Jul 13 2020 at 18:19)</a>:</h4>
<p>I'd need to read/think a bit more before saying what would make the most sense long-term... we definitely still need to parse for baseline compilation, before Cranelift is involved... but for now it seems parsing costs would be dwarfed by the other compilation stages so it doesn't seem like a big issue to me!</p>



<a name="203750773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750773">(Jul 13 2020 at 18:19)</a>:</h4>
<p>oh ok nice, I'll dig into that function</p>



<a name="203750834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750834">(Jul 13 2020 at 18:20)</a>:</h4>
<p>if cranelift-wasm changes in ways that spidermonkey doesn't even touch that's presumably A-OK heh</p>



<a name="203750846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203750846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203750846">(Jul 13 2020 at 18:20)</a>:</h4>
<p>yup, for sure</p>



<a name="203938731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203938731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203938731">(Jul 15 2020 at 10:41)</a>:</h4>
<p>Right now this is conceptually what's happening:</p>
<ul>
<li>spidermonkey starts with the module validation, that is, everything before the function bodies section,</li>
<li>when Ion or wasm baseline are used for compilation, the function's body is validated as we compile it, by iterating over the wasm bytes (so we validate byte by byte)</li>
<li>when Cranelift is used for compilation, we first validate the whole function's body, and only if it's valid we send it to cranelift (otherwise report an error)</li>
</ul>



<a name="203938792"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203938792" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203938792">(Jul 15 2020 at 10:42)</a>:</h4>
<p>My thought is that ideally, we'd have a way to provide cranelift-wasm with module-level information (type section info, etc.), while cranelift-wasm would do the function validation.</p>



<a name="203938825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203938825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203938825">(Jul 15 2020 at 10:42)</a>:</h4>
<p>(Spidermonkey's Wasm.validate is super fast, but that's still an extra 100ms overhead for very large modules that only Cranelift has)</p>



<a name="203938858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203938858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203938858">(Jul 15 2020 at 10:43)</a>:</h4>
<p>(also Cranelift-in-SM does validate function's bodies in parallel, so the cost is a bit amortized)</p>



<a name="203956969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/203956969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#203956969">(Jul 15 2020 at 13:46)</a>:</h4>
<p>That actually sounds perfect, and sounds like my conclusions reading code yesterday were indeed correct! I'll see if I can work on wasmparser to enable this (wasmparser basically already has support so it should be easy)</p>



<a name="204611518"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204611518" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204611518">(Jul 21 2020 at 22:45)</a>:</h4>
<p>Ok a late follow-up but I've now implemented this at <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">https://github.com/bytecodealliance/wasmtime/pull/2059</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/2059" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/2059" title="Validate modules while translating by alexcrichton · Pull Request #2059 · bytecodealliance/wasmtime">Validate modules while translating by alexcrichton · Pull Request #2059 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit is a change to cranelift-wasm to validate each function body
as it is translated. Additionally top-level module translation functions
will perform module validation. This commit builds ...</div></div></div>



<a name="204611614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204611614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yury Delendik <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204611614">(Jul 21 2020 at 22:46)</a>:</h4>
<p>/me will review first tomorrow</p>



<a name="204611620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204611620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204611620">(Jul 21 2020 at 22:46)</a>:</h4>
<p>that PR now forcibly validates all wasm functions fed to cranelift-wasm, so this will affect Gecko (if that lands as-is). I'd definitely want folks familiar with the spidermonkey integration of Cranelift to take a look!</p>



<a name="204611691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204611691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204611691">(Jul 21 2020 at 22:47)</a>:</h4>
<p>the knobs are now there for validation to be  entirely deferred to cranelift (spidermonkey can provide its own hooks to learn about the module's other types), but that may not be sufficient. If so just let me know!</p>



<a name="204640301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204640301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204640301">(Jul 22 2020 at 08:18)</a>:</h4>
<p>Looks great! I'll be happy to integrate and test it in spidermonkey when the time comes !</p>



<a name="204640482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204640482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204640482">(Jul 22 2020 at 08:21)</a>:</h4>
<p>Thanks for working on this!</p>



<a name="204915926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204915926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204915926">(Jul 24 2020 at 13:38)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> hi! let me know if you want to chat about <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">https://github.com/bytecodealliance/wasmtime/pull/2059</a>, maybe I'm missing a way to properly use a primitive type as the <code>Self::Type</code> in this case!</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/2059" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/2059" title="Validate modules while translating by alexcrichton · Pull Request #2059 · bytecodealliance/wasmtime">Validate modules while translating by alexcrichton · Pull Request #2059 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit is a change to cranelift-wasm to validate each function body
as it is translated. Additionally top-level module translation functions
will perform module validation. This commit builds ...</div></div></div>



<a name="204918865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/204918865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#204918865">(Jul 24 2020 at 14:03)</a>:</h4>
<p>Oh i actually had another question about this: right now, Baldrdash will request module-level information lazily, so it'd make sense that we'd now implement a cache for this information, that we'd fill in incrementally as we compile the function (and share this information with other function compilations, since at this point the module-level info is immutable). Since the traits mention <code>&amp;self</code> and not <code>&amp;mut self</code>, I'd need to use interior mutability (RefCell) to be able to build up the cache information; are there other better ways that would avoid the dynamic RefCell checks on borrows?</p>



<a name="205239436"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205239436" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205239436">(Jul 28 2020 at 14:06)</a>:</h4>
<p><span class="user-mention" data-user-id="254393">@Benjamin Bouvier</span> hey back now, thanks for taking a look! Is <code>Self::Type</code> the only thing you had an issue with?</p>



<a name="205239507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205239507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205239507">(Jul 28 2020 at 14:07)</a>:</h4>
<p>If so I think I might just remove that trait and return <code>wasmparser::Type</code> instead since I'm not sure having an associated type for <code>Type</code> is all that worth it (all you can do is get <code>wasmparser::Type</code> anyway)</p>



<a name="205239588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205239588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205239588">(Jul 28 2020 at 14:07)</a>:</h4>
<p>also self vs mut self, but it's probably more open to discussion (and i can solve it locally with a RefCell iiuc, with an additional dynamic cost unfortunately)</p>



<a name="205239892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205239892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205239892">(Jul 28 2020 at 14:09)</a>:</h4>
<p>oh? what was needing mutability for your implementation?</p>



<a name="205240071"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240071" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240071">(Jul 28 2020 at 14:10)</a>:</h4>
<p>er right sorry I see now</p>



<a name="205240098"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240098" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240098">(Jul 28 2020 at 14:10)</a>:</h4>
<p>this would probably use a <code>OnceCell</code> rather than a <code>RefCell</code></p>



<a name="205240114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240114">(Jul 28 2020 at 14:10)</a>:</h4>
<p>since you'll want to get a long-lived borrow out of it</p>



<a name="205240145"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240145" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240145">(Jul 28 2020 at 14:10)</a>:</h4>
<p>but that should work to lazily initialize these pieces</p>



<a name="205240318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240318">(Jul 28 2020 at 14:12)</a>:</h4>
<p>FWIW supporting both APIs would be somewhat tricky, but possible</p>



<a name="205240342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240342">(Jul 28 2020 at 14:12)</a>:</h4>
<p>I'd prefer though if we could find something that works from the get-go</p>



<a name="205240469"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240469" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240469">(Jul 28 2020 at 14:13)</a>:</h4>
<p>/me looks at OnceCell</p>



<a name="205240576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240576">(Jul 28 2020 at 14:14)</a>:</h4>
<p>oh and to clarify, by that I <a href="https://docs.rs/once_cell/1.4.0/once_cell/unsync/struct.OnceCell.html">mean this type</a></p>



<a name="205240880"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240880" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240880">(Jul 28 2020 at 14:16)</a>:</h4>
<p>Ok! Is the <code>OnceCell::get_mut</code> method cheaper to call than a <code>RefCell::borrow_mut</code> ? (I imagine yes, but not sure)</p>



<a name="205240956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240956">(Jul 28 2020 at 14:17)</a>:</h4>
<p>nah it's basically the same cost AFAIK</p>



<a name="205240964"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205240964" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205240964">(Jul 28 2020 at 14:17)</a>:</h4>
<p>it's a boolean check of a flag basically</p>



<a name="205241473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205241473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205241473">(Jul 28 2020 at 14:21)</a>:</h4>
<p>Ok! Since the cache is filled up as the trait methods are called, i'm not sure it's going to need a long-lived borrow, but yeah, both would work. So it's not a strong requirement for Spidermonkey.</p>



<a name="205241488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205241488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205241488">(Jul 28 2020 at 14:21)</a>:</h4>
<p>Thanks for checking this! having just return <code>wasmparser::Type</code> would indeed be ideal</p>



<a name="205242167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205242167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205242167">(Jul 28 2020 at 14:26)</a>:</h4>
<p>ok, I'll make that change</p>



<a name="205242432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205242432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205242432">(Jul 28 2020 at 14:28)</a>:</h4>
<p>Will this allow returning some kind of references, though?</p>



<a name="205243048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243048">(Jul 28 2020 at 14:33)</a>:</h4>
<p>if you're returning <code>wasmparser::Type</code> it'll just be a <code>Type</code></p>



<a name="205243054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243054">(Jul 28 2020 at 14:33)</a>:</h4>
<p>no need for references</p>



<a name="205243220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243220">(Jul 28 2020 at 14:34)</a>:</h4>
<p>ah right, i was wondering if this would be future proof since the GC type proposal might introduced structured types that won't be primitive types</p>



<a name="205243226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243226">(Jul 28 2020 at 14:35)</a>:</h4>
<p>but that might be irrelevant at this poitn</p>



<a name="205243520"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243520" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243520">(Jul 28 2020 at 14:37)</a>:</h4>
<p>yeah I'm not sure how that will play out myself</p>



<a name="205243524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205243524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205243524">(Jul 28 2020 at 14:37)</a>:</h4>
<p>I figured we can probably wait to see what happens there</p>



<a name="205259355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205259355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205259355">(Jul 28 2020 at 16:35)</a>:</h4>
<p><span class="user-mention" data-user-id="254393">@Benjamin Bouvier</span> <a href="https://github.com/bytecodealliance/wasm-tools/pull/68">https://github.com/bytecodealliance/wasm-tools/pull/68</a> is what I'm thinking for your issues</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/pull/68" style="background-image: url(https://avatars0.githubusercontent.com/u/54038801?s=400&amp;v=4)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/pull/68" title="Simplify the `WasmModuleResources` trait by alexcrichton · Pull Request #68 · bytecodealliance/wasm-tools">Simplify the `WasmModuleResources` trait by alexcrichton · Pull Request #68 · bytecodealliance/wasm-tools</a></div><div class="message_embed_description">Don&#39;t have separate traits for tables/memories/globals when the
wasmparser Copy types by value work for now. This may need to be
extended later but we can presumably cross that bridge when we g...</div></div></div>



<a name="205259779"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205259779" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205259779">(Jul 28 2020 at 16:39)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> thanks! I'm worried about the reverting for TableType and other non-primitive types, though; this will require straight conversions from spidermonkey's types to wasmparser's types everywhere, or creating the converted types and caching them...</p>



<a name="205259824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205259824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205259824">(Jul 28 2020 at 16:39)</a>:</h4>
<p>I think it should be cheap to do though? They're basically just <code>Copy</code> containers of types</p>



<a name="205259853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205259853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205259853">(Jul 28 2020 at 16:39)</a>:</h4>
<p>and wasmparser validation would do the conversion anyway basically regardless</p>



<a name="205259907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205259907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205259907">(Jul 28 2020 at 16:40)</a>:</h4>
<p>(and with monomorphization it should all go away in terms of overhead)</p>



<a name="205260114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/wasm%20validation%20inside%20of%20cranelift%3F/near/205260114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Benjamin Bouvier <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/wasm.20validation.20inside.20of.20cranelift.3F.html#205260114">(Jul 28 2020 at 16:42)</a>:</h4>
<p>Sounds good to me! If it's an issue, profiles will tell us anyways :-)</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>