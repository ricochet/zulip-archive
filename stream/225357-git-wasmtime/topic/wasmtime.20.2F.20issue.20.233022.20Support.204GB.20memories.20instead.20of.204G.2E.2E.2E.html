<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3022 Support 4GB memories instead of 4G... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233022.20Support.204GB.20memories.20instead.20of.204G.2E.2E.2E.html">wasmtime / issue #3022 Support 4GB memories instead of 4G...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="243669517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233022%20Support%204GB%20memories%20instead%20of%204G.../near/243669517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233022.20Support.204GB.20memories.20instead.20of.204G.2E.2E.2E.html#243669517">(Jun 23 2021 at 15:32)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3022">issue #3022</a>:</p>
<blockquote>
<p>Currently Wasmtime stores the current length of a memory as a <code>u32</code> size in bytes, which means it can't represent the current length of memory if memory is exactly 4GB large (which takes 33 bits to represent). This means that Wasmtime only supports 4GB heaps minus one page, but we should ideally fix this issue to fully support a 4GB heap in the future.</p>
<p>Likely the main impact of this will be modifying JIT code to load/store a 64-bit value and/or multiplying the <code>current_length</code> by some factor. We know the length is always a multiple of wasm page size, so we could store the length as a multiple of that as well.</p>
</blockquote>



<a name="247950802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233022%20Support%204GB%20memories%20instead%20of%204G.../near/247950802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233022.20Support.204GB.20memories.20instead.20of.204G.2E.2E.2E.html#247950802">(Aug 02 2021 at 18:09)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3022">issue #3022</a>:</p>
<blockquote>
<p>Currently Wasmtime stores the current length of a memory as a <code>u32</code> size in bytes, which means it can't represent the current length of memory if memory is exactly 4GB large (which takes 33 bits to represent). This means that Wasmtime only supports 4GB heaps minus one page, but we should ideally fix this issue to fully support a 4GB heap in the future.</p>
<p>Likely the main impact of this will be modifying JIT code to load/store a 64-bit value and/or multiplying the <code>current_length</code> by some factor. We know the length is always a multiple of wasm page size, so we could store the length as a multiple of that as well.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>