<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4139 Cranelift AArch64: Migrate Bitsele... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html">wasmtime / issue #4139 Cranelift AArch64: Migrate Bitsele...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="281957556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/281957556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#281957556">(May 11 2022 at 12:30)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1123697008">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:area:machinst", "cranelift:area:x64", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="282005128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282005128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282005128">(May 11 2022 at 18:03)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1124106742">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<p>cc @uweigand, looks like a <code>bitselect</code> failure on s390x with <code>i8</code> types in one of the new runtests.</p>
<p>(To get this in, I would be ok with splitting narrow-type bitops into a separate runtest file and omitting <code>target s390x</code> until fixed)</p>
</blockquote>



<a name="282007873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282007873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282007873">(May 11 2022 at 18:24)</a>:</h4>
<p>akirilov-arm <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1124152415">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<p>Actually before my changes the <code>cranelift/filetests/filetests/runtests/bitops.clif</code> file contains only one test, which IMHO is not particularly interesting (the inputs are fixed and the output does not seem to be checked), so I have been thinking of disabling the whole file for s390x (similarly to what has already been done for x86-64). Any thoughts?</p>
</blockquote>



<a name="282010909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282010909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282010909">(May 11 2022 at 18:47)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1124172220">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<p>That seems fine as a temporary measure. I'll file an issue to track completing support for skipped runtests on each platform in general; it's something we should definitely audit at some point.</p>
</blockquote>



<a name="282120479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282120479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282120479">(May 12 2022 at 15:09)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1125113007">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<blockquote>
<p>cc @uweigand, looks like a <code>bitselect</code> failure on s390x with <code>i8</code> types in one of the new runtests.</p>
</blockquote>
<p>Oops.  These were all supposed to be implemented, but it turns out the implementation of bitwise ops had a series of logic errors.  Fix is here: <a href="https://github.com/bytecodealliance/wasmtime/pull/4146">https://github.com/bytecodealliance/wasmtime/pull/4146</a></p>
<p>Thanks for catching this!<br>
</p>
</blockquote>



<a name="282235851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282235851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282235851">(May 13 2022 at 11:54)</a>:</h4>
<p>akirilov-arm <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1125977639">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<p>OK, I changed the test, so that it runs on all platforms except x86-64, where there is a failure.</p>
</blockquote>



<a name="282522449"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234139%20Cranelift%20AArch64%3A%20Migrate%20Bitsele.../near/282522449" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234139.20Cranelift.20AArch64.3A.20Migrate.20Bitsele.2E.2E.2E.html#282522449">(May 16 2022 at 16:39)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4139#issuecomment-1127894235">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4139">issue #4139</a>:</p>
<blockquote>
<p>cc @abrown for x86-64 test failure: would you mind taking a look, or at least triaging to some degree (miscompile, missing lowering, ...)?</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>