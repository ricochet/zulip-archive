<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8479 cranelift: Only set VReg type once · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html">wasmtime / PR #8479 cranelift: Only set VReg type once</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="435470807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435470807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435470807">(Apr 25 2024 at 21:29)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a> from <code>jameysharp:set-vreg-type-once</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>We know the type of each VReg at the moment when we allocate it, so we never need to set the type again. That also means we don't need to deduplicate reftyped VRegs as we go, although it's still possible to have duplicates after aliases are resolved.</p>
<p>This PR and #8469 remove the only two uses of <code>FxHashSet</code> in <code>vcode.rs</code>, so whichever one lands second needs to also delete the <code>use</code> item for that type or it'll introduce a new unused-import warning.</p>
</blockquote>



<a name="435470808"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435470808" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435470808">(Apr 25 2024 at 21:29)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a>.</p>



<a name="435470810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435470810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435470810">(Apr 25 2024 at 21:29)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a>.</p>



<a name="435506741"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435506741" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435506741">(Apr 26 2024 at 03:06)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a>.</p>



<a name="435506804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435506804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435506804">(Apr 26 2024 at 03:07)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/8479#issuecomment-2078554159">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a>:</p>
<blockquote>
<p>Since #8469 landed I've rebased this PR.</p>
</blockquote>



<a name="435643990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435643990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435643990">(Apr 26 2024 at 19:09)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8479#pullrequestreview-2025702424">PR review</a>:</p>
<blockquote>
<p>Awesome!</p>
</blockquote>



<a name="435656652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238479%20cranelift%3A%20Only%20set%20VReg%20type%20once/near/435656652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238479.20cranelift.3A.20Only.20set.20VReg.20type.20once.html#435656652">(Apr 26 2024 at 20:42)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8479">PR #8479</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>