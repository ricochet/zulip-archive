<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1869 cranelift: add a new resumable_tra... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html">wasmtime / Issue #1869 cranelift: add a new resumable_tra...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="200658523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200658523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200658523">(Jun 12 2020 at 11:24)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643219853">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:meta"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="200664475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200664475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200664475">(Jun 12 2020 at 12:38)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643248580">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<p>Just for context: the reason why I added a new instruction, rather than creating manually the blocks and use the <code>resumable_trap</code> instruction is that when lowering wasm to clif, we can't mutate the CFG in place (we can't create new blocks). Allow mutation of the CFG at this place would be nice in the future, and could allow new things (of the same kind that the IR template proposal would allow), but this is out of scope for what appears to be really a bug fix here.</p>
</blockquote>



<a name="200665009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200665009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200665009">(Jun 12 2020 at 12:44)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643250848">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<p>Fuzz-target failure is caused by <a href="https://github.com/XAMPPRocky/remove_dir_all/issues/19">https://github.com/XAMPPRocky/remove_dir_all/issues/19</a>.</p>
</blockquote>



<a name="200665024"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200665024" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200665024">(Jun 12 2020 at 12:44)</a>:</h4>
<p>bnjbvr edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643250848">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<p>Fuzz-target failure is being discussed in <a href="https://github.com/XAMPPRocky/remove_dir_all/issues/19">https://github.com/XAMPPRocky/remove_dir_all/issues/19</a>.</p>
</blockquote>



<a name="200696280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200696280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200696280">(Jun 12 2020 at 17:00)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643385106">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/master/cranelift/codegen/src/regalloc/safepoint.rs#L54">https://github.com/bytecodealliance/wasmtime/blob/master/cranelift/codegen/src/regalloc/safepoint.rs#L54</a> should probably switch to something like</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="n">pos</span><span class="p">.</span><span class="n">func</span><span class="p">.</span><span class="n">dfg</span><span class="p">[</span><span class="n">inst</span><span class="p">].</span><span class="n">is_resumable_trap</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>


<p>that returns true for both <code>resumable_trap</code> and <code>resumable_trapnz</code>.</p>
</blockquote>



<a name="200698820"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200698820" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200698820">(Jun 12 2020 at 17:23)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643394374">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<p>@fitzgen Thanks! Added something to that effect. (It didn't seem worth to make it a flag visible from the meta crate, but let me know if you think it's better (maybe for consistency? probably the other way around would be better imo))</p>
</blockquote>



<a name="200699486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231869%20cranelift%3A%20add%20a%20new%20resumable_tra.../near/200699486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231869.20cranelift.3A.20add.20a.20new.20resumable_tra.2E.2E.2E.html#200699486">(Jun 12 2020 at 17:28)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/1869#issuecomment-643396383">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1869">Issue #1869</a>:</p>
<blockquote>
<blockquote>
<p>(It didn't seem worth to make it a flag visible from the meta crate, but let me know if you think it's better (maybe for consistency? probably the other way around would be better imo))</p>
</blockquote>
<p>Not 100% sure what you're getting at here, but the changes in this PR look great to me!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>