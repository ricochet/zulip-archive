<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1665 In progress. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html">wasmtime / PR #1665 In progress.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="196599205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196599205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196599205">(May 06 2020 at 07:59)</a>:</h4>
<p>jlb6740 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1665" title="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="196604204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604204">(May 06 2020 at 08:49)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406415696" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406415696">PR Review</a>.</p>



<a name="196604205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604205">(May 06 2020 at 08:49)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636238" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636238">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>/// These indicate ways of extending (widening) a value, using the Intel
/// naming: B(yte) = u8, W(ord) = u16, L(ong)word = u32, Q(uad)word = u64
#[derive(Clone, PartialEq)]
</code></pre></div>


</blockquote>



<a name="196604286"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604286" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604286">(May 06 2020 at 08:50)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406416070" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406416070">PR Review</a>.</p>



<a name="196604287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604287">(May 06 2020 at 08:50)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636517" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636517">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>/// Some basic ALU operations.
#[derive(Clone, PartialEq)]
</code></pre></div>


</blockquote>



<a name="196604345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604345">(May 06 2020 at 08:50)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406416660" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406416660">PR Review</a>.</p>



<a name="196604346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604346">(May 06 2020 at 08:50)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636940" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420636940">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>pub(crate) fn xmm0() -&gt; Reg {
</code></pre></div>


</blockquote>



<a name="196604477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604477">(May 06 2020 at 08:52)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420637742" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420637742">PR Review Comment</a>:</p>
<blockquote>
<p>Probably just forgotten.</p>
</blockquote>



<a name="196604478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604478">(May 06 2020 at 08:52)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406417682" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406417682">PR Review</a>.</p>



<a name="196604674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604674">(May 06 2020 at 08:54)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406419321" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406419321">PR Review</a>.</p>



<a name="196604675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196604675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196604675">(May 06 2020 at 08:54)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420639048" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420639048">PR Review Comment</a>:</p>
<blockquote>
<p>Otherwise <code>self.vcode.vreg_types[vreg.get_index()]</code> would panic on out of bounds indexing.</p>
</blockquote>



<a name="196608695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196608695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196608695">(May 06 2020 at 09:30)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406445721" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406445721">PR Review</a>.</p>



<a name="196608696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196608696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196608696">(May 06 2020 at 09:30)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420659380" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420659380">PR Review Comment</a>:</p>
<blockquote>
<p>We should really rename both this and the existing <code>RM_R_Op</code> to something more sensible.  For <code>RM_R_Op</code> I'm not sure what.  For this, maybe <code>SSE2_BinOp</code> would be good.  Basically all two-operand SSE2 instructions (the R/R and R/M) versions can be represented this way, so it's nice and compact.</p>
</blockquote>



<a name="196610348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610348">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406446194" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406446194">PR Review</a>.</p>



<a name="196610349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610349">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406446194" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406446194">PR Review</a>.</p>



<a name="196610351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610351">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420661357" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420661357">PR Review Comment</a>:</p>
<blockquote>
<p>Errr, this is tricky, for reasons to do with copy coalescing in regalloc.  At least for now, I'd prefer to have an Xmm-to-Xmm move instruction that operates only on the entire register.  We can come back and refine this later.  So you'd drop the <code>Scalar</code> bit here, giving <code>SSE_Mov_R_R</code>.  And correspondingly emit whatever Intel recommends for Xmm-to-Xmm moves .. is it <code>movapd reg, reg</code> perhaps?</p>
</blockquote>



<a name="196610352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610352">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420662081" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420662081">PR Review Comment</a>:</p>
<blockquote>
<p>Per comments above, this would want to be <code>SSE_BinOp_RM_R</code>.</p>
</blockquote>



<a name="196610353"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610353" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610353">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420659714" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420659714">PR Review Comment</a>:</p>
<blockquote>
<p>I guess <code>RM_R_Op</code> should then be changed to <code>INT_RM_R_Op</code>.</p>
</blockquote>



<a name="196610354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610354">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420662695" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420662695">PR Review Comment</a>:</p>
<blockquote>
<p>Hence, <code>sse_mov_r_r</code></p>
</blockquote>



<a name="196610355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610355">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420663159" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420663159">PR Review Comment</a>:</p>
<blockquote>
<p>Not 100% sure I understand the question, but .. let's keep the XMM and integer insns separate.  So I think the answer is then "no".</p>
</blockquote>



<a name="196610356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610356">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420664078" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420664078">PR Review Comment</a>:</p>
<blockquote>
<p>Because they have never actually been used so far.</p>
</blockquote>



<a name="196610358"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610358" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610358">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420666506" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420666506">PR Review Comment</a>:</p>
<blockquote>
<p>Per comments above, I'd prefer that <code>mov_r_r</code> continued to be for int-only moves, but renamed to <code>mov_int_r_r</code>, and we make a new one that's only for xmm regs, called <code>mov_xmm_r_r</code>.  </p>
</blockquote>



<a name="196610359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196610359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196610359">(May 06 2020 at 09:49)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420664623" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420664623">PR Review Comment</a>:</p>
<blockquote>
<p>I'd prefer you called this <code>ty_is_flt64</code> and rename its integer counterpart to <code>ty_is_int64</code>.</p>
</blockquote>



<a name="196611802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196611802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196611802">(May 06 2020 at 10:03)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406468034" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-406468034">PR Review</a>.</p>



<a name="196611803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196611803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196611803">(May 06 2020 at 10:03)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420676577" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r420676577">PR Review Comment</a>:</p>
<blockquote>
<p>This is old-x86-backend-world, btw.</p>
</blockquote>



<a name="196733493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196733493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196733493">(May 07 2020 at 07:07)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407200624" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407200624">PR Review</a>.</p>



<a name="196733494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196733494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196733494">(May 07 2020 at 07:07)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421284433" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421284433">PR Review Comment</a>:</p>
<blockquote>
<p>Yes I see ... initially I wasn't sure why the need for the loop. I don't see a grow() for vectors but perhaps instead of looping we can replace with a resize statement? Something like:</p>
<blockquote>
<p>self.vcode.vreg_types.resize(ir::types::I8, vreg.get_index() - self.vcode.vreg_types.len())</p>
</blockquote>
</blockquote>



<a name="196733624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196733624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196733624">(May 07 2020 at 07:09)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421284433" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421284433">PR Review Comment</a>.</p>



<a name="196735847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196735847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196735847">(May 07 2020 at 07:36)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407218434" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407218434">PR Review</a>.</p>



<a name="196735848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196735848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196735848">(May 07 2020 at 07:36)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421299342" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421299342">PR Review Comment</a>:</p>
<blockquote>
<p>What prompted this comment was here in <a href="http://lower.rs" title="http://lower.rs">lower.rs</a>:</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/48521393ae6b6e014902fac8fe70ac2c1b221880/cranelift/codegen/src/isa/x64/lower.rs#L187" title="https://github.com/bytecodealliance/wasmtime/blob/48521393ae6b6e014902fac8fe70ac2c1b221880/cranelift/codegen/src/isa/x64/lower.rs#L187">https://github.com/bytecodealliance/wasmtime/blob/48521393ae6b6e014902fac8fe70ac2c1b221880/cranelift/codegen/src/isa/x64/lower.rs#L187</a></p>
<p>For a lot of opcodes we can specify from here which Inst::mov variant we want to call but for return for example, multiple types apply and I found I was going to only be calling one version which might not be the correct one. I was going to check types in <a href="http://lower.rs" title="http://lower.rs">lower.rs</a>, but instead I created a mov specific to the return op and put the decision logic there. </p>
</blockquote>



<a name="196743533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196743533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196743533">(May 07 2020 at 09:01)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407280815" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407280815">PR Review</a>.</p>



<a name="196743535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196743535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196743535">(May 07 2020 at 09:01)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421350437" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421350437">PR Review Comment</a>:</p>
<blockquote>
<p><code>vreg.get_index()</code> may be smaller than <code>self.vcode.vreg_types.len()</code>, in which case the substraction will underflow.</p>
</blockquote>



<a name="196746210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196746210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196746210">(May 07 2020 at 09:30)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407303018" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407303018">PR Review</a>.</p>



<a name="196746211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196746211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196746211">(May 07 2020 at 09:30)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421368677" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421368677">PR Review Comment</a>:</p>
<blockquote>
<p>Ah, that is a good point.  Yes.  True.  Nevertheless, the general flavour of the rest of the instruction selector (<a href="http://lower.rs" title="http://lower.rs">lower.rs</a>) is that we keep int and vec instructions separate, and we don't hand that problem to the instruction-representation layer.  So the lowering logic to handle <code>Opcode::FallthroughReturn | Opcode::Return</code> will need to do the type test itself, rather than handing it off to <code>return_mov_r_r</code>.  FWIW I think there are only very few places like this, where we need to check int-vs-vec/float types at the lowering level -- in prologue construction is the only other place I can think of.</p>
</blockquote>



<a name="196795325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196795325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196795325">(May 07 2020 at 16:21)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407634234" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407634234">PR Review</a>.</p>



<a name="196795327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196795327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196795327">(May 07 2020 at 16:21)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361">PR Review Comment</a>:</p>
<blockquote>
<p>I kept the guard. It's just local, but it looks like this:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>    if self.vcode.vreg_types.len() &lt; vreg.get_index() {
        self.vcode.vreg_types.resize(
            vreg.get_index() - self.vcode.vreg_types.len(),
            ir::types::I8,
        )
    }
    self.vcode.vreg_types[vreg.get_index()] = ty;
</code></pre></div>


</blockquote>
<p>as opposed to this with the while loop:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>    while self.vcode.vreg_types.len() &lt;= vreg.get_index() {
        self.vcode.vreg_types.push(ir::types::I8); // Default type.
    }
    self.vcode.vreg_types[vreg.get_index()] = ty;
</code></pre></div>


</blockquote>
<p>I assumed that top "if-branch would be more efficient but not sure what rust is doing under the covers for the resize compared to the push.</p>
</blockquote>



<a name="196799361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196799361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196799361">(May 07 2020 at 16:55)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407660425" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407660425">PR Review</a>.</p>



<a name="196799362"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196799362" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196799362">(May 07 2020 at 16:55)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421652269" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421652269">PR Review Comment</a>:</p>
<blockquote>
<p>In general, a resize may reallocate all the memory you need at once, while several pushes in a row may cause several series of reallocation, so <code>resize</code> is to be preferred. (I don't know if rustc even gets to use some kind of SIMD tricks to fill the memory with the default value.)</p>
</blockquote>



<a name="196803986"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196803986" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196803986">(May 07 2020 at 17:29)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407685892" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407685892">PR Review</a>.</p>



<a name="196803987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196803987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196803987">(May 07 2020 at 17:29)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421672446" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421672446">PR Review Comment</a>:</p>
<blockquote>
<p>@Bnjbvr ... Cool thanks. Good to know.</p>
</blockquote>



<a name="196804055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804055">(May 07 2020 at 17:29)</a>:</h4>
<p>jlb6740 deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421672446" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421672446">PR Review Comment</a>.</p>



<a name="196804160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804160">(May 07 2020 at 17:30)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407686661" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407686661">PR Review</a>.</p>



<a name="196804161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804161">(May 07 2020 at 17:30)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079">PR Review Comment</a>:</p>
<blockquote>
<p>@bnjbvr .. Cool thanks. </p>
</blockquote>



<a name="196804204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804204">(May 07 2020 at 17:30)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079">PR Review Comment</a>.</p>



<a name="196804322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804322">(May 07 2020 at 17:31)</a>:</h4>
<p>jlb6740 deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421673079">PR Review Comment</a>.</p>



<a name="196804649"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804649" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804649">(May 07 2020 at 17:33)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407689380" title="https://github.com/bytecodealliance/wasmtime/pull/1665#pullrequestreview-407689380">PR Review</a>.</p>



<a name="196804650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196804650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196804650">(May 07 2020 at 17:33)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421675239" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421675239">PR Review Comment</a>:</p>
<blockquote>
<p>@bnjbvr Ok thanks. That SIMD question is an interesting one.</p>
</blockquote>



<a name="196809794"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196809794" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196809794">(May 07 2020 at 18:12)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361">PR Review Comment</a>.</p>



<a name="196813019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/196813019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#196813019">(May 07 2020 at 18:37)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361" title="https://github.com/bytecodealliance/wasmtime/pull/1665#discussion_r421631361">PR Review Comment</a>.</p>



<a name="197100972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197100972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197100972">(May 11 2020 at 05:17)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665" title="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197235006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197235006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197235006">(May 12 2020 at 05:20)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197235227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197235227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197235227">(May 12 2020 at 05:26)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197371486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197371486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197371486">(May 13 2020 at 05:57)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197373536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197373536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197373536">(May 13 2020 at 06:38)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197373658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197373658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197373658">(May 13 2020 at 06:40)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197374066"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197374066" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197374066">(May 13 2020 at 06:49)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197376488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197376488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197376488">(May 13 2020 at 07:25)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197605006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231665%20In%20progress./near/197605006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231665.20In.20progress.2E.html#197605006">(May 14 2020 at 19:19)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1665">PR #1665</a> from <code>vcode-add-movss-addss-subss</code> to <code>master</code>:</p>
<blockquote>
<ul>
<li>Need to better separate data structures for sse and regular regs</li>
<li>
<p>Lowering is not right .. made sure all paths towards lowering are<br>
covered but still need to review what is there and correct</p>
</li>
<li>
<p>Need to emit code. Currently have placeholders.</p>
</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>