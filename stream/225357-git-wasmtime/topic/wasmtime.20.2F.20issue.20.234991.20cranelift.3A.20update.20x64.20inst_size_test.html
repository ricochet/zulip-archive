<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4991 cranelift: update x64 inst_size_test · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html">wasmtime / issue #4991 cranelift: update x64 inst_size_test</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="301808302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301808302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301808302">(Oct 01 2022 at 11:46)</a>:</h4>
<p>pepyakin <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264338994">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>Yep, it does.</p>
</blockquote>



<a name="301820340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301820340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301820340">(Oct 01 2022 at 13:20)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264364640">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>Out of curiosity, were you seeing issues with a nightly compiler, or something else (local changes, etc)?</p>
</blockquote>



<a name="301822021"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301822021" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301822021">(Oct 01 2022 at 13:34)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264367492">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>I ran into this issue as well, I think I tried the nightly compiler and it started failing, reverting back to stable works. (This was a few days ago so I'm not totally sure on the details)</p>
</blockquote>



<a name="301826932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301826932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301826932">(Oct 01 2022 at 14:12)</a>:</h4>
<p>pepyakin <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264378126">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>Oh, yeah, I also thought it's nightly misbehaving, but running</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">rustup</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">install</span><span class="w"> </span><span class="n">stable</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">isa</span>::<span class="n">x64</span>::<span class="n">inst</span>::<span class="n">inst_size_test</span><span class="w"></span>
</code></pre></div>
<p>resulted in the same panic! (rustc 1.64.0 (a55dd71d5 2022-09-19))</p>
</blockquote>



<a name="301828322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301828322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301828322">(Oct 01 2022 at 14:23)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264380655">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>That's weird, I tried updating my stable version, and I'm now on:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.64.0</span><span class="w"> </span><span class="p">(</span><span class="n">a55dd71d5</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">19</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>And running <code>cargo +stable test -p cranelift-codegen -- isa::x64::inst::inst_size_test</code> passes the test for me. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
</blockquote>



<a name="301828473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301828473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301828473">(Oct 01 2022 at 14:24)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264380655">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>That's weird, I tried updating my stable version, and I'm now on:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.64.0</span><span class="w"> </span><span class="p">(</span><span class="n">a55dd71d5</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">19</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>And running <code>cargo +stable test -p cranelift-codegen -- isa::x64::inst::inst_size_test</code> passes the test for me. <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
<p>Edit:  <code>cargo +nightly test -p cranelift-codegen -- isa::x64::inst::inst_size_test</code> does fail the test.</p>
</blockquote>



<a name="301852861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/301852861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#301852861">(Oct 01 2022 at 18:18)</a>:</h4>
<p>lqd <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1264444587">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>Could it be from the new enum layout from <a href="https://github.com/rust-lang/rust/pull/94075">https://github.com/rust-lang/rust/pull/94075</a> ?</p>
</blockquote>



<a name="307792437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234991%20cranelift%3A%20update%20x64%20inst_size_test/near/307792437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234991.20cranelift.3A.20update.20x64.20inst_size_test.html#307792437">(Nov 03 2022 at 16:54)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4991#issuecomment-1302399592">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4991">issue #4991</a>:</p>
<blockquote>
<p>We're merging an identical patch now in #5188. I'm glad you all brought this up early so it wasn't a surprise!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>