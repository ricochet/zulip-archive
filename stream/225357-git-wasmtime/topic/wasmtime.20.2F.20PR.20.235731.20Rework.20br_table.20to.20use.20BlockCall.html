<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5731 Rework br_table to use BlockCall · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html">wasmtime / PR #5731 Rework br_table to use BlockCall</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="326267641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326267641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326267641">(Feb 07 2023 at 01:10)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="326267660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326267660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326267660">(Feb 07 2023 at 01:11)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<ul>
<li>[ ] Figure out how to adapt <code>branch_destination</code> and <code>branch_destination_mut</code></li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="326268115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326268115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326268115">(Feb 07 2023 at 01:17)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326341156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326341156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326341156">(Feb 07 2023 at 11:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1286930058">PR review</a>.</p>



<a name="326341157"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326341157" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326341157">(Feb 07 2023 at 11:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1286930058">PR review</a>.</p>



<a name="326341158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326341158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326341158">(Feb 07 2023 at 11:39)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1098544881">PR review comment</a>:</p>
<blockquote>
<p>Is there some limitation in the code generator that requires this change?</p>
</blockquote>



<a name="326428936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326428936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326428936">(Feb 07 2023 at 18:25)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1287723686">PR review</a>.</p>



<a name="326428939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326428939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326428939">(Feb 07 2023 at 18:25)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1099043616">PR review comment</a>:</p>
<blockquote>
<p>Yes, with the introduction of <code>BlockCall</code>, block arguments got floated to the end of instruction builders. I think that's fixable, but in the interest of getting something building I switched it locally. I'll add a TODO to investigate fixing this.</p>
</blockquote>



<a name="326429014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326429014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326429014">(Feb 07 2023 at 18:25)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<ul>
<li>[ ] Figure out how to adapt <code>branch_destination</code> and <code>branch_destination_mut</code></li>
<li>[ ] Determine if it's possible to keep the existing <code>br_table</code> builder argument order</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="326462161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326462161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326462161">(Feb 07 2023 at 21:31)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326507959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326507959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326507959">(Feb 08 2023 at 05:33)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326515710"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326515710" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326515710">(Feb 08 2023 at 06:53)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326563124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326563124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326563124">(Feb 08 2023 at 11:26)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1288962717">PR review</a>.</p>



<a name="326563126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326563126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326563126">(Feb 08 2023 at 11:26)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1288962717">PR review</a>.</p>



<a name="326563127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326563127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326563127">(Feb 08 2023 at 11:26)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1100000566">PR review comment</a>:</p>
<blockquote>
<p>This code may need to be preserved for <code>invoke</code> depending on how it will be implemented. The exception path gets some block arguments from the personality function, so either those would be added to the block arguments listed in <code>BlockCall</code> of the <code>invoke</code> instruction, or the <code>invoke</code> instruction would only list a <code>Block</code> and synthesize the full block argument list internally. What do you think would be cleaner?</p>
</blockquote>



<a name="326631296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326631296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326631296">(Feb 08 2023 at 16:28)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1289556992">PR review</a>.</p>



<a name="326631297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326631297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326631297">(Feb 08 2023 at 16:28)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1100388159">PR review comment</a>:</p>
<blockquote>
<p>I like the idea of  using a <code>BlockCall</code> on the <code>invoke</code> instruction. I think the path for doing that should be pretty well worn after adding <code>brif</code>, but if you run into any problems using <code>BlockCall</code> I'd be happy to help work through them :)</p>
</blockquote>



<a name="326634701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326634701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326634701">(Feb 08 2023 at 16:42)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1289581333">PR review</a>.</p>



<a name="326634704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326634704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326634704">(Feb 08 2023 at 16:42)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1100404736">PR review comment</a>:</p>
<blockquote>
<p>The difference between <code>brif</code> and <code>invoke</code> is that <code>brif</code> passes all block arguments in the instruction to the destination block, but for <code>invoke</code> there would be some extra block arguments not specified in the <code>BlockCall</code>. Do you add those at the start or the end? And is there any code that expects there to be no block arguments added? The following is pseudocode to demonstrate the issue:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">block0</span>:
    <span class="nc">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">42</span>
<span class="w">    </span><span class="n">invoke</span><span class="w"> </span><span class="n">fn0</span><span class="p">(),</span><span class="w"> </span><span class="n">block1</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>

<span class="n">block1</span>:
    <span class="nc">trap</span><span class="w"> </span><span class="n">user0</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">i64</span><span class="p">)</span>:
    <span class="p">;</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">landingpad</span>
<span class="w">    </span><span class="p">;</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">v3</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="n">containing</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">personality</span><span class="w"> </span><span class="n">function</span><span class="p">.</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">extra</span><span class="w"> </span><span class="n">argument</span><span class="o">?</span>
<span class="w">    </span><span class="n">trap</span><span class="w"> </span><span class="n">user0</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="326635207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326635207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326635207">(Feb 08 2023 at 16:44)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1289586079">PR review</a>.</p>



<a name="326635209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326635209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326635209">(Feb 08 2023 at 16:44)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1100407795">PR review comment</a>:</p>
<blockquote>
<p>Ah, interesting! I would add them to the end and still use a <code>BlockCall</code>. It's sort of like a partially applied function that way.</p>
</blockquote>



<a name="326636826"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326636826" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326636826">(Feb 08 2023 at 16:51)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1289598693">PR review</a>.</p>



<a name="326636827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326636827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326636827">(Feb 08 2023 at 16:51)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1100416316">PR review comment</a>:</p>
<blockquote>
<p>Sure, will try that once I get to adding the invoke instruction.</p>
</blockquote>



<a name="326691415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326691415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326691415">(Feb 08 2023 at 21:50)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326696995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326696995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326696995">(Feb 08 2023 at 22:27)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326711654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326711654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326711654">(Feb 09 2023 at 00:31)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326711675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326711675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326711675">(Feb 09 2023 at 00:31)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326716281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326716281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326716281">(Feb 09 2023 at 01:27)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326716689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326716689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326716689">(Feb 09 2023 at 01:34)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<ul>
<li>[x] Figure out how to adapt <code>branch_destination</code> and <code>branch_destination_mut</code></li>
<li>[ ] Determine if it's possible to keep the existing <code>br_table</code> builder argument order</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="326874674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326874674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326874674">(Feb 09 2023 at 17:36)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326878905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326878905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326878905">(Feb 09 2023 at 17:55)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326903466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326903466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326903466">(Feb 09 2023 at 19:49)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326943005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326943005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326943005">(Feb 10 2023 at 00:37)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="326959420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/326959420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#326959420">(Feb 10 2023 at 03:00)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327110847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327110847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327110847">(Feb 10 2023 at 17:45)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327110927"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327110927" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327110927">(Feb 10 2023 at 17:46)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<ul>
<li>[x] Figure out how to adapt <code>branch_destination</code> and <code>branch_destination_mut</code></li>
<li>[x] Determine if it's possible to keep the existing <code>br_table</code> builder argument order</li>
</ul>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="327114453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327114453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327114453">(Feb 10 2023 at 18:03)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327114733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327114733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327114733">(Feb 10 2023 at 18:04)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327114846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327114846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327114846">(Feb 10 2023 at 18:05)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="327621135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327621135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327621135">(Feb 13 2023 at 18:51)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1296255043">PR review</a>.</p>



<a name="327621136"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327621136" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327621136">(Feb 13 2023 at 18:51)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1104892364">PR review comment</a>:</p>
<blockquote>
<p>This change is due to the layout of <code>JumpTableData</code>, which keeps the default <code>BlockCall</code> last. The reason for mirroring the order here is so that in <code>machinst::lower</code> we can traverse the slice of <code>BlockCall</code> values directly when building up targets for branch lowering.</p>
</blockquote>



<a name="327621425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327621425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327621425">(Feb 13 2023 at 18:52)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1104892364">PR review comment</a>.</p>



<a name="327622465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327622465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327622465">(Feb 13 2023 at 18:58)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1296263981">PR review</a>.</p>



<a name="327622467"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327622467" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327622467">(Feb 13 2023 at 18:58)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1104898540">PR review comment</a>:</p>
<blockquote>
<p>This is due to the change in traversal order of the jump table: traversing the default label last means that it is emitted last.</p>
</blockquote>



<a name="327624530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327624530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327624530">(Feb 13 2023 at 19:08)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327637174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327637174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327637174">(Feb 13 2023 at 20:11)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327652856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327652856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327652856">(Feb 13 2023 at 21:52)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327656788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327656788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327656788">(Feb 13 2023 at 22:20)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>:</p>
<blockquote>
<p>Rework <code>br_table</code> to use <code>BlockCall</code>, allowing us to avoid adding new nodes during ssa construction to hold block arguments. Additionally, many places where we previously matched on <code>InstructionData</code> to extract branch destinations can be replaced with a use of <code>branch_destination</code> or <code>branch_destination_mut</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="327676218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327676218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327676218">(Feb 14 2023 at 01:03)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327676560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327676560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327676560">(Feb 14 2023 at 01:07)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327826486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327826486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327826486">(Feb 14 2023 at 17:02)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298028101">PR review</a>.</p>



<a name="327826516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327826516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327826516">(Feb 14 2023 at 17:02)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106107147">PR review comment</a>:</p>
<blockquote>
<p>The changes in this file aren't necessary for this PR, but did show up as necessary when making changes to the old form of <code>br_table</code>.</p>
</blockquote>



<a name="327835517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327835517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327835517">(Feb 14 2023 at 17:42)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298092658">PR review</a>.</p>



<a name="327835519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327835519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327835519">(Feb 14 2023 at 17:42)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106150649">PR review comment</a>:</p>
<blockquote>
<p>This isn't necessary for the <code>br_table</code> changes, but it seemed nice to avoid the slice creation.</p>
</blockquote>



<a name="327835628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327835628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327835628">(Feb 14 2023 at 17:43)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327835663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327835663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327835663">(Feb 14 2023 at 17:43)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> as ready for review.</p>



<a name="327835685"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327835685" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327835685">(Feb 14 2023 at 17:43)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a>.</p>



<a name="327836451"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327836451" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327836451">(Feb 14 2023 at 17:47)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298101718">PR review</a>.</p>



<a name="327836456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327836456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327836456">(Feb 14 2023 at 17:47)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106157384">PR review comment</a>:</p>
<blockquote>
<p>Maybe also add a test using block arguments?</p>
</blockquote>



<a name="327837745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327837745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327837745">(Feb 14 2023 at 17:52)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298114016">PR review</a>.</p>



<a name="327837749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327837749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327837749">(Feb 14 2023 at 17:52)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106163390">PR review comment</a>:</p>
<blockquote>
<p>I've added both runtests and x64 compile tests for uses of <code>br_table</code> with block arguments. My feeling was that those would be sufficient as this PR stops splitting critical edges in ssa construction, was there an additional case you were thinking of here?</p>
</blockquote>



<a name="327838438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327838438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327838438">(Feb 14 2023 at 17:56)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298121844">PR review</a>.</p>



<a name="327838440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327838440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327838440">(Feb 14 2023 at 17:56)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106166888">PR review comment</a>:</p>
<blockquote>
<p>I guess that works too. I was thinking that we have a test of creating jump tables here, so we might as well add the new case of having block arguments here.</p>
</blockquote>



<a name="327838495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327838495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327838495">(Feb 14 2023 at 17:56)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327839360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327839360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327839360">(Feb 14 2023 at 18:00)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298132462">PR review</a>.</p>



<a name="327839361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327839361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327839361">(Feb 14 2023 at 18:00)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106171535">PR review comment</a>:</p>
<blockquote>
<p>I'll add different arguments to the two uses of <code>e1</code>, and assert that they're the same.</p>
</blockquote>



<a name="327839402"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327839402" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327839402">(Feb 14 2023 at 18:00)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106171535">PR review comment</a>.</p>



<a name="327840735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327840735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327840735">(Feb 14 2023 at 18:07)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="327912829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912829">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298563926">PR review</a>.</p>



<a name="327912830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912830">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1298563926">PR review</a>.</p>



<a name="327912831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912831">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106474962">PR review comment</a>:</p>
<blockquote>
<p>After reading this comment, I was left wondering why this whole function can't just be replaced with a loop over <code>branch_destination</code>. I forgot the boolean argument to the closure depends on these details. Could you add that detail to the comment, for the next time I forget how everything works?</p>
<p>Of course, I think all but one caller of this function ignore the boolean argument, and with this PR, all except that one could be replaced with a small loop over <code>branch_destination</code>. Maybe we should look at whether the call in <code>cranelift/codegen/src/machinst/blockorder.rs</code> really needs to know this distinction, and see if we can eliminate this function entirely now...</p>
</blockquote>



<a name="327912832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912832">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106540257">PR review comment</a>:</p>
<blockquote>
<p>This appears to have been the only use of <code>arrayvec</code> in this entire git repository. Let's remove it.</p>
</blockquote>



<a name="327912833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912833">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106541497">PR review comment</a>:</p>
<blockquote>
<p>For slices, <code>iter</code> and <code>into_iter</code> are identical. So I'd use the shorter version here. Bonus points if that gets rustfmt to put this back on one line, though I'm not betting on that.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>                .iter()
</code></pre></div><br>
</p>
</blockquote>



<a name="327912834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912834">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106484305">PR review comment</a>:</p>
<blockquote>
<p>Can <code>rewrite_branch_destination</code> become a small loop over <code>branch_destination_mut</code> now every case uses <code>BlockCall</code>?</p>
</blockquote>



<a name="327912835"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912835" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912835">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106483248">PR review comment</a>:</p>
<blockquote>
<p>I think it's a good assertion to add regardless, so I'm glad you kept this in.</p>
</blockquote>



<a name="327912836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327912836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327912836">(Feb 15 2023 at 02:45)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1106588593">PR review comment</a>:</p>
<blockquote>
<p>This isn't sufficient to generate br_table with block params. We also need to update the match on <code>BlockTerminatorKind::BrTable</code> elsewhere to use <code>generate_target_block</code> instead of selecting from <code>forward_blocks_without_params</code>. Also that should be the last use of the latter as well as a variety of other machinery which can all be removed now. Hooray!</p>
</blockquote>



<a name="327997449"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327997449" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327997449">(Feb 15 2023 at 12:39)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1299415254">PR review</a>.</p>



<a name="327997453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327997453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327997453">(Feb 15 2023 at 12:39)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107072860">PR review comment</a>:</p>
<blockquote>
<p>Alongside what @jameysharp is saying above, we can now select <code>Switch</code> and <code>BrTable</code> more often, since they no longer require a <em>special</em> block without params.</p>
<p>Could you also update this: <a href="https://github.com/bytecodealliance/wasmtime/blob/e10094dcd6d0354628255a6f2e69c1e4c327d6e7/cranelift/fuzzgen/src/function_generator.rs#L1806-L1815">https://github.com/bytecodealliance/wasmtime/blob/e10094dcd6d0354628255a6f2e69c1e4c327d6e7/cranelift/fuzzgen/src/function_generator.rs#L1806-L1815</a>  So that we allow <code>BrTable</code> and <code>Switch</code> alongside <code>Jump</code> and <code>Br</code>?</p>
<p>The only other places where we use <code>forward_blocks_without_params</code>, is when selecting blocks for <code>Switch</code> targets, and those can also now carry params, so I agree, lets remove it!</p>
</blockquote>



<a name="327998576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/327998576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#327998576">(Feb 15 2023 at 12:44)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107072860">PR review comment</a>.</p>



<a name="328071199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328071199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328071199">(Feb 15 2023 at 17:48)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300057596">PR review</a>.</p>



<a name="328071200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328071200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328071200">(Feb 15 2023 at 17:48)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107485166">PR review comment</a>:</p>
<blockquote>
<p>Yep, good call!</p>
</blockquote>



<a name="328071674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328071674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328071674">(Feb 15 2023 at 17:50)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300060755">PR review</a>.</p>



<a name="328071675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328071675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328071675">(Feb 15 2023 at 17:50)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107487903">PR review comment</a>:</p>
<blockquote>
<p>It uses it to record those branch targets as indirect. We might be able to do something gross to recover that information some other way, but I feel like it's fine to duplicate the matching logic here. I'll add the additional comment you mentioned :)</p>
</blockquote>



<a name="328072471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328072471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328072471">(Feb 15 2023 at 17:54)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300066398">PR review</a>.</p>



<a name="328072473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328072473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328072473">(Feb 15 2023 at 17:54)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107492772">PR review comment</a>:</p>
<blockquote>
<p>Unfortunately that didn't bring us back to a single line :(</p>
</blockquote>



<a name="328075932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328075932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328075932">(Feb 15 2023 at 18:09)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="328076001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328076001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328076001">(Feb 15 2023 at 18:09)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300090245">PR review</a>.</p>



<a name="328076002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328076002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328076002">(Feb 15 2023 at 18:09)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107514337">PR review comment</a>:</p>
<blockquote>
<p>I believe I've made the changes you both requested, could you take a quick look and make sure?</p>
</blockquote>



<a name="328077100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328077100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328077100">(Feb 15 2023 at 18:15)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a>.</p>



<a name="328077267"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328077267" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328077267">(Feb 15 2023 at 18:15)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300101148">PR review</a>.</p>



<a name="328077270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328077270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328077270">(Feb 15 2023 at 18:15)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107523162">PR review comment</a>:</p>
<blockquote>
<p>LGTM! <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="328079669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328079669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328079669">(Feb 15 2023 at 18:27)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300114219">PR review</a>.</p>



<a name="328079670"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328079670" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328079670">(Feb 15 2023 at 18:27)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300114219">PR review</a>.</p>



<a name="328079671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328079671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328079671">(Feb 15 2023 at 18:27)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107534846">PR review comment</a>:</p>
<blockquote>
<p>I have a mild preference for the iterator chain approach here, mostly to avoid thinking about allocation capacity. A neat Rust trick is that <code>Result</code> implements <code>FromIterator</code>: if any element of the iterator is <code>Err</code> then that's returned, otherwise all the <code>Ok</code> values are collected into the underlying collection type. So I believe this should work:</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>                        let targets = (0..target_count).map(|_| self.generate_target_block(block)).collect()?;
</code></pre></div><br>
</p>
</blockquote>



<a name="328089652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328089652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328089652">(Feb 15 2023 at 19:19)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300193900">PR review</a>.</p>



<a name="328089653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328089653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328089653">(Feb 15 2023 at 19:19)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107605332">PR review comment</a>:</p>
<blockquote>
<p>Very nice! I started with the iterator chain and went back to a for loop when I couldn't think of an elegant way to handle the <code>Result</code>. I'll give this a try :)</p>
</blockquote>



<a name="328091275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328091275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328091275">(Feb 15 2023 at 19:27)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="328096080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328096080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328096080">(Feb 15 2023 at 19:52)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="328135573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328135573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328135573">(Feb 16 2023 at 00:42)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="328139800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328139800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328139800">(Feb 16 2023 at 01:32)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#pullrequestreview-1300619278">PR review</a>.</p>



<a name="328139801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328139801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328139801">(Feb 16 2023 at 01:32)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5731#discussion_r1107915131">PR review comment</a>:</p>
<blockquote>
<p>This is a bit unfortunate: the table throws off capstone, which causes it to not see the <code>movl $4, %edx</code> and the label for offset 0x39. I have a fix in #5798 that I've confirmed locally outputs the mov and label.</p>
</blockquote>



<a name="328150822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328150822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328150822">(Feb 16 2023 at 04:00)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a> from <code>trevor/br-table-block-args</code> to <code>main</code>.</p>



<a name="328293313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235731%20Rework%20br_table%20to%20use%20BlockCall/near/328293313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235731.20Rework.20br_table.20to.20use.20BlockCall.html#328293313">(Feb 16 2023 at 17:23)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5731">PR #5731</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>