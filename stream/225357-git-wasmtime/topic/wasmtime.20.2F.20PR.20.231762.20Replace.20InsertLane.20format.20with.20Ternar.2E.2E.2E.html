<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1762 Replace InsertLane format with Ternar... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html">wasmtime / PR #1762 Replace InsertLane format with Ternar...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="198822525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/198822525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#198822525">(May 26 2020 at 21:13)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1762">PR #1762</a> from <code>ternary-imm8</code> to <code>master</code>:</p>
<blockquote>
<p>The InsertLane format has an ordering (<code>value().imm().value()</code>) and immediate name (<code>"lane"</code>) that make it awkward to use for other instructions. This changes the ordering (<code>value().value().imm()</code>) and uses the default name (<code>"imm"</code>) throughout the codebase.</p>
</blockquote>



<a name="198822647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/198822647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#198822647">(May 26 2020 at 21:14)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/iximeow">iximeow</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1762">PR #1762</a>.</p>



<a name="198830323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/198830323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#198830323">(May 26 2020 at 22:40)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1762">PR #1762</a> from <code>ternary-imm8</code> to <code>master</code>:</p>
<blockquote>
<p>The InsertLane format has an ordering (<code>value().imm().value()</code>) and immediate name (<code>"lane"</code>) that make it awkward to use for other instructions. This changes the ordering (<code>value().value().imm()</code>) and uses the default name (<code>"imm"</code>) throughout the codebase.</p>
</blockquote>



<a name="199175572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199175572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199175572">(May 29 2020 at 16:09)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1762#pullrequestreview-421092334">PR Review</a>.</p>



<a name="199175573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199175573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199175573">(May 29 2020 at 16:09)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1762#pullrequestreview-421092334">PR Review</a>.</p>



<a name="199175574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199175574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199175574">(May 29 2020 at 16:09)</a>:</h4>
<p>iximeow created <a href="https://github.com/bytecodealliance/wasmtime/pull/1762#discussion_r432588620">PR Review Comment</a>:</p>
<blockquote>
<p>I'm surprised to see we don't use <code>0x6b</code>/<code>0x69</code>-encoded <code>IMUL</code>, where <code>TernaryImm8</code> would be a better-fitting format in fact (it's a three-operand encoding in the form <code>imul rrr, r/m, imm8</code>, or <code>imm32</code> for the 32/64-bit forms). Do you know what other instructions are referenced here? A read through the legalizer seems to suggest this isn't actually true.</p>
</blockquote>



<a name="199216282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199216282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199216282">(May 29 2020 at 21:46)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1762#pullrequestreview-421314404">PR Review</a>.</p>



<a name="199216284"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199216284" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199216284">(May 29 2020 at 21:46)</a>:</h4>
<p>iximeow created <a href="https://github.com/bytecodealliance/wasmtime/pull/1762#discussion_r432753121">PR Review Comment</a>:</p>
<blockquote>
<p>answer: <code>x86_pshufd</code> where the immediate is not a lane selector, it's a mask of how to shuffle (where there is no encoding for a type-invalid mask that we would want to check in this arm)</p>
<p>and this comment will become more true in the future with additional instructions taking mask immediates.</p>
</blockquote>



<a name="199218375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231762%20Replace%20InsertLane%20format%20with%20Ternar.../near/199218375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231762.20Replace.20InsertLane.20format.20with.20Ternar.2E.2E.2E.html#199218375">(May 29 2020 at 22:08)</a>:</h4>
<p>abrown closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/1762">PR #1762</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>