<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5791 Cranelift: Regalloc checker error ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html">wasmtime / issue #5791 Cranelift: Regalloc checker error ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="328079656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328079656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328079656">(Feb 15 2023 at 18:27)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328079657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328079657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328079657">(Feb 15 2023 at 18:27)</a>:</h4>
<p>afonso360 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328079658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328079658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328079658">(Feb 15 2023 at 18:27)</a>:</h4>
<p>afonso360 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328079954"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328079954" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328079954">(Feb 15 2023 at 18:29)</a>:</h4>
<p>afonso360 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328106857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328106857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328106857">(Feb 15 2023 at 20:55)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432019911">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>Minimized testcase after the fix provided by @elliottt in #5794 (Thanks!).</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v120</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v31</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v120</span>
<span class="w">    </span><span class="n">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block5</span>

<span class="n">block5</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block12</span><span class="p">,</span><span class="w"> </span><span class="n">block12</span>

<span class="n">block12</span>:
    <span class="nc">return</span><span class="w"> </span><span class="n">v4</span>
<span class="p">}</span>
</code></pre></div>
<p><code>git bisect</code> points the offending commit at 116e5a665f6d8069c894f966e424ad1aae6558fa</p>
</blockquote>



<a name="328107787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328107787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328107787">(Feb 15 2023 at 21:01)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432026736">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>Taking a look...</p>
</blockquote>



<a name="328119563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328119563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328119563">(Feb 15 2023 at 22:23)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432141539">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>This appears to be a weird checker edge-case. The VCode has an empty-body block at block0 with nothing but a jump to block5; the egraph global-code motion sinks all of the ops in block0 out of the block. The checker runs an abstract interpretation of the VCode with regalloc assignments in a fixpoint workqueue; it processes block0, with a starting state of <code>Top</code> and (because there are no body instructions) an ending state of <code>Top</code> as well. It meets this into the one successor's (block5's) input state, which started at <code>Top</code> and remains <code>Top</code>. This is not a change, so the successor is not pushed onto the workqueue, and the analysis ends there. Then there are missing symbolic contents of all registers in all other blocks, and we falsely flag checker errors. The fix is to ensure we visit every block at least once (or I guess to define a separate lattice element below <code>Top</code> that indicates we've visited the block; I'll play with both).</p>
<p>So tl;dr: no codegen bug, but rather checker stopping prematurely because of empty block.</p>
</blockquote>



<a name="328136023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328136023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328136023">(Feb 16 2023 at 00:47)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432300838">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>Fixed in <a href="https://github.com/bytecodealliance/regalloc2/issues/113">bytecodealliance/regalloc2#113</a>; once that merges I'll make a release and pull it in here.</p>
</blockquote>



<a name="328140516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328140516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328140516">(Feb 16 2023 at 01:42)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328140655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328140655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328140655">(Feb 16 2023 at 01:44)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432346693">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>Err, re-opening; the regalloc2 PR fixes the issue but it's not fixed here until we pull in the new version.</p>
</blockquote>



<a name="328140657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328140657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328140657">(Feb 16 2023 at 01:44)</a>:</h4>
<p>cfallin reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328141981"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328141981" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328141981">(Feb 16 2023 at 02:03)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328142093"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328142093" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328142093">(Feb 16 2023 at 02:04)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5791#issuecomment-1432368044">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p>GitHub really likes to auto-close issues, doesn't it?</p>
</blockquote>



<a name="328142094"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328142094" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328142094">(Feb 16 2023 at 02:04)</a>:</h4>
<p>cfallin reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<a name="328148052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235791%20Cranelift%3A%20Regalloc%20checker%20error%20.../near/328148052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235791.20Cranelift.3A.20Regalloc.20checker.20error.20.2E.2E.2E.html#328148052">(Feb 16 2023 at 03:23)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5791">issue #5791</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>I was fuzzing an unrelated PR and got this test case from fuzzgen, which also reproduces on the current main branch.</p>
<p>Additionally I tried to minimize this via bugpoint, and it also crashed, but I'll file that as a separate issue.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">compile</span>
<span class="n">set</span><span class="w"> </span><span class="n">opt_level</span><span class="o">=</span><span class="n">speed</span>
<span class="n">set</span><span class="w"> </span><span class="n">regalloc_checker</span><span class="o">=</span><span class="kc">true</span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span>

<span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">a</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="nc">system_v</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span>:
    <span class="nc">v58</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="mi">696968</span><span class="n">p</span><span class="o">-</span><span class="mi">22</span>
<span class="w">    </span><span class="n">v59</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">b16968p50</span>
<span class="w">    </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f32const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>
<span class="w">    </span><span class="n">v61</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">81</span>
<span class="w">    </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span>
<span class="w">    </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">12</span>
<span class="w">    </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span>
<span class="w">    </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span>
<span class="w">    </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span>
<span class="w">    </span><span class="n">v68</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconcat</span><span class="w"> </span><span class="n">v67</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v67</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x2a57_5757_5797_9797</span><span class="p">,</span><span class="w"> </span><span class="n">v66</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_8797_9797_9797</span>
<span class="w">    </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mh">0x4141_4141</span>
<span class="w">    </span><span class="n">v70</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v71</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v72</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v74</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v73</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v73</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">jump</span><span class="w"> </span><span class="n">block1</span><span class="p">(</span><span class="n">v64</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">,</span><span class="w"> </span><span class="n">v68</span><span class="p">)</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v64</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">105</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v62</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">000000001</span><span class="n">d800p</span><span class="o">-</span><span class="mi">1022</span><span class="p">,</span><span class="w"> </span><span class="n">v63</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">v65</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x9797_9797_9797_ffff</span><span class="p">,</span><span class="w"> </span><span class="n">v69</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x4141_4141</span><span class="p">,</span><span class="w"> </span><span class="n">v60</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">.</span><span class="mi">0001</span><span class="n">a2p</span><span class="o">-</span><span class="mi">126</span>

<span class="n">block1</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="p">(</span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="p">),</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v11</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="p">)</span>

<span class="n">block2</span><span class="p">(</span><span class="n">v12</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v13</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v15</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v16</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v21</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v23</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v76</span><span class="w"> </span>-&gt; <span class="nc">v18</span>
<span class="w">    </span><span class="n">v75</span><span class="w"> </span>-&gt; <span class="nc">v23</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">block3</span><span class="p">(</span><span class="n">v19</span><span class="p">),</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v19</span><span class="p">,</span><span class="w"> </span><span class="n">v18</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block3</span><span class="p">(</span><span class="n">v24</span>: <span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">block4</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v75</span><span class="p">,</span><span class="w"> </span><span class="n">v17</span><span class="p">,</span><span class="w"> </span><span class="n">v14</span><span class="p">,</span><span class="w"> </span><span class="n">v24</span><span class="p">,</span><span class="w"> </span><span class="n">v76</span><span class="p">,</span><span class="w"> </span><span class="n">v20</span><span class="p">,</span><span class="w"> </span><span class="n">v22</span><span class="p">)</span>

<span class="n">block4</span><span class="p">(</span><span class="n">v25</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v79</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v90</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v80</span><span class="w"> </span>-&gt; <span class="nc">v79</span>
<span class="w">    </span><span class="n">v82</span><span class="w"> </span>-&gt; <span class="nc">v90</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v79</span><span class="p">,</span><span class="w"> </span><span class="n">block5</span><span class="p">(</span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v78</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v25</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">,</span><span class="w"> </span><span class="n">v77</span><span class="p">),</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v25</span><span class="p">)</span>

<span class="n">block5</span><span class="p">(</span><span class="n">v26</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v27</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v28</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v30</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v32</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v33</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span>: <span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v81</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ushr</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="n">v80</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span>
<span class="w">    </span><span class="n">brif</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">block6</span><span class="p">(</span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">),</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v34</span><span class="p">,</span><span class="w"> </span><span class="n">v29</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v81</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v31</span><span class="p">,</span><span class="w"> </span><span class="n">v82</span><span class="p">)</span>

<span class="n">block6</span><span class="p">(</span><span class="n">v35</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v38</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v40</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">brif</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">),</span><span class="w"> </span><span class="n">block7</span><span class="p">(</span><span class="n">v40</span><span class="p">,</span><span class="w"> </span><span class="n">v37</span><span class="p">,</span><span class="w"> </span><span class="n">v36</span><span class="p">,</span><span class="w"> </span><span class="n">v94</span><span class="p">,</span><span class="w"> </span><span class="n">v35</span><span class="p">,</span><span class="w"> </span><span class="n">v99</span><span class="p">,</span><span class="w"> </span><span class="n">v39</span><span class="p">)</span>

<span class="n">block7</span><span class="p">(</span><span class="n">v41</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block8</span><span class="p">(</span><span class="n">v41</span><span class="p">,</span><span class="w"> </span><span class="n">v91</span><span class="p">,</span><span class="w"> </span><span class="n">v93</span><span class="p">,</span><span class="w"> </span><span class="n">v96</span><span class="p">,</span><span class="w"> </span><span class="n">v98</span><span class="p">,</span><span class="w"> </span><span class="n">v101</span><span class="p">,</span><span class="w"> </span><span class="n">v103</span><span class="p">)</span>

<span class="n">block8</span><span class="p">(</span><span class="n">v42</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v83</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block9</span><span class="p">(</span><span class="n">v83</span><span class="p">,</span><span class="w"> </span><span class="n">v92</span><span class="p">,</span><span class="w"> </span><span class="n">v95</span><span class="p">,</span><span class="w"> </span><span class="n">v97</span><span class="p">,</span><span class="w"> </span><span class="n">v100</span><span class="p">,</span><span class="w"> </span><span class="n">v42</span><span class="p">,</span><span class="w"> </span><span class="n">v102</span><span class="p">)</span>

<span class="n">block9</span><span class="p">(</span><span class="n">v43</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v84</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span>: <span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block10</span><span class="p">(</span><span class="n">v84</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v43</span><span class="p">,</span><span class="w"> </span><span class="n">v86</span><span class="p">,</span><span class="w"> </span><span class="n">v85</span><span class="p">,</span><span class="w"> </span><span class="n">v87</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v89</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">,</span><span class="w"> </span><span class="n">v88</span><span class="p">)</span>

<span class="n">block10</span><span class="p">(</span><span class="n">v44</span>: <span class="kt">i16</span><span class="p">,</span><span class="w"> </span><span class="n">v45</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v46</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v47</span>: <span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="n">v48</span>: <span class="kt">i8</span><span class="p">,</span><span class="w"> </span><span class="n">v49</span>: <span class="kt">i64</span><span class="p">,</span><span class="w"> </span><span class="n">v50</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">v51</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v52</span>: <span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">v53</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v54</span>: <span class="kt">i128</span><span class="p">,</span><span class="w"> </span><span class="n">v55</span>: <span class="kt">i128</span><span class="p">)</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block11</span><span class="p">(</span><span class="n">v55</span><span class="p">)</span>

<span class="n">block11</span><span class="p">(</span><span class="n">v56</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">jump</span><span class="w"> </span><span class="n">block12</span><span class="p">(</span><span class="n">v56</span><span class="p">)</span>

<span class="n">block12</span><span class="p">(</span><span class="n">v57</span>: <span class="kt">i128</span><span class="p">)</span><span class="w"> </span><span class="n">cold</span>:
    <span class="nc">v111</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v111</span>
<span class="p">}</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>clif-util test ./the-above.clif</code></li>
</ul>
<h3>Expected Results</h3>
<p>The test to pass</p>
<h3>Actual Results</h3>
<p>Regalloc checker error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">DESKTOP</span><span class="o">-</span><span class="n">VSTS4BC</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.18</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">afonso</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span><span class="err">`</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_codegen</span>::<span class="n">machinst</span>::<span class="n">compile</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">Register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span><span class="w"> </span><span class="n">errors</span>:
<span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="k">for</span><span class="w"> </span><span class="n">vcode</span>:
<span class="nc">VCode</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Entry</span><span class="w"> </span><span class="n">block</span>: <span class="mi">0</span>
<span class="w">  </span><span class="n">v128</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v157</span>
<span class="w">  </span><span class="n">v129</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v156</span>
<span class="w">  </span><span class="n">v130</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v155</span>
<span class="w">  </span><span class="n">v131</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v152</span>
<span class="w">  </span><span class="n">v132</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v151</span>
<span class="w">  </span><span class="n">v133</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v150</span>
<span class="w">  </span><span class="n">v134</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v149</span>
<span class="w">  </span><span class="n">v135</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v133</span>
<span class="w">  </span><span class="n">v136</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v134</span>
<span class="w">  </span><span class="n">v137</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v148</span>
<span class="w">  </span><span class="n">v142</span><span class="w"> </span>:<span class="o">=</span><span class="w"> </span><span class="n">v143</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">0</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block0</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">0</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">0</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label1</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">1</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block1</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">1</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v157l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">2</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v128b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v128b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">3</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label2</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label7</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">2</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block2</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">4</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">7</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">4</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v156l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">5</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v129b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v129b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">6</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label3</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label6</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">3</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block3</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">7</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">7</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v155l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">8</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v130b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v130b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">9</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label4</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label5</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">4</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">10</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">10</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">5</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">11</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">11</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">6</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">12</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">12</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">7</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">13</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">13</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label8</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">8</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block4</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">19</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">14</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">14</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v152l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">15</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v131b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v131b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">16</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label9</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label19</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">9</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block5</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">15</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">17</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">24</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">17</span>: <span class="nc">movl</span><span class="w">    </span><span class="cp">$</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v151l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">18</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="mi">3051003305210124183</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v150</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">19</span>: <span class="nc">movabsq</span><span class="w"> </span><span class="cp">$</span><span class="o">-</span><span class="mi">7523395567346018409</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v149</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">20</span>: <span class="nc">andq</span><span class="w">    </span><span class="o">%</span><span class="n">v135</span><span class="p">,</span><span class="w"> </span><span class="cp">$</span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v147</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">21</span>: <span class="nc">shrb</span><span class="w">    </span><span class="o">%</span><span class="n">v147b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v132b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v148b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">22</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">23</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label10</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label15</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">10</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block6</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">24</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">26</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">24</span>: <span class="nc">testb</span><span class="w">   </span><span class="o">%</span><span class="n">v137b</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v137b</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">25</span>: <span class="nc">jnz</span><span class="w">     </span><span class="n">label11</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="n">label12</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">11</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">26</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">27</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">26</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">12</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">13</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">27</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">28</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">27</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label13</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">13</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block7</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">14</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">28</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">29</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">28</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label14</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">14</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block8</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">29</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">29</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">15</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">16</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">30</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">30</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label16</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">16</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block9</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">17</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">31</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">32</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">31</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label17</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">17</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block10</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">18</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">32</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">33</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">32</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label18</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">18</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block11</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">33</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">34</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">33</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">19</span>:
    <span class="p">(</span><span class="n">successor</span>: <span class="nc">Block</span><span class="w"> </span><span class="mi">20</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">34</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">35</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">34</span>: <span class="nc">jmp</span><span class="w">     </span><span class="n">label20</span>
<span class="n">Block</span><span class="w"> </span><span class="mi">20</span>:
    <span class="p">(</span><span class="n">original</span><span class="w"> </span><span class="n">IR</span><span class="w"> </span><span class="n">block</span>: <span class="nc">block12</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">instruction</span><span class="w"> </span><span class="n">range</span>: <span class="mi">35</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="mi">37</span><span class="p">)</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">35</span>: <span class="nc">xorl</span><span class="w">    </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span><span class="p">,</span><span class="w"> </span><span class="o">%</span><span class="n">v143l</span>
<span class="w">  </span><span class="n">Inst</span><span class="w"> </span><span class="mi">36</span>: <span class="nc">ret</span><span class="w"> </span><span class="o">%</span><span class="n">v142</span><span class="o">=%</span><span class="n">rax</span>
<span class="p">}</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">0</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">14</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="w"> </span><span class="n">ERROR</span><span class="w"> </span><span class="n">cranelift_filetests</span>::<span class="n">concurrent</span><span class="w">      </span><span class="o">&gt;</span><span class="w"> </span><span class="n">FAIL</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="n">FAIL</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">lmao</span><span class="p">.</span><span class="n">clif</span>: <span class="nc">panicked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">worker</span><span class="w"> </span>#<span class="mi">0</span>: <span class="nc">register</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">checker</span>: <span class="nc">CheckerErrors</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">errors</span>: <span class="p">[</span><span class="n">UnknownValueInAllocation</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">inst</span>: <span class="nc">Inst</span><span class="p">(</span><span class="mi">24</span><span class="p">),</span><span class="w"> </span><span class="n">op</span>: <span class="nc">Use</span>: <span class="nc">v148i</span><span class="w"> </span><span class="n">reg</span><span class="p">,</span><span class="w"> </span><span class="n">alloc</span>: <span class="nc">p10i</span><span class="w"> </span><span class="p">}]</span><span class="w"> </span><span class="p">}</span>
<span class="mi">1</span><span class="w"> </span><span class="n">tests</span>
<span class="n">Error</span>: <span class="mi">1</span><span class="w"> </span><span class="n">failure</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: e10094dcd6d0354628255a6f2e69c1e4c327d6e7 (current main)<br>
Operating system: Linux<br>
Architecture: x86_64</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>