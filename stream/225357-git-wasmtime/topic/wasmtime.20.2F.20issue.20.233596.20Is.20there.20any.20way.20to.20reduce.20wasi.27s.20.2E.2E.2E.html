<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3596 Is there any way to reduce wasi&#x27;s ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html">wasmtime / issue #3596 Is there any way to reduce wasi&#x27;s ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="264616406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233596%20Is%20there%20any%20way%20to%20reduce%20wasi%27s%20.../near/264616406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html#264616406">(Dec 12 2021 at 10:52)</a>:</h4>
<p>fengqi2019 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3596">issue #3596</a>:</p>
<blockquote>
<p>hello, i just learn wasi. i compile the helloworld's code  to wasi in release, and the wasi's size is 1.78M(i think it is too big.), is there any way to reduce wasi's size? <br>
the helloworld code: </p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="264617388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233596%20Is%20there%20any%20way%20to%20reduce%20wasi%27s%20.../near/264617388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html#264617388">(Dec 12 2021 at 11:13)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/3596#issuecomment-991878308">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3596">issue #3596</a>:</p>
<blockquote>
<p>Did you enable LTO? That helps a lot with removing dead code.</p>
</blockquote>



<a name="264617834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233596%20Is%20there%20any%20way%20to%20reduce%20wasi%27s%20.../near/264617834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html#264617834">(Dec 12 2021 at 11:23)</a>:</h4>
<p>fengqi2019 <a href="https://github.com/bytecodealliance/wasmtime/issues/3596#issuecomment-991879719">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3596">issue #3596</a>:</p>
<blockquote>
<p>it is useful, now it's size is 250k. thanks a lot!</p>
</blockquote>



<a name="264617835"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233596%20Is%20there%20any%20way%20to%20reduce%20wasi%27s%20.../near/264617835" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html#264617835">(Dec 12 2021 at 11:23)</a>:</h4>
<p>fengqi2019 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3596">issue #3596</a>:</p>
<blockquote>
<p>hello, i just learn wasi. i compile the helloworld's code  to wasi in release, and the wasi's size is 1.78M(i think it is too big.), is there any way to reduce wasi's size? <br>
the helloworld code: </p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="264625713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233596%20Is%20there%20any%20way%20to%20reduce%20wasi%27s%20.../near/264625713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233596.20Is.20there.20any.20way.20to.20reduce.20wasi.27s.20.2E.2E.2E.html#264625713">(Dec 12 2021 at 14:18)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/3596#issuecomment-991906452">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3596">issue #3596</a>:</p>
<blockquote>
<p>Most of that is probably still debug symbols, and running <a href="https://webassembly.github.io/wabt/doc/wasm-strip.1.html">wasm-strip</a> on the result will further reduce the size substantially. Running it through <a href="https://github.com/WebAssembly/binaryen#tools">wasm-opt</a> with <code>-O3</code> or <code>-Os</code> makes it even smaller.</p>
<p>The smallest I can get this is 61kb, with these commands:</p>
<p><div class="codehilite" data-code-language="Bash"><pre><span></span><code>rustc --target wasm32-wasi main.rs -o main.wasm
wasm-opt -Os --strip -o main.wasm main.wasm
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>