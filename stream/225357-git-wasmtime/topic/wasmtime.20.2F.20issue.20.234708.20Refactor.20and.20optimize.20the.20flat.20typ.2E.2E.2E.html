<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4708 Refactor and optimize the flat typ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234708.20Refactor.20and.20optimize.20the.20flat.20typ.2E.2E.2E.html">wasmtime / issue #4708 Refactor and optimize the flat typ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="293591561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234708%20Refactor%20and%20optimize%20the%20flat%20typ.../near/293591561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234708.20Refactor.20and.20optimize.20the.20flat.20typ.2E.2E.2E.html#293591561">(Aug 15 2022 at 17:46)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4708#issuecomment-1215488852">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">issue #4708</a>:</p>
<blockquote>
<p>Why are sizes limited to <code>u8</code> in "Remove duplicate flat count calculation in wasmtime"? I can understand it for <code>flat_count</code> since the canonical ABI defines <code>MAX_FLAT_PARAMS = 16</code>, although I think that's worth a comment somewhere. I'm less sold on it for <code>FlagsSize</code>: although 8,160 flags "ought to be good enough for anybody", is there a reason to limit it to that?</p>
</blockquote>



<a name="293593077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234708%20Refactor%20and%20optimize%20the%20flat%20typ.../near/293593077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234708.20Refactor.20and.20optimize.20the.20flat.20typ.2E.2E.2E.html#293593077">(Aug 15 2022 at 17:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4708#issuecomment-1215510367">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">issue #4708</a>:</p>
<blockquote>
<p>I wanted to reuse the flat count for the number of u32s of a flag representation, which led to that choice. The flat count has no need to be bigger than u8, but flags may be bigger than u8 if, as you mention, there's 80k+ flags. Given that <a href="https://github.com/bytecodealliance/wasm-tools/blob/ad7c96d42f821e4db75eb0631aef4dbccc10956a/crates/wasmparser/src/limits.rs#L46">wasmparser already has a hardcoded limit of 1000 flags</a> I didn't see much need to try and improve the situation.</p>
</blockquote>



<a name="293638637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234708%20Refactor%20and%20optimize%20the%20flat%20typ.../near/293638637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234708.20Refactor.20and.20optimize.20the.20flat.20typ.2E.2E.2E.html#293638637">(Aug 15 2022 at 23:49)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4708#issuecomment-1215992611">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">issue #4708</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>