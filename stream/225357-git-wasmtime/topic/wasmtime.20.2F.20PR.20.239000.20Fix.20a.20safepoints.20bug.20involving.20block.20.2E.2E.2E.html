<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9000 Fix a safepoints bug involving block ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html">wasmtime / PR #9000 Fix a safepoints bug involving block ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="453499307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453499307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453499307">(Jul 23 2024 at 19:12)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9000">PR #9000</a>.</p>



<a name="453499309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453499309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453499309">(Jul 23 2024 at 19:12)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9000">PR #9000</a>.</p>



<a name="453499310"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453499310" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453499310">(Jul 23 2024 at 19:12)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9000">PR #9000</a> from <code>fitzgen:fix-safepoints-bug-with-cursors-and-block-params</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>We weren't setting the cursor position correctly after inserting spills for block parameters that need inclusion in stack maps, which caused us to accidentally skip over the first instruction in the block sometimes.</p>
<p>Also move some tests around and add logging for the rewriting phase of user stack maps (see each separate commit).</p>
</blockquote>



<a name="453499343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453499343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453499343">(Jul 23 2024 at 19:12)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/9000#issuecomment-2246087961">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9000">PR #9000</a>:</p>
<blockquote>
<p>heyyy #9000!!</p>
</blockquote>



<a name="453502216"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453502216" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453502216">(Jul 23 2024 at 19:23)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9000#pullrequestreview-2194881486">PR review</a>:</p>
<blockquote>
<p>Makes sense to me!</p>
</blockquote>



<a name="453507208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239000%20Fix%20a%20safepoints%20bug%20involving%20block%20.../near/453507208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239000.20Fix.20a.20safepoints.20bug.20involving.20block.20.2E.2E.2E.html#453507208">(Jul 23 2024 at 19:41)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9000">PR #9000</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>