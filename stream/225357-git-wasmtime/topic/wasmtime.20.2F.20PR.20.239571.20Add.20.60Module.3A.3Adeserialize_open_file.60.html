<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9571 Add `Module::deserialize_open_file` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html">wasmtime / PR #9571 Add `Module::deserialize_open_file`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="480937230"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480937230" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480937230">(Nov 06 2024 at 14:52)</a>:</h4>
<p>adambratschikaye edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="480938446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480938446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480938446">(Nov 06 2024 at 14:58)</a>:</h4>
<p>adambratschikaye submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2418520006">PR review</a>.</p>



<a name="480938449"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480938449" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480938449">(Nov 06 2024 at 14:58)</a>:</h4>
<p>adambratschikaye created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1831166927">PR review comment</a>:</p>
<blockquote>
<p>Creating this function seems a bit messy and I'm wondering if a cross-platform <code>open</code> is fine for Windows anyway. We do say that <code>deserialize_file</code> is unsafe if the file is modified while in use.</p>
</blockquote>



<a name="480939368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480939368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480939368">(Nov 06 2024 at 15:02)</a>:</h4>
<p><strong>adambratschikaye</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a> as ready for review.</p>



<a name="480939372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480939372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480939372">(Nov 06 2024 at 15:02)</a>:</h4>
<p><strong>adambratschikaye</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="480939374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480939374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480939374">(Nov 06 2024 at 15:02)</a>:</h4>
<p><strong>adambratschikaye</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="480939443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480939443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480939443">(Nov 06 2024 at 15:02)</a>:</h4>
<p><strong>adambratschikaye</strong> requested <a href="https://github.com/bjorn3">bjorn3</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="480965154"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480965154" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480965154">(Nov 06 2024 at 17:10)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2418951432">PR review</a>:</p>
<blockquote>
<p>LGTM, but I am not sure I understand what you are getting at with regards to windows, so we should resolve that before merging. Thanks!</p>
</blockquote>



<a name="480965155"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/480965155" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#480965155">(Nov 06 2024 at 17:10)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1831421093">PR review comment</a>:</p>
<blockquote>
<p>It isn't clear to me exactly what you are suggesting/asking. However, it seems like you've already written the code to use modes that disallow concurrent modifications while we have the file open, so I don't think it makes sense to remove that, even though we do say that it is <code>unsafe</code> to modify the file while it is in use.</p>
</blockquote>



<a name="481059912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481059912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481059912">(Nov 07 2024 at 07:34)</a>:</h4>
<p>adambratschikaye submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2420151204">PR review</a>.</p>



<a name="481059921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481059921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481059921">(Nov 07 2024 at 07:34)</a>:</h4>
<p>adambratschikaye created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1832184942">PR review comment</a>:</p>
<blockquote>
<p>Yeah I was suggesting we remove this additional code since we say it's <code>unsafe</code> to modify the file. But I'm good leaving it in.</p>
</blockquote>



<a name="481156381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481156381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481156381">(Nov 07 2024 at 16:26)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2421506652">PR review</a>.</p>



<a name="481156383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481156383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481156383">(Nov 07 2024 at 16:26)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1832984430">PR review comment</a>:</p>
<blockquote>
<p>IIRC this is required on Windows not necessarily for safety but just to get anything working. I have a vague recollection that "just" doing <code>File::open</code> causes some mmap operation down the line to return an error or similar. I could be misremembering though (and CI should turn up any issues if there are some)</p>
</blockquote>



<a name="481182894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481182894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481182894">(Nov 07 2024 at 19:05)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2421894618">PR review</a>.</p>



<a name="481182897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481182897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481182897">(Nov 07 2024 at 19:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1833212927">PR review comment</a>:</p>
<blockquote>
<p>Gotcha. In general, when we can easily and without imposing overhead protect against bad things happening when an <code>unsafe</code> contract is violated, we should do it. So let's leave these bits in, even if it turns out they aren't strictly necessary for correctness.</p>
</blockquote>



<a name="481200422"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481200422" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481200422">(Nov 07 2024 at 21:07)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#issuecomment-2463217818">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>:</p>
<blockquote>
<p>Not necessarily obvious to find but the failure is <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/11729597501/job/32675639869#step:5:297">a Windows-specific one</a></p>
</blockquote>



<a name="481668044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481668044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481668044">(Nov 11 2024 at 09:09)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481669406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481669406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481669406">(Nov 11 2024 at 09:16)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481671735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481671735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481671735">(Nov 11 2024 at 09:28)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481676699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481676699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481676699">(Nov 11 2024 at 09:52)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481678885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481678885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481678885">(Nov 11 2024 at 10:03)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481683668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481683668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481683668">(Nov 11 2024 at 10:26)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481684910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481684910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481684910">(Nov 11 2024 at 10:32)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2426837973">PR review</a>.</p>



<a name="481684913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481684913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481684913">(Nov 11 2024 at 10:32)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1836401164">PR review comment</a>:</p>
<blockquote>
<p>*already</p>
</blockquote>



<a name="481685782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481685782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481685782">(Nov 11 2024 at 10:37)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481685881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481685881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481685881">(Nov 11 2024 at 10:37)</a>:</h4>
<p>adambratschikaye updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481685983"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481685983" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481685983">(Nov 11 2024 at 10:38)</a>:</h4>
<p>adambratschikaye submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2426871877">PR review</a>.</p>



<a name="481685988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481685988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481685988">(Nov 11 2024 at 10:38)</a>:</h4>
<p>adambratschikaye created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1836422645">PR review comment</a>:</p>
<blockquote>
<p>fixed</p>
</blockquote>



<a name="481689235"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481689235" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481689235">(Nov 11 2024 at 10:54)</a>:</h4>
<p>adambratschikaye <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#issuecomment-2467877271">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>:</p>
<blockquote>
<p>Yeah @alexcrichton is right - it looks like a simple <code>File::open</code> doesn't work for windows because the open options need to be compatible with the options used when creating the mapping. I also had to fix up the new test for this and I added a comment on <code>deserialize_open_file</code> on how the file should be opened for windows.</p>
<p>Also ran the full CI on the branch now, so the previous windows failure should be good.</p>
</blockquote>



<a name="481689335"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481689335" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481689335">(Nov 11 2024 at 10:54)</a>:</h4>
<p><strong>adambratschikaye</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<a name="481809194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481809194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481809194">(Nov 11 2024 at 21:07)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2428178508">PR review</a>:</p>
<blockquote>
<p>I think there is a writable vs readable swaparoo in the docs. AFAICT, it is readable and executable, not writable and executable, and if that is true then this is good to merge with that doc comment fixed.</p>
<p>If my understanding is off, and we are actually mapping as writable and executable, then I think we want to revisit what we're doing here, since that is a pretty scary widget to expose!</p>
</blockquote>



<a name="481809195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481809195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481809195">(Nov 11 2024 at 21:07)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1837198120">PR review comment</a>:</p>
<blockquote>
<p>Does it need to be <em>writable</em>? Seems like it should be (and maybe actually is?) <em>readable</em> and executable?</p>
</blockquote>



<a name="481900733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481900733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481900733">(Nov 12 2024 at 09:27)</a>:</h4>
<p>adambratschikaye submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#pullrequestreview-2429038198">PR review</a>.</p>



<a name="481900734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/481900734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#481900734">(Nov 12 2024 at 09:27)</a>:</h4>
<p>adambratschikaye created <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#discussion_r1837759426">PR review comment</a>:</p>
<blockquote>
<p>In windows we create the mapping with protection <code>PAGE_EXECUTE_WRITECOPY</code> which only requires the file handle was created with <code>FILE_GENERIC_READ</code> and <code>FILE_GENERIC_EXECUTE</code> access (docs <a href="https://learn.microsoft.com/en-us/windows/win32/api/memoryapi/nf-memoryapi-createfilemappingw">here</a>). It looks like write access would only be required if writes were being persisted to the file, but since we use copy-on-write it's not needed. Maybe I should add a link to these windows docs in comment for further clarity?</p>
</blockquote>



<a name="483122948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/483122948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#483122948">(Nov 18 2024 at 21:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9571#issuecomment-2484125554">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>:</p>
<blockquote>
<p>Ah I think Nick is on vacation right now so I'll take this over and flag for merge. I think the last doc bit is fine for now and we can always update it as necessary later on.</p>
</blockquote>



<a name="483126230"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239571%20Add%20%60Module%3A%3Adeserialize_open_file%60/near/483126230" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239571.20Add.20.60Module.3A.3Adeserialize_open_file.60.html#483126230">(Nov 18 2024 at 21:24)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9571">PR #9571</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>