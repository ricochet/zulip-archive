<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1707 Investigate ways to de-duplicate e... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231707.20Investigate.20ways.20to.20de-duplicate.20e.2E.2E.2E.html">wasmtime / Issue #1707 Investigate ways to de-duplicate e...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197591769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231707%20Investigate%20ways%20to%20de-duplicate%20e.../near/197591769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231707.20Investigate.20ways.20to.20de-duplicate.20e.2E.2E.2E.html#197591769">(May 14 2020 at 17:44)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1707">Issue #1707</a>:</p>
<blockquote>
<p>Right now, if there are two subtrees of LHS match ops that are the same, except they check different paths (e.g. checking if a first operand is the result of an <code>iadd</code> and checking if a second operand is the result of an <code>iadd</code>) we create different states because each state is associated with a <code>MatchOp</code> and a <code>MatchOp</code> embeds the path of the thing it is operating on within itself.</p>
<p>We should investigate ways to de-duplicate these states and match operations.</p>
<p>One idea is to implicitly maintain a stack of what the current instruction we're operating against is, and expand our generated automata to be pushdown automata. It is unclear to me how to expand our existing algorithm for transducer automata construction to add pushdown support. I don't know whether there is anything in the literature describing how to do this or not.</p>
<p>Another idea is to add <code>MatchOp</code> opcodes that don't actually do any matching, but just do traversal-through-the-data-flow-graph operations. Things like push and pop operations, or register-assignment operations. The downside here is that we have more operations to process, and it isn't clear that the size of the automata will actually get smaller, even if we can de-duplicate more than we did before, because there would be so many more extra operations.</p>
</blockquote>



<a name="197591771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231707%20Investigate%20ways%20to%20de-duplicate%20e.../near/197591771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231707.20Investigate.20ways.20to.20de-duplicate.20e.2E.2E.2E.html#197591771">(May 14 2020 at 17:44)</a>:</h4>
<p>fitzgen labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1707">Issue #1707</a>:</p>
<blockquote>
<p>Right now, if there are two subtrees of LHS match ops that are the same, except they check different paths (e.g. checking if a first operand is the result of an <code>iadd</code> and checking if a second operand is the result of an <code>iadd</code>) we create different states because each state is associated with a <code>MatchOp</code> and a <code>MatchOp</code> embeds the path of the thing it is operating on within itself.</p>
<p>We should investigate ways to de-duplicate these states and match operations.</p>
<p>One idea is to implicitly maintain a stack of what the current instruction we're operating against is, and expand our generated automata to be pushdown automata. It is unclear to me how to expand our existing algorithm for transducer automata construction to add pushdown support. I don't know whether there is anything in the literature describing how to do this or not.</p>
<p>Another idea is to add <code>MatchOp</code> opcodes that don't actually do any matching, but just do traversal-through-the-data-flow-graph operations. Things like push and pop operations, or register-assignment operations. The downside here is that we have more operations to process, and it isn't clear that the size of the automata will actually get smaller, even if we can de-duplicate more than we did before, because there would be so many more extra operations.</p>
</blockquote>



<a name="197591811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231707%20Investigate%20ways%20to%20de-duplicate%20e.../near/197591811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231707.20Investigate.20ways.20to.20de-duplicate.20e.2E.2E.2E.html#197591811">(May 14 2020 at 17:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/1707#issuecomment-628787904">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1707">Issue #1707</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift:area:peepmatic"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: cranelift:area:peepmatic</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>