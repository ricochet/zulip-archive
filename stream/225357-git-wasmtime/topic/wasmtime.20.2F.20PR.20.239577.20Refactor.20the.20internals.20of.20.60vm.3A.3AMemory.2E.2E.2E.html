<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9577 Refactor the internals of `vm::Memory... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html">wasmtime / PR #9577 Refactor the internals of `vm::Memory...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="481008491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481008491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481008491">(Nov 06 2024 at 22:05)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481008492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481008492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481008492">(Nov 06 2024 at 22:05)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a> from <code>alexcrichton:simplify-memory</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This is a series of commits which have the end-goal of removing the <code>RuntimeLinearMemory</code> trait and replacing it with <code>wasmtime::LinearMemory</code>. In doing this though I wanted to simplify the trait to move more responsibilities up a layer so it's clearer what the safety contracts are and what exactly is required on behalf of embedders. This moves many of the responsibilities to a new <code>LocalMemory</code> type rather than having most of the functionality implemented through trait methods. This provides, for example, a vector of having CoW support in Wasmtime without supporting it through <code>LinearMemory</code> (or not officially at least).</p>
<p>Each commit here is probably best viewed one-at-a-time since this adds up to a number of changes but I've tried to keep things separated and have tests passing for each individual commit.</p>
<p>Fixes #9568</p>
</blockquote>



<a name="481008493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481008493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481008493">(Nov 06 2024 at 22:05)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481010687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481010687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481010687">(Nov 06 2024 at 22:22)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481012401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481012401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481012401">(Nov 06 2024 at 22:38)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers">wasmtime-fuzz-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481012402"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481012402" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481012402">(Nov 06 2024 at 22:38)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481013343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481013343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481013343">(Nov 06 2024 at 22:47)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481031687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481031687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481031687">(Nov 07 2024 at 02:08)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9577#issuecomment-2461169665">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:api", "wasmtime:c-api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="481147161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481147161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481147161">(Nov 07 2024 at 15:38)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481175411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481175411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481175411">(Nov 07 2024 at 18:15)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9577#pullrequestreview-2421799801">PR review</a>:</p>
<blockquote>
<p>Nice! One suggestion on the ascii diagram below, that's it.</p>
</blockquote>



<a name="481175413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481175413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481175413">(Nov 07 2024 at 18:15)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9577#discussion_r1833154718">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>//! │ RuntimeLinearMemory ├─────────────┬───────────────┐
//! │                     │             │               │
//! └──────────┬──────────┘             │               │
</code></pre></div><br>
</p>
</blockquote>



<a name="481177290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481177290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481177290">(Nov 07 2024 at 18:28)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481177321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481177321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481177321">(Nov 07 2024 at 18:28)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<a name="481184946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239577%20Refactor%20the%20internals%20of%20%60vm%3A%3AMemory.../near/481184946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239577.20Refactor.20the.20internals.20of.20.60vm.3A.3AMemory.2E.2E.2E.html#481184946">(Nov 07 2024 at 19:18)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9577">PR #9577</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>