<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4936 wasmtime 1.0.0&#x27;s wasi-cap-std-sync... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html">wasmtime / issue #4936 wasmtime 1.0.0&#x27;s wasi-cap-std-sync...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="299857238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/299857238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#299857238">(Sep 20 2022 at 22:26)</a>:</h4>
<p>philpax opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li>Update to a Rust nightly after the 27th of July</li>
<li>Attempt to build <code>wasmtime-wasi</code></li>
</ul>
<h3>Expected Results</h3>
<p>The build completes successfully.</p>
<h3>Actual Results</h3>
<p>The build fails as the version of <code>cap-std</code> in use uses sealed traits in the Rust stdlib:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">me</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="w"></span>
<span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"></span>
<span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 1.0.0</p>
<p>Operating system: Windows 10</p>
<p>Architecture: x86-64</p>
<h3>Extra Info</h3>
<p>This is caused by <a href="https://github.com/bytecodealliance/cap-std/issues/270">https://github.com/bytecodealliance/cap-std/issues/270</a>, which has been fixed up by upstream <code>cap-std</code>. A <a href="https://github.com/bytecodealliance/cap-std/issues/272#issuecomment-1235928061">v0.26.0-patch1 has been released</a> that includes this fix, but it may be worth waiting for the 1.0.0? (not sure what y'all are planning internally.)</p>
<p>Prior to this, I was using wasmtime 0.39.1 with these patches:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>As wasmtime 1.0.0 depends on 0.25.3 specifically, I can no longer manually patch the relevant packages as there's no version of 0.25.3 with this fix on the Git repository, and (as far as I can tell, it's still a little mysterious to me) there's no way to patch with another version from <a href="http://crates.io">crates.io</a> (I'd patch with 1.0.0rc1 if it was possible)</p>
<p>This is currently blocking us from updating to 1.0.0; 0.39.1 still works fine, but would love to get in today's release hype <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span> </p>
</blockquote>



<a name="299857239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/299857239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#299857239">(Sep 20 2022 at 22:26)</a>:</h4>
<p>philpax labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li>Update to a Rust nightly after the 27th of July</li>
<li>Attempt to build <code>wasmtime-wasi</code></li>
</ul>
<h3>Expected Results</h3>
<p>The build completes successfully.</p>
<h3>Actual Results</h3>
<p>The build fails as the version of <code>cap-std</code> in use uses sealed traits in the Rust stdlib:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">me</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="w"></span>
<span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"></span>
<span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 1.0.0</p>
<p>Operating system: Windows 10</p>
<p>Architecture: x86-64</p>
<h3>Extra Info</h3>
<p>This is caused by <a href="https://github.com/bytecodealliance/cap-std/issues/270">https://github.com/bytecodealliance/cap-std/issues/270</a>, which has been fixed up by upstream <code>cap-std</code>. A <a href="https://github.com/bytecodealliance/cap-std/issues/272#issuecomment-1235928061">v0.26.0-patch1 has been released</a> that includes this fix, but it may be worth waiting for the 1.0.0? (not sure what y'all are planning internally.)</p>
<p>Prior to this, I was using wasmtime 0.39.1 with these patches:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>As wasmtime 1.0.0 depends on 0.25.3 specifically, I can no longer manually patch the relevant packages as there's no version of 0.25.3 with this fix on the Git repository, and (as far as I can tell, it's still a little mysterious to me) there's no way to patch with another version from <a href="http://crates.io">crates.io</a> (I'd patch with 1.0.0rc1 if it was possible)</p>
<p>This is currently blocking us from updating to 1.0.0; 0.39.1 still works fine, but would love to get in today's release hype <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span> </p>
</blockquote>



<a name="299924449"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/299924449" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#299924449">(Sep 21 2022 at 10:26)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1253508069">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I think it makes sense to do a cap-std 0.26 release, with the fix, and update wasmtime to use that. I've now filed <a href="https://github.com/bytecodealliance/cap-std/issues/275">https://github.com/bytecodealliance/cap-std/issues/275</a> with more info.</p>
</blockquote>



<a name="299928085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/299928085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#299928085">(Sep 21 2022 at 10:52)</a>:</h4>
<p>philpax <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1253533067">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Seems reasonable - thank you for the speedy response! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>️</p>
</blockquote>



<a name="300029725"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300029725" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300029725">(Sep 21 2022 at 19:56)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li>Update to a Rust nightly after the 27th of July</li>
<li>Attempt to build <code>wasmtime-wasi</code></li>
</ul>
<h3>Expected Results</h3>
<p>The build completes successfully.</p>
<h3>Actual Results</h3>
<p>The build fails as the version of <code>cap-std</code> in use uses sealed traits in the Rust stdlib:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">me</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="w"></span>
<span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"></span>
<span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 1.0.0</p>
<p>Operating system: Windows 10</p>
<p>Architecture: x86-64</p>
<h3>Extra Info</h3>
<p>This is caused by <a href="https://github.com/bytecodealliance/cap-std/issues/270">https://github.com/bytecodealliance/cap-std/issues/270</a>, which has been fixed up by upstream <code>cap-std</code>. A <a href="https://github.com/bytecodealliance/cap-std/issues/272#issuecomment-1235928061">v0.26.0-patch1 has been released</a> that includes this fix, but it may be worth waiting for the 1.0.0? (not sure what y'all are planning internally.)</p>
<p>Prior to this, I was using wasmtime 0.39.1 with these patches:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"sunfishcode/file-type-ext"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>As wasmtime 1.0.0 depends on 0.25.3 specifically, I can no longer manually patch the relevant packages as there's no version of 0.25.3 with this fix on the Git repository, and (as far as I can tell, it's still a little mysterious to me) there's no way to patch with another version from <a href="http://crates.io">crates.io</a> (I'd patch with 1.0.0rc1 if it was possible)</p>
<p>This is currently blocking us from updating to 1.0.0; 0.39.1 still works fine, but would love to get in today's release hype <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span> </p>
</blockquote>



<a name="300186758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300186758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300186758">(Sep 22 2022 at 15:33)</a>:</h4>
<p>philpax <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1255200147">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Aye, that's what I suspected - but is it possible to backport this under the <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/wasmtime-one-dot-oh.md#backports---bug-fixes">bugfix policy</a>? As far as I can tell, this is the only thing blocking us from updating to 1.0.</p>
</blockquote>



<a name="300192689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300192689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300192689">(Sep 22 2022 at 16:01)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1255236708">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>In my judgement, failing to build under Nightly doesn't meet the bar of "on-by-default behavior", though the RFC itself doesn't make that explicit. Nightly builds tend to break pretty often (once a month? more?) and it would be burdensome if we did a point release for all of them. Sorry to be the person to say no.</p>
</blockquote>



<a name="300215403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300215403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300215403">(Sep 22 2022 at 17:58)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1255366919">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>@philpax One workaround would be to pin to a nightly Rust version from before <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> landed.</p>
<p>Another workaround: If you'd like, I could create git branches of cap-std which have the fix and have a 0.25.3 version number. I can't publish those to <a href="http://crates.io">crates.io</a> because the fix is semver-incompatible with 0.25, but since you mentioned using <code>git =</code> dependencies above, if you could use a <code>git =</code> dependency on such a branch, that would be another workaround. Would that be helpful?</p>
<p>Also, part of the Wasmtime 1.0 announcement is that Wasmtime has a monthly release cadence, so in a month, we'll have a new release with the actual fix in it.<br>
</p>
</blockquote>



<a name="300339407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300339407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300339407">(Sep 23 2022 at 11:18)</a>:</h4>
<p>philpax <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1256087108">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<blockquote>
<p>In my judgement, failing to build under Nightly doesn't meet the bar of "on-by-default behavior", though the RFC itself doesn't make that explicit. Nightly builds tend to break pretty often (once a month? more?) and it would be burdensome if we did a point release for all of them. Sorry to be the person to say no.</p>
</blockquote>
<p>Understandable, I'll make it work.</p>
<blockquote>
<p>One workaround would be to pin to a nightly Rust version from before <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> landed.</p>
</blockquote>
<p>Aye - unfortunately, we're using changes from after that nightly, so we're tied to it.</p>
<blockquote>
<p>Another workaround: If you'd like, I could create git branches of cap-std which have the fix and have a 0.25.3 version number. I can't publish those to <a href="http://crates.io">crates.io</a> because the fix is semver-incompatible with 0.25, but since you mentioned using git = dependencies above, if you could use a git = dependency on such a branch, that would be another workaround. Would that be helpful?</p>
</blockquote>
<p>That would be fantastic if possible! I'm more than happy to use a Git patch - that should resolve the issue for me until we can use 2.0.0 <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> </p>
</blockquote>



<a name="300407661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300407661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300407661">(Sep 23 2022 at 16:38)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1256429349">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Ok, I've now created a <a href="https://github.com/bytecodealliance/cap-std/tree/0.26-with-a-0.25-version-number">0.26-with-a-0.25-version-number</a> branch, which is the 0.26 branch with one patch applied, to change the version number to 0.25.4-backport0. Let me know if that doesn't work!</p>
</blockquote>



<a name="300424955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300424955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300424955">(Sep 23 2022 at 18:13)</a>:</h4>
<p>philpax <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1256526055">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Thanks! Unfortunately, it appears Cargo is intensely picky about how it decides to pick minor versions for patches, and will refuse to update <code>0.25.3</code> to <code>0.25.4-backport0</code> (but _will_ update <code>0.25.3</code> to <code>0.25.4</code>, which I validated by making that change to your branch locally)</p>
<p>I'm wrapping up my week, so I'm in no particular hurry for a fix. Based on my experimentation, I think you would have to drop the <code>-backport0</code> to make Cargo consider it as a viable candidate as a patch. </p>
<p>I don't want to take up too much of your time / make things too confusing on your end, so I'm happy to just maintain a <code>0.25.4</code>-versioned fork of <code>cap-std</code> under our org for the next month (esp as you've shown that 0.26 is 0.25-compatible for wasmtime). Does that work for you?</p>
</blockquote>



<a name="300429383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300429383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300429383">(Sep 23 2022 at 18:39)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1256546971">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Ah, I just added -backport0 because I thought it'd be helpful, but it isn't necessary. I added a patch to the branch to change the version to 0.25.5. Does that work? I'm happy to make minor tweaks if that's all that's needed. But also yeah, you can certainly maintain your own branch too if that's easier.<br>
</p>
</blockquote>



<a name="300640948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300640948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300640948">(Sep 25 2022 at 11:52)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>It needs to be same version in git.. e.g. branch / tag can be different but the Cargo.toml manifest has to be the same</p>
</blockquote>



<a name="300640997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300640997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300640997">(Sep 25 2022 at 11:52)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>It needs to be same version in git.. e.g. branch / tag can be different but the Cargo.toml manifest has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
</blockquote>



<a name="300641057"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300641057" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300641057">(Sep 25 2022 at 11:53)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
</blockquote>



<a name="300641423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300641423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300641423">(Sep 25 2022 at 11:57)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
</blockquote>



<a name="300641477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300641477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300641477">(Sep 25 2022 at 11:57)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
<p>If we can update the branch Cargo.toml version then that would work</p>
</blockquote>



<a name="300641898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300641898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300641898">(Sep 25 2022 at 12:01)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>EDIT: Just saw it was done already :partying_face: </p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
<p>If we can update the branch Cargo.toml version then that would work</p>
</blockquote>



<a name="300642111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300642111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300642111">(Sep 25 2022 at 12:03)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
</blockquote>



<a name="300642236"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300642236" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300642236">(Sep 25 2022 at 12:04)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required</p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
</blockquote>



<a name="300642294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300642294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300642294">(Sep 25 2022 at 12:05)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
</blockquote>



<a name="300642625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300642625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300642625">(Sep 25 2022 at 12:08)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643000">(Sep 25 2022 at 12:12)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>Also NOTE: You need to absolutely gate this feature over 1.64.0 and for Windows - Otherwise it will break all builds on &lt; 1.64.0</p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643022">(Sep 25 2022 at 12:12)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>Also NOTE: You need to absolutely gate this patch over 1.64.0 and for Windows - Otherwise it will break all builds on &lt; 1.64.0</p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643046">(Sep 25 2022 at 12:13)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: You need to absolutely gate this patch on &gt;= 1.64.0 and for Windows - Otherwise it will break all builds on &lt; 1.64.0</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643060">(Sep 25 2022 at 12:13)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: Need to absolutely gate this patch on &gt;= 1.64.0 and for Windows - Otherwise it will break all builds on &lt; 1.64.0</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643074">(Sep 25 2022 at 12:13)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: Need to gate this patch on &gt;= 1.64.0 and for Windows - Otherwise it will break all builds on &lt; 1.64.0</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643414">(Sep 25 2022 at 12:17)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: Need to gate this patch on &gt;= 1.64.0 and for Windows - Otherwise it will break all other builds on &lt; 1.64.0</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300643452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643452">(Sep 25 2022 at 12:17)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>EDIT: Just saw it was done already :partying_face: </p>
<p>EDIT.2: Now need to gate this patch to only Windows and &gt;= 1.64.0 as otherwise it breaks &lt; 1.64.0</p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
<p>If we can update the branch Cargo.toml version then that would work</p>
</blockquote>



<a name="300643864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300643864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300643864">(Sep 25 2022 at 12:22)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257182610">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I need to send a patch to make sure it gets gated in the patch branch</p>
</blockquote>



<a name="300644278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644278">(Sep 25 2022 at 12:26)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183216">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>The patch breaks on &lt; 1.64.0</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">70</span>:<span class="mi">57</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_block_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">75</span>:<span class="mi">56</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">75</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_char_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">80</span>:<span class="mi">49</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_fifo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">---------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">51</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">85</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_socket</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
</blockquote>



<a name="300644294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644294">(Sep 25 2022 at 12:26)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257182610">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I need to send a patch to make sure it gets gated in the patch branch</p>
</blockquote>



<a name="300644312"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644312" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644312">(Sep 25 2022 at 12:26)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183216">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>The patch breaks on &lt; 1.64.0</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">70</span>:<span class="mi">57</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_block_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">75</span>:<span class="mi">56</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">75</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_char_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">80</span>:<span class="mi">49</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_fifo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">---------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">51</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">85</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_socket</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
</blockquote>



<a name="300644352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644352">(Sep 25 2022 at 12:27)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300644366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644366">(Sep 25 2022 at 12:27)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>EDIT: Just saw it was done already :partying_face: </p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
<p>If we can update the branch Cargo.toml version then that would work</p>
</blockquote>



<a name="300644606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644606">(Sep 25 2022 at 12:29)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Patch doesn't seem to work when trying to build on either stable 1.64.0 or latest nightly in linux</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">70</span>:<span class="mi">57</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">70</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_block_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">75</span>:<span class="mi">56</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">75</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_char_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">----------------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">80</span>:<span class="mi">49</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">80</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_fifo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">---------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>

<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">  </span><span class="o">-</span>-&gt; <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="o">-</span><span class="mf">0.25.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">file_type_ext</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">85</span>:<span class="mi">51</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="mi">85</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span>::<span class="n">is_socket</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">-----------------------------------------</span><span class="w"> </span><span class="o">^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">cap_primitives</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w">         </span><span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">introduced</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">call</span><span class="w"></span>
<span class="w">   </span><span class="o">|</span><span class="w"></span>
<span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">unix</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fs</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
</blockquote>



<a name="300644994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300644994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300644994">(Sep 25 2022 at 12:33)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257184253">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Looking at the origiinal commit</p>
<p>commit 949f251bccbb84513fe81a427a46864c1e8ad82c</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Date</span>:   <span class="nc">Tue</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">13</span>:<span class="mi">02</span>:<span class="mi">57</span><span class="w"> </span><span class="mi">2022</span><span class="w"> </span><span class="o">-</span><span class="mi">0700</span><span class="w"></span>

<span class="w">    </span><span class="n">Switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">std</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">recently</span><span class="w"> </span><span class="n">sealed</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">can</span><span class="w"></span>
<span class="w">    </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">types</span><span class="p">.</span><span class="w"> </span><span class="n">Fortunately</span><span class="p">,</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">traits</span><span class="w"></span>
<span class="w">    </span><span class="n">are</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">copies</span><span class="w"></span>
<span class="w">    </span><span class="n">of</span><span class="w"> </span><span class="n">them</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">instead</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">Fixes</span><span class="w"> </span>#<span class="mf">270.</span><span class="w"></span>
</code></pre></div>
<p>It removed these and now it seems to have broken Linux ?</p>
<p>The non-patch branch was working fine in OSX / Linux and this error only happened in Windows</p>
<p>In the patch branch can we rollback how it was with unix and only apply the Windows specific stuff ?</p>
</blockquote>



<a name="300645037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300645037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300645037">(Sep 25 2022 at 12:33)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257184253">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Looking at the original commit</p>
<p>commit 949f251bccbb84513fe81a427a46864c1e8ad82c</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Date</span>:   <span class="nc">Tue</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">13</span>:<span class="mi">02</span>:<span class="mi">57</span><span class="w"> </span><span class="mi">2022</span><span class="w"> </span><span class="o">-</span><span class="mi">0700</span><span class="w"></span>

<span class="w">    </span><span class="n">Switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">std</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">recently</span><span class="w"> </span><span class="n">sealed</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">can</span><span class="w"></span>
<span class="w">    </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">types</span><span class="p">.</span><span class="w"> </span><span class="n">Fortunately</span><span class="p">,</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">traits</span><span class="w"></span>
<span class="w">    </span><span class="n">are</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">copies</span><span class="w"></span>
<span class="w">    </span><span class="n">of</span><span class="w"> </span><span class="n">them</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">instead</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">Fixes</span><span class="w"> </span>#<span class="mf">270.</span><span class="w"></span>
</code></pre></div>
<p>It removed these and now it seems to have broken Linux ?</p>
<p>The non-patch branch was working fine in OSX / Linux and this error only happened in Windows</p>
<p>In the patch branch can we rollback how it was with unix and only apply the Windows specific stuff ?</p>
</blockquote>



<a name="300645046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300645046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300645046">(Sep 25 2022 at 12:33)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257184253">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Looking at the original patch commit</p>
<p>commit 949f251bccbb84513fe81a427a46864c1e8ad82c</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Date</span>:   <span class="nc">Tue</span><span class="w"> </span><span class="n">Aug</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class="mi">13</span>:<span class="mi">02</span>:<span class="mi">57</span><span class="w"> </span><span class="mi">2022</span><span class="w"> </span><span class="o">-</span><span class="mi">0700</span><span class="w"></span>

<span class="w">    </span><span class="n">Switch</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">std</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">recently</span><span class="w"> </span><span class="n">sealed</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="err">`</span><span class="n">FileTypeExt</span><span class="err">`</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">can</span><span class="w"></span>
<span class="w">    </span><span class="n">no</span><span class="w"> </span><span class="n">longer</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">them</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">its</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">types</span><span class="p">.</span><span class="w"> </span><span class="n">Fortunately</span><span class="p">,</span><span class="w"> </span><span class="n">these</span><span class="w"> </span><span class="n">traits</span><span class="w"></span>
<span class="w">    </span><span class="n">are</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">used</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">extension</span><span class="w"> </span><span class="n">traits</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">just</span><span class="w"> </span><span class="n">define</span><span class="w"> </span><span class="n">our</span><span class="w"> </span><span class="n">own</span><span class="w"> </span><span class="n">copies</span><span class="w"></span>
<span class="w">    </span><span class="n">of</span><span class="w"> </span><span class="n">them</span><span class="p">,</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="n">those</span><span class="w"> </span><span class="n">instead</span><span class="p">.</span><span class="w"></span>

<span class="w">    </span><span class="n">Fixes</span><span class="w"> </span>#<span class="mf">270.</span><span class="w"></span>
</code></pre></div>
<p>It removed these and now it seems to have broken Linux ?</p>
<p>The non-patch branch was working fine in OSX / Linux and this error only happened in Windows</p>
<p>In the patch branch can we rollback how it was with unix and only apply the Windows specific stuff ?</p>
</blockquote>



<a name="300645608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300645608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300645608">(Sep 25 2022 at 12:39)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257178176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>For the patch approach to work</p>
<p>EDIT: Just saw it was done already :partying_face: </p>
<p>Cargo.toml manifest version field needs to be same version in git.. </p>
<p>e.g. branch / tag name can be different but the Cargo.toml manifest in the tag has to be the same for Cargo to accept the <a href="http://crates.io">crates.io</a> patch</p>
<p>If we can update the branch Cargo.toml version then that would work</p>
</blockquote>



<a name="300645623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300645623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300645623">(Sep 25 2022 at 12:39)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300646419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300646419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300646419">(Sep 25 2022 at 12:47)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300646485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300646485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300646485">(Sep 25 2022 at 12:48)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300648308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300648308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300648308">(Sep 25 2022 at 13:06)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I started overview around what is broken still via 1.64.0 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>Yeah our is picking up 0.25.2 - I went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300648344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300648344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300648344">(Sep 25 2022 at 13:06)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I started overview around what is broken still via 1.64.0 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>This is when using via wasi-common</p>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300648587"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300648587" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300648587">(Sep 25 2022 at 13:09)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I summarized overview around what is broken still via 1.64.0 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>This is when using via wasi-common</p>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300651359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300651359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300651359">(Sep 25 2022 at 13:35)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>EDIT: I summarized overview around what is broken still via 1.64.0 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>This is when using via wasi-common</p>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300651384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300651384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300651384">(Sep 25 2022 at 13:35)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257179793">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>EDIT: I summarized overview around what is broken still via 1.64.0 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>This is when using via wasi-common 0.40</p>
<p>Also Cargo.lock gets now updated via that branch.. thanks !</p>
<p>All not necessarily required - see warnings whether they were used in graph or not</p>
<p>I cannot bump lock to 0.26 as wasi-common 0.40 pins to 0.25</p>
<p>So I am trying to use this branch-patch route</p>
<p><strong>NOTE: Still testing this.. having some issues</strong></p>
<p>Cargo.toml patch</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>$ cargo update -p wasi-common</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">repository</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git`</span>
<span class="n">warning</span>: <span class="nc">Patch</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)` was not used in the crate graph.</span>
<span class="n">Check</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patched</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">available</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">compatible</span><span class="w"></span>
<span class="n">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">requirements</span><span class="p">.</span><span class="w"> </span><span class="n">If</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">patch</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">different</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">from</span><span class="w"></span>
<span class="n">what</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">locked</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">Cargo</span><span class="p">.</span><span class="n">lock</span><span class="w"> </span><span class="n">file</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">cargo</span><span class="w"> </span><span class="n">update</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">new</span><span class="w"></span>
<span class="n">version</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">occur</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
<span class="w">    </span><span class="n">Removing</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="w">      </span><span class="n">Adding</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.5</span><span class="w"> </span><span class="p">(</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/cap-std.git?branch=0.26-with-a-0.25-version-number#535747a0)</span>
</code></pre></div>
<p>Can we ensure that this branch hangs around for a while until we manage to bump to 1 ? Cheers</p>
<p>For anyone curious I ended up having an adventure in Rust std first: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a><br>
I'm tracking this here for lunatic: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
</blockquote>



<a name="300653008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300653008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300653008">(Sep 25 2022 at 13:50)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257198669">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Those error messages reference cap-fs-ext-0.25.2, which doesn't have the fix. Can you use cargo tree to find out what's pulling in cap-fs-ext 0.25.2 instead of 0.25.5?<br>
</p>
</blockquote>



<a name="300653952"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300653952" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300653952">(Sep 25 2022 at 14:00)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257202599">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>wasi-cap-std-sync but I think this is red herring</p>
<p><a href="http://crates.io">crates.io</a> 0.25.5 for cap-fs-ext ? do we mean 0.25.3 ?</p>
<p>$ cargo tree -i cap-fs-ext</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="o">-</span><span class="n">sync</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">        </span><span class="err">├──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="err">└──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Problem is that the patch repo Cargo.toml version has to match exactly what ends up in the lock</p>
<p>I think this method is pretty flaky and I would recommend to do the recursive point-release ?</p>
<p>I mean it's pain but :woman_shrugging: dealing with that point-branch this way just is prone to error me thinks ?</p>
</blockquote>



<a name="300654172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654172">(Sep 25 2022 at 14:02)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257202599">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>wasi-cap-std-sync but I think this is red herring</p>
<p><a href="http://crates.io">crates.io</a> doesn't have 0.25.5 for cap-fs-ext ? do we mean 0.25.3 ?</p>
<p>$ cargo tree -i cap-fs-ext</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="o">-</span><span class="n">sync</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">        </span><span class="err">├──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="err">└──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Problem is that the patch repo Cargo.toml version has to match exactly what ends up in the lock</p>
<p>I think this method is pretty flaky and I would recommend to do the recursive point-release ?</p>
<p>I mean it's pain but :woman_shrugging: dealing with that point-branch this way just is prone to error me thinks ?</p>
</blockquote>



<a name="300654253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654253">(Sep 25 2022 at 14:03)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257203255">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>You would need to release <a href="http://crates.io">crates.io</a> release for 0.25.5 so the patch thing would work</p>
<p>Then it would be still broken for someone who hasn;t updated their lockfile .. so this is pretty doomed work/around ?</p>
</blockquote>



<a name="300654359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654359">(Sep 25 2022 at 14:04)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257203255">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>You would need to release <a href="http://crates.io">crates.io</a> release for 0.25.5 cap-fs-ext so the patch thing would work</p>
<p>Then it would be still broken for someone who hasn;t updated their lockfile .. so this is pretty doomed work/around ?</p>
</blockquote>



<a name="300654377"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654377" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654377">(Sep 25 2022 at 14:04)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257203255">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>You would need to release <a href="http://crates.io">crates.io</a> release for 0.25.5 cap-fs-ext so the patch thing would take effect</p>
<p>Then it would be still broken for someone who hasn;t updated their lockfile .. so this is pretty doomed work/around ?</p>
</blockquote>



<a name="300654516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654516">(Sep 25 2022 at 14:05)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257203255">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>You would need to release <a href="http://crates.io">crates.io</a> release for 0.25.5 cap-fs-ext so the patch thing would take effect</p>
<p>Then it would be still broken for someone who hasn;t updated their lockfile .. so I would think this work/around is unfeasible ?</p>
</blockquote>



<a name="300654549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300654549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300654549">(Sep 25 2022 at 14:05)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257202599">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>wasi-cap-std-sync but I think this is red herring</p>
<p><a href="http://crates.io">crates.io</a> doesn't have 0.25.5 for cap-fs-ext ? do we mean 0.25.3 ?</p>
<p>$ cargo tree -i cap-fs-ext</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cap</span><span class="o">-</span><span class="n">fs</span><span class="o">-</span><span class="n">ext</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="o">-</span><span class="n">sync</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">        </span><span class="err">├──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="err">└──</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">foobar</span><span class="o">/</span><span class="n">gg</span><span class="o">/</span><span class="n">play</span><span class="o">/</span><span class="n">zz</span><span class="o">/</span><span class="n">lunatic</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">lunatic</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">api</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Problem is that the patch repo Cargo.toml version has to match exactly what ends up in the lock</p>
<p>I would recommend to do the recursive point-release ?</p>
<p>I mean it's pain but :woman_shrugging: dealing with that point-branch this way just is prone to error me thinks ?</p>
</blockquote>



<a name="300655228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655228">(Sep 25 2022 at 14:10)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257204433">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>The patch is not semver compatible with 0.25, so I will not publish 0.25.5 to <a href="http://crates.io">crates.io</a>.</p>
<p>I've responded to all reported issues promptly. I created a special branch to try to help. I'm willing to take other reasonable steps that anyone can suggest. But please also keep in mind that part of the responsibility that comes with depending on the very latest Rust nightly and being unable to pin to an older nightly is yours.<br>
</p>
</blockquote>



<a name="300655289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655289">(Sep 25 2022 at 14:11)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257204520">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>This is rust stable</p>
</blockquote>



<a name="300655358"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655358" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655358">(Sep 25 2022 at 14:11)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257204520">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>This is rust stable</p>
<p>I took the whole effort to document how this happens in 1.64 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
</blockquote>



<a name="300655438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655438">(Sep 25 2022 at 14:12)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257204520">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>This is both rust stable and latest nightly..</p>
<p>I took the whole effort to document how this happens in 1.64 stable: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
</blockquote>



<a name="300655466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655466">(Sep 25 2022 at 14:12)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257204873">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I have not seen any problems on Unix in any of the many issue threads that are live at the moment. I have seen an error that was caused by mixing 0.25.2 and 0.25.5.</p>
</blockquote>



<a name="300655639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655639">(Sep 25 2022 at 14:14)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257205192">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Well I originally came to this issue because the stable 1.64 was affected with Windows and I tried to apply this work-around to make it in work and it in turn causes another error.</p>
<p>The mixing is caused by work/around I am trying to apply to make Windows builds work in 1.64 stable.</p>
<p>See the problem ? I don't think people should be applying work / arounds on rust 1.63 stable ?</p>
</blockquote>



<a name="300655652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655652">(Sep 25 2022 at 14:15)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257205192">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Well I originally came to this issue because the stable 1.64 was affected with Windows and I tried to apply this work-around to make it in work and it in turn causes another error.</p>
<p>The mixing is caused by work/around I am trying to apply to make Windows builds work in 1.64 stable.</p>
<p>See the problem ? I don't think people should be applying work / arounds on rust 1.64 stable to get 0.40 work on windows ?</p>
</blockquote>



<a name="300655815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300655815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300655815">(Sep 25 2022 at 14:16)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257205192">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Well I originally came to this issue because the stable 1.64 was affected with Windows and I tried to apply this work-around to make it in work and it in turn causes another error.</p>
<p>The mixing is caused by work/around I am trying to apply to make Windows builds work in 1.64 stable.</p>
<p>See the problem ? I don't think people should be applying work / arounds on rust 1.64 stable to get 0.40 work on windows ?</p>
<p>It doesn't either help that these issues are buried and it should have been fixed properly at the point where the nightly broke on windows given that at time it was known that the trait changes and it will eventually hit stable like it hit now with 1.64 ?</p>
</blockquote>



<a name="300656132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300656132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300656132">(Sep 25 2022 at 14:19)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257206043">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>I created a summary issue earlier here: <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">https://github.com/bytecodealliance/wasmtime/issues/4957</a></p>
<p>So that we don't potentially have more confused people like myself trying to find out and apply work / arounds to this issue and create even more confusion :)</p>
</blockquote>



<a name="300656437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300656437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300656437">(Sep 25 2022 at 14:22)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257205192">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Well I originally came to this issue because the stable 1.64 was affected with Windows and I tried to apply this work-around to make it in work and it in turn causes another error.</p>
<p>The mixing is caused by work/around I am trying to apply to make Windows builds work in 1.64 stable.</p>
<p>See the problem ? I don't think people should be applying work / arounds on rust 1.64 stable to get 0.40 work on windows ?</p>
<p>It doesn't either help that these issues are buried and it should have been fixed properly at the point where the nightly broke on windows given that at time it was known that the trait changes and it will eventually hit stable like it hit now with 1.64 ?</p>
<p>I understand it is not entirely ideal situation and I am not sure why the trait got sealed like that - given it wasn't from the beginning - but ensuring that things still build is very important across platforms and I don't think this is much tested atm other than people ending up complaining which in turn isn't either ideal - I think we need more tests building across platforms and versions supported.</p>
</blockquote>



<a name="300656460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300656460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300656460">(Sep 25 2022 at 14:23)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257205192">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<p>Well I originally came to this issue because the stable 1.64 was affected with Windows and I tried to apply this work-around to make it in work and it in turn causes another error.</p>
<p>The mixing is caused by work/around I am trying to apply to make Windows builds work in 1.64 stable.</p>
<p>See the problem ? I don't think people should be applying work / arounds on rust 1.64 stable to get 0.40 work on windows ?</p>
<p>It doesn't either help that these issues are buried and it should have been fixed properly at the point where the nightly broke on windows given that at time it was known that the trait changes and it will eventually hit stable like it hit now with 1.64 ?</p>
<p>I understand it is not entirely ideal situation and I am not sure why the trait got sealed like that - given it wasn't from the beginning - but ensuring that things still build is very important across platforms and I don't think this is much tested atm other than people ending up complaining which in turn isn't either ideal - I think we need more tests building across platforms and versions supported to detect these properly before and when they keep happening given rust changes.</p>
</blockquote>



<a name="300669832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234936%20wasmtime%201.0.0%27s%20wasi-cap-std-sync.../near/300669832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234936.20wasmtime.201.2E0.2E0.27s.20wasi-cap-std-sync.2E.2E.2E.html#300669832">(Sep 25 2022 at 16:40)</a>:</h4>
<p>philpax <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257231234">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">issue #4936</a>:</p>
<blockquote>
<blockquote>
<p>Ah, I just added -backport0 because I thought it'd be helpful, but it isn't necessary. I added a patch to the branch to change the version to 0.25.5. Does that work? I'm happy to make minor tweaks if that's all that's needed. But also yeah, you can certainly maintain your own branch too if that's easier.</p>
</blockquote>
<p>Quickly tried this out and can confirm that this branch <em>does</em> work for me on Windows, with Rust nightly <code>2022-08-30</code>!</p>
<p>This is what's in my Cargo.toml:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1.0"</span><span class="w"></span>
<span class="n">wasmtime-wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1.0"</span><span class="w"></span>

<span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Thank you for your work on this - it is very much appreciated <span aria-label="pray" class="emoji emoji-1f64f" role="img" title="pray">:pray:</span> Glad to be on 1.0!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>