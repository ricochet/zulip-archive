<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5450 Make DataFlowGraph::insts public, but... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html">wasmtime / PR #5450 Make DataFlowGraph::insts public, but...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="316159055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316159055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316159055">(Dec 15 2022 at 23:03)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> from <code>trevor/public-insts-field</code> to <code>main</code>:</p>
<blockquote>
<p>We have some operations defined on DataFlowGraph purely to work around borrow-checker issues with InstructionData and other data on DataFlowGraph. Part of the problem is that indexing the DFG directly hides the fact that we're only indexing the <code>insts</code> field of the DFG.</p>
<p>This PR makes the <code>insts</code> field of the DFG public, but wraps it in a newtype that only allows indexing. This means that the borrow checker is better able to tell when oeprations on memory held by the DFG won't conflict, which comes up frequently when mutating ValueLists held by InstructionData.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316161717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161717">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220078873">PR review</a>.</p>



<a name="316161719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161719">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050231457">PR review comment</a>:</p>
<blockquote>
<p>Pre-existing: I think this function leaks the portion of the pool corresponding to <code>old_actuals</code>. Doesn't need to be fixed in this PR, I just wanted to note it.</p>
</blockquote>



<a name="316161720"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161720" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161720">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050225545">PR review comment</a>:</p>
<blockquote>
<p>I keep being confused about what promises we make about serialization. I assume inserting a newtype wrapper changes the derived serialization format. Do we care? I think we don't care because anything we might be serializing is only meant to be stable within the same major version of Wasmtime, but I don't know.</p>
</blockquote>



<a name="316161721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161721">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050226977">PR review comment</a>:</p>
<blockquote>
<p>I suppose this case can use the <code>IndexMut</code> implementation on the newtype wrapper, instead of needing to dig inside it. I guess I have a mild preference for using the public API where that's reasonable.</p>
</blockquote>



<a name="316161722"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161722" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161722">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220078873">PR review</a>.</p>



<a name="316161723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316161723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316161723">(Dec 15 2022 at 23:25)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050227521">PR review comment</a>:</p>
<blockquote>
<p>This change makes me so much happier :grin: </p>
</blockquote>



<a name="316163173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316163173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316163173">(Dec 15 2022 at 23:39)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220097577">PR review</a>.</p>



<a name="316163174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316163174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316163174">(Dec 15 2022 at 23:39)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050239212">PR review comment</a>:</p>
<blockquote>
<p>I was just digging into this, and found that this function handles cases where the arguments aren't contained in an entity list as well.</p>
</blockquote>



<a name="316163214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316163214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316163214">(Dec 15 2022 at 23:39)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050239428">PR review comment</a>:</p>
<blockquote>
<p>Should we open an issue?</p>
</blockquote>



<a name="316163215"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316163215" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316163215">(Dec 15 2022 at 23:39)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220097843">PR review</a>.</p>



<a name="316163450"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316163450" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316163450">(Dec 15 2022 at 23:42)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> from <code>trevor/public-insts-field</code> to <code>main</code>.</p>



<a name="316165465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316165465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316165465">(Dec 16 2022 at 00:01)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> from <code>trevor/public-insts-field</code> to <code>main</code>.</p>



<a name="316166650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316166650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316166650">(Dec 16 2022 at 00:12)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050253959">PR review comment</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/issues/5451">https://github.com/bytecodealliance/wasmtime/issues/5451</a></p>
</blockquote>



<a name="316166651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316166651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316166651">(Dec 16 2022 at 00:12)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220117554">PR review</a>.</p>



<a name="316167332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316167332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316167332">(Dec 16 2022 at 00:18)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220120959">PR review</a>.</p>



<a name="316167333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316167333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316167333">(Dec 16 2022 at 00:18)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050256487">PR review comment</a>:</p>
<blockquote>
<p>I think I had a recency bias issue and thought you were referring to refactoring <code>arguments_mut</code> instead of removing the unnecessary use of <code>.0</code>. I'll agree that this is better without the <code>.0</code> <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="316169366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169366">(Dec 16 2022 at 00:38)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> from <code>trevor/public-insts-field</code> to <code>main</code>.</p>



<a name="316169387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169387">(Dec 16 2022 at 00:38)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> as ready for review.</p>



<a name="316169396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169396">(Dec 16 2022 at 00:38)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a>.</p>



<a name="316169397"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169397" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169397">(Dec 16 2022 at 00:38)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a>.</p>



<a name="316169484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169484">(Dec 16 2022 at 00:39)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050265175">PR review comment</a>:</p>
<blockquote>
<p>@cfallin or @fitzgen, do we make any guarantees about the stability of the serialized format for these structures between releases?</p>
</blockquote>



<a name="316169485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316169485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316169485">(Dec 16 2022 at 00:39)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220132788">PR review</a>.</p>



<a name="316171103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316171103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316171103">(Dec 16 2022 at 00:56)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a> from <code>trevor/public-insts-field</code> to <code>main</code>:</p>
<blockquote>
<p>We have some operations defined on DataFlowGraph purely to work around borrow-checker issues with InstructionData and other data on DataFlowGraph. Part of the problem is that indexing the DFG directly hides the fact that we're only indexing the <code>insts</code> field of the DFG.</p>
<p>This PR makes the <code>insts</code> field of the DFG public, but wraps it in a newtype that only allows indexing. This means that the borrow checker is better able to tell when operations on memory held by the DFG won't conflict, which comes up frequently when mutating ValueLists held by InstructionData.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316174534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316174534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316174534">(Dec 16 2022 at 01:36)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1220167143">PR review</a>.</p>



<a name="316174535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316174535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316174535">(Dec 16 2022 at 01:36)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050290412">PR review comment</a>:</p>
<blockquote>
<p>Nope, this feeds</p>
</blockquote>



<a name="316174563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316174563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316174563">(Dec 16 2022 at 01:36)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#discussion_r1050290412">PR review comment</a>.</p>



<a name="316336611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316336611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316336611">(Dec 16 2022 at 18:44)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5450#pullrequestreview-1221298865">PR review</a>.</p>



<a name="316337006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235450%20Make%20DataFlowGraph%3A%3Ainsts%20public%2C%20but.../near/316337006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235450.20Make.20DataFlowGraph.3A.3Ainsts.20public.2C.20but.2E.2E.2E.html#316337006">(Dec 16 2022 at 18:46)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5450">PR #5450</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>