<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9051 Winch aarch64 jmp · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html">wasmtime / PR #9051 Winch aarch64 jmp</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="455392728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455392728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455392728">(Jul 31 2024 at 14:49)</a>:</h4>
<p>vulc41n opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a> from <code>vulc41n:winch-aarch64-jmp</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Hey <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>
<p>This PR implements jmp, jmp_table and branch instructions for winch targeting aarch64.</p>
<p>#8321</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="455392730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455392730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455392730">(Jul 31 2024 at 14:49)</a>:</h4>
<p><strong>vulc41n</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455392737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455392737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455392737">(Jul 31 2024 at 14:49)</a>:</h4>
<p><strong>vulc41n</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455392739"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455392739" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455392739">(Jul 31 2024 at 14:49)</a>:</h4>
<p><strong>vulc41n</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455392741"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455392741" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455392741">(Jul 31 2024 at 14:49)</a>:</h4>
<p><strong>vulc41n</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455394733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455394733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455394733">(Jul 31 2024 at 14:59)</a>:</h4>
<p>vulc41n updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455440921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455440921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455440921">(Jul 31 2024 at 17:27)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#pullrequestreview-2210710522">PR review</a>:</p>
<blockquote>
<p>Thanks! I think we need to add a little logic to handle large branch offsets and islands here (aarch64-specific issue, x64 doesn't need this) but otherwise LGTM.</p>
</blockquote>



<a name="455440924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455440924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455440924">(Jul 31 2024 at 17:27)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#pullrequestreview-2210710522">PR review</a>:</p>
<blockquote>
<p>Thanks! I think we need to add a little logic to handle large branch offsets and islands here (aarch64-specific issue, x64 doesn't need this) but otherwise LGTM.</p>
</blockquote>



<a name="455440928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455440928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455440928">(Jul 31 2024 at 17:27)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#discussion_r1698840960">PR review comment</a>:</p>
<blockquote>
<p>We'll need an <code>EmitIsland</code> instruction here too; see <a href="https://github.com/bytecodealliance/wasmtime/blob/ba864e987ef1ab87c439ca6b396264547d2425e1/cranelift/codegen/src/isa/aarch64/lower.isle#L2967">here</a> and <a href="https://github.com/bytecodealliance/wasmtime/blob/ba864e987ef1ab87c439ca6b396264547d2425e1/cranelift/codegen/src/isa/aarch64/inst.isle#L933-L952">here</a> for more details on how and why.</p>
</blockquote>



<a name="455469829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455469829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455469829">(Jul 31 2024 at 19:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#issuecomment-2261317807">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @saulecabrera</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "winch"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>saulecabrera: winch</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="455688568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455688568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455688568">(Aug 01 2024 at 16:01)</a>:</h4>
<p>vulc41n updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<a name="455689597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455689597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455689597">(Aug 01 2024 at 16:04)</a>:</h4>
<p>vulc41n <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#issuecomment-2263431388">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>:</p>
<blockquote>
<p>Thanks for reviewing this work <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<p>Should I push the tests ? They are obviously large (13 and 12Mb).</p>
<p>Please tell me if there is anything else that I can improve</p>
</blockquote>



<a name="455710198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455710198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455710198">(Aug 01 2024 at 17:19)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#issuecomment-2263573477">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>:</p>
<blockquote>
<blockquote>
<p>Should I push the tests ? They are obviously large (13 and 12Mb).</p>
</blockquote>
<p>We have tests of the underlying parts (<code>MachBuffer</code> and its island-insertion logic); that is probably fine for coverage here, vs. checking in a very large test, IMHO. If we wanted to do better in the future we could add the equivalent of Cranelift's chaos mode choice to sometimes artificially lower the island threshold, to avoid the need for very large inputs to trigger this; but no need to do that in this PR.</p>
</blockquote>



<a name="455710843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455710843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455710843">(Aug 01 2024 at 17:22)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9051#pullrequestreview-2213426306">PR review</a>.</p>



<a name="455714638"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239051%20Winch%20aarch64%20jmp/near/455714638" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239051.20Winch.20aarch64.20jmp.html#455714638">(Aug 01 2024 at 17:37)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9051">PR #9051</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>