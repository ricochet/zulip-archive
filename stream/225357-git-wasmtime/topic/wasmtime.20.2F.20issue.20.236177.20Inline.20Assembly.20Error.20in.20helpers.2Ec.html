<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6177 Inline Assembly Error in helpers.c · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236177.20Inline.20Assembly.20Error.20in.20helpers.2Ec.html">wasmtime / issue #6177 Inline Assembly Error in helpers.c</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="347703356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236177%20Inline%20Assembly%20Error%20in%20helpers.c/near/347703356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236177.20Inline.20Assembly.20Error.20in.20helpers.2Ec.html#347703356">(Apr 07 2023 at 16:34)</a>:</h4>
<p>mainini opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6177">issue #6177</a>:</p>
<blockquote>
<p>Hi!</p>
<p>When building a Rust project which uses wasmtime::Engine to run WASM binaries, linking fails. Project is built as usual with cargo. The following error occurs in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/runtime/src/helpers.c#L78">runtime/src/helpers.c:78</a>: _undefined reference to `asm'_</p>
<p>To me, it looks like this should be an empty inline assembly statement, and effectively, replacing it with <code>__asm("");</code> solves the issue. </p>
<p>I am unaware of the build process for helpers.c but happy to provide more details if required. OS: Linux 6.2.9, CC: GCC 12.2.1 20230201</p>
</blockquote>



<a name="348231280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236177%20Inline%20Assembly%20Error%20in%20helpers.c/near/348231280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236177.20Inline.20Assembly.20Error.20in.20helpers.2Ec.html#348231280">(Apr 10 2023 at 14:31)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6177#issuecomment-1501889605">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6177">issue #6177</a>:</p>
<blockquote>
<p>Thanks for the report! Does <a href="https://github.com/bytecodealliance/wasmtime/pull/6188">https://github.com/bytecodealliance/wasmtime/pull/6188</a> fix compilation for you? Or is <code>__asm</code> required instead of <code>__asm__</code>?</p>
</blockquote>



<a name="348277718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236177%20Inline%20Assembly%20Error%20in%20helpers.c/near/348277718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236177.20Inline.20Assembly.20Error.20in.20helpers.2Ec.html#348277718">(Apr 10 2023 at 18:17)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6177">issue #6177</a>:</p>
<blockquote>
<p>Hi!</p>
<p>When building a Rust project which uses wasmtime::Engine to run WASM binaries, linking fails. Project is built as usual with cargo. The following error occurs in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/runtime/src/helpers.c#L78">runtime/src/helpers.c:78</a>: _undefined reference to `asm'_</p>
<p>To me, it looks like this should be an empty inline assembly statement, and effectively, replacing it with <code>__asm("");</code> solves the issue. </p>
<p>I am unaware of the build process for helpers.c but happy to provide more details if required. OS: Linux 6.2.9, CC: GCC 12.2.1 20230201</p>
</blockquote>



<a name="348295296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236177%20Inline%20Assembly%20Error%20in%20helpers.c/near/348295296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236177.20Inline.20Assembly.20Error.20in.20helpers.2Ec.html#348295296">(Apr 10 2023 at 20:05)</a>:</h4>
<p>mainini <a href="https://github.com/bytecodealliance/wasmtime/issues/6177#issuecomment-1502252952">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6177">issue #6177</a>:</p>
<blockquote>
<p>Thanks for the quick action! Indeed, this fixes it.<br>
As a sidenote, I've now understood why it failed in the first place: I forgot having CFLAGS="-std=c17 -Wall -Wextra -Wpedantic" in my environment by default...<br>
Sorry for the noise - in any case it's standards compliant now ;-)</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>