<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4618 Cranelift: `ABISig::from_func_sig`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html">wasmtime / issue #4618 Cranelift: `ABISig::from_func_sig`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="292081922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292081922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292081922">(Aug 04 2022 at 23:12)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1205865317">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:machinst", "cranelift:area:x64", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="292082934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292082934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292082934">(Aug 04 2022 at 23:24)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1205872048">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<p>Returning a <code>Cow</code> doesn't work because the signature gets stored in <code>ABICalle{e,r}Impl</code> and I tried threading a lifetime through those structs but then run into borrow errors where something wants unique access to the thing the signature is inside but the signature is shared borrowed by <code>ABICalle{e,r}Impl</code>s.</p>
</blockquote>



<a name="292082992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292082992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292082992">(Aug 04 2022 at 23:24)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1205872499">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<p>That said, I am investigating moving this legalization out of the mach inst code and into the actual legalizer pass we have, which should just modify the signatures in place, instead of doing any <code>clone</code>s at all</p>
</blockquote>



<a name="292083129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292083129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292083129">(Aug 04 2022 at 23:26)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1205873587">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<p>Alternately: give <code>ABISig</code> an iterator-only interface, and an implementation that sneakily inserts the extra arg in the case where we're mutating now. That's the most efficient I think, at the cost of some refactoring at use-sites...</p>
</blockquote>



<a name="292180413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292180413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292180413">(Aug 05 2022 at 16:53)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1206656512">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<p>I've rebased this on top of <a href="https://github.com/bytecodealliance/wasmtime/pull/4621">https://github.com/bytecodealliance/wasmtime/pull/4621</a> and rewritten it to do this signature legalization in-place in the legalization pass. This gives a nice phase separation and puts responsibility for legalization in the expected place. It is also an even larger speed up (against the remove-unused-fields PR) than the original PR was (against main):</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">181420458.93</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">26515667.61</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">0.93</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">0.95</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>
<span class="w">  </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.06</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.08</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">2819380338</span><span class="w"> </span><span class="mf">2928780796.54</span><span class="w"> </span><span class="mi">3289265318</span><span class="p">]</span><span class="w"> </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">2417114451</span><span class="w"> </span><span class="mf">2747360337.61</span><span class="w"> </span><span class="mi">3380763132</span><span class="p">]</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="w"></span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2749394.66</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">1902797.53</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">0.97</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">0.99</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>
<span class="w">  </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.04</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">115751117</span><span class="w"> </span><span class="mf">134432921.19</span><span class="w"> </span><span class="mi">157572316</span><span class="p">]</span><span class="w"> </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">113527530</span><span class="w"> </span><span class="mf">131683526.53</span><span class="w"> </span><span class="mi">161295688</span><span class="p">]</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="w"></span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">76366357</span><span class="w"> </span><span class="mf">86553210.56</span><span class="w"> </span><span class="mi">97936025</span><span class="p">]</span><span class="w"> </span><span class="n">scratch</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">76233349</span><span class="w"> </span><span class="mf">85885027.75</span><span class="w"> </span><span class="mi">100047281</span><span class="p">]</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libwasmtime_bench_api</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
</code></pre></div>
<hr>
<p>However, I starting looking into how <code>StructReturn</code> was actually used, and... it isn't? Originally, we used to legalize multi-value returns into <code>StructReturn</code> (I originally wrote that code way back when) but that hasn't happened for a while. So I'm wondering: why do we even have <code>StructReturn</code> anymore? Can we completely remove it? It does seem like <code>cg_clif</code> uses it, but it isn't clear to me that <code>cg_clif</code> can't move to regular multi-value returns and let the backends' normal calling convention code handle this? Or if it needs something custom, then it can legalize calls to use struct return pointers when generating the input CLIF. It really seems like <code>StructReturn</code> is useless since cranelift isn't loading return values out of the struct-return space after the call for embedders. Literally the only special handling of it that Cranelift does is to generate a move from the struct return argument to the struct return result. Doesn't seem like this is providing much value to embedders, and it is a maintenance/performance burden for Cranelift itself...</p>
<p>Or if removing <code>StructReturn</code> is unworkable for some reason, we can probably just make it a CLIF error (and enforce this in the verifier) to have a <code>StructReturn</code> parameter but not a <code>StructReturn</code> result, so that we don't have to do this signature legalization anymore. Would prefer to completely remove <code>StructReturn</code> if possible, though.</p>
<p>cc @bjorn3 </p>
</blockquote>



<a name="292211279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234618%20Cranelift%3A%20%60ABISig%3A%3Afrom_func_sig%60.../near/292211279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234618.20Cranelift.3A.20.60ABISig.3A.3Afrom_func_sig.60.2E.2E.2E.html#292211279">(Aug 05 2022 at 21:47)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/4618#issuecomment-1206916340">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4618">issue #4618</a>:</p>
<blockquote>
<p>Updating this PR to be about removing <code>ArgumentPurpose::StructReturn</code>.</p>
<p>We used to legalize multi-value returns to using struct-return pointers where<br>
callees would store result values into the given struct-return buffer and<br>
callers would provide the struct-return buffer when calling and then load the<br>
results out of it. We haven't done that for a while and just rely on the calling<br>
convention's normal method of returning multiple values now. The only special<br>
casing that <code>ArgumentPurpose::StructReturn</code> has now is</p>
<ol>
<li>
<p>We legalize signatures that have a <code>StructReturn</code> parameter but no<br>
<code>StructReturn</code> result to add the missing <code>StructReturn</code> result</p>
</li>
<li>
<p>We automatically insert a copy from a function's <code>StructReturn</code> argument to<br>
its <code>StructReturn</code> result value</p>
</li>
</ol>
<p>This isn't really useful for Cranelift embedders anymore since it doesn't even<br>
handle putting the return values into the struct-return buffer or getting them<br>
out again, has maintenance and cruft overhead for Cranelift hackers, and the<br>
above signature legalization in (1) also imposes performance overhead on all<br>
Cranelift compiles regardless of whether they use struct returns or not. It's<br>
time we removed the vestigial <code>ArgumentPurpose::StructReturn</code>.</p>
<p>Finally, here are the Sightglass benchmark wins we get from this removal:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">214956202.90</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">31700992.96</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">0.91</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">0.94</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>
<span class="w">  </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.09</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">2765571620</span><span class="w"> </span><span class="mf">2866580329.79</span><span class="w"> </span><span class="mi">3085702646</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">2396129997</span><span class="w"> </span><span class="mf">2651624126.89</span><span class="w"> </span><span class="mi">2923726602</span><span class="p">]</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="w"></span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4176509.17</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">2835408.05</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span><span class="w"></span>

<span class="w">  </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">0.95</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">0.99</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>
<span class="w">  </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="o">!</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">115737735</span><span class="w"> </span><span class="mf">133448206.82</span><span class="w"> </span><span class="mi">149712338</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">108735836</span><span class="w"> </span><span class="mf">129271697.65</span><span class="w"> </span><span class="mi">166386156</span><span class="p">]</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="w"></span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">nanoseconds</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"></span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span><span class="w"></span>

<span class="w">  </span><span class="p">[</span><span class="mi">77356671</span><span class="w"> </span><span class="mf">85735828.56</span><span class="w"> </span><span class="mi">96331117</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
<span class="w">  </span><span class="p">[</span><span class="mi">75824588</span><span class="w"> </span><span class="mf">84176414.51</span><span class="w"> </span><span class="mi">94308652</span><span class="p">]</span><span class="w"> </span><span class="n">no</span><span class="o">-</span><span class="n">sret</span><span class="p">.</span><span class="n">so</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>