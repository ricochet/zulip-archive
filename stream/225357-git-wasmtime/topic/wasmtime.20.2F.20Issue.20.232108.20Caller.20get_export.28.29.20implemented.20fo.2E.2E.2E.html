<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2108 Caller get_export() implemented fo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html">wasmtime / Issue #2108 Caller get_export() implemented fo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="206172744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206172744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206172744">(Aug 06 2020 at 17:37)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670075156">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="206175844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206175844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206175844">(Aug 06 2020 at 18:01)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670087478">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>Thanks for the PR! Could you outline a bit the motivation for this change?</p>
<p>Our intention is to sort of keep the <code>Caller</code> type "hamstrung" for now because we don't want it to exist long-term. For now it's the only way to implement WASI APIs, but the intention is that interface types will subsume the need for this API (and we'll remove it once that's implemented and stabilized). With interface types, however, you won't have much access to the calling module's functions, so I'd be wary to enable a pretty critical piece of functionality we're inevitably going to remove.</p>
<p>In any case though I'm curious to hear more about  your use case, since we might still be able to cater to it one way or another!</p>
</blockquote>



<a name="206176804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206176804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206176804">(Aug 06 2020 at 18:08)</a>:</h4>
<p>PiotrSikora <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670091146">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>@alexcrichton @agiachris is working on a test framework for [Proxy-Wasm] modules (and hopefully WASI in the future), which uses Wasmtime as the runtime. See: <a href="https://github.com/proxy-wasm/test-framework/pull/1">https://github.com/proxy-wasm/test-framework/pull/1</a></p>
<p>[Proxy-Wasm]: <a href="https://github.com/proxy-wasm">https://github.com/proxy-wasm</a></p>
</blockquote>



<a name="206178192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206178192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206178192">(Aug 06 2020 at 18:22)</a>:</h4>
<p>PiotrSikora edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670091146">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>@alexcrichton @agiachris is working on a test framework for [Proxy-Wasm] modules (and hopefully WASI in the future), which uses Wasmtime as the runtime, and we needed a way for <code>Func::wrap()</code> hostcalls to call functions (entry points) exported from the [Proxy-Wasm] modules. See: <a href="https://github.com/proxy-wasm/test-framework/pull/1">https://github.com/proxy-wasm/test-framework/pull/1</a></p>
<p>[Proxy-Wasm]: <a href="https://github.com/proxy-wasm">https://github.com/proxy-wasm</a></p>
</blockquote>



<a name="206185549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206185549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206185549">(Aug 06 2020 at 19:23)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670146918">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>Ok thanks for the background. It looks like y'all are primarily using this to lookup the calling module's <code>malloc</code> function, right? If that's the case then that's something which interface types will enable so this seems reasonable to allow.</p>
<p>Could you also update the documentation though to leave the clause that it's only implemented for some types? Additionally can you add some words to the documentation that for functions it should in general follow the guidelines of the interface types proposal for accessing exports and calling them?</p>
<p>Finally, one thing I wanted to point out, y'all will want to be extremely careful when accessing the caller's memory. The main idea is that once you get a raw pointer into wasm memory you can't call wasm again because that pointer could get relocated. In <a href="https://github.com/proxy-wasm/test-framework/pull/1">https://github.com/proxy-wasm/test-framework/pull/1</a> the <code>proxy_get_buffer_bytes</code> export is an example where <code>malloc</code> is called while holding some pointers alive over the call to <code>malloc</code>. Where possible I'd recommend investigating <code>witx</code> and <code>wiggle</code> since they should make implementing all of these host calls with 100% safe code much easier.</p>
</blockquote>



<a name="206195082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206195082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206195082">(Aug 06 2020 at 20:50)</a>:</h4>
<p>agiachris <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670185114">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>@alexcrichton thanks for the suggestion, we will make those changes. I've gone ahead and updated the documentation for the implementation only supporting specific types (Memory and Func), however I'm unfamiliar with the interface types guidelines. Could you please suggest the necessary documentation text for this? </p>
</blockquote>



<a name="206277958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232108%20Caller%20get_export%28%29%20implemented%20fo.../near/206277958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232108.20Caller.20get_export.28.29.20implemented.20fo.2E.2E.2E.html#206277958">(Aug 07 2020 at 16:24)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2108#issuecomment-670599230">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2108">Issue #2108</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>