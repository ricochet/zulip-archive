<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6269 [C API] Enabling debug info makes ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html">wasmtime / issue #6269 [C API] Enabling debug info makes ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="352103667"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352103667" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352103667">(Apr 23 2023 at 17:48)</a>:</h4>
<p>Photosounder opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I wrote a host to run functions from WASM reactors and with one WASM module after calling one of its functions I get the following trap message:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span>:
    <span class="mi">0</span>: <span class="mh">0xeb40</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">80</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">1</span>: <span class="mh">0x1dba3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">130</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">2</span>:  <span class="mh">0x87d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">7</span><span class="o">&gt;</span>
</code></pre></div>
<p>It's rather unhelpful so I wanted to add debug information, which I thought I'd do by adding <code>wasmtime_config_debug_info_set(config, true);</code> to my code. But now that I've done this when my program runs <code>wasmtime_module_new()</code> I get this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span>: <span class="nc">range_start</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">range_end</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="err">\</span><span class="n">cranelift</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">transform</span><span class="err">\</span><span class="n">expression</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">689</span>:<span class="mi">13</span>
<span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span>:
   <span class="mi">0</span>: <span class="nc">rust_begin_unwind</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">575</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">1</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic_fmt</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">64</span>:<span class="mi">14</span>
<span class="w">   </span><span class="mi">2</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">114</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">3</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">ValueLabelRangesBuilder</span>::<span class="n">process_label</span>
<span class="w">   </span><span class="mi">4</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">CompiledExpression</span>::<span class="n">build_with_locals</span>
<span class="w">   </span><span class="mi">5</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">simulate</span>::<span class="n">generate_simulated_dwarf</span>
<span class="w">   </span><span class="mi">6</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">transform_dwarf</span>
<span class="w">   </span><span class="mi">7</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">write_debuginfo</span>::<span class="n">emit_dwarf</span>
<span class="w">   </span><span class="mi">8</span>: <span class="o">&lt;</span><span class="n">wasmtime_cranelift</span>::<span class="n">compiler</span>::<span class="n">Compiler</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime_environ</span>::<span class="n">compilation</span>::<span class="n">Compiler</span><span class="o">&gt;</span>::<span class="n">append_dwarf</span>
<span class="w">   </span><span class="mi">9</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">build_artifacts</span>
<span class="w">  </span><span class="mi">10</span>: <span class="nc">core</span>::<span class="n">ops</span>::<span class="n">function</span>::<span class="nb">FnOnce</span>::<span class="n">call_once</span>
<span class="w">  </span><span class="mi">11</span>: <span class="nc">wasmtime_cache</span>::<span class="n">ModuleCacheEntry</span>::<span class="n">get_data_raw</span>
<span class="w">  </span><span class="mi">12</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">from_binary</span>
<span class="w">  </span><span class="mi">13</span>: <span class="nc">wasmtime_module_new</span>
<span class="w">  </span><span class="mi">14</span>: <span class="nc">wasm_host</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">217</span>:<span class="mi">11</span>
<span class="w">  </span><span class="mi">15</span>: <span class="nc">rl_sdl_standard_main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">D</span>:<span class="o">/</span><span class="n">VC_libs</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">rouziclib</span><span class="o">/</span><span class="n">libraries</span><span class="o">/</span><span class="n">sdl</span><span class="p">.</span><span class="n">c</span>:<span class="mi">998</span>:<span class="mi">3</span>
<span class="w">  </span><span class="mi">16</span>: <span class="nc">main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">318</span>:<span class="mi">2</span>
</code></pre></div>
<p>I have no idea why. I compiled the WASM module (from C using wasi-sdk) with <code>-Og -g3</code>, which I'm not sure is sufficient to get the debug info needed. Here's the host program's relevant code:</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="w">    </span><span class="c1">// WASM initialisation</span>
<span class="w">    </span><span class="n">wasm_config_t</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_config_new</span><span class="p">();</span>
<span class="w">    </span><span class="n">wasmtime_config_debug_info_set</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_engine_new_with_config</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_context</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create a linker with WASI functions defined</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">);</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_define_wasi</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Load WASM file</span>
<span class="w">    </span><span class="n">buffer_t</span><span class="w"> </span><span class="n">wasm_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf_load_raw_file</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Compile WASM</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_module_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">.</span><span class="n">module</span><span class="p">);</span>
</code></pre></div>
<p>The version of Wasmtime is the <code>dev</code> build <code>wasmtime-dev-x86_64-mingw-c-api.zip</code> from the Releases from 7 hours ago.</p>
</blockquote>



<a name="352106293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352106293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352106293">(Apr 23 2023 at 18:10)</a>:</h4>
<p>Photosounder edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I wrote a host to run functions from WASM reactors and with one WASM module after calling one of its functions I get the following trap message:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span>:
    <span class="mi">0</span>: <span class="mh">0xeb40</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">80</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">1</span>: <span class="mh">0x1dba3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">130</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">2</span>:  <span class="mh">0x87d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">7</span><span class="o">&gt;</span>
</code></pre></div>
<p>It's rather unhelpful so I wanted to add debug information, which I thought I'd do by adding <code>wasmtime_config_debug_info_set(config, true);</code> to my code. But now that I've done this when my program runs <code>wasmtime_module_new()</code> I get this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span>: <span class="nc">range_start</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">range_end</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="err">\</span><span class="n">cranelift</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">transform</span><span class="err">\</span><span class="n">expression</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">689</span>:<span class="mi">13</span>
<span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span>:
   <span class="mi">0</span>: <span class="nc">rust_begin_unwind</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">575</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">1</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic_fmt</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">64</span>:<span class="mi">14</span>
<span class="w">   </span><span class="mi">2</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">114</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">3</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">ValueLabelRangesBuilder</span>::<span class="n">process_label</span>
<span class="w">   </span><span class="mi">4</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">CompiledExpression</span>::<span class="n">build_with_locals</span>
<span class="w">   </span><span class="mi">5</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">simulate</span>::<span class="n">generate_simulated_dwarf</span>
<span class="w">   </span><span class="mi">6</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">transform_dwarf</span>
<span class="w">   </span><span class="mi">7</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">write_debuginfo</span>::<span class="n">emit_dwarf</span>
<span class="w">   </span><span class="mi">8</span>: <span class="o">&lt;</span><span class="n">wasmtime_cranelift</span>::<span class="n">compiler</span>::<span class="n">Compiler</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime_environ</span>::<span class="n">compilation</span>::<span class="n">Compiler</span><span class="o">&gt;</span>::<span class="n">append_dwarf</span>
<span class="w">   </span><span class="mi">9</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">build_artifacts</span>
<span class="w">  </span><span class="mi">10</span>: <span class="nc">core</span>::<span class="n">ops</span>::<span class="n">function</span>::<span class="nb">FnOnce</span>::<span class="n">call_once</span>
<span class="w">  </span><span class="mi">11</span>: <span class="nc">wasmtime_cache</span>::<span class="n">ModuleCacheEntry</span>::<span class="n">get_data_raw</span>
<span class="w">  </span><span class="mi">12</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">from_binary</span>
<span class="w">  </span><span class="mi">13</span>: <span class="nc">wasmtime_module_new</span>
<span class="w">  </span><span class="mi">14</span>: <span class="nc">wasm_host</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">217</span>:<span class="mi">11</span>
<span class="w">  </span><span class="mi">15</span>: <span class="nc">rl_sdl_standard_main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">D</span>:<span class="o">/</span><span class="n">VC_libs</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">rouziclib</span><span class="o">/</span><span class="n">libraries</span><span class="o">/</span><span class="n">sdl</span><span class="p">.</span><span class="n">c</span>:<span class="mi">998</span>:<span class="mi">3</span>
<span class="w">  </span><span class="mi">16</span>: <span class="nc">main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">318</span>:<span class="mi">2</span>
</code></pre></div>
<p>I have no idea why. I compiled the WASM module (from C using wasi-sdk) with <code>-Og -g3</code>, which I'm not sure is sufficient to get the debug info needed. Here's the host program's relevant code:</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="w">    </span><span class="c1">// WASM initialisation</span>
<span class="w">    </span><span class="n">wasm_config_t</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_config_new</span><span class="p">();</span>
<span class="w">    </span><span class="n">wasmtime_config_debug_info_set</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_engine_new_with_config</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_context</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create a linker with WASI functions defined</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">);</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_define_wasi</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Load WASM file</span>
<span class="w">    </span><span class="n">buffer_t</span><span class="w"> </span><span class="n">wasm_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf_load_raw_file</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Compile WASM</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_module_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">.</span><span class="n">module</span><span class="p">);</span>
</code></pre></div>
<p>The version of Wasmtime is the <code>dev</code> build <code>wasmtime-dev-x86_64-mingw-c-api.zip</code> from the Releases from 7 hours ago.</p>
<p>Edit: I just checked with a .wasm module that works fine and when I enable debug info it also works fine, just not with a buggy WASM module. So it would probably help to include the fault module:<br>
<a href="https://github.com/bytecodealliance/wasmtime/files/11304495/test.zip">test.zip</a></p>
</blockquote>



<a name="352109398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352109398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352109398">(Apr 23 2023 at 18:36)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1519128571">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>See <a href="https://github.com/bytecodealliance/wasmtime/issues/3999">https://github.com/bytecodealliance/wasmtime/issues/3999</a></p>
</blockquote>



<a name="352158845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352158845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352158845">(Apr 24 2023 at 04:32)</a>:</h4>
<p>Photosounder <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1519370759">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I see, doesn't seem like I should hold my breath for a fix. So in a situation like the one described at the beginning of my post, how does one go about locating the source of the problem?</p>
</blockquote>



<a name="352164147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352164147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352164147">(Apr 24 2023 at 05:17)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1519398694">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>The state-of-the-art is unfortunately "printf debugging" in cases like this. The situation described <a href="https://github.com/bytecodealliance/wasmtime/issues/4669#issuecomment-1210997950">here</a> is unfortunately still the case -- we don't have anyone who understands the existing DWARF-handling code deeply enough to attempt to fix it -- but we do at least have some discussions going in our "<a href="https://github.com/bytecodealliance/governance/blob/main/SIGs/SIG-debugging/proposal.md">debugging SIG</a>" that might eventually lead to something. The bottleneck as always is engineer time...</p>
</blockquote>



<a name="352303899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352303899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352303899">(Apr 24 2023 at 15:00)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1520345543">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I'm going to close this in favor of <a href="https://github.com/bytecodealliance/wasmtime/issues/3999">https://github.com/bytecodealliance/wasmtime/issues/3999</a> since it's the same issue as that one, but thanks for the report!</p>
</blockquote>



<a name="352303900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352303900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352303900">(Apr 24 2023 at 15:00)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I wrote a host to run functions from WASM reactors and with one WASM module after calling one of its functions I get the following trap message:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span>:
    <span class="mi">0</span>: <span class="mh">0xeb40</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">80</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">1</span>: <span class="mh">0x1dba3</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">130</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">2</span>:  <span class="mh">0x87d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">7</span><span class="o">&gt;</span>
</code></pre></div>
<p>It's rather unhelpful so I wanted to add debug information, which I thought I'd do by adding <code>wasmtime_config_debug_info_set(config, true);</code> to my code. But now that I've done this when my program runs <code>wasmtime_module_new()</code> I get this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span>: <span class="nc">range_start</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">range_end</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="err">\</span><span class="n">cranelift</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">transform</span><span class="err">\</span><span class="n">expression</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">689</span>:<span class="mi">13</span>
<span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span>:
   <span class="mi">0</span>: <span class="nc">rust_begin_unwind</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">575</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">1</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic_fmt</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">64</span>:<span class="mi">14</span>
<span class="w">   </span><span class="mi">2</span>: <span class="nc">core</span>::<span class="n">panicking</span>::<span class="n">panic</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">001</span><span class="n">a77fac33f6560ff361ff38f661ff5f1c6bf85</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">114</span>:<span class="mi">5</span>
<span class="w">   </span><span class="mi">3</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">ValueLabelRangesBuilder</span>::<span class="n">process_label</span>
<span class="w">   </span><span class="mi">4</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">expression</span>::<span class="n">CompiledExpression</span>::<span class="n">build_with_locals</span>
<span class="w">   </span><span class="mi">5</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">simulate</span>::<span class="n">generate_simulated_dwarf</span>
<span class="w">   </span><span class="mi">6</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">transform</span>::<span class="n">transform_dwarf</span>
<span class="w">   </span><span class="mi">7</span>: <span class="nc">wasmtime_cranelift</span>::<span class="n">debug</span>::<span class="n">write_debuginfo</span>::<span class="n">emit_dwarf</span>
<span class="w">   </span><span class="mi">8</span>: <span class="o">&lt;</span><span class="n">wasmtime_cranelift</span>::<span class="n">compiler</span>::<span class="n">Compiler</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime_environ</span>::<span class="n">compilation</span>::<span class="n">Compiler</span><span class="o">&gt;</span>::<span class="n">append_dwarf</span>
<span class="w">   </span><span class="mi">9</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">build_artifacts</span>
<span class="w">  </span><span class="mi">10</span>: <span class="nc">core</span>::<span class="n">ops</span>::<span class="n">function</span>::<span class="nb">FnOnce</span>::<span class="n">call_once</span>
<span class="w">  </span><span class="mi">11</span>: <span class="nc">wasmtime_cache</span>::<span class="n">ModuleCacheEntry</span>::<span class="n">get_data_raw</span>
<span class="w">  </span><span class="mi">12</span>: <span class="nc">wasmtime</span>::<span class="n">module</span>::<span class="n">Module</span>::<span class="n">from_binary</span>
<span class="w">  </span><span class="mi">13</span>: <span class="nc">wasmtime_module_new</span>
<span class="w">  </span><span class="mi">14</span>: <span class="nc">wasm_host</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">217</span>:<span class="mi">11</span>
<span class="w">  </span><span class="mi">15</span>: <span class="nc">rl_sdl_standard_main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">D</span>:<span class="o">/</span><span class="n">VC_libs</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="n">rouziclib</span><span class="o">/</span><span class="n">libraries</span><span class="o">/</span><span class="n">sdl</span><span class="p">.</span><span class="n">c</span>:<span class="mi">998</span>:<span class="mi">3</span>
<span class="w">  </span><span class="mi">16</span>: <span class="nc">main_loop</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">C</span>:<span class="o">/</span><span class="n">msys</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">exp</span><span class="o">/</span><span class="n">wasm_app</span><span class="o">/</span><span class="n">Wasmtime</span><span class="w"> </span><span class="n">host</span><span class="o">/</span><span class="n">wasm_host</span><span class="p">.</span><span class="n">c</span>:<span class="mi">318</span>:<span class="mi">2</span>
</code></pre></div>
<p>I have no idea why. I compiled the WASM module (from C using wasi-sdk) with <code>-Og -g3</code>, which I'm not sure is sufficient to get the debug info needed. Here's the host program's relevant code:</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="w">    </span><span class="c1">// WASM initialisation</span>
<span class="w">    </span><span class="n">wasm_config_t</span><span class="w"> </span><span class="o">*</span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_config_new</span><span class="p">();</span>
<span class="w">    </span><span class="n">wasmtime_config_debug_info_set</span><span class="p">(</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_engine_new_with_config</span><span class="p">(</span><span class="n">config</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_store_context</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">store</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Create a linker with WASI functions defined</span>
<span class="w">    </span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">);</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_linker_define_wasi</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">linker</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Load WASM file</span>
<span class="w">    </span><span class="n">buffer_t</span><span class="w"> </span><span class="n">wasm_buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buf_load_raw_file</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Compile WASM</span>
<span class="w">    </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime_module_new</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">wasm_buf</span><span class="p">.</span><span class="n">len</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">ctx</span><span class="p">.</span><span class="n">module</span><span class="p">);</span>
</code></pre></div>
<p>The version of Wasmtime is the <code>dev</code> build <code>wasmtime-dev-x86_64-mingw-c-api.zip</code> from the Releases from 7 hours ago.</p>
<p>Edit: I just checked with a .wasm module that works fine and when I enable debug info it also works fine, just not with a buggy WASM module. So it would probably help to include the fault module:<br>
<a href="https://github.com/bytecodealliance/wasmtime/files/11304495/test.zip">test.zip</a></p>
</blockquote>



<a name="352304289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352304289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352304289">(Apr 24 2023 at 15:02)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1520347992">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>I will mention though that as for your original issue you can try enabling debug information in whatever is compiled to wasm. That will generate a filename/line number in the trap backtrace which can be useful for debugging.</p>
</blockquote>



<a name="352324112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236269%20%5BC%20API%5D%20Enabling%20debug%20info%20makes%20.../near/352324112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236269.20.5BC.20API.5D.20Enabling.20debug.20info.20makes.20.2E.2E.2E.html#352324112">(Apr 24 2023 at 16:13)</a>:</h4>
<p>Photosounder <a href="https://github.com/bytecodealliance/wasmtime/issues/6269#issuecomment-1520464044">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6269">issue #6269</a>:</p>
<blockquote>
<p>Thanks, I realised that I had stripping enabled in my module compilation command. Anyway my problem was due to the module's stack size being way too small (2048 bytes), it's a shame the runtime didn't warn about this.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>