<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6985 Interp fix some simd ops · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236985.20Interp.20fix.20some.20simd.20ops.html">wasmtime / PR #6985 Interp fix some simd ops</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="390027868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236985%20Interp%20fix%20some%20simd%20ops/near/390027868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236985.20Interp.20fix.20some.20simd.20ops.html#390027868">(Sep 09 2023 at 11:49)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6985">PR #6985</a> from <code>afonso360:interp-fix-some-simd-ops</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR fixes the <code>v{all,any}_true</code> and <code>vhigh_bits</code> for floats in the cranelift interpreter. Since these are all bitwise operations, the fix was similar for all of them, convert the type to an equivalent sized integer type and proceed with the operation as normal.</p>
<p>Additionally this PR also restricts the return types for <a href="https://docs.rs/cranelift-codegen/latest/cranelift_codegen/ir/trait.InstBuilder.html#method.vhigh_bits"><code>vhigh_bits</code></a> down to scalar integers. It currently allows returning SIMD integer types which looks like an oversight since it clearly states that it returns a scalar integer in the docs. (Let me know if you'd like me to pull this into a separate PR)</p>
<p>Finally, these instructions are also enabled in the fuzzgen fuzzer.</p>
</blockquote>



<a name="390027869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236985%20Interp%20fix%20some%20simd%20ops/near/390027869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236985.20Interp.20fix.20some.20simd.20ops.html#390027869">(Sep 09 2023 at 11:49)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6985">PR #6985</a>.</p>



<a name="390027870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236985%20Interp%20fix%20some%20simd%20ops/near/390027870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236985.20Interp.20fix.20some.20simd.20ops.html#390027870">(Sep 09 2023 at 11:49)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6985">PR #6985</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>