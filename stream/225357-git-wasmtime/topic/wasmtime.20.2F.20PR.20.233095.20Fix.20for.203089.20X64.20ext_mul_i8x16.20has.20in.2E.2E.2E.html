<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3095 Fix for 3089 X64 ext_mul_i8x16 has in... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html">wasmtime / PR #3095 Fix for 3089 X64 ext_mul_i8x16 has in...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="246394580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246394580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246394580">(Jul 18 2021 at 19:36)</a>:</h4>
<p>jlb6740 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a> from <code>fix-x64-ext_mul_i8x16</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="246397531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246397531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246397531">(Jul 18 2021 at 20:51)</a>:</h4>
<p><strong>jlb6740</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a> as ready for review.</p>



<a name="246397644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246397644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246397644">(Jul 18 2021 at 20:52)</a>:</h4>
<p>jlb6740 assigned <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a> to alexcrichton.</p>



<a name="246397651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246397651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246397651">(Jul 18 2021 at 20:52)</a>:</h4>
<p>jlb6740 assigned <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a> to alexcrichton.</p>



<a name="246463366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463366">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709620392">PR review</a>.</p>



<a name="246463367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463367">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709620392">PR review</a>.</p>



<a name="246463368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463368">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672351749">PR review comment</a>:</p>
<blockquote>
<p>This may be my lack of knowledge about the x64 backend, but the above instruction</p>
<blockquote>
<p><code>Inst::gen_move(tmp_reg, lhs, output_ty)</code></p>
</blockquote>
<p>has the destination as the first parameter (<code>tmp_reg</code> I believe) and the parameters to the instruction as the second (<code>lhs</code>).</p>
<p>Does that mean that this should be <code>dst</code> as the first parameter since that should be the destination? (or does <code>xmm_rm_r</code> behave differently in that the destination is the second parameter?)</p>
</blockquote>



<a name="246463369"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463369" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463369">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672353989">PR review comment</a>:</p>
<blockquote>
<p>Looking at the pattern matching and such, it looks like the codegen here is actually the same as-if the specialized pattern matching in this function weren't present? Basically it looks like this is generating <code>palignr; pmovsxbw</code> for each lhs/rhs, and then it's <code>pmullw</code> for the result. That looks like the same codegen as if the component operations of <code>i16x8.extmul_high_i8x16_s</code> were each translated individually.</p>
<p>If that's the case is it necessary to have a specialized pattern-match here for x64? E.g. were the wasm instructions primarily for other platforms which have a native instruction for the operation?</p>
</blockquote>



<a name="246463370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463370">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672358557">PR review comment</a>:</p>
<blockquote>
<p>Also, how come a temp register is used? It seems like the goal of <code>palignr</code> is to get the high 8 values into the low 8 values, and then the <code>pmovsxbw</code> will sign-extend the low values into 16-bit values, but looking at the intructions it seems like that can all be done with the same register?</p>
</blockquote>



<a name="246463376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246463376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246463376">(Jul 19 2021 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672359120">PR review comment</a>:</p>
<blockquote>
<p>Hm although given <code>xmm_rm_r_imm</code> it looks like the destination isn't the first argument, so I may just not know the backend here in this regard.</p>
</blockquote>



<a name="246470192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246470192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246470192">(Jul 19 2021 at 15:27)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709688172">PR review</a>.</p>



<a name="246470193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246470193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246470193">(Jul 19 2021 at 15:27)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672402953">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>This may be my lack of knowledge about the x64 backend, but the above instruction</p>
<blockquote>
<p><code>Inst::gen_move(tmp_reg, lhs, output_ty)</code></p>
</blockquote>
<p>has the destination as the first parameter (<code>tmp_reg</code> I believe) and the parameters to the instruction as the second (<code>lhs</code>).</p>
<p>Does that mean that this should be <code>dst</code> as the first parameter since that should be the destination? (or does <code>xmm_rm_r</code> behave differently in that the destination is the second parameter?)</p>
</blockquote>
<p>Yes .. good observation. gen_move is unique in this way by having the first operand as the destination. Not sure the history behind that but it is something that perhaps should be refactored to avoid confusion.<br>
</p>
</blockquote>



<a name="246471551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246471551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246471551">(Jul 19 2021 at 15:37)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709699116">PR review</a>.</p>



<a name="246471552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246471552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246471552">(Jul 19 2021 at 15:37)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672411456">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Looking at the pattern matching and such, it looks like the codegen here is actually the same as-if the specialized pattern matching in this function weren't present? Basically it looks like this is generating <code>palignr; pmovsxbw</code> for each lhs/rhs, and then it's <code>pmullw</code> for the result. That looks like the same codegen as if the component operations of <code>i16x8.extmul_high_i8x16_s</code> were each translated individually.</p>
<p>If that's the case is it necessary to have a specialized pattern-match here for x64? E.g. were the wasm instructions primarily for other platforms which have a native instruction for the operation?</p>
</blockquote>
<p>@alexcrichton Another good observation. Yes, obviously this instruction is just the combination of a 3 instruction sequence written as one. For arm these 3 instructions can be lowered efficiently more easily with this 3 instruction combination for all 3 variants, i.e.  (i16x8.extmul_high_i8x16_s, i32x4.extmul_high_i16x8_s, i64x2.extmul_high_i32x4_s) so the lowering is optimal but for x64 more optimal lowering is only available for a few of the variants. Namely i16x8.extmul_high_i8x16_s and i16x8.extmul_high_i8x16_u does not have a more optimal lowering so I end up just inlining the codegen here. In fact the mistake was simply a copy paste error in that inlining, not seeing a way to print the final codegen to triple-check,  and then not having adequate to testing to catch the mistake. For the other variants the specialized codegen I think saves an instruction or two (though I haven't counted explicitly).</p>
</blockquote>



<a name="246488311"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246488311" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246488311">(Jul 19 2021 at 17:50)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a> (assigned to alexcrichton) from <code>fix-x64-ext_mul_i8x16</code> to <code>main</code>.</p>



<a name="246491672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246491672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246491672">(Jul 19 2021 at 18:14)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672523840">PR review comment</a>:</p>
<blockquote>
<p>Ah ok! Do you think it'd be possible to structure the code such that it falls-through to the normal lowerings for non-specialized implementations, but specialized implementaitons (the other widths &gt; 8) still have pattern-matched codegen? Either way seems fine to me though</p>
</blockquote>



<a name="246491673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246491673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246491673">(Jul 19 2021 at 18:14)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709845200">PR review</a>.</p>



<a name="246496388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246496388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246496388">(Jul 19 2021 at 18:49)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709872685">PR review</a>.</p>



<a name="246496389"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246496389" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246496389">(Jul 19 2021 at 18:49)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672546801">PR review comment</a>:</p>
<blockquote>
<p>Hi @alexcrichton, I think so but I am not quite confident how to write this ... particular when there are two input registers here. What you gain is the normal benefit of code reuse but the lowering should be no more efficient than what you see here and may introduce a few more jumps. If you are ok with either way I'd prefer to just merge this fix now and refactor after a discussion with @cfallin. </p>
</blockquote>



<a name="246502395"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246502395" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246502395">(Jul 19 2021 at 19:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-709905994">PR review</a>.</p>



<a name="246502396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/246502396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#246502396">(Jul 19 2021 at 19:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r672573587">PR review comment</a>:</p>
<blockquote>
<p>Oh sure yeah, I think it's fine to land this now and refactor later (although I think some tests here would still be good)</p>
</blockquote>



<a name="247263843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247263843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247263843">(Jul 26 2021 at 21:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-715286769">PR review</a>.</p>



<a name="247263845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247263845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247263845">(Jul 26 2021 at 21:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r676947370">PR review comment</a>:</p>
<blockquote>
<p>FWIW I'm fine with this minor code duplication for now; a bigger refactor later when we have a more systematic way of writing lowering pattern-matching seems reasonable.</p>
</blockquote>



<a name="247264501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247264501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247264501">(Jul 26 2021 at 21:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-715289862">PR review</a>.</p>



<a name="247277893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247277893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247277893">(Jul 26 2021 at 23:48)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#pullrequestreview-715368528">PR review</a>.</p>



<a name="247277894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247277894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247277894">(Jul 26 2021 at 23:48)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r677017262">PR review comment</a>:</p>
<blockquote>
<p>Hi @alexcrichton, did you have in many any particular type of test in mind? There is spec tests, file tests, unit tests, and in the future fuzz testing but for proving correctness I think the spec tests have been what we've used. The unit tests help confirm encodings as long as we are confirming with as or some other tool. </p>
</blockquote>



<a name="247289494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247289494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247289494">(Jul 27 2021 at 03:04)</a>:</h4>
<p>jlb6740 deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/3095#discussion_r677017262">PR review comment</a>.</p>



<a name="247289590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233095%20Fix%20for%203089%20X64%20ext_mul_i8x16%20has%20in.../near/247289590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233095.20Fix.20for.203089.20X64.20ext_mul_i8x16.20has.20in.2E.2E.2E.html#247289590">(Jul 27 2021 at 03:06)</a>:</h4>
<p>jlb6740 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3095">PR #3095</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>