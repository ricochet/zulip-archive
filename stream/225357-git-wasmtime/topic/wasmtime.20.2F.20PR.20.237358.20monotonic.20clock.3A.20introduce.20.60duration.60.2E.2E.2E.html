<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7358 monotonic clock: introduce `duration`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html">wasmtime / PR #7358 monotonic clock: introduce `duration`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="398382613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398382613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398382613">(Oct 25 2023 at 00:55)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a> from <code>bytecodealliance:pch/monotonic-clock-duration</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Implement the interface change submitted upstream as <a href="https://github.com/WebAssembly/wasi-clocks/pull/53">https://github.com/WebAssembly/wasi-clocks/pull/53</a></p>
<blockquote>
<p>We are introducing a <code>duration</code> type because it has a distinct meaning<br>
from <code>instant</code>: an <code>instant</code> can only be compared to other <code>instant</code>s<br>
from the exact same <code>monotonic-clock</code>, whereas a <code>duration</code> represents<br>
a duration of time which can be compared to any other duration of time.</p>
</blockquote>
<blockquote>
<p>The <code>duration</code> type is motivated, in part, by a desire to reuse it to<br>
specify durations such as timeouts in other WASI proposals.</p>
</blockquote>
<blockquote>
<p>Instead of taking a boolean specifying whether the u64 is an absolute or<br>
relative time, <code>subscribe-instant</code> takes an <code>instant</code> type and<br>
<code>subscribe-duration</code> takes a <code>duration</code> type.</p>
</blockquote>
</blockquote>



<a name="398382615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398382615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398382615">(Oct 25 2023 at 00:55)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="398382616"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398382616" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398382616">(Oct 25 2023 at 00:55)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="398490032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398490032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398490032">(Oct 25 2023 at 13:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#pullrequestreview-1697414588">PR review</a>.</p>



<a name="398490033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398490033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398490033">(Oct 25 2023 at 13:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#pullrequestreview-1697414588">PR review</a>.</p>



<a name="398490034"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398490034" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398490034">(Oct 25 2023 at 13:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#discussion_r1371803045">PR review comment</a>:</p>
<blockquote>
<p>Could this method perhaps delegate to <code>subscribe_duration</code> or a similar helper once it calculates the relative desired <code>Duration</code>? Or alternatively would it be possible to directly convert between <code>when</code> and a <code>tokio::time::Instant</code>?</p>
<p>It basically felt a bit odf that the <code>Never</code> case was handled below but not here</p>
</blockquote>



<a name="398975848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398975848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398975848">(Oct 27 2023 at 22:24)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="398975861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398975861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398975861">(Oct 27 2023 at 22:24)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#pullrequestreview-1702611434">PR review</a>.</p>



<a name="398975862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398975862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398975862">(Oct 27 2023 at 22:24)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#discussion_r1375095217">PR review comment</a>:</p>
<blockquote>
<p>Thanks, I thought that over again and factored it out into a helper function.</p>
</blockquote>



<a name="398975867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398975867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398975867">(Oct 27 2023 at 22:24)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="398976332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398976332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398976332">(Oct 27 2023 at 22:30)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="398981577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/398981577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#398981577">(Oct 27 2023 at 23:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7358#pullrequestreview-1702644971">PR review</a>.</p>



<a name="399379362"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/399379362" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#399379362">(Oct 30 2023 at 21:25)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="399381428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/399381428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#399381428">(Oct 30 2023 at 21:45)</a>:</h4>
<p>pchickey has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<a name="399386797"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237358%20monotonic%20clock%3A%20introduce%20%60duration%60.../near/399386797" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237358.20monotonic.20clock.3A.20introduce.20.60duration.60.2E.2E.2E.html#399386797">(Oct 30 2023 at 22:36)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7358">PR #7358</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>