<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3266 Add a `Module::deserialize_file` method · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html">wasmtime / PR #3266 Add a `Module::deserialize_file` method</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="251251027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251251027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251251027">(Aug 30 2021 at 15:56)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/peterhuene">peterhuene</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3266">PR #3266</a>.</p>



<a name="251251028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251251028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251251028">(Aug 30 2021 at 15:56)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3266">PR #3266</a> from <code>deserialize-file</code> to <code>main</code>:</p>
<blockquote>
<p>This commit adds a new method to the <code>wasmtime::Module</code> type,<br>
<code>deserialize_file</code>. This is intended to be the same as the <code>deserialize</code><br>
method except for the serialized module is present as an on-disk file.<br>
This enables Wasmtime to internally use <code>mmap</code> to avoid copying bytes<br>
around and generally makes loading a module much faster.</p>
<p>A C API is added in this commit as well for various bindings to use this<br>
accelerated path now as well. Another option perhaps for a Rust-based<br>
API is to have an API taking a <code>File</code> itself to allow for a custom file<br>
descriptor in one way or another, but for now that's left for a possible<br>
future refactoring if we find a use case.</p>
<p>cc #3230</p>
</blockquote>



<a name="251275042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251275042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251275042">(Aug 30 2021 at 18:44)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3266">PR #3266</a> from <code>deserialize-file</code> to <code>main</code>.</p>



<a name="251281641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281641">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-741948717">PR review</a>.</p>



<a name="251281642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281642">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-741948717">PR review</a>.</p>



<a name="251281643"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281643" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281643">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698715241">PR review comment</a>:</p>
<blockquote>
<p>Same comment as above re: path to file.</p>
</blockquote>



<a name="251281644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281644">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698715083">PR review comment</a>:</p>
<blockquote>
<p>Can we include the path to the file in the context here?</p>
</blockquote>



<a name="251281645"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281645" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281645">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698715282">PR review comment</a>:</p>
<blockquote>
<p>Same comment as above re: path to file.</p>
</blockquote>



<a name="251281646"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281646" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281646">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698733110">PR review comment</a>:</p>
<blockquote>
<p>We'll definitely want to use <code>OpenOptions::share_mode</code> (with <code>FILE_SHARE_READ</code> probably)  to open the file on Windows to prevent write access to the file so another process can't write to it while we have it mapped.</p>
</blockquote>



<a name="251281647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281647">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698716614">PR review comment</a>:</p>
<blockquote>
<p>Nit: preference for <code>with_context</code> here given the <code>format!</code>?</p>
</blockquote>



<a name="251281648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281648">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698741047">PR review comment</a>:</p>
<blockquote>
<p>I think we might need <code>FILE_MAP_COPY</code> here so that if we handle any relocations in the text section, the pages become private (and backed with the page file) rather than modifying the share pages which ultimately get flushed to the backed file (the precompiled module in this case).</p>
</blockquote>



<a name="251281649"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281649" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281649">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698717022">PR review comment</a>:</p>
<blockquote>
<p>Nit: preference for <code>with_context</code> here given the <code>format!</code>?</p>
</blockquote>



<a name="251281650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281650">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698747691">PR review comment</a>:</p>
<blockquote>
<p>I think we probably want this to be <code>PAGE_EXECUTE_READ</code> with a <code>FILE_MAP_COPY</code> below.</p>
</blockquote>



<a name="251281652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281652">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698743163">PR review comment</a>:</p>
<blockquote>
<p>I'm actually really surprised this would work on Windows when the mapped file was opened <code>FILE_GENERIC_READ</code> as changing the protection level of the mapped pages would bypass file system access rights.</p>
</blockquote>



<a name="251281653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251281653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251281653">(Aug 30 2021 at 19:30)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698716874">PR review comment</a>:</p>
<blockquote>
<p>Nit: preference for <code>with_context</code> here given the <code>format!</code>?</p>
</blockquote>



<a name="251282806"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251282806" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251282806">(Aug 30 2021 at 19:39)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-742002168">PR review</a>.</p>



<a name="251282807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251282807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251282807">(Aug 30 2021 at 19:39)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698755704">PR review comment</a>:</p>
<blockquote>
<p>Doh:</p>
<blockquote>
<p>When copy-on-write access is specified, the system and process commit charge taken is for the entire view <br>
because the calling process can potentially write to every page in the view, making all pages private.</p>
</blockquote>
<p>We're going to need separate mapped views for the file, one specifically for the text section that's mapped <code>FILE_MAP_READ</code>, <code>FILE_MAP_COPY</code>, and <code>FILE_MAP_EXECUTE</code>.</p>
</blockquote>



<a name="251282922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251282922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251282922">(Aug 30 2021 at 19:40)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698755704">PR review comment</a>.</p>



<a name="251284493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251284493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251284493">(Aug 30 2021 at 19:51)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698755704">PR review comment</a>.</p>



<a name="251289963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251289963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251289963">(Aug 30 2021 at 20:28)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698741047">PR review comment</a>.</p>



<a name="251293610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251293610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251293610">(Aug 30 2021 at 20:55)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-742063515">PR review</a>.</p>



<a name="251293613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251293613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251293613">(Aug 30 2021 at 20:55)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698801995">PR review comment</a>:</p>
<blockquote>
<p>Alternatively, I think we may be able to keep the single view, but change the protection level of the text section's pages to <code>PAGE_EXECUTE_WRITECOPY</code> during relocation, provided the mapping was created with <code>PAGE_EXECUTE_READ</code>?</p>
<p>I'd have to experiment a bit.</p>
</blockquote>



<a name="251293659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251293659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251293659">(Aug 30 2021 at 20:56)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698801995">PR review comment</a>.</p>



<a name="251294168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251294168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251294168">(Aug 30 2021 at 21:00)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r698801995">PR review comment</a>.</p>



<a name="251388135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251388135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251388135">(Aug 31 2021 at 13:52)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3266">PR #3266</a> from <code>deserialize-file</code> to <code>main</code>.</p>



<a name="251388248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251388248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251388248">(Aug 31 2021 at 13:53)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-742758910">PR review</a>.</p>



<a name="251388249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251388249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251388249">(Aug 31 2021 at 13:53)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r699346430">PR review comment</a>:</p>
<blockquote>
<p>Oh this is already guarded by the <code>if</code> so this only gets executed in the error path anyway (and the closure would always be executed in this case)</p>
</blockquote>



<a name="251388315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251388315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251388315">(Aug 31 2021 at 13:53)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-742759563">PR review</a>.</p>



<a name="251388316"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251388316" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251388316">(Aug 31 2021 at 13:53)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r699346957">PR review comment</a>:</p>
<blockquote>
<p>I opted to add this context a layer above to avoid having to include it in all the error messages here (if you're ok with that since at least for now it's only called in one location)</p>
</blockquote>



<a name="251427769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251427769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251427769">(Aug 31 2021 at 17:57)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-743037601">PR review</a>.</p>



<a name="251427770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251427770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251427770">(Aug 31 2021 at 17:57)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#discussion_r699554877">PR review comment</a>:</p>
<blockquote>
<p>Excellent point.  My brain was just over zealous in seeing work done in a <code>context</code> call.</p>
</blockquote>



<a name="251428344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251428344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251428344">(Aug 31 2021 at 18:00)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3266#pullrequestreview-743040713">PR review</a>.</p>



<a name="251429082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233266%20Add%20a%20%60Module%3A%3Adeserialize_file%60%20method/near/251429082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233266.20Add.20a.20.60Module.3A.3Adeserialize_file.60.20method.html#251429082">(Aug 31 2021 at 18:05)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3266">PR #3266</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>