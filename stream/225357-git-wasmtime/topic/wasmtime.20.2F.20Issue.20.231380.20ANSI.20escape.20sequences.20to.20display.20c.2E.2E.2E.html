<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1380 ANSI escape sequences to display c... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html">wasmtime / Issue #1380 ANSI escape sequences to display c...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="191385110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191385110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191385110">(Mar 22 2020 at 07:42)</a>:</h4>
<p>samrat opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>Thanks for opening a bug report! Please answer the questions below<br>
if they're relevant and delete this text before submitting.</p>
<ul>
<li>
<p>What are the steps to reproduce the issue?</p>
<ol>
<li>Clone <a href="https://github.com/samrat/wasmtime-colored-output" target="_blank" title="https://github.com/samrat/wasmtime-colored-output">https://github.com/samrat/wasmtime-colored-output</a></li>
<li>Build the wasm file: <code>cargo build --target wasm32-wasi</code></li>
<li>Run the file with wasmtime: <code>wasmtime target/wasm32-wasi/debug/wasmtime-colored-output.wasm</code></li>
</ol>
</li>
<li>
<p>What do you expect to happen? What does actually happen? Does it panic, and<br>
  if so, with which assertion?<br>
  I expected to see colored output, the ASCII escape codes are displayed instead.</p>
</li>
<li>
<p>Which Wasmtime version / commit hash / branch are you using?<br>
<code>c202a8eea</code></p>
</li>
<li>
<p>If relevant, can you include some extra information about your environment?<br>
  (Rust version, operating system, architecture...)<br>
  ```<br>
  rustc 1.43.0-nightly (564758c4c 2020-03-08)</p>
<blockquote>
<p>uname -r                                                                                     <br>
5.5.9-arch1-2<br>
```</p>
</blockquote>
</li>
</ul>
</blockquote>



<a name="191385111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191385111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191385111">(Mar 22 2020 at 07:42)</a>:</h4>
<p>samrat labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>Thanks for opening a bug report! Please answer the questions below<br>
if they're relevant and delete this text before submitting.</p>
<ul>
<li>
<p>What are the steps to reproduce the issue?</p>
<ol>
<li>Clone <a href="https://github.com/samrat/wasmtime-colored-output" target="_blank" title="https://github.com/samrat/wasmtime-colored-output">https://github.com/samrat/wasmtime-colored-output</a></li>
<li>Build the wasm file: <code>cargo build --target wasm32-wasi</code></li>
<li>Run the file with wasmtime: <code>wasmtime target/wasm32-wasi/debug/wasmtime-colored-output.wasm</code></li>
</ol>
</li>
<li>
<p>What do you expect to happen? What does actually happen? Does it panic, and<br>
  if so, with which assertion?<br>
  I expected to see colored output, the ASCII escape codes are displayed instead.</p>
</li>
<li>
<p>Which Wasmtime version / commit hash / branch are you using?<br>
<code>c202a8eea</code></p>
</li>
<li>
<p>If relevant, can you include some extra information about your environment?<br>
  (Rust version, operating system, architecture...)<br>
  ```<br>
  rustc 1.43.0-nightly (564758c4c 2020-03-08)</p>
<blockquote>
<p>uname -r                                                                                     <br>
5.5.9-arch1-2<br>
```</p>
</blockquote>
</li>
</ul>
</blockquote>



<a name="191385208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191385208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191385208">(Mar 22 2020 at 07:46)</a>:</h4>
<p>samrat edited <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>I experienced this bug when trying to run the [QuickJS wasm] file. I have created a repo to reproduce the issue.</p>
<ul>
<li>
<p>What are the steps to reproduce the issue?</p>
<ol>
<li>Clone <a href="https://github.com/samrat/wasmtime-colored-output" target="_blank" title="https://github.com/samrat/wasmtime-colored-output">https://github.com/samrat/wasmtime-colored-output</a></li>
<li>Build the wasm file: <code>cargo build --target wasm32-wasi</code></li>
<li>Run the file with wasmtime: <code>wasmtime target/wasm32-wasi/debug/wasmtime-colored-output.wasm</code></li>
</ol>
</li>
<li>
<p>What do you expect to happen? What does actually happen? Does it panic, and<br>
  if so, with which assertion?<br>
  I expected to see colored output, the ASCII escape codes are displayed instead.</p>
</li>
<li>
<p>Which Wasmtime version / commit hash / branch are you using?<br>
<code>c202a8eea</code></p>
</li>
<li>
<p>If relevant, can you include some extra information about your environment?<br>
  (Rust version, operating system, architecture...)<br>
  ```<br>
  rustc 1.43.0-nightly (564758c4c 2020-03-08)</p>
<blockquote>
<p>uname -r                                                                                     <br>
5.5.9-arch1-2<br>
```</p>
</blockquote>
</li>
</ul>
</blockquote>



<a name="191385870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191385870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191385870">(Mar 22 2020 at 08:07)</a>:</h4>
<p>samrat <a href="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602162831" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602162831">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>Looks like this is a deliberate decision and there is a WASI issue discussing this: <a href="https://github.com/WebAssembly/WASI/issues/162" target="_blank" title="https://github.com/WebAssembly/WASI/issues/162">https://github.com/WebAssembly/WASI/issues/162</a>. I think this can be closed, given this is a known and deliberate limitation.</p>
</blockquote>



<a name="191399633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191399633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191399633">(Mar 22 2020 at 14:45)</a>:</h4>
<p>rene-fonseca <a href="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602219017" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602219017">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>The common color codes should be supported for stdout. But you can try to use stderr instead of stdout to see if it works and isn't due to some other problem. stderr should not be filtering the codes at the moment.</p>
</blockquote>



<a name="191476918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191476918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191476918">(Mar 23 2020 at 14:04)</a>:</h4>
<p>samrat <a href="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602612772" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602612772">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>Thanks @rene-fonseca. </p>
<p>This could be due to some other problem as this behaviour seems to be happening when I change to output to stderr as well.</p>
</blockquote>



<a name="191494565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231380%20ANSI%20escape%20sequences%20to%20display%20c.../near/191494565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231380.20ANSI.20escape.20sequences.20to.20display.20c.2E.2E.2E.html#191494565">(Mar 23 2020 at 15:58)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602692590" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380#issuecomment-602692590">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1380" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1380">Issue #1380</a>:</p>
<blockquote>
<p>Allowing untrusted portable code write directly to a user's terminal is not something any serious system I'm aware of has ever knowingly done before, so we're researching how we can enable this functionality in a way that protects users and provides portability. As a temporary measure, streams which are attatched to ttys, which includes both stdout and stderr, are filtered to neutralize escape sequences and problematic control characters.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>