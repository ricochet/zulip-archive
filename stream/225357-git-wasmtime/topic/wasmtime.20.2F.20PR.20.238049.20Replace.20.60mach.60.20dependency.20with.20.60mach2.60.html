<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8049 Replace `mach` dependency with `mach2` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html">wasmtime / PR #8049 Replace `mach` dependency with `mach2`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="424907213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907213">(Mar 05 2024 at 16:20)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424907214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907214">(Mar 05 2024 at 16:20)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424907216"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907216" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907216">(Mar 05 2024 at 16:20)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424907217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907217">(Mar 05 2024 at 16:20)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a> from <code>fitzgen:update-mach</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Rebase of #6164 with added audit.</p>
<p>Fixes #6000<br>
Fixes #8044</p>
</blockquote>



<a name="424907272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907272">(Mar 05 2024 at 16:21)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>Rebase of #6164 with added audit.</p>
<p>Fixes #6000<br>
Fixes #6164 <br>
Fixes #8044</p>
</blockquote>



<a name="424907303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424907303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424907303">(Mar 05 2024 at 16:21)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424913268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424913268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424913268">(Mar 05 2024 at 16:46)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#pullrequestreview-1917576579">PR review</a>.</p>



<a name="424913269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424913269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424913269">(Mar 05 2024 at 16:46)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#discussion_r1513159507">PR review comment</a>:</p>
<blockquote>
<p>The region crate used by cranelift-jit still depends on mach.</p>
</blockquote>



<a name="424914134"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424914134" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424914134">(Mar 05 2024 at 16:50)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#pullrequestreview-1917588116">PR review</a>.</p>



<a name="424914135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424914135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424914135">(Mar 05 2024 at 16:50)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#discussion_r1513166133">PR review comment</a>:</p>
<blockquote>
<p>That's fine, its not a dependency of wasmtime, and we can snip that dependency in a follow up PR if desired.</p>
</blockquote>



<a name="424915896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424915896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424915896">(Mar 05 2024 at 16:59)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#pullrequestreview-1917612880">PR review</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="424919297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424919297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424919297">(Mar 05 2024 at 17:16)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424919325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424919325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424919325">(Mar 05 2024 at 17:16)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424920734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424920734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424920734">(Mar 05 2024 at 17:24)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#pullrequestreview-1917669927">PR review</a>.</p>



<a name="424920736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424920736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424920736">(Mar 05 2024 at 17:24)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#discussion_r1513215768">PR review comment</a>:</p>
<blockquote>
<p>Looks like the region PR for moving to mach2 has been open for several months: <a href="https://github.com/darfink/region-rs/pull/27">https://github.com/darfink/region-rs/pull/27</a> And worse the last release has been from over 2 years ago and once the current version gets released, it will lock the libc crate to version 0.2.107 from 2 years ago (for OpenBSD 6.9 support, which has been EOL since May 2022. libc presumably dropped support for it because it is EOL)</p>
</blockquote>



<a name="424922848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424922848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424922848">(Mar 05 2024 at 17:35)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1979294554">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>@cfallin would you be up for fixing the aarch64 macOS build here? The last commit was too aggressive, and seems to have removed things that are still needed in <code>mach2</code>. The problem is I can't even do <code>cargo check --target ...</code> because I can't run the build scripts on my machine.</p>
</blockquote>



<a name="424924204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424924204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424924204">(Mar 05 2024 at 17:42)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1979305443">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>I can take a look, sure.</p>
</blockquote>



<a name="424929195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424929195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424929195">(Mar 05 2024 at 18:10)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424929273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424929273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424929273">(Mar 05 2024 at 18:10)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424929569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424929569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424929569">(Mar 05 2024 at 18:12)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1979359685">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>Pushed a fix; with this it <code>cargo check</code>s on macOS/aarch64. There's some weird inconsistency between the <code>exception_behavior_t</code> (a <code>c_int</code>) and the constants for the parameter (defined as <code>c_uint</code>s); got a <code>try_into</code>/<code>unwrap</code> for now.</p>
</blockquote>



<a name="424929659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424929659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424929659">(Mar 05 2024 at 18:12)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1979360785">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>Ah, but with that there is a panic at that <code>unwrap</code> during a cargo test. Looking further.</p>
</blockquote>



<a name="424934149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424934149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424934149">(Mar 05 2024 at 18:39)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="424934441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/424934441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#424934441">(Mar 05 2024 at 18:41)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1979416926">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>OK, so the issue (one issue anyway) is that <code>MACH_EXCEPTION_CODES</code> is defined as <code>0x8000_0000</code>, which works great for its <code>u32</code> type, but not the <code>i32</code> type behind <code>exception_behavior_t</code>. I had hoped this was just a C-ism and tried an <code>as</code> cast to YOLO the signedness; that now runs into a <code>SIGABRT</code> on <code>cargo test</code>. This is officially Above My macOS Knowledge and needs someone else to look at it, I think!</p>
</blockquote>



<a name="425116206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425116206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425116206">(Mar 06 2024 at 15:37)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1981156310">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>Testing locally I'm seeing something that looks like it's running into <a href="https://github.com/bytecodealliance/wasmtime/blob/bd2ea901d3fa4555ffb3b8dc73c45455fe8a4439/crates/runtime/src/sys/unix/machports.rs#L105-L108">this comment</a>, namely the bindings for <code>__Request__exception_raise_t</code> are not aligned. I don't know if the bindings are right or what's going on here, but I vaguely remember seeing in the past another project define the type locally and use 64-bit values as well.</p>
</blockquote>



<a name="425116302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425116302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425116302">(Mar 06 2024 at 15:37)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1981157277">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>Notably the <code>mach2</code> crate uses <code>integer_t</code> there, which is <code>i32</code>, not <code>i64</code>.</p>
</blockquote>



<a name="425451160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425451160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425451160">(Mar 08 2024 at 05:36)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="425451218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425451218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425451218">(Mar 08 2024 at 05:37)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8049#issuecomment-1985069051">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>:</p>
<blockquote>
<p>I've pushed a commit which passes tests locally by copying over the copy of the struct that we have today and additionally queues up all tests to run in CI.</p>
</blockquote>



<a name="425451600"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425451600" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425451600">(Mar 08 2024 at 05:42)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<a name="425554286"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238049%20Replace%20%60mach%60%20dependency%20with%20%60mach2%60/near/425554286" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238049.20Replace.20.60mach.60.20dependency.20with.20.60mach2.60.html#425554286">(Mar 08 2024 at 16:46)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8049">PR #8049</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>