<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7666 One-click guest profiler results · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237666.20One-click.20guest.20profiler.20results.html">wasmtime / issue #7666 One-click guest profiler results</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="406850424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237666%20One-click%20guest%20profiler%20results/near/406850424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237666.20One-click.20guest.20profiler.20results.html#406850424">(Dec 08 2023 at 22:49)</a>:</h4>
<p><a href="https://github.com/jameysharp">jameysharp</a> added the enhancement label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7666">Issue #7666</a>.</p>



<a name="406850425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237666%20One-click%20guest%20profiler%20results/near/406850425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237666.20One-click.20guest.20profiler.20results.html#406850425">(Dec 08 2023 at 22:49)</a>:</h4>
<p><a href="https://github.com/jameysharp">jameysharp</a> added the wasmtime label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7666">Issue #7666</a>.</p>



<a name="406850427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237666%20One-click%20guest%20profiler%20results/near/406850427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237666.20One-click.20guest.20profiler.20results.html#406850427">(Dec 08 2023 at 22:49)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7666">issue #7666</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>When invoking the guest profiler via either its <code>GuestProfiler</code> Rust API or the Wasmtime CLI, we should provide the option of running a local web server to serve profile data, then generating links to <a href="https://profiler.firefox.com/">https://profiler.firefox.com/</a> that direct it to load the profile data directly from the local web server.</p>
<h4>Benefit</h4>
<p>Currently, we write the profile data to a file, then tell the user the path to that file. They then browse to <a href="https://profiler.firefox.com/">https://profiler.firefox.com/</a> and use their browser's file-open dialog to find the path we told them. It would be more convenient to give them a single URL which automatically loads the profile data.</p>
<p>Running a local web server also allows us to symbolicate lazily and serve source code to the viewer on-demand, in principle.</p>
<h4>Implementation</h4>
<p>The Samply profiler illustrates how to do this, in <a href="https://github.com/mstange/samply/blob/main/samply/src/server.rs">https://github.com/mstange/samply/blob/main/samply/src/server.rs</a>.</p>
<h4>Alternatives</h4>
<p>We could continue just writing the profile to a file and letting the user find it in their filesystem.</p>
<p>I was hesitant to suggest doing this in Wasmtime before because it means we need to depend on an HTTP server like <code>hyper</code>. I thought it would be better to implement the parts which depend on a web server in embedders such as Viceroy that have their own web server. But now that we've implemented wasi-http, Wasmtime depends on <code>hyper</code> anyway, so we might as well do it in Wasmtime where it can be shared across multiple embedders.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>