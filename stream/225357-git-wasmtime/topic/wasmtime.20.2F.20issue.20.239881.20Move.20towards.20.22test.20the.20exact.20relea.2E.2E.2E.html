<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9881 Move towards &quot;test the exact relea... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239881.20Move.20towards.20.22test.20the.20exact.20relea.2E.2E.2E.html">wasmtime / issue #9881 Move towards &quot;test the exact relea...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="490194271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239881%20Move%20towards%20%22test%20the%20exact%20relea.../near/490194271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239881.20Move.20towards.20.22test.20the.20exact.20relea.2E.2E.2E.html#490194271">(Dec 20 2024 at 16:30)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9881">issue #9881</a>:</p>
<blockquote>
<p>In yesterday's Wasmtime meeting we had a discussion about testing, CI, and the artifacts that we produce. Currently the actual released artifacts are not actually tested in CI at all, they're simply produced. This isn't a great situation and ideally we would test the exact artifacts that CI produces rather than a different build configuration.</p>
<p>There's a few challenges to tackle when handling this though:</p>
<ul>
<li>Most of the test suite is not architected to run the <code>wasmtime</code> CLI or the <code>libwasmtime.so</code> C API. Some of <code>tests/all/cli_tests.rs</code> runs the <code>wasmtime</code> executable, but the executable is produced as part of <code>cargo test</code> and isn't a released artifact. The C API is only tested through the C examples (so very lightly).</li>
<li>Testing artifacts might require a different command to execute or new infrastructure other than <code>cargo test</code>. It's unclear what this infrastructure would look like.</li>
<li>Testing "all possible configurations" isn't feasible, even with the generous concurrency that we already have. For example we can't test the matrix of {platform, opt/debug, debug-asserts/no, crate} in CI as that would be too much.</li>
</ul>
<p>We didn't reach many firm conclusions in the meeting but I wanted to open a follow-up issue to track further progress. A few points we did identify were:</p>
<ul>
<li>We should probably have one CI job test with <code>--release</code> to test with optimizations (just one platform though, probably not all of them)</li>
<li>We should ideally run at least a "smoke test" for released artifacts. </li>
</ul>
<p>cc @tschneidereit </p>
</blockquote>



<a name="494201565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239881%20Move%20towards%20%22test%20the%20exact%20relea.../near/494201565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239881.20Move.20towards.20.22test.20the.20exact.20relea.2E.2E.2E.html#494201565">(Jan 16 2025 at 17:41)</a>:</h4>
<p><a href="https://github.com/abrown">abrown</a> added the ci label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9881">Issue #9881</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>