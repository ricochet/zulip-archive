<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7323 wasmtime 14.0.0 regression test fa... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html">wasmtime / issue #7323 wasmtime 14.0.0 regression test fa...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="397894500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/397894500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#397894500">(Oct 22 2023 at 01:42)</a>:</h4>
<p>chenrui333 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>With 14.0.0 release, the <code>wasmtime xx.wasm --invoke xx</code> seems not working</p>
<p>relates to <a href="https://github.com/Homebrew/homebrew-core/pull/151945">https://github.com/Homebrew/homebrew-core/pull/151945</a></p>
</blockquote>



<a name="397896273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/397896273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#397896273">(Oct 22 2023 at 02:08)</a>:</h4>
<p>chenrui333 <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1773971836">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>looks like the error status also has some issue as well</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">  </span><span class="o">==&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">clang</span><span class="w"> </span><span class="n">hello</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">homebrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="mf">14.0.0</span><span class="o">/</span><span class="n">include</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">homebrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="mf">14.0.0</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">lwasmtime</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">hello</span>
<span class="w">  </span><span class="o">==&gt;</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">hello</span>
<span class="w">  </span><span class="n">Assertion</span><span class="w"> </span><span class="n">failed</span>: <span class="p">(</span><span class="n">file</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">NULL</span><span class="p">),</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="n">main</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">hello</span><span class="p">.</span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="mf">33.</span>
<span class="w">  </span><span class="n">Initializing</span><span class="o">..</span><span class="p">.</span>
<span class="w">  </span><span class="n">Error</span>: <span class="nc">wasmtime</span>: <span class="nc">failed</span>
<span class="w">  </span><span class="n">An</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">occurred</span><span class="w"> </span><span class="n">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">child</span><span class="w"> </span><span class="n">process</span>:
    <span class="nc">Minitest</span>::<span class="n">Assertion</span>: <span class="nc">Expected</span>: <span class="mi">0</span>
<span class="w">    </span><span class="n">Actual</span>: <span class="nc">nil</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="397900953"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/397900953" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#397900953">(Oct 22 2023 at 03:22)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1773981355">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>Thanks for the report! This was a feature that was changed <a href="https://github.com/bytecodealliance/wasmtime/blob/main/RELEASES.md#1400">in the 14.0.0 release</a>, specifically the way CLI arguments are parsed.</p>
<p>Previously where <code>wasmtime xx.wasm --invoke xx</code> worked you'll now need to do <code>wasmtime --invoke xx xx.wasm</code>. If you change to placing the Wasmtime-related arguments before the wasm module itself, does it work for you?</p>
</blockquote>



<a name="397939914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/397939914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#397939914">(Oct 22 2023 at 12:06)</a>:</h4>
<p>chenrui333 <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1774076218">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>@alexcrichton that is not work for me</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">==&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">homebrew</span><span class="o">/</span><span class="n">Cellar</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="mf">14.0.0</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">/</span><span class="n">private</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="mi">20231022</span><span class="o">-</span><span class="mi">20896</span><span class="o">-</span><span class="mi">1</span><span class="n">uab29w</span><span class="o">/</span><span class="n">sum</span><span class="p">.</span><span class="n">wasm</span>
<span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">file</span>: <span class="mi">1</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="nc">No</span><span class="w"> </span><span class="n">such</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">directory</span><span class="w"> </span><span class="p">(</span><span class="n">os</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>this used to work <code>==&gt; /opt/homebrew/Cellar/wasmtime/14.0.0/bin/wasmtime /private/tmp/wasmtime-test-20231022-20896-1uab29w/sum.wasm --invoke sum 1 2</code></p>
</blockquote>



<a name="397939937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/397939937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#397939937">(Oct 22 2023 at 12:06)</a>:</h4>
<p>chenrui333 <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1774076305">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>and what about this issue?</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Minitest</span>::<span class="n">Assertion</span>: <span class="nc">Expected</span>: <span class="mi">0</span>
<span class="w">    </span><span class="n">Actual</span>: <span class="nc">nil</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="398099786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/398099786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#398099786">(Oct 23 2023 at 14:38)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1775354406">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>I believe you'll change that to <code>wasmtime --invoke sum foo.wasm 1 2</code> to work correctly. Arguments to the wasm come after the wasm, not before. Arguments to Wasmtime must come before the wasm.</p>
<p>I don't know what minitest is or what that assertion is about, so sorry I can't help you there.</p>
</blockquote>



<a name="398162949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/398162949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#398162949">(Oct 23 2023 at 22:12)</a>:</h4>
<p>chenrui333 <a href="https://github.com/bytecodealliance/wasmtime/issues/7323#issuecomment-1776103961">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<blockquote>
<p>I believe you'll change that to <code>wasmtime --invoke sum foo.wasm 1 2</code> to work correctly. Arguments to the wasm come after the wasm, not before. Arguments to Wasmtime must come before the wasm.</p>
</blockquote>
<p>thanks, this helps my test. appreciate it.</p>
</blockquote>



<a name="398162950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237323%20wasmtime%2014.0.0%20regression%20test%20fa.../near/398162950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237323.20wasmtime.2014.2E0.2E0.20regression.20test.20fa.2E.2E.2E.html#398162950">(Oct 23 2023 at 22:12)</a>:</h4>
<p>chenrui333 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/7323">issue #7323</a>:</p>
<blockquote>
<p>With 14.0.0 release, the <code>wasmtime xx.wasm --invoke xx</code> seems not working</p>
<p>relates to <a href="https://github.com/Homebrew/homebrew-core/pull/151945">https://github.com/Homebrew/homebrew-core/pull/151945</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>