<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1753 impl From&lt;anyhow::Error&gt; for Trap · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html">wasmtime / PR #1753 impl From&lt;anyhow::Error&gt; for Trap</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="198694671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/198694671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#198694671">(May 25 2020 at 19:00)</a>:</h4>
<p>leoyvens opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="198960528"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/198960528" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#198960528">(May 27 2020 at 22:16)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="198961079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/198961079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#198961079">(May 27 2020 at 22:22)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="199176043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199176043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199176043">(May 29 2020 at 16:12)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421092401">PR Review</a>.</p>



<a name="199176044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199176044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199176044">(May 29 2020 at 16:12)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421092401">PR Review</a>.</p>



<a name="199176045"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199176045" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199176045">(May 29 2020 at 16:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432589489">PR Review Comment</a>:</p>
<blockquote>
<p>I think here it's best to leave this as <code>&amp;str</code>. I don't think this is too too useful as an API and we can honestly probably remove it.</p>
<p>If this remains I think this should return a simple canned string for user-provided errors, since users of <code>Trap</code> need to be aware anyway that there's multiple ways to create a <code>Trap</code>.</p>
</blockquote>



<a name="199176046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199176046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199176046">(May 29 2020 at 16:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432588683">PR Review Comment</a>:</p>
<blockquote>
<p>I don't think this quite what we want because the semantics of <code>anyhow</code> is that it searches the entire chain of errors and returns <code>Trap</code> if anything is a <code>Trap</code>, which means that this can lose context.</p>
</blockquote>



<a name="199176047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199176047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199176047">(May 29 2020 at 16:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432589975">PR Review Comment</a>:</p>
<blockquote>
<p>Since the error itself is printed as part of <code>Display</code> I think this will want to call <code>e.source()</code> since the <code>Trap</code> already represents the top-level error.</p>
</blockquote>



<a name="199192383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199192383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199192383">(May 29 2020 at 18:20)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="199195568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195568">(May 29 2020 at 18:46)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421202029">PR Review</a>.</p>



<a name="199195570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195570">(May 29 2020 at 18:46)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432671992">PR Review Comment</a>:</p>
<blockquote>
<p>Makes sense, did that.</p>
</blockquote>



<a name="199195604"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195604" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195604">(May 29 2020 at 18:47)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="199195686"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195686" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195686">(May 29 2020 at 18:47)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421202687">PR Review</a>.</p>



<a name="199195687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195687">(May 29 2020 at 18:47)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432672504">PR Review Comment</a>:</p>
<blockquote>
<p>I've removed this fn since I agree it's not a useful API. I changed all tests using it to test for <code>trap.to_string().contains("...")</code> </p>
</blockquote>



<a name="199195809"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195809" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195809">(May 29 2020 at 18:48)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421203055">PR Review</a>.</p>



<a name="199195810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199195810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199195810">(May 29 2020 at 18:48)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432672800">PR Review Comment</a>:</p>
<blockquote>
<p>Good point, I was not aware of this. I made this impl delegate to the <code>Box&lt;dyn Error + Send + Sync&gt;</code> one, and used the std error <code>downcast_ref</code> there.</p>
</blockquote>



<a name="199196765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199196765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199196765">(May 29 2020 at 18:56)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="199196817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199196817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199196817">(May 29 2020 at 18:57)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#pullrequestreview-421208629">PR Review</a>.</p>



<a name="199196819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199196819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199196819">(May 29 2020 at 18:57)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/1753#discussion_r432677069">PR Review Comment</a>:</p>
<blockquote>
<p>It seems that the most important place where this was used was the C api <code>wasm_trap_message</code>. I've switched that to <code>to_string()</code> if that's ok.</p>
</blockquote>



<a name="199201929"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199201929" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199201929">(May 29 2020 at 19:38)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a> from <code>from-error-for-trap</code> to <code>master</code>:</p>
<blockquote>
<p>This is useful for using <code>?</code> in functions exported from the host which return <code>Result&lt;_, Trap&gt;</code>.</p>
</blockquote>



<a name="199207515"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231753%20impl%20From%3Canyhow%3A%3AError%3E%20for%20Trap/near/199207515" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231753.20impl.20From.3Canyhow.3A.3AError.3E.20for.20Trap.html#199207515">(May 29 2020 at 20:24)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1753">PR #1753</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>