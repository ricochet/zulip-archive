<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9977 fix: `no_std` fix use without `unwind` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html">wasmtime / PR #9977 fix: `no_std` fix use without `unwind`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="492943191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/492943191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#492943191">(Jan 10 2025 at 12:46)</a>:</h4>
<p>JonasKruckenberg opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9977">PR #9977</a> from <code>JonasKruckenberg:jonas/no_std/no-unwind-feat</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>As part of no_std support in cranelift this PR fixes uses of the <code>isa/unwind</code> module through <code>cranelift</code> so that <code>cranelift</code> can be compiled with the <code>unwind</code> feature (which depends on <code>stdlib</code> through <code>gimli</code>) disabled.</p>
</blockquote>



<a name="492943193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/492943193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#492943193">(Jan 10 2025 at 12:46)</a>:</h4>
<p><strong>JonasKruckenberg</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9977">PR #9977</a>.</p>



<a name="492943195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/492943195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#492943195">(Jan 10 2025 at 12:46)</a>:</h4>
<p><strong>JonasKruckenberg</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9977">PR #9977</a>.</p>



<a name="492968648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/492968648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#492968648">(Jan 10 2025 at 15:05)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#pullrequestreview-2542667759">PR review</a>.</p>



<a name="492968655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/492968655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#492968655">(Jan 10 2025 at 15:05)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#discussion_r1910500760">PR review comment</a>:</p>
<blockquote>
<p>Maybe <code>compute_value_labels_ranges</code> should be made to <code>return ValueLabelsRanges::default();</code> when the unwind feature is disabled? Except for values which just so happen to be in registers, I don't think it is possible to generate valid debuginfo for locals when the unwind table is not also emitted.</p>
</blockquote>



<a name="493030120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/493030120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#493030120">(Jan 10 2025 at 21:43)</a>:</h4>
<p>SingleAccretion submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#pullrequestreview-2543990702">PR review</a>.</p>



<a name="493030121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/493030121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#493030121">(Jan 10 2025 at 21:43)</a>:</h4>
<p>SingleAccretion created <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#discussion_r1911468504">PR review comment</a>:</p>
<blockquote>
<p>Arguably, the register values are just as 'meaningless' in the no-unwind case as you need the unwind info to recover them (unless you are willing to disassemble code to guide your unwinder). Ultimately, the debug info production 'feature' is tightly coupled to the unwinding feature.</p>
</blockquote>



<a name="493325620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/493325620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#493325620">(Jan 13 2025 at 11:26)</a>:</h4>
<p>JonasKruckenberg updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9977">PR #9977</a>.</p>



<a name="493325875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/493325875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#493325875">(Jan 13 2025 at 11:27)</a>:</h4>
<p>JonasKruckenberg submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#pullrequestreview-2546358823">PR review</a>.</p>



<a name="493325876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239977%20fix%3A%20%60no_std%60%20fix%20use%20without%20%60unwind%60/near/493325876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239977.20fix.3A.20.60no_std.60.20fix.20use.20without.20.60unwind.60.html#493325876">(Jan 13 2025 at 11:27)</a>:</h4>
<p>JonasKruckenberg created <a href="https://github.com/bytecodealliance/wasmtime/pull/9977#discussion_r1913043358">PR review comment</a>:</p>
<blockquote>
<p>I marked <code>compute_value_labels_ranges</code> as available with the <code>unwind</code> feature too and made the <code>Default</code> changes at its only callsite, I think that's clearer than having the function exist but return a meaningless default value.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>