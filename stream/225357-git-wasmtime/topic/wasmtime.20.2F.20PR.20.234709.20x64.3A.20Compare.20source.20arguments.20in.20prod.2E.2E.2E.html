<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4709 x64: Compare source arguments in prod... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html">wasmtime / PR #4709 x64: Compare source arguments in prod...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="293592120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293592120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293592120">(Aug 15 2022 at 17:49)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4709">PR #4709</a> from <code>trevor/produces-const-bug</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="293593333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293593333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293593333">(Aug 15 2022 at 17:57)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4709#pullrequestreview-1073005196">PR review</a>.</p>



<a name="293593881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293593881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293593881">(Aug 15 2022 at 18:00)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/4709">PR #4709</a> from <code>trevor/produces-const-bug</code> to <code>main</code>:</p>
<blockquote>
<p>This PR changes the behavior of <code>produces_const</code> in the x64 backend to check that the two source registers are the same, rather than check that the second source and destination are the same. The reason for this change is a mismatch in behavior between the ISLE constructors for those pseudo instructions and the existing rust functions for constructing them: the rust functions always ensure that the first source and destination registers are the same, while the isle functions introduce a fresh destination register and take the two sources as arguments.</p>
<p>This change preserves the existing behavior for instructions constructed through the rust functions, but allows the lower.isle to use instructions like <code>(x64_xor x x)</code> where <code>x</code> is a fresh register without causing a panic in RA2.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="293594059"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293594059" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293594059">(Aug 15 2022 at 18:01)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/4709">PR #4709</a> as ready for review.</p>



<a name="293601568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293601568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293601568">(Aug 15 2022 at 18:51)</a>:</h4>
<p>elliottt has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/4709">PR #4709</a>.</p>



<a name="293603093"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234709%20x64%3A%20Compare%20source%20arguments%20in%20prod.../near/293603093" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234709.20x64.3A.20Compare.20source.20arguments.20in.20prod.2E.2E.2E.html#293603093">(Aug 15 2022 at 19:00)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4709">PR #4709</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>