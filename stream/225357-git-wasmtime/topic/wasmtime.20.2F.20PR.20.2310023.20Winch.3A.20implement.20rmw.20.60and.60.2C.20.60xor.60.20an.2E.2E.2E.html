<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10023 Winch: implement rmw `and`, `xor` an... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html">wasmtime / PR #10023 Winch: implement rmw `and`, `xor` an...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="494121169"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494121169" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494121169">(Jan 16 2025 at 11:23)</a>:</h4>
<p>MarinPostma edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494186312"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494186312" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494186312">(Jan 16 2025 at 16:21)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494188397"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494188397" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494188397">(Jan 16 2025 at 16:31)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494190776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494190776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494190776">(Jan 16 2025 at 16:43)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494195424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494195424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494195424">(Jan 16 2025 at 17:07)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494244114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494244114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494244114">(Jan 16 2025 at 22:26)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#pullrequestreview-2557517159">PR review</a>:</p>
<blockquote>
<p>Winch pieces look good to me, modulo the panic comment below. </p>
</blockquote>



<a name="494244115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494244115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494244115">(Jan 16 2025 at 22:26)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#discussion_r1919318072">PR review comment</a>:</p>
<blockquote>
<p>I don't see an issue with exposing this. However, given that I'm not deeply familiar with the history of x64 backend in Cranelift, I'll kindly ask @cfallin for confirmation. </p>
</blockquote>



<a name="494244116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494244116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494244116">(Jan 16 2025 at 22:26)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#discussion_r1919307438">PR review comment</a>:</p>
<blockquote>
<p>Could you return an error here instead of panicking?</p>
</blockquote>



<a name="494245723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494245723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494245723">(Jan 16 2025 at 22:37)</a>:</h4>
<p>MarinPostma submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#pullrequestreview-2557552760">PR review</a>.</p>



<a name="494245724"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494245724" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494245724">(Jan 16 2025 at 22:37)</a>:</h4>
<p>MarinPostma created <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#discussion_r1919329125">PR review comment</a>:</p>
<blockquote>
<p>does it make sense to return an error here? we explicitely check that we only match the right variants above, this branch should be legitmately unreachable. No <code>CodeGenError</code> seem to correspond, so I was reluctant to add an error variant for a trivially unreachable statement.</p>
</blockquote>



<a name="494247306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494247306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494247306">(Jan 16 2025 at 22:49)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#pullrequestreview-2557567699">PR review</a>.</p>



<a name="494247307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494247307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494247307">(Jan 16 2025 at 22:49)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#discussion_r1919338883">PR review comment</a>:</p>
<blockquote>
<p>Yeah you're right, it's probably fine as is. I'm trying to error on the side of caution when it comes to panics, because we've put a lot of effort to make sure that they are minimal, particularly if they affect partial development of features at the visitor/masm layer. Here I got confused by the nested match which led me to think that we were missing an implementation. </p>
</blockquote>



<a name="494443855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494443855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494443855">(Jan 17 2025 at 21:32)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#pullrequestreview-2560019050">PR review</a>.</p>



<a name="494443905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494443905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494443905">(Jan 17 2025 at 21:33)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#issuecomment-2599252171">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>:</p>
<blockquote>
<p>@MarinPostma just a heads up that there are a couple of conflicts that need to be resolved before merging. </p>
</blockquote>



<a name="494510268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494510268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494510268">(Jan 18 2025 at 11:41)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494511234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494511234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494511234">(Jan 18 2025 at 11:53)</a>:</h4>
<p>MarinPostma updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<a name="494511272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494511272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494511272">(Jan 18 2025 at 11:53)</a>:</h4>
<p>MarinPostma <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#issuecomment-2599686297">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>:</p>
<blockquote>
<p>@saulecabrera I squashed to make conflict resolution more manageable</p>
</blockquote>



<a name="494650228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494650228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494650228">(Jan 19 2025 at 15:17)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10023#pullrequestreview-2561032390">PR review</a>.</p>



<a name="494651871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310023%20Winch%3A%20implement%20rmw%20%60and%60%2C%20%60xor%60%20an.../near/494651871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310023.20Winch.3A.20implement.20rmw.20.60and.60.2C.20.60xor.60.20an.2E.2E.2E.html#494651871">(Jan 19 2025 at 15:37)</a>:</h4>
<p>saulecabrera merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10023">PR #10023</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>