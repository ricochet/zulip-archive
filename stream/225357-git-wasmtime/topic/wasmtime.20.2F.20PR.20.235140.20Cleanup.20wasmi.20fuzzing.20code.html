<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5140 Cleanup wasmi fuzzing code · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html">wasmtime / PR #5140 Cleanup wasmi fuzzing code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="306474990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306474990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306474990">(Oct 27 2022 at 15:28)</a>:</h4>
<p>Robbepop edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a> from <code>rf-cleanup-wasmi-fuzzer</code> to <code>main</code>:</p>
<blockquote>
<p>Just some minor clean ups to the <code>wasmi</code> fuzzer code.<br>
Unfortunately due to compilation/linkage problems with the OCaml based spec interpreter I could not run the fuzz tests locally so there might be bugs that I have to fix ... :/</p>
<p>Can we run fuzz tests via CI?</p>
</blockquote>



<a name="306478932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306478932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306478932">(Oct 27 2022 at 15:46)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158551435">PR review</a>.</p>



<a name="306478933"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306478933" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306478933">(Oct 27 2022 at 15:46)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007060354">PR review comment</a>:</p>
<blockquote>
<p>Does this work? I like having a separate <code>unwrap</code> for each failure case so they generate different panic messages. (<code>rustfmt</code> will probably disagree with my formatting, I'm just typing in the GitHub web UI here.)</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        Some(self.instance
            .get_export(&amp;self.store, name)
            .unwrap()
            .into_global()
            .unwrap()
            .get(&amp;self.store)
            .into())
</code></pre></div>
<p>If that works, I'd do the same in <code>get_memory</code> and at the top of <code>evaluate</code>.</p>
</blockquote>



<a name="306478934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306478934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306478934">(Oct 27 2022 at 15:46)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158551435">PR review</a>.</p>



<a name="306479318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306479318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306479318">(Oct 27 2022 at 15:48)</a>:</h4>
<p>Robbepop created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007076362">PR review comment</a>:</p>
<blockquote>
<p>haha this actually looks even cleaner to me somehow ... <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> will apply those changes to both sites</p>
</blockquote>



<a name="306479319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306479319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306479319">(Oct 27 2022 at 15:48)</a>:</h4>
<p>Robbepop submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158576614">PR review</a>.</p>



<a name="306479446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306479446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306479446">(Oct 27 2022 at 15:48)</a>:</h4>
<p>Robbepop edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007076362">PR review comment</a>.</p>



<a name="306487559"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306487559" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306487559">(Oct 27 2022 at 16:26)</a>:</h4>
<p>Robbepop updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a> from <code>rf-cleanup-wasmi-fuzzer</code> to <code>main</code>.</p>



<a name="306498872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306498872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306498872">(Oct 27 2022 at 17:18)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158688576">PR review</a>.</p>



<a name="306498873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306498873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306498873">(Oct 27 2022 at 17:18)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158688576">PR review</a>.</p>



<a name="306498874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306498874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306498874">(Oct 27 2022 at 17:18)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007153559">PR review comment</a>:</p>
<blockquote>
<p>I just noticed, I think you meant to call this function "trap_code" rather than "tap_code".</p>
</blockquote>



<a name="306498876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306498876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306498876">(Oct 27 2022 at 17:18)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007154418">PR review comment</a>:</p>
<blockquote>
<p>Does <code>rustfmt</code> insist on a trailing comma here or can you delete that?</p>
</blockquote>



<a name="306498877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306498877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306498877">(Oct 27 2022 at 17:18)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007155679">PR review comment</a>:</p>
<blockquote>
<p>I'd suggest the same multi-unwrap pattern here too:</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            .unwrap()
            .into_func()
            .unwrap();
</code></pre></div><br>
</p>
</blockquote>



<a name="306499271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306499271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306499271">(Oct 27 2022 at 17:20)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1158706933">PR review</a>.</p>



<a name="306499272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306499272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306499272">(Oct 27 2022 at 17:20)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1007166407">PR review comment</a>:</p>
<blockquote>
<p>According to CI, <code>rustfmt</code> is insisting on adding a trailing comma to the other use of <code>Some</code>. So I guess that answers my question, although not in the direction I was hoping for <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
</blockquote>



<a name="306512040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306512040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306512040">(Oct 27 2022 at 18:29)</a>:</h4>
<p>Robbepop updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a> from <code>rf-cleanup-wasmi-fuzzer</code> to <code>main</code>.</p>



<a name="306797539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306797539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306797539">(Oct 29 2022 at 07:35)</a>:</h4>
<p>Robbepop updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a> from <code>rf-cleanup-wasmi-fuzzer</code> to <code>main</code>.</p>



<a name="306797547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306797547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306797547">(Oct 29 2022 at 07:35)</a>:</h4>
<p>Robbepop submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1160938497">PR review</a>.</p>



<a name="306797549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306797549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306797549">(Oct 29 2022 at 07:35)</a>:</h4>
<p>Robbepop created <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#discussion_r1008654020">PR review comment</a>:</p>
<blockquote>
<p>good find! fixed it</p>
</blockquote>



<a name="306929373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/306929373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#306929373">(Oct 30 2022 at 08:51)</a>:</h4>
<p>Robbepop updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a> from <code>rf-cleanup-wasmi-fuzzer</code> to <code>main</code>.</p>



<a name="307187483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/307187483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#307187483">(Oct 31 2022 at 19:41)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5140#pullrequestreview-1162444988">PR review</a>.</p>



<a name="307187628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235140%20Cleanup%20wasmi%20fuzzing%20code/near/307187628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235140.20Cleanup.20wasmi.20fuzzing.20code.html#307187628">(Oct 31 2022 at 19:42)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5140">PR #5140</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>