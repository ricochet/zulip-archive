<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9180 Do not deallocate disabled GC heaps v... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html">wasmtime / PR #9180 Do not deallocate disabled GC heaps v...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="465832510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465832510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465832510">(Aug 28 2024 at 19:03)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a> from <code>fitzgen:dont-dealloc-disabled-gc-heap</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>When the reference types proposal is disabled, we don't allocate a GC heap from the instance allocator, we instead create a <code>DisabledGcHeap</code>. Rather than returning this to the instance allocator when we're done with it, which won't even know what to do with it since the instance allocator didn't create the GC heap, we simply rely on the <code>DisabledGcHeap</code>'s <code>Drop</code> implementation.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="465832513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465832513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465832513">(Aug 28 2024 at 19:03)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a>.</p>



<a name="465832514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465832514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465832514">(Aug 28 2024 at 19:03)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a>.</p>



<a name="465839815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465839815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465839815">(Aug 28 2024 at 19:54)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9180#pullrequestreview-2267140763">PR review</a>.</p>



<a name="465839816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465839816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465839816">(Aug 28 2024 at 19:54)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9180#discussion_r1735215126">PR review comment</a>:</p>
<blockquote>
<p>While you're here mind handling <a href="https://github.com/bytecodealliance/wasmtime/pull/9162">https://github.com/bytecodealliance/wasmtime/pull/9162</a> here as well and renaming <code>reference_types</code> in this PR to <code>gc_types</code> instead? </p>
</blockquote>



<a name="465840754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465840754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465840754">(Aug 28 2024 at 20:00)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a>.</p>



<a name="465840783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465840783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465840783">(Aug 28 2024 at 20:01)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a>.</p>



<a name="465845671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239180%20Do%20not%20deallocate%20disabled%20GC%20heaps%20v.../near/465845671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239180.20Do.20not.20deallocate.20disabled.20GC.20heaps.20v.2E.2E.2E.html#465845671">(Aug 28 2024 at 20:36)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9180">PR #9180</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>