<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6131 Make cranelift-codegen actually no... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236131.20Make.20cranelift-codegen.20actually.20no.2E.2E.2E.html">wasmtime / issue #6131 Make cranelift-codegen actually no...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="346123146"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236131%20Make%20cranelift-codegen%20actually%20no.../near/346123146" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236131.20Make.20cranelift-codegen.20actually.20no.2E.2E.2E.html#346123146">(Apr 01 2023 at 07:36)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/6131#issuecomment-1492864616">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6131">issue #6131</a>:</p>
<blockquote>
<p>@ondra05 thank you for the PR! Unfortunately, we currently <a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-platform-support.md#what-about-no_std">have a policy</a> on <code>no_std</code> (that's for Wasmtime but Cranelift aligns with this for now too). The basic argument that has been raised is that while a one-off "fix <code>no_std</code>" PR may or may not be that bad, the ongoing cost in (i) CI time, (ii) small papercuts for new contributors is maybe not worth the benefit of additional use-cases.</p>
<p>That said, at least part of that policy is more applicable to Wasmtime than Cranelift (specifically the dependence on OS primitives -- a compiler needs far fewer) and IMHO at least, we shouldn't be too dogmatic with policy when the stakes are fairly low (as here), and given that Cranelift once did support this. If you want to drive this forward, one thing you could do is attend our <a href="https://github.com/bytecodealliance/meetings/tree/main/cranelift">Cranelift weekly meeting</a> and raise the topic, and we can see how others feel. A data point to answer "how much CI time does a <code>cargo check</code> for <code>no_std</code> on <code>cranelift-codegen</code> add" would be useful too, if you want to make the argument, as would be examples of use-cases (we might consider additional use-cases a good reason to do something if they bring users and grow the community of potential contributors more than the required features add in support cost).</p>
</blockquote>



<a name="346612512"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236131%20Make%20cranelift-codegen%20actually%20no.../near/346612512" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236131.20Make.20cranelift-codegen.20actually.20no.2E.2E.2E.html#346612512">(Apr 03 2023 at 15:57)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/6131#issuecomment-1494581504">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6131">issue #6131</a>:</p>
<blockquote>
<p>To say what Chris said another way: Please tell us why you want no_std support in Cranelift, because that will help us understand what we should be doing to help. (And also because we're always curious about how people are using Cranelift!)</p>
<p>I think the fact that the remaining issues are all in our pass-timing module is significant. That's obviously not necessary for using Cranelift. (It's also probably pretty useless in a no_std environment.) And I think a no-op implementation shouldn't be too invasive. So I think a Cargo feature for enabling pass-timing would be a reasonable change, even if we didn't want to support no_std. I would ask for that as a separate PR though so we can review it without thinking about other no_std changes at the same time.</p>
</blockquote>



<a name="360400937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236131%20Make%20cranelift-codegen%20actually%20no.../near/360400937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236131.20Make.20cranelift-codegen.20actually.20no.2E.2E.2E.html#360400937">(May 23 2023 at 00:38)</a>:</h4>
<p>coffeebe4code <a href="https://github.com/bytecodealliance/wasmtime/pull/6131#issuecomment-1558275894">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6131">issue #6131</a>:</p>
<blockquote>
<p>Does having the core implementations impact the final size of cranelift? If smaller, that could be a benefit. Another benefit is if someone were working on an OS that was custom built, they might use no_std.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>