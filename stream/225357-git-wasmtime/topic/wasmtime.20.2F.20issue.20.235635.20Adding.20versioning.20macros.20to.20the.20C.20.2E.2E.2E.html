<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5635 Adding versioning macros to the C ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235635.20Adding.20versioning.20macros.20to.20the.20C.20.2E.2E.2E.html">wasmtime / issue #5635 Adding versioning macros to the C ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="323568588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235635%20Adding%20versioning%20macros%20to%20the%20C%20.../near/323568588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235635.20Adding.20versioning.20macros.20to.20the.20C.20.2E.2E.2E.html#323568588">(Jan 25 2023 at 19:30)</a>:</h4>
<p>thibaultcha edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5635">issue #5635</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Could we add versioning macros to the C API in <code>wasmtime.h</code>?</p>
<h4>Benefit</h4>
<p>As our embedder program can be linked against several Wasm runtimes, we wish to add compilation guards ensuring the version of these runtimes is either tested or compatible with the targets chosen by our users; without them having to face numerous compilation errors or more obscure behavior when it is not the case.</p>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="cp">#if WASMTIME_VERSION_MAJOR != 5</span>
<span class="cp">#error Unsupported Wasmtime version detected, please use Wasmtime 5.x.y</span>
<span class="cp">#endif</span>
</code></pre></div>
<h4>Implementation</h4>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="c1">// wasmtime.h</span>
<span class="cp">#define WASMTIME_VERSION "5.0.0"</span>
<span class="cp">#define WASMTIME_VERSION_MAJOR 5</span>
<span class="cp">#define WASMTIME_VERSION_MINOR 0</span>
<span class="cp">#define WASMTIME_VERSION_PATCH 0</span>
</code></pre></div>
<h4>Alternatives</h4>
<p>N/A<br>
</p>
</blockquote>



<a name="323586944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235635%20Adding%20versioning%20macros%20to%20the%20C%20.../near/323586944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235635.20Adding.20versioning.20macros.20to.20the.20C.20.2E.2E.2E.html#323586944">(Jan 25 2023 at 21:21)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5635">issue #5635</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Could we add versioning macros to the C API in <code>wasmtime.h</code>?</p>
<h4>Benefit</h4>
<p>As our embedder program can be linked against several Wasm runtimes, we wish to add compilation guards ensuring the version of these runtimes is either tested or compatible with the targets chosen by our users; without them having to face numerous compilation errors or more obscure behavior when it is not the case.</p>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="cp">#if WASMTIME_VERSION_MAJOR != 5</span>
<span class="cp">#error Unsupported Wasmtime version detected, please use Wasmtime 5.x.y</span>
<span class="cp">#endif</span>
</code></pre></div>
<h4>Implementation</h4>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="c1">// wasmtime.h</span>
<span class="cp">#define WASMTIME_VERSION "5.0.0"</span>
<span class="cp">#define WASMTIME_VERSION_MAJOR 5</span>
<span class="cp">#define WASMTIME_VERSION_MINOR 0</span>
<span class="cp">#define WASMTIME_VERSION_PATCH 0</span>
</code></pre></div>
<h4>Alternatives</h4>
<p>N/A<br>
</p>
</blockquote>



<a name="323587143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235635%20Adding%20versioning%20macros%20to%20the%20C%20.../near/323587143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235635.20Adding.20versioning.20macros.20to.20the.20C.20.2E.2E.2E.html#323587143">(Jan 25 2023 at 21:23)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/5635#issuecomment-1404240969">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5635">issue #5635</a>:</p>
<blockquote>
<p>Seems reasonable to me to add!</p>
<p>One thing to watch out for though is that we'll want support in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs">https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs</a> to have that script update these version numbers along with other version numbers.</p>
</blockquote>



<a name="324627097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235635%20Adding%20versioning%20macros%20to%20the%20C%20.../near/324627097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235635.20Adding.20versioning.20macros.20to.20the.20C.20.2E.2E.2E.html#324627097">(Jan 30 2023 at 14:52)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5635">issue #5635</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Could we add versioning macros to the C API in <code>wasmtime.h</code>?</p>
<h4>Benefit</h4>
<p>As our embedder program can be linked against several Wasm runtimes, we wish to add compilation guards ensuring the version of these runtimes is either tested or compatible with the targets chosen by our users; without them having to face numerous compilation errors or more obscure behavior when it is not the case.</p>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="cp">#if WASMTIME_VERSION_MAJOR != 5</span>
<span class="cp">#error Unsupported Wasmtime version detected, please use Wasmtime 5.x.y</span>
<span class="cp">#endif</span>
</code></pre></div>
<h4>Implementation</h4>
<p>E.g.</p>
<div class="codehilite" data-code-language="C"><pre><span></span><code><span class="c1">// wasmtime.h</span>
<span class="cp">#define WASMTIME_VERSION "5.0.0"</span>
<span class="cp">#define WASMTIME_VERSION_MAJOR 5</span>
<span class="cp">#define WASMTIME_VERSION_MINOR 0</span>
<span class="cp">#define WASMTIME_VERSION_PATCH 0</span>
</code></pre></div>
<h4>Alternatives</h4>
<p>N/A<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>