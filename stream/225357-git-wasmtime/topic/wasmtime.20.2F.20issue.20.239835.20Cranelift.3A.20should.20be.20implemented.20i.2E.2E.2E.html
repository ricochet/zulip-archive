<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9835 Cranelift: should be implemented i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html">wasmtime / issue #9835 Cranelift: should be implemented i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="489312222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489312222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489312222">(Dec 16 2024 at 18:27)</a>:</h4>
<p><a href="https://github.com/stellaphax">stellaphax</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">Issue #9835</a>.</p>



<a name="489312223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489312223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489312223">(Dec 16 2024 at 18:27)</a>:</h4>
<p><a href="https://github.com/stellaphax">stellaphax</a> added the cranelift label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">Issue #9835</a>.</p>



<a name="489312225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489312225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489312225">(Dec 16 2024 at 18:27)</a>:</h4>
<p>stellaphax opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">issue #9835</a>:</p>
<blockquote>
<p>Creating something for a Capture the Flag (CTF) challenge, and came across this when attempting to compile my function.</p>
<h3>Full Backtrace:</h3>
<p>thread 'main' panicked at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:685:21:<br>
should be implemented in ISLE: inst = <code>v71 = stack_load.i64 ss0</code>, type = <code>Some(types::I64)</code><br>
stack backtrace:<br>
   0: std::panicking::begin_panic_handler<br>
             at /rustc/90b35a6239c3d8bdabc530a6a0816f7ff89a0aaf\library/std\src\panicking.rs:665<br>
   1: core::panicking::panic_fmt<br>
             at /rustc/90b35a6239c3d8bdabc530a6a0816f7ff89a0aaf\library/core\src\panicking.rs:74<br>
   2: cranelift_codegen::machinst::lower::impl$3::lower_clif_block::closure$0&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:685<br>
   3: enum2$&lt;core::option::Option&lt;smallvec::SmallVec&lt;array$&lt;cranelift_codegen::machinst::valueregs::ValueRegs&lt;cranelift_codegen::machinst::reg::Reg&gt;,2&gt; &gt; &gt; &gt;::unwrap_or_else&lt;smallvec::SmallVec&lt;array$&lt;cranelift_codegen::machinst::valueregs::ValueRegs&lt;cranelift_co<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\option.rs:1017<br>
   4: cranelift_codegen::machinst::lower::Lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt; &gt;::lower_clif_block&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:679<br>
   5: cranelift_codegen::machinst::lower::Lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt; &gt;::lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:1017<br>
   6: cranelift_codegen::machinst::compile::compile&lt;cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\compile.rs:41<br>
   7: cranelift_codegen::isa::x64::X64Backend::compile_vcode<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\isa\x64\mod.rs:61<br>
   8: cranelift_codegen::isa::x64::impl$1::compile_function<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\isa\x64\mod.rs:73<br>
   9: ctf::interpreter::generate<br>
             at .\src\interpreter.rs:924<br>
  10: REDACTED::main<br>
             at .\src\bin\virtualizer.rs:6<br>
  11: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt;<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\ops\function.rs:250<br>
  12: core:<span aria-label="hint" class="emoji emoji-1f5dd" role="img" title="hint">:hint:</span>:black_box<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\hint.rs:389<br>
note: Some details are omitted, run with <code>RUST_BACKTRACE=full</code> for a verbose backtrace.<br>
error: process didn't exit successfully: <code>REDACTED.exe</code> (exit code: 101)</p>
<h3>My IR</h3>
<p>`function u0:0(i64, i64) -&gt; i64 windows_fastcall {<br>
    ss0 = explicit_slot 8, align = 65536<br>
    ss1 = explicit_slot 8, align = 65536</p>
<p>block0(v0: i64, v1: i64):<br>
    stack_store v0, ss0<br>
    stack_store v1, ss1<br>
    jump block1</p>
<p>block1:<br>
    v2 = stack_load.i64 ss0<br>
    v3 = iconst.i64 128<br>
    v4 = iadd v2, v3  ; v3 = 128<br>
    v5 = load.i64 readonly little v4<br>
    v6 = load.i64 readonly little v5<br>
    v7 = bnot v6<br>
    v8 = iconst.i64 0x489d_2061_0fc3_fb2a<br>
    v9 = isub v7, v8  ; v8 = 0x489d_2061_0fc3_fb2a<br>
    v10 = iconst.i64 -4461110450679002079<br>
    v11 = bxor v9, v10  ; v10 = -4461110450679002079<br>
    v12 = iconst.i64 0x1c14_4295_049e_9905<br>
    v13 = bxor v11, v12  ; v12 = 0x1c14_4295_049e_9905<br>
    v14 = ineg v13<br>
    v15 = bnot v14<br>
    v16 = iconst.i64 -8819557583384649525<br>
    v17 = isub v15, v16  ; v16 = -8819557583384649525<br>
    v18 = iconst.i64 -292475872589187261<br>
    v19 = bxor v17, v18  ; v18 = -292475872589187261<br>
    v20 = iconst.i64 -8660319366599639002<br>
    v21 = isub v19, v20  ; v20 = -8660319366599639002<br>
    v22 = iconst.i64 -7151449463209098624<br>
    v23 = bxor v21, v22  ; v22 = -7151449463209098624<br>
    v24 = iconst.i64 0x18c8_b9af_33b0_a405<br>
    v25 = iadd v23, v24  ; v24 = 0x18c8_b9af_33b0_a405<br>
    v26 = iconst.i64 0x40e7_0af5_6ce5_56dd<br>
    v27 = bxor v25, v26  ; v26 = 0x40e7_0af5_6ce5_56dd<br>
    v28 = iconst.i64 -6954426303843586127<br>
    v29 = bxor v27, v28  ; v28 = -6954426303843586127<br>
    v30 = iconst.i64 -6831553930069083890<br>
    v31 = bxor v29, v30  ; v30 = -6831553930069083890<br>
    v32 = iconst.i64 0x0bbe_eb37_ba28_a537<br>
    v33 = bxor v31, v32  ; v32 = 0x0bbe_eb37_ba28_a537<br>
    v34 = iconst.i64 0x6d27_b06f_df5c_9472<br>
    v35 = bxor v33, v34  ; v34 = 0x6d27_b06f_df5c_9472<br>
    v36 = iconst.i64 0x6e30_5d88_0555_9288<br>
    v37 = bxor v35, v36  ; v36 = 0x6e30_5d88_0555_9288<br>
    v38 = ineg v37<br>
    v39 = iconst.i64 -2882484716177919502<br>
    v40 = bxor v38, v39  ; v39 = -2882484716177919502<br>
    v41 = iconst.i64 0x3af4_83c5_3db0_1d9d<br>
    v42 = isub v40, v41  ; v41 = 0x3af4_83c5_3db0_1d9d<br>
    v43 = iconst.i64 -5792733239001732165<br>
    v44 = bxor v42, v43  ; v43 = -5792733239001732165<br>
    v45 = bnot v44<br>
    v46 = iconst.i64 8<br>
    v47 = iadd v5, v46  ; v46 = 8<br>
    store little v47, v4<br>
    v48 = iconst.i64 -7783865175571007017<br>
    v49 = icmp eq v45, v48  ; v48 = -7783865175571007017<br>
    brif v49, block2, block13</p>
<p>block13:<br>
    v50 = iconst.i64 0x7b5a_d962_d1b6_bc9e<br>
    v51 = icmp.i64 eq v45, v50  ; v50 = 0x7b5a_d962_d1b6_bc9e<br>
    brif v51, block3, block14</p>
<p>block14:<br>
    v52 = iconst.i64 -6272791173886278192<br>
    v53 = icmp.i64 eq v45, v52  ; v52 = -6272791173886278192<br>
    brif v53, block4, block15</p>
<p>block15:<br>
    v54 = iconst.i64 -2797489443462894109<br>
    v55 = icmp.i64 eq v45, v54  ; v54 = -2797489443462894109<br>
    brif v55, block5, block16</p>
<p>block16:<br>
    v56 = iconst.i64 0x02c8_1cdd_21bd_b3c0<br>
    v57 = icmp.i64 eq v45, v56  ; v56 = 0x02c8_1cdd_21bd_b3c0<br>
    brif v57, block6, block17</p>
<p>block17:<br>
    v58 = iconst.i64 0x6ee2_e465_36e8_77b5<br>
    v59 = icmp.i64 eq v45, v58  ; v58 = 0x6ee2_e465_36e8_77b5<br>
    brif v59, block7, block18</p>
<p>block18:<br>
    v60 = iconst.i64 -8073358707478604768<br>
    v61 = icmp.i64 eq v45, v60  ; v60 = -8073358707478604768<br>
    brif v61, block8, block19</p>
<p>block19:<br>
    v62 = iconst.i64 0x1057_b219_e4fa_5f10<br>
    v63 = icmp.i64 eq v45, v62  ; v62 = 0x1057_b219_e4fa_5f10<br>
    brif v63, block9, block20</p>
<p>block20:<br>
    v64 = iconst.i64 -8726837251761108653<br>
    v65 = icmp.i64 eq v45, v64  ; v64 = -8726837251761108653<br>
    brif v65, block10, block21</p>
<p>block21:<br>
    v66 = iconst.i64 -7230224490429434294<br>
    v67 = icmp.i64 eq v45, v66  ; v66 = -7230224490429434294<br>
    brif v67, block11, block22</p>
<p>block22:<br>
    v68 = iconst.i64 0x6b23_5923_d009_c45c<br>
    v69 = icmp.i64 eq v45, v68  ; v68 = 0x6b23_5923_d009_c45c<br>
    brif v69, block12, block23</p>
<p>block23:<br>
    jump block1</p>
<p>block2:<br>
    v70 = stack_load.i64 ss0<br>
    v71 = iconst.i64 128<br>
    v72 = iadd v70, v71  ; v71 = 128<br>
    v73 = load.i64 readonly little v72<br>
    v74 = load.i64 readonly little v73<br>
    v75 = iconst.i64 -2704559895804829619<br>
    v76 = bxor v74, v75  ; v75 = -2704559895804829619<br>
    v77 = bnot v76<br>
    v78 = iconst.i64 0x7e5d_964e_adf2_ac49<br>
    v79 = isub v77, v78  ; v78 = 0x7e5d_964e_adf2_ac49<br>
    v80 = bnot v79<br>
    v81 = ineg v80<br>
    v82 = iconst.i64 0x5b93_de21_5f20_6444<br>
    v83 = isub v81, v82  ; v82 = 0x5b93_de21_5f20_6444<br>
    v84 = iconst.i64 0x2e8e_61ad_5854_eb18<br>
    v85 = bxor v83, v84  ; v84 = 0x2e8e_61ad_5854_eb18<br>
    v86 = bnot v85<br>
    v87 = iconst.i64 0x5935_230f_2339_3e3e<br>
    v88 = bxor v86, v87  ; v87 = 0x5935_230f_2339_3e3e<br>
    v89 = ineg v88<br>
    v90 = iconst.i64 -3750086189034530752<br>
    v91 = bxor v89, v90  ; v90 = -3750086189034530752<br>
    v92 = iconst.i64 0x66f2_7dd6_509a_7dd6<br>
    v93 = bxor v91, v92  ; v92 = 0x66f2_7dd6_509a_7dd6<br>
    v94 = iconst.i64 0x0feb_13a6_5b72_5ca9<br>
    v95 = bxor v93, v94  ; v94 = 0x0feb_13a6_5b72_5ca9<br>
    v96 = iconst.i64 0x4bae_b9b1_b37a_17d2<br>
    v97 = isub v95, v96  ; v96 = 0x4bae_b9b1_b37a_17d2<br>
    v98 = iconst.i64 0x4b39_bbbc_9294_7a09<br>
    v99 = bxor v97, v98  ; v98 = 0x4b39_bbbc_9294_7a09<br>
    v100 = iconst.i64 -5626529817850843395<br>
    v101 = iadd v99, v100  ; v100 = -5626529817850843395<br>
    v102 = iconst.i64 -6666738309278736411<br>
    v103 = isub v101, v102  ; v102 = -6666738309278736411<br>
    v104 = iconst.i64 -1757971160561802068<br>
    v105 = bxor v103, v104  ; v104 = -1757971160561802068<br>
    v106 = iconst.i64 8<br>
    v107 = iadd v73, v106  ; v106 = 8<br>
    store little v107, v72<br>
    v108 = iconst.i64 8<br>
    v109 = imul v105, v108  ; v108 = 8<br>
    v110 = iadd v70, v109<br>
    v111 = load.i64 readonly little v110<br>
    v112 = iconst.i64 336<br>
    v113 = iadd v70, v112  ; v112 = 336<br>
    v114 = load.i64 readonly little v113<br>
    v115 = iconst.i64 8<br>
    v116 = isub v114, v115  ; v115 = 8<br>
    store little v116, v113<br>
    store little v111, v116<br>
    jump block1</p>
<p>block3:<br>
    v117 = stack_load.i64 ss0<br>
    v118 = iconst.i64 128<br>
    v119 = iadd v117, v118  ; v118 = 128<br>
    v120 = load.i64 readonly little v119<br>
    v121 = load.i64 readonly little v120<br>
    v122 = iconst.i64 0x02f3_7043_5ac2_8a35<br>
    v123 = bxor v121, v122  ; v122 = 0x02f3_7043_5ac2_8a35<br>
    v124 = ineg v123<br>
    v125 = iconst.i64 0x5b5c_416b_0348_d8b8<br>
    v126 = bxor v124, v125  ; <br>
[message truncated]</p>
</blockquote>



<a name="489317390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489317390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489317390">(Dec 16 2024 at 18:54)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/9835#issuecomment-2546395363">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">issue #9835</a>:</p>
<blockquote>
<p>How did you try to compile the function? Using <code>cranelift_codegen::Context::compile</code> or in sone other way?</p>
</blockquote>



<a name="489330239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489330239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489330239">(Dec 16 2024 at 20:00)</a>:</h4>
<p>stellaphax closed <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">issue #9835</a>:</p>
<blockquote>
<p>Creating something for a Capture the Flag (CTF) challenge, and came across this when attempting to compile my function.</p>
<h3>Full Backtrace:</h3>
<p>thread 'main' panicked at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:685:21:<br>
should be implemented in ISLE: inst = <code>v71 = stack_load.i64 ss0</code>, type = <code>Some(types::I64)</code><br>
stack backtrace:<br>
   0: std::panicking::begin_panic_handler<br>
             at /rustc/90b35a6239c3d8bdabc530a6a0816f7ff89a0aaf\library/std\src\panicking.rs:665<br>
   1: core::panicking::panic_fmt<br>
             at /rustc/90b35a6239c3d8bdabc530a6a0816f7ff89a0aaf\library/core\src\panicking.rs:74<br>
   2: cranelift_codegen::machinst::lower::impl$3::lower_clif_block::closure$0&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:685<br>
   3: enum2$&lt;core::option::Option&lt;smallvec::SmallVec&lt;array$&lt;cranelift_codegen::machinst::valueregs::ValueRegs&lt;cranelift_codegen::machinst::reg::Reg&gt;,2&gt; &gt; &gt; &gt;::unwrap_or_else&lt;smallvec::SmallVec&lt;array$&lt;cranelift_codegen::machinst::valueregs::ValueRegs&lt;cranelift_co<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\option.rs:1017<br>
   4: cranelift_codegen::machinst::lower::Lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt; &gt;::lower_clif_block&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:679<br>
   5: cranelift_codegen::machinst::lower::Lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt; &gt;::lower&lt;enum2$&lt;cranelift_codegen::isa::x64::lower::isle::generated_code::MInst&gt;,cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\lower.rs:1017<br>
   6: cranelift_codegen::machinst::compile::compile&lt;cranelift_codegen::isa::x64::X64Backend&gt;<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\machinst\compile.rs:41<br>
   7: cranelift_codegen::isa::x64::X64Backend::compile_vcode<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\isa\x64\mod.rs:61<br>
   8: cranelift_codegen::isa::x64::impl$1::compile_function<br>
             at C:\Users\accord\.cargo\registry\src\index.crates.io-6f17d22bba15001f\cranelift-codegen-0.114.0\src\isa\x64\mod.rs:73<br>
   9: ctf::interpreter::generate<br>
             at .\src\interpreter.rs:924<br>
  10: REDACTED::main<br>
             at .\src\bin\virtualizer.rs:6<br>
  11: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt;<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\ops\function.rs:250<br>
  12: core:<span aria-label="hint" class="emoji emoji-1f5dd" role="img" title="hint">:hint:</span>:black_box<br>
             at C:\Users\accord\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\hint.rs:389<br>
note: Some details are omitted, run with <code>RUST_BACKTRACE=full</code> for a verbose backtrace.<br>
error: process didn't exit successfully: <code>REDACTED.exe</code> (exit code: 101)</p>
<h3>My IR</h3>
<p>`function u0:0(i64, i64) -&gt; i64 windows_fastcall {<br>
    ss0 = explicit_slot 8, align = 65536<br>
    ss1 = explicit_slot 8, align = 65536</p>
<p>block0(v0: i64, v1: i64):<br>
    stack_store v0, ss0<br>
    stack_store v1, ss1<br>
    jump block1</p>
<p>block1:<br>
    v2 = stack_load.i64 ss0<br>
    v3 = iconst.i64 128<br>
    v4 = iadd v2, v3  ; v3 = 128<br>
    v5 = load.i64 readonly little v4<br>
    v6 = load.i64 readonly little v5<br>
    v7 = bnot v6<br>
    v8 = iconst.i64 0x489d_2061_0fc3_fb2a<br>
    v9 = isub v7, v8  ; v8 = 0x489d_2061_0fc3_fb2a<br>
    v10 = iconst.i64 -4461110450679002079<br>
    v11 = bxor v9, v10  ; v10 = -4461110450679002079<br>
    v12 = iconst.i64 0x1c14_4295_049e_9905<br>
    v13 = bxor v11, v12  ; v12 = 0x1c14_4295_049e_9905<br>
    v14 = ineg v13<br>
    v15 = bnot v14<br>
    v16 = iconst.i64 -8819557583384649525<br>
    v17 = isub v15, v16  ; v16 = -8819557583384649525<br>
    v18 = iconst.i64 -292475872589187261<br>
    v19 = bxor v17, v18  ; v18 = -292475872589187261<br>
    v20 = iconst.i64 -8660319366599639002<br>
    v21 = isub v19, v20  ; v20 = -8660319366599639002<br>
    v22 = iconst.i64 -7151449463209098624<br>
    v23 = bxor v21, v22  ; v22 = -7151449463209098624<br>
    v24 = iconst.i64 0x18c8_b9af_33b0_a405<br>
    v25 = iadd v23, v24  ; v24 = 0x18c8_b9af_33b0_a405<br>
    v26 = iconst.i64 0x40e7_0af5_6ce5_56dd<br>
    v27 = bxor v25, v26  ; v26 = 0x40e7_0af5_6ce5_56dd<br>
    v28 = iconst.i64 -6954426303843586127<br>
    v29 = bxor v27, v28  ; v28 = -6954426303843586127<br>
    v30 = iconst.i64 -6831553930069083890<br>
    v31 = bxor v29, v30  ; v30 = -6831553930069083890<br>
    v32 = iconst.i64 0x0bbe_eb37_ba28_a537<br>
    v33 = bxor v31, v32  ; v32 = 0x0bbe_eb37_ba28_a537<br>
    v34 = iconst.i64 0x6d27_b06f_df5c_9472<br>
    v35 = bxor v33, v34  ; v34 = 0x6d27_b06f_df5c_9472<br>
    v36 = iconst.i64 0x6e30_5d88_0555_9288<br>
    v37 = bxor v35, v36  ; v36 = 0x6e30_5d88_0555_9288<br>
    v38 = ineg v37<br>
    v39 = iconst.i64 -2882484716177919502<br>
    v40 = bxor v38, v39  ; v39 = -2882484716177919502<br>
    v41 = iconst.i64 0x3af4_83c5_3db0_1d9d<br>
    v42 = isub v40, v41  ; v41 = 0x3af4_83c5_3db0_1d9d<br>
    v43 = iconst.i64 -5792733239001732165<br>
    v44 = bxor v42, v43  ; v43 = -5792733239001732165<br>
    v45 = bnot v44<br>
    v46 = iconst.i64 8<br>
    v47 = iadd v5, v46  ; v46 = 8<br>
    store little v47, v4<br>
    v48 = iconst.i64 -7783865175571007017<br>
    v49 = icmp eq v45, v48  ; v48 = -7783865175571007017<br>
    brif v49, block2, block13</p>
<p>block13:<br>
    v50 = iconst.i64 0x7b5a_d962_d1b6_bc9e<br>
    v51 = icmp.i64 eq v45, v50  ; v50 = 0x7b5a_d962_d1b6_bc9e<br>
    brif v51, block3, block14</p>
<p>block14:<br>
    v52 = iconst.i64 -6272791173886278192<br>
    v53 = icmp.i64 eq v45, v52  ; v52 = -6272791173886278192<br>
    brif v53, block4, block15</p>
<p>block15:<br>
    v54 = iconst.i64 -2797489443462894109<br>
    v55 = icmp.i64 eq v45, v54  ; v54 = -2797489443462894109<br>
    brif v55, block5, block16</p>
<p>block16:<br>
    v56 = iconst.i64 0x02c8_1cdd_21bd_b3c0<br>
    v57 = icmp.i64 eq v45, v56  ; v56 = 0x02c8_1cdd_21bd_b3c0<br>
    brif v57, block6, block17</p>
<p>block17:<br>
    v58 = iconst.i64 0x6ee2_e465_36e8_77b5<br>
    v59 = icmp.i64 eq v45, v58  ; v58 = 0x6ee2_e465_36e8_77b5<br>
    brif v59, block7, block18</p>
<p>block18:<br>
    v60 = iconst.i64 -8073358707478604768<br>
    v61 = icmp.i64 eq v45, v60  ; v60 = -8073358707478604768<br>
    brif v61, block8, block19</p>
<p>block19:<br>
    v62 = iconst.i64 0x1057_b219_e4fa_5f10<br>
    v63 = icmp.i64 eq v45, v62  ; v62 = 0x1057_b219_e4fa_5f10<br>
    brif v63, block9, block20</p>
<p>block20:<br>
    v64 = iconst.i64 -8726837251761108653<br>
    v65 = icmp.i64 eq v45, v64  ; v64 = -8726837251761108653<br>
    brif v65, block10, block21</p>
<p>block21:<br>
    v66 = iconst.i64 -7230224490429434294<br>
    v67 = icmp.i64 eq v45, v66  ; v66 = -7230224490429434294<br>
    brif v67, block11, block22</p>
<p>block22:<br>
    v68 = iconst.i64 0x6b23_5923_d009_c45c<br>
    v69 = icmp.i64 eq v45, v68  ; v68 = 0x6b23_5923_d009_c45c<br>
    brif v69, block12, block23</p>
<p>block23:<br>
    jump block1</p>
<p>block2:<br>
    v70 = stack_load.i64 ss0<br>
    v71 = iconst.i64 128<br>
    v72 = iadd v70, v71  ; v71 = 128<br>
    v73 = load.i64 readonly little v72<br>
    v74 = load.i64 readonly little v73<br>
    v75 = iconst.i64 -2704559895804829619<br>
    v76 = bxor v74, v75  ; v75 = -2704559895804829619<br>
    v77 = bnot v76<br>
    v78 = iconst.i64 0x7e5d_964e_adf2_ac49<br>
    v79 = isub v77, v78  ; v78 = 0x7e5d_964e_adf2_ac49<br>
    v80 = bnot v79<br>
    v81 = ineg v80<br>
    v82 = iconst.i64 0x5b93_de21_5f20_6444<br>
    v83 = isub v81, v82  ; v82 = 0x5b93_de21_5f20_6444<br>
    v84 = iconst.i64 0x2e8e_61ad_5854_eb18<br>
    v85 = bxor v83, v84  ; v84 = 0x2e8e_61ad_5854_eb18<br>
    v86 = bnot v85<br>
    v87 = iconst.i64 0x5935_230f_2339_3e3e<br>
    v88 = bxor v86, v87  ; v87 = 0x5935_230f_2339_3e3e<br>
    v89 = ineg v88<br>
    v90 = iconst.i64 -3750086189034530752<br>
    v91 = bxor v89, v90  ; v90 = -3750086189034530752<br>
    v92 = iconst.i64 0x66f2_7dd6_509a_7dd6<br>
    v93 = bxor v91, v92  ; v92 = 0x66f2_7dd6_509a_7dd6<br>
    v94 = iconst.i64 0x0feb_13a6_5b72_5ca9<br>
    v95 = bxor v93, v94  ; v94 = 0x0feb_13a6_5b72_5ca9<br>
    v96 = iconst.i64 0x4bae_b9b1_b37a_17d2<br>
    v97 = isub v95, v96  ; v96 = 0x4bae_b9b1_b37a_17d2<br>
    v98 = iconst.i64 0x4b39_bbbc_9294_7a09<br>
    v99 = bxor v97, v98  ; v98 = 0x4b39_bbbc_9294_7a09<br>
    v100 = iconst.i64 -5626529817850843395<br>
    v101 = iadd v99, v100  ; v100 = -5626529817850843395<br>
    v102 = iconst.i64 -6666738309278736411<br>
    v103 = isub v101, v102  ; v102 = -6666738309278736411<br>
    v104 = iconst.i64 -1757971160561802068<br>
    v105 = bxor v103, v104  ; v104 = -1757971160561802068<br>
    v106 = iconst.i64 8<br>
    v107 = iadd v73, v106  ; v106 = 8<br>
    store little v107, v72<br>
    v108 = iconst.i64 8<br>
    v109 = imul v105, v108  ; v108 = 8<br>
    v110 = iadd v70, v109<br>
    v111 = load.i64 readonly little v110<br>
    v112 = iconst.i64 336<br>
    v113 = iadd v70, v112  ; v112 = 336<br>
    v114 = load.i64 readonly little v113<br>
    v115 = iconst.i64 8<br>
    v116 = isub v114, v115  ; v115 = 8<br>
    store little v116, v113<br>
    store little v111, v116<br>
    jump block1</p>
<p>block3:<br>
    v117 = stack_load.i64 ss0<br>
    v118 = iconst.i64 128<br>
    v119 = iadd v117, v118  ; v118 = 128<br>
    v120 = load.i64 readonly little v119<br>
    v121 = load.i64 readonly little v120<br>
    v122 = iconst.i64 0x02f3_7043_5ac2_8a35<br>
    v123 = bxor v121, v122  ; v122 = 0x02f3_7043_5ac2_8a35<br>
    v124 = ineg v123<br>
    v125 = iconst.i64 0x5b5c_416b_0348_d8b8<br>
    v126 = bxor v124, v125  ; <br>
[message truncated]</p>
</blockquote>



<a name="489330240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489330240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489330240">(Dec 16 2024 at 20:00)</a>:</h4>
<p>stellaphax <a href="https://github.com/bytecodealliance/wasmtime/issues/9835#issuecomment-2546610303">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">issue #9835</a>:</p>
<blockquote>
<blockquote>
<p>How did you try to compile the function? Using <code>cranelift_codegen::Context::compile</code> or in sone other way?</p>
</blockquote>
<p>Ohh.... I did it through some other avenue. Thank you for letting me know! I switched to using that same API you just mentioned, and everything works fine now. Thank you!</p>
</blockquote>



<a name="489343265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239835%20Cranelift%3A%20should%20be%20implemented%20i.../near/489343265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239835.20Cranelift.3A.20should.20be.20implemented.20i.2E.2E.2E.html#489343265">(Dec 16 2024 at 21:08)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/9835#issuecomment-2546777057">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9835">issue #9835</a>:</p>
<blockquote>
<p>Great to hear you managed to get it working! The reason it didn't work through the other method you tried is likely because that other method skipped the "legalization" from stack_load to stack_addr combined with a regular load.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>