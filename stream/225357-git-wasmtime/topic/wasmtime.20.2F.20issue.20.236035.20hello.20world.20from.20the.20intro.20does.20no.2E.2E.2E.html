<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6035 hello world from the intro does no... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html">wasmtime / issue #6035 hello world from the intro does no...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="342433023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342433023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342433023">(Mar 16 2023 at 22:21)</a>:</h4>
<p>fgmccabe opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>Following the very first section on creating a hello world example.</p>
<p>I used<br>
brew install rust<br>
brew install cargo<br>
rustup target add wasm32-wasi<br>
cargo new hello-world<br>
cargo build --target wasm32-wasi</p>
<p>I get this:</p>
<p>cargo build --target wasm32-wasi</p>
<p>Compiling hello-rust v0.1.0 (/Users/fgm/Projects/helloworld/hello-rust)<br>
error[E0463]: can't find crate for <code>std</code><br>
  |<br>
  = note: the <code>wasm32-wasi</code> target may not be installed<br>
  = help: consider downloading the target with <code>rustup target add wasm32-wasi</code></p>
<p>error: cannot find macro <code>println</code> in this scope<br>
 --&gt; src/main.rs:2:5<br>
  |<br>
2 |     println!("Hello, world!");<br>
  |     ^^^^^^^</p>
<p>error: requires <code>sized</code> lang_item</p>
<p>For more information about this error, try <code>rustc --explain E0463</code>.<br>
error: could not compile <code>hello-rust</code> due to 3 previous errors</p>
<p>Comment: not a good optic when the first example wont compile<br>
</p>
</blockquote>



<a name="342433737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342433737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342433737">(Mar 16 2023 at 22:26)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472839370">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>The instructions assume that you installed rustc using rustup rather than an unofficial method like homebrew in your case. I'm not familiar with the homebrew version of rustc, so I don't know how to install the rust standard library for wasm32-wasi using homebrew. If they even compile it for wasm32-wasi at all.</p>
</blockquote>



<a name="342434187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342434187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342434187">(Mar 16 2023 at 22:30)</a>:</h4>
<p>fgmccabe <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472846606">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>Well, I actually also tried rustup; with identical results<br>
</p>
</blockquote>



<a name="342434487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342434487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342434487">(Mar 16 2023 at 22:32)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472850954">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>As a sanity check: did you remove the rust version installed by homebrew? (<code>brew rm -f rust</code>)</p>
</blockquote>



<a name="342434494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342434494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342434494">(Mar 16 2023 at 22:32)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472850994">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>@fgmccabe to elaborate a little bit (strictly speaking this is a Rust issue, not a Wasmtime issue, but since we're all here...): the Rust toolchain is most commonly installed via the "rustup" tool, which knows how to download new versions of the toolchain and target SDKs. (That's the <code>rustup target add...</code> bit to get <code>wasm32-wasi</code>.) However, many package collections and distributions also include custom-packaged snapshots of the individual tools (Rust compiler, Cargo). That's what you got when you did <code>brew install rust</code> and <code>brew install cargo</code>, and same would be true with e.g. <code>apt install rust</code> on a Debian-ish Linux.</p>
<p>I suspect what's happening here is a <code>$PATH</code> conflict: your <code>rustup target add wasm32-wasi</code> added the <code>wasm32-wasi</code> SDK for the Rustup-installed toolchain, but then when you do <code>cargo build</code> you invoke your Homebrew-installed toolchain.</p>
<p>Could you:</p>
<ul>
<li>Report to us what you see for <code>which cargo</code> and <code>which rustc</code>;</li>
<li>If that is <em>not</em> <code>/Users/fgm/.cargo/bin/{cargo,rustc}</code>, uninstall the brew-installed packages;</li>
<li>If that also removes rustup itself, either do the <code>curl | sh</code> install method (<code>curl https://sh.rustup.rs | bash</code>) or look to see if Rustup is in Homebrew's packages;</li>
<li>Restart your shell to make sure you get env variables fresh from any changes made by the above.</li>
</ul>
</blockquote>



<a name="342439017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342439017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342439017">(Mar 16 2023 at 23:07)</a>:</h4>
<p>fgmccabe <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472878193">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>I removed the brew version of rust as suggested. <br>
It now works, thanks</p>
</blockquote>



<a name="342439018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342439018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342439018">(Mar 16 2023 at 23:07)</a>:</h4>
<p>fgmccabe closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>Following the very first section on creating a hello world example.</p>
<p>I used<br>
brew install rust<br>
brew install cargo<br>
rustup target add wasm32-wasi<br>
cargo new hello-world<br>
cargo build --target wasm32-wasi</p>
<p>I get this:</p>
<p>cargo build --target wasm32-wasi</p>
<p>Compiling hello-rust v0.1.0 (/Users/fgm/Projects/helloworld/hello-rust)<br>
error[E0463]: can't find crate for <code>std</code><br>
  |<br>
  = note: the <code>wasm32-wasi</code> target may not be installed<br>
  = help: consider downloading the target with <code>rustup target add wasm32-wasi</code></p>
<p>error: cannot find macro <code>println</code> in this scope<br>
 --&gt; src/main.rs:2:5<br>
  |<br>
2 |     println!("Hello, world!");<br>
  |     ^^^^^^^</p>
<p>error: requires <code>sized</code> lang_item</p>
<p>For more information about this error, try <code>rustc --explain E0463</code>.<br>
error: could not compile <code>hello-rust</code> due to 3 previous errors</p>
<p>Comment: not a good optic when the first example wont compile<br>
</p>
</blockquote>



<a name="342439078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342439078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342439078">(Mar 16 2023 at 23:07)</a>:</h4>
<p>fgmccabe <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472878951">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<p>Actually, a follow up: it would be good to mention the potential pitfalls in the intro. Installing packages using brew is pretty normal in mac-land</p>
</blockquote>



<a name="342440203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236035%20hello%20world%20from%20the%20intro%20does%20no.../near/342440203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236035.20hello.20world.20from.20the.20intro.20does.20no.2E.2E.2E.html#342440203">(Mar 16 2023 at 23:16)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6035#issuecomment-1472885024">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6035">issue #6035</a>:</p>
<blockquote>
<blockquote>
<p>Actually, a follow up: it would be good to mention the potential pitfalls in the intro. Installing packages using brew is pretty normal in mac-land</p>
</blockquote>
<p>Good idea; added in #6036.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>