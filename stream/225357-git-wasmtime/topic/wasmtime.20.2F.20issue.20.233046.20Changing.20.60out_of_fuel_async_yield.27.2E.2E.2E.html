<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3046 Changing `out_of_fuel_async_yield&#x27;... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233046.20Changing.20.60out_of_fuel_async_yield.27.2E.2E.2E.html">wasmtime / issue #3046 Changing `out_of_fuel_async_yield&#x27;...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="244480505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233046%20Changing%20%60out_of_fuel_async_yield%27.../near/244480505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233046.20Changing.20.60out_of_fuel_async_yield.27.2E.2E.2E.html#244480505">(Jun 30 2021 at 20:07)</a>:</h4>
<p>bkolobara opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3046">issue #3046</a>:</p>
<blockquote>
<p>I'm using the <a href="https://docs.rs/wasmtime/0.28.0/wasmtime/struct.Store.html#method.out_of_fuel_async_yield">out_of_fuel_async_yield</a> method on the <code>Store</code> to configure yielding back after around 10k instructions. I would like to allow the async call to run <strong>forever</strong>, but if I set <code>injection_count</code> to the maximum value <code>u32::MAX</code> of re-injections this gives me around <code>4*10^13</code> instructions in total. On a 4 Ghz processor I would run out of fuel in around 3 hours.</p>
<p>Should the <code>injection_count</code> type here be <code>u64</code> or am I missing something?</p>
</blockquote>



<a name="244587483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233046%20Changing%20%60out_of_fuel_async_yield%27.../near/244587483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233046.20Changing.20.60out_of_fuel_async_yield.27.2E.2E.2E.html#244587483">(Jul 01 2021 at 15:46)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3046">issue #3046</a>:</p>
<blockquote>
<p>I'm using the <a href="https://docs.rs/wasmtime/0.28.0/wasmtime/struct.Store.html#method.out_of_fuel_async_yield">out_of_fuel_async_yield</a> method on the <code>Store</code> to configure yielding back after around 10k instructions. I would like to allow the async call to run <strong>forever</strong>, but if I set <code>injection_count</code> to the maximum value <code>u32::MAX</code> of re-injections this gives me around <code>4*10^13</code> instructions in total. On a 4 Ghz processor I would run out of fuel in around 3 hours.</p>
<p>Should the <code>injection_count</code> type here be <code>u64</code> or am I missing something?</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>