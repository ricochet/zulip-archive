<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9301 Add the `ArrayOutOfBounds` trap code · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html">wasmtime / PR #9301 Add the `ArrayOutOfBounds` trap code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="472542120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472542120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472542120">(Sep 24 2024 at 17:30)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a> from <code>fitzgen:array-oob-trap-code</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This is needed in the implementation of Wasm GC's array instructions.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="472542121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472542121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472542121">(Sep 24 2024 at 17:30)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>.</p>



<a name="472542122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472542122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472542122">(Sep 24 2024 at 17:30)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>.</p>



<a name="472542123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472542123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472542123">(Sep 24 2024 at 17:30)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>.</p>



<a name="472542124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472542124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472542124">(Sep 24 2024 at 17:30)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>.</p>



<a name="472543557"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472543557" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472543557">(Sep 24 2024 at 17:38)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9301#pullrequestreview-2325955714">PR review</a>:</p>
<blockquote>
<p>Musing about this, we may actually want to one day not have the exact list of traps in Cranelift match the exact list of traps in Wasmtime. We might want to define Cranelift trap codes are "simply a u8" which might be much more flexible for Wasmtime as well since we wouldn't have to mirror everything in two locations. No need to do that now though, just a future possibility.</p>
</blockquote>



<a name="472545575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472545575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472545575">(Sep 24 2024 at 17:51)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/9301#issuecomment-2371938029">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>:</p>
<blockquote>
<p>We'd have to figure out what to do about how they are packed into <code>MemFlags</code>. Might be worth taking flags out into a secondary map or something.</p>
</blockquote>



<a name="472545868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472545868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472545868">(Sep 24 2024 at 17:53)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9301#issuecomment-2371941206">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>:</p>
<blockquote>
<p>Oh <code>MemFlags</code> should be able to easily fit 8 bits. Custom user traps in Cranelift right now though are 16 bits and that we can't fit the whole width into <code>MemFlags</code></p>
</blockquote>



<a name="472548760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239301%20Add%20the%20%60ArrayOutOfBounds%60%20trap%20code/near/472548760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239301.20Add.20the.20.60ArrayOutOfBounds.60.20trap.20code.html#472548760">(Sep 24 2024 at 18:10)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9301">PR #9301</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>