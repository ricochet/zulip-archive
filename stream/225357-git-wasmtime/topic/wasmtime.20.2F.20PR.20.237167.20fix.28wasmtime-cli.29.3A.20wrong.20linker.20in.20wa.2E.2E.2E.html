<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7167 fix(wasmtime-cli): wrong linker in wa... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html">wasmtime / PR #7167 fix(wasmtime-cli): wrong linker in wa...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="395208502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395208502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395208502">(Oct 06 2023 at 08:36)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>:</p>
<blockquote>
<p>This will fix the error one would get while trying to run the wasmtime CLI with <code>-S http</code> because the async functions were being added to the linker. Additionally, we will allow shadowing in linker when using WASI HTTP in order to prevent the following error:</p>
<blockquote>
<p>import of <code>wasi:clocks/wall-clock</code> defined twice</p>
</blockquote>
<p>Also, to prevent it from breaking in the future, a simple handcrafted test has been added to the CLI test suite.</p>
</blockquote>



<a name="395208510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395208510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395208510">(Oct 06 2023 at 08:36)</a>:</h4>
<p><strong>eduardomourar</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a> as ready for review.</p>



<a name="395208514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395208514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395208514">(Oct 06 2023 at 08:36)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395208516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395208516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395208516">(Oct 06 2023 at 08:36)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395250321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395250321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395250321">(Oct 06 2023 at 12:33)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395258390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395258390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395258390">(Oct 06 2023 at 13:18)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395263595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395263595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395263595">(Oct 06 2023 at 13:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661898677">PR review</a>.</p>



<a name="395263596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395263596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395263596">(Oct 06 2023 at 13:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661898677">PR review</a>.</p>



<a name="395263597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395263597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395263597">(Oct 06 2023 at 13:46)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348744245">PR review comment</a>:</p>
<blockquote>
<p>Thanks for adding this! This is unfortunately not really possible to change though and without the source used to generate this we can't feasibly change this over time. I think the best solution is to enable the <code>cli-tests</code> suite here to use programs from the <code>test-programs</code> crate. That's a larger refactoring though and probably best done in a separate PR, so it's ok to skip a test for this PR specifically and rely on local testing.</p>
</blockquote>



<a name="395263598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395263598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395263598">(Oct 06 2023 at 13:46)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348742532">PR review comment</a>:</p>
<blockquote>
<p>I think it would be best if <code>allow_shadowing</code> was disabled because that's otherwise easy to accidentally run into issues.</p>
<p>There's unfortunately not a great solution for the error you're running into here, so in the meantime I think it would be best to expose individual <code>add_to_linker</code> functions per-interface and only invoke the wasi-http-related ones here.</p>
</blockquote>



<a name="395264619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395264619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395264619">(Oct 06 2023 at 13:51)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661912439">PR review</a>.</p>



<a name="395264620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395264620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395264620">(Oct 06 2023 at 13:51)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348751136">PR review comment</a>:</p>
<blockquote>
<p>i actually built the component out of the original core module <code>wasi-http</code> (which was handcrafted before in order to make it more maintainable).</p>
</blockquote>



<a name="395265174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395265174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395265174">(Oct 06 2023 at 13:54)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661918192">PR review</a>.</p>



<a name="395265175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395265175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395265175">(Oct 06 2023 at 13:54)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348754553">PR review comment</a>:</p>
<blockquote>
<p>i agree it will be very hard to keep it up-to-date while we are still iterating over WASI. maybe we can keep the original core module and build a component on the fly with wasm-tools?</p>
</blockquote>



<a name="395265580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395265580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395265580">(Oct 06 2023 at 13:57)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661923314">PR review</a>.</p>



<a name="395265581"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395265581" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395265581">(Oct 06 2023 at 13:57)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348757574">PR review comment</a>:</p>
<blockquote>
<p>alright, i can do that</p>
</blockquote>



<a name="395267033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395267033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395267033">(Oct 06 2023 at 14:04)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395267711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395267711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395267711">(Oct 06 2023 at 14:08)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661945667">PR review</a>.</p>



<a name="395267712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395267712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395267712">(Oct 06 2023 at 14:08)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348771597">PR review comment</a>:</p>
<blockquote>
<p>done. as it is only temporary, i exposed function only in sync module and kept out of docs.</p>
</blockquote>



<a name="395270334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395270334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395270334">(Oct 06 2023 at 14:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1661974197">PR review</a>.</p>



<a name="395270336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395270336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395270336">(Oct 06 2023 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348789378">PR review comment</a>:</p>
<blockquote>
<p>Yes that makes sense but it's not clear to me, for example, how to regenerate this test. This means that if there's an update it would be quite difficult to update this. Even the core module will change because the wasi-http interfaces might change.</p>
<p>The "real fix" here is to use source code rather than compiled wat or wasm, but that would require further refactorings to provide the <code>test-programs</code> programs to the WASI CLI tests here. I think it's best to have no tests until that's done, and I don't think it would be too large of a refactoring so I can work on it after this PR lands.</p>
</blockquote>



<a name="395273750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395273750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395273750">(Oct 06 2023 at 14:38)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662012405">PR review</a>.</p>



<a name="395273752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395273752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395273752">(Oct 06 2023 at 14:38)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348810295">PR review comment</a>:</p>
<blockquote>
<p>there is no real source code because it was done by hand. it is not hard to make it, though. i just wanted to keep it very simple without a server-side in the cli as it takes longer to run.</p>
</blockquote>



<a name="395274613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395274613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395274613">(Oct 06 2023 at 14:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662022472">PR review</a>.</p>



<a name="395274614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395274614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395274614">(Oct 06 2023 at 14:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348816410">PR review comment</a>:</p>
<blockquote>
<p>Yes that's all fine, but again I would personally prefer not to check in a large <code>*.wat</code> file which we don't know how to regenerate and change. I don't doubt that you've generated this from source, but there's no instructions in-tree about what the generation process is or what the source is. I think it's best to leave this out, manually test this PR, and I'll follow up with a better testing strategy to re-land this.</p>
</blockquote>



<a name="395277132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395277132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395277132">(Oct 06 2023 at 14:57)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395278311"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395278311" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395278311">(Oct 06 2023 at 15:03)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662078408">PR review</a>.</p>



<a name="395278312"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395278312" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395278312">(Oct 06 2023 at 15:03)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348844415">PR review comment</a>:</p>
<blockquote>
<p>just added a test to <code>test-programs</code> called <code>outbound_request_response_build</code> that does not require a server. i just don't know how to find the path to reference in the wasmtime cli tests file.</p>
</blockquote>



<a name="395280081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395280081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395280081">(Oct 06 2023 at 15:12)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395281571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395281571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395281571">(Oct 06 2023 at 15:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662119899">PR review</a>.</p>



<a name="395281572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395281572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395281572">(Oct 06 2023 at 15:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348867766">PR review comment</a>:</p>
<blockquote>
<p>Hm ok so in my opinion this PR can't land with this <code>*.wat</code> test. This is even if it's generated from the test you've added in-tree. This is local knowledge on this PR's comment which will be lost basically as soon as the PR lands, meaning that if you or I aren't the next person to touch this file, which is quite likely, then they'll not know what to do. To solve this dilemma one of a few things need to happen:</p>
<ul>
<li>This <code>*.wat</code> test should be deleted, temporarily. I'll send a follow-up PR to enable referencing wasms from <code>test-programs</code> here in this test suite.</li>
<li>You should, in this PR, delete this <code>*.wat</code> and implement the previous bullet in this PR.</li>
<li>Block this PR on me doing the above refactor, then rebase on it and reference the <code>test-programs</code>-generated wasm file.</li>
</ul>
<p>Personally I prefer the first option because, as you pointed out, we'll want to backport this. In that sense I'd rather not block this PR. I'm happy to defer to you though on which route you'd prefer.</p>
</blockquote>



<a name="395283181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395283181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395283181">(Oct 06 2023 at 15:29)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395283418"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395283418" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395283418">(Oct 06 2023 at 15:30)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662140898">PR review</a>.</p>



<a name="395283421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395283421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395283421">(Oct 06 2023 at 15:30)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348880212">PR review comment</a>:</p>
<blockquote>
<p>in think option 1 is the best one too. </p>
</blockquote>



<a name="395283837"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395283837" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395283837">(Oct 06 2023 at 15:32)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662144172">PR review</a>.</p>



<a name="395283839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395283839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395283839">(Oct 06 2023 at 15:32)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348882204">PR review comment</a>:</p>
<blockquote>
<p>i have removed the wat file and ignored that particular test case. let me know and i can help re-enabling the test back when ready</p>
</blockquote>



<a name="395284380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395284380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395284380">(Oct 06 2023 at 15:35)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>:</p>
<blockquote>
<p>This will fix the error one would get while trying to run the wasmtime CLI with <code>-S http</code> because the async functions were being added to the linker. Additionally, we will expose only the necessary functions to <del>allow shadowing in</del> linker when using WASI HTTP in order to prevent the following error:</p>
<blockquote>
<p>import of <code>wasi:clocks/wall-clock</code> defined twice</p>
</blockquote>
<p><del>Also, to prevent it from breaking in the future, a simple handcrafted test has been added to the CLI test suite.</del></p>
</blockquote>



<a name="395296002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395296002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395296002">(Oct 06 2023 at 16:39)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662286114">PR review</a>.</p>



<a name="395296003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395296003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395296003">(Oct 06 2023 at 16:39)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662286114">PR review</a>.</p>



<a name="395296004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395296004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395296004">(Oct 06 2023 at 16:39)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348963764">PR review comment</a>:</p>
<blockquote>
<p>For the future this isn't necessary as <code>println!</code> should work in guests. If it doesn't that's a bug we should document and fix.</p>
</blockquote>



<a name="395297324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395297324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395297324">(Oct 06 2023 at 16:49)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662303168">PR review</a>.</p>



<a name="395297326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395297326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395297326">(Oct 06 2023 at 16:49)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348973437">PR review comment</a>:</p>
<blockquote>
<p>If I use println, it gets translated to wasi preview1 but I wanted to exercise the preview2 functions</p>
</blockquote>



<a name="395298248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395298248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395298248">(Oct 06 2023 at 16:56)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662313354">PR review</a>.</p>



<a name="395298249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395298249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395298249">(Oct 06 2023 at 16:56)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348980304">PR review comment</a>:</p>
<blockquote>
<p>Ah that's sort of right but also not quite accurate. It's correct that <code>println!</code> uses the Rust standard library which uses wasi preview1, but that's adapted to preview2 with the adapter, meaning that <code>println!</code> ends up calling the same preview2 function this one calls.</p>
</blockquote>



<a name="395298549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395298549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395298549">(Oct 06 2023 at 16:58)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662316351">PR review</a>.</p>



<a name="395298552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395298552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395298552">(Oct 06 2023 at 16:58)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1348982178">PR review comment</a>:</p>
<blockquote>
<p>But not in the core module, right?</p>
</blockquote>



<a name="395301992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395301992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395301992">(Oct 06 2023 at 17:24)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662467338">PR review</a>.</p>



<a name="395301993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395301993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395301993">(Oct 06 2023 at 17:24)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1349096497">PR review comment</a>:</p>
<blockquote>
<p>Sorry I'm not exactly sure what you mean, but when using <code>println!</code> the core module produced by rustc will refer to <code>wasi_snapshot_preview1::fd_write</code> if that's what you mean. That core import is then hooked up to the adapter, and the adatper imports preview2 instead.</p>
</blockquote>



<a name="395302324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395302324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395302324">(Oct 06 2023 at 17:26)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7167">PR #7167</a>.</p>



<a name="395348982"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395348982" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395348982">(Oct 07 2023 at 00:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#discussion_r1349418647">PR review comment</a>:</p>
<blockquote>
<p>To follow up here, <a href="https://github.com/bytecodealliance/wasmtime/pull/7182">https://github.com/bytecodealliance/wasmtime/pull/7182</a> is the refactoring I had in mind and <a href="https://github.com/bytecodealliance/wasmtime/blob/14418300cd98a942d15e383834f533680816ef91/tests/all/cli_tests.rs#L1250-L1268">this</a> is the un-ignore of the test</p>
</blockquote>



<a name="395348985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237167%20fix%28wasmtime-cli%29%3A%20wrong%20linker%20in%20wa.../near/395348985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237167.20fix.28wasmtime-cli.29.3A.20wrong.20linker.20in.20wa.2E.2E.2E.html#395348985">(Oct 07 2023 at 00:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7167#pullrequestreview-1662941542">PR review</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>