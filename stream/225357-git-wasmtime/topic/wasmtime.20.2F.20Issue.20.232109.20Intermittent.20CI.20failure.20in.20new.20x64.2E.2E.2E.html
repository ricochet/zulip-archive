<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2109 Intermittent CI failure in new x64... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html">wasmtime / Issue #2109 Intermittent CI failure in new x64...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="206182476"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/206182476" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#206182476">(Aug 06 2020 at 18:57)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>We have temporarily disabled the new x64 backend's CI tests (#2100) because it would intermittently fail these tests with a crash. We need to resolve the underlying issue (perhaps a codegen bug) and re-enable the tests.</p>
</blockquote>



<a name="206182496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/206182496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#206182496">(Aug 06 2020 at 18:57)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/2109#issuecomment-670135246">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>cc @julian-seward1 @bnjbvr </p>
</blockquote>



<a name="206182510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/206182510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#206182510">(Aug 06 2020 at 18:57)</a>:</h4>
<p>cfallin labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>We have temporarily disabled the new x64 backend's CI tests (#2100) because it would intermittently fail these tests with a crash. We need to resolve the underlying issue (perhaps a codegen bug) and re-enable the tests.</p>
</blockquote>



<a name="211134185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/211134185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#211134185">(Sep 24 2020 at 13:55)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/issues/2109#issuecomment-698360295">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>I don't have strong evidence, but I think this has been fixed by <a href="https://github.com/bytecodealliance/wasmtime/commit/3849dc18b1bf3560c43950f049fe553034c424b2">https://github.com/bytecodealliance/wasmtime/commit/3849dc18b1bf3560c43950f049fe553034c424b2</a>.</p>
<p>See <a href="https://github.com/bytecodealliance/wasmtime/commit/3849dc18b1bf3560c43950f049fe553034c424b2#diff-234d9b09197fd3d4bc69bf1a2ca4f2f8L2410">https://github.com/bytecodealliance/wasmtime/commit/3849dc18b1bf3560c43950f049fe553034c424b2#diff-234d9b09197fd3d4bc69bf1a2ca4f2f8L2410</a>. Before the PR, when emitting a constant <code>null</code> for a reference type, we wouldn't match the <code>is_int</code>, so a floating-point xorps/xorpd would be used to generate the register. According to the result of regalloc, this could result in incorrect code in the best case, uninitialized registers in the worst case. The above patch is a likely fix since the issue was intermittent, and matches this behavior of randomness, and crashes happened around reference type tests (I remember seeing double frees, etc.).</p>
<p>I'll close the issue now; if the intermittent failure happens again, I'm happy to look into it a bit more.</p>
</blockquote>



<a name="211134187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/211134187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#211134187">(Sep 24 2020 at 13:55)</a>:</h4>
<p>bnjbvr closed <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>We have temporarily disabled the new x64 backend's CI tests (#2100) because it would intermittently fail these tests with a crash. We need to resolve the underlying issue (perhaps a codegen bug) and re-enable the tests.</p>
</blockquote>



<a name="211134208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/211134208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#211134208">(Sep 24 2020 at 13:55)</a>:</h4>
<p>bnjbvr labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<p>We have temporarily disabled the new x64 backend's CI tests (#2100) because it would intermittently fail these tests with a crash. We need to resolve the underlying issue (perhaps a codegen bug) and re-enable the tests.</p>
</blockquote>



<a name="211134231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232109%20Intermittent%20CI%20failure%20in%20new%20x64.../near/211134231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232109.20Intermittent.20CI.20failure.20in.20new.20x64.2E.2E.2E.html#211134231">(Sep 24 2020 at 13:55)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/2109#issuecomment-698360518">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2109">Issue #2109</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>