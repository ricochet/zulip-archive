<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3370 Cranelift: &#x27;Unsupported type for i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233370.20Cranelift.3A.20.27Unsupported.20type.20for.20i.2E.2E.2E.html">wasmtime / issue #3370 Cranelift: &#x27;Unsupported type for i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="253901655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233370%20Cranelift%3A%20%27Unsupported%20type%20for%20i.../near/253901655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233370.20Cranelift.3A.20.27Unsupported.20type.20for.20i.2E.2E.2E.html#253901655">(Sep 18 2021 at 23:42)</a>:</h4>
<p>DGriffin91 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3370">issue #3370</a>:</p>
<blockquote>
<p>Using cranelift 0.76, the following results in this error message: "'Unsupported type for imin instruction: i64', [...]\cranelift-codegen-0.76.0\src\isa\x64\lower.rs:2353:17"</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">u0</span>:<span class="mi">0</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">f64</span> <span class="nc">windows_fastcall</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="n">block0</span>:
    <span class="nc">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f64const</span><span class="w"> </span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">1</span><span class="w"></span>
<span class="w">    </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imin</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fcvt_from_sint</span><span class="p">.</span><span class="kt">f64</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v4</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Am I using imin incorrectly?</p>
</blockquote>



<a name="253909516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233370%20Cranelift%3A%20%27Unsupported%20type%20for%20i.../near/253909516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233370.20Cranelift.3A.20.27Unsupported.20type.20for.20i.2E.2E.2E.html#253909516">(Sep 19 2021 at 02:16)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/3370#issuecomment-922404431">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3370">issue #3370</a>:</p>
<blockquote>
<p>Currently the <code>imin</code> instruction is only supported for vector types, not scalars. It's a part of a larger issue in which our backends support the particular combinations of instructions and types that are generated by our Wasm frontend, but still have implementation gaps for the fully general opcode x type matrix. Sorry about that! I'd be happy to point out the place where this would be implemented if you're interested in possibly contributing a patch, and in the meantime I'll go ahead and rename this issue to track the missing impl.</p>
<p>Thanks again for the report!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>