<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5997 aarch64: Use `VCodeConstant` for f64/... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235997.20aarch64.3A.20Use.20.60VCodeConstant.60.20for.20f64.2F.2E.2E.2E.html">wasmtime / PR #5997 aarch64: Use `VCodeConstant` for f64/...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="341208928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235997%20aarch64%3A%20Use%20%60VCodeConstant%60%20for%20f64/.../near/341208928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235997.20aarch64.3A.20Use.20.60VCodeConstant.60.20for.20f64.2F.2E.2E.2E.html#341208928">(Mar 12 2023 at 02:10)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5997">PR #5997</a> from <code>aarch64-constant-pool</code> to <code>main</code>:</p>
<blockquote>
<p>As was <a href="https://github.com/bytecodealliance/wasmtime/pull/5976#discussion_r1131926356">pointed out recently</a> one minor improvement to the AArch64 backend is to use the same infrastructure that x64 uses for loading constants which is to pool them at the end of the function instead of having them inline in the body. This commit implements this strategy to ensure that fallback <code>shuffle</code> instructions, for example, don't generate a branch instruction to skip over immediates.</p>
<p>Additionally in these commits is a refactoring of float/splat lowering in the aarch64 backend. Previously it was all living in Rust but to get to know it I translated it all to ISLE. I felt that the logic was a bit more understandable after the transition and more easily shows off what all the special cases are (the problem is more well-suited for ISLE I think than Rust, nothing against the prior code of course which was perfectly readable).</p>
</blockquote>



<a name="341552732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235997%20aarch64%3A%20Use%20%60VCodeConstant%60%20for%20f64/.../near/341552732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235997.20aarch64.3A.20Use.20.60VCodeConstant.60.20for.20f64.2F.2E.2E.2E.html#341552732">(Mar 13 2023 at 19:15)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5997#pullrequestreview-1337781005">PR review</a>.</p>



<a name="341565931"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235997%20aarch64%3A%20Use%20%60VCodeConstant%60%20for%20f64/.../near/341565931" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235997.20aarch64.3A.20Use.20.60VCodeConstant.60.20for.20f64.2F.2E.2E.2E.html#341565931">(Mar 13 2023 at 20:21)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5997">PR #5997</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>