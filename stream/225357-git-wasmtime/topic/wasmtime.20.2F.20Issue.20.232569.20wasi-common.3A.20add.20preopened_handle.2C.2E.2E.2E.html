<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2569 wasi-common: add preopened_handle,... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html">wasmtime / Issue #2569 wasi-common: add preopened_handle,...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="222375386"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222375386" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222375386">(Jan 12 2021 at 00:00)</a>:</h4>
<p>Ekleog <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758300536">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>Side-note: <code>preopened_dir</code> and <code>preopened_virt</code> could both be refactored to lower to <code>preopened_handle</code> if making it take a function instead of directly a handle. I'm not yet sure whether that's something you'd want so restrained myself for now but it would be possible too, though I'm not really sure what <code>PendingPreopen</code> actually brings in practice compared to just opening ahead-of-time (and thus seeing potential errors happen as soon as possible)</p>
</blockquote>



<a name="222375915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222375915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222375915">(Jan 12 2021 at 00:08)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758303062">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>Hi. Sorry I missed your message on the bytecode alliance discord.</p>
<p>Your use case is important to me. I'm nearing completion of a complete rewrite of wasi-common that, among other things, redesigns the traits so that files and directories have distinct sets of methods. <a href="https://github.com/bytecodealliance/wasmtime/pull/2487">https://github.com/bytecodealliance/wasmtime/pull/2487</a> I expect this PR will land within a week or so. (When it is ready to land, i'll rename the wasi-c2 crate back to wasi-common, thats just a name under development.)</p>
<p>The new design of the ctx builder should support your use case possible - <a href="https://github.com/bytecodealliance/wasmtime/blob/pch/wasi_common_cap_std/crates/wasi-c2/src/ctx.rs#L104">https://github.com/bytecodealliance/wasmtime/blob/pch/wasi_common_cap_std/crates/wasi-c2/src/ctx.rs#L104</a></p>
<p>Is it OK to close this PR and you can re-target your work at the rewritten wasi-common?</p>
</blockquote>



<a name="222376032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222376032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222376032">(Jan 12 2021 at 00:09)</a>:</h4>
<p>Ekleog <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758303628">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>That sounds really reasonable, thank you! Is there a branch somewhere where wasmtime depends on this version of wasi-common so I could take a git-dependency and start developing against that version?</p>
</blockquote>



<a name="222376270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222376270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222376270">(Jan 12 2021 at 00:12)</a>:</h4>
<p>Ekleog edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758303628">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>That sounds really reasonable, thank you! Is there a branch somewhere where wasmtime-wasi depends on this version of wasi-common so I could take a git-dependency and start developing against that version?</p>
</blockquote>



<a name="222376586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222376586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222376586">(Jan 12 2021 at 00:16)</a>:</h4>
<p>Ekleog edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758303628">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>That sounds awesome, thank you! Is there a branch somewhere where wasmtime-wasi depends on this version of wasi-common so I could take a git-dependency and start developing against that version?</p>
</blockquote>



<a name="222377054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222377054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222377054">(Jan 12 2021 at 00:22)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758309197">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>If you're on that branch and depend on <code>wasi-c2-wasmtime</code> it should work in the place of <code>wasmtime-wasi</code></p>
</blockquote>



<a name="222427623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232569%20wasi-common%3A%20add%20preopened_handle%2C.../near/222427623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232569.20wasi-common.3A.20add.20preopened_handle.2C.2E.2E.2E.html#222427623">(Jan 12 2021 at 13:12)</a>:</h4>
<p>Ekleog <a href="https://github.com/bytecodealliance/wasmtime/pull/2569#issuecomment-758646234">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2569">Issue #2569</a>:</p>
<blockquote>
<p>Great, I'll try doing that. Thank you!<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>