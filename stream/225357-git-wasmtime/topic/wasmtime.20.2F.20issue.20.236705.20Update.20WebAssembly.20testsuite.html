<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6705 Update WebAssembly testsuite · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html">wasmtime / issue #6705 Update WebAssembly testsuite</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="373325782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/373325782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#373325782">(Jul 07 2023 at 20:47)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1626079161">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>Here's where the errors start: <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/5490314463/jobs/10005600074#step:16:3205">https://github.com/bytecodealliance/wasmtime/actions/runs/5490314463/jobs/10005600074#step:16:3205</a>.</p>
</blockquote>



<a name="374072824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/374072824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#374072824">(Jul 10 2023 at 20:02)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1629652177">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>I think these failures are related to <code>wasmparser</code> and its validation, so the test suite submodule probably will need to get updated in the wasm-tools repository before it's updated here.</p>
</blockquote>



<a name="375446671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/375446671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#375446671">(Jul 15 2023 at 04:57)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1636663032">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>With <a href="https://github.com/WebAssembly/testsuite/pull/68">https://github.com/WebAssembly/testsuite/pull/68</a>, <a href="https://github.com/bytecodealliance/wasm-tools/pull/1126">https://github.com/bytecodealliance/wasm-tools/pull/1126</a>, and publishing wasm-tools this should be good to go.</p>
</blockquote>



<a name="376403486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/376403486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#376403486">(Jul 18 2023 at 16:08)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1640524577">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>Ok, rebased on top of #6739.</p>
</blockquote>



<a name="376409594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/376409594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#376409594">(Jul 18 2023 at 16:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1640554530">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>Oh can you also try re-updating the submodule its latest? I think that will surface a single error in <code>tests/spec_testsuite/elem.wast:690</code> which I think is something we need to implement, but otherwise the other failures I think are fixed by updating the test suite</p>
</blockquote>



<a name="376467278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/376467278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#376467278">(Jul 18 2023 at 20:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1640951456">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>Ok I think those are legitimate failures where we accidentally don't support <code>global.get</code> in table element segment offset initializers.</p>
</blockquote>



<a name="389571051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236705%20Update%20WebAssembly%20testsuite/near/389571051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236705.20Update.20WebAssembly.20testsuite.html#389571051">(Sep 07 2023 at 05:08)</a>:</h4>
<p>TethysSvensson <a href="https://github.com/bytecodealliance/wasmtime/pull/6705#issuecomment-1709483297">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6705">issue #6705</a>:</p>
<blockquote>
<p>It seems like <code>global.get</code> has been a constant expression at least since 2017 (<a href="https://github.com/WebAssembly/spec/issues/445">WebAssembly/spec#445</a>). However it was not usable inside element segments until the reference types proposal landed in 2021 (<a href="https://github.com/WebAssembly/spec/issues/1287">WebAssembly/spec#1287</a>). This made funcrefs/externrefs available as globals, and thus <code>global.get</code> became usable in element segments.</p>
<p>Unfortunately the interaction between this proposal and element segments was initially missed and a test was not added for it until earlier this year in <a href="https://github.com/WebAssembly/spec/issues/1640">WebAssembly/spec#1640</a>. I think most wasm parsers missed this detail. For instance wabt only added support for this today in <a href="https://github.com/WebAssembly/wabt/issues/2288">WebAssembly/wabt#2288</a>.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>