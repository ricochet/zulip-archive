<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3948 Wasi-NN ci example failed · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html">wasmtime / issue #3948 Wasi-NN ci example failed</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="276013892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276013892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276013892">(Mar 21 2022 at 07:26)</a>:</h4>
<p>gusye1234 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<h3>Steps to Reproduce</h3>
<ul>
<li>run <code>bash ci/run-wasi-nn-example.sh</code></li>
</ul>
<h3>Expected Results</h3>
<p>A success inference should happen for this test, outputting the classification results for the mobilenet.</p>
<h3>Actual Results</h3>
<p>A panic happened at the step of </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="n">wasi_nn</span>::<span class="n">compute</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>It reported the error as :</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Host error: BackendError<span class="o">(</span>BackendAccess<span class="o">(</span>parameter mismatch<span class="o">))</span>
thread <span class="s1">'main'</span> panicked at <span class="s1">'not implemented'</span>, crates/wasi-nn/src/witx.rs:17:45
note: run with <span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span> environment variable to display a backtrace
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: commit head at e8ae3c0afdc7347d3de80c554353257efda2bbaa</p>
<p>Operating system: Ubuntu 20.04</p>
<p>Architecture: x86_64</p>
<p>OpenVINO version: 2021.4.582</p>
<h3>Extra Info</h3>
<p>My OpenVINO installed dir is on <code>/opt/intel/openvino_2021</code>, so I have to change one line in the <code>ci/run-wasi-nn-example.sh</code> to</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nb">source</span> /opt/intel/openvino_2021/bin/setupvars.sh
</code></pre></div>
<p>but I don't think that's the problem.</p>
</blockquote>



<a name="276013893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276013893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276013893">(Mar 21 2022 at 07:26)</a>:</h4>
<p>gusye1234 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<h3>Steps to Reproduce</h3>
<ul>
<li>run <code>bash ci/run-wasi-nn-example.sh</code></li>
</ul>
<h3>Expected Results</h3>
<p>A success inference should happen for this test, outputting the classification results for the mobilenet.</p>
<h3>Actual Results</h3>
<p>A panic happened at the step of </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="n">wasi_nn</span>::<span class="n">compute</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>It reported the error as :</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Host error: BackendError<span class="o">(</span>BackendAccess<span class="o">(</span>parameter mismatch<span class="o">))</span>
thread <span class="s1">'main'</span> panicked at <span class="s1">'not implemented'</span>, crates/wasi-nn/src/witx.rs:17:45
note: run with <span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span> environment variable to display a backtrace
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: commit head at e8ae3c0afdc7347d3de80c554353257efda2bbaa</p>
<p>Operating system: Ubuntu 20.04</p>
<p>Architecture: x86_64</p>
<p>OpenVINO version: 2021.4.582</p>
<h3>Extra Info</h3>
<p>My OpenVINO installed dir is on <code>/opt/intel/openvino_2021</code>, so I have to change one line in the <code>ci/run-wasi-nn-example.sh</code> to</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nb">source</span> /opt/intel/openvino_2021/bin/setupvars.sh
</code></pre></div>
<p>but I don't think that's the problem.</p>
</blockquote>



<a name="276014435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276014435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276014435">(Mar 21 2022 at 07:36)</a>:</h4>
<p>gusye1234 <a href="https://github.com/bytecodealliance/wasmtime/issues/3948#issuecomment-1073556676">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>Full backtrace is here</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">[</span><span class="n">setupvars</span><span class="p">.</span><span class="n">sh</span><span class="p">]</span><span class="w"> </span><span class="n">OpenVINO</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">initialized</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">5.36</span><span class="n">s</span><span class="w"></span>
<span class="o">~/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">classification</span><span class="o">-</span><span class="n">example</span><span class="w"> </span><span class="o">~/</span><span class="n">wasmtime</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.14</span><span class="n">s</span><span class="w"></span>
<span class="o">~/</span><span class="n">wasmtime</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">dev</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">6.19</span><span class="n">s</span><span class="w"></span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">mapdir</span><span class="w"> </span><span class="o">'</span><span class="na">fixture</span>::<span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">openvino_fixtures</span><span class="o">'</span><span class="w"> </span><span class="o">/</span><span class="n">root</span><span class="o">/</span><span class="n">openvino_fixtures</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">example</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">--</span><span class="n">wasi</span><span class="o">-</span><span class="n">modules</span><span class="o">=</span><span class="n">experimental</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="err">`</span><span class="w"></span>
<span class="n">Read</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">XML</span><span class="p">,</span><span class="w"> </span><span class="n">first</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class="n">characters</span>: <span class="o">&lt;?</span><span class="n">xml</span><span class="w"> </span><span class="n">version</span><span class="o">=</span><span class="s">"1.0"</span><span class="w"> </span><span class="o">?&gt;</span><span class="w"></span>
<span class="o">&lt;</span><span class="n">net</span><span class="w"> </span><span class="n">name</span><span class="o">=</span><span class="s">"mobilenet_v2_1.0</span>
<span class="s">Read graph weights, size in bytes: 13956476</span>
<span class="s">Loaded graph into wasi-nn with ID: 0</span>
<span class="s">Created wasi-nn execution context with ID: 0</span>
<span class="s">Read input tensor, size in bytes: 602112</span>
<span class="s">Host error: BackendError(BackendAccess(parameter mismatch))</span>
<span class="s">thread 'main' panicked at 'not implemented', crates/wasi-nn/src/witx.rs:17:45</span>
<span class="s">stack backtrace:</span>
<span class="s">   0:     0x56004aa5fa4c - std::backtrace_rs::backtrace::libunwind::trace::h91c465e73bf6c785</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/../../backtrace/src/backtrace/libunwind.rs:93:5</span>
<span class="s">   1:     0x56004aa5fa4c - std::backtrace_rs::backtrace::trace_unsynchronized::hae9da36f5d58b5f3</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/../../backtrace/src/backtrace/mod.rs:66:5</span>
<span class="s">   2:     0x56004aa5fa4c - std::sys_common::backtrace::_print_fmt::h7f499fa126a7effb</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/sys_common/backtrace.rs:67:5</span>
<span class="s">   3:     0x56004aa5fa4c - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::h3e2b509ce2ce6007</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/sys_common/backtrace.rs:46:22</span>
<span class="s">   4:     0x56004aa86f9c - core::fmt::write::h753c7571fa063ecb</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/fmt/mod.rs:1168:17</span>
<span class="s">   5:     0x56004aa58aa3 - std::io::Write::write_fmt::h2815c0519c99ba09</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/io/mod.rs:1660:15</span>
<span class="s">   6:     0x56004aa620c2 - std::sys_common::backtrace::_print::h64941a6fc8b0ed9b</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/sys_common/backtrace.rs:49:5</span>
<span class="s">   7:     0x56004aa620c2 - std::sys_common::backtrace::print::hcf25e43e1a9b0766</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/sys_common/backtrace.rs:36:9</span>
<span class="s">   8:     0x56004aa620c2 - std::panicking::default_hook::{{closure}}::h78d3e6cf97fc623d</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:211:50</span>
<span class="s">   9:     0x56004aa61ca5 - std::panicking::default_hook::hda898f8d3ad1a5ae</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:228:9</span>
<span class="s">  10:     0x56004aa62713 - std::panicking::rust_panic_with_hook::h1a5ea2d6c23051aa</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:606:17</span>
<span class="s">  11:     0x56004aa62402 - std::panicking::begin_panic_handler::{{closure}}::h07f549390938b73f</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:500:13</span>
<span class="s">  12:     0x56004aa5fef4 - std::sys_common::backtrace::__rust_end_short_backtrace::h5ec3758a92cfb00d</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/sys_common/backtrace.rs:139:18</span>
<span class="s">  13:     0x56004aa62169 - rust_begin_unwind</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:498:5</span>
<span class="s">  14:     0x5600490cfd01 - core::panicking::panic_fmt::h3a79a6a99affe1d5</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:116:14</span>
<span class="s">  15:     0x5600490cfc4d - core::panicking::panic::h97167cd315d19cd4</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panicking.rs:48:5</span>
<span class="s">  16:     0x560049422084 - wasmtime_wasi_nn::witx::&lt;impl wasmtime_wasi_nn::witx::types::UserErrorConversion for wasmtime_wasi_nn::ctx::WasiNnCtx&gt;::nn_errno_from_wasi_nn_error::hf4b55e0bc8b56f4d</span>
<span class="s">                               at /root/wasmtime/crates/wasi-nn/src/witx.rs:17:45</span>
<span class="s">  17:     0x5600491685b8 - wasmtime_wasi_nn::witx::wasi_ephemeral_nn::set_input::{{closure}}::hf0dd54022d4b1a4e</span>
<span class="s">                               at /root/wasmtime/crates/wasi-nn/src/witx.rs:6:1</span>
<span class="s">  18:     0x560049258efa - tracing::span::Span::in_scope::h357ef6f5da237da6</span>
<span class="s">                               at /root/.cargo/registry/src/mirrors.ustc.edu.cn-61ef6e0cd06fb9b8/tracing-0.1.31/src/span.rs:1091:9</span>
<span class="s">  19:     0x560049166822 - wasmtime_wasi_nn::witx::wasi_ephemeral_nn::set_input::h21e40e093cc70a7c</span>
<span class="s">                               at /root/wasmtime/crates/wasi-nn/src/witx.rs:6:1</span>
<span class="s">  20:     0x56004916dc21 - wasmtime_wasi_nn::witx::wasi_ephemeral_nn::add_to_linker::{{closure}}::h5c2dd2b76d894e2d</span>
<span class="s">                               at /root/wasmtime/crates/wasi-nn/src/witx.rs:6:1</span>
<span class="s">  21:     0x5600491c1b0f - &lt;F as wasmtime::func::IntoFunc&lt;T,(wasmtime::func::Caller&lt;T&gt;,A1,A2,A3),R&gt;&gt;::into_func::wasm_to_host_shim::{{closure}}::{{closure}}::h029385688ad2ce0a</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:1893:41</span>
<span class="s">  22:     0x56004912068d - core::ops::function::FnOnce::call_once::h134dd316713a2333</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/ops/function.rs:227:5</span>
<span class="s">  23:     0x5600491094ac - &lt;core::panic::unwind_safe::AssertUnwindSafe&lt;F&gt; as core::ops::function::FnOnce&lt;()&gt;&gt;::call_once::h0ed288d1197d920b</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/core/src/panic/unwind_safe.rs:271:9</span>
<span class="s">  24:     0x5600492d5e3a - std::panicking::try::do_call::h4c5ab10ccbeac1bb</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:406:40</span>
<span class="s">  25:     0x5600492df2eb - __rust_try</span>
<span class="s">  26:     0x5600492d1dd2 - std::panicking::try::hd55d31f55d8c3744</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panicking.rs:370:19</span>
<span class="s">  27:     0x5600492674cc - std::panic::catch_unwind::h51b4b8f4c8b947c9</span>
<span class="s">                               at /rustc/9d1b2106e23b1abd32fce1f17267604a5102f57a/library/std/src/panic.rs:133:14</span>
<span class="s">  28:     0x5600491c0d7a - &lt;F as wasmtime::func::IntoFunc&lt;T,(wasmtime::func::Caller&lt;T&gt;,A1,A2,A3),R&gt;&gt;::into_func::wasm_to_host_shim::{{closure}}::hd913e7c8f9ad8ed3</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:1888:29</span>
<span class="s">  29:     0x560049197106 - wasmtime::func::Caller&lt;T&gt;::with::h85c65baca66367ae</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:1672:9</span>
<span class="s">  30:     0x5600491bcff0 - &lt;F as wasmtime::func::IntoFunc&lt;T,(wasmtime::func::Caller&lt;T&gt;,A1,A2,A3),R&gt;&gt;::into_func::wasm_to_host_shim::h7addf7b81507d9a1</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:1879:34</span>
<span class="s">  31:     0x7fb61545a1d7 - &lt;unknown&gt;</span>
<span class="s">  32:     0x7fb615458f3f - &lt;unknown&gt;</span>
<span class="s">  33:     0x7fb615459c82 - &lt;unknown&gt;</span>
<span class="s">  34:     0x7fb615459bc7 - &lt;unknown&gt;</span>
<span class="s">  35:     0x7fb615463668 - &lt;unknown&gt;</span>
<span class="s">  36:     0x7fb615459596 - &lt;unknown&gt;</span>
<span class="s">  37:     0x7fb61545706e - &lt;unknown&gt;</span>
<span class="s">  38:     0x7fb615484b1e - &lt;unknown&gt;</span>
<span class="s">  39:     0x7fb615484bc0 - &lt;unknown&gt;</span>
<span class="s">  40:     0x56004918b83d - wasmtime::func::Func::call_unchecked::{{closure}}::h67a44e4750d46d0a</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:799:13</span>
<span class="s">  41:     0x56004915406c - wasmtime_runtime::traphandlers::catch_traps::call_closure::h0840ee8827ee02fc</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:193:18</span>
<span class="s">  42:     0x56004a5e4eea - wasmtime_setjmp</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/helpers.c:55:3</span>
<span class="s">  43:     0x560049154038 - wasmtime_runtime::traphandlers::catch_traps::{{closure}}::hf60fe2c5951928a3</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:181:9</span>
<span class="s">  44:     0x5600491548c2 - wasmtime_runtime::traphandlers::CallThreadState::with::{{closure}}::ha0b6a6e90c48e4d1</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:231:38</span>
<span class="s">  45:     0x56004911234b - wasmtime_runtime::traphandlers::tls::set::h2561d962449b52c5</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:481:12</span>
<span class="s">  46:     0x56004915438d - wasmtime_runtime::traphandlers::CallThreadState::with::h6c6ff9ae16204d24</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:231:19</span>
<span class="s">  47:     0x560049153ad7 - wasmtime_runtime::traphandlers::catch_traps::h1bff7e654c707f33</span>
<span class="s">                               at /root/wasmtime/crates/runtime/src/traphandlers.rs:180:12</span>
<span class="s">  48:     0x56004918fc45 - wasmtime::func::invoke_wasm_and_catch_traps::ha7b68f43f1dc4864</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:1210:22</span>
<span class="s">  49:     0x56004918b78b - wasmtime::func::Func::call_unchecked::h479459478e9f9634</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:798:9</span>
<span class="s">  50:     0x56004918c7ba - wasmtime::func::Func::call_impl::h04a65515f80a4926</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs:948:13</span>
<span class="s">  51:     0x56004918b2a1 - wasmtime::func::Func::call::h0116c273a8d66505</span>
<span class="s">                               at /root/wasmtime/crates/wasmtime/src/func.rs</span>
<span class="s">[message truncated]</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="276056183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276056183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276056183">(Mar 21 2022 at 14:13)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3948#issuecomment-1073949288">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>cc @abrown </p>
</blockquote>



<a name="276079320"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276079320" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276079320">(Mar 21 2022 at 16:37)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/issues/3948#issuecomment-1074134625">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>@gusye1234, thanks for the detailed bug report. It looks like there may be some slight differences with the newer version of OpenVINO (e.g., tighter parameter checking) that could be causing the error; @brianjjones is planning to take a look. As a part of this, we will also try to upgrade the CI to use the latest version of OpenVINO, which is still <a href="https://github.com/bytecodealliance/wasmtime/blob/main/.github/actions/install-openvino/install.sh#L6">stuck back at 2020.4</a>.</p>
</blockquote>



<a name="276143062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276143062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276143062">(Mar 22 2022 at 04:39)</a>:</h4>
<p>gusye1234 <a href="https://github.com/bytecodealliance/wasmtime/issues/3948#issuecomment-1074718923">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>Sure! <br>
So maybe I can export the model from the newer version of OpenVINO to fix this problem.</p>
</blockquote>



<a name="276246220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276246220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276246220">(Mar 22 2022 at 19:59)</a>:</h4>
<p>brianjjones <a href="https://github.com/bytecodealliance/wasmtime/issues/3948#issuecomment-1075583276">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>@gusye1234 I've found the issue and created a this PR #3956. Thanks for catching the issue.</p>
<p>@abrown This is ready to review, thanks.</p>
</blockquote>



<a name="276535544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233948%20Wasi-NN%20ci%20example%20failed/near/276535544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233948.20Wasi-NN.20ci.20example.20failed.html#276535544">(Mar 24 2022 at 20:32)</a>:</h4>
<p>abrown closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3948">issue #3948</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<h3>Steps to Reproduce</h3>
<ul>
<li>run <code>bash ci/run-wasi-nn-example.sh</code></li>
</ul>
<h3>Expected Results</h3>
<p>A success inference should happen for this test, outputting the classification results for the mobilenet.</p>
<h3>Actual Results</h3>
<p>A panic happened at the step of </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="n">wasi_nn</span>::<span class="n">compute</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>It reported the error as :</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Host error: BackendError<span class="o">(</span>BackendAccess<span class="o">(</span>parameter mismatch<span class="o">))</span>
thread <span class="s1">'main'</span> panicked at <span class="s1">'not implemented'</span>, crates/wasi-nn/src/witx.rs:17:45
note: run with <span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span> environment variable to display a backtrace
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: commit head at e8ae3c0afdc7347d3de80c554353257efda2bbaa</p>
<p>Operating system: Ubuntu 20.04</p>
<p>Architecture: x86_64</p>
<p>OpenVINO version: 2021.4.582</p>
<h3>Extra Info</h3>
<p>My OpenVINO installed dir is on <code>/opt/intel/openvino_2021</code>, so I have to change one line in the <code>ci/run-wasi-nn-example.sh</code> to</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="nb">source</span> /opt/intel/openvino_2021/bin/setupvars.sh
</code></pre></div>
<p>but I don't think that's the problem.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>