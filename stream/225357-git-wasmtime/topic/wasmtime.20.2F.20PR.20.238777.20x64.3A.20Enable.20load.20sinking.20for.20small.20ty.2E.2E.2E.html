<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8777 x64: Enable load sinking for small ty... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html">wasmtime / PR #8777 x64: Enable load sinking for small ty...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="444103940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238777%20x64%3A%20Enable%20load%20sinking%20for%20small%20ty.../near/444103940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html#444103940">(Jun 11 2024 at 21:29)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8777">PR #8777</a>.</p>



<a name="444103941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238777%20x64%3A%20Enable%20load%20sinking%20for%20small%20ty.../near/444103941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html#444103941">(Jun 11 2024 at 21:29)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8777">PR #8777</a>.</p>



<a name="444103942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238777%20x64%3A%20Enable%20load%20sinking%20for%20small%20ty.../near/444103942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html#444103942">(Jun 11 2024 at 21:29)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8777">PR #8777</a> from <code>afonso360:x64-load-extends</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR adds support for load sinking in extend instructions on the x64 backend. These were pretty much already supported, but by default the x64 backend doesn't load sink small types. (It'd be neat to fix that at some point)</p>
<p>The only change here is to allow it to do so for <code>movzx</code> and <code>movsx</code>. These instructions have the correct implementation for small types and shouldn't try to perform a load larger than the source type.</p>
<p>This should also be the last backend that needs this implementation, s390x already supports this, so the next PR in this series is removing the <code>{u,s}loadNN</code> instructions from cranelift.</p>
<p>CC: <a href="https://github.com/bytecodealliance/wasmtime/issues/6056">https://github.com/bytecodealliance/wasmtime/issues/6056</a></p>
</blockquote>



<a name="444106976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238777%20x64%3A%20Enable%20load%20sinking%20for%20small%20ty.../near/444106976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html#444106976">(Jun 11 2024 at 21:52)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8777#pullrequestreview-2111513157">PR review</a>:</p>
<blockquote>
<p>LGTM, thanks!</p>
</blockquote>



<a name="444108782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238777%20x64%3A%20Enable%20load%20sinking%20for%20small%20ty.../near/444108782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238777.20x64.3A.20Enable.20load.20sinking.20for.20small.20ty.2E.2E.2E.html#444108782">(Jun 11 2024 at 22:07)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8777">PR #8777</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>