<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7201 aarch64: Implement TLSDESC for TLS GD... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html">wasmtime / PR #7201 aarch64: Implement TLSDESC for TLS GD...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="395766285"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395766285" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395766285">(Oct 09 2023 at 21:42)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7201">PR #7201</a> from <code>afonso360:aarch64-tlsdesc</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR replaces the current TLS GD sequence with Thead-Local Storage Descriptors (TLSDESC). TLSDESC is a improved TLS GD model that switches to a custom calling convention that preserves most registers, preventing clobbering and restoring around the regular <code>__tls_get_addr</code> call.</p>
<p>Furthermore, TLSDESC supports a number of relaxations that actually avoid the function call entirely in some situations. These relaxations are not allowed to change the code sequence size, so there is no danger of changing the label offsets after being resolved by cranelift.</p>
<p>I've tested this with cg_clif's testsuite. Using both lld and the gnu linker.</p>
<p>Closes: #6778 </p>
</blockquote>



<a name="395766288"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395766288" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395766288">(Oct 09 2023 at 21:42)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7201">PR #7201</a>.</p>



<a name="395766289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395766289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395766289">(Oct 09 2023 at 21:42)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7201">PR #7201</a>.</p>



<a name="395770117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395770117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395770117">(Oct 09 2023 at 22:21)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7201">PR #7201</a>.</p>



<a name="395852597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395852597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395852597">(Oct 10 2023 at 10:30)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7201#pullrequestreview-1667173705">PR review</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="395859740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237201%20aarch64%3A%20Implement%20TLSDESC%20for%20TLS%20GD.../near/395859740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237201.20aarch64.3A.20Implement.20TLSDESC.20for.20TLS.20GD.2E.2E.2E.html#395859740">(Oct 10 2023 at 11:14)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7201">PR #7201</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>