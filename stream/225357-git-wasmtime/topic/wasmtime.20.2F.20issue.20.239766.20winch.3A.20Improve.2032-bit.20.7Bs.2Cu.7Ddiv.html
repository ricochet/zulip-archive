<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9766 winch: Improve 32-bit {s,u}div · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239766.20winch.3A.20Improve.2032-bit.20.7Bs.2Cu.7Ddiv.html">wasmtime / issue #9766 winch: Improve 32-bit {s,u}div</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="486996287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239766%20winch%3A%20Improve%2032-bit%20%7Bs%2Cu%7Ddiv/near/486996287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239766.20winch.3A.20Improve.2032-bit.20.7Bs.2Cu.7Ddiv.html#486996287">(Dec 09 2024 at 13:32)</a>:</h4>
<p>saulecabrera opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9766">issue #9766</a>:</p>
<blockquote>
<p>While reviewing <a href="https://github.com/bytecodealliance/wasmtime/pull/9762">https://github.com/bytecodealliance/wasmtime/pull/9762</a>, I realized that in the case of 32-bit operands a sign-extension is required given that <code>cranelift-codegen</code>, only accepts 64-bit operands. </p>
<p>The ARM64 documentation states [1], [2] that 32-bit operands for division are allowed.</p>
<p>[1]: <a href="https://developer.arm.com/documentation/ddi0596/2020-12/Base-Instructions/SDIV--Signed-Divide-">https://developer.arm.com/documentation/ddi0596/2020-12/Base-Instructions/SDIV--Signed-Divide-</a><br>
[2]: <a href="https://developer.arm.com/documentation/ddi0602/2024-09/Base-Instructions/UDIV--Unsigned-divide-">https://developer.arm.com/documentation/ddi0602/2024-09/Base-Instructions/UDIV--Unsigned-divide-</a></p>
<p>Introducing support for 32-bit operands means that in Winch we can skip the extension sequence when dealing with 32-bit operands, similar th </p>
<p>As a side note, it seems that when migrating to ISLE <a href="https://github.com/bytecodealliance/wasmtime/pull/3572/files#diff-bd652d5af8795961ba7456cf427fdae37bb82500e9f18fa6fc1621281bd1ab58L103">the intention was to add support for 32-bit operands</a>. </p>
<p>cc @alexcrichton / @cfallin I'm not entirely familiar with the development history of the Aarch64 backend, is there any other reason to be aware of when considering support for 32-bit operands?<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>