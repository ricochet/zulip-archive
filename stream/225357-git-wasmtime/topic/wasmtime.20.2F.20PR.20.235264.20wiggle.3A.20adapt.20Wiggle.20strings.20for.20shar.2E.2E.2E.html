<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5264 wiggle: adapt Wiggle strings for shar... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html">wasmtime / PR #5264 wiggle: adapt Wiggle strings for shar...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="310058406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310058406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310058406">(Nov 14 2022 at 18:58)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a> from <code>shmem-in-wiggle-str</code> to <code>main</code>:</p>
<blockquote>
<p>This is an extension of #5229 for the <code>&amp;str</code> and <code>&amp;mut str</code> types. As documented there, we are attempting to maintain Rust guarantees for slices that Wiggle hands out in the presence of WebAssembly shared memory, in which case multiple threads could be modifying the underlying data of the slice.</p>
<p>This change changes the API of <code>GuestPtr</code> to return an <code>Option</code> which is <code>None</code> when attempting to view the WebAssembly data as a string and the underlying WebAssembly memory is shared. This reuses the <code>UnsafeGuestSlice</code> structure from #5229 to do so and appropriately marks the region as borrowed in Wiggle's manual borrow checker. Each original call site in this project's WASI implementations is fixed up to <code>expect</code> that a non-shared memory is used.  (Note that I can find no uses of <code>GuestStrMut</code> in the WASI implementations).</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="310058407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310058407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310058407">(Nov 14 2022 at 18:58)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a>.</p>



<a name="310068350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310068350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310068350">(Nov 14 2022 at 19:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5264#pullrequestreview-1179739159">PR review</a>.</p>



<a name="310087234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310087234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310087234">(Nov 14 2022 at 21:42)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a> from <code>shmem-in-wiggle-str</code> to <code>main</code>.</p>



<a name="310087464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310087464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310087464">(Nov 14 2022 at 21:43)</a>:</h4>
<p><strong>abrown</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a> as ready for review.</p>



<a name="310093156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310093156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310093156">(Nov 14 2022 at 22:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5264#pullrequestreview-1179931747">PR review</a>.</p>



<a name="310093172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310093172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310093172">(Nov 14 2022 at 22:21)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a>.</p>



<a name="310094959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235264%20wiggle%3A%20adapt%20Wiggle%20strings%20for%20shar.../near/310094959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235264.20wiggle.3A.20adapt.20Wiggle.20strings.20for.20shar.2E.2E.2E.html#310094959">(Nov 14 2022 at 22:33)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5264">PR #5264</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>