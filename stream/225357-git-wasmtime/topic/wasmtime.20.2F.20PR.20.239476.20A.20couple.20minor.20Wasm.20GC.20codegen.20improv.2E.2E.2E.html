<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9476 A couple minor Wasm GC codegen improv... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html">wasmtime / PR #9476 A couple minor Wasm GC codegen improv...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="477279654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477279654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477279654">(Oct 16 2024 at 18:51)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a> from <code>fitzgen:minor-gc-codegen-improvements</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<ol>
<li>Don't bounds-check GC refs that are returned from trusted libcalls</li>
<li>Mark loading the DRC collector's activations table pointer from the <code>vmctx</code> as <code>readonly</code></li>
</ol>
<p>Also a minor refactor to emitting code to get the GC heap base and bound that resulted in a mechanical value renumbering in the GC disas tests. See each commit in isolation for better diffs.</p>
</blockquote>



<a name="477279656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477279656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477279656">(Oct 16 2024 at 18:51)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a>.</p>



<a name="477279660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477279660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477279660">(Oct 16 2024 at 18:51)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a>.</p>



<a name="477294821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477294821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477294821">(Oct 16 2024 at 20:27)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a>.</p>



<a name="477307265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477307265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477307265">(Oct 16 2024 at 21:58)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#pullrequestreview-2373753874">PR review</a>.</p>



<a name="477307267"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477307267" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477307267">(Oct 16 2024 at 21:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#discussion_r1803841852">PR review comment</a>:</p>
<blockquote>
<p>Is the <code>with_readonly</code> here going to be accurate in the future? If I understand this right it's akin to <code>memory.size</code> which is readonly if <code>memory.grow</code> can't be used, but if we support for example more dynamic configurations of GC heaps in the future will this still be true?</p>
</blockquote>



<a name="477307268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477307268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477307268">(Oct 16 2024 at 21:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#discussion_r1803842086">PR review comment</a>:</p>
<blockquote>
<p>Similar to below, is this <code>with_readonly</code> going to be true in the face of a dynamic GC heap that can move in the future?</p>
</blockquote>



<a name="477326855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477326855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477326855">(Oct 17 2024 at 01:04)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#issuecomment-2418275574">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="477468492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477468492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477468492">(Oct 17 2024 at 15:17)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#pullrequestreview-2375565168">PR review</a>.</p>



<a name="477468493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477468493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477468493">(Oct 17 2024 at 15:17)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9476#discussion_r1804979419">PR review comment</a>:</p>
<blockquote>
<p>This code will all be refactored quite a bit for when we support backing GC heaps with linear memories and the static vs dynamic knobs and all that. This is really just for in the meantime, and to split out from some other stuff I am working on.</p>
</blockquote>



<a name="477471736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239476%20A%20couple%20minor%20Wasm%20GC%20codegen%20improv.../near/477471736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239476.20A.20couple.20minor.20Wasm.20GC.20codegen.20improv.2E.2E.2E.html#477471736">(Oct 17 2024 at 15:33)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9476">PR #9476</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>