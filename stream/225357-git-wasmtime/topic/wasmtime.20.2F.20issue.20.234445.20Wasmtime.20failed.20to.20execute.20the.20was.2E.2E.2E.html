<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4445 Wasmtime failed to execute the was... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html">wasmtime / issue #4445 Wasmtime failed to execute the was...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="289564557"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289564557" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289564557">(Jul 14 2022 at 08:31)</a>:</h4>
<p>Zhangyx24 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9110033/test.zip">test.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.2777.<br>
The program test.wasm which is a Go database (TiDB) is able to run on wasmer.</p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime run test.wasm</code><br>
or <code>wasmtime compile test.wasm</code> and then <code>wasmtime run --allow-precompiled test.cwasm</code></p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :<br>
TiDB [pingcap]&gt;</p>
<h3>Actual Results</h3>
<p>It was blocked and print nothing.</p>
<h3>Versions and Environment</h3>
<p>wasmtime 0.38.0</p>
<p>Operating system: macOS and ubuntu20.04</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="289564566"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289564566" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289564566">(Jul 14 2022 at 08:31)</a>:</h4>
<p>Zhangyx24 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9110033/test.zip">test.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.2777.<br>
The program test.wasm which is a Go database (TiDB) is able to run on wasmer.</p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime run test.wasm</code><br>
or <code>wasmtime compile test.wasm</code> and then <code>wasmtime run --allow-precompiled test.cwasm</code></p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :<br>
TiDB [pingcap]&gt;</p>
<h3>Actual Results</h3>
<p>It was blocked and print nothing.</p>
<h3>Versions and Environment</h3>
<p>wasmtime 0.38.0</p>
<p>Operating system: macOS and ubuntu20.04</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="289567484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289567484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289567484">(Jul 14 2022 at 09:06)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184192820">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>As mentioned in <a href="https://github.com/wasmerio/wasmer/issues/2777#issuecomment-1184188296">https://github.com/wasmerio/wasmer/issues/2777#issuecomment-1184188296</a> it takes a long time to compile with Cranelift. Wasmtime doesn't have a singlepass compiler.</p>
</blockquote>



<a name="289568532"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289568532" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289568532">(Jul 14 2022 at 09:19)</a>:</h4>
<p>Zhangyx24 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184205622">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>Thanks a lot !</p>
</blockquote>



<a name="289568533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289568533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289568533">(Jul 14 2022 at 09:19)</a>:</h4>
<p>Zhangyx24 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9110033/test.zip">test.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.2777.<br>
The program test.wasm which is a Go database (TiDB) is able to run on wasmer.</p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime run test.wasm</code><br>
or <code>wasmtime compile test.wasm</code> and then <code>wasmtime run --allow-precompiled test.cwasm</code></p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :<br>
TiDB [pingcap]&gt;</p>
<h3>Actual Results</h3>
<p>It was blocked and print nothing.</p>
<h3>Versions and Environment</h3>
<p>wasmtime 0.38.0</p>
<p>Operating system: macOS and ubuntu20.04</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="289569169"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289569169" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289569169">(Jul 14 2022 at 09:26)</a>:</h4>
<p>Zhangyx24 reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9110033/test.zip">test.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.2777.<br>
The program test.wasm which is a Go database (TiDB) is able to run on wasmer.</p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime run test.wasm</code><br>
or <code>wasmtime compile test.wasm</code> and then <code>wasmtime run --allow-precompiled test.cwasm</code></p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :<br>
TiDB [pingcap]&gt;</p>
<h3>Actual Results</h3>
<p>It was blocked and print nothing.</p>
<h3>Versions and Environment</h3>
<p>wasmtime 0.38.0</p>
<p>Operating system: macOS and ubuntu20.04</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="289569249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289569249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289569249">(Jul 14 2022 at 09:27)</a>:</h4>
<p>Zhangyx24 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184213626">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>I'm so sorry that I didn't describle the actual problem.<br>
wasmtime print the following information:<br>
panic: cloud not get fdstat of root: Bad file number</p>
<p>goroutine 1 [running]:<br>
syscall.init.0()<br>
        /Users/joshua/go-wasi/src/syscall/fs_wasi.go:307 +0xd</p>
</blockquote>



<a name="289569618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289569618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289569618">(Jul 14 2022 at 09:31)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184217990">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>You probably need to pass <code>--dir /</code> or some other argument to wasmtime to give it access to the filesystem.</p>
</blockquote>



<a name="289569836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289569836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289569836">(Jul 14 2022 at 09:34)</a>:</h4>
<p>Zhangyx24 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184220535">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>But I execute with wasmer in the same dir, and wasmer succeed.</p>
</blockquote>



<a name="289597287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289597287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289597287">(Jul 14 2022 at 14:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1184500644">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>Locally this runs successfully with <code>--dir .</code> for me. If this works in other wasm runtimes then they might have different default WASI behavior. I don't think there's a bug with Wasmtime here though.</p>
</blockquote>



<a name="289597288"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289597288" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289597288">(Jul 14 2022 at 14:14)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9110033/test.zip">test.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.2777.<br>
The program test.wasm which is a Go database (TiDB) is able to run on wasmer.</p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime run test.wasm</code><br>
or <code>wasmtime compile test.wasm</code> and then <code>wasmtime run --allow-precompiled test.cwasm</code></p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :<br>
TiDB [pingcap]&gt;</p>
<h3>Actual Results</h3>
<p>It was blocked and print nothing.</p>
<h3>Versions and Environment</h3>
<p>wasmtime 0.38.0</p>
<p>Operating system: macOS and ubuntu20.04</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="289672067"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234445%20Wasmtime%20failed%20to%20execute%20the%20was.../near/289672067" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234445.20Wasmtime.20failed.20to.20execute.20the.20was.2E.2E.2E.html#289672067">(Jul 15 2022 at 01:29)</a>:</h4>
<p>Zhangyx24 <a href="https://github.com/bytecodealliance/wasmtime/issues/4445#issuecomment-1185079394">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4445">issue #4445</a>:</p>
<blockquote>
<p>Thanks a lot!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>