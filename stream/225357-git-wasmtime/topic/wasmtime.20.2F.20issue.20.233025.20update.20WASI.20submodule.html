<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3025 update WASI submodule · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html">wasmtime / issue #3025 update WASI submodule</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="243695373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243695373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243695373">(Jun 23 2021 at 18:43)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867074057">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<p>Thanks! FWIW the location of the <code>WASI</code> submodule is pretty finnicky especially when it comes to publishing to <a href="http://crates.io">crates.io</a>. For the easiest time updating I'd recommend updating it in-place if possible</p>
</blockquote>



<a name="243696985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243696985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243696985">(Jun 23 2021 at 18:56)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867082015">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @kubkon</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasi"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>kubkon: wasi</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="243704353"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243704353" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243704353">(Jun 23 2021 at 19:58)</a>:</h4>
<p>cratelyn <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867118118">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<blockquote>
<p>Thanks! FWIW the location of the <code>WASI</code> submodule is pretty finnicky especially when it comes to publishing to <a href="http://crates.io">crates.io</a>. For the easiest time updating I'd recommend updating it in-place if possible</p>
</blockquote>
<p>Thanks @alexcrichton! I'll give that another go, moving the submodule was motivated by errors I was seeing that looked like a variation of <a href="https://github.com/rust-lang/cargo/issues/6745">rust-lang/cargo#6745</a>. I wasn't able to <code>exclude</code> that directory from the root workspace, so commands like <code>cargo build</code> were failing due to multiple workspace roots being found.</p>
</blockquote>



<a name="243707799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243707799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243707799">(Jun 23 2021 at 20:26)</a>:</h4>
<p>cratelyn <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867134355">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">multiple</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">roots</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">workspace</span>:
  <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="w"></span>
<span class="w">  </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"></span>
</code></pre></div>
<p>For reference, this is the error I am seeing after updating the WASI submodule. I believe it's because of the <code>witx-cli</code> changes in <a href="https://github.com/WebAssembly/WASI/issues/398">WebAssembly/WASI#398</a> playing poorly with structure of this project.</p>
</blockquote>



<a name="243707957"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243707957" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243707957">(Jun 23 2021 at 20:27)</a>:</h4>
<p>cratelyn edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867134355">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">multiple</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">roots</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">same</span><span class="w"> </span><span class="n">workspace</span>:
  <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="w"></span>
<span class="w">  </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"></span>
</code></pre></div>
<p>For reference, this is the error I am seeing after updating the WASI submodule. I believe it's because of the <code>witx-cli</code> changes in <a href="https://github.com/WebAssembly/WASI/issues/398">WebAssembly/WASI#398</a> playing poorly with structure of this project.</p>
<p>As alluded in my comment above, adding an <code>exclude = ["crates/wasi-common/WASI/tools/witx"]</code> to the root manifest doesn't end up working, because <code>"crates/wasi-common"</code> is a member of the workspace.</p>
</blockquote>



<a name="243709417"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243709417" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243709417">(Jun 23 2021 at 20:38)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867141264">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<p>Oh dear... I think there's probably three ways to fix this:</p>
<ol>
<li>Remove the workspace changes to the WASI repository, enabling integration here the same as before.</li>
<li>Fix the issues after moving this <code>vendor</code> dir around (I don't know off-hand how hard this would be)</li>
<li>Depend on the <a href="http://crates.io">crates.io</a> version of <code>witx</code>, not a git submodule. I think that this would require doing the same steps from (2), but we could just avoid a git submodule.</li>
</ol>
<p>The easiest is probably the first one here, and the best is probably the 3rd, but that requires changes of how we integrate the WASI spec updates into this repository, since I think we rely on them existing in the <code>wasi-common</code> crate but now they'd be stored in the <code>witx</code> crate itself (I think?) published to <a href="http://crates.io">crates.io</a></p>
</blockquote>



<a name="243709780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243709780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243709780">(Jun 23 2021 at 20:41)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867142706">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<p>Hm actually scratch that I don't think the <code>witx</code> crate as published to <a href="http://crates.io">crates.io</a> contains the wasi snapshot witx files. Sorry for this mess :(</p>
<p>I'd probably recommend just hacking around this by removing the <code>[workspace]</code> in the <code>witx</code> crate for now?  Ideally we'll fix this in the long term by separating the tooling and the <code>*.witx</code> files since we want tooling as a <a href="http://crates.io">crates.io</a> dep and the <code>*.witx</code> files as a submodule.</p>
</blockquote>



<a name="243716859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243716859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243716859">(Jun 23 2021 at 21:41)</a>:</h4>
<p>cratelyn <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867180827">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Run</span><span class="w"> </span><span class="n">rustc</span><span class="w"> </span><span class="n">scripts</span><span class="o">/</span><span class="n">publish</span><span class="p">.</span><span class="n">rs</span><span class="w"></span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="s">"witx-cli"</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">whitelist</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">blacklist</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">scripts</span><span class="o">/</span><span class="n">publish</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">135</span>:<span class="mi">13</span><span class="w"></span>
</code></pre></div>
<p>This shouldn't be _too_ hard to fix, but I see some special logic around <code>witx</code> and that'll have to wait until tomorrow morning for me.</p>
</blockquote>



<a name="243716961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243716961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243716961">(Jun 23 2021 at 21:42)</a>:</h4>
<p>cratelyn <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867181235">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<p>Oh I'm going to mark this as "ready for review" since we're kinda already in the process of reviewing this work. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="243804619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243804619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243804619">(Jun 24 2021 at 15:39)</a>:</h4>
<p>cratelyn <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867741175">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">current</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">believes</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">not</span>:
<span class="nc">current</span>:   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">workspace</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>

<span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">fixable</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="err">`</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">members</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="n">at</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">exclude</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="err">`</span><span class="p">[</span><span class="n">workspace</span><span class="p">]</span><span class="err">`</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>Oh no :fearful: It seems it's our old friend again. I'm trying to find a way around this...</p>
</blockquote>



<a name="243807385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243807385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243807385">(Jun 24 2021 at 15:58)</a>:</h4>
<p>cratelyn edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867741175">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">current</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">believes</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">not</span>:
<span class="nc">current</span>:   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">workspace</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>

<span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">fixable</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="err">`</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">members</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="n">at</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">exclude</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="err">`</span><span class="p">[</span><span class="n">workspace</span><span class="p">]</span><span class="err">`</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>Oh no :fearful: It seems it's our old friend again. I'm trying to find a way around this. I've tried...</p>
<p><strong>Add <code>witx-cli</code> to root workspace</strong></p>
<p>This fails, with an error that looks like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">no</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">`</span><span class="n">diff</span><span class="err">`</span><span class="w"> </span><span class="n">found</span><span class="w"></span>
<span class="n">location</span><span class="w"> </span><span class="n">searched</span>: <span class="nc">registry</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/rust-lang/crates.io-index`</span>
<span class="n">perhaps</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">meant</span>: <span class="nc">ff</span><span class="p">,</span><span class="w"> </span><span class="n">der</span><span class="p">,</span><span class="w"> </span><span class="n">half</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="p">)</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<p>Not entirely sure why this happens, honestly? But it seems... wrong.</p>
</blockquote>



<a name="243807618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243807618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243807618">(Jun 24 2021 at 16:00)</a>:</h4>
<p>cratelyn edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867741175">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">current</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">believes</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">not</span>:
<span class="nc">current</span>:   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">workspace</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>

<span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">fixable</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="err">`</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">members</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="n">at</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">exclude</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="err">`</span><span class="p">[</span><span class="n">workspace</span><span class="p">]</span><span class="err">`</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>Oh no :fearful: It seems it's our old friend again. I'm trying to find a way around this. I've tried...</p>
<p><span aria-label="one" class="emoji emoji-0031-20e3" role="img" title="one">:one:</span> <strong>Add <code>witx-cli</code> to root <code>workspace.members</code></strong></p>
<p>This fails, with an error that looks like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">no</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">`</span><span class="n">diff</span><span class="err">`</span><span class="w"> </span><span class="n">found</span><span class="w"></span>
<span class="n">location</span><span class="w"> </span><span class="n">searched</span>: <span class="nc">registry</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/rust-lang/crates.io-index`</span>
<span class="n">perhaps</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">meant</span>: <span class="nc">ff</span><span class="p">,</span><span class="w"> </span><span class="n">der</span><span class="p">,</span><span class="w"> </span><span class="n">half</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="p">)</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<p>Not entirely sure why this happens, honestly? But it seems... wrong.</p>
<p><span aria-label="two" class="emoji emoji-0032-20e3" role="img" title="two">:two:</span> <strong>Add <code>witx-cli</code> to root <code>workspace.exclude</code></strong></p>
<p>This doesn't change the error, AIUI this is the cargo issue I linked in a comment above.</p>
</blockquote>



<a name="243810971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233025%20update%20WASI%20submodule/near/243810971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233025.20update.20WASI.20submodule.html#243810971">(Jun 24 2021 at 16:26)</a>:</h4>
<p>cratelyn edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3025#issuecomment-867741175">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3025">issue #3025</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">current</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">believes</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">it</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">not</span>:
<span class="nc">current</span>:   <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">workspace</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>

<span class="n">this</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">fixable</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="err">`</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="err">`</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">members</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">manifest</span><span class="w"> </span><span class="n">located</span><span class="w"> </span><span class="n">at</span>: <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"></span>
<span class="n">Alternatively</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="p">,</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">exclude</span><span class="err">`</span><span class="w"> </span><span class="n">array</span><span class="p">,</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="err">`</span><span class="p">[</span><span class="n">workspace</span><span class="p">]</span><span class="err">`</span><span class="w"> </span><span class="n">table</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">package</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>Oh no :fearful: It seems it's our old friend again. I'm trying to find a way around this. I've tried...</p>
<p><span aria-label="one" class="emoji emoji-0031-20e3" role="img" title="one">:one:</span> <strong>Add <code>witx-cli</code> to root <code>workspace.members</code></strong></p>
<p>This fails, with an error that looks like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">no</span><span class="w"> </span><span class="n">matching</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">`</span><span class="n">diff</span><span class="err">`</span><span class="w"> </span><span class="n">found</span><span class="w"></span>
<span class="n">location</span><span class="w"> </span><span class="n">searched</span>: <span class="nc">registry</span><span class="w"> </span><span class="err">`</span><span class="n">https</span>:<span class="c1">//github.com/rust-lang/crates.io-index`</span>
<span class="n">perhaps</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">meant</span>: <span class="nc">ff</span><span class="p">,</span><span class="w"> </span><span class="n">der</span><span class="p">,</span><span class="w"> </span><span class="n">half</span><span class="p">,</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="err">`</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">katelyn</span><span class="o">/</span><span class="n">fsly</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="o">/</span><span class="n">WASI</span><span class="o">/</span><span class="n">tools</span><span class="o">/</span><span class="n">witx</span><span class="o">-</span><span class="n">cli</span><span class="p">)</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<p>Not entirely sure why this happens, honestly? But it seems... wrong.</p>
<p><span aria-label="two" class="emoji emoji-0032-20e3" role="img" title="two">:two:</span> <strong>Add <code>witx-cli</code> to root <code>workspace.exclude</code></strong></p>
<p>This doesn't change the error, AIUI this is the cargo issue I linked in a comment above.</p>
<p><span aria-label="three" class="emoji emoji-0033-20e3" role="img" title="three">:three:</span> <strong>Make <code>crates/wasi-common</code> a workspace</strong></p>
<p>This one feels like a non-starter, as we're instantly in a state of multiple workspace roots.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>