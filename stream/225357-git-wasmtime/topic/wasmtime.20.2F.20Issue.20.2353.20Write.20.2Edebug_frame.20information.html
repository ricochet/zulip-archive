<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #53 Write .debug_frame information · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html">wasmtime / Issue #53 Write .debug_frame information</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="189967273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/189967273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#189967273">(Mar 07 2020 at 11:18)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596077628" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596077628">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<p>@yurydelendik what's the status of this PR, are there parts that we should still land, or is this superseded by things that landed in the meantime?</p>
</blockquote>



<a name="190072984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190072984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190072984">(Mar 09 2020 at 14:16)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596553948" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596553948">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<blockquote>
<p>what's the status of this PR, are there parts that we should still land, or is this superseded by things that landed in the meantime?</p>
</blockquote>
<p>There is no direct need in writing .debug_frame information -- debuggers now can successfully guess frame backtrace. Though I would like to convert this PR into "write .eh_frame information" issue -- there is a change we will need this information for cranelift's wasm exception handling.</p>
</blockquote>



<a name="190073176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190073176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190073176">(Mar 09 2020 at 14:18)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596556432" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596556432">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<p>Ok, makes sense. Should we perhaps close this PR and you open a new one with that new purpose, though?</p>
</blockquote>



<a name="190074100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190074100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190074100">(Mar 09 2020 at 14:26)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596564548" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596564548">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<blockquote>
<p>debuggers now can successfully guess frame backtrace</p>
</blockquote>
<p>Last time I checked, gdb couldn't guess it when opt_level=none is used, because it didn't understand redundant <code>rex</code> prefixes for <code>push rbp</code>.</p>
</blockquote>



<a name="190077088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190077088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190077088">(Mar 09 2020 at 14:52)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596580244" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596580244">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<blockquote>
<p>gdb couldn't guess it when opt_level=none is used, because it didn't understand redundant rex prefixes for push rbp.</p>
</blockquote>
<p>Soon I'm about to dive into compatibility with GDB, and I would like to track that independently in separate bug(s). AFAIK <code>rex</code> issue was addressed, at least for LLDB. I will rebase this PR anyway, e.g. to check the theory that it will help with GDB.</p>
</blockquote>



<a name="190077727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190077727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190077727">(Mar 09 2020 at 14:59)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596583753" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-596583753">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<p>For reference: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/146#issuecomment-449474527" target="_blank" title="https://github.com/bjorn3/rustc_codegen_cranelift/issues/146#issuecomment-449474527">https://github.com/bjorn3/rustc_codegen_cranelift/issues/146#issuecomment-449474527</a></p>
</blockquote>



<a name="190170775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190170775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190170775">(Mar 10 2020 at 13:26)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-597084589" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-597084589">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<p>@bjorn3 I rebased the PR. At this I know there is plenty of code duplication, e.g. with writing <code>fde</code> or <code>map_reg</code>, but it can be used to produce object file with the proper .debug_frame.</p>
<p>Maybe after its landing, we can refactor it for .eh_frame support and move to the cranelift ?</p>
</blockquote>



<a name="190180601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%2353%20Write%20.debug_frame%20information/near/190180601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.2353.20Write.20.2Edebug_frame.20information.html#190180601">(Mar 10 2020 at 14:49)</a>:</h4>
<p>yurydelendik edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-597084589" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53#issuecomment-597084589">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/53" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/53">Issue #53</a>:</p>
<blockquote>
<p>@bjorn3 I rebased the PR. At this momennt I know there is plenty of code duplication, e.g. with writing <code>fde</code> or <code>map_reg</code>, but this PR can be used to produce object file with the proper .debug_frame.</p>
<p>Maybe after its landing, we can refactor it for .eh_frame support and move to the cranelift ?</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>