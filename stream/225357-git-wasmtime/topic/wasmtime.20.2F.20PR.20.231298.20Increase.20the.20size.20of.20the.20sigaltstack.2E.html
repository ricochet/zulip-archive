<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1298 Increase the size of the sigaltstack. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html">wasmtime / PR #1298 Increase the size of the sigaltstack.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="190349756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190349756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190349756">(Mar 12 2020 at 01:33)</a>:</h4>
<p>sunfishcode opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1298" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298">PR #1298</a> from <code>bigger-sigaltstack</code> to <code>master</code>:</p>
<blockquote>
<p>Rust's stack overflow handler installs a sigaltstack stack with size<br>
SIGSTKSZ, which is too small for some of the things we do in signal<br>
handlers. Install bigger sigaltstack stacks so that we have enough<br>
space.</p>
<p>cc #900. The code here is a sketch of a possible<br>
alternative. Advantages of this approach include not needing extra<br>
prologue checks, not disabling the Rust stack overflow message, and<br>
ensuring that we always have a guard page.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" target="_blank" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="190404185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190404185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190404185">(Mar 12 2020 at 15:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1298#pullrequestreview-373666627" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298#pullrequestreview-373666627">PR Review</a>.</p>



<a name="190404186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190404186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190404186">(Mar 12 2020 at 15:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1298#pullrequestreview-373666627" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298#pullrequestreview-373666627">PR Review</a>.</p>



<a name="190404187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190404187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190404187">(Mar 12 2020 at 15:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1298#discussion_r391706249" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298#discussion_r391706249">PR Review Comment</a>:</p>
<blockquote>
<p>Could this test be done before we start mmap'ing? We could check to see if the sigaltstack size is already big enough or if it's disabled then we we can act before we mmap our own and set it.</p>
</blockquote>



<a name="190404188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190404188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190404188">(Mar 12 2020 at 15:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1298#discussion_r391706740" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298#discussion_r391706740">PR Review Comment</a>:</p>
<blockquote>
<p>How come there's an OOM trap, but then this is an abort? Could this translate to a trap as well?</p>
</blockquote>



<a name="190554463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231298%20Increase%20the%20size%20of%20the%20sigaltstack./near/190554463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231298.20Increase.20the.20size.20of.20the.20sigaltstack.2E.html#190554463">(Mar 13 2020 at 21:03)</a>:</h4>
<p>sunfishcode closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/1298" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1298">PR #1298</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>