<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1230 WasmTime.Net: Access to Handle in ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html">wasmtime / Issue #1230 WasmTime.Net: Access to Handle in ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="189770869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189770869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189770869">(Mar 05 2020 at 08:56)</a>:</h4>
<p>christophwille opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>I originally built <a href="https://github.com/christophwille/csharp-opa-wasm/" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/">https://github.com/christophwille/csharp-opa-wasm/</a> using WasmerSharp. Today I started my initial run on porting it to WasmTime, however, I ran into a snag:</p>
<p><a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19">https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19</a></p>
<p>All my imports are satisfied by name, however, the env.memory import bombs, exception details in the source code via comment, but basically the wasm expects two pages of memory minimum.</p>
<p>The WasmerSharp equivalent is here <a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14">https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14</a>. My guess is that I'd actually need the handle here which is internal for Memory, or: I am using the entirely wrong class because I am translating from a different API by similarity... </p>
</blockquote>



<a name="189770914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189770914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189770914">(Mar 05 2020 at 08:57)</a>:</h4>
<p>christophwille edited <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>I originally built <a href="https://github.com/christophwille/csharp-opa-wasm/" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/">https://github.com/christophwille/csharp-opa-wasm/</a> using WasmerSharp. Today I started my initial run on porting it to WasmTime, however, I ran into a snag with the import for env.memory:</p>
<p><a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19">https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19</a></p>
<p>All my imports are satisfied by name, however, the env.memory import bombs, exception details in the source code via comment, but basically the wasm expects two pages of memory minimum.</p>
<p>The WasmerSharp equivalent is here <a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14">https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14</a>. My guess is that I'd actually need the handle here which is internal for Memory, or: I am using the entirely wrong class because I am translating from a different API by similarity... </p>
</blockquote>



<a name="189773650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189773650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189773650">(Mar 05 2020 at 09:36)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595126168" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595126168">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>CC @peterhuene </p>
</blockquote>



<a name="189824268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189824268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189824268">(Mar 05 2020 at 18:54)</a>:</h4>
<p>christophwille <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595389728" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595389728">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>ok, I traced the min exception to here:</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/misc/dotnet/src/Bindings/MemoryBinding.cs#L57" target="_blank" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/misc/dotnet/src/Bindings/MemoryBinding.cs#L57">https://github.com/bytecodealliance/wasmtime/blob/master/crates/misc/dotnet/src/Bindings/MemoryBinding.cs#L57</a></p>
<p>and yes, the wat shows (import "env" "memory" (memory $env.memory 2)) with a minimum of 2. This fixes the exception I reported. Just for clarification: providing more min memory than min requested is really a problem?</p>
</blockquote>



<a name="189825075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189825075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189825075">(Mar 05 2020 at 19:03)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>Hi @christophwille.  I think these restrictions in the .NET API should be relaxed so that the host doesn't have to specify exactly the same values.</p>
<p>By the way, the constructor to <code>Memory</code> expresses the minimum and maximums in page sizes, so this should do it:</p>
<div class="codehilite"><pre><span></span>EnvMemory = new Memory(2); // min page size = 2
</pre></div>


</blockquote>



<a name="189825083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189825083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189825083">(Mar 05 2020 at 19:03)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>Hi @christophwille.  I think these restrictions in the .NET API should be relaxed so that the host doesn't have to specify exactly the same values.</p>
<p>By the way, the constructor to <code>Memory</code> expresses the minimum and maximums in page sizes, so this should do it:</p>
<div class="codehilite"><pre><span></span><span class="n">EnvMemory</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Memory</span><span class="p">(</span><span class="m">2</span><span class="p">);</span> <span class="c1">// min page size = 2</span>
</pre></div>


</blockquote>



<a name="189825116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189825116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189825116">(Mar 05 2020 at 19:04)</a>:</h4>
<p>peterhuene assigned <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>I originally built <a href="https://github.com/christophwille/csharp-opa-wasm/" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/">https://github.com/christophwille/csharp-opa-wasm/</a> using WasmerSharp. Today I started my initial run on porting it to WasmTime, however, I ran into a snag with the import for env.memory:</p>
<p><a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19">https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19</a></p>
<p>All my imports are satisfied by name, however, the env.memory import bombs, exception details in the source code via comment, but basically the wasm expects two pages of memory minimum.</p>
<p>The WasmerSharp equivalent is here <a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14">https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14</a>. My guess is that I'd actually need the handle here which is internal for Memory, or: I am using the entirely wrong class because I am translating from a different API by similarity... </p>
</blockquote>



<a name="189825238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189825238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189825238">(Mar 05 2020 at 19:05)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595394366" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595394366">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>It also appears that the doc comment for the <code>Memory</code> constructor is missing <code>param</code> text too.</p>
</blockquote>



<a name="189825244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189825244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189825244">(Mar 05 2020 at 19:05)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595393566">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>Hi @christophwille.  I think these restrictions in the .NET API should be relaxed so that the host doesn't have to specify exactly the same values.</p>
<p>By the way, the constructor to <code>Memory</code> expresses the minimum and maximums in page units, so this should do it:</p>
<div class="codehilite"><pre><span></span><span class="n">EnvMemory</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Memory</span><span class="p">(</span><span class="m">2</span><span class="p">);</span> <span class="c1">// min page size = 2</span>
</pre></div>


</blockquote>



<a name="189826729"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189826729" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189826729">(Mar 05 2020 at 19:21)</a>:</h4>
<p>christophwille <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595401453" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595401453">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>Yes, thanks, the min page I figured out by reading the source code of WasmTime.Net.</p>
</blockquote>



<a name="189830475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189830475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189830475">(Mar 05 2020 at 20:01)</a>:</h4>
<p>christophwille <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595420199" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595420199">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>I completed porting to WasmTime, please see <a href="https://github.com/christophwille/csharp-opa-wasm/tree/master/WasmTimeTest" target="_blank" title="https://github.com/christophwille/csharp-opa-wasm/tree/master/WasmTimeTest">https://github.com/christophwille/csharp-opa-wasm/tree/master/WasmTimeTest</a>. It is much more readable thanks to DynamicObject (never cared to nicely hide the necessary magic in WasmerSharp). I think I'll port the NuGet that I create over to WasmTime too.</p>
</blockquote>



<a name="189844987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189844987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189844987">(Mar 05 2020 at 22:37)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595482549" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595482549">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>@christophwille that's awesome!</p>
<p>If there are other improvements you'd like to see regarding the Wasmtime .NET API, we're definitely open to suggestions and contributions!</p>
</blockquote>



<a name="189866022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/189866022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#189866022">(Mar 06 2020 at 06:26)</a>:</h4>
<p>christophwille <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595620704" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-595620704">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>After that little memory snag, the only minor issue was the null-terminated strings; however, I already had the code for WasmerSharp, so this translated nicely to Memory.Span. I don't know how common those null-terminated strings are, but maybe having a ReadNullTerminatedString baked into Memory might be useful (but only if OPA isn't the only one out there doing it this way).</p>
</blockquote>



<a name="190094470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/190094470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#190094470">(Mar 09 2020 at 17:22)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-596665872" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-596665872">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p><code>ExternMemory.ReadNullTerminatedString</code> was added after 0.12.0 as well and would be included in the next release.</p>
</blockquote>



<a name="190094618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/190094618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#190094618">(Mar 09 2020 at 17:23)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-596665872" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-596665872">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p><code>ExternMemory.ReadNullTerminatedString</code> was added after 0.12.0 (I think? I'd have to check) as well and would be included in the next release.</p>
</blockquote>



<a name="193117166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/193117166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#193117166">(Apr 06 2020 at 23:52)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-610095632" title="https://github.com/bytecodealliance/wasmtime/issues/1230#issuecomment-610095632">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a>:</p>
<blockquote>
<p>This should now be fixed in 0.15.0 since it uses the new internal Wasmtime linker rather than implementing linker in the C# API.  For future issues, we've created a new repro at <a href="https://github.com/bytecodealliance/wasmtime-dotnet" title="https://github.com/bytecodealliance/wasmtime-dotnet">https://github.com/bytecodealliance/wasmtime-dotnet</a>.</p>
</blockquote>



<a name="193117167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/193117167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#193117167">(Apr 06 2020 at 23:52)</a>:</h4>
<p>peterhuene closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a> (assigned to peterhuene):</p>
<blockquote>
<p>I originally built <a href="https://github.com/christophwille/csharp-opa-wasm/" title="https://github.com/christophwille/csharp-opa-wasm/">https://github.com/christophwille/csharp-opa-wasm/</a> using WasmerSharp. Today I started my initial run on porting it to WasmTime, however, I ran into a snag with the import for env.memory:</p>
<p><a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19">https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19</a></p>
<p>All my imports are satisfied by name, however, the env.memory import bombs, exception details in the source code via comment, but basically the wasm expects two pages of memory minimum.</p>
<p>The WasmerSharp equivalent is here <a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14">https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14</a>. My guess is that I'd actually need the handle here which is internal for Memory, or: I am using the entirely wrong class because I am translating from a different API by similarity... </p>
</blockquote>



<a name="193117727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231230%20WasmTime.Net%3A%20Access%20to%20Handle%20in%20.../near/193117727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231230.20WasmTime.2ENet.3A.20Access.20to.20Handle.20in.20.2E.2E.2E.html#193117727">(Apr 07 2020 at 00:03)</a>:</h4>
<p>peterhuene transferred <a href="https://github.com/bytecodealliance/wasmtime/issues/1230" title="https://github.com/bytecodealliance/wasmtime/issues/1230">Issue #1230</a> (assigned to peterhuene):</p>
<blockquote>
<p>I originally built <a href="https://github.com/christophwille/csharp-opa-wasm/" title="https://github.com/christophwille/csharp-opa-wasm/">https://github.com/christophwille/csharp-opa-wasm/</a> using WasmerSharp. Today I started my initial run on porting it to WasmTime, however, I ran into a snag with the import for env.memory:</p>
<p><a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19">https://github.com/christophwille/csharp-opa-wasm/blob/master/WasmTimeTest/Program.cs#L19</a></p>
<p>All my imports are satisfied by name, however, the env.memory import bombs, exception details in the source code via comment, but basically the wasm expects two pages of memory minimum.</p>
<p>The WasmerSharp equivalent is here <a href="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14" title="https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14">https://github.com/christophwille/csharp-opa-wasm/blob/master/src/Opa.Wasm/OpaPolicy.cs#L14</a>. My guess is that I'd actually need the handle here which is internal for Memory, or: I am using the entirely wrong class because I am translating from a different API by similarity... </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>