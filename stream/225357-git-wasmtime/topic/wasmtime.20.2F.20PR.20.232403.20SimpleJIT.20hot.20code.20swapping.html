<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2403 SimpleJIT hot code swapping · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html">wasmtime / PR #2403 SimpleJIT hot code swapping</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="216509802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216509802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216509802">(Nov 12 2020 at 18:38)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="216509905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216509905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216509905">(Nov 12 2020 at 18:39)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="216511042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216511042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216511042">(Nov 12 2020 at 18:49)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="216512897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216512897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216512897">(Nov 12 2020 at 19:03)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a>.</p>



<a name="216525953"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216525953" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216525953">(Nov 12 2020 at 20:46)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#pullrequestreview-529480193">PR Review</a>.</p>



<a name="216525955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216525955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216525955">(Nov 12 2020 at 20:46)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#pullrequestreview-529480193">PR Review</a>.</p>



<a name="216525956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216525956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216525956">(Nov 12 2020 at 20:46)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#discussion_r522412829">PR Review Comment</a>:</p>
<blockquote>
<p>I'm not clear on how 16 bytes was arrived at, and how platform specific this is - is it due to 16-byte alignment on x86_64? does some other sequence of instructions have to fit in here besides the plt_val at line 179?</p>
</blockquote>



<a name="216526006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216526006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216526006">(Nov 12 2020 at 20:46)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#discussion_r522412829">PR Review Comment</a>.</p>



<a name="216529020"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216529020" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216529020">(Nov 12 2020 at 21:10)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#pullrequestreview-529499595">PR Review</a>.</p>



<a name="216529022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216529022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216529022">(Nov 12 2020 at 21:10)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#discussion_r522428142">PR Review Comment</a>:</p>
<blockquote>
<p>In the future I may extend it to be more like the lazy symbol binding used by ELF. In that case the GOT entry will initially point just after the jump instruction in the PLT. After this jump instruction it pushes a specific value to the stack depending on which PLT entry it is and then it jumps to a function common between all entries in a module. This function then resolves the symbol. This avoids having to create a new wrapper function for each lazily compiled function.</p>
</blockquote>



<a name="216579504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216579504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216579504">(Nov 13 2020 at 08:29)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="216912662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216912662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216912662">(Nov 16 2020 at 18:34)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#pullrequestreview-531597612">PR Review</a>.</p>



<a name="216912664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/216912664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#216912664">(Nov 16 2020 at 18:34)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#discussion_r524486973">PR Review Comment</a>:</p>
<blockquote>
<p>That makes sense. a comment to this effect would be appreciated :) </p>
</blockquote>



<a name="217078901"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/217078901" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#217078901">(Nov 17 2020 at 23:45)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2403#pullrequestreview-532904718">PR Review</a>.</p>



<a name="218729758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/218729758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#218729758">(Dec 03 2020 at 17:49)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="218730865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/218730865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#218730865">(Dec 03 2020 at 17:57)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="218732401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/218732401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#218732401">(Dec 03 2020 at 18:07)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="218734508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/218734508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#218734508">(Dec 03 2020 at 18:25)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a> from <code>simplejit_hot_swapping</code> to <code>main</code>:</p>
<blockquote>
<p>This makes it possible to change functions when using SimpleJIT without having to recompile everything or even restart the jitted code. When a changed function is currently on the stack, the old version will be returned to, but all new calls will be redirected to the new version. It is not yet possible to swap data objects.</p>
<p>This is a prerequisite of <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087">https://github.com/bjorn3/rustc_codegen_cranelift/issues/1087</a>.</p>
<p>I have tested this PR by implementing lazy compilation in cg_clif as suggested by @flodiebold in <a href="https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/cranelift.20backend.20work/near/187645798</a> in February.</p>
<p>r? @pchickey (By the way, is it deliberate that you are marked as unavailable on zulip? I sent you a PM)<br>
cc <a href="#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611">https://bytecodealliance.zulipchat.com/#narrow/stream/217117-cranelift/topic/hot.20code.20swapping.20for.20simplejit/near/216403611</a></p>
</blockquote>



<a name="218757834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232403%20SimpleJIT%20hot%20code%20swapping/near/218757834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232403.20SimpleJIT.20hot.20code.20swapping.html#218757834">(Dec 03 2020 at 21:36)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2403">PR #2403</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>