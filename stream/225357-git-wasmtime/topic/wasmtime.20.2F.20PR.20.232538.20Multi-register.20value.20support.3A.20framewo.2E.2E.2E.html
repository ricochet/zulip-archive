<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2538 Multi-register value support: framewo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html">wasmtime / PR #2538 Multi-register value support: framewo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="221492105"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221492105" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221492105">(Jan 04 2021 at 06:06)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221492106"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221492106" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221492106">(Jan 04 2021 at 06:06)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/bnjbvr">bnjbvr</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a>.</p>



<a name="221492107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221492107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221492107">(Jan 04 2021 at 06:06)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/bnjbvr">bnjbvr</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a>.</p>



<a name="221565627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221565627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221565627">(Jan 04 2021 at 19:02)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561266234">PR Review</a>.</p>



<a name="221565628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221565628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221565628">(Jan 04 2021 at 19:02)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551506609">PR Review Comment</a>:</p>
<blockquote>
<p>These and a few other methods are the same in all cases. Please move them to a single unconditional impl block.</p>
</blockquote>



<a name="221578985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221578985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221578985">(Jan 04 2021 at 20:53)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221579733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221579733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221579733">(Jan 04 2021 at 20:59)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221579885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221579885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221579885">(Jan 04 2021 at 21:00)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561341162">PR Review</a>.</p>



<a name="221579887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221579887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221579887">(Jan 04 2021 at 21:00)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551565918">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="221585589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221585589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221585589">(Jan 04 2021 at 21:48)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561369290">PR Review</a>.</p>



<a name="221660621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660621">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561835329">PR Review</a>.</p>



<a name="221660622"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660622" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660622">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561835329">PR Review</a>.</p>



<a name="221660623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660623">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551969178">PR Review Comment</a>:</p>
<blockquote>
<p>nit: and <code>VALUE_REGS_PARTS</code> here too?</p>
</blockquote>



<a name="221660625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660625">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551967768">PR Review Comment</a>:</p>
<blockquote>
<p>This unconditionally does four tests, but the invariant is that if part <code>n</code> is invalid, then part <code>k</code> for <code>k&gt;=n</code> are invalid too. So using explicit branches with short-circuiting might be better (and penalize the "general" case of having a 1:1 mapping less), at the cost of slightly more verbosity. Of course if rustc can vectorize this, please ignore me :-)</p>
</blockquote>



<a name="221660626"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660626" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660626">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551968491">PR Review Comment</a>:</p>
<blockquote>
<p>Does it require a different R type?</p>
</blockquote>



<a name="221660627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660627">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551969061">PR Review Comment</a>:</p>
<blockquote>
<p>nit: <code>VALUE_REGS_PARTS</code> here instead of 4?</p>
</blockquote>



<a name="221660628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660628">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551977234">PR Review Comment</a>:</p>
<blockquote>
<p>Is the above clone actually necessary, if we just <code>iter</code> (and not <code>into_iter</code>) here?</p>
</blockquote>



<a name="221660629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660629">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551972238">PR Review Comment</a>:</p>
<blockquote>
<p>This comment needs pluralization too.</p>
</blockquote>



<a name="221660630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660630">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551982392">PR Review Comment</a>:</p>
<blockquote>
<p>Are these adds guaranteed to not overflow? (and in <code>offset</code> too?)</p>
</blockquote>



<a name="221660631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660631">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551983150">PR Review Comment</a>:</p>
<blockquote>
<p>Maybe rename <code>into_reg</code> to <code>into_regs</code>? Below it's a bit weird that <code>regs</code> goes into <code>into_reg</code> (singular).</p>
</blockquote>



<a name="221660632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660632">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551971876">PR Review Comment</a>:</p>
<blockquote>
<p>nit: this comment needs an update</p>
</blockquote>



<a name="221660634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660634">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551993173">PR Review Comment</a>:</p>
<blockquote>
<p>(Second time I see an instance of this, so asking, but it might be false.) Could it be that the <code>reg_class</code> arg is now always ignored, since the type is used instead? If so, we could change the signature of <code>gen_constant</code> and all its callers to reflect this.</p>
</blockquote>



<a name="221660635"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660635" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660635">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551987413">PR Review Comment</a>:</p>
<blockquote>
<p>/me wears the premature optimization hat</p>
<p>Could we use <code>SmallVec&lt;[M::I; VALUE_REGS_PARTS]&gt;</code> here, and for the other helpers (and some of their callers too)? It documents the 1:1 mapping between move/load/store Inst and real reg present in the value-regs, and may even reduce the number of dynamic allocations.</p>
</blockquote>



<a name="221660637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660637">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551991242">PR Review Comment</a>:</p>
<blockquote>
<p>I imagine this is implemented in a subsequent PR?</p>
</blockquote>



<a name="221660639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660639">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551991506">PR Review Comment</a>:</p>
<blockquote>
<p>Maybe add an assert that the value doesn't overflow the i64 range, in case we'd support i128 in the future? (unless this is already correctly replaced in a subsequent PR)</p>
</blockquote>



<a name="221660640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660640">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551995275">PR Review Comment</a>:</p>
<blockquote>
<p>Design thought: would it make sense to have a <code>alloc_singlereg_tmp</code> helper that avoids the constructing of an <code>Option</code> and unwrapping it, and returns only a single reg without using the <code>ValueRegs</code> construct? This line being repeated so many times makes me wary of the penalty cost of this multi-regs-per-value machinery for the general case where it's unused...</p>
</blockquote>



<a name="221660641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660641">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r551997676">PR Review Comment</a>:</p>
<blockquote>
<p>This change might not be needed. (Can't wait for removing the above <code>allow(dead_code)</code> once and for all!)</p>
</blockquote>



<a name="221660642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221660642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221660642">(Jan 05 2021 at 15:40)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552002812">PR Review Comment</a>:</p>
<blockquote>
<p>preexisting: There should be only one valid reference type per arch, can you cause the <code>R32</code> arm to panic?</p>
</blockquote>



<a name="221662322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221662322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221662322">(Jan 05 2021 at 15:53)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561907803">PR Review</a>.</p>



<a name="221662325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221662325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221662325">(Jan 05 2021 at 15:53)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552020351">PR Review Comment</a>:</p>
<blockquote>
<p>For the 4 element case:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">ValueRegs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">parts</span>: <span class="p">[</span><span class="kt">u32</span><span class="p">;</span><span class="w"> </span><span class="mi">4</span><span class="p">],</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">ValueRegs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// Return the number of registers used.</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">usize</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// If rustc/LLVM is smart enough, this might even be vectorized...</span>
<span class="w">        </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="codehilite" data-code-language="GAS"><pre><span></span><code><span class="nl">.LCPI0_0:</span>
    <span class="na">.quad</span>   <span class="mi">1</span>
    <span class="na">.quad</span>   <span class="mi">1</span>

<span class="nl">playground:</span><span class="err">:</span><span class="nl">ValueRegs:</span><span class="err">:</span><span class="nl">len:</span>
    <span class="nf">movdqu</span>  <span class="p">(</span><span class="nv">%rdi</span><span class="p">),</span> <span class="nv">%xmm0</span>
    <span class="nf">pcmpeqd</span> <span class="nv">%xmm1</span><span class="p">,</span> <span class="nv">%xmm1</span>
    <span class="nf">pcmpeqd</span> <span class="nv">%xmm1</span><span class="p">,</span> <span class="nv">%xmm0</span>
    <span class="nf">pxor</span>    <span class="nv">%xmm1</span><span class="p">,</span> <span class="nv">%xmm0</span>
    <span class="nf">pshufd</span>  <span class="no">$246</span><span class="p">,</span> <span class="nv">%xmm0</span><span class="p">,</span> <span class="nv">%xmm1</span>
    <span class="nf">movdqa</span>  <span class="no">.LCPI0_0</span><span class="p">(</span><span class="nv">%rip</span><span class="p">),</span> <span class="nv">%xmm2</span>
    <span class="nf">pand</span>    <span class="nv">%xmm2</span><span class="p">,</span> <span class="nv">%xmm1</span>
    <span class="nf">pshufd</span>  <span class="no">$212</span><span class="p">,</span> <span class="nv">%xmm0</span><span class="p">,</span> <span class="nv">%xmm0</span>
    <span class="nf">pand</span>    <span class="nv">%xmm2</span><span class="p">,</span> <span class="nv">%xmm0</span>
    <span class="nf">paddq</span>   <span class="nv">%xmm1</span><span class="p">,</span> <span class="nv">%xmm0</span>
    <span class="nf">pshufd</span>  <span class="no">$78</span><span class="p">,</span> <span class="nv">%xmm0</span><span class="p">,</span> <span class="nv">%xmm1</span>
    <span class="nf">paddq</span>   <span class="nv">%xmm0</span><span class="p">,</span> <span class="nv">%xmm1</span>
    <span class="nf">movq</span>    <span class="nv">%xmm1</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="nf">retq</span>
</code></pre></div>
<p>For the 2 element case:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">ValueRegs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">parts</span>: <span class="p">[</span><span class="kt">u32</span><span class="p">;</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">ValueRegs</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="sd">/// Return the number of registers used.</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">usize</span> <span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// If rustc/LLVM is smart enough, this might even be vectorized...</span>
<span class="w">        </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">            </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">!</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">usize</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p><div class="codehilite" data-code-language="GAS"><pre><span></span><code><span class="nl">playground:</span><span class="err">:</span><span class="nl">ValueRegs:</span><span class="err">:</span><span class="nl">len:</span>
    <span class="nf">xorl</span>    <span class="nv">%eax</span><span class="p">,</span> <span class="nv">%eax</span>
    <span class="nf">cmpl</span>    <span class="no">$-1</span><span class="p">,</span> <span class="nv">%edi</span>
    <span class="nf">setne</span>   <span class="nv">%al</span>
    <span class="nf">movabsq</span> <span class="no">$-4294967296</span><span class="p">,</span> <span class="nv">%rcx</span>
    <span class="nf">cmpq</span>    <span class="nv">%rcx</span><span class="p">,</span> <span class="nv">%rdi</span>
    <span class="nf">adcq</span>    <span class="no">$0</span><span class="p">,</span> <span class="nv">%rax</span>
    <span class="nf">retq</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="221667262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221667262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221667262">(Jan 05 2021 at 16:26)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-561937061">PR Review</a>.</p>



<a name="221667263"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221667263" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221667263">(Jan 05 2021 at 16:26)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552042518">PR Review Comment</a>:</p>
<blockquote>
<p>Even better, for n=2 everything is in registers; scalar replacement of aggregates FTW \o/</p>
</blockquote>



<a name="221713787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221713787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221713787">(Jan 05 2021 at 23:04)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562200618">PR Review</a>.</p>



<a name="221713788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221713788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221713788">(Jan 05 2021 at 23:04)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552251132">PR Review Comment</a>:</p>
<blockquote>
<p>Thanks @bjorn3 for showing the assembly here. I think that, yes, we want to avoid control flow and let the compiler use its cleverness here.</p>
</blockquote>



<a name="221713851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221713851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221713851">(Jan 05 2021 at 23:05)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562200968">PR Review</a>.</p>



<a name="221713852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221713852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221713852">(Jan 05 2021 at 23:05)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552251422">PR Review Comment</a>:</p>
<blockquote>
<p>Yes, in some cases -- for example going from <code>ValueRegs&lt;Reg&gt;</code> to <code>ValueRegs&lt;Writable&lt;Reg&gt;&gt;</code> or vice-versa.</p>
</blockquote>



<a name="221719328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719328">(Jan 06 2021 at 00:07)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562227536">PR Review</a>.</p>



<a name="221719329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719329">(Jan 06 2021 at 00:07)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552273846">PR Review Comment</a>:</p>
<blockquote>
<p>Yes, unfortunately, as <code>self.emit()</code> needs <code>&amp;mut self</code> and <code>self.retval_regs.iter()</code> holds a <code>&amp;self</code> for the duration of the loop.</p>
</blockquote>



<a name="221719516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719516">(Jan 06 2021 at 00:10)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562230301">PR Review</a>.</p>



<a name="221719517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719517">(Jan 06 2021 at 00:10)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552274768">PR Review Comment</a>:</p>
<blockquote>
<p>I believe so; the largest type we support a load/store for is 16 bytes, so to overflow the <code>i64</code> we would need to generate 2^60 instructions; we would OOM the address space before we overflowed.</p>
</blockquote>



<a name="221719658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719658">(Jan 06 2021 at 00:12)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562231054">PR Review</a>.</p>



<a name="221719659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221719659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221719659">(Jan 06 2021 at 00:12)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552276713">PR Review Comment</a>:</p>
<blockquote>
<p>Indeed!</p>
</blockquote>



<a name="221723898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221723898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221723898">(Jan 06 2021 at 01:19)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562263851">PR Review</a>.</p>



<a name="221723899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221723899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221723899">(Jan 06 2021 at 01:19)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552310336">PR Review Comment</a>:</p>
<blockquote>
<p>There were occasional merge conflicts on these type lists before and I think it's cleaner just to import <code>types::*</code> here as we do in some other files; updated.</p>
</blockquote>



<a name="221724005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724005">(Jan 06 2021 at 01:21)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221724012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724012">(Jan 06 2021 at 01:21)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562264407">PR Review</a>.</p>



<a name="221724014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724014">(Jan 06 2021 at 01:21)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552310764">PR Review Comment</a>:</p>
<blockquote>
<p>Yes, good point; I went ahead and carried this refactor through all the backends.</p>
</blockquote>



<a name="221724017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724017">(Jan 06 2021 at 01:21)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562264421">PR Review</a>.</p>



<a name="221724018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724018">(Jan 06 2021 at 01:21)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552310772">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="221724520"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724520" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724520">(Jan 06 2021 at 01:30)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267254">PR Review</a>.</p>



<a name="221724521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724521">(Jan 06 2021 at 01:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313413">PR Review Comment</a>:</p>
<blockquote>
<p>Done, sort of; this type is exposed up to the ABI trait and I'm not sure I want to expose a detail like "max number of value registers per value" there, but it does seem reasonable to pick a small-ish SmallVec size and standardize it; so I went through the ABI code with a <code>SmallVec&lt;[Inst; 4]&gt;</code>-shaped paintbrush using a new <code>SmallInstVec&lt;Inst&gt;</code> typedef.</p>
</blockquote>



<a name="221724522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724522">(Jan 06 2021 at 01:30)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221724529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724529">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267295">PR Review</a>.</p>



<a name="221724530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724530">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313458">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="221724534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724534">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267372">PR Review</a>.</p>



<a name="221724535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724535">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313517">PR Review Comment</a>:</p>
<blockquote>
<p>Done (here and x64)!</p>
</blockquote>



<a name="221724544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724544">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267422">PR Review</a>.</p>



<a name="221724545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724545">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313558">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="221724546"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724546" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724546">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267450">PR Review</a>.</p>



<a name="221724547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724547">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313583">PR Review Comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="221724554"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724554" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724554">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267492">PR Review</a>.</p>



<a name="221724555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724555">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313632">PR Review Comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="221724558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724558">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#pullrequestreview-562267519">PR Review</a>.</p>



<a name="221724559"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221724559" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221724559">(Jan 06 2021 at 01:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2538#discussion_r552313651">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="221725204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221725204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221725204">(Jan 06 2021 at 01:45)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a> from <code>multi-reg-framework</code> to <code>main</code>:</p>
<blockquote>
<p>This will allow for support for <code>I128</code> values everywhere, and <code>I64</code><br>
values on 32-bit targets (e.g., ARM32 and x86-32). It does not alter the<br>
machine backends to build such support; it just adds the framework for<br>
the MachInst backends to <em>reason</em> about a <code>Value</code> residing in more than<br>
one register.</p>
<p>This is a finalized version of the framework part of the draft PR (#2504); I128<br>
operator implementations will come in a followup PR.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="221799834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232538%20Multi-register%20value%20support%3A%20framewo.../near/221799834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232538.20Multi-register.20value.20support.3A.20framewo.2E.2E.2E.html#221799834">(Jan 06 2021 at 17:58)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2538">PR #2538</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>