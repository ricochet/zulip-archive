<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6216 x64: Begin to lift SSE 4.1 requiremen... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html">wasmtime / PR #6216 x64: Begin to lift SSE 4.1 requiremen...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="350061886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236216%20x64%3A%20Begin%20to%20lift%20SSE%204.1%20requiremen.../near/350061886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html#350061886">(Apr 14 2023 at 23:04)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6216">PR #6216</a> from <code>alexcrichton:x64-start-not-requiring-sse41</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit is the first of what is going to be a series of PRs to remove the SSE 4.1 requirement for SIMD support in the x64 backend. The number of instructions used from SSE 4.1 is pretty high which motivates the multiple-PRs approach rather than one big bang. This is on the tails of <a href="https://github.com/bytecodealliance/wasmtime/pull/6206">https://github.com/bytecodealliance/wasmtime/pull/6206</a> which lifted the SSE 4.2 requirement for the x64 backend.</p>
<p>This PR applies a minor refactoring to change the existing <code>use_sse41</code> extractor to a <code>pure constructor</code> instead to allow usage with <code>if-let</code> which is a bit more natural for some of the lowering rules. Existing rules gated on SSE4.1 are then updated.</p>
<p>Additionally this PR picks out two easy-to-avoid lowering rules by simply gating them on SSE4.1. If the rules aren't selected there's more general fallbacks already so it's ok to simply skip the lowering rule if SSE4.1 isn't available.</p>
<p>I'll note that these are the easiest of the SSE 4.1 lowerings, and future PRs will introduce new lowering rules which don't use SSE 4.1 instructions.</p>
</blockquote>



<a name="350061887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236216%20x64%3A%20Begin%20to%20lift%20SSE%204.1%20requiremen.../near/350061887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html#350061887">(Apr 14 2023 at 23:04)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6216">PR #6216</a>.</p>



<a name="350061888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236216%20x64%3A%20Begin%20to%20lift%20SSE%204.1%20requiremen.../near/350061888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html#350061888">(Apr 14 2023 at 23:04)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6216">PR #6216</a>.</p>



<a name="350560936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236216%20x64%3A%20Begin%20to%20lift%20SSE%204.1%20requiremen.../near/350560936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html#350560936">(Apr 17 2023 at 16:09)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6216#pullrequestreview-1388492717">PR review</a>.</p>



<a name="350568327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236216%20x64%3A%20Begin%20to%20lift%20SSE%204.1%20requiremen.../near/350568327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236216.20x64.3A.20Begin.20to.20lift.20SSE.204.2E1.20requiremen.2E.2E.2E.html#350568327">(Apr 17 2023 at 16:44)</a>:</h4>
<p>abrown merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6216">PR #6216</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>