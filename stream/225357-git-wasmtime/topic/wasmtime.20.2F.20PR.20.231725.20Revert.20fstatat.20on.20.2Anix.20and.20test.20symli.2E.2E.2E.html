<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1725 Revert fstatat on *nix and test symli... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html">wasmtime / PR #1725 Revert fstatat on *nix and test symli...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="198081631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198081631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198081631">(May 19 2020 at 15:17)</a>:</h4>
<p>kubkon opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198083595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198083595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198083595">(May 19 2020 at 15:31)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198085931"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198085931" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198085931">(May 19 2020 at 15:47)</a>:</h4>
<p><strong>kubkon</strong> requested <a href="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a>.</p>



<a name="198086042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086042">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414573410">PR Review</a>.</p>



<a name="198086044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086044">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427399311">PR Review Comment</a>:</p>
<blockquote>
<p>It's confusing, because there's both <code>AT_SYMLINK_FOLLOW</code> and <code>AT_SYMLINK_NOFOLLOW</code>, and they're both non-zero flags, because some system calls default to following by default, while others don't. It looks like <code>fstatat</code> defaults to following symbolic links, so it looks like you should need to pass <code>AtFlag::SYMLINK_NOFOLLOW</code> here.</p>
</blockquote>



<a name="198086045"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086045" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086045">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414573410">PR Review</a>.</p>



<a name="198086046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086046">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427400300">PR Review Comment</a>:</p>
<blockquote>
<p>Same as <code>fstatat</code> above.</p>
</blockquote>



<a name="198086048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086048">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427403014">PR Review Comment</a>:</p>
<blockquote>
<p>Same as above wrt <code>atim</code>.</p>
</blockquote>



<a name="198086049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086049">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427402531">PR Review Comment</a>:</p>
<blockquote>
<p>I realize this is copied from other tests in this file, but the <code>atim</code> field is effectively volatile; it could change depending on factors outside the control of this test, which could cause this check to fail, so unfortunately I think we should omit these checks.</p>
</blockquote>



<a name="198086050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086050">(May 19 2020 at 15:48)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427407272">PR Review Comment</a>:</p>
<blockquote>
<p>I'm unclear on what this is testing. <code>new_mtim</code> is <code>stat.mtim - 100</code> from above. <code>sym_stat.mtim</code> is from the stat we just got after setting the time to <code>sym_new_mtim</code> which is <code>sym_stat.mtim - 200</code>. It's not clear why those should be equal. Also, the message here "mtim should change" doesn't seem to fit using <code>assert_eq</code> to check that two things are the same.</p>
</blockquote>



<a name="198086617"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086617" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086617">(May 19 2020 at 15:52)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414588733">PR Review</a>.</p>



<a name="198086619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086619">(May 19 2020 at 15:52)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427411153">PR Review Comment</a>:</p>
<blockquote>
<p>Oh, sorry, I meant <code>AT_SYMLINK_NOFOLLOW</code> in the comment above. I don't think we should specify any flags in the call to <code>fstatat</code> here as otherwise we'll end up with <code>EINVAL</code> since <code>path</code> will always be resolved to an actual path by now. Symlink dereferencing happens in <code>path::get</code> call level above. Does that make sense?</p>
</blockquote>



<a name="198086997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086997">(May 19 2020 at 15:55)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414591419">PR Review</a>.</p>



<a name="198086998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198086998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198086998">(May 19 2020 at 15:55)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427413225">PR Review Comment</a>:</p>
<blockquote>
<p>Oh you're right! It was meant to be <code>sys_new_mtim</code> rather than <code>new_mtim</code>. Now it makes we wonder why it passed the tests at all.</p>
</blockquote>



<a name="198087961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198087961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198087961">(May 19 2020 at 16:00)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414596646">PR Review</a>.</p>



<a name="198087962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198087962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198087962">(May 19 2020 at 16:00)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427417332">PR Review Comment</a>:</p>
<blockquote>
<p>Hmm, on second thought, we should pass flags here indeed. I think there some other subtlety going on here that dereferences the symlink too far, or something like that. I'll need to look closer and see what's happening here under the hood.</p>
</blockquote>



<a name="198090607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090607">(May 19 2020 at 16:20)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414613662">PR Review</a>.</p>



<a name="198090608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090608">(May 19 2020 at 16:20)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427430861">PR Review Comment</a>:</p>
<blockquote>
<p>OK, you're absolutely right we should pass appropriate flags to <code>fstatat</code>. I misread what you wrote (I guess tiredness is winning today), and missed the fact that <code>fstatat</code> <em>always</em> dereferences unless we specify <code>AT_SYMLINK_NOFOLLOW</code>.</p>
</blockquote>



<a name="198090727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090727">(May 19 2020 at 16:21)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198090762"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090762" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090762">(May 19 2020 at 16:21)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414614894">PR Review</a>.</p>



<a name="198090763"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090763" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090763">(May 19 2020 at 16:21)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427431814">PR Review Comment</a>:</p>
<blockquote>
<p>Makes sense! I've addressed that in the latest commit.</p>
</blockquote>



<a name="198090786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090786">(May 19 2020 at 16:21)</a>:</h4>
<p>kubkon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-414615143">PR Review</a>.</p>



<a name="198090787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090787">(May 19 2020 at 16:21)</a>:</h4>
<p>kubkon created <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#discussion_r427431997">PR Review Comment</a>:</p>
<blockquote>
<p>OK, I've fixed it now in the latest commit.</p>
</blockquote>



<a name="198090940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198090940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198090940">(May 19 2020 at 16:23)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198094993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198094993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198094993">(May 19 2020 at 16:52)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198106516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198106516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198106516">(May 19 2020 at 18:17)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198106842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198106842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198106842">(May 19 2020 at 18:19)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198211795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198211795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198211795">(May 20 2020 at 15:06)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198214417"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198214417" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198214417">(May 20 2020 at 15:23)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198223972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198223972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198223972">(May 20 2020 at 16:33)</a>:</h4>
<p><strong>kubkon</strong> requested <a href="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a>.</p>



<a name="198227864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198227864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198227864">(May 20 2020 at 17:03)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a> from <code>path-filestat</code> to <code>master</code>:</p>
<blockquote>
<p>This commit effectively reverts too eager refactoring on my part which<br>
resulted in incorrect <code>path_filestat_{get, set_times}</code> behaviour on<br>
*nix hosts. In the presence of symlinks, neither of the calls would<br>
work properly.</p>
<p>In order to shield ourselves from similar errors in the future, I've<br>
augmented the <code>path_filestat</code> test cases with symlink checks as well.</p>
</blockquote>



<a name="198242778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198242778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198242778">(May 20 2020 at 19:02)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1725#pullrequestreview-415631799">PR Review</a>.</p>



<a name="198242800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231725%20Revert%20fstatat%20on%20%2Anix%20and%20test%20symli.../near/198242800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231725.20Revert.20fstatat.20on.20.2Anix.20and.20test.20symli.2E.2E.2E.html#198242800">(May 20 2020 at 19:02)</a>:</h4>
<p>sunfishcode merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1725">PR #1725</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>