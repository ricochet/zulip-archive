<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5014 Misc cleanups · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html">wasmtime / PR #5014 Misc cleanups</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="302363225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302363225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302363225">(Oct 04 2022 at 23:27)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5014">PR #5014</a>.</p>



<a name="302363226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302363226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302363226">(Oct 04 2022 at 23:27)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5014">PR #5014</a>.</p>



<a name="302363227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302363227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302363227">(Oct 04 2022 at 23:27)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5014">PR #5014</a> from <code>cleanups</code> to <code>main</code>:</p>
<blockquote>
<p>Here's an assortment of unrelated cleanups I put together while trying to understand wasmtime-cranelift.</p>
<ul>
<li>0e6333ec4 Replace resize+copy_from_slice with extend_from_slice</li>
<li>f4f2d07e2 Move helpers from Context to CompiledCode</li>
<li>36a55c439 Remove some incremental-cache code duplication</li>
<li>dfdff805e Remove an unnecessary #[cfg_attr]</li>
<li>7b167e776 Fix a few comments</li>
<li>b76e9af86 wasmtime-cranelift: Misc cleanups</li>
</ul>
</blockquote>



<a name="302368194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302368194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302368194">(Oct 05 2022 at 00:13)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1130742859">PR review</a>.</p>



<a name="302368197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302368197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302368197">(Oct 05 2022 at 00:13)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1130742859">PR review</a>.</p>



<a name="302368198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302368198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302368198">(Oct 05 2022 at 00:13)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#discussion_r987426775">PR review comment</a>:</p>
<blockquote>
<p>I'd prefer that we keep the config options for <code>incremental-cache</code> at the function/module level as they are now: as a general principle, we try not to get very fine-grained with conditional compilation directives, because it makes it harder to see exactly what is included in any given configuration ("ifdef hell"). See e.g. the CoW work where (at Alex's direction actually -- I initially did stuff more like this) we have fully separate modules for the CoW and no-CoW cases that provide the same interface. I think we can just revert the one commit in the series that makes this change.</p>
</blockquote>



<a name="302368739"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302368739" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302368739">(Oct 05 2022 at 00:19)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1130745697">PR review</a>.</p>



<a name="302368740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302368740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302368740">(Oct 05 2022 at 00:19)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#discussion_r987429181">PR review comment</a>:</p>
<blockquote>
<p>Sure, I can do that. But the cache-disabled-at-runtime case is identical to the cache-disabled-at-compile-time case. That means if I want to change the uncached case, I have to change both places and also make sure to build with the incremental-cache feature set both ways. I figured it's better to have the common path be common.</p>
<p>If you still want it this way, I'll factor that code out to a separate function that's called in both implementations.</p>
</blockquote>



<a name="302493849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302493849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302493849">(Oct 05 2022 at 16:18)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5014">PR #5014</a> from <code>cleanups</code> to <code>main</code>.</p>



<a name="302495611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302495611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302495611">(Oct 05 2022 at 16:26)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#discussion_r988114224">PR review comment</a>:</p>
<blockquote>
<p>I've removed the "Remove some incremental-cache code duplication" commit and added one to factor out a <code>compile_uncached</code> function to use in both configurations. I hope that addresses your concern?</p>
</blockquote>



<a name="302495613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302495613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302495613">(Oct 05 2022 at 16:26)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1131712740">PR review</a>.</p>



<a name="302508856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302508856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302508856">(Oct 05 2022 at 17:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1131802601">PR review</a>.</p>



<a name="302508857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302508857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302508857">(Oct 05 2022 at 17:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#discussion_r988177704">PR review comment</a>:</p>
<blockquote>
<p>Much better -- thanks!</p>
</blockquote>



<a name="302508971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302508971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302508971">(Oct 05 2022 at 17:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5014#pullrequestreview-1131802968">PR review</a>.</p>



<a name="302509282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235014%20Misc%20cleanups/near/302509282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235014.20Misc.20cleanups.html#302509282">(Oct 05 2022 at 17:36)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5014">PR #5014</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>