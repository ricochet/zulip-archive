<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8628 Use bytes for maximum size of linear ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html">wasmtime / PR #8628 Use bytes for maximum size of linear ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="438858080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438858080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438858080">(May 15 2024 at 17:57)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a> from <code>alexcrichton:memory-pages-to-bytes</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit changes configuration of the pooling allocator to use a byte-based unit rather than a page based unit. The previous <code>PoolingAllocatorConfig::memory_pages</code> configuration option configures the maximum size that a linear memory may grow to at runtime. This is an important factor in calculation of stripes for MPK and is also a coarse-grained knob apart from <code>StoreLimiter</code> to limit memory consumption. This configuration option has been renamed to <code>max_memory_size</code> and documented that it's in terms of bytes rather than pages as before.</p>
<p>Additionally the documented constraint of <code>max_memory_size</code> must be smaller than <code>static_memory_bound</code> is now additionally enforced as a minor clean-up as part of this PR as well.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="438858085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438858085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438858085">(May 15 2024 at 17:57)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="438858086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438858086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438858086">(May 15 2024 at 17:57)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers">wasmtime-fuzz-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="438858087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438858087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438858087">(May 15 2024 at 17:57)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="438862839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862839">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2058701956">PR review</a>:</p>
<blockquote>
<p>LGTM but I am confused about one thing and have Opinions and Concerns about writing the constant value directly all over the place</p>
</blockquote>



<a name="438862840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862840">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2058701956">PR review</a>:</p>
<blockquote>
<p>LGTM but I am confused about one thing and have Opinions and Concerns about writing the constant value directly all over the place</p>
</blockquote>



<a name="438862841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862841">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602068048">PR review comment</a>:</p>
<blockquote>
<p>This should be <code>65536</code> right? If you instead want the max address it should be <code>10 * 65536 - 1</code>.</p>
<p>Also lets use named constants for the Wasm page size so that it is easier to find uses and update in the future for the custom-page-sizes proposal. We have it defined in <code>wasmtime_types</code> already, FWIW, and this could use that here: <a href="https://github.com/bytecodealliance/wasmtime/blob/c477424f45871563be02eba14815ba3446158441/crates/types/src/lib.rs#L1493">https://github.com/bytecodealliance/wasmtime/blob/c477424f45871563be02eba14815ba3446158441/crates/types/src/lib.rs#L1493</a></p>
</blockquote>



<a name="438862842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862842">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602068912">PR review comment</a>:</p>
<blockquote>
<p>ditto regarding named constant</p>
</blockquote>



<a name="438862843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862843">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602074589">PR review comment</a>:</p>
<blockquote>
<p>named constant, even tho it's just a test. we want to make sure we are actually testing sizes that wasm could potentially grow to, and not accidentally just testing rounding behavior or something.</p>
</blockquote>



<a name="438862844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862844">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602076423">PR review comment</a>:</p>
<blockquote>
<p>ditto in this file's changes</p>
</blockquote>



<a name="438862845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862845">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602070594">PR review comment</a>:</p>
<blockquote>
<p>Also confused about <code>65535</code> here since that isn't a multiple of the page size, so this will disallow any non-zero-length memories, assuming we don't do rounding elsewhere in this PR?</p>
</blockquote>



<a name="438862846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862846">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602062321">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        /// The maximum runtime size of each linear memory in the pooling
        /// allocator, in bytes.
        pub pooling_max_memory_size: Option&lt;usize&gt;,
</code></pre></div><br>
</p>
</blockquote>



<a name="438862847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862847">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602073316">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    /// The maximum byte size that any WebAssembly linear memory may grow to.
</code></pre></div><br>
</p>
</blockquote>



<a name="438862849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862849">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602075617">PR review comment</a>:</p>
<blockquote>
<p>ditto</p>
</blockquote>



<a name="438862851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862851">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602071394">PR review comment</a>:</p>
<blockquote>
<p>Also confused about <code>65535</code> vs <code>65536</code> here.</p>
</blockquote>



<a name="438862852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862852">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602071885">PR review comment</a>:</p>
<blockquote>
<p>And ditto about named constants on everything here.</p>
</blockquote>



<a name="438862853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438862853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438862853">(May 15 2024 at 18:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1602079071">PR review comment</a>:</p>
<blockquote>
<p>okay I am going to stop saying "ditto about named constants" now and assume you will go over the diff yourself to catch all of them at this point</p>
</blockquote>



<a name="438865382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438865382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438865382">(May 15 2024 at 18:45)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#issuecomment-2113225598">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:api", "wasmtime:config"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="438865425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/438865425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#438865425">(May 15 2024 at 18:45)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#issuecomment-2113226167">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>:</p>
<blockquote>
<h4>Label Messager: wasmtime:config</h4>
<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>
complete this check list:</p>
<ul>
<li>
<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>
      it.</p>
<p>&lt;details&gt;</p>
<p>Our documentation should be of the following form:</p>
<p>```text<br>
Short, simple summary sentence.</p>
<p>More details. These details can be multiple paragraphs. There should be<br>
information about not just the method, but its parameters and results as<br>
well.</p>
<p>Is this method fallible? If so, when can it return an error?</p>
<p>Can this method panic? If so, when does it panic?</p>
<h1>Example</h1>
<p>Optional example here.<br>
```</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>
  ensured that this configuration is exercised by the fuzz targets.</p>
<p>&lt;details&gt;</p>
<p>For example, if you expose a new strategy for allocating the next instance<br>
slot inside the pooling allocator, you should ensure that at least one of our<br>
fuzz targets exercises that new strategy.</p>
<p>Often, all that is required of you is to ensure that there is a knob for this<br>
configuration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>
of its nested <code>struct</code>s).</p>
<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>
configuration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you are enabling a configuration option by default, make sure that it<br>
  has been fuzzed for at least two weeks before turning it on by default.</p>
</li>
</ul>
<p>[fuzzing-config]: <a href="https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>
[fuzzing-docs]: <a href="https://docs.wasmtime.dev/contributing-fuzzing.html">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>
<hr>
<p>&lt;details&gt;</p>
<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>
<p>To add new label messages or remove existing label messages, edit the<br>
&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/label-messager-action">Learn more.</a></p>
<p>&lt;/details&gt;</p>
</blockquote>



<a name="439037264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439037264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439037264">(May 16 2024 at 14:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2061027660">PR review</a>.</p>



<a name="439037266"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439037266" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439037266">(May 16 2024 at 14:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1603515170">PR review comment</a>:</p>
<blockquote>
<p>Ah yeah 65535 is a typo here, and everywhere else, but I'm hesitant to go through all the work to import a constant in all these places since it's all in tests anyway and all the values are basically random constants. In the future the wasm page size won't be constant as well so it feels weird to proliferate usage of the constant... I can change these to <code>&gt;&gt;16</code> and <code>&lt;&lt;16</code> though where appropriate perhaps to reduce the risk of typos.</p>
</blockquote>



<a name="439043992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439043992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439043992">(May 16 2024 at 15:13)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1603570834">PR review comment</a>:</p>
<blockquote>
<p>Could you expand on this? I could see a comment going here but I'm not sure otherwise what you're looking for in terms of a constant?</p>
</blockquote>



<a name="439043995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439043995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439043995">(May 16 2024 at 15:13)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2061129344">PR review</a>.</p>



<a name="439046663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439046663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439046663">(May 16 2024 at 15:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="439047425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439047425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439047425">(May 16 2024 at 15:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#issuecomment-2115555709">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>:</p>
<blockquote>
<p>I've updated with <code>&lt;&lt;16</code> and <code>&gt;&gt;16</code> to reduce the risk of typos, but I'm curious what you think of my pushback on using a name constant everywhere. I'm basically hesitant to add a bunch of process to tests where all the constants are basically already random</p>
</blockquote>



<a name="439057077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439057077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439057077">(May 16 2024 at 16:19)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2061293792">PR review</a>.</p>



<a name="439057079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439057079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439057079">(May 16 2024 at 16:19)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1603677148">PR review comment</a>:</p>
<blockquote>
<p>If the goal is to test behavior with N wasm pages of capacity, then we should make sure we are actually doing that (as opposed to testing with unaligned capacity) and using a constant helps in this scenario. I feel like the typos are evidence that we can mess this up.</p>
<p>Additionally, having a constant that we can grep for all uses of will make it easier to support the custom-page-sizes proposal down the line: we have a list of uses that we can turn into method calls if necessary, and a list of tests that we might want to update or copy and tweak.</p>
</blockquote>



<a name="439057372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439057372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439057372">(May 16 2024 at 16:21)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2061299087">PR review</a>.</p>



<a name="439088433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439088433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439088433">(May 16 2024 at 19:35)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#pullrequestreview-2061721065">PR review</a>.</p>



<a name="439088434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439088434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439088434">(May 16 2024 at 19:35)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8628#discussion_r1603938836">PR review comment</a>:</p>
<blockquote>
<p>The meaning of this test has sort of been updated and lost a bit over time as I've been tweaking settings. This isn't specifically testing for unalignment or anything like that it's just one size being bigger than the other and various bits and pieces have been lost to translation over time.</p>
<p>I'm gonna go ahead and merge this as-is but we can of course update tests afterwards. I'm basically just somewhat doubtful if it's worth the effort to try to document all tests for precisely what they're doing page-wise and such. I don't think any of the tests really need to be updated with custom-page-sizes since they're all using wasm memories of 64k pages and the tests for custom-page-sizes are going to be pretty orthogonal anyway. Much of the time the page limits are just to reduce VM memory reservations anyway and don't have much to do with page sizes.</p>
</blockquote>



<a name="439142865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439142865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439142865">(May 17 2024 at 03:58)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="439142866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439142866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439142866">(May 17 2024 at 03:58)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="439142867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439142867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439142867">(May 17 2024 at 03:58)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="439142869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439142869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439142869">(May 17 2024 at 03:58)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<a name="439145981"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238628%20Use%20bytes%20for%20maximum%20size%20of%20linear%20.../near/439145981" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238628.20Use.20bytes.20for.20maximum.20size.20of.20linear.20.2E.2E.2E.html#439145981">(May 17 2024 at 04:20)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8628">PR #8628</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>