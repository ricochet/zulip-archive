<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1616 Legalize ireduce.iN.i2N to isplit · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html">wasmtime / PR #1616 Legalize ireduce.iN.i2N to isplit</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="195540319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231616%20Legalize%20ireduce.iN.i2N%20to%20isplit/near/195540319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html#195540319">(Apr 28 2020 at 09:50)</a>:</h4>
<p>whitequark opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1616" title="https://github.com/bytecodealliance/wasmtime/pull/1616">PR #1616</a> from <code>legalize-ireduce-to-isplit</code> to <code>master</code>:</p>
<blockquote>
<p>Although the transformation seems a bit suspicious to me, it seems to work reliably, and this was the only way I could prevent some 64-bit iconcats from crashing codegen for 32-bit targets (#1089).</p>
<p>With this PR, #1615, #1612, pinning VMContext to <code>%esi</code> and a small patch that corrects wasmtime's 64-bit assumptions in two places, I can successfully build reasonably looking 32-bit machine code and run it! Of course, it crashes immediately.</p>
</blockquote>



<a name="195540538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231616%20Legalize%20ireduce.iN.i2N%20to%20isplit/near/195540538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html#195540538">(Apr 28 2020 at 09:52)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1616#pullrequestreview-401676612" title="https://github.com/bytecodealliance/wasmtime/pull/1616#pullrequestreview-401676612">PR Review</a>.</p>



<a name="195542734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231616%20Legalize%20ireduce.iN.i2N%20to%20isplit/near/195542734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html#195542734">(Apr 28 2020 at 10:15)</a>:</h4>
<p>whitequark updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1616" title="https://github.com/bytecodealliance/wasmtime/pull/1616">PR #1616</a> from <code>legalize-ireduce-to-isplit</code> to <code>master</code>:</p>
<blockquote>
<p>Although the transformation seems a bit suspicious to me, it seems to work reliably, and this was the only way I could prevent some 64-bit iconcats from crashing codegen for 32-bit targets (#1089).</p>
<p>With this PR, #1615, #1612, pinning VMContext to <code>%esi</code> and a small patch that corrects wasmtime's 64-bit assumptions in two places, I can successfully build reasonably looking 32-bit machine code and run it! Of course, it crashes immediately.</p>
</blockquote>



<a name="196368853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231616%20Legalize%20ireduce.iN.i2N%20to%20isplit/near/196368853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html#196368853">(May 05 2020 at 21:13)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1616#pullrequestreview-406159583" title="https://github.com/bytecodealliance/wasmtime/pull/1616#pullrequestreview-406159583">PR Review</a>.</p>



<a name="196368895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231616%20Legalize%20ireduce.iN.i2N%20to%20isplit/near/196368895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231616.20Legalize.20ireduce.2EiN.2Ei2N.20to.20isplit.html#196368895">(May 05 2020 at 21:13)</a>:</h4>
<p>iximeow merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1616" title="https://github.com/bytecodealliance/wasmtime/pull/1616">PR #1616</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>