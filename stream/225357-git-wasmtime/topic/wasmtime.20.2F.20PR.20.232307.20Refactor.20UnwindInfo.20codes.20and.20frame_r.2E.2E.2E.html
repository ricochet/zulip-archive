<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2307 Refactor UnwindInfo codes and frame_r... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html">wasmtime / PR #2307 Refactor UnwindInfo codes and frame_r...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="214120521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214120521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214120521">(Oct 21 2020 at 22:02)</a>:</h4>
<p>yurydelendik opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a> from <code>rm_frame_reg</code> to <code>main</code>:</p>
<blockquote>
<p>Addresses couple of issues, I noticed while working on #2289 :</p>
<ul>
<li>Removes SaveXmmRegister, see <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094">https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094</a></li>
<li>Removes irrelevant <code>frame_register</code> parameter and refactors logic that revolved around it.</li>
</ul>
</blockquote>



<a name="214120522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214120522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214120522">(Oct 21 2020 at 22:02)</a>:</h4>
<p><strong>yurydelendik</strong> requested <a href="https://github.com/peterhuene">peterhuene</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a>.</p>



<a name="214126817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214126817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214126817">(Oct 21 2020 at 23:19)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a> from <code>rm_frame_reg</code> to <code>main</code>:</p>
<blockquote>
<p>Addresses couple of issues, I noticed while working on #2289 :</p>
<ul>
<li>Removes SaveXmmRegister, see <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094">https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094</a></li>
<li>Removes irrelevant <code>frame_register</code> parameter and refactors logic that revolved around it.</li>
</ul>
</blockquote>



<a name="214131118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131118">(Oct 22 2020 at 00:23)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514279045">PR Review</a>.</p>



<a name="214131119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131119">(Oct 22 2020 at 00:23)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509809103">PR Review Comment</a>:</p>
<blockquote>
<p>Could you help me understand what this is trying to do since no similar check existed prior when saving integer registers? </p>
</blockquote>



<a name="214131206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131206">(Oct 22 2020 at 00:24)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514279521">PR Review</a>.</p>



<a name="214131207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131207">(Oct 22 2020 at 00:24)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509809523">PR Review Comment</a>:</p>
<blockquote>
<p>This doesn't seem right to me on first glance as there can be multiple save register operations (i.e. the last wouldn't always be a stack allocation) and it shouldn't be overwriting the stack allocation unwind code, right?</p>
</blockquote>



<a name="214131213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131213">(Oct 22 2020 at 00:25)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509809523">PR Review Comment</a>.</p>



<a name="214131324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131324">(Oct 22 2020 at 00:26)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514280110">PR Review</a>.</p>



<a name="214131325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131325">(Oct 22 2020 at 00:26)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509810079">PR Review Comment</a>:</p>
<blockquote>
<p>push usually consists of "sp += 8" and "save register" operation, and for win64 it is trying to recover/merge these two operations into <code>UnwindCode::PushRegister</code></p>
</blockquote>



<a name="214131695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131695">(Oct 22 2020 at 00:32)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514281925">PR Review</a>.</p>



<a name="214131696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131696">(Oct 22 2020 at 00:32)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509811678">PR Review Comment</a>:</p>
<blockquote>
<p>looks like UWOP_PUSH_NONVOL does sp -= 8, so we need to remove StackAlloc (or we can just use <code>UWOP_SAVE_NONVOL</code> here ?)</p>
</blockquote>



<a name="214131715"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214131715" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214131715">(Oct 22 2020 at 00:33)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509811678">PR Review Comment</a>.</p>



<a name="214132415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132415">(Oct 22 2020 at 00:45)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a> from <code>rm_frame_reg</code> to <code>main</code>:</p>
<blockquote>
<p>Addresses couple of issues, I noticed while working on #2289 :</p>
<ul>
<li>Removes SaveXmmRegister, see <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094">https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094</a></li>
<li>Removes irrelevant <code>frame_register</code> parameter and refactors logic that revolved around it.</li>
</ul>
</blockquote>



<a name="214132754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132754">(Oct 22 2020 at 00:51)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514287605">PR Review</a>.</p>



<a name="214132755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132755">(Oct 22 2020 at 00:51)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509816741">PR Review Comment</a>:</p>
<blockquote>
<p>I'm not sure I follow.  The unwind operation on Windows x64 is called "push nonvolatile register" for integer register saves.  The unwind code doesn't need to know what the stack pointer value was or the operand size because they're always word-sized (i.e. 8 bytes).</p>
<p>Therefore it shouldn't need to look at the stack allocation operation at all to record an unwind operation.</p>
<p>Additionally, the integer register saves are performed in the prologue <em>before</em> the stack pointer adjustment, so I don't get how this is supposed to work as the last unwind code would never be <code>StackAlloc</code>.</p>
<p>A typical x64 integer register saving prologue with the associated unwind codes:</p>
<div class="codehilite" data-code-language="GAS"><pre><span></span><code><span class="nf">push</span> <span class="no">rbp</span>          <span class="c1">; UnwindOperation::PushNonvolatileRegister</span>
<span class="nf">mov</span> <span class="no">rbp</span><span class="p">,</span> <span class="no">rsp</span>
<span class="nf">push</span> <span class="no">r12</span>          <span class="c1">; UnwindOperation::PushNonvolatileRegister</span>
<span class="nf">push</span> <span class="no">r13</span>          <span class="c1">; UnwindOperation::PushNonvolatileRegister</span>
<span class="nf">sub</span> <span class="no">rsp</span><span class="p">,</span> <span class="mi">0x20</span>     <span class="c1">; UnwindOperation::SmallStackAlloc</span>
</code></pre></div>

</blockquote>



<a name="214132850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132850">(Oct 22 2020 at 00:52)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514288066">PR Review</a>.</p>



<a name="214132852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132852">(Oct 22 2020 at 00:52)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509817135">PR Review Comment</a>:</p>
<blockquote>
<p><code>StackAlloc</code> should describe the adjustment of the stack pointer (e.g. <code>sub rsp, 0x20</code>) and should always be present for any function that makes a stack allocation.</p>
</blockquote>



<a name="214132972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214132972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214132972">(Oct 22 2020 at 00:54)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509816741">PR Review Comment</a>.</p>



<a name="214133247"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214133247" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214133247">(Oct 22 2020 at 00:59)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509816741">PR Review Comment</a>.</p>



<a name="214133717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214133717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214133717">(Oct 22 2020 at 01:07)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509816741">PR Review Comment</a>.</p>



<a name="214133803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214133803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214133803">(Oct 22 2020 at 01:09)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514292888">PR Review</a>.</p>



<a name="214133804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214133804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214133804">(Oct 22 2020 at 01:09)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509821412">PR Review Comment</a>:</p>
<blockquote>
<p>I'm pretty sure this block should just be:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">unwind_codes</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">UnwindCode</span>::<span class="n">PushRegister</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">offset</span><span class="p">,</span><span class="w"> </span><span class="n">reg</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
</code></pre></div>

<p>Right?</p>
</blockquote>



<a name="214133830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214133830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214133830">(Oct 22 2020 at 01:09)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509821412">PR Review Comment</a>.</p>



<a name="214135372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135372">(Oct 22 2020 at 01:42)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514302349">PR Review</a>.</p>



<a name="214135373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135373">(Oct 22 2020 at 01:42)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509830014">PR Review Comment</a>:</p>
<blockquote>
<p>For the Windows unwind information, at least, this value has no meaning for integer register saves, only floating point register saves.  I do wonder if we want <code>Option&lt;u32&gt;</code> to make that more explicit.</p>
</blockquote>



<a name="214135641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135641">(Oct 22 2020 at 01:48)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514304185">PR Review</a>.</p>



<a name="214135643"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135643" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135643">(Oct 22 2020 at 01:48)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509831612">PR Review Comment</a>:</p>
<blockquote>
<p>Oh I see now why I'm confused as we're adding more unwind input codes.  I was expecting a <code>StackAlloc</code>  operation for the stack pointer adjustment, not for the register saves.  This is needed for the DWARF info I take it?</p>
</blockquote>



<a name="214135652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135652">(Oct 22 2020 at 01:48)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509831612">PR Review Comment</a>.</p>



<a name="214135738"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135738" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135738">(Oct 22 2020 at 01:50)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514304698">PR Review</a>.</p>



<a name="214135739"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135739" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135739">(Oct 22 2020 at 01:50)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509832062">PR Review Comment</a>:</p>
<blockquote>
<p>Above example is correct. I think you missed the change in cranelift/codegen/src/isa/x86/unwind.rs  near <code>Push64</code> which now has <code>input::UnwindCode::StackAlloc</code> in addition to <code>::StoreRegister</code>.</p>
<p>FWIW Old backend is using only push contstructs, new backend produces more "sub sp, 16 / mov rxx, 0(rsp) / mov ryy, 8(rsp)" - like stuff in x64 and aarch64 backends, so eventually we will start doing more tricky pushes.</p>
</blockquote>



<a name="214135771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135771">(Oct 22 2020 at 01:51)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514305032">PR Review</a>.</p>



<a name="214135772"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214135772" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214135772">(Oct 22 2020 at 01:51)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509832391">PR Review Comment</a>:</p>
<blockquote>
<p>DWARF and for new backend code/constructs.</p>
</blockquote>



<a name="214136125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136125">(Oct 22 2020 at 01:58)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514307039">PR Review</a>.</p>



<a name="214136126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136126">(Oct 22 2020 at 01:58)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509834136">PR Review Comment</a>:</p>
<blockquote>
<p>I'm a little concerned these changes didn't cause test failures for the Windows unwind tests <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span> </p>
</blockquote>



<a name="214136378"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136378" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136378">(Oct 22 2020 at 02:02)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514308187">PR Review</a>.</p>



<a name="214136379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136379">(Oct 22 2020 at 02:02)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509835138">PR Review Comment</a>:</p>
<blockquote>
<p>The unwind information output shall not be affected at least for win64; at least I tried not to affect the final result.</p>
</blockquote>



<a name="214136387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136387">(Oct 22 2020 at 02:02)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509835138">PR Review Comment</a>.</p>



<a name="214136891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136891">(Oct 22 2020 at 02:12)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514311219">PR Review</a>.</p>



<a name="214136892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136892">(Oct 22 2020 at 02:12)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509837914">PR Review Comment</a>:</p>
<blockquote>
<p>On Windows, stack_offset != 0 will be translated to the <code>UWOP_SAVE_NONVOL</code> (which will be needed in new backend)</p>
<p>Sequence of StackAlloc {size: WORD_SIZE} + SaveRegister { stack_offset } can be shortened as <code>UWOP_PUSH_NONVOL</code></p>
</blockquote>



<a name="214136906"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214136906" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214136906">(Oct 22 2020 at 02:12)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509837914">PR Review Comment</a>.</p>



<a name="214138636"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138636" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138636">(Oct 22 2020 at 02:49)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514322509">PR Review</a>.</p>



<a name="214138637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138637">(Oct 22 2020 at 02:49)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509847726">PR Review Comment</a>:</p>
<blockquote>
<p>Gotcha, if the new x64 backend will start emitting saves instead of pushes for the integer registers then this makes sense.</p>
</blockquote>



<a name="214138716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138716">(Oct 22 2020 at 02:50)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514323023">PR Review</a>.</p>



<a name="214138717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138717">(Oct 22 2020 at 02:50)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509848197">PR Review Comment</a>:</p>
<blockquote>
<p>Resolving this as it now makes sense to me why a <code>StackAlloc</code> operation would be in the list preceding a <code>SaveRegister</code> operation.</p>
</blockquote>



<a name="214138816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138816">(Oct 22 2020 at 02:53)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-514323823">PR Review</a>.</p>



<a name="214138817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138817">(Oct 22 2020 at 02:53)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509848844">PR Review Comment</a>:</p>
<blockquote>
<p>I'm getting it now.  Could we add a comment to this block explaining why it is expecting a <code>StackAlloc</code> preceding the <code>SaveRegister</code> operation to simulate a "push" and thus the push operation should be <code>UWOP_PUSH_NONVOL</code>?</p>
</blockquote>



<a name="214138824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214138824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214138824">(Oct 22 2020 at 02:53)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#discussion_r509848844">PR Review Comment</a>.</p>



<a name="214188080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214188080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214188080">(Oct 22 2020 at 13:40)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a> from <code>rm_frame_reg</code> to <code>main</code>:</p>
<blockquote>
<p>Addresses couple of issues, I noticed while working on #2289 :</p>
<ul>
<li>Removes SaveXmmRegister, see <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094">https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094</a></li>
<li>Removes irrelevant <code>frame_register</code> parameter and refactors logic that revolved around it.</li>
</ul>
</blockquote>



<a name="214201544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214201544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214201544">(Oct 22 2020 at 15:12)</a>:</h4>
<p><strong>yurydelendik</strong> requested <a href="https://github.com/peterhuene">peterhuene</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a>.</p>



<a name="214234467"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214234467" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214234467">(Oct 22 2020 at 19:12)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2307#pullrequestreview-515039916">PR Review</a>.</p>



<a name="214239787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232307%20Refactor%20UnwindInfo%20codes%20and%20frame_r.../near/214239787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232307.20Refactor.20UnwindInfo.20codes.20and.20frame_r.2E.2E.2E.html#214239787">(Oct 22 2020 at 19:52)</a>:</h4>
<p>yurydelendik merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2307">PR #2307</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>