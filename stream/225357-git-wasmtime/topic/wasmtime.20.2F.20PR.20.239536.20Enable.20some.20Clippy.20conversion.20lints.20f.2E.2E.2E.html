<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9536 Enable some Clippy conversion lints f... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html">wasmtime / PR #9536 Enable some Clippy conversion lints f...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="479957097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/479957097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#479957097">(Oct 31 2024 at 20:46)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9536">PR #9536</a> from <code>alexcrichton:more-lints-for-compiler</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Similar to how <code>wasmtime::runtime</code> has a few off-by-default lints turned on for it do the same for the compilation phase of <code>wasmtime-cranelift</code>. This is intended to help weed out lossy <code>as</code> casts and instead steer users to <code>from</code> or <code>try_from</code> conversions.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="479957099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/479957099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#479957099">(Oct 31 2024 at 20:46)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9536">PR #9536</a>.</p>



<a name="479957100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/479957100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#479957100">(Oct 31 2024 at 20:46)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9536">PR #9536</a>.</p>



<a name="479957101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/479957101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#479957101">(Oct 31 2024 at 20:46)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9536">PR #9536</a>.</p>



<a name="480085936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480085936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480085936">(Nov 01 2024 at 17:01)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2410499106">PR review</a>.</p>



<a name="480091147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480091147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480091147">(Nov 01 2024 at 17:36)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9536">PR #9536</a>.</p>



<a name="480092305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480092305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480092305">(Nov 01 2024 at 17:44)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2410593673">PR review</a>.</p>



<a name="480092306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480092306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480092306">(Nov 01 2024 at 17:44)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#discussion_r1826118421">PR review comment</a>:</p>
<blockquote>
<p>We can't do this in <code>Cargo.toml</code> right? You can't use workspace lints and then also add some more, correct?</p>
</blockquote>



<a name="480092502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480092502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480092502">(Nov 01 2024 at 17:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2410596045">PR review</a>.</p>



<a name="480092503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480092503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480092503">(Nov 01 2024 at 17:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#discussion_r1826120030">PR review comment</a>:</p>
<blockquote>
<p>That's right yeah, I believe that this is the intended method of configuring lints if workspace lints are inherited and then per-crate configuration is desired</p>
</blockquote>



<a name="480093017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480093017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480093017">(Nov 01 2024 at 17:49)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#discussion_r1826124180">PR review comment</a>:</p>
<blockquote>
<p>We might want to make these <code>deny</code> since CI is going to gate on them anyways, and since we are explicitly naming and opting into them, we don't have to worry about warnings on this rustc version vs that rustc version.</p>
</blockquote>



<a name="480093018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480093018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480093018">(Nov 01 2024 at 17:49)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2410603055">PR review</a>.</p>



<a name="480181166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480181166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480181166">(Nov 02 2024 at 04:16)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2411153000">PR review</a>.</p>



<a name="480181167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480181167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480181167">(Nov 02 2024 at 04:16)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#discussion_r1826474291">PR review comment</a>:</p>
<blockquote>
<p>Personally I prefer to leave lints like this as warn instead of deny because in the middle of development it can be useful to not have to handle everything and defer it to later. Could you elaborate though on the rustc version part? I don't think I fully understand that.</p>
</blockquote>



<a name="480503947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480503947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480503947">(Nov 04 2024 at 18:34)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#pullrequestreview-2413837938">PR review</a>.</p>



<a name="480503948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239536%20Enable%20some%20Clippy%20conversion%20lints%20f.../near/480503948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239536.20Enable.20some.20Clippy.20conversion.20lints.20f.2E.2E.2E.html#480503948">(Nov 04 2024 at 18:34)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9536#discussion_r1828206525">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Personally I prefer to leave lints like this as warn instead of deny because in the middle of development it can be useful to not have to handle everything and defer it to later.</p>
</blockquote>
<p>Fair, I don't have strong opinions here.</p>
<blockquote>
<p>Could you elaborate though on the rustc version part? I don't think I fully understand that.</p>
</blockquote>
<p>Oh I just mean how we do <code>-D warnings</code> in CI and how, if we didn't pin <code>rustc</code> versions, then updating to new <code>rustc</code>s could introduce new warnings and break CI despite no code changes to the repo itself. But that kind of update-the-version breakage isn't a concern for specific clippy lints that we enable, because we aren't opting into all default clippy lints, just specific ones that we know we are abiding by.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>