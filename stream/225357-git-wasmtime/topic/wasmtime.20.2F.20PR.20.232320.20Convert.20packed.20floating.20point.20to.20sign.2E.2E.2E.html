<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2320 Convert packed floating point to sign... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html">wasmtime / PR #2320 Convert packed floating point to sign...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="214518767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214518767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214518767">(Oct 25 2020 at 23:25)</a>:</h4>
<p>jlb6740 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214529844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214529844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214529844">(Oct 26 2020 at 03:44)</a>:</h4>
<p><strong>jlb6740</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> as ready for review.</p>



<a name="214529848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214529848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214529848">(Oct 26 2020 at 03:44)</a>:</h4>
<p><strong>jlb6740</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<a name="214529849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214529849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214529849">(Oct 26 2020 at 03:44)</a>:</h4>
<p><strong>jlb6740</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<a name="214529858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214529858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214529858">(Oct 26 2020 at 03:44)</a>:</h4>
<p><strong>jlb6740</strong> requested <a href="https://github.com/cfallin">cfallin</a> and <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<a name="214531174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214531174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214531174">(Oct 26 2020 at 04:08)</a>:</h4>
<p><strong>jlb6740</strong> requested <a href="https://github.com/cfallin">cfallin</a>, <a href="https://github.com/abrown">abrown</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<a name="214532575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214532575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214532575">(Oct 26 2020 at 04:39)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214596995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214596995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214596995">(Oct 26 2020 at 16:23)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516952579">PR Review</a>.</p>



<a name="214596996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214596996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214596996">(Oct 26 2020 at 16:23)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512092493">PR Review Comment</a>:</p>
<blockquote>
<p>I know this isn't code you wrote, but in the old backend we were using <code>CVTTSI2S{S|D}</code> I believe. It would seem like, for both vector and scalar, we should be using the same class of instruction for both: either <code>CVT...</code> _or_ <code>CVTT...</code>?</p>
</blockquote>



<a name="214598296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214598296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214598296">(Oct 26 2020 at 16:31)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516960535">PR Review</a>.</p>



<a name="214598297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214598297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214598297">(Oct 26 2020 at 16:31)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512098445">PR Review Comment</a>:</p>
<blockquote>
<p>For reference, here is the old backend <a href="https://github.com/bytecodealliance/wasmtime/blob/c5a69cee9fbd767b43ddacf934cfc91ab8fc9dd5/cranelift/codegen/src/isa/x86/enc_tables.rs#L705">expand_fcvt_from_uint</a> function with the scalar sequence. I would guess most of that is covered in <code>Inst::cvt_u64_to_float_seq</code> below.</p>
</blockquote>



<a name="214599323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214599323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214599323">(Oct 26 2020 at 16:38)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516967129">PR Review</a>.</p>



<a name="214599324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214599324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214599324">(Oct 26 2020 at 16:38)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512103585">PR Review Comment</a>:</p>
<blockquote>
<p>Oh, I see what I missed: <code>CVTT...</code> is being used for <code>FcvtToSintSat</code>, not <code>FcvtFromUint</code>--disregard <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span>.</p>
</blockquote>



<a name="214601983"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214601983" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214601983">(Oct 26 2020 at 16:56)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512119812">PR Review Comment</a>:</p>
<blockquote>
<p>I used <code>PBLENDW</code> in the old backend and so does <a href="https://github.com/v8/v8/blob/master/src/compiler/backend/x64/code-generator-x64.cc#L2534-L2547">V8</a>... what do you think?</p>
</blockquote>



<a name="214601984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214601984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214601984">(Oct 26 2020 at 16:56)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516986385">PR Review</a>.</p>



<a name="214602453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214602453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214602453">(Oct 26 2020 at 17:00)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516989558">PR Review</a>.</p>



<a name="214602456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214602456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214602456">(Oct 26 2020 at 17:00)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512122123">PR Review Comment</a>:</p>
<blockquote>
<p>For consistency, <code>Andps</code>?</p>
</blockquote>



<a name="214602595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214602595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214602595">(Oct 26 2020 at 17:00)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516990300">PR Review</a>.</p>



<a name="214602596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214602596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214602596">(Oct 26 2020 at 17:00)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512122723">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>                    // Convert the float to double quadword.
</code></pre></div>

</blockquote>



<a name="214603111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214603111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214603111">(Oct 26 2020 at 17:04)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516993483">PR Review</a>.</p>



<a name="214603112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214603112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214603112">(Oct 26 2020 at 17:04)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512124954">PR Review Comment</a>:</p>
<blockquote>
<p><code>unreachable!</code> is not correct here because there are two other opcodes that could reach this: <code>Opcode::FcvtToUint | Opcode::FcvtToSint</code>; perhaps we should do a <code>match</code> on all four opcodes (filling the others with <code>unimplemented!()</code>) and then <code>_ =&gt; unreachable!()</code> at the end.</p>
</blockquote>



<a name="214603515"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214603515" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214603515">(Oct 26 2020 at 17:06)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-516995946">PR Review</a>.</p>



<a name="214620938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214620938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214620938">(Oct 26 2020 at 19:20)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517101982">PR Review</a>.</p>



<a name="214620939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214620939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214620939">(Oct 26 2020 at 19:20)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512210121">PR Review Comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="214621827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214621827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214621827">(Oct 26 2020 at 19:29)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517108391">PR Review</a>.</p>



<a name="214621828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214621828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214621828">(Oct 26 2020 at 19:29)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512215211">PR Review Comment</a>:</p>
<blockquote>
<p>Ahh .. yes. V8 uses pblendw as well. This adds an extra instruction; both pblendw and pslld/psrld have the same instruction latency. I choose not to use pblendw though because it is only compatible with SSE4_1 or greater while shifts are compatible with SSE2 which I thought was the base target for SIMD. In general not sure how in the new backend we are guarding lowering based on compatibility level so for now I am lowering based on the lowest denominator. What do you think??</p>
</blockquote>



<a name="214622408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214622408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214622408">(Oct 26 2020 at 19:34)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512218059">PR Review Comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="214622409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214622409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214622409">(Oct 26 2020 at 19:34)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517111992">PR Review</a>.</p>



<a name="214622784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214622784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214622784">(Oct 26 2020 at 19:37)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517114172">PR Review</a>.</p>



<a name="214622785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214622785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214622785">(Oct 26 2020 at 19:37)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512219755">PR Review Comment</a>:</p>
<blockquote>
<p>By double I meant double word. This is converting to a double word though not a double quadword. I'll change it to say packed double word.</p>
</blockquote>



<a name="214622877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214622877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214622877">(Oct 26 2020 at 19:38)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512219755">PR Review Comment</a>.</p>



<a name="214625507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214625507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214625507">(Oct 26 2020 at 20:00)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517130129">PR Review</a>.</p>



<a name="214625508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214625508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214625508">(Oct 26 2020 at 20:00)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512232430">PR Review Comment</a>:</p>
<blockquote>
<p>I think I disagree though I may be wrong. This code is guarded by a check for vector instructions and so afaik neither Opcode::FcvtToUint or Opcode::FcvtToSint are supported for vector input. In the context of a vector instruction it currently impossible to reach this branch with those opcodes right? This question has come up before where I reach for using unreachable instead of implementing it as unimplemented. I can change to unimplemented but not really sure the rules for applying unimplemented vs unreachable when context is considered. Certainly support for vector input for Opcode::FcvtToUint or Opcode::FcvtToSint could be added, but then that is the case for most places in the backend were the unreachable! is used instead of unimplemented! For example there are places where we match on a type (pshufd use in extractlane for example) and say the default _ =&gt; is unreachable simply because a type is not supported, but if there was need for that support and that support were added it is suddenly unimplemented and not unreachable.</p>
</blockquote>



<a name="214625756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214625756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214625756">(Oct 26 2020 at 20:02)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517131819">PR Review</a>.</p>



<a name="214625757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214625757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214625757">(Oct 26 2020 at 20:02)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512233713">PR Review Comment</a>:</p>
<blockquote>
<blockquote>
<p>I think the logic looks right but can we add the CLIF tests that verify these individual instructions? I'm thinking that <code>simd-conversion-run.clif</code> and <code>simd-conversion-legalize.clif</code> (once converted to being a <code>test compile</code> emitting vcode) would be very useful to see that each instruction works correctly and compiles to the sequence we expect.</p>
</blockquote>
<p>It definitely passes the SIMD Spectest so I am confident it is correct but let me look to add a file test as well.  <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="214631704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214631704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214631704">(Oct 26 2020 at 20:54)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517167397">PR Review</a>.</p>



<a name="214631705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214631705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214631705">(Oct 26 2020 at 20:54)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512261560">PR Review Comment</a>:</p>
<blockquote>
<p>If <code>Opcode::FcvtToUint</code> and <code>Opcode::FcvtToSint</code> are not supported then this should remain <code>unreachable!</code>; maybe add a note because a straightforward reading of the code would expect these to be implemented.</p>
</blockquote>



<a name="214632254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214632254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214632254">(Oct 26 2020 at 20:59)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517170681">PR Review</a>.</p>



<a name="214632255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214632255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214632255">(Oct 26 2020 at 20:59)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512264195">PR Review Comment</a>:</p>
<blockquote>
<p>These instructions are tested in <code>simd_conversions.wast</code> but this file has not been enabled in <code>experimental_x64_should_panic</code> in the <code>build.rs</code> so I don't think any spec tests are running for these instructions. Unfortunately, that spec test also checks <code>narrow</code> and <code>widen</code> which I found a bit annoying; a lot has to be implemented for the spec test to be enabled. So I guess the CLIF file tests will be the only things checking this until all conversions are implemented.</p>
</blockquote>



<a name="214633170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214633170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214633170">(Oct 26 2020 at 21:06)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517175536">PR Review</a>.</p>



<a name="214633171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214633171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214633171">(Oct 26 2020 at 21:06)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512268131">PR Review Comment</a>:</p>
<blockquote>
<p>Ah, cool--having both would actually be great: <code>if ...has_sse41() { [emit pblendw] } else { [emit the double shift] }</code>. That information is available in <code>EmitInfo.isa_flags</code> but unfortunately that struct is not present until the emit phase. If we created a new <code>Inst::XmmLowBits { dst, bits_to_retain }</code> (or something like that) and lowered to that then in the emit phase we could pick which version we want based on the <code>EmitInfo</code>. The other option would be to try to make those ISA flags available during lowering but that seems harder to do (@cfallin?).</p>
</blockquote>



<a name="214644590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214644590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214644590">(Oct 26 2020 at 23:15)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214650545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214650545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214650545">(Oct 27 2020 at 00:49)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214650765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214650765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214650765">(Oct 27 2020 at 00:52)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-517274700">PR Review</a>.</p>



<a name="214650766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214650766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214650766">(Oct 27 2020 at 00:52)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512352917">PR Review Comment</a>:</p>
<blockquote>
<p>Yes, you're right they aren't enabled by default. I ran them manually though, basically removed all tests except the ones related to the packed float conversion to packed signed int. Separately I've also included the file tests that have tests for this conversion .. commenting out tests packed float to packed unsigned int which isn't supported yet.</p>
</blockquote>



<a name="214650792"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214650792" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214650792">(Oct 27 2020 at 00:53)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512352917">PR Review Comment</a>.</p>



<a name="214650818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214650818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214650818">(Oct 27 2020 at 00:53)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r512352917">PR Review Comment</a>.</p>



<a name="214651176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214651176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214651176">(Oct 27 2020 at 00:59)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214651180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214651180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214651180">(Oct 27 2020 at 00:59)</a>:</h4>
<p><strong>jlb6740</strong> requested <a href="https://github.com/cfallin">cfallin</a>, <a href="https://github.com/abrown">abrown</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<a name="214662679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214662679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214662679">(Oct 27 2020 at 05:28)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214866462"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214866462" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214866462">(Oct 28 2020 at 16:59)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-518885973">PR Review</a>.</p>



<a name="214866463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214866463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214866463">(Oct 28 2020 at 16:59)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r513608820">PR Review Comment</a>:</p>
<blockquote>
<p>This is currently running the old backend; I think it should be modified to <code>test compile</code> and add <code>feature "experimental_x64"</code> (see <code>simd-bitwise-compile.clif</code>, e.g.).</p>
</blockquote>



<a name="214866464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214866464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214866464">(Oct 28 2020 at 16:59)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-518885973">PR Review</a>.</p>



<a name="214866466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214866466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214866466">(Oct 28 2020 at 16:59)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r513609736">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>                    // Since this branch is also guarded by a check for vector types,
                    // neither Opcode::FcvtToUint nor Opcode::FcvtToSint can reach here
                    // (the vector variants do not exist).
</code></pre></div>

</blockquote>



<a name="214881500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214881500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214881500">(Oct 28 2020 at 18:48)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-518984090">PR Review</a>.</p>



<a name="214881501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214881501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214881501">(Oct 28 2020 at 18:48)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r513683744">PR Review Comment</a>:</p>
<blockquote>
<p>Ok .. Yeah thanks. Will make this change too. It somehow was being acknowledged as testing was failing CI when I had the file tests for conversion to unsigned included, but I was having trouble running it on my machine. Will update.</p>
</blockquote>



<a name="214881568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214881568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214881568">(Oct 28 2020 at 18:49)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-518984614">PR Review</a>.</p>



<a name="214881569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214881569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214881569">(Oct 28 2020 at 18:49)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r513684080">PR Review Comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="214885659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214885659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214885659">(Oct 28 2020 at 19:23)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#pullrequestreview-519010386">PR Review</a>.</p>



<a name="214885660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214885660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214885660">(Oct 28 2020 at 19:23)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2320#discussion_r513703645">PR Review Comment</a>:</p>
<blockquote>
<p>@abrown @bnjbvr .. Actually I am going to just remove this compile file test. It is checking for a very specific sequence of instructions which should not be static (set in stone). It will depend on optimizations or SSE feature flag set and is there anything else that can change register allocation even if the same instructions are used?</p>
</blockquote>



<a name="214886097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214886097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214886097">(Oct 28 2020 at 19:27)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a> from <code>convert_sat</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="214890303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232320%20Convert%20packed%20floating%20point%20to%20sign.../near/214890303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232320.20Convert.20packed.20floating.20point.20to.20sign.2E.2E.2E.html#214890303">(Oct 28 2020 at 20:02)</a>:</h4>
<p>jlb6740 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2320">PR #2320</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>