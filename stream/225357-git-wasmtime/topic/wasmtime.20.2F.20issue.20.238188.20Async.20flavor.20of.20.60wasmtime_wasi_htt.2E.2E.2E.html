<html>
<head><meta charset="utf-8"><title>wasmtime / issue #8188 Async flavor of `wasmtime_wasi_htt... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238188.20Async.20flavor.20of.20.60wasmtime_wasi_htt.2E.2E.2E.html">wasmtime / issue #8188 Async flavor of `wasmtime_wasi_htt...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="427923290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238188%20Async%20flavor%20of%20%60wasmtime_wasi_htt.../near/427923290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238188.20Async.20flavor.20of.20.60wasmtime_wasi_htt.2E.2E.2E.html#427923290">(Mar 20 2024 at 13:07)</a>:</h4>
<p>rylev opened <a href="https://github.com/bytecodealliance/wasmtime/issues/8188">issue #8188</a>:</p>
<blockquote>
<p>The <code>wasi:http/proxy</code> world contains a subset of <code>wasi</code> imports found in the <code>wasi:cli/command</code> world. <code>wasmtime_wasi_http::proxy::add_to_linker</code> seems to do the right thing and only link the <code>wasi</code> interfaces that the world says it imports. However, <code>wasmtime_wasi_http::proxy::sync::add_to_linker</code> simply <a href="https://github.com/bytecodealliance/wasmtime/blob/03dc78b192f1d645bff55041b801e632dd5a9344/crates/wasi-http/src/proxy.rs#L61">wholesale imports the entire command world</a>. </p>
<p>There is a <a href="https://github.com/bytecodealliance/wasmtime/blob/03dc78b192f1d645bff55041b801e632dd5a9344/crates/wasi-http/src/proxy.rs#L59-L60">TODO</a> stating that this is due to the adapter bringing in all of these imports along with a hidden function that only brings in the required imports. I'm unsure if this is all still needed for if this can be corrected. However, at the very least, this can be very confusing for users, and we should at least have some sort of documentation pointing out that this will happen. </p>
</blockquote>



<a name="429988039"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238188%20Async%20flavor%20of%20%60wasmtime_wasi_htt.../near/429988039" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238188.20Async.20flavor.20of.20.60wasmtime_wasi_htt.2E.2E.2E.html#429988039">(Mar 28 2024 at 03:31)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/8188">issue #8188</a>:</p>
<blockquote>
<p>The <code>wasi:http/proxy</code> world contains a subset of <code>wasi</code> imports found in the <code>wasi:cli/command</code> world. <code>wasmtime_wasi_http::proxy::add_to_linker</code> seems to do the right thing and only link the <code>wasi</code> interfaces that the world says it imports. However, <code>wasmtime_wasi_http::proxy::sync::add_to_linker</code> simply <a href="https://github.com/bytecodealliance/wasmtime/blob/03dc78b192f1d645bff55041b801e632dd5a9344/crates/wasi-http/src/proxy.rs#L61">wholesale imports the entire command world</a>. </p>
<p>There is a <a href="https://github.com/bytecodealliance/wasmtime/blob/03dc78b192f1d645bff55041b801e632dd5a9344/crates/wasi-http/src/proxy.rs#L59-L60">TODO</a> stating that this is due to the adapter bringing in all of these imports along with a hidden function that only brings in the required imports. I'm unsure if this is all still needed for if this can be corrected. However, at the very least, this can be very confusing for users, and we should at least have some sort of documentation pointing out that this will happen. </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>