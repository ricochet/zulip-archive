<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2286 Store generated instructions code ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html">wasmtime / Issue #2286 Store generated instructions code ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="212981278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/212981278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#212981278">(Oct 11 2020 at 20:55)</a>:</h4>
<p>sirgl opened <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Usually I explore new API by completion and quick documentation in IDE. For the instructions emission methods (the core API of cranelift) this functionality is absent.</p>
<p>Now instructions code is generated in <code>cranelift-codegen</code> in during build and then it get inserted into library using include.<br>
This allows to have always fresh version of instruction code, but at the same time breaks experience with IDE.<br>
Both IntelliJ and rust-analyser can't index code that created during build and can't provide completion/navigation/reliable refactorings.</p>
<h4>Feature / Implementation</h4>
<p>Insert generated code for instructions right into library. It will allow IDE index it and provide all information for completion/hover and so on.</p>
<h4>Benefit</h4>
<p>Cranelifts' newcomers will be able to explore and understand API quickly.</p>
<h4>Alternatives</h4>
<p>Leave everything as is. For newcomers API will still be a bigger problem.</p>
</blockquote>



<a name="212981470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/212981470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#212981470">(Oct 11 2020 at 21:00)</a>:</h4>
<p>sirgl edited <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Usually I explore new API by completion and quick documentation in IDE (and AFAIK most of the people do so). For the instructions emission methods (the core API of cranelift) this functionality is absent. You have to go to online documentation first and then write code.</p>
<p>Here I would expect to see <code>return_</code>, but there is nothing in completion list.<br>
![2020-10-11_22-54](<a href="https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png">https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png</a>)</p>
<p>Now instructions code is generated in <code>cranelift-codegen</code> in during build and then it get inserted into library using include.<br>
This allows to have always fresh version of instruction code, but at the same time breaks experience with IDE.<br>
Both IntelliJ and rust-analyser can't index code that created during build and can't provide completion/navigation/reliable refactorings. Also it is bad for validation of parameter types.</p>
<h4>Feature / Implementation</h4>
<p>Insert generated code for instructions right into library. It will allow IDE index it and provide all information for completion/hover and so on.</p>
<h4>Benefit</h4>
<p>Cranelifts' newcomers will be able to explore and understand API quickly.</p>
<h4>Alternatives</h4>
<p>Leave everything as is. For newcomers API will still be a bigger problem.</p>
</blockquote>



<a name="212981534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/212981534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#212981534">(Oct 11 2020 at 21:02)</a>:</h4>
<p>sirgl edited <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Usually I explore new API by completion and quick documentation in IDE (and AFAIK most of the people do so). For the instructions emission methods (the core API of cranelift) this functionality is absent. You have to go to online documentation first and then write code.</p>
<p>Here I would expect to see <code>return_</code>, but there is nothing in completion list.<br>
![2020-10-11_22-54](<a href="https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png">https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png</a>)</p>
<p>Now instructions code is generated in <code>cranelift-codegen</code> during build and then it get inserted into library using include.<br>
This allows to have always fresh version of instruction code, but at the same time breaks experience with IDE.<br>
Both IntelliJ and rust-analyser can't index code that created during build and can't provide completion/navigation/reliable refactorings. Also it is bad for validation of parameter types.</p>
<h4>Feature / Implementation</h4>
<p>Insert generated code for instructions right into library. It will allow IDE index it and provide all information for completion/hover and so on.</p>
<h4>Benefit</h4>
<p>Cranelifts' newcomers will be able to explore and understand API quickly, IDE will be able to provide inline documentation, refactorings, parameter hints, errors.</p>
<h4>Alternatives</h4>
<p>Leave everything as is. For newcomers API will still be a bigger problem.</p>
</blockquote>



<a name="212981559"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/212981559" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#212981559">(Oct 11 2020 at 21:03)</a>:</h4>
<p>sirgl edited <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Usually I explore new API by completion and quick documentation in IDE (and AFAIK most of the people do so). For the instructions emission methods (the core API of cranelift) this functionality is not working in IntelliJ and rust-analyser. You have to go to online documentation first and then write code.</p>
<p>Here I would expect to see <code>return_</code>, but there is nothing in completion list.<br>
![2020-10-11_22-54](<a href="https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png">https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png</a>)</p>
<p>Now instructions code is generated in <code>cranelift-codegen</code> during build and then it get inserted into library using include.<br>
This allows to have always fresh version of instruction code, but at the same time breaks experience with IDE.<br>
Both IntelliJ and rust-analyser can't index code that created during build and can't provide completion/navigation/reliable refactorings. Also it is bad for validation of parameter types.</p>
<h4>Feature / Implementation</h4>
<p>Insert generated code for instructions right into library. It will allow IDE index it and provide all information for completion/hover and so on.</p>
<h4>Benefit</h4>
<p>Cranelifts' newcomers will be able to explore and understand API quickly, IDE will be able to provide inline documentation, refactorings, parameter hints, errors.</p>
<h4>Alternatives</h4>
<p>Leave everything as is. For newcomers API will still be a bigger problem.</p>
</blockquote>



<a name="212984048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/212984048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#212984048">(Oct 11 2020 at 22:13)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-706775627">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>You can enable support for build script generated code in rust-analyzer using:</p>
<div class="codehilite" data-code-language="jsonc"><pre><span></span><code>{
    "rust-analyzer.cargo.loadOutDirsFromCheck": true,
}
</code></pre></div>

</blockquote>



<a name="213000269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/213000269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#213000269">(Oct 12 2020 at 05:56)</a>:</h4>
<p>sirgl <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-706883551">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Thank you, then, probably, you should add it to readme to dev instructions.</p>
</blockquote>



<a name="213063658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/213063658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#213063658">(Oct 12 2020 at 17:06)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-707240429">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>@sirgl, do you mind creating a PR with that setup information? (And I wonder if there is a way to add OUT dirs to IntelliJ scanning...).</p>
</blockquote>



<a name="213415175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/213415175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#213415175">(Oct 15 2020 at 12:18)</a>:</h4>
<p>sirgl <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-709269933">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Seems that in IntelliJ you can enable <code>org.rust.cargo.evaluate.build.scripts</code> in Experimental Features. Sure, I'll make PR.</p>
</blockquote>



<a name="231161404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/231161404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#231161404">(Mar 20 2021 at 18:03)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-803436022">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Should this be closed?</p>
</blockquote>



<a name="231347219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/231347219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#231347219">(Mar 22 2021 at 17:02)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/issues/2286#issuecomment-804232614">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>I'm think so; there's a way to do this with IDEs using rust-analyzer (e.g. VS Code).</p>
</blockquote>



<a name="231347234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232286%20Store%20generated%20instructions%20code%20.../near/231347234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232286.20Store.20generated.20instructions.20code.20.2E.2E.2E.html#231347234">(Mar 22 2021 at 17:02)</a>:</h4>
<p>abrown closed <a href="https://github.com/bytecodealliance/wasmtime/issues/2286">Issue #2286</a>:</p>
<blockquote>
<p>Usually I explore new API by completion and quick documentation in IDE (and AFAIK most of the people do so). For the instructions emission methods (the core API of cranelift) this functionality is not working in IntelliJ and rust-analyser. You have to go to online documentation first and then write code.</p>
<p>Here I would expect to see <code>return_</code>, but there is nothing in completion list.<br>
![2020-10-11_22-54](<a href="https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png">https://user-images.githubusercontent.com/11944514/95690071-6ac3de80-0c15-11eb-9a34-acd1352e2214.png</a>)</p>
<p>Now instructions code is generated in <code>cranelift-codegen</code> during build and then it get inserted into library using include.<br>
This allows to have always fresh version of instruction code, but at the same time breaks experience with IDE.<br>
Both IntelliJ and rust-analyser can't index code that created during build and can't provide completion/navigation/reliable refactorings. Also it is bad for validation of parameter types.</p>
<h4>Feature / Implementation</h4>
<p>Insert generated code for instructions right into library. It will allow IDE index it and provide all information for completion/hover and so on.</p>
<h4>Benefit</h4>
<p>Cranelifts' newcomers will be able to explore and understand API quickly, IDE will be able to provide inline documentation, refactorings, parameter hints, errors.</p>
<h4>Alternatives</h4>
<p>Leave everything as is. For newcomers API will still be a bigger problem.<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>