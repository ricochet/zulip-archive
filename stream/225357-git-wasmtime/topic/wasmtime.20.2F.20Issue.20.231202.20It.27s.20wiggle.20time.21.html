<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1202 It&#x27;s wiggle time! · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html">wasmtime / Issue #1202 It&#x27;s wiggle time!</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="190417391"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/190417391" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#190417391">(Mar 12 2020 at 17:17)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-598310179" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-598310179">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>This issue or pull request has been labeled: "w", "a", "s", "i"</p>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action" target="_blank" title="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a></p>
</blockquote>



<a name="191157490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191157490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191157490">(Mar 19 2020 at 18:38)</a>:</h4>
<p>kubkon <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601349552" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601349552">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>OK, I'm marking this as ready for review. Here's the summary of changes:</p>
<div class="codehilite"><pre><span></span>This is a rather massive commit that introduces `wiggle` into the
picture. We still use `wig`&#39;s macro in `old` snapshot and to generate
`wasmtime-wasi` glue, but everything else is now autogenerated by `wiggle`.
In summary, thanks to `wiggle`, we no longer need to worry about
serialising and deserialising to and from the guest memory, and
all guest (WASI) types are now proper idiomatic Rust types.

While we&#39;re here, in preparation for the ephemeral snapshot, I went
ahead and reorganised the internal structure of the crate. Instead of
modules like `hostcalls_impl` or `hostcalls_impl::fs`, the structure
now resembles that in ephemeral with modules like `path`, `fd`, etc.
Now, I&#39;m not requiring we leave it like this, but I reckon it looks
cleaner this way after all.
</pre></div>


</blockquote>



<a name="191169716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191169716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191169716">(Mar 19 2020 at 20:19)</a>:</h4>
<p>kubkon <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601396888" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601396888">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>@pchickey I've now re-used <code>contains</code> for flags wherever possible. It should read much better now, I reckon :-)</p>
</blockquote>



<a name="191192250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191192250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191192250">(Mar 20 2020 at 00:38)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601479037" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601479037">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>Just a quick note -- there are a bunch of references to <code>FdEntry</code> in comments still in the tree that would be good to update to <code>Entry</code>.</p>
</blockquote>



<a name="191215309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191215309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191215309">(Mar 20 2020 at 09:00)</a>:</h4>
<p>kubkon <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601595532" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601595532">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<blockquote>
<p>Just a quick note -- there are a bunch of references to <code>FdEntry</code> in comments still in the tree that would be good to update to <code>Entry</code>.</p>
</blockquote>
<p>Thanks for the heads up! I have to admit, I've not paid too much attention to the docs yet.</p>
</blockquote>



<a name="191254009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191254009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191254009">(Mar 20 2020 at 15:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601746121" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601746121">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>I'm curious what the story is for the old snapshot? It's already been somewhat painful when the two snapshots diverge in how they're defined idiomatically. Is the intention to migrate the old snapshot? Implement the old snapshot trait for the same <code>WasiCtx</code> type? Never migrate?</p>
</blockquote>



<a name="191254518"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191254518" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191254518">(Mar 20 2020 at 15:06)</a>:</h4>
<p>kubkon <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601747798" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601747798">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<blockquote>
<p>I'm curious what the story is for the old snapshot? It's already been somewhat painful when the two snapshots diverge in how they're defined idiomatically. Is the intention to migrate the old snapshot? Implement the old snapshot trait for the same <code>WasiCtx</code> type? Never migrate?</p>
</blockquote>
<p>So the current idea is to only migrate latest to <code>wiggle</code>, while the old snapshot will get polyfilled once we figure out how to do it using <code>wiggle</code>. This way, we hope to reduce the duplication to a bare minimum. For ref, see #1252.</p>
</blockquote>



<a name="191273002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191273002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191273002">(Mar 20 2020 at 17:10)</a>:</h4>
<p>kubkon <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601813329" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601813329">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>Hmm, not sure why building the book suddenly failed <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
</blockquote>



<a name="191273539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231202%20It%27s%20wiggle%20time%21/near/191273539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231202.20It.27s.20wiggle.20time.21.html#191273539">(Mar 20 2020 at 17:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601815298" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202#issuecomment-601815298">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1202" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1202">Issue #1202</a>:</p>
<blockquote>
<p>Oh the book build is <a href="https://github.com/bytecodealliance/wasmtime/pull/1368" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1368">my fault</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>