<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9298 Error: max_wasm_stack size cannot ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html">wasmtime / issue #9298 Error: max_wasm_stack size cannot ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="472464559"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472464559" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472464559">(Sep 24 2024 at 10:59)</a>:</h4>
<p><a href="https://github.com/pavelsavara">pavelsavara</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">Issue #9298</a>.</p>



<a name="472464563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472464563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472464563">(Sep 24 2024 at 10:59)</a>:</h4>
<p>pavelsavara opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">issue #9298</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Testing dotnet AOT with the new wasmtime v 25 in the dotnet CI.<br>
The <a href="https://helixre107v0xdcypoyl9e7f.blob.core.windows.net/dotnet-runtime-refs-pull-108179-merge-a238d0a9053e45129a/System.Collections.Specialized.Tests.Attempt.3/1/console.c5dc63d9.log?helixlogtype=result">full log</a></p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime --dir=. --wasm max-wasm-stack=134217728 --wasi http --wasi inherit-network --wasi allow-ip-name-lookup --env DOTNET_WASI_PRINT_EXIT_CODE=1 dotnet.wasm</code></p>
<h3>Expected Results</h3>
<p>probably we need a way how to specify <code>--wasm async-stack-size=134217728</code>, but I'm not sure I understand the feature well enough.</p>
<h3>Actual Results</h3>
<p><code>Error: max_wasm_stack size cannot exceed the async_stack_size</code></p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 25.0.0 (0b195ef5d 2024-09-20)</p>
<p>Operating system: ubuntu-22.04</p>
<p>Architecture: x64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="472464848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472464848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472464848">(Sep 24 2024 at 11:01)</a>:</h4>
<p>pavelsavara edited <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">issue #9298</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Testing dotnet AOT with the new wasmtime v 25 in the dotnet CI.<br>
The <a href="https://helixre107v0xdcypoyl9e7f.blob.core.windows.net/dotnet-runtime-refs-pull-108179-merge-a238d0a9053e45129a/System.Collections.Specialized.Tests.Attempt.3/1/console.c5dc63d9.log?helixlogtype=result">full log</a></p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime --dir=. --wasm max-wasm-stack=134217728 --wasi http --wasi inherit-network --wasi allow-ip-name-lookup --env DOTNET_WASI_PRINT_EXIT_CODE=1 dotnet.wasm</code></p>
<h3>Expected Results</h3>
<p>probably we need a way how to specify <code>--wasm async-stack-size=134217728</code> on cli.<br>
But I'm not sure I understand the feature well enough.</p>
<h3>Actual Results</h3>
<p><code>Error: max_wasm_stack size cannot exceed the async_stack_size</code></p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 25.0.0 (0b195ef5d 2024-09-20)</p>
<p>Operating system: ubuntu-22.04</p>
<p>Architecture: x64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="472472586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472472586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472472586">(Sep 24 2024 at 11:43)</a>:</h4>
<p>pavelsavara edited <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">issue #9298</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Testing dotnet AOT with the new wasmtime v 25 in the dotnet CI.<br>
The <a href="https://helixre107v0xdcypoyl9e7f.blob.core.windows.net/dotnet-runtime-refs-pull-108179-merge-a238d0a9053e45129a/System.Collections.Specialized.Tests.Attempt.3/1/console.c5dc63d9.log?helixlogtype=result">full log</a></p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime --dir=. --wasm max-wasm-stack=134217728 --wasi http --wasi inherit-network --wasi allow-ip-name-lookup dotnet.wasm</code></p>
<h3>Expected Results</h3>
<p>probably we need a way how to specify <code>--wasm async-stack-size=134217728</code> on cli.<br>
But I'm not sure I understand the feature well enough.</p>
<h3>Actual Results</h3>
<p><code>Error: max_wasm_stack size cannot exceed the async_stack_size</code></p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 25.0.0 (0b195ef5d 2024-09-20)</p>
<p>Operating system: ubuntu-22.04</p>
<p>Architecture: x64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="472543231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472543231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472543231">(Sep 24 2024 at 17:37)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/9298#issuecomment-2371911449">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">issue #9298</a>:</p>
<blockquote>
<p>Thanks for the report! This was an oversight when turning on async on the CLI and should be fixed in <a href="https://github.com/bytecodealliance/wasmtime/pull/9302">https://github.com/bytecodealliance/wasmtime/pull/9302</a></p>
</blockquote>



<a name="472568484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239298%20Error%3A%20max_wasm_stack%20size%20cannot%20.../near/472568484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239298.20Error.3A.20max_wasm_stack.20size.20cannot.20.2E.2E.2E.html#472568484">(Sep 24 2024 at 20:28)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/9298">issue #9298</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Testing dotnet AOT with the new wasmtime v 25 in the dotnet CI.<br>
The <a href="https://helixre107v0xdcypoyl9e7f.blob.core.windows.net/dotnet-runtime-refs-pull-108179-merge-a238d0a9053e45129a/System.Collections.Specialized.Tests.Attempt.3/1/console.c5dc63d9.log?helixlogtype=result">full log</a></p>
<h3>Steps to Reproduce</h3>
<p><code>wasmtime --dir=. --wasm max-wasm-stack=134217728 --wasi http --wasi inherit-network --wasi allow-ip-name-lookup dotnet.wasm</code></p>
<h3>Expected Results</h3>
<p>probably we need a way how to specify <code>--wasm async-stack-size=134217728</code> on cli.<br>
But I'm not sure I understand the feature well enough.</p>
<h3>Actual Results</h3>
<p><code>Error: max_wasm_stack size cannot exceed the async_stack_size</code></p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 25.0.0 (0b195ef5d 2024-09-20)</p>
<p>Operating system: ubuntu-22.04</p>
<p>Architecture: x64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>