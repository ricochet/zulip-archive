<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5220 Add Store::set_fuel and Store::fuel_r... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html">wasmtime / PR #5220 Add Store::set_fuel and Store::fuel_r...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="308489424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/308489424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#308489424">(Nov 07 2022 at 23:01)</a>:</h4>
<p>coolreader18 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5220">PR #5220</a> from <code>store-fuel_remaining-set_fuel</code> to <code>main</code>:</p>
<blockquote>
<p>Resolves #5109. As discussed there, adds <code>Store::set_fuel</code> and <code>Store::fuel_remaining</code>, which sets the absolute amount of fuel in the store and returns the amount of fuel remaining in the store respectively. In updating the examples and tests, I was already able to change some stuff to be nicer/express intent more clearly. (<code>set_fuel</code> provides more of a use for <code>fuel_consumed</code>! e.g. see examples/fuel.rs).</p>
<p>This feature doesn't have a maintainer assigned.</p>
</blockquote>



<a name="308640403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/308640403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#308640403">(Nov 08 2022 at 17:54)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5220#pullrequestreview-1172595153">PR review</a>.</p>



<a name="308640404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/308640404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#308640404">(Nov 08 2022 at 17:54)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5220#pullrequestreview-1172595153">PR review</a>.</p>



<a name="308640405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/308640405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#308640405">(Nov 08 2022 at 17:54)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/5220#discussion_r1016949285">PR review comment</a>:</p>
<blockquote>
<p>Or <code>add_fuel</code>, right?</p>
</blockquote>



<a name="309920810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/309920810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#309920810">(Nov 14 2022 at 18:14)</a>:</h4>
<p>coolreader18 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5220#discussion_r1021904464">PR review comment</a>:</p>
<blockquote>
<p>Ach, sorry this took so long to respond to; but no, add_fuel doesn't reset the fuel counter, that's why <code>fuel_adj</code> exists. add_fuel does like <code>fuel += arg; fuel_adj += arg;</code> so that <code>fuel_consumed</code> can return <code>fuel_adj - fuel</code>. There was a discussion somewhere I saw about concerns with fuel_adj overflowing and personally I'm skeptical of the use-case for fuel_consumed tracking across multiple add_fuels (maybe that's what the c-api requires?), but it'd be a breaking change to change that and I just wanted to provide an alternative with this.</p>
</blockquote>



<a name="309920814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/309920814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#309920814">(Nov 14 2022 at 18:14)</a>:</h4>
<p>coolreader18 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5220#pullrequestreview-1179614656">PR review</a>.</p>



<a name="398558110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235220%20Add%20Store%3A%3Aset_fuel%20and%20Store%3A%3Afuel_r.../near/398558110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235220.20Add.20Store.3A.3Aset_fuel.20and.20Store.3A.3Afuel_r.2E.2E.2E.html#398558110">(Oct 25 2023 at 20:44)</a>:</h4>
<p>alexcrichton closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/5220">PR #5220</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>