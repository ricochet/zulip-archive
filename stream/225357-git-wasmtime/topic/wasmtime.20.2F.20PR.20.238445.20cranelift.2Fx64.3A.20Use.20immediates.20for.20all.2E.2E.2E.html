<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8445 cranelift/x64: Use immediates for all... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html">wasmtime / PR #8445 cranelift/x64: Use immediates for all...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="435015713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435015713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435015713">(Apr 23 2024 at 15:53)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8445">PR #8445</a>.</p>



<a name="435015714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435015714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435015714">(Apr 23 2024 at 15:53)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8445">PR #8445</a>.</p>



<a name="435015715"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435015715" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435015715">(Apr 23 2024 at 15:53)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8445">PR #8445</a> from <code>jameysharp:x64-32bit-imm</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>On x86-64, instructions which take 32-bit immediate operands in 64-bit mode sign-extend those immediates.</p>
<p>To accommodate that, we currently only generate an immediate if the 64-bit constant we want is equal to truncating to 32 bits and then sign-extending back to 64 bits. Otherwise we put the 64-bit constant in the constant pool.</p>
<p>However, if the constant's type is I32, we don't care about its upper 32 bits. In that case it's safe to generate an immediate whether the sign bit is set or not. We should never need to use the constant pool for types smaller than 64 bits on x64.</p>
</blockquote>



<a name="435025621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435025621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435025621">(Apr 23 2024 at 16:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8445#issuecomment-2072903034">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8445">PR #8445</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:x64", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="435027914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435027914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435027914">(Apr 23 2024 at 16:56)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8445#pullrequestreview-2017793981">PR review</a>:</p>
<blockquote>
<p>ha, good find :p</p>
</blockquote>



<a name="435034801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238445%20cranelift/x64%3A%20Use%20immediates%20for%20all.../near/435034801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238445.20cranelift.2Fx64.3A.20Use.20immediates.20for.20all.2E.2E.2E.html#435034801">(Apr 23 2024 at 17:31)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8445">PR #8445</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>