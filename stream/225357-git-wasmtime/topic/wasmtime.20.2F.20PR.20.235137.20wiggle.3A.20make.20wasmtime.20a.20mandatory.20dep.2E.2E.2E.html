<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5137 wiggle: make wasmtime a mandatory dep... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html">wasmtime / PR #5137 wiggle: make wasmtime a mandatory dep...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="306331508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306331508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306331508">(Oct 26 2022 at 20:57)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>:</p>
<blockquote>
<p>Wiggle (&amp; wasi-common) did a fair bit of cargo feature &amp; other gymnastics to support Lucet and Wasmtime simultaneously. Supporting Lucet is no longer a concern, so I erased the cargo features that made wasmtime support optional in these crates, and got rid of the intermediate <code>wiggle::Trap</code> enum, using <code>wasmtime::Trap</code> directly instead.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="306336807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306336807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306336807">(Oct 26 2022 at 21:30)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5137#pullrequestreview-1157315274">PR review</a>.</p>



<a name="306343391"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306343391" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306343391">(Oct 26 2022 at 22:22)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>.</p>



<a name="306343814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306343814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306343814">(Oct 26 2022 at 22:25)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>.</p>



<a name="306344871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306344871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306344871">(Oct 26 2022 at 22:35)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>:</p>
<blockquote>
<p>Wiggle (&amp; wasi-common) did a fair bit of cargo feature &amp; other gymnastics to support Lucet and Wasmtime simultaneously. Supporting Lucet is no longer a concern, so I erased the cargo features that made wasmtime support optional in these crates, and got rid of the intermediate <code>wiggle::Trap</code> enum, using <code>wasmtime::Trap</code> directly instead.</p>
<p>Note this means wasi-common will no longer build for <code>wasm32-unknown-emscripten</code> because it depends on <code>wasmtime</code>. It used to build for that target to support a web polyfill, but we haven't maintained that polyfill in years and are fine with dropping that support.</p>
</blockquote>



<a name="306350029"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306350029" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306350029">(Oct 26 2022 at 23:31)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>.</p>



<a name="306350077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306350077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306350077">(Oct 26 2022 at 23:31)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>:</p>
<blockquote>
<p>Wiggle (&amp; wasi-common) did a fair bit of cargo feature &amp; other gymnastics to support Lucet and Wasmtime simultaneously. Supporting Lucet is no longer a concern, so I erased the cargo features that made wasmtime support optional in these crates, and got rid of the intermediate <code>wiggle::Trap</code> enum, using <code>wasmtime::Trap</code> directly instead.</p>
<p>Note this means wasi-common will no longer build for <code>wasm32-unknown-emscripten</code> nor <code>armv7-unknown-linux</code> because it depends on <code>wasmtime</code>. The emscripten used to build for that target to support a web polyfill, but we haven't maintained that polyfill in years and are fine with dropping that support. I have no idea what the armv7 target was used for.</p>
</blockquote>



<a name="306350161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306350161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306350161">(Oct 26 2022 at 23:32)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>:</p>
<blockquote>
<p>Wiggle (&amp; wasi-common) did a fair bit of cargo feature &amp; other gymnastics to support Lucet and Wasmtime simultaneously. Supporting Lucet is no longer a concern, so I erased the cargo features that made wasmtime support optional in these crates, and got rid of the intermediate <code>wiggle::Trap</code> enum, using <code>wasmtime::Trap</code> directly instead.</p>
<p>Note this means wasi-common will no longer build for <code>wasm32-unknown-emscripten</code> nor <code>armv7-unknown-linux</code> because it depends on <code>wasmtime</code>. The emscripten used to build for that target to support a web polyfill, but we haven't maintained that polyfill in years and are fine with dropping that support. I have no idea what the armv7 target was used for. These targets were enforced in CI for a long time, and I deleted the CI job that checks for them.</p>
</blockquote>



<a name="306350370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306350370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306350370">(Oct 26 2022 at 23:35)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a> from <code>pch/wiggle_wasmtime_mandatory</code> to <code>main</code>:</p>
<blockquote>
<p>Wiggle (&amp; wasi-common) did a fair bit of cargo feature &amp; other gymnastics to support Lucet and Wasmtime simultaneously. Supporting Lucet is no longer a concern, so I erased the cargo features that made wasmtime support optional in these crates, and got rid of the intermediate <code>wiggle::Trap</code> enum, using <code>wasmtime::Trap</code> directly instead.</p>
<p>Note this means wasi-common will no longer build for <code>wasm32-unknown-emscripten</code> nor <code>armv7-unknown-linux</code> because it depends on <code>wasmtime</code>. The emscripten used to build for that target to support a web polyfill, but we haven't maintained that polyfill in years and are fine with dropping that support. I have no idea what the armv7 target was used for. These targets were enforced in CI for a long time, and I deleted the CI job that checks for them.</p>
<p>We will be adding component support to wasi-common shortly, which will also incur a direct wasmtime dep in that crate, so those targets were going to be broken pretty soon anyway. I hope that this doesn't cause too much grief for anyone.</p>
</blockquote>



<a name="306464195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306464195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306464195">(Oct 27 2022 at 14:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5137#pullrequestreview-1158422374">PR review</a>.</p>



<a name="306487870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235137%20wiggle%3A%20make%20wasmtime%20a%20mandatory%20dep.../near/306487870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235137.20wiggle.3A.20make.20wasmtime.20a.20mandatory.20dep.2E.2E.2E.html#306487870">(Oct 27 2022 at 16:28)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5137">PR #5137</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>