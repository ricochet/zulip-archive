<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8041 Optimize aarch64 relocation code by e... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html">wasmtime / PR #8041 Optimize aarch64 relocation code by e...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="424354176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424354176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424354176">(Mar 02 2024 at 02:03)</a>:</h4>
<p>glaziermag opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a> from <code>glaziermag:local_branch</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Hello, beginner here, impassioned by the project.  This pull request addresses issue #7588, which highlights the prevalent use of unsafe pointer offsets in the aarch64 relocation code within the cranelift-jit component. The current approach frequently casts these unsafe offsets to usize or isize types, suggesting an opportunity to improve code safety and readability by performing these casts eagerly.  Please feel free to correct any noob mistakes. I'm eager to learn and contribute more effectively!</p>
</blockquote>



<a name="424354177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424354177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424354177">(Mar 02 2024 at 02:03)</a>:</h4>
<p><strong>glaziermag</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424354178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424354178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424354178">(Mar 02 2024 at 02:03)</a>:</h4>
<p><strong>glaziermag</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424354179"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424354179" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424354179">(Mar 02 2024 at 02:03)</a>:</h4>
<p><strong>glaziermag</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424354709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424354709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424354709">(Mar 02 2024 at 02:12)</a>:</h4>
<p>glaziermag updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424392201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424392201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424392201">(Mar 02 2024 at 08:45)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8041#pullrequestreview-1912616014">PR review</a>.</p>



<a name="424392203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424392203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424392203">(Mar 02 2024 at 08:45)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8041#discussion_r1509922441">PR review comment</a>:</p>
<blockquote>
<p>Please revert this commit. Dependency updates require reviewing the changes in those dependencies by a trusted reviewer, which cargo-vet enforces. Because no such review has been done, CI would fail once it runs.</p>
</blockquote>



<a name="424392630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424392630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424392630">(Mar 02 2024 at 08:48)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8041#discussion_r1509922915">PR review comment</a>:</p>
<blockquote>
<p>This would loose optimizations and isn't more correct. <code>.offset()</code> is unsafe as it is UB to go out of bounds, but if the calculation goes out of bounds, this crate would produce UB anyway, except now sanitizers no longer know that going out of bounds is invalid and thus wouldn't trigger at the root cause of the UB.</p>
</blockquote>



<a name="424392631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424392631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424392631">(Mar 02 2024 at 08:48)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8041#pullrequestreview-1912616371">PR review</a>.</p>



<a name="424400682"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424400682" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424400682">(Mar 02 2024 at 10:40)</a>:</h4>
<p>glaziermag updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424401490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424401490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424401490">(Mar 02 2024 at 10:50)</a>:</h4>
<p>glaziermag closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>.</p>



<a name="424401492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238041%20Optimize%20aarch64%20relocation%20code%20by%20e.../near/424401492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238041.20Optimize.20aarch64.20relocation.20code.20by.20e.2E.2E.2E.html#424401492">(Mar 02 2024 at 10:50)</a>:</h4>
<p>glaziermag <a href="https://github.com/bytecodealliance/wasmtime/pull/8041#issuecomment-1974762010">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8041">PR #8041</a>:</p>
<blockquote>
<p>Thank you for your insights, @bjorn3. Based on your feedback, I understand the concerns regarding optimization and safety. I'll proceed to close this pull request.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>