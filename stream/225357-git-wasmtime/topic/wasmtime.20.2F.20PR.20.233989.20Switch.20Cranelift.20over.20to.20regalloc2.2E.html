<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3989 Switch Cranelift over to regalloc2. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html">wasmtime / PR #3989 Switch Cranelift over to regalloc2.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="277507556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277507556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277507556">(Apr 02 2022 at 05:18)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>:</p>
<blockquote>
<p>This is a draft PR for now, meant to serve as a discussion-starter. I'll work on splitting this into logically separate commits next week, but wanted to get the initial thing up first.</p>
<p>All tests pass on x86-64, aarch64, and s390x (at least locally on Linux, modulo any CI surprises) and performance numbers from #3942 still apply.</p>
<p>There is a summary of the design changes in <a href="https://github.com/cfallin/wasmtime/blob/regalloc2-clean/cranelift/regalloc2-integration.md">this document</a> (I'll turn that into more permanent documentation before this merges).</p>
</blockquote>



<a name="277507561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277507561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277507561">(Apr 02 2022 at 05:18)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>:</p>
<blockquote>
<p>This is a draft PR for now, meant to serve as a discussion-starter. I'll work on splitting this into logically separate commits next week, but wanted to get the initial thing up first.</p>
<p>All tests pass on x86-64, aarch64, and s390x (at least locally on Linux, modulo any CI surprises) and performance numbers from #3942 still apply.</p>
<p>There is a summary of the design changes in <a href="https://github.com/cfallin/wasmtime/blob/regalloc2-clean/cranelift/regalloc2-integration.md">this document</a> (I'll turn that into more permanent documentation before this merges).</p>
<p>Closes #3942.</p>
</blockquote>



<a name="277507630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277507630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277507630">(Apr 02 2022 at 05:20)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>:</p>
<blockquote>
<p>This is a draft PR for now, meant to serve as a discussion-starter. I'll work on splitting this into logically separate commits next week, but wanted to get the initial thing up first.</p>
<p>All tests pass on x86-64, aarch64, and s390x (at least locally on Linux, modulo any CI surprises) and performance numbers from #3942 still apply.</p>
<p>There is a summary of the design changes in <a href="https://github.com/cfallin/wasmtime/blob/regalloc2-clean/cranelift/regalloc2-integration.md">this document</a> (I'll turn that into more permanent documentation before this merges).</p>
<p>Closes #3942.</p>
<p>Requires <a href="https://github.com/bytecodealliance/regalloc2/issues/38">bytecodealliance/regalloc2#38</a> and subsequent crate version bump/release.</p>
</blockquote>



<a name="277516419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277516419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277516419">(Apr 02 2022 at 08:48)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-929549435">PR review</a>.</p>



<a name="277516420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277516420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277516420">(Apr 02 2022 at 08:48)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r841045351">PR review comment</a>:</p>
<blockquote>
<p>How to enable the regalloc checker without this option? And what about potential other regallocs?</p>
</blockquote>



<a name="277554004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277554004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277554004">(Apr 02 2022 at 21:58)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-929607708">PR review</a>.</p>



<a name="277554005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277554005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277554005">(Apr 02 2022 at 21:58)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r841123780">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>what about potential other regallocs</p>
</blockquote>
<p>Right now regalloc2 doesn't have any other algorithms, but we could certainly add this option back if it gains any. (And, for maximal clarity here, retaining the existing options is unfortunately not really possible because <a href="http://regalloc.rs">regalloc.rs</a> is so different in certain ways from regalloc2 -- we can't make it a runtime option, we have to switch over all at once.)</p>
<blockquote>
<p>How to enable the regalloc checker</p>
</blockquote>
<p>I actually need to do a bit more work if we want the checker enabled <em>in Cranelift</em> (as opposed to in the regalloc2 fuzzing harness) -- it doesn't support pinned vregs currently, which the Cranelift glue uses to model RealRegs. I could do that, I just haven't had time yet; not sure if it should block an initial merge or not (open to opinions on this...).</p>
</blockquote>



<a name="277685893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277685893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277685893">(Apr 04 2022 at 06:09)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277686905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277686905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277686905">(Apr 04 2022 at 06:26)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277688570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277688570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277688570">(Apr 04 2022 at 06:55)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277793032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277793032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277793032">(Apr 04 2022 at 21:01)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277808997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277808997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277808997">(Apr 04 2022 at 23:43)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277809102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277809102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277809102">(Apr 04 2022 at 23:44)</a>:</h4>
<p><strong>cfallin</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> as ready for review.</p>



<a name="277809171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277809171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277809171">(Apr 04 2022 at 23:45)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277811448"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277811448" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277811448">(Apr 05 2022 at 00:17)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277926664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277926664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277926664">(Apr 05 2022 at 18:47)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277929701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277929701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277929701">(Apr 05 2022 at 19:09)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="277930200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/277930200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#277930200">(Apr 05 2022 at 19:13)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>:</p>
<blockquote>
<p>This is a draft PR for now, meant to serve as a discussion-starter. I'll work on splitting this into logically separate commits next week, but wanted to get the initial thing up first.</p>
<p>All tests pass on x86-64, aarch64, and s390x (at least locally on Linux, modulo any CI surprises) and performance numbers from #3942 still apply.</p>
<p>There is a summary of the design changes in <a href="https://github.com/cfallin/wasmtime/blob/regalloc2-clean/cranelift/regalloc2-integration.md">this document</a> (I'll turn that into more permanent documentation before this merges).</p>
<p>Closes #3942.</p>
<p>~Requires <a href="https://github.com/bytecodealliance/regalloc2/issues/38">bytecodealliance/regalloc2#38</a> and subsequent crate version bump/release.~ (done.)</p>
</blockquote>



<a name="278013227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013227">(Apr 06 2022 at 12:06)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-933375430">PR review</a>.</p>



<a name="278013228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013228">(Apr 06 2022 at 12:06)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843866472">PR review comment</a>:</p>
<blockquote>
<p>Can you keep this when debug assertions are enabled?</p>
</blockquote>



<a name="278013438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013438">(Apr 06 2022 at 12:07)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843868061">PR review comment</a>:</p>
<blockquote>
<p>Will the disassembly now show virtual registers or still use physical registers?</p>
</blockquote>



<a name="278013439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013439">(Apr 06 2022 at 12:07)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-933377766">PR review</a>.</p>



<a name="278013541"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013541" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013541">(Apr 06 2022 at 12:08)</a>:</h4>
<p>bjorn3 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843868061">PR review comment</a>.</p>



<a name="278013623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013623">(Apr 06 2022 at 12:09)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-933379647">PR review</a>.</p>



<a name="278013624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013624">(Apr 06 2022 at 12:09)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843869378">PR review comment</a>:</p>
<blockquote>
<p>Why did you remove those?</p>
</blockquote>



<a name="278013971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013971">(Apr 06 2022 at 12:12)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843872169">PR review comment</a>:</p>
<blockquote>
<p>Same, why are these removed?</p>
</blockquote>



<a name="278013972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278013972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278013972">(Apr 06 2022 at 12:12)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-933383624">PR review</a>.</p>



<a name="278014693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278014693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278014693">(Apr 06 2022 at 12:20)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-933392005">PR review</a>.</p>



<a name="278014694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278014694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278014694">(Apr 06 2022 at 12:20)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r843878218">PR review comment</a>:</p>
<blockquote>
<p>I see it still uses physical registers.</p>
</blockquote>



<a name="278230903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278230903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278230903">(Apr 07 2022 at 21:49)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-935712876">PR review</a>.</p>



<a name="278230904"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278230904" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278230904">(Apr 07 2022 at 21:49)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r845586329">PR review comment</a>:</p>
<blockquote>
<p>This actually became a significant O(n^2) slowdown in debug builds because of the additional edge blocks introduced in the block-lowering order, and was causing some test timeouts. IMHO we've tested and relied on this code enough over the past almost-2-years that enabling the checks only in fuzzing and not in all debug builds is probably OK...</p>
</blockquote>



<a name="278230996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278230996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278230996">(Apr 07 2022 at 21:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-935713363">PR review</a>.</p>



<a name="278230997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278230997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278230997">(Apr 07 2022 at 21:50)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r845586648">PR review comment</a>:</p>
<blockquote>
<p>Ah, regalloc2 currently doesn't have serde support so I removed this to get things building, and then forgot to come back to it later... I'll add this.</p>
</blockquote>



<a name="278612199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612199">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938504898">PR review</a>.</p>



<a name="278612200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612200">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938504898">PR review</a>.</p>



<a name="278612201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612201">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847675326">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>/// physical registers: this means that they are always constrained
</code></pre></div><br>
</p>
</blockquote>



<a name="278612202"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612202" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612202">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847688462">PR review comment</a>:</p>
<blockquote>
<p><code>impl From&lt;VReg&gt; for Reg</code> and <code>impl From&lt;Reg&gt; for VReg</code>? This is a little bit more idiomatic and allows using it in generics, plus you get the corresponding <code>Into</code> blanket impl.</p>
</blockquote>



<a name="278612203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612203">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847703933">PR review comment</a>:</p>
<blockquote>
<p>Should this debug assert that the allocation matches the real reg?</p>
</blockquote>



<a name="278612204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612204">(Apr 11 2022 at 20:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847691405">PR review comment</a>:</p>
<blockquote>
<p>Rather than open coding the <code>&lt; PINNED_VREGS</code> logic here and elsewhere, can we define a helper and make this something like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="n">is_pinned</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mf">0.</span><span class="n">vreg</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">Some</span><span class="p">(</span><span class="n">RealReg</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="p">))</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nb">None</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>and similar below. This way if we change how we encode pinned registers, we don't need to update a bunch of different open-coded places.</p>
</blockquote>



<a name="278612704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612704">(Apr 11 2022 at 20:32)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938556711">PR review</a>.</p>



<a name="278612705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278612705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278612705">(Apr 11 2022 at 20:32)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847712263">PR review comment</a>:</p>
<blockquote>
<p>FWIW, we see ~60x slowdown when fuzzing and only have ~1 minute per fuzz input (so roughly 1s budget on non-fuzz builds), so it seems semi-likely that these checks will be too expensive for fuzzing as well if they are too expensive for <code>debug_assert!</code>.</p>
</blockquote>



<a name="278628589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628589">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938572639">PR review</a>.</p>



<a name="278628590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628590">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938572639">PR review</a>.</p>



<a name="278628591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628591">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847723403">PR review comment</a>:</p>
<blockquote>
<p>Can we do</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">enum</span> <span class="nc">VCodeDirection</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Forwards</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Backwards</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>to avoid these boolean arguments that need comments explaining what they are?</p>
</blockquote>



<a name="278628593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628593">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847747106">PR review comment</a>:</p>
<blockquote>
<p>I could see this API being hard to implement with a slice return. For example, if an inst variant is like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">clobber_a</span>: <span class="nc">Writable</span><span class="o">&lt;</span><span class="n">Reg</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">clobber_b</span>: <span class="nc">Writable</span><span class="o">&lt;</span><span class="n">Reg</span><span class="o">&gt;</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
</code></pre></div>
<p>then you can't actually return both <code>clobber_{a,b}</code> as a slice, since you have no vec or array to borrow from.</p>
<p>Perhaps this should be a <code>SmallVec</code> return? Alternatively, the caller could pass in a <code>&amp;mut Vec</code> and let the callee fill it, and the caller could reuse the same space for every inst.</p>
</blockquote>



<a name="278628594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628594">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847748716">PR review comment</a>:</p>
<blockquote>
<p>This seems like a sketchy API given that multiple types can lower to the same register class (ie both vector types and floats map to the same register class). How do callees know which type to return? How can callers communicate their expectations?</p>
</blockquote>



<a name="278628595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628595">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847761755">PR review comment</a>:</p>
<blockquote>
<p>Don't want to factor this out into ranges within a single allocation like other bits have done?</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// From instruction index to `(start, end)` indices of the clobbers in `clobber_data`.</span>
<span class="n">clobbers</span>: <span class="nc">FxHashMap</span><span class="o">&lt;</span><span class="n">InsnIndex</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="n">clobber_data</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">PReg</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="278628596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628596">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847766068">PR review comment</a>:</p>
<blockquote>
<p>Also all of these <code>(start, end)</code> index pairs could be <code>u32</code>s (a <code>Vec</code> can only hold <code>usize::MAX / 2</code> items anyways; in practice we won't get anywhere near that either) and we will reduce space further.</p>
</blockquote>



<a name="278628597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628597">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847774010">PR review comment</a>:</p>
<blockquote>
<p>Should this method invert <code>self.direction</code> (ne <code>self.backward</code>)? Seems like things could otherwise get out of sync.</p>
</blockquote>



<a name="278628598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628598">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847768299">PR review comment</a>:</p>
<blockquote>
<p>Make this an <code>Option&lt;String&gt;</code> for clarity? I know an empty string won't heap allocate, but the API is confusing that this is a "pretty-printed disassembly, if any" but is non-optional.</p>
</blockquote>



<a name="278628599"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628599" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628599">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847764702">PR review comment</a>:</p>
<blockquote>
<p>Similar story here: we can have a single <code>vregs: Vec&lt;regalloc2::VReg&gt;</code> that both block args and block params index into.</p>
</blockquote>



<a name="278628600"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628600" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628600">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847768957">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>/// This builder has the ability to accept instructions in either
</code></pre></div><br>
</p>
</blockquote>



<a name="278628601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628601">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847763957">PR review comment</a>:</p>
<blockquote>
<p>Might as well consolidate <code>block_preds</code> and <code>block_succs</code> into a single allocation, no? We never iterate over all blocks that are a predecessor to any other block, only a particular block's predecessors after we've grabbed that sub-range, and similar for successors, so it seems like they could all live in the same backing <code>Vec&lt;regalloc2::Block&gt;</code> and have just one big allocation rather than two big allocations.</p>
</blockquote>



<a name="278628602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628602">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847804613">PR review comment</a>:</p>
<blockquote>
<p>This pattern is cropping up repeatedly all over the place. Might make sense to define a <code>disasm!(state, "format string", format_args...)</code> macro to encapsulate it.</p>
</blockquote>



<a name="278628603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278628603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278628603">(Apr 11 2022 at 23:05)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847770228">PR review comment</a>:</p>
<blockquote>
<p>Split into</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">debug_info</span>: <span class="nc">FxHashMap</span><span class="o">&lt;</span><span class="n">ValueLabel</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="n">debug_info_data</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="p">(</span><span class="n">InsnIndex</span><span class="p">,</span><span class="w"> </span><span class="n">InsnIndex</span><span class="p">,</span><span class="w"> </span><span class="n">VReg</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
</code></pre></div>
<p>like elsewhere?</p>
</blockquote>



<a name="278632883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278632883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278632883">(Apr 12 2022 at 00:07)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847832495">PR review comment</a>:</p>
<blockquote>
<p>This one is a bit of an interesting case: it's factoring out from ad-hoc code in several places that was generating loads, stores, or moves of whole registers by choosing some appropriate type. In some sense it's a problem caused earlier in the design by writing a bunch of instruction helpers (for moves, loads, stores) that can only take <code>Type</code>s, not <code>RegClass</code>s, so when we drop down to the regalloc abstraction level and care only about whole registers, but need to insert instructions for data movement, we need to translate back.</p>
<p>I'd be happy to rename this to something like <code>type_that_fully_contains_rc</code> or <code>canonical_type_for_rc</code> or somesuch to make that clearer, if you'd prefer!</p>
</blockquote>



<a name="278632884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278632884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278632884">(Apr 12 2022 at 00:07)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938725600">PR review</a>.</p>



<a name="278633054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278633054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278633054">(Apr 12 2022 at 00:10)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938726739">PR review</a>.</p>



<a name="278633055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278633055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278633055">(Apr 12 2022 at 00:10)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847833461">PR review comment</a>:</p>
<blockquote>
<p>I was starting to write an answer here discussing allocations and how I'd prefer to avoid them, and the tradeoffs vs flexibility and maybe <code>Cow</code> but that's awkward, etc., then realized we've been down this road before -- we have all the same tradeoffs for ordinary operands. So I think maybe the better answer is to actually go through the operand-collector interface (<code>reg_clobber</code> alongside <code>reg_use</code>, <code>reg_def</code> and friends), what do you think?</p>
</blockquote>



<a name="278633560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278633560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278633560">(Apr 12 2022 at 00:17)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-938729796">PR review</a>.</p>



<a name="278633561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278633561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278633561">(Apr 12 2022 at 00:17)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r847835746">PR review comment</a>:</p>
<blockquote>
<p>The intent was for it to be called only once, not for it to be possible to flip directions repeatedly; the latter would certainly break many invariants, even if we try to invert <code>self.direction</code>!</p>
<p>This was meant to be enforced by (i) <code>reverse</code> being a private helper method, and (ii) <code>reverse</code> only being called by the build-function that consumes <code>self</code>. I'm happy to name <code>reverse</code> something better, like <code>reverse_backwards_emission_and_finalize</code> or something like that...</p>
</blockquote>



<a name="278719790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278719790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278719790">(Apr 12 2022 at 16:47)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-939858559">PR review</a>.</p>



<a name="278719791"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278719791" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278719791">(Apr 12 2022 at 16:47)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848653713">PR review comment</a>:</p>
<blockquote>
<p>Yes, <code>reg_clobber</code> makes a lot of sense.</p>
</blockquote>



<a name="278719922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278719922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278719922">(Apr 12 2022 at 16:48)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-939859683">PR review</a>.</p>



<a name="278719923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278719923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278719923">(Apr 12 2022 at 16:48)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848654445">PR review comment</a>:</p>
<blockquote>
<p>I guess <code>canonical_type_for_rc</code> makes sense.</p>
</blockquote>



<a name="278720105"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278720105" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278720105">(Apr 12 2022 at 16:49)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-939861418">PR review</a>.</p>



<a name="278720107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278720107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278720107">(Apr 12 2022 at 16:49)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848655666">PR review comment</a>:</p>
<blockquote>
<p><code>reverse_and_finalize</code>? Maybe also some comments for the method explaining that the builder can't be used again after this method is called.</p>
</blockquote>



<a name="278723086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723086">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-939883158">PR review</a>.</p>



<a name="278723087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723087">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-939883158">PR review</a>.</p>



<a name="278723088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723088">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848671064">PR review comment</a>:</p>
<blockquote>
<p>Sort of strange API-wise to give a <code>Vec</code> here -- is there a reason we aren't giving a <code>&amp;[Writable&lt;RealReg&gt;]</code>? Do impls take ownership/mutate/grow the vec internally?</p>
</blockquote>



<a name="278723089"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723089" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723089">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848671593">PR review comment</a>:</p>
<blockquote>
<p>ditto</p>
</blockquote>



<a name="278723090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723090">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848671409">PR review comment</a>:</p>
<blockquote>
<p>ditto</p>
</blockquote>



<a name="278723091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278723091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278723091">(Apr 12 2022 at 17:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848671483">PR review comment</a>:</p>
<blockquote>
<p>ditto</p>
</blockquote>



<a name="278760607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278760607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278760607">(Apr 12 2022 at 22:10)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-940205526">PR review</a>.</p>



<a name="278760608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278760608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278760608">(Apr 12 2022 at 22:10)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848911386">PR review comment</a>:</p>
<blockquote>
<p>I think we can remove the <code>mov_mitosis</code> function now as well.</p>
</blockquote>



<a name="278760609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278760609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278760609">(Apr 12 2022 at 22:10)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-940205526">PR review</a>.</p>



<a name="278761525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278761525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278761525">(Apr 12 2022 at 22:21)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-940211316">PR review</a>.</p>



<a name="278761527"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278761527" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278761527">(Apr 12 2022 at 22:21)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-940211316">PR review</a>.</p>



<a name="278761529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278761529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278761529">(Apr 12 2022 at 22:21)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r848916125">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>/// this for xsp / xzr; we have two special registers for those.
</code></pre></div><br>
</p>
</blockquote>



<a name="278788831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278788831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278788831">(Apr 13 2022 at 06:20)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278861671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278861671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278861671">(Apr 13 2022 at 17:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941316012">PR review</a>.</p>



<a name="278861672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278861672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278861672">(Apr 13 2022 at 17:28)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941316012">PR review</a>.</p>



<a name="278861674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278861674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278861674">(Apr 13 2022 at 17:28)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849725238">PR review comment</a>:</p>
<blockquote>
<p>Ah okay, we remove it in this commit.</p>
</blockquote>



<a name="278862486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278862486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278862486">(Apr 13 2022 at 17:35)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941328872">PR review</a>.</p>



<a name="278862487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278862487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278862487">(Apr 13 2022 at 17:35)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941328872">PR review</a>.</p>



<a name="278862491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278862491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278862491">(Apr 13 2022 at 17:35)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849734737">PR review comment</a>:</p>
<blockquote>
<p>This is out of date now. Not sure whether we want to keep this whole doc around or not?</p>
</blockquote>



<a name="278862553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278862553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278862553">(Apr 13 2022 at 17:35)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941329856">PR review</a>.</p>



<a name="278878477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278878477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278878477">(Apr 13 2022 at 19:29)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278879953"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278879953" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278879953">(Apr 13 2022 at 19:41)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278879962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278879962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278879962">(Apr 13 2022 at 19:41)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941465784">PR review</a>.</p>



<a name="278879963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278879963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278879963">(Apr 13 2022 at 19:41)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849832664">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="278881953"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278881953" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278881953">(Apr 13 2022 at 19:58)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278882161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278882161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278882161">(Apr 13 2022 at 20:00)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849846139">PR review comment</a>:</p>
<blockquote>
<p>Good idea; I've refactored in this direction. This particular helper (<code>pinned_vreg_to_preg</code>) is the canonical helper that defines the index split, along with <code>first_user_vreg_index()</code> below (index needed for vreg index allocation during lowering, but exposing it with this name only makes its intended use more clear).</p>
</blockquote>



<a name="278882162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278882162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278882162">(Apr 13 2022 at 20:00)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941488636">PR review</a>.</p>



<a name="278905308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278905308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278905308">(Apr 13 2022 at 23:41)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278905322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278905322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278905322">(Apr 13 2022 at 23:41)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941656951">PR review</a>.</p>



<a name="278905323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278905323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278905323">(Apr 13 2022 at 23:41)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849976854">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278905332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278905332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278905332">(Apr 13 2022 at 23:41)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941657007">PR review</a>.</p>



<a name="278905333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278905333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278905333">(Apr 13 2022 at 23:41)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849976904">PR review comment</a>:</p>
<blockquote>
<p>Yes, good point, done!</p>
</blockquote>



<a name="278909282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909282">(Apr 14 2022 at 00:40)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278909435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909435">(Apr 14 2022 at 00:42)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278909534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909534">(Apr 14 2022 at 00:44)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941683247">PR review</a>.</p>



<a name="278909535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909535">(Apr 14 2022 at 00:44)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849998518">PR review comment</a>:</p>
<blockquote>
<p>Done! The <code>Forward</code> option is actually dead, which totally makes sense, because we... don't have any forward VCode-to-VCode passes yet. I expect we will eventually, but IMHO it makes more sense to omit the enum arm (with a TODO explaining why) so that we can add it back only when we adequately test it.</p>
<p>(I'd just like to note as an aside that the dead-code analysis working to find unconstructed enum variants is <em>excellent</em>.)</p>
</blockquote>



<a name="278909562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909562">(Apr 14 2022 at 00:44)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941683552">PR review</a>.</p>



<a name="278909563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909563">(Apr 14 2022 at 00:44)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849998773">PR review comment</a>:</p>
<blockquote>
<p>Done! This is also actually dead right now, as calls use phantom defs (a legacy from <a href="http://regalloc.rs">regalloc.rs</a>). I'll create a followup issue to track using actual clobbers, which should be very marginally faster.</p>
</blockquote>



<a name="278909733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909733">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941684155">PR review</a>.</p>



<a name="278909734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909734">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849999255">PR review comment</a>:</p>
<blockquote>
<p>#4027</p>
</blockquote>



<a name="278909742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909742">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941684194">PR review</a>.</p>



<a name="278909743"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909743" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909743">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849999287">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278909752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909752">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941684245">PR review</a>.</p>



<a name="278909753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909753">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849999324">PR review comment</a>:</p>
<blockquote>
<p>Done, good idea, thanks!</p>
</blockquote>



<a name="278909758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909758">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941684289">PR review</a>.</p>



<a name="278909759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909759">(Apr 14 2022 at 00:46)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r849999355">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278909881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909881">(Apr 14 2022 at 00:48)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685115">PR review</a>.</p>



<a name="278909882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909882">(Apr 14 2022 at 00:48)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000063">PR review comment</a>:</p>
<blockquote>
<p>Here it's actually a little more subtle: we append to both of these separately while building a block, so it'd take a bit more state-tracking to append to one consolidated array and keep the ranges straight. I think it's technically possible but it's a bit error-prone and I think I'd prefer to keep the two arrays separate for now.</p>
<p>That said, it might be nice to eventually have a typesafe wrapper around this idiom -- maybe with multiple range-lists pointing into one pool-list and encoding that only one appender is outstanding at a time. Building that sounds like a nice followup task at some point.</p>
</blockquote>



<a name="278909886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909886">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000102">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278909887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909887">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685172">PR review</a>.</p>



<a name="278909893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909893">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685228">PR review</a>.</p>



<a name="278909894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909894">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000137">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278909902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909902">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685278">PR review</a>.</p>



<a name="278909904"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278909904" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278909904">(Apr 14 2022 at 00:49)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000165">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="278910011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910011">(Apr 14 2022 at 00:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685743">PR review</a>.</p>



<a name="278910012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910012">(Apr 14 2022 at 00:50)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000553">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="278910022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910022">(Apr 14 2022 at 00:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941685808">PR review</a>.</p>



<a name="278910023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910023">(Apr 14 2022 at 00:50)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000624">PR review comment</a>:</p>
<blockquote>
<p>Done, with a closure.</p>
</blockquote>



<a name="278910050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910050">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941686015">PR review</a>.</p>



<a name="278910051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910051">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000788">PR review comment</a>:</p>
<blockquote>
<p>The reason is to avoid an allocation: when we compute it, we incrementally build it in a <code>Vec</code>; the only use is to call <code>set_clobbered</code>, and the ABI object needs to subsequently retain it. So if we passed a slice we'd force a copy. Slightly non-idiomatic for the general API case but here the method just ties together two specific points in the code :-)</p>
</blockquote>



<a name="278910064"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910064" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910064">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941686102">PR review</a>.</p>



<a name="278910065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910065">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000864">PR review comment</a>:</p>
<blockquote>
<p>Likewise, the instruction retains the register list, and we build it in a <code>Vec</code> in at least one callsite, so we want to avoid the re-allocation/copy here.</p>
</blockquote>



<a name="278910075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910075">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941686152">PR review</a>.</p>



<a name="278910076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910076">(Apr 14 2022 at 00:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850000910">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="278910245"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910245" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910245">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850001549">PR review comment</a>:</p>
<blockquote>
<p>Ah, here we actually append to arbitrary lists as we go, i.e. the ranges are not contiguous, so I think we need to keep separate vecs. We can't do the alternative "build a commingled pool then sort" trick either, as we need to examine the in-progress sequence when we append new content.</p>
</blockquote>



<a name="278910246"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910246" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910246">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941686867">PR review</a>.</p>



<a name="278910248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910248">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941686913">PR review</a>.</p>



<a name="278910249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910249">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850001593">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="278910277"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910277" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910277">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941687048">PR review</a>.</p>



<a name="278910278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910278">(Apr 14 2022 at 00:53)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850001681">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="278910367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910367">(Apr 14 2022 at 00:54)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278910432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910432">(Apr 14 2022 at 00:55)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941687666">PR review</a>.</p>



<a name="278910433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910433">(Apr 14 2022 at 00:55)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850002198">PR review comment</a>:</p>
<blockquote>
<p>Yeah, it was mostly just to help the reviewers (ie, you) as a delta, rather than a snapshot of the whole design, so I'll go ahead and delete it I think. It'll still be around in my branch (I'll delete it in a separate commit) if anyone wants to dig it up later.</p>
</blockquote>



<a name="278910995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910995">(Apr 14 2022 at 01:01)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941689965">PR review</a>.</p>



<a name="278910996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278910996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278910996">(Apr 14 2022 at 01:01)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850004112">PR review comment</a>:</p>
<blockquote>
<p>Filed #4028 for this.</p>
</blockquote>



<a name="278911210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278911210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278911210">(Apr 14 2022 at 01:04)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#pullrequestreview-941691135">PR review</a>.</p>



<a name="278911211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278911211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278911211">(Apr 14 2022 at 01:04)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3989#discussion_r850005038">PR review comment</a>:</p>
<blockquote>
<p>Filed <a href="https://github.com/bytecodealliance/regalloc2/issues/42">bytecodealliance/regalloc2#42</a> for this.</p>
</blockquote>



<a name="278915669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278915669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278915669">(Apr 14 2022 at 02:21)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a> from <code>regalloc2-clean</code> to <code>main</code>.</p>



<a name="278996282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233989%20Switch%20Cranelift%20over%20to%20regalloc2./near/278996282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233989.20Switch.20Cranelift.20over.20to.20regalloc2.2E.html#278996282">(Apr 14 2022 at 17:28)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3989">PR #3989</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>