<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8785 cranelift: Delete scalar `{u,s}loadNN... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html">wasmtime / PR #8785 cranelift: Delete scalar `{u,s}loadNN...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="444306426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444306426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444306426">(Jun 12 2024 at 18:42)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>.</p>



<a name="444306427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444306427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444306427">(Jun 12 2024 at 18:42)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>.</p>



<a name="444306428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444306428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444306428">(Jun 12 2024 at 18:42)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a> from <code>afonso360:delete-special-mem</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This is a WIP PR to delete the scalar load+extend instructions. I'm still working on cleaning up the s390x backend, but I saw there was some discussion on today's meeting regarding this. </p>
<p>I haven't done any benchmarking, but if someone wants to take a stab at it, this PR should be pretty much done for all backends except s390x.</p>
<p>CC: <a href="https://github.com/bytecodealliance/wasmtime/issues/6056">https://github.com/bytecodealliance/wasmtime/issues/6056</a></p>
</blockquote>



<a name="444306429"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444306429" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444306429">(Jun 12 2024 at 18:42)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>.</p>



<a name="444306732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444306732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444306732">(Jun 12 2024 at 18:43)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This is a WIP PR to delete the scalar load+extend instructions. I'm still working on cleaning up the s390x backend, but I saw there was some discussion on today's meeting regarding this. (Unfortunately these now clash with some other stuff and I'm unable to attend)</p>
<p>I haven't done any benchmarking, but if someone wants to take a stab at it, this PR should be pretty much done for all backends except s390x.</p>
<p>CC: <a href="https://github.com/bytecodealliance/wasmtime/issues/6056">https://github.com/bytecodealliance/wasmtime/issues/6056</a></p>
</blockquote>



<a name="444308122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444308122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444308122">(Jun 12 2024 at 18:51)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This is a WIP PR to delete the scalar load+extend instructions. I'm still working on cleaning up the s390x backend, but I saw there was some discussion on today's meeting regarding this. (Unfortunately these now clash with some other stuff and I'm unable to attend)</p>
<p>I haven't done any benchmarking, and I just noticed there are some cases where we are not correctly fusing the load+extend. Once that is working correctly I'll try to run sightglass on it.</p>
<p>CC: <a href="https://github.com/bytecodealliance/wasmtime/issues/6056">https://github.com/bytecodealliance/wasmtime/issues/6056</a></p>
</blockquote>



<a name="444323444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444323444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444323444">(Jun 12 2024 at 20:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2163822542">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>For context I brought this up in the Cranelift meeting today as I was curious about the genesis of the instructions. My assumption was that these were added under the assumption that the pattern of load+extend or ireduce+store would be so common that having fused ops in Cranelift would reduce the size of the resident IR during compilation and perhaps have other various memory/compile-time benefits. The conclusion though was that while this was probably the predicted purpose of the instructions no one was aware of any benchmarking one way or another to show the impact. </p>
<p>I think it'd be worthwhile to put this through sightglass to ensure there's not, for example, a 10% slowdown compiling spidermonkey, but otherwise I think we're all in the abstract all for cleanups that simplify the IR.</p>
</blockquote>



<a name="444349060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444349060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444349060">(Jun 12 2024 at 23:15)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2164045288">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>Ran some quick benchmarks on this, doesn't seem to make too much of a difference, except for spidermonkey where there is a slight compile time regression.</p>
<p>I should also note that this version suffers from the issue described in <a href="https://github.com/bytecodealliance/wasmtime/issues/8787">https://github.com/bytecodealliance/wasmtime/issues/8787</a>, but it looks like that doesn't affect larger programs too much? It does affect the test cases which slightly bothers me.</p>
<p>&lt;details&gt;<br>
&lt;summary&gt;Sightglass results&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.10</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">sightglass</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">benchmark</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">iterations</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">--</span><span class="n">processes</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>
<span class="p">.</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">250476630.15</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">157064794.89</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.03</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">14521885186</span><span class="w"> </span><span class="mf">14938969886.45</span><span class="w"> </span><span class="mi">15446520641</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">14558278944</span><span class="w"> </span><span class="mf">14688493256.30</span><span class="w"> </span><span class="mi">15396563040</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">528672</span><span class="w"> </span><span class="mf">687515.20</span><span class="w"> </span><span class="mi">1726784</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">528352</span><span class="w"> </span><span class="mf">761440.00</span><span class="w"> </span><span class="mi">2136608</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">200704</span><span class="w"> </span><span class="mf">226676.80</span><span class="w"> </span><span class="mi">266368</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">196128</span><span class="w"> </span><span class="mf">242470.40</span><span class="w"> </span><span class="mi">326496</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">317088</span><span class="w"> </span><span class="mf">364465.60</span><span class="w"> </span><span class="mi">469152</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">314976</span><span class="w"> </span><span class="mf">380755.20</span><span class="w"> </span><span class="mi">560736</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">590328960</span><span class="w"> </span><span class="mf">645099580.55</span><span class="w"> </span><span class="mi">788561440</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">603675135</span><span class="w"> </span><span class="mf">673634577.60</span><span class="w"> </span><span class="mi">887706080</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">124808576</span><span class="w"> </span><span class="mf">134569985.05</span><span class="w"> </span><span class="mi">199907890</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">122697376</span><span class="w"> </span><span class="mf">130622858.45</span><span class="w"> </span><span class="mi">157331714</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">513856</span><span class="w"> </span><span class="mf">599899.20</span><span class="w"> </span><span class="mi">1005408</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">459328</span><span class="w"> </span><span class="mf">615880.00</span><span class="w"> </span><span class="mi">1086016</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">1356884384</span><span class="w"> </span><span class="mf">1438567822.70</span><span class="w"> </span><span class="mi">1639913438</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1371897536</span><span class="w"> </span><span class="mf">1467483544.05</span><span class="w"> </span><span class="mi">1656487360</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">260681040</span><span class="w"> </span><span class="mf">299165913.20</span><span class="w"> </span><span class="mi">481644877</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">261796512</span><span class="w"> </span><span class="mf">294465843.00</span><span class="w"> </span><span class="mi">491744160</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">9724864</span><span class="w"> </span><span class="mf">10999916.80</span><span class="w"> </span><span class="mi">13853504</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">10061056</span><span class="w"> </span><span class="mf">10919562.45</span><span class="w"> </span><span class="mi">12255328</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">284849472</span><span class="w"> </span><span class="mf">298366723.55</span><span class="w"> </span><span class="mi">319585712</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">281981504</span><span class="w"> </span><span class="mf">296739732.85</span><span class="w"> </span><span class="mi">332067262</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">cycles</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">1437751471</span><span class="w"> </span><span class="mf">1491664753.05</span><span class="w"> </span><span class="mi">1615952144</span><span class="p">]</span><span class="w"> </span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1434106066</span><span class="w"> </span><span class="mf">1487088603.50</span><span class="w"> </span><span class="mi">1577413794</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
</code></pre></div>
<p>&lt;/details&gt;<br>
</p>
</blockquote>



<a name="444359764"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444359764" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444359764">(Jun 13 2024 at 01:17)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2164173828">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>Thanks for running those benchmarks! IMHO, a 1-3% compile time regression is unfortunately a bit too significant to take for a pure "cleanliness win" change (others may disagree, happy to discuss; in the CL meeting this morning I gave a clean 1% as an example of a number I'd personally be fine with, 10% as an example clearly not, 3% is somewhere in the middle).</p>
<p>I wonder if it gets any better if we do handle merging better, along the lines of #8787 -- the compile slowdown could arise because of larger VCode on average rather than larger CLIF, as well. Worth trying to resolve that first then coming back to benchmark this again perhaps?</p>
</blockquote>



<a name="444556019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/444556019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#444556019">(Jun 13 2024 at 20:31)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2166711323">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<blockquote>
<p>IMHO, a 1-3% compile time regression is unfortunately a bit too significant to take for a pure "cleanliness win" change </p>
</blockquote>
<p>Yeah, I don't think it's worth it if we have this regression. </p>
<blockquote>
<p>I wonder if it gets any better if we do handle merging better, along the lines of <a href="https://github.com/bytecodealliance/wasmtime/issues/8787">https://github.com/bytecodealliance/wasmtime/issues/8787</a> -- the compile slowdown could arise because of larger VCode on average rather than larger CLIF, as well. Worth trying to resolve that first then coming back to benchmark this again perhaps?</p>
</blockquote>
<p>Maybe, I'm not too familiar with how we do elaboration on egraphs so it might be slightly harder for me to pick that up. </p>
<p>Reading <a href="https://github.com/bytecodealliance/wasmtime/issues/6154">https://github.com/bytecodealliance/wasmtime/issues/6154</a> got me interested in the jump-threading pass idea, even though I think moving the extends next to the loads would be more effective in this case. I probably won't have time to look at it now but maybe later.</p>
</blockquote>



<a name="445133328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/445133328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#445133328">(Jun 17 2024 at 13:30)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2173405062">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>By the way, I was doing some unrelated benchmarking and found out that sightglass is not consistent enough on my machine to give me confidence that the result above is real / meaningful.</p>
<p>I'm going to try to run the benchmarks again on a more stable setup when I get some time, although I suspect it's probably going to amount to the same.</p>
</blockquote>



<a name="445191263"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/445191263" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#445191263">(Jun 17 2024 at 17:54)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2173998106">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>@afonso360 you could try measuring instructions retired instead of cycles, pass something like <code>-m insts-retired</code> to sightglass. It should be much more consistent, and this change isn't the kind of thing where we instructions retired is a poor proxy for performance (as opposed to when measuring changes that are intended to improve cache locality, for example).</p>
</blockquote>



<a name="445844288"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/445844288" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#445844288">(Jun 20 2024 at 13:21)</a>:</h4>
<p>afonso360 closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>.</p>



<a name="445844294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/445844294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#445844294">(Jun 20 2024 at 13:21)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2180675183">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>I re-ran the benchmarks with <code>-m insts-retired</code> and some of the steps in <code>cpu-isolation.md</code>. It's still not 100% reproducible across runs, but it's a lot better.</p>
<p>However the results are now completely different from the results above.</p>
<p>&lt;details&gt;</p>
<p>&lt;summary&gt;Sightglass Results&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">fedora</span><span class="p">:</span><span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">sightglass</span><span class="cp">$</span><span class="w"> </span><span class="n">taskset</span><span class="w"> </span><span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmark</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">iterations</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">--</span><span class="n">processes</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">insts</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>
<span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">virtual</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">defaulting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">`</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="err">`</span><span class="w"> </span><span class="n">despite</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">edition</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">implies</span><span class="w"> </span><span class="err">`</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2"</span><span class="err">`</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">root</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">edition</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2"</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">root</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//doc.rust-lang.org/cargo/reference/resolver.html#resolver-versions</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.37</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">sightglass</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">benchmark</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">iterations</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">--</span><span class="n">processes</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">insts</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">53721614.20</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">3668.44</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">737583027</span><span class="w"> </span><span class="mf">737586621.20</span><span class="w"> </span><span class="mi">737590770</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">791305114</span><span class="w"> </span><span class="mf">791308235.40</span><span class="w"> </span><span class="mi">791313975</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">15985756.30</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">2.10</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">227672476</span><span class="w"> </span><span class="mf">227672479.20</span><span class="w"> </span><span class="mi">227672481</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">243658234</span><span class="w"> </span><span class="mf">243658235.50</span><span class="w"> </span><span class="mi">243658239</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2971.00</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">2002.10</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.02</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.11</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">43088</span><span class="w"> </span><span class="mf">45173.90</span><span class="w"> </span><span class="mi">49561</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">46621</span><span class="w"> </span><span class="mf">48144.90</span><span class="w"> </span><span class="mi">49943</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">976271.20</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">336.81</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">19771797</span><span class="w"> </span><span class="mf">19771883.20</span><span class="w"> </span><span class="mi">19772465</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">20747941</span><span class="w"> </span><span class="mf">20748154.40</span><span class="w"> </span><span class="mi">20748599</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">29346100.10</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">77173.30</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">2660295835</span><span class="w"> </span><span class="mf">2660354378.00</span><span class="w"> </span><span class="mi">2660420572</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">2689612009</span><span class="w"> </span><span class="mf">2689700478.10</span><span class="w"> </span><span class="mi">2689780017</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">80572.40</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">75315.03</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.00</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.00</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">37695341</span><span class="w"> </span><span class="mf">37800338.60</span><span class="w"> </span><span class="mi">37888633</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">37747142</span><span class="w"> </span><span class="mf">37880911.00</span><span class="w"> </span><span class="mi">37960870</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">46462</span><span class="w"> </span><span class="mf">71324.50</span><span class="w"> </span><span class="mi">168586</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">46932</span><span class="w"> </span><span class="mf">47315.60</span><span class="w"> </span><span class="mi">47940</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">37923</span><span class="w"> </span><span class="mf">60559.60</span><span class="w"> </span><span class="mi">69184</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">63367</span><span class="w"> </span><span class="mf">68729.70</span><span class="w"> </span><span class="mi">72940</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">35647</span><span class="w"> </span><span class="mf">36528.00</span><span class="w"> </span><span class="mi">37098</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">35728</span><span class="w"> </span><span class="mf">41068.30</span><span class="w"> </span><span class="mi">60408</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">4079658</span><span class="w"> </span><span class="mf">4110764.30</span><span class="w"> </span><span class="mi">4134315</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">4079041</span><span class="w"> </span><span class="mf">4097484.70</span><span class="w"> </span><span class="mi">4118287</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">374729187</span><span class="w"> </span><span class="mf">375180105.70</span><span class="w"> </span><span class="mi">375606520</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">375041594</span><span class="w"> </span><span class="mf">375590062.10</span><span class="w"> </span><span class="mi">376019380</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">15772628</span><span class="w"> </span><span class="mf">15798740.50</span><span class="w"> </span><span class="mi">15873683</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">15784192</span><span class="w"> </span><span class="mf">15808475.30</span><span class="w"> </span><span class="mi">15841131</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>
</code></pre></div>
<p>&lt;/details&gt;</p>
<p>Weirdly there is now no longer any compilation difference, but there are execution differences.</p>
<p>I'm going to close this for now, however I'm planning on redoing these benchmarks when we have a jump threading pass, which I'm currently working on.</p>
</blockquote>



<a name="445844531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238785%20cranelift%3A%20Delete%20scalar%20%60%7Bu%2Cs%7DloadNN.../near/445844531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238785.20cranelift.3A.20Delete.20scalar.20.60.7Bu.2Cs.7DloadNN.2E.2E.2E.html#445844531">(Jun 20 2024 at 13:22)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8785#issuecomment-2180675183">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8785">PR #8785</a>:</p>
<blockquote>
<p>I re-ran the benchmarks with <code>-m insts-retired</code> and some of the steps in <code>cpu-isolation.md</code>. It's still not 100% reproducible across runs, but it's a lot better.</p>
<p>However the results are now completely different from the results above.</p>
<p>&lt;details&gt;</p>
<p>&lt;summary&gt;Sightglass Results&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">afonso</span><span class="o">@</span><span class="n">fedora</span><span class="p">:</span><span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">sightglass</span><span class="cp">$</span><span class="w"> </span><span class="n">taskset</span><span class="w"> </span><span class="o">--</span><span class="n">cpu</span><span class="o">-</span><span class="n">list</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmark</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">iterations</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">--</span><span class="n">processes</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">insts</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>
<span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">virtual</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">defaulting</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="err">`</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="err">`</span><span class="w"> </span><span class="n">despite</span><span class="w"> </span><span class="n">one</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">members</span><span class="w"> </span><span class="n">being</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">edition</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="n">which</span><span class="w"> </span><span class="n">implies</span><span class="w"> </span><span class="err">`</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2"</span><span class="err">`</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">to</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">current</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"1"</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">root</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">edition</span><span class="w"> </span><span class="mi">2021</span><span class="w"> </span><span class="n">resolver</span><span class="p">,</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="err">`</span><span class="n">workspace</span><span class="p">.</span><span class="n">resolver</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"2"</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">workspace</span><span class="w"> </span><span class="n">root</span><span class="o">'</span><span class="na">s</span><span class="w"> </span><span class="n">manifest</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">details</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//doc.rust-lang.org/cargo/reference/resolver.html#resolver-versions</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.37</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">sightglass</span><span class="o">-</span><span class="n">cli</span><span class="w"> </span><span class="n">benchmark</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">engine</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">delete</span><span class="o">-</span><span class="n">special</span><span class="o">-</span><span class="n">mem</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="o">--</span><span class="n">iterations</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">process</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">--</span><span class="n">processes</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="n">insts</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">53721614.20</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">3668.44</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">737583027</span><span class="w"> </span><span class="mf">737586621.20</span><span class="w"> </span><span class="mi">737590770</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">791305114</span><span class="w"> </span><span class="mf">791308235.40</span><span class="w"> </span><span class="mi">791313975</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">15985756.30</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">2.10</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.07</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">227672476</span><span class="w"> </span><span class="mf">227672479.20</span><span class="w"> </span><span class="mi">227672481</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">243658234</span><span class="w"> </span><span class="mf">243658235.50</span><span class="w"> </span><span class="mi">243658239</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2971.00</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">2002.10</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.02</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.11</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">43088</span><span class="w"> </span><span class="mf">45173.90</span><span class="w"> </span><span class="mi">49561</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">46621</span><span class="w"> </span><span class="mf">48144.90</span><span class="w"> </span><span class="mi">49943</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">976271.20</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">336.81</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">19771797</span><span class="w"> </span><span class="mf">19771883.20</span><span class="w"> </span><span class="mi">19772465</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">20747941</span><span class="w"> </span><span class="mf">20748154.40</span><span class="w"> </span><span class="mi">20748599</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">29346100.10</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">77173.30</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">2660295835</span><span class="w"> </span><span class="mf">2660354378.00</span><span class="w"> </span><span class="mi">2660420572</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">2689612009</span><span class="w"> </span><span class="mf">2689700478.10</span><span class="w"> </span><span class="mi">2689780017</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">80572.40</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">75315.03</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.00</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.00</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">37695341</span><span class="w"> </span><span class="mf">37800338.60</span><span class="w"> </span><span class="mi">37888633</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">37747142</span><span class="w"> </span><span class="mf">37880911.00</span><span class="w"> </span><span class="mi">37960870</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">46462</span><span class="w"> </span><span class="mf">71324.50</span><span class="w"> </span><span class="mi">168586</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">46932</span><span class="w"> </span><span class="mf">47315.60</span><span class="w"> </span><span class="mi">47940</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">37923</span><span class="w"> </span><span class="mf">60559.60</span><span class="w"> </span><span class="mi">69184</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">63367</span><span class="w"> </span><span class="mf">68729.70</span><span class="w"> </span><span class="mi">72940</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">regex</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">35647</span><span class="w"> </span><span class="mf">36528.00</span><span class="w"> </span><span class="mi">37098</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">35728</span><span class="w"> </span><span class="mf">41068.30</span><span class="w"> </span><span class="mi">60408</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">4079658</span><span class="w"> </span><span class="mf">4110764.30</span><span class="w"> </span><span class="mi">4134315</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">4079041</span><span class="w"> </span><span class="mf">4097484.70</span><span class="w"> </span><span class="mi">4118287</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">374729187</span><span class="w"> </span><span class="mf">375180105.70</span><span class="w"> </span><span class="mi">375606520</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">375041594</span><span class="w"> </span><span class="mf">375590062.10</span><span class="w"> </span><span class="mi">376019380</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">instructions</span><span class="o">-</span><span class="n">retired</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">15772628</span><span class="w"> </span><span class="mf">15798740.50</span><span class="w"> </span><span class="mi">15873683</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">15784192</span><span class="w"> </span><span class="mf">15808475.30</span><span class="w"> </span><span class="mi">15841131</span><span class="p">]</span><span class="w"> </span><span class="p">.</span><span class="n">so</span>
</code></pre></div>
<p>&lt;/details&gt;</p>
<p>Weirdly there is now no longer any compilation difference, but there are execution differences.</p>
<p>I'm going to close this for now, however I'm planning on redoing these benchmarks when we have a jump threading pass, which I'm currently working on (slowly).</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>