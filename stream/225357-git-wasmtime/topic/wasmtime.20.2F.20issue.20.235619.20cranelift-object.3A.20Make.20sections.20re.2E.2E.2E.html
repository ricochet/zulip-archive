<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5619 cranelift-object: Make sections re... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html">wasmtime / issue #5619 cranelift-object: Make sections re...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="323087998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/323087998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#323087998">(Jan 23 2023 at 18:22)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1400784982">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>The diff itself looks fine here; I'll trust that this section type is what is needed :-)</p>
<p>Regarding CI:</p>
<ul>
<li>Can you see if you can consolidate deps back to one version of <code>object</code>? There's probably another crate somewhere still using the old version.</li>
<li>One of us will need to vet the diff for the <code>object</code> upgrade; I'll get to this in a bit if no one else does first!</li>
</ul>
</blockquote>



<a name="323094825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/323094825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#323094825">(Jan 23 2023 at 18:57)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1400825991">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<blockquote>
<p>Can you see if you can consolidate deps back to one version of object? There's probably another crate somewhere still using the old version.</p>
</blockquote>
<p>Did the best I could, we are now only duplicating the <code>hashbrown</code> crate. The old version is a dependency of <code>indexmap</code> which itself is a dependency of 3-4 other crates, and I figured this would be a good place to stop.</p>
<p>Also <code>hashbrown</code> has moved some of their API that we used behind a feature flag.</p>
<blockquote>
<p>One of us will need to vet the diff for the object upgrade; I'll get to this in a bit if no one else does first!</p>
</blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span>, You also recently did a similar vet for <code>object</code> up to <code>0.30</code> in <a href="https://github.com/bytecodealliance/wasmtime/pull/5434#issuecomment-1350337637">https://github.com/bytecodealliance/wasmtime/pull/5434#issuecomment-1350337637</a> so we're just missing <code>0.30 -&gt; 0.30.3</code>.</p>
</blockquote>



<a name="326707666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/326707666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#326707666">(Feb 08 2023 at 23:50)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1423387972">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>@afonso360 would you be willing to update this with an exemption for the <code>hashbrown</code> version duplication to the cargo-deny config (if the issue hasn't gone away with updates in the meantime)? Otherwise I think this PR is ready to go...</p>
</blockquote>



<a name="326776029"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/326776029" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#326776029">(Feb 09 2023 at 10:20)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1423950322">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>I've rebased this and added the exception, but I think we still have the same issue with cargo vet of missing a few vet's</p>
</blockquote>



<a name="326776129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/326776129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#326776129">(Feb 09 2023 at 10:21)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1423950322">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>I've rebased this and added the exception, but I think we still have the same issue with cargo vet of missing a few vet's similar to #5550.</p>
</blockquote>



<a name="327993935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/327993935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#327993935">(Feb 15 2023 at 12:22)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1431286815">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>Rebased this on top of main, and that resolves pretty much all of our vet issues. With the exception of <code>object 0.30.1 -&gt; 0.30.3</code>, that update is introduced in this PR since <code>SectionKind::ReadOnlyDataWithRel</code> didn't exist before.</p>
</blockquote>



<a name="328644334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/328644334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#328644334">(Feb 18 2023 at 11:00)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1435643148">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>Thanks for unblocking this! <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
</blockquote>



<a name="328657995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235619%20cranelift-object%3A%20Make%20sections%20re.../near/328657995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235619.20cranelift-object.3A.20Make.20sections.20re.2E.2E.2E.html#328657995">(Feb 18 2023 at 12:23)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/5619#issuecomment-1435658061">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5619">issue #5619</a>:</p>
<blockquote>
<p>The <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/4210917121/jobs/7308913583#step:15:924">merge queue failure</a> seems to have been sporadic, I <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/4210917121/jobs/7309070210">retried</a> the job and it passed. I'm going to retry the merge queue again.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>