<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3384 Implement `bmask` in AArch64 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html">wasmtime / PR #3384 Implement `bmask` in AArch64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="254538774"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254538774" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254538774">(Sep 23 2021 at 13:55)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3384">PR #3384</a> from <code>aarch64-bmask</code> to <code>main</code>:</p>
<blockquote>
<p>Hey, this PR Implements <code>bmask</code> for all types in the AArch64 backend, as well as fixes for <code>ireduce</code>, <code>breduce</code> and <code>bextend</code> for some types.</p>
<p>We have to make some changes in the trampoline to make bool args with size larger than 1 work.</p>
</blockquote>



<a name="254557742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254557742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254557742">(Sep 23 2021 at 15:47)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-762203448">PR review</a>.</p>



<a name="254557743"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254557743" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254557743">(Sep 23 2021 at 15:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r714929987">PR review comment</a>:</p>
<blockquote>
<p>I am afraid that this is not true for vector types; e.g. consider an operation from <code>B8X8</code> to <code>B16X8</code>.</p>
<p>Unless both the input and the output have the same lane sizes (the number of lanes is always the same, as specified by the operation descriptions), you will have to write much more complicated logic, and will probably be unable to merge the scalar and vector code paths, as you do now.</p>
</blockquote>



<a name="254557744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254557744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254557744">(Sep 23 2021 at 15:47)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-762203448">PR review</a>.</p>



<a name="254560495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254560495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254560495">(Sep 23 2021 at 16:04)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-762224020">PR review</a>.</p>



<a name="254560496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254560496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254560496">(Sep 23 2021 at 16:04)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r714944892">PR review comment</a>:</p>
<blockquote>
<p>Right, I didn't really prepare this for those types (non 128 bit vectors). I haven't really seen them used anywhere so far.</p>
<p>Would it be acceptable to assert on 128bit vectors for now?<br>
</p>
</blockquote>



<a name="254573513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254573513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254573513">(Sep 23 2021 at 17:32)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-762313583">PR review</a>.</p>



<a name="254573514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254573514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254573514">(Sep 23 2021 at 17:32)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715011816">PR review comment</a>:</p>
<blockquote>
<p>No, just keep the block (lines 1864 - 1869) that you have removed. Of course, you will need to change the condition - I suppose to <code>from_ty.is_vector() &amp;&amp; (from_bits != 128 || from_bits != to_bits)</code>.</p>
<p>IMHO assertions should be used for verifying invariants guaranteed by the IR descriptions, e.g. checking that the number of input lanes is equal to the number of output lanes. That is the approach I have used in my recent changes.</p>
</blockquote>



<a name="254574752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254574752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254574752">(Sep 23 2021 at 17:40)</a>:</h4>
<p>akirilov-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715011816">PR review comment</a>.</p>



<a name="254575104"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254575104" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254575104">(Sep 23 2021 at 17:43)</a>:</h4>
<p>akirilov-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715011816">PR review comment</a>.</p>



<a name="254575179"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254575179" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254575179">(Sep 23 2021 at 17:43)</a>:</h4>
<p>akirilov-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715011816">PR review comment</a>.</p>



<a name="254741961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254741961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254741961">(Sep 24 2021 at 17:31)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3384">PR #3384</a> from <code>aarch64-bmask</code> to <code>main</code>.</p>



<a name="254776363"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776363" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776363">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-763482511">PR review</a>.</p>



<a name="254776364"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776364" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776364">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715909652">PR review comment</a>:</p>
<blockquote>
<p>Given that <code>to_bits &gt; from_bits</code>, we know that <code>from_bits &lt;= 64</code>, so there is no need to calculate a minimum here.</p>
</blockquote>



<a name="254776365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776365">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715915300">PR review comment</a>:</p>
<blockquote>
<p>We could also be lowering <code>Ireduce</code> - see below.</p>
</blockquote>



<a name="254776366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776366">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-763482511">PR review</a>.</p>



<a name="254776367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776367">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715914705">PR review comment</a>:</p>
<blockquote>
<p>Remove this assertion - <code>Breduce</code> from <code>B128</code> to <code>B128</code> and <code>Ireduce</code> from <code>I128</code> to <code>I128</code> are also valid operations.</p>
</blockquote>



<a name="254776368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254776368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254776368">(Sep 24 2021 at 21:36)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715916161">PR review comment</a>:</p>
<blockquote>
<p>I feel like this should be calculated in parallel with the bottom half, at the expense of a bit of code duplication, especially in the case of <code>from_bits == to_bits</code>.</p>
</blockquote>



<a name="254777829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254777829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254777829">(Sep 24 2021 at 21:49)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-763497197">PR review</a>.</p>



<a name="254777830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254777830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254777830">(Sep 24 2021 at 21:49)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715921357">PR review comment</a>:</p>
<blockquote>
<p>Even after your latest changes, this comment should be changed to <code>Smaller scalar integers/booleans are...</code>.</p>
</blockquote>



<a name="254778275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254778275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254778275">(Sep 24 2021 at 21:52)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-763498790">PR review</a>.</p>



<a name="254778276"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254778276" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254778276">(Sep 24 2021 at 21:52)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715922783">PR review comment</a>:</p>
<blockquote>
<p>Now that I think about it, <code>Ireduce</code> from <code>I128</code> to <code>I128</code> needs completely different treatment - the upper destination register is not a copy of the lower source register.</p>
</blockquote>



<a name="254778792"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/254778792" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#254778792">(Sep 24 2021 at 21:57)</a>:</h4>
<p>akirilov-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r715922783">PR review comment</a>.</p>



<a name="256601238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/256601238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#256601238">(Oct 07 2021 at 15:50)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-774098217">PR review</a>.</p>



<a name="256601239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/256601239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#256601239">(Oct 07 2021 at 15:50)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r724313128">PR review comment</a>:</p>
<blockquote>
<p>The docs state that <code>ireduce</code> requires that the output type is smaller than the input type, so at most we only ever have a <code>i64</code> output (if we get a <code>i128</code> input). I've checked and the verifier enforces this. <code>breduce</code> has the same language in the docs.<br>
</p>
</blockquote>



<a name="256613500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/256613500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#256613500">(Oct 07 2021 at 17:04)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#discussion_r724372448">PR review comment</a>:</p>
<blockquote>
<p>Well, then there is a contradiction because the documentation right now <a href="https://github.com/bytecodealliance/wasmtime/blob/ba3ce2280a636bbf24ca712928931550ecaa3f0b/cranelift/codegen/meta/src/shared/instructions.rs#L3883">states</a>:</p>
<blockquote>
<p>The result type must have the same number of vector lanes as the input, and each lane must not have more bits that the input lanes.</p>
</blockquote>
<p>In other words, there are two options - either the same number of bits per lane, or fewer. If indeed the verifier enforces the second option, then do you mind making the description less ambiguous? Same for <code>Breduce</code>.</p>
</blockquote>



<a name="256613502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/256613502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#256613502">(Oct 07 2021 at 17:04)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3384#pullrequestreview-774178934">PR review</a>.</p>



<a name="269435339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233384%20Implement%20%60bmask%60%20in%20AArch64/near/269435339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233384.20Implement.20.60bmask.60.20in.20AArch64.html#269435339">(Jan 26 2022 at 16:03)</a>:</h4>
<p>afonso360 closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/3384">PR #3384</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>