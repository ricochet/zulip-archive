<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6610 winch: Test winch against a subset... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236610.20winch.3A.20Test.20winch.20against.20a.20subset.2E.2E.2E.html">wasmtime / issue #6610 winch: Test winch against a subset...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="368065778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236610%20winch%3A%20Test%20winch%20against%20a%20subset.../near/368065778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236610.20winch.3A.20Test.20winch.20against.20a.20subset.2E.2E.2E.html#368065778">(Jun 20 2023 at 22:28)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6610#issuecomment-1599656865">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6610">issue #6610</a>:</p>
<blockquote>
<p>I realize after writing that all out that you've probably already also considered such an idea, so I could also rephrase much of it as "I'm not sure why a copy of <code>block.wast</code> was added", but if that's well-motivated them seems fine!</p>
</blockquote>



<a name="368209585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236610%20winch%3A%20Test%20winch%20against%20a%20subset.../near/368209585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236610.20winch.3A.20Test.20winch.20against.20a.20subset.2E.2E.2E.html#368209585">(Jun 21 2023 at 11:52)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/6610#issuecomment-1600695768">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6610">issue #6610</a>:</p>
<blockquote>
<blockquote>
<p>I'm not sure why a copy of block.wast was added", but if that's well-motivated them seems fine!</p>
</blockquote>
<p>Yeah, the copy of the spec tests is one of the unfortunate bits of this approach. Unfortunately attempting to run all the tests and adding <code>#[ignore]</code> when a non-supported feature is detected will result in most (if not all) of the official spec tests getting ignored, since as far as I can tell, there's no way to ignore spec tests at a more granular level. Even though Winch is shaping up, it doesn't offer support for finished proposals that are already part of the official spec suite, like multi-value for example, which many of the tests in the official spec test suite use. But it's totally possible that I might have missed a better way of avoiding the duplication, and if that's the case, I'm all in to explore alternatives! </p>
</blockquote>



<a name="368340922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236610%20winch%3A%20Test%20winch%20against%20a%20subset.../near/368340922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236610.20winch.3A.20Test.20winch.20against.20a.20subset.2E.2E.2E.html#368340922">(Jun 21 2023 at 19:22)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6610#issuecomment-1601545341">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6610">issue #6610</a>:</p>
<blockquote>
<p>One idea perhaps would be to add a test for <code>strategy</code> in the <code>ignore</code> function against <code>"Winch"</code> and blanket return <code>true</code> (ignore everything) and then add a small allow-list for tests there? Or alternative blanket-ignore entire directories/subtrees but blanket-include others, for example <code>tests/misc_testsuite/winch/*.wast</code> could be tested in winch for now?</p>
<p>Otherwise though this is a transient state of affairs while support is shored up in winch so while I personally try to minimize the churn during the transient state I don't think it's bad to have churn and/or copies of files, so again I think whatever's easiest for your development should work best. In the long run everything should be run through both Winch/Cranelift and the "weird cases" will be much more defined.</p>
</blockquote>



<a name="371273638"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236610%20winch%3A%20Test%20winch%20against%20a%20subset.../near/371273638" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236610.20winch.3A.20Test.20winch.20against.20a.20subset.2E.2E.2E.html#371273638">(Jun 30 2023 at 18:58)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/6610#issuecomment-1615077893">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6610">issue #6610</a>:</p>
<blockquote>
<p>I finally got a chance to get back to this! I decided to try the approach of ignoring everything except for the <code>winch</code> misc test suite, I believe this will require the least amount of changes once we decide to enable everything by default in the future.</p>
<p>This should be ready for a review @alexcrichton; one thing to note is that I didn't add the <code>if</code> test suite yet, because I found one bug that I'm currently trying to figure out, once I do, I'll push the fix along with the test suite. </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>