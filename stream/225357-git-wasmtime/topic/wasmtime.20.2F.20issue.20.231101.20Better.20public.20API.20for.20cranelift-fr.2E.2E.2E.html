<html>
<head><meta charset="utf-8"><title>wasmtime / issue #1101 Better public API for cranelift-fr... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231101.20Better.20public.20API.20for.20cranelift-fr.2E.2E.2E.html">wasmtime / issue #1101 Better public API for cranelift-fr...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="326757209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231101%20Better%20public%20API%20for%20cranelift-fr.../near/326757209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231101.20Better.20public.20API.20for.20cranelift-fr.2E.2E.2E.html#326757209">(Feb 09 2023 at 08:43)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1101#issuecomment-1423825792">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1101">issue #1101</a>:</p>
<blockquote>
<p>These methods are no longer public.</p>
</blockquote>



<a name="326872551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231101%20Better%20public%20API%20for%20cranelift-fr.../near/326872551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231101.20Better.20public.20API.20for.20cranelift-fr.2E.2E.2E.html#326872551">(Feb 09 2023 at 17:26)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/1101#issuecomment-1424552941">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1101">issue #1101</a>:</p>
<blockquote>
<p>We've had some inquiries showing that people were using <code>is_pristine</code> or <code>is_filled</code>, so we should keep thinking about whether we should add something like these functions back. They aren't strictly necessary since you can always either track the information yourself while adding instructions, or query the <code>Layout</code> and <code>DataFlowGraph</code>.</p>
<p>But if we decide we do want helpers for these specific queries, a three-state enum as proposed here is a good idea. I made essentially this change internally in cranelift-frontend as part of #4989, introducing a <code>BlockStatus</code> enum.</p>
<p>Still, I think we can safely close this issue.</p>
</blockquote>



<a name="326872552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231101%20Better%20public%20API%20for%20cranelift-fr.../near/326872552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231101.20Better.20public.20API.20for.20cranelift-fr.2E.2E.2E.html#326872552">(Feb 09 2023 at 17:26)</a>:</h4>
<p>jameysharp closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1101">issue #1101</a>:</p>
<blockquote>
<p>In <a href="https://github.com/CraneStation/cranelift/pull/862">https://github.com/CraneStation/cranelift/pull/862</a> we added commentary to specify what "pristine" and "filled" meant. Nicolas pointed out that the commentary makes it clear that it could really just be some <code>EbbState</code> enum, for example:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">enum</span> <span class="nc">EbbState</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">UnChanged</span><span class="p">,</span>
<span class="w">  </span><span class="n">Changed</span><span class="p">,</span>
<span class="w">  </span><span class="n">ChangedAndTerminated</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>This would help us make better sense of the public interface, where <code>is_pristine()</code> and <code>is_filled()</code> functions are part of the <code>FunctionBuilder</code> public API (used by <code>cranelift-wasm</code>), but it isn't clear what those words refer to, so you have to go digging around.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>