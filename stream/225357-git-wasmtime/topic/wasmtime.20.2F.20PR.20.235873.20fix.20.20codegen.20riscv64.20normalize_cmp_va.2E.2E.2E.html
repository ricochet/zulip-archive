<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5873 fix  codegen riscv64 normalize_cmp_va... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html">wasmtime / PR #5873 fix  codegen riscv64 normalize_cmp_va...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="338231214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338231214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338231214">(Feb 27 2023 at 03:09)</a>:</h4>
<p>yuyang-ok edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>:</p>
<blockquote>
<p>This will  try fix <a href="https://github.com/bytecodealliance/wasmtime/issues/5839">https://github.com/bytecodealliance/wasmtime/issues/5839</a><br>
The <code>normalize_cmp_value</code> should accept <code>IntCC</code> as extra parameter.<br>
So we can know  If should <code>signed extend</code> or <code>unsigned extend</code> on int types.<br>
Riscv64 can only compare int64 value.</p>
</blockquote>



<a name="338236702"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338236702" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338236702">(Feb 27 2023 at 04:25)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338236709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338236709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338236709">(Feb 27 2023 at 04:25)</a>:</h4>
<p><strong>yuyang-ok</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> as ready for review.</p>



<a name="338298327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338298327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338298327">(Feb 27 2023 at 11:12)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338307885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338307885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338307885">(Feb 27 2023 at 12:00)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338513892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338513892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338513892">(Feb 28 2023 at 07:16)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338583830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338583830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338583830">(Feb 28 2023 at 13:16)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#pullrequestreview-1317543928">PR review</a>.</p>



<a name="338583831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338583831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338583831">(Feb 28 2023 at 13:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#discussion_r1120046636">PR review comment</a>:</p>
<blockquote>
<p>Very small style fix: let's add one space after the rule priority. Also, can't this have priority 1? I'm not sure why it's 2. I don't see any other rules with priority 1.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>(rule 1 (normalize_cmp_value (fits_in_32 ity) r op)
</code></pre></div><br>
</p>
</blockquote>



<a name="338583832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338583832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338583832">(Feb 28 2023 at 13:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#discussion_r1120042204">PR review comment</a>:</p>
<blockquote>
<p>Since only one rule needs this conversion, I would prefer to do the conversion explicitly and remove the <code>(convert)</code> directive.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>  (let ((a Reg (normalize_cmp_value in_ty a (intcc_to_extend_op cc)))
        (b Reg (normalize_cmp_value in_ty b (intcc_to_extend_op cc))))
</code></pre></div><br>
</p>
</blockquote>



<a name="338583833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338583833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338583833">(Feb 28 2023 at 13:16)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#pullrequestreview-1317543928">PR review</a>.</p>



<a name="338584752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338584752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338584752">(Feb 28 2023 at 13:21)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#pullrequestreview-1317574594">PR review</a>.</p>



<a name="338704005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338704005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338704005">(Feb 28 2023 at 22:25)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338704139"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338704139" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338704139">(Feb 28 2023 at 22:26)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338704461"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338704461" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338704461">(Feb 28 2023 at 22:29)</a>:</h4>
<p>yuyang-ok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a> from <code>issue5839</code> to <code>main</code>.</p>



<a name="338704637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338704637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338704637">(Feb 28 2023 at 22:30)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5873#pullrequestreview-1318761544">PR review</a>.</p>



<a name="338704670"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338704670" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338704670">(Feb 28 2023 at 22:30)</a>:</h4>
<p>jameysharp has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a>.</p>



<a name="338714325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235873%20fix%20%20codegen%20riscv64%20normalize_cmp_va.../near/338714325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235873.20fix.20.20codegen.20riscv64.20normalize_cmp_va.2E.2E.2E.html#338714325">(Feb 28 2023 at 23:37)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5873">PR #5873</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>