<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5071 Add WASI sockets support to the C API · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235071.20Add.20WASI.20sockets.20support.20to.20the.20C.20API.html">wasmtime / issue #5071 Add WASI sockets support to the C API</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="304846522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235071%20Add%20WASI%20sockets%20support%20to%20the%20C%20API/near/304846522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235071.20Add.20WASI.20sockets.20support.20to.20the.20C.20API.html#304846522">(Oct 18 2022 at 21:48)</a>:</h4>
<p>font opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5071">issue #5071</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>The <code>wasmtime</code> CLI supports the <code>--tcplisten</code> and <code>--listenfd</code> options for WASI sockets support, but the C API is missing support for these same WASI socket features. This issue is to track adding support for WASI networking in the C API.</p>
<h4>Benefit</h4>
<p>This aids the ability for C applications that leverage the wasmtime C shared library API for executing WASM modules to support networking features for those modules.</p>
<h4>Implementation</h4>
<p>The existing WASI networking features that are supported in the <code>wasmtime</code> CLI code path need to be plumbed through to the C API. For example, this will involve expanding the <code>wasi_config_t</code> struct to add a field for preopened sockets as well as a new <code>wasi_config_preopen_socket</code> API for populating this new <code>wasi_config_t</code> preopened sockets field.</p>
<h4>Alternatives</h4>
</blockquote>



<a name="314705329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235071%20Add%20WASI%20sockets%20support%20to%20the%20C%20API/near/314705329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235071.20Add.20WASI.20sockets.20support.20to.20the.20C.20API.html#314705329">(Dec 08 2022 at 15:48)</a>:</h4>
<p>stassss2011 <a href="https://github.com/bytecodealliance/wasmtime/issues/5071#issuecomment-1342930500">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5071">issue #5071</a>:</p>
<blockquote>
<p>I am also interested in this feature. With the implementation of sockets in C API, we will be able to add networking support to the wasmtime handler of <a href="https://github.com/containers/crun">containers/crun</a> project. And further, we would be able to run wasm networking containers with usual <code>podman run -p port:port</code> command. In fact, I am stuck on this issue right now in my attempt to run ASP.NET in k8s via wasm runtime.</p>
</blockquote>



<a name="314738204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235071%20Add%20WASI%20sockets%20support%20to%20the%20C%20API/near/314738204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235071.20Add.20WASI.20sockets.20support.20to.20the.20C.20API.html#314738204">(Dec 08 2022 at 18:07)</a>:</h4>
<p>font <a href="https://github.com/bytecodealliance/wasmtime/issues/5071#issuecomment-1343109674">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5071">issue #5071</a>:</p>
<blockquote>
<p>I've been working on this and have it mostly working already. I hope to be able to create a PR soon.</p>
</blockquote>



<a name="326941352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235071%20Add%20WASI%20sockets%20support%20to%20the%20C%20API/near/326941352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235071.20Add.20WASI.20sockets.20support.20to.20the.20C.20API.html#326941352">(Feb 10 2023 at 00:22)</a>:</h4>
<p>peterhuene closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5071">issue #5071</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>The <code>wasmtime</code> CLI supports the <code>--tcplisten</code> and <code>--listenfd</code> options for WASI sockets support, but the C API is missing support for these same WASI socket features. This issue is to track adding support for WASI networking in the C API.</p>
<h4>Benefit</h4>
<p>This aids the ability for C applications that leverage the wasmtime C shared library API for executing WASM modules to support networking features for those modules.</p>
<h4>Implementation</h4>
<p>The existing WASI networking features that are supported in the <code>wasmtime</code> CLI code path need to be plumbed through to the C API. For example, this will involve expanding the <code>wasi_config_t</code> struct to add a field for preopened sockets as well as a new <code>wasi_config_preopen_socket</code> API for populating this new <code>wasi_config_t</code> preopened sockets field.</p>
<h4>Alternatives</h4>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>