<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7278 View Rust variable values in LLDB · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html">wasmtime / issue #7278 View Rust variable values in LLDB</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="397211325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397211325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397211325">(Oct 18 2023 at 01:59)</a>:</h4>
<p>doinkythederp opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>I'd like to be able to see the values of the variables in my Rust code that I've compiled to WASM when debugging with LLDB. Currently when using CodeLLDB to debug Rust compiled in debug mode, the only variable present is <code>__vmctx</code>. </p>
<h4>Benefit</h4>
<p>This would make it a lot simpler to debug incorrect state in programs and generally understand a misbehaving program.<br>
</p>
</blockquote>



<a name="397212463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397212463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397212463">(Oct 18 2023 at 02:10)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1767498938">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>It's possible that #6960 would fix this issue for you (it's not yet in a release yet -- it looks like it just missed the cutoff for 13.0 in September, but it should be included in 14.0 on Oct 20). Could you try with a build from the latest <code>main</code> and see if your issue still occurs?</p>
</blockquote>



<a name="397212482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397212482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397212482">(Oct 18 2023 at 02:10)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1767498938">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>It's possible that #6960 would fix this issue for you (it's not yet in a release -- it looks like it just missed the cutoff for 13.0 in September, but it should be included in 14.0 on Oct 20). Could you try with a build from the latest <code>main</code> and see if your issue still occurs?</p>
</blockquote>



<a name="397213629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397213629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397213629">(Oct 18 2023 at 02:22)</a>:</h4>
<p>doinkythederp <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1767509311">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Here's what it looks like with wasmtime @ <code>8e00cc202f82445a42adbad6e8187e901f91833b</code>:<br>
![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/75394401/318299fa-1fb8-41d1-8932-5957b4551f16">https://github.com/bytecodealliance/wasmtime/assets/75394401/318299fa-1fb8-41d1-8932-5957b4551f16</a>)<br>
![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/75394401/9581f268-d031-4100-a19c-e1530caa2249">https://github.com/bytecodealliance/wasmtime/assets/75394401/9581f268-d031-4100-a19c-e1530caa2249</a>)<br>
I read that it was necessary to run <code>__vmctx-&gt;set()</code> but it seems like that might be invalid syntax when debugging Rust?</p>
</blockquote>



<a name="397213777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397213777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397213777">(Oct 18 2023 at 02:24)</a>:</h4>
<p>doinkythederp edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1767509311">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Here's what it looks like with wasmtime @ <code>8e00cc202f82445a42adbad6e8187e901f91833b</code>:<br>
![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/75394401/318299fa-1fb8-41d1-8932-5957b4551f16">https://github.com/bytecodealliance/wasmtime/assets/75394401/318299fa-1fb8-41d1-8932-5957b4551f16</a>)<br>
![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/75394401/9581f268-d031-4100-a19c-e1530caa2249">https://github.com/bytecodealliance/wasmtime/assets/75394401/9581f268-d031-4100-a19c-e1530caa2249</a>)<br>
I read that it was necessary to run <code>__vmctx-&gt;set()</code> but it seems like that might be invalid syntax when debugging Rust?</p>
<p>I am using <code>.debug_info(true)</code> in my wasmtime config and am compiling my WASM code in debug mode.</p>
</blockquote>



<a name="397220006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397220006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397220006">(Oct 18 2023 at 03:26)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1767566610">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Are the values you're trying to show live at that location (i.e., will be used in the future)?</p>
<p>There is some optimization that goes on regardless of opt level just as a side-effect of going through SSA form, and register allocation; and the Rust + LLVM Wasm toolchain may be optimizing away values as well. It's hard to really say more without access to your module and a good chunk of time to dive into the IR, the DWARF, and the regalloc choices (sorry!).</p>
</blockquote>



<a name="397278445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397278445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397278445">(Oct 18 2023 at 10:19)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1768137960">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Does <code>__vmctx.set()</code> or <code>(*__vmxtx).set()</code> work? At least gcc switches to the rust syntax for the <code>print</code> command when the current frame is marked as written in rust. I don't know if that is the case with clang too.</p>
</blockquote>



<a name="397278465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397278465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397278465">(Oct 18 2023 at 10:19)</a>:</h4>
<p>bjorn3 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1768137960">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Does <code>__vmctx.set()</code> or <code>(*__vmxtx).set()</code> work? At least gcc switches to the rust syntax for the <code>print</code> command when the current frame is marked as written in rust. I don't know if that is the case with lldb too.</p>
</blockquote>



<a name="397607151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397607151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397607151">(Oct 20 2023 at 01:56)</a>:</h4>
<p>doinkythederp <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1771953659">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hi, I have an update: I've been working on getting a minimal demonstration of the situation and I stumbled upon the discovery that variables <em>do</em> show in the debugger menu, but only when not using WASM threads/shared memory. For my use cases, I need WASM threads as I'm emulating the FreeRTOS task-switching mechanism. I've made a Dev Container that shows this behavior: <a href="https://github.com/doinkythederp/wasmtime-repro">https://github.com/doinkythederp/wasmtime-repro</a></p>
</blockquote>



<a name="397607748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397607748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397607748">(Oct 20 2023 at 02:01)</a>:</h4>
<p>doinkythederp edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1771953659">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hi, I have an update: I've been working on getting a minimal demonstration of the situation and I stumbled upon the discovery that variables <em>do</em> show in the debugger menu, but not using WASM threads/shared memory. For my use cases, I need WASM threads as I'm emulating the FreeRTOS task-switching mechanism. I've made a Dev Container that shows this behavior: <a href="https://github.com/doinkythederp/wasmtime-repro">https://github.com/doinkythederp/wasmtime-repro</a></p>
</blockquote>



<a name="397634671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397634671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397634671">(Oct 20 2023 at 05:57)</a>:</h4>
<p>doinkythederp edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1771953659">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hi, I have an update: I've been working on getting a minimal demonstration of the situation and I stumbled upon the discovery that variables <em>do</em> show in the debugger menu, but not when using WASM threads/shared memory. For my use cases, I need WASM threads as I'm emulating the FreeRTOS task-switching mechanism. I've made a Dev Container that shows this behavior: <a href="https://github.com/doinkythederp/wasmtime-repro">https://github.com/doinkythederp/wasmtime-repro</a></p>
</blockquote>



<a name="397634748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/397634748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#397634748">(Oct 20 2023 at 05:58)</a>:</h4>
<p>doinkythederp edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1771953659">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hi, I have an update: I've been working on getting a minimal demonstration of the situation and I stumbled upon the discovery that variables only show in the debugger menu when not using WASM threads/shared memory. For my use cases, I need WASM threads as I'm emulating the FreeRTOS task-switching mechanism. I've made a Dev Container that shows this behavior: <a href="https://github.com/doinkythederp/wasmtime-repro">https://github.com/doinkythederp/wasmtime-repro</a></p>
</blockquote>



<a name="409302908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20Rust%20variable%20values%20in%20LLDB/near/409302908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20Rust.20variable.20values.20in.20LLDB.html#409302908">(Dec 21 2023 at 03:45)</a>:</h4>
<p>doinkythederp <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1865433998">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hi, I'm just checking back in to ask if there are any plans to fix variable debugging when using SharedMemory. This is important to me because it limits the work I can do with WASM threads. Is this planned? Is it an issue with LLDB itself? I don't have much experience in dealing with debug info or debugger internals so I don't think I'd be able to make any required contributions myself.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>