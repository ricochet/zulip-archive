<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7060 Can cranelift support eBPF? · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html">wasmtime / issue #7060 Can cranelift support eBPF?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="391901911"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/391901911" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#391901911">(Sep 19 2023 at 12:30)</a>:</h4>
<p>chengshuyi opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>cranelift-codegen adds a new eBPF backend</p>
<h4>Benefit</h4>
<p>eBPF bytecode can be generated from cranelift intermediate code. Cranelift is more lightweight and has fewer dependencies than llvm.</p>
<h4>Implementation</h4>
<p>I used clif to simply implement some functions[1]. If possible, I can improve this part of the function.</p>
<p>[1] <a href="https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/be/isel.rs">https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/be/isel.rs</a> </p>
</blockquote>



<a name="391902043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/391902043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#391902043">(Sep 19 2023 at 12:31)</a>:</h4>
<p>chengshuyi edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>cranelift-codegen adds a new eBPF backend</p>
<h4>Benefit</h4>
<p>eBPF bytecode can be generated from cranelift intermediate code. Cranelift is more lightweight and has fewer dependencies than llvm.</p>
<h4>Implementation</h4>
<p>I used clif to simply implement some functions[1]. If possible, I can improve this part of the function.</p>
<p>[1] <a href="https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs">https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs</a></p>
</blockquote>



<a name="391902401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/391902401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#391902401">(Sep 19 2023 at 12:33)</a>:</h4>
<p>chengshuyi edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>cranelift-codegen adds a new eBPF backend</p>
<h4>Benefit</h4>
<p>eBPF bytecode can be generated from cranelift intermediate code. Cranelift is more lightweight and has fewer dependencies than llvm. To be precise, the binary program I used to implement eBPF bytecode generation using cranelift is only about 10MB and has almost no dependencies.</p>
<h4>Implementation</h4>
<p>I used clif to simply implement some functions[1]. If possible, I can improve this part of the function.</p>
<p>[1] <a href="https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs">https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs</a></p>
</blockquote>



<a name="391904836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/391904836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#391904836">(Sep 19 2023 at 12:47)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/7060#issuecomment-1725447602">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>I opened an issue for this a couple of years ago: <a href="https://github.com/bytecodealliance/wasmtime/issues/1129">https://github.com/bytecodealliance/wasmtime/issues/1129</a> I didn't have any concrete use cases for it back then though, so it has been labeled as moonshot.</p>
</blockquote>



<a name="391907353"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/391907353" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#391907353">(Sep 19 2023 at 13:01)</a>:</h4>
<p>chengshuyi <a href="https://github.com/bytecodealliance/wasmtime/issues/7060#issuecomment-1725469325">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<blockquote>
<p>I opened an issue for this a couple of years ago: #1129 I didn't have any concrete use cases for it back then though, so it has been labeled as moonshot.</p>
</blockquote>
<p>Thanks for you quick reply. We are developing the ebpf scripting language to be able to write eBPF programs in a simple C-like language. We prefer to be able to deploy lightweight cranelift on the environment instead of llvm. I don’t know if this can be considered a case.</p>
</blockquote>



<a name="405600298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/405600298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#405600298">(Dec 03 2023 at 04:04)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>cranelift-codegen adds a new eBPF backend</p>
<h4>Benefit</h4>
<p>eBPF bytecode can be generated from cranelift intermediate code. Cranelift is more lightweight and has fewer dependencies than llvm. To be precise, the binary program I used to implement eBPF bytecode generation using cranelift is only about 10MB and has almost no dependencies.</p>
<h4>Implementation</h4>
<p>I used clif to simply implement some functions[1]. If possible, I can improve this part of the function.</p>
<p>[1] <a href="https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs">https://github.com/aliyun/coolbpf/blob/master/lwcb/bpfir/src/module.rs</a></p>
</blockquote>



<a name="405600299"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237060%20Can%20cranelift%20support%20eBPF%3F/near/405600299" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237060.20Can.20cranelift.20support.20eBPF.3F.html#405600299">(Dec 03 2023 at 04:04)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7060#issuecomment-1837348705">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7060">issue #7060</a>:</p>
<blockquote>
<p>Closing as a duplicate of <a href="https://github.com/bytecodealliance/wasmtime/issues/1129">https://github.com/bytecodealliance/wasmtime/issues/1129</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>