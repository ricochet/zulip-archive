<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4708 Refactor and optimize the flat type c... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html">wasmtime / PR #4708 Refactor and optimize the flat type c...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="293586564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293586564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293586564">(Aug 15 2022 at 17:14)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">PR #4708</a> from <code>less-recursion</code> to <code>main</code>:</p>
<blockquote>
<p>It appears that given any amount of recursion in Wasmtime based on the type structure of a component the fuzzers will find a stack overflow. To that end this commit fixes an issue that the fuzzers have found where calculating the flat type representation was overflowing the stack due to the recursive nature of the implementation.</p>
<p>The fix here additionally improves upon the previous implementation by caching flat type information per-type instead of recomputing it each time it's queried. This means there's no special need to handle recursion one way or another here and it also greatly improves performance, especially for the <code>fact-valid-module</code> fuzzer. <br>
</p>
</blockquote>



<a name="293586565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293586565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293586565">(Aug 15 2022 at 17:14)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">PR #4708</a>.</p>



<a name="293588807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293588807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293588807">(Aug 15 2022 at 17:29)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">PR #4708</a> from <code>less-recursion</code> to <code>main</code>.</p>



<a name="293601681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293601681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293601681">(Aug 15 2022 at 18:52)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">PR #4708</a> from <code>less-recursion</code> to <code>main</code>.</p>



<a name="293769849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293769849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293769849">(Aug 16 2022 at 17:51)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4708#pullrequestreview-1074543873">PR review</a>.</p>



<a name="293776427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234708%20Refactor%20and%20optimize%20the%20flat%20type%20c.../near/293776427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234708.20Refactor.20and.20optimize.20the.20flat.20type.20c.2E.2E.2E.html#293776427">(Aug 16 2022 at 18:31)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4708">PR #4708</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>