<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2786 Atomic hotswapping in JIT mode · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html">wasmtime / Issue #2786 Atomic hotswapping in JIT mode</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="233546704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232786%20Atomic%20hotswapping%20in%20JIT%20mode/near/233546704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html#233546704">(Apr 07 2021 at 19:22)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/2786#issuecomment-815165530">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2786">Issue #2786</a>:</p>
<blockquote>
<p>Writing the GOT entries needs to be delayed until after relocations have been performed and the memory has been marked as executable for code or read only for read only data.</p>
</blockquote>



<a name="236566451"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232786%20Atomic%20hotswapping%20in%20JIT%20mode/near/236566451" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html#236566451">(Apr 28 2021 at 19:42)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/2786#issuecomment-828728345">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2786">Issue #2786</a>:</p>
<blockquote>
<blockquote>
<p>Writing the GOT entries needs to be delayed until after relocations have been performed and the memory has been marked as executable for code or read only for read only data.</p>
</blockquote>
<p>@eggyal has implemented this. Thanks!</p>
</blockquote>



<a name="236623071"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232786%20Atomic%20hotswapping%20in%20JIT%20mode/near/236623071" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html#236623071">(Apr 29 2021 at 05:55)</a>:</h4>
<p>eggyal <a href="https://github.com/bytecodealliance/wasmtime/pull/2786#issuecomment-828959160">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2786">Issue #2786</a>:</p>
<blockquote>
<p>I think I may have made a mess here... 3e11bd8 is undoing much of 2d9190d.  While the result is that GOT updates are correctly deferred, which is what we needed for <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1166">bjorn3/rustc_codegen_cranelift#1166</a>, it likely isn't doing what's needed for hot swapping.  Let me take another look.</p>
</blockquote>



<a name="238128261"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232786%20Atomic%20hotswapping%20in%20JIT%20mode/near/238128261" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html#238128261">(May 10 2021 at 12:01)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/2786#issuecomment-836610591">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2786">Issue #2786</a>:</p>
<blockquote>
<p>I cleaned up the PR. Ready for review.</p>
</blockquote>



<a name="238145601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232786%20Atomic%20hotswapping%20in%20JIT%20mode/near/238145601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232786.20Atomic.20hotswapping.20in.20JIT.20mode.html#238145601">(May 10 2021 at 13:54)</a>:</h4>
<p>eggyal deleted a <a href="https://github.com/bytecodealliance/wasmtime/pull/2786#issuecomment-828959160">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2786">Issue #2786</a>:</p>
<blockquote>
<p>I think I may have made a mess here... 3e11bd8 is undoing much of 2d9190d.  While the result is that GOT updates are correctly deferred, which is what we needed for <a href="https://github.com/bjorn3/rustc_codegen_cranelift/issues/1166">bjorn3/rustc_codegen_cranelift#1166</a>, it likely isn't doing what's needed for hot swapping.  Let me take another look.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>