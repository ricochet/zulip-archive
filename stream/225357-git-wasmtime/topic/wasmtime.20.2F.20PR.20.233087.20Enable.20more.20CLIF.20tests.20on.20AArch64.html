<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3087 Enable more CLIF tests on AArch64 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html">wasmtime / PR #3087 Enable more CLIF tests on AArch64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="245993569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/245993569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#245993569">(Jul 14 2021 at 17:37)</a>:</h4>
<p>akirilov-arm opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3087">PR #3087</a> from <code>aarch64_tests</code> to <code>main</code>:</p>
<blockquote>
<p>The tests for the SIMD floating-point maximum and minimum operations require particular care because the handling of the NaN values is non-deterministic and may vary between platforms. There is no way to match several NaN values in a test, so the solution is to extract the non-deterministic test cases into a separate file that is subsequently replicated for every backend under test, with adjustments made to the expected results.</p>
</blockquote>



<a name="245994913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/245994913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#245994913">(Jul 14 2021 at 17:47)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706556455">PR review</a>.</p>



<a name="245994914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/245994914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#245994914">(Jul 14 2021 at 17:47)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r669827405">PR review comment</a>:</p>
<blockquote>
<p>Is this the minimum necessary or would <code>nehalem</code> work too? Last time I checked the macOS builders on GHA were still at <code>nehalem</code>.</p>
</blockquote>



<a name="245996115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/245996115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#245996115">(Jul 14 2021 at 17:56)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r669833182">PR review comment</a>:</p>
<blockquote>
<p>Honestly, I don't know; I just copied the value from <code>simd-arithmetic.clif</code>.</p>
</blockquote>



<a name="245996116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/245996116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#245996116">(Jul 14 2021 at 17:56)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706563939">PR review</a>.</p>



<a name="246009614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246009614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246009614">(Jul 14 2021 at 19:41)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r669901488">PR review comment</a>:</p>
<blockquote>
<p>This pair of tests should probably go in <a href="https://github.com/bytecodealliance/wasmtime/tree/main/cranelift/filetests/filetests/isa">https://github.com/bytecodealliance/wasmtime/tree/main/cranelift/filetests/filetests/isa</a>?</p>
</blockquote>



<a name="246009615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246009615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246009615">(Jul 14 2021 at 19:41)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706651794">PR review</a>.</p>



<a name="246009648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246009648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246009648">(Jul 14 2021 at 19:42)</a>:</h4>
<p>abrown edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r669901488">PR review comment</a>.</p>



<a name="246020687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246020687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246020687">(Jul 14 2021 at 21:04)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706718873">PR review</a>.</p>



<a name="246020690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246020690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246020690">(Jul 14 2021 at 21:04)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r669952894">PR review comment</a>:</p>
<blockquote>
<p>More than one target may have the same result for this test. It would be nice to not duplicate it in that case.</p>
</blockquote>



<a name="246037019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246037019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246037019">(Jul 15 2021 at 00:00)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706811864">PR review</a>.</p>



<a name="246037022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246037022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246037022">(Jul 15 2021 at 00:00)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r670030819">PR review comment</a>:</p>
<blockquote>
<p>But that isn't the case here, right?</p>
</blockquote>



<a name="246055619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246055619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246055619">(Jul 15 2021 at 06:12)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-706961863">PR review</a>.</p>



<a name="246055620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246055620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246055620">(Jul 15 2021 at 06:12)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r670163144">PR review comment</a>:</p>
<blockquote>
<p>Not yet, but it may in the future as new targets get added. Eg s390x may gove the same result as either x86_64 or aarch64.</p>
</blockquote>



<a name="246122618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246122618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246122618">(Jul 15 2021 at 16:48)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-707608235">PR review</a>.</p>



<a name="246122619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/246122619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#246122619">(Jul 15 2021 at 16:48)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r670644381">PR review comment</a>:</p>
<blockquote>
<p>What @bjorn3 has said is one reason I have kept the files in their present location; there is also an incomplete backend targeting the 32-bit Arm architecture, in which case the behaviour may very well match the AArch64 one (but not necessarily - there are differences between the floating-point handling in AArch32 and AArch64). The other reason is to preserve the current organization of having all runtests in one place, and some of the latter are already meant for a specific backend - the ones with <code>legacy</code> in their name (e.g. <code>cranelift/filetests/filetests/runtests/i128-arithmetic-legacy.clif</code>), though admittedly they should be removed eventually.</p>
</blockquote>



<a name="247264939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/247264939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#247264939">(Jul 26 2021 at 21:19)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-715290750">PR review</a>.</p>



<a name="247264940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/247264940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#247264940">(Jul 26 2021 at 21:19)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#pullrequestreview-715290750">PR review</a>.</p>



<a name="247264941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/247264941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#247264941">(Jul 26 2021 at 21:19)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r676951568">PR review comment</a>:</p>
<blockquote>
<p>It's probably not too important, as tests such as this are OS-independent and will get coverage on the (more up-to-date-CPU) Linux runners.</p>
</blockquote>



<a name="247264942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/247264942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#247264942">(Jul 26 2021 at 21:19)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3087#discussion_r676950636">PR review comment</a>:</p>
<blockquote>
<p>Agreed that these tests could be shared. That said, would it be possible to name the file in a way that denotes the behavior a little more specifically? <code>-nondeterminstic</code> is good (it indicates that the specified behavior isn't the only valid behavior) but maybe something like <code>-nondeterministic-armlike</code> or somesuch (and we can rename if we later add e.g. <code>s390x</code>)?</p>
</blockquote>



<a name="249710478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/249710478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#249710478">(Aug 17 2021 at 12:26)</a>:</h4>
<p>akirilov-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3087">PR #3087</a> from <code>aarch64_tests</code> to <code>main</code>.</p>



<a name="249710707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/249710707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#249710707">(Aug 17 2021 at 12:28)</a>:</h4>
<p>akirilov-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3087">PR #3087</a> from <code>aarch64_tests</code> to <code>main</code>.</p>



<a name="249742754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233087%20Enable%20more%20CLIF%20tests%20on%20AArch64/near/249742754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233087.20Enable.20more.20CLIF.20tests.20on.20AArch64.html#249742754">(Aug 17 2021 at 16:21)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3087">PR #3087</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>