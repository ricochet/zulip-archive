<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5413 cranelift-codegen: [x64] Prepare cran... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html">wasmtime / PR #5413 cranelift-codegen: [x64] Prepare cran...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="314994564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314994564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314994564">(Dec 09 2022 at 22:33)</a>:</h4>
<p>saulecabrera opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>:</p>
<blockquote>
<p>This commit prepares the x64 pieces from <code>cranelift-codegen</code> to be consumed by Winch for binary emission. This change doesn't introduce or modifies functionality it makes the necessary pieces for binary emission public.</p>
<p>This change also improves documentation where applicable. I decided to introduce <code>#[allow(missing_docs)]</code> for the <code>Avx512Opcode</code>, <code>SseOpcode</code> and <code>AvxOpcode</code>, since no documentation was present there before, and since most of it is documented in ISLE, but happy to add documentation there too. </p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="314994574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314994574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314994574">(Dec 09 2022 at 22:33)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a>.</p>



<a name="314994797"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314994797" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314994797">(Dec 09 2022 at 22:35)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>:</p>
<blockquote>
<p>This commit prepares the x64 pieces from <code>cranelift-codegen</code> to be consumed by Winch for binary emission. This change doesn't introduce or modifies functionality it makes the necessary pieces for binary emission public.</p>
<p>This change also improves documentation where applicable. I decided to introduce <code>#[allow(missing_docs)]</code> for the <code>Avx512Opcode</code>, <code>SseOpcode</code> and <code>AvxOpcode</code>, since no documentation was present there before, but happy to add documentation there too. </p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="314995025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314995025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314995025">(Dec 09 2022 at 22:37)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>.</p>



<a name="314995777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314995777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314995777">(Dec 09 2022 at 22:42)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>:</p>
<blockquote>
<p>This commit prepares the x64 pieces from <code>cranelift-codegen</code> to be consumed by Winch for binary emission. This change doesn't introduce or modifies functionality it makes the necessary pieces for binary emission public.</p>
<p>This change also improves documentation where applicable. I decided to introduce <code>#[allow(missing_docs)]</code> for the <code>Avx512Opcode</code>, <code>SseOpcode</code> and <code>AvxOpcode</code>, since no documentation was present there before, but happy to add documentation there too. </p>
<p><a href="https://github.com/bytecodealliance/wasmtime/compare/main...saulecabrera:wasmtime:winch-dep-cranelift-codegen">I have a binary emission proof-of-concept branch</a> that I'm using a base to extract individual PRs.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="314996898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314996898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314996898">(Dec 09 2022 at 22:50)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>:</p>
<blockquote>
<p>This commit prepares the x64 pieces from <code>cranelift-codegen</code> to be consumed by Winch for binary emission. This change doesn't introduce or modifies functionality it makes the necessary pieces for binary emission public.</p>
<p>This change also improves documentation where applicable. I decided to introduce <code>#[allow(missing_docs)]</code> for the <code>Avx512Opcode</code>, <code>SseOpcode</code> and <code>AvxOpcode</code>, since no documentation was present there before, but happy to add documentation there too if we want to document those opcodes.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/compare/main...saulecabrera:wasmtime:winch-dep-cranelift-codegen">I have a binary emission proof-of-concept branch</a> that I'm using a base to extract individual PRs.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="314998695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/314998695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#314998695">(Dec 09 2022 at 23:03)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>:</p>
<blockquote>
<p>This commit prepares the x64 pieces from <code>cranelift-codegen</code> to be consumed by Winch for binary emission. This change doesn't introduce or modifies functionality it makes the necessary pieces for binary emission public.</p>
<p>This change also improves documentation where applicable. I decided to introduce <code>#[allow(missing_docs)]</code> for the <code>Avx512Opcode</code>, <code>SseOpcode</code> and <code>AvxOpcode</code>, but happy to add documentation there too if we want to document those opcodes.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/compare/main...saulecabrera:wasmtime:winch-dep-cranelift-codegen">I have a binary emission proof-of-concept branch</a> that I'm using a base to extract individual PRs.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="315000998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315000998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315000998">(Dec 09 2022 at 23:24)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>.</p>



<a name="315006279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315006279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315006279">(Dec 10 2022 at 00:17)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1212369165">PR review</a>.</p>



<a name="315006281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315006281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315006281">(Dec 10 2022 at 00:17)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1212369165">PR review</a>.</p>



<a name="315006282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315006282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315006282">(Dec 10 2022 at 00:17)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#discussion_r1044924556">PR review comment</a>:</p>
<blockquote>
<p>s/substraction/subtraction/ (and below)</p>
</blockquote>



<a name="315082130"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315082130" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315082130">(Dec 10 2022 at 13:56)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1212571014">PR review</a>.</p>



<a name="315082131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315082131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315082131">(Dec 10 2022 at 13:56)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#discussion_r1045088723">PR review comment</a>:</p>
<blockquote>
<p>I don't think all of these should be exported at the top level. Most people won't use them, so it may be confusing. Would it make sense to make <code>machinst</code> public and instead use <code>pub(crate)</code> where things are not meant to be exported?</p>
</blockquote>



<a name="315357143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315357143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315357143">(Dec 12 2022 at 12:41)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a> from <code>expose-cranelift-codegen-for-winch</code> to <code>main</code>.</p>



<a name="315357190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315357190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315357190">(Dec 12 2022 at 12:41)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1213456868">PR review</a>.</p>



<a name="315357191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315357191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315357191">(Dec 12 2022 at 12:41)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#discussion_r1045782584">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="315358999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315358999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315358999">(Dec 12 2022 at 12:51)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1213474932">PR review</a>.</p>



<a name="315359000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315359000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315359000">(Dec 12 2022 at 12:51)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#discussion_r1045792174">PR review comment</a>:</p>
<blockquote>
<p>I had considered this. But didn't do it mainly for two reasons: (i) there's already a precedent: we expose <code>CompiledCode</code> and <code>TextSectionBuilder</code> at the top level; so even though there are no other uses cases aside from Winch that will use the other primitives, personally I feel it makes sense to expose the core binary emission concepts at the top level. (ii) If we want to expose them under <code>machinst</code>, to be consistent we should probably not expose <code>CompiledCode</code> and <code>TextSectionBuilder</code> at the top level and move them under <code>machinst</code> instead. But this will be a breaking change for anyone relying on those exports.</p>
<p>Since Winch is the only use-case relying on this, I'm happy to change it if/once we have a concrete example of an issue caused by this approach. </p>
</blockquote>



<a name="315414450"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315414450" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315414450">(Dec 12 2022 at 17:00)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#pullrequestreview-1213960891">PR review</a>.</p>



<a name="315414452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315414452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315414452">(Dec 12 2022 at 17:00)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5413#discussion_r1046104709">PR review comment</a>:</p>
<blockquote>
<p>FWIW, I think the current approach is fine, too: I agree with @saulecabrera that we'd need more refactoring to be consistent with a separation of exports into modules.</p>
</blockquote>



<a name="315414520"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235413%20cranelift-codegen%3A%20%5Bx64%5D%20Prepare%20cran.../near/315414520" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235413.20cranelift-codegen.3A.20.5Bx64.5D.20Prepare.20cran.2E.2E.2E.html#315414520">(Dec 12 2022 at 17:01)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5413">PR #5413</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>