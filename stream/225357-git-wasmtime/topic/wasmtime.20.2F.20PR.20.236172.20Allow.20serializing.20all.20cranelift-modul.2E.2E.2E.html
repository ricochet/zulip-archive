<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6172 Allow serializing all cranelift-modul... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html">wasmtime / PR #6172 Allow serializing all cranelift-modul...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="347629161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347629161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347629161">(Apr 07 2023 at 10:40)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a> from <code>bjorn3:bsc-unwinding-module-serialize2</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This allows a Module implementation to serialize it's internal state and deserialize it in another compilation session. For example to implement LTO or to load the module into cranelift-interpreter.</p>
<p>This is the last PR in the series for now. The actual implementation of a module that can be serialized is in cg_clif. I may extract it in the future, but for now these are almost all the changes that need to be made on the cranelift side. The previous PR's in this series are <a href="https://github.com/bytecodealliance/wasmtime/pull/6169">https://github.com/bytecodealliance/wasmtime/pull/6169</a> and <a href="https://github.com/bytecodealliance/wasmtime/pull/6170">https://github.com/bytecodealliance/wasmtime/pull/6170</a>.</p>
</blockquote>



<a name="347629170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347629170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347629170">(Apr 07 2023 at 10:40)</a>:</h4>
<p><strong>bjorn3</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="347629172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347629172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347629172">(Apr 07 2023 at 10:40)</a>:</h4>
<p><strong>bjorn3</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="347629173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347629173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347629173">(Apr 07 2023 at 10:40)</a>:</h4>
<p><strong>bjorn3</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="347629675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347629675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347629675">(Apr 07 2023 at 10:42)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="347636336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347636336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347636336">(Apr 07 2023 at 11:14)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1376103061">PR review</a>.</p>



<a name="347636338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/347636338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#347636338">(Apr 07 2023 at 11:14)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#discussion_r1160633895">PR review comment</a>:</p>
<blockquote>
<p>The Deserialize impl is based on serde-derive's macro expansion, but it has been cleaned up a lot and modified to run <code>get_names</code> instead of expecting a <code>names</code> field. This should be license technically, right?</p>
</blockquote>



<a name="348288538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348288538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348288538">(Apr 10 2023 at 19:23)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/bnjbvr">bnjbvr</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="348526553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348526553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348526553">(Apr 11 2023 at 17:41)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="348548223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348548223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348548223">(Apr 11 2023 at 19:36)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1379944579">PR review</a>.</p>



<a name="348548225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348548225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348548225">(Apr 11 2023 at 19:36)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1379944579">PR review</a>.</p>



<a name="348548227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348548227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348548227">(Apr 11 2023 at 19:36)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#discussion_r1163243593">PR review comment</a>:</p>
<blockquote>
<p>Any chance you can use one of the facilities provided by serde, e.g. <code>#[serde(serialize_with = ...)]</code> on the <code>names</code> field, instead?</p>
</blockquote>



<a name="348548229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348548229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348548229">(Apr 11 2023 at 19:36)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#discussion_r1163242433">PR review comment</a>:</p>
<blockquote>
<p>nit: can you use <code>expect</code> for something a bit shorter here?</p>
</blockquote>



<a name="348570443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348570443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348570443">(Apr 11 2023 at 22:13)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1380159390">PR review</a>.</p>



<a name="348570444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348570444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348570444">(Apr 11 2023 at 22:13)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#discussion_r1163384511">PR review comment</a>:</p>
<blockquote>
<p>When applied to the names field that doesn't give access to the functions and data_objects fields to reconstruct the names field from from what I can tell.</p>
</blockquote>



<a name="348742814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348742814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348742814">(Apr 12 2023 at 14:11)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="348742839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348742839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348742839">(Apr 12 2023 at 14:11)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1381418948">PR review</a>.</p>



<a name="348742842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348742842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348742842">(Apr 12 2023 at 14:11)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#discussion_r1164198457">PR review comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="348748827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/348748827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#348748827">(Apr 12 2023 at 14:29)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="351581536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/351581536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#351581536">(Apr 21 2023 at 10:43)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<a name="351611500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/351611500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#351611500">(Apr 21 2023 at 12:38)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6172#pullrequestreview-1395694370">PR review</a>:</p>
<blockquote>
<p>Lgtm!</p>
</blockquote>



<a name="351623564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236172%20Allow%20serializing%20all%20cranelift-modul.../near/351623564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236172.20Allow.20serializing.20all.20cranelift-modul.2E.2E.2E.html#351623564">(Apr 21 2023 at 13:19)</a>:</h4>
<p>bnjbvr merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6172">PR #6172</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>