<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4858 ABI: implement register arguments ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234858.20ABI.3A.20implement.20register.20arguments.20.2E.2E.2E.html">wasmtime / issue #4858 ABI: implement register arguments ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="296899333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234858%20ABI%3A%20implement%20register%20arguments%20.../near/296899333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234858.20ABI.3A.20implement.20register.20arguments.20.2E.2E.2E.html#296899333">(Sep 02 2022 at 21:39)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4858#issuecomment-1235916315">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4858">issue #4858</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:area:machinst", "cranelift:area:x64", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="297714999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234858%20ABI%3A%20implement%20register%20arguments%20.../near/297714999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234858.20ABI.3A.20implement.20register.20arguments.20.2E.2E.2E.html#297714999">(Sep 08 2022 at 06:30)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4858#issuecomment-1240282009">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4858">issue #4858</a>:</p>
<blockquote>
<p>Updated, thanks!</p>
</blockquote>



<a name="297885617"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234858%20ABI%3A%20implement%20register%20arguments%20.../near/297885617" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234858.20ABI.3A.20implement.20register.20arguments.20.2E.2E.2E.html#297885617">(Sep 08 2022 at 23:05)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4858#issuecomment-1241321337">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4858">issue #4858</a>:</p>
<blockquote>
<p>Thanks! Updated.</p>
</blockquote>



<a name="297894046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234858%20ABI%3A%20implement%20register%20arguments%20.../near/297894046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234858.20ABI.3A.20implement.20register.20arguments.20.2E.2E.2E.html#297894046">(Sep 09 2022 at 01:03)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4858#issuecomment-1241384733">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4858">issue #4858</a>:</p>
<blockquote>
<blockquote>
<p>I find it particularly exciting that sometimes x64 can now completely avoid allocating any stack space for spilling registers that are supposed to be saved across calls! Have you done any performance comparisons on this?</p>
</blockquote>
<p>Yeah, the one example in <code>call-conv.clif</code> is actually really nice: letting RA2 use its unified move resolution lets it handle a "shift every arg over by one" case without any temps, whereas the old explicit-move approach required a bunch of registers and ended up encroaching into callee-saves (r13, r14, 15).</p>
<p>Measurements on SpiderMonkey.wasm and bz2 show only small effects in the noise, so this doesn't seem to matter for those particular cases, but I'm sure I could find benchmarks where it does affect an inner loop somewhere. In any case it's a nice semantic cleanup, generates slightly smaller code, and takes us one step closer to removing the pinned vregs!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>