<html>
<head><meta charset="utf-8"><title>wasmtime / issue #1084 cranelift uses hard coded gcc path... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231084.20cranelift.20uses.20hard.20coded.20gcc.20path.2E.2E.2E.html">wasmtime / issue #1084 cranelift uses hard coded gcc path...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="281214308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231084%20cranelift%20uses%20hard%20coded%20gcc%20path.../near/281214308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231084.20cranelift.20uses.20hard.20coded.20gcc.20path.2E.2E.2E.html#281214308">(May 04 2022 at 20:21)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/1084#issuecomment-1117858900">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1084">issue #1084</a>:</p>
<blockquote>
<p>I'm doing some issue gardening and I believe we can close this issue: we successfully cross-compile in CI for aarch64 and s390x from the x86-64 CI host. If someone is having specific cross-compilation difficulties with some recent configuration, please feel free to open a new issue though!</p>
</blockquote>



<a name="281214315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231084%20cranelift%20uses%20hard%20coded%20gcc%20path.../near/281214315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231084.20cranelift.20uses.20hard.20coded.20gcc.20path.2E.2E.2E.html#281214315">(May 04 2022 at 20:21)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1084">issue #1084</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wabt</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.4</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">atty</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.11</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">custom</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">backtrace</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.28</span><span class="err">`</span><span class="w"></span>
<span class="n">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span>: <span class="err">`</span><span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cranelift</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">build</span><span class="o">/</span><span class="n">backtrace</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">b770679a71cebfb4</span><span class="o">/</span><span class="n">build</span><span class="o">-</span><span class="n">script</span><span class="o">-</span><span class="n">build</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">exit</span><span class="w"> </span><span class="n">code</span>: <span class="mi">101</span><span class="p">)</span><span class="w"></span>
<span class="o">---</span><span class="w"> </span><span class="n">stdout</span><span class="w"></span>
<span class="n">cargo</span>:<span class="nc">rustc</span><span class="o">-</span><span class="n">cfg</span><span class="o">=</span><span class="n">rbt</span><span class="w"></span>
<span class="n">TARGET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">"armv7-unknown-linux-gnueabihf"</span><span class="p">)</span><span class="w"></span>
<span class="n">OPT_LEVEL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">"0"</span><span class="p">)</span><span class="w"></span>
<span class="n">HOST</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="s">"x86_64-unknown-linux-gnu"</span><span class="p">)</span><span class="w"></span>
<span class="n">CC_armv7</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnueabihf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CC_armv7_unknown_linux_gnueabihf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">TARGET_CC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CC</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CROSS_COMPILE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CFLAGS_armv7</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnueabihf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CFLAGS_armv7_unknown_linux_gnueabihf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">TARGET_CFLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CFLAGS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CRATE_CC_NO_DEFAULTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">CARGO_CFG_TARGET_FEATURE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">None</span><span class="w"></span>
<span class="n">running</span>: <span class="s">"arm-linux-gnueabihf-gcc"</span><span class="w"> </span><span class="s">"-O0"</span><span class="w"> </span><span class="s">"-ffunction-sections"</span><span class="w"> </span><span class="s">"-fdata-sections"</span><span class="w"> </span><span class="s">"-fPIC"</span><span class="w"> </span><span class="s">"-march=armv7-a"</span><span class="w"> </span><span class="s">"-I"</span><span class="w"> </span><span class="s">"src/libbacktrace"</span><span class="w"> </span><span class="s">"-I"</span><span class="w"> </span><span class="s">"/tmp/cranelift/target/armv7-unknown-linux-gnueabihf/debug/build/backtrace-sys-a78f5a2c6137992e/out"</span><span class="w"> </span><span class="s">"-fvisibility=hidden"</span><span class="w"> </span><span class="s">"-DBACKTRACE_ELF_SIZE=32"</span><span class="w"> </span><span class="s">"-DBACKTRACE_SUPPORTED=1"</span><span class="w"> </span><span class="s">"-DBACKTRACE_USES_MALLOC=1"</span><span class="w"> </span><span class="s">"-DBACKTRACE_SUPPORTS_THREADS=0"</span><span class="w"> </span><span class="s">"-DBACKTRACE_SUPPORTS_DATA=0"</span><span class="w"> </span><span class="s">"-DHAVE_DL_ITERATE_PHDR=1"</span><span class="w"> </span><span class="s">"-D_GNU_SOURCE=1"</span><span class="w"> </span><span class="s">"-D_LARGE_FILES=1"</span><span class="w"> </span><span class="s">"-Dbacktrace_full=__rbt_backtrace_full"</span><span class="w"> </span><span class="s">"-Dbacktrace_dwarf_add=__rbt_backtrace_dwarf_add"</span><span class="w"> </span><span class="s">"-Dbacktrace_initialize=__rbt_backtrace_initialize"</span><span class="w"> </span><span class="s">"-Dbacktrace_pcinfo=__rbt_backtrace_pcinfo"</span><span class="w"> </span><span class="s">"-Dbacktrace_syminfo=__rbt_backtrace_syminfo"</span><span class="w"> </span><span class="s">"-Dbacktrace_get_view=__rbt_backtrace_get_view"</span><span class="w"> </span><span class="s">"-Dbacktrace_release_view=__rbt_backtrace_release_view"</span><span class="w"> </span><span class="s">"-Dbacktrace_alloc=__rbt_backtrace_alloc"</span><span class="w"> </span><span class="s">"-Dbacktrace_free=__rbt_backtrace_free"</span><span class="w"> </span><span class="s">"-Dbacktrace_vector_finish=__rbt_backtrace_vector_finish"</span><span class="w"> </span><span class="s">"-Dbacktrace_vector_grow=__rbt_backtrace_vector_grow"</span><span class="w"> </span><span class="s">"-Dbacktrace_vector_release=__rbt_backtrace_vector_release"</span><span class="w"> </span><span class="s">"-Dbacktrace_close=__rbt_backtrace_close"</span><span class="w"> </span><span class="s">"-Dbacktrace_open=__rbt_backtrace_open"</span><span class="w"> </span><span class="s">"-Dbacktrace_print=__rbt_backtrace_print"</span><span class="w"> </span><span class="s">"-Dbacktrace_simple=__rbt_backtrace_simple"</span><span class="w"> </span><span class="s">"-Dbacktrace_qsort=__rbt_backtrace_qsort"</span><span class="w"> </span><span class="s">"-Dbacktrace_create_state=__rbt_backtrace_create_state"</span><span class="w"> </span><span class="s">"-Dbacktrace_uncompress_zdebug=__rbt_backtrace_uncompress_zdebug"</span><span class="w"> </span><span class="s">"-o"</span><span class="w"> </span><span class="s">"/tmp/cranelift/target/armv7-unknown-linux-gnueabihf/debug/build/backtrace-sys-a78f5a2c6137992e/out/src/libbacktrace/alloc.o"</span><span class="w"> </span><span class="s">"-c"</span><span class="w"> </span><span class="s">"src/libbacktrace/alloc.c"</span><span class="w"></span>

<span class="o">---</span><span class="w"> </span><span class="n">stderr</span><span class="w"></span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="w"></span>

<span class="n">Internal</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">occurred</span>: <span class="nc">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="n">tool</span><span class="p">.</span><span class="w"> </span><span class="n">Is</span><span class="w"> </span><span class="err">`</span><span class="n">arm</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnueabihf</span><span class="o">-</span><span class="n">gcc</span><span class="err">`</span><span class="w"> </span><span class="n">installed</span><span class="o">?</span><span class="w"></span>

<span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">tim</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="o">/</span><span class="n">cc</span><span class="o">-</span><span class="mf">1.0.35</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">2398</span>:<span class="mi">5</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">Run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>my cross compiler is at /usr/bin/armv7a-unknown-linux-gnueabihf-gcc </p>
<p>this is fixable by symlinking the actuall gcc-cross compiler to /usr/bin/arm-linux-gnueabihf-gcc, and in addition to do the same with g++</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>