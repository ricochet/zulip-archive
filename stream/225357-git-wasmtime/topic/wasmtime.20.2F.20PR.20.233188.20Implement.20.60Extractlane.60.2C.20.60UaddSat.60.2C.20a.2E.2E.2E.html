<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3188 Implement `Extractlane`, `UaddSat`, a... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html">wasmtime / PR #3188 Implement `Extractlane`, `UaddSat`, a...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="249603213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249603213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249603213">(Aug 16 2021 at 15:23)</a>:</h4>
<p>dheaton-arm opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>:</p>
<blockquote>
<p>Implemented the <code>Extractlane</code>, <code>UaddSat</code>, and <code>UsubSat</code> opcodes for the interpreter,<br>
and added helper functions for working with SIMD vectors (<code>extractlanes</code>, <code>vectorizelanes</code>,<br>
and <code>binary_arith</code>).</p>
<p>Copyright (c) 2021, Arm Limited</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="249616300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249616300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249616300">(Aug 16 2021 at 17:05)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-730932496">PR review</a>.</p>



<a name="249616301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249616301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249616301">(Aug 16 2021 at 17:05)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r689701258">PR review comment</a>:</p>
<blockquote>
<p>Would it be possible to add a <code>test run</code> with the <code>x86_64</code> and <code>aarch64</code> backend to these tests as well? That way we get some more SIMD coverage on those targets. The <code>s390x</code> doesn't support SIMD yet, so no point in adding it.</p>
<p>Also could we move the test files to the <code>runtests</code> dir since we are testing run targets and the interpreter?<br>
</p>
</blockquote>



<a name="249616302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249616302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249616302">(Aug 16 2021 at 17:05)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-730932496">PR review</a>.</p>



<a name="249616303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249616303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249616303">(Aug 16 2021 at 17:05)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r689701933">PR review comment</a>:</p>
<blockquote>
<p>I could be wrong, but I think this annotation is only needed on <code>x86_64</code> targets.</p>
</blockquote>



<a name="249616514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249616514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249616514">(Aug 16 2021 at 17:06)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r689701258">PR review comment</a>.</p>



<a name="249620250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249620250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249620250">(Aug 16 2021 at 17:31)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-730962467">PR review</a>.</p>



<a name="249620251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249620251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249620251">(Aug 16 2021 at 17:31)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r689724314">PR review comment</a>:</p>
<blockquote>
<p>This might need to be more strict:</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        assert!(ty.is_vector() &amp;&amp; elem_ty.bytes() == 16);
</code></pre></div><br>
</p>
</blockquote>



<a name="249620252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249620252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249620252">(Aug 16 2021 at 17:31)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r689727327">PR review comment</a>:</p>
<blockquote>
<p>What do you think about implementing these instructions as: convert to larger type, use already existing add/sub, convert back to the right type with saturation (maybe with a new saturating <code>ValueConversionKind</code>). I can't remember how many instructions end up being saturating ones but if there are more it could reduce the size of <code>DataValue</code>.</p>
</blockquote>



<a name="249620253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249620253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249620253">(Aug 16 2021 at 17:31)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-730962467">PR review</a>.</p>



<a name="249691663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249691663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249691663">(Aug 17 2021 at 08:39)</a>:</h4>
<p>dheaton-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-731488982">PR review</a>.</p>



<a name="249691664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249691664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249691664">(Aug 17 2021 at 08:39)</a>:</h4>
<p>dheaton-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690159376">PR review comment</a>:</p>
<blockquote>
<p>Looking at the list of opcodes, there's a few but given that a lot of them are signed/unsigned variants of each other (which I don't think will need re-implementing each time, as in this case for example), I think there'd be ~5 saturating ops in DataValue. We could do that suggestion though if preferred, which might make implementing opcodes like the <code>narrow</code> set easier later (the only question is if <code>[I|U]128</code> is supposed to be supported; I see a few of the other functions in DataValue seem to ignore it and being the typically largest integer type would require different implementation).</p>
</blockquote>



<a name="249693592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249693592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249693592">(Aug 17 2021 at 09:03)</a>:</h4>
<p>dheaton-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-731513604">PR review</a>.</p>



<a name="249693593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249693593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249693593">(Aug 17 2021 at 09:03)</a>:</h4>
<p>dheaton-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690178253">PR review comment</a>:</p>
<blockquote>
<p>Trying this I'm getting errors that <code>i32x4</code> is an unsupported type for <code>uadd_sat</code> and <code>usub_sat</code> on the <code>test run</code> side -- should that be the case?</p>
</blockquote>



<a name="249701628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249701628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249701628">(Aug 17 2021 at 10:47)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-731609946">PR review</a>.</p>



<a name="249701629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249701629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249701629">(Aug 17 2021 at 10:47)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690252937">PR review comment</a>:</p>
<blockquote>
<p>Would it be easier to do a blanket impl of the <code>Value</code> trait like: <code>impl&lt;T: Value, const N: usize&gt; Value for [T; N]</code>? And have a function that would convert the SIMD values into/from the array?</p>
<p>I don't know how many of these functions we are going to need, but it might be worth considering in the future.</p>
<p>Although I think this would require rust 1.51 with <code>min_const_generics</code>. Which might be higher than our minimum requirements.</p>
</blockquote>



<a name="249701750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249701750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249701750">(Aug 17 2021 at 10:49)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-731611845">PR review</a>.</p>



<a name="249701751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249701751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249701751">(Aug 17 2021 at 10:49)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690254089">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    for (lhs, rhs) in arg0.iter().zip(arg1.iter()) {
        // The initial Value::int needs to be on a separate line so the
        // compiler can determine concrete types.
        let mut lhs: V = Value::int(*lhs, vector_type.lane_type())?;
        let mut rhs: V = Value::int(*rhs, vector_type.lane_type())?;
</code></pre></div><br>
</p>
</blockquote>



<a name="249702010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249702010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249702010">(Aug 17 2021 at 10:52)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690252937">PR review comment</a>.</p>



<a name="249702047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249702047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249702047">(Aug 17 2021 at 10:53)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690254089">PR review comment</a>.</p>



<a name="249702172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249702172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249702172">(Aug 17 2021 at 10:55)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690252937">PR review comment</a>.</p>



<a name="249702465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249702465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249702465">(Aug 17 2021 at 10:58)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690254089">PR review comment</a>.</p>



<a name="249765960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249765960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249765960">(Aug 17 2021 at 19:22)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-732140419">PR review</a>.</p>



<a name="249765962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249765962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249765962">(Aug 17 2021 at 19:22)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690657131">PR review comment</a>:</p>
<blockquote>
<p>Hmm, according to the <a href="https://docs.rs/cranelift-codegen/0.76.0/cranelift_codegen/ir/trait.InstBuilder.html#method.uadd_sat">docs</a>, it should work.</p>
<p>However, the reason that it probably doesn't work is that its not included in the <a href="https://github.com/WebAssembly/simd/blob/main/proposals/simd/SIMD.md#saturating-integer-addition">WASM SIMD Spec</a>.</p>
<p>What we usually do in these cases is separate the testcases in two files. <code>8x16</code> / <code>16x8</code> in one file with the run targets, and <code>i32x4</code> / <code>i64x2</code> (could you add testcases for <code>i64x2</code> as well?) into another with just the interpreter.</p>
<p>I also usually file an issue stating that these are not implemented in the x86_64 and aarch64 backends. We've been finding a lot of code that should compile but doesn't since we started adding these tests instead of relying on the wasm test suite.</p>
</blockquote>



<a name="249766846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249766846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249766846">(Aug 17 2021 at 19:29)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690657131">PR review comment</a>.</p>



<a name="249766874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249766874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249766874">(Aug 17 2021 at 19:30)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r690657131">PR review comment</a>.</p>



<a name="249828445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249828445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249828445">(Aug 18 2021 at 10:00)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>.</p>



<a name="249833735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249833735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249833735">(Aug 18 2021 at 11:04)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-732725930">PR review</a>.</p>



<a name="249849420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249849420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249849420">(Aug 18 2021 at 13:33)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>.</p>



<a name="249882421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249882421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249882421">(Aug 18 2021 at 17:18)</a>:</h4>
<p><strong>dheaton-arm</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a>.</p>



<a name="249887007"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249887007" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249887007">(Aug 18 2021 at 17:52)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-733191100">PR review</a>.</p>



<a name="249887009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249887009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249887009">(Aug 18 2021 at 17:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r691479758">PR review comment</a>:</p>
<blockquote>
<p>I think it might be slightly preferable here to use <code>SmallVec</code>, perhaps <code>SmallVec&lt;[i128; 1]&gt;</code> or similar (and typedef it so we can easily change it) -- while we don't expect the interpreter to be <em>fast</em>, it's still good to avoid an unnecessary heap allocation per execution of an instruction.</p>
</blockquote>



<a name="249921397"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249921397" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249921397">(Aug 18 2021 at 22:51)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-733415029">PR review</a>.</p>



<a name="249921398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249921398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249921398">(Aug 18 2021 at 22:51)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r691656182">PR review comment</a>:</p>
<blockquote>
<p>Yeah, it sounds like the current approach will be fine. </p>
</blockquote>



<a name="249921412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249921412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249921412">(Aug 18 2021 at 22:51)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-733415172">PR review</a>.</p>



<a name="249921413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249921413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249921413">(Aug 18 2021 at 22:51)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r691656341">PR review comment</a>:</p>
<blockquote>
<p>Thanks for adding these instructions!</p>
</blockquote>



<a name="249966591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249966591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249966591">(Aug 19 2021 at 10:24)</a>:</h4>
<p>dheaton-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-733820156">PR review</a>.</p>



<a name="249966593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/249966593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#249966593">(Aug 19 2021 at 10:24)</a>:</h4>
<p>dheaton-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r691984737">PR review comment</a>:</p>
<blockquote>
<p>Is this specifically for <code>extractlanes</code> or would this also apply to the input to <code>vectorizelanes</code>? Just want to check in case you wanted basically all the <code>Vec</code>s in this section of code changing, whilst I'm thinking that parameters aren't an issue (which I may be wrong about) and <code>Vec</code> parameters seem more general / flexible (accepting both <code>SmallVec</code> and <code>Vec</code>).</p>
</blockquote>



<a name="250000405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250000405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250000405">(Aug 19 2021 at 15:10)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>.</p>



<a name="250036420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250036420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250036420">(Aug 19 2021 at 19:25)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r692418856">PR review comment</a>:</p>
<blockquote>
<p>I guess the advice applies generally. Specifically, this:</p>
<blockquote>
<p><code>Vec</code> parameters seem more general / flexible (accepting both <code>SmallVec</code> and <code>Vec</code>)</p>
</blockquote>
<p>is not quite right; <code>Vec</code> is a specific type that requires its contents to be heap-allocated. The more idiomatic Rust type for "any array of values in memory" would be a slice, i.e. <code>&amp;[128]</code>, which one can get with <code>&amp;vec[..]</code> or <code>&amp;smallvec[..]</code>; but that only works for inbound args because it has no ownership. Returning a <code>SmallVec</code> is a technique we use elsewhere pretty successfully so I think it's' reasonable here too :-)</p>
</blockquote>



<a name="250036421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250036421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250036421">(Aug 19 2021 at 19:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-734380678">PR review</a>.</p>



<a name="250036497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250036497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250036497">(Aug 19 2021 at 19:25)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r692418856">PR review comment</a>.</p>



<a name="250322299"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250322299" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250322299">(Aug 23 2021 at 08:15)</a>:</h4>
<p>dheaton-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-735839368">PR review</a>.</p>



<a name="250322301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250322301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250322301">(Aug 23 2021 at 08:15)</a>:</h4>
<p>dheaton-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r693757546">PR review comment</a>:</p>
<blockquote>
<p>Ah, I was basing that statement off testing where using a <code>Vec</code> parameter but passing a <code>SmallVec</code> was accepted by the compiler and built successfully, but the inverse (using a <code>SmallVec</code> parameter but passing a <code>Vec</code>) was blocked by the compiler. I wasn't sure about if that made the <code>SmallVec</code> behave like a <code>Vec</code> with regards to heap allocations, however, hence my question.</p>
<blockquote>
<p>Returning a SmallVec is a technique we use elsewhere pretty successfully</p>
</blockquote>
<p>I understood that, and changed it to behave like that in 0089e15; I was more wondering about the input parameters to <code>vectorizelanes</code>. I'm gathering from your response though that the preference is for those to be a slice?</p>
</blockquote>



<a name="250341370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250341370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250341370">(Aug 23 2021 at 12:01)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>.</p>



<a name="250342864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250342864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250342864">(Aug 23 2021 at 12:17)</a>:</h4>
<p>dheaton-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#discussion_r693757546">PR review comment</a>.</p>



<a name="250375846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250375846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250375846">(Aug 23 2021 at 16:28)</a>:</h4>
<p><strong>dheaton-arm</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a>.</p>



<a name="250440485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250440485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250440485">(Aug 24 2021 at 04:09)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3188#pullrequestreview-736762255">PR review</a>.</p>



<a name="250457338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250457338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250457338">(Aug 24 2021 at 08:47)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a> from <code>implement-satarith</code> to <code>main</code>.</p>



<a name="250640588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233188%20Implement%20%60Extractlane%60%2C%20%60UaddSat%60%2C%20a.../near/250640588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233188.20Implement.20.60Extractlane.60.2C.20.60UaddSat.60.2C.20a.2E.2E.2E.html#250640588">(Aug 25 2021 at 16:03)</a>:</h4>
<p>abrown merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3188">PR #3188</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>