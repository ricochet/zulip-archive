<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3325 Enable all aarch64 features in QEM... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html">wasmtime / issue #3325 Enable all aarch64 features in QEM...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="252759320"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/252759320" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#252759320">(Sep 10 2021 at 09:46)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-916776949">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>CI Passes, but I think that's a false positive, it looks like <a href="https://github.com/bytecodealliance/wasmtime/pull/3325/checks?check_run_id=3565473980#step:12:1270">QEMU is segfaulting</a>.</p>
</blockquote>



<a name="252760465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/252760465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#252760465">(Sep 10 2021 at 09:54)</a>:</h4>
<p>sparker-arm <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-916781543">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<blockquote>
<p>CI Passes, but I think that's a false positive, it looks like <a href="https://github.com/bytecodealliance/wasmtime/pull/3325/checks?check_run_id=3565473980#step:12:1270">QEMU is segfaulting</a>.</p>
</blockquote>
<p>This isn't an issue with this patch though, I think you'll find the same thing happening if you look in any of the recent other patches too. </p>
</blockquote>



<a name="252760527"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/252760527" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#252760527">(Sep 10 2021 at 09:55)</a>:</h4>
<p>sparker-arm edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-916781543">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<blockquote>
<p>CI Passes, but I think that's a false positive, it looks like <a href="https://github.com/bytecodealliance/wasmtime/pull/3325/checks?check_run_id=3565473980#step:12:1270">QEMU is segfaulting</a>.</p>
</blockquote>
<p>This isn't an issue with this patch though, I think you'll find the same thing happening if you look in any of the recent other patches too. </p>
<p>I only say recent, because it's only relatively recently that segfaulting was happening.</p>
</blockquote>



<a name="252760553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/252760553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#252760553">(Sep 10 2021 at 09:55)</a>:</h4>
<p>sparker-arm edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-916781543">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<blockquote>
<p>CI Passes, but I think that's a false positive, it looks like <a href="https://github.com/bytecodealliance/wasmtime/pull/3325/checks?check_run_id=3565473980#step:12:1270">QEMU is segfaulting</a>.</p>
</blockquote>
<p>This isn't an issue with this patch though, I think you'll find the same thing happening if you look in any of the recent other patches too. </p>
<p>I only say recent, because it's only relatively recently that I was made aware that segfaulting was happening.</p>
</blockquote>



<a name="252825186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/252825186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#252825186">(Sep 10 2021 at 17:59)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-917100786">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>Hm that does look a little worrisome, but is it something that's known to be a failure? Our test suite triggers lots of segfaults which end up being caught, so I'm not sure if QEMU is printing the segfault and then we catch it or what. Also QEMU doesn't entirely exit because the test suite keeps running, so if it all runs to completion I'm not sure what the segfault message is actually pointing to.</p>
</blockquote>



<a name="253403576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253403576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253403576">(Sep 15 2021 at 12:18)</a>:</h4>
<p>akirilov-arm <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-919968491">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>I realize that you started this patch with a narrow scope, but how about upgrading to QEMU 6.1.0 as well - should be a simple change? From an AArch64 perspective the biggest advantage is IMHO SVE2 support.</p>
</blockquote>



<a name="253407920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253407920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253407920">(Sep 15 2021 at 12:55)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-919993112">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>Yeah, sounds good.</p>
<p>It should also eventually allow us to add the s390x runner, since it looks like the issues with s390x are fixed in 6.1.0</p>
</blockquote>



<a name="253421117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253421117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253421117">(Sep 15 2021 at 14:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-920058605">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>I double-checked the current builds we have and they don't have qemu printing out anything related to a segfault, which is somewhat worrisome. Would you be able to do a binary search on enabled features here to see which one is causing the segfault messages to appear? I still don't know how to interpret them because emulation continues to success but if we know which feature is causing the fault we may be able to disable it or debug further?</p>
</blockquote>



<a name="253422128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253422128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253422128">(Sep 15 2021 at 14:21)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-920064750">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>Are you sure? I'm seeing the segfaults on the latest PR we merged (<a href="https://github.com/bytecodealliance/wasmtime/runs/3599873098#step:12:1272">here</a>)</p>
</blockquote>



<a name="253423416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253423416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253423416">(Sep 15 2021 at 14:29)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-920064750">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>Are you sure? I'm seeing the segfaults on the latest PR we merged (<a href="https://github.com/bytecodealliance/wasmtime/runs/3599873098#step:12:1272">here</a>).</p>
<p>Do we have a way to search the logs of previous builds to see when this first appeared? If it has been happening for a long time the logs might have been deleted though.</p>
</blockquote>



<a name="253423612"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233325%20Enable%20all%20aarch64%20features%20in%20QEM.../near/253423612" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233325.20Enable.20all.20aarch64.20features.20in.20QEM.2E.2E.2E.html#253423612">(Sep 15 2021 at 14:30)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/3325#issuecomment-920072647">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3325">issue #3325</a>:</p>
<blockquote>
<p>Oops I think I must have checked the wrong logs, I see them now. <em>shakes fist at GitHub Actions UI</em></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>