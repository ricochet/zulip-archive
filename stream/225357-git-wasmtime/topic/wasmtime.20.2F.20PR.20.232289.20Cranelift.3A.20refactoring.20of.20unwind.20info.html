<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2289 Cranelift: refactoring of unwind info · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html">wasmtime / PR #2289 Cranelift: refactoring of unwind info</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="213097038"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213097038" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213097038">(Oct 12 2020 at 23:46)</a>:</h4>
<p>yurydelendik opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213097039"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213097039" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213097039">(Oct 12 2020 at 23:46)</a>:</h4>
<p><strong>yurydelendik</strong> requested <a href="https://github.com/peterhuene">peterhuene</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a>.</p>



<a name="213099074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213099074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213099074">(Oct 13 2020 at 00:23)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213181955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213181955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213181955">(Oct 13 2020 at 16:28)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213214071"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214071" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214071">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-507728301">PR Review</a>.</p>



<a name="213214072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214072">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-507728301">PR Review</a>.</p>



<a name="213214073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214073">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504177609">PR Review Comment</a>:</p>
<blockquote>
<p>For a more general-purpose name, perhaps <code>SaveRegister</code>?</p>
</blockquote>



<a name="213214074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214074">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504177730">PR Review Comment</a>:</p>
<blockquote>
<p>Likewise, perhaps <code>RestoreRegister</code>?</p>
</blockquote>



<a name="213214075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214075">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504184920">PR Review Comment</a>:</p>
<blockquote>
<p>Typo in old code:</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            cfa_offset: word_size as i32, // CFA offset starts at 8 to account for the return address on stack
</code></pre></div>

</blockquote>



<a name="213214076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214076">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504195094">PR Review Comment</a>:</p>
<blockquote>
<p><code>Xmm</code> is architecture-specific, so perhaps we should combine this with <code>SaveRegister</code> and let the specific ABI emit the needed unwind code / CFI depending on integer vs. floating point register?  It looks like the unwind codes for Windows ARM64 ABI will need SP-relative offsets too, even for the integer registers (unlike with x64 where only the floating-point XMM register saves need the SP-relative offset), so combining this with an <code>Option&lt;u32&gt;</code> for the stack offset might make sense to do.</p>
</blockquote>



<a name="213214077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214077">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504219143">PR Review Comment</a>:</p>
<blockquote>
<p>I wonder if we should call this <code>SetFramePointer</code>, which will correspond to the CFA register in DWARF and the <code>set_fp</code> unwind code for Windows ARM64?  Windows x64 doesn't need the concept of a "frame pointer" currently as Cranelift doesn't support <code>alloca</code> and this is why it is only used for <code>SystemV</code> at the moment.</p>
</blockquote>



<a name="213214078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214078">(Oct 13 2020 at 20:43)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504223227">PR Review Comment</a>:</p>
<blockquote>
<p>nit: perhaps call this <code>function_size</code> to correspond with <code>prologue_size</code>?</p>
</blockquote>



<a name="213214189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214189">(Oct 13 2020 at 20:44)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-507814420">PR Review</a>.</p>



<a name="213214192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214192">(Oct 13 2020 at 20:44)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504247330">PR Review Comment</a>:</p>
<blockquote>
<p>Note that Windows ARM64 unwind information will have a "set_fp" unwind code.</p>
</blockquote>



<a name="213214748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213214748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213214748">(Oct 13 2020 at 20:49)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-507728301">PR Review</a>.</p>



<a name="213230620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213230620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213230620">(Oct 13 2020 at 23:33)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213235037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213235037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213235037">(Oct 14 2020 at 00:41)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213235280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213235280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213235280">(Oct 14 2020 at 00:44)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213240939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213240939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213240939">(Oct 14 2020 at 02:41)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213290587"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213290587" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213290587">(Oct 14 2020 at 13:50)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213291249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213291249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213291249">(Oct 14 2020 at 13:54)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-508372709">PR Review</a>.</p>



<a name="213291250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213291250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213291250">(Oct 14 2020 at 13:54)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#discussion_r504697435">PR Review Comment</a>:</p>
<blockquote>
<p>Windows x64 emit logic wants to differentiate these two. I'll rename it to <code>SaveXmmRegister</code>, I'll defer this refactoring to different PR -- it is getting more complicated than simple refactoring.</p>
</blockquote>



<a name="213293602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213293602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213293602">(Oct 14 2020 at 14:10)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213304081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213304081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213304081">(Oct 14 2020 at 15:12)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213304137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213304137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213304137">(Oct 14 2020 at 15:13)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a> from <code>common-unwind</code> to <code>main</code>:</p>
<blockquote>
<p>This PR:</p>
<ul>
<li>Creates common unwind info data structures (at <code>cranelift::isa::unwind::input</code>)</li>
<li>Extracts common logic for SystemV and FastCall into "cranelift/codegen/src/isa/x86/unwind.rs"</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/winx64.rs to cranelift/codegen/src/isa/unwind/winx64.rs</li>
<li>Moves emit logic from cranelift/codegen/src/isa/x86/unwind/systemv.rs to cranelift/codegen/src/isa/unwind/systemv.rs</li>
<li>Fixes test at x86/unwind/systemv.rs</li>
</ul>
<p>This is a preparation PR to expose unwind info for different backends, e.g. new backend for Aarch64. Also, will be useful to move emitting logic out of the codegen crate and keep only common data structures.</p>
<p>See also #2266 </p>
</blockquote>



<a name="213320488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213320488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213320488">(Oct 14 2020 at 16:59)</a>:</h4>
<p><strong>yurydelendik</strong> requested <a href="https://github.com/peterhuene">peterhuene</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a>.</p>



<a name="213380255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213380255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213380255">(Oct 15 2020 at 04:51)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2289#pullrequestreview-508934766">PR Review</a>.</p>



<a name="213425863"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232289%20Cranelift%3A%20refactoring%20of%20unwind%20info/near/213425863" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232289.20Cranelift.3A.20refactoring.20of.20unwind.20info.html#213425863">(Oct 15 2020 at 13:34)</a>:</h4>
<p>yurydelendik merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2289">PR #2289</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>