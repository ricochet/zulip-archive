<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7633 A difference between windows and l... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html">wasmtime / issue #7633 A difference between windows and l...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="406046169"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/406046169" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#406046169">(Dec 05 2023 at 12:31)</a>:</h4>
<p><a href="https://github.com/Userzxcvbvnm">Userzxcvbvnm</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">Issue #7633</a>.</p>



<a name="406046171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/406046171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#406046171">(Dec 05 2023 at 12:31)</a>:</h4>
<p>Userzxcvbvnm opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">issue #7633</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>The test.c file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560062/test-c.txt">test-c.txt</a></p>
<p>The test.wasm file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560063/test-wasm.txt">test-wasm.txt</a></p>
<h3>Steps to Reproduce</h3>
<p>We create a normal file Data/hello.txt and write some initial content into the file.<br>
using command <code>wasmtime run --dir=./Data test.wasm</code> to execute the wasm file.</p>
<h3>Actual Results</h3>
<p>In windows, wasmtime do not write any bytes into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">33</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>In linux, wasmtime writes null characters (\u0000) into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">50</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>There is a difference between executing the wasm file in windows and linux.<br>
Maybe in linux, this could be a bug?</p>
<h3>Versions and Environment</h3>
<p>Ubuntu 20.04 (amd64)<br>
Windows 10 (x86_64)<br>
wasmtime 13.0.0<br>
</p>
</blockquote>



<a name="406047308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/406047308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#406047308">(Dec 05 2023 at 12:38)</a>:</h4>
<p>Userzxcvbvnm edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">issue #7633</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>The test.c file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560062/test-c.txt">test-c.txt</a></p>
<p>The test.wasm file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560063/test-wasm.txt">test-wasm.txt</a></p>
<h3>Steps to Reproduce</h3>
<p>We create a normal file Data/hello.txt and write some initial content into the file.<br>
using command <code>wasmtime run --dir=./Data test.wasm</code> to execute the wasm file.</p>
<h3>Actual Results</h3>
<p>In linux, wasmtime do not write any bytes into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">33</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>In windows, wasmtime writes null characters (\u0000) into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">50</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>There is a difference between executing the wasm file in windows and linux.<br>
Maybe in linux, this could be a bug?</p>
<h3>Versions and Environment</h3>
<p>Ubuntu 20.04 (amd64)<br>
Windows 10 (x86_64)<br>
wasmtime 13.0.0<br>
</p>
</blockquote>



<a name="406047375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/406047375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#406047375">(Dec 05 2023 at 12:39)</a>:</h4>
<p>Userzxcvbvnm edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">issue #7633</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>The test.c file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560062/test-c.txt">test-c.txt</a></p>
<p>The test.wasm file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560063/test-wasm.txt">test-wasm.txt</a></p>
<h3>Steps to Reproduce</h3>
<p>We create a normal file Data/hello.txt and write some initial content into the file.<br>
using command <code>wasmtime run --dir=./Data test.wasm</code> to execute the wasm file.</p>
<h3>Actual Results</h3>
<p>In linux, wasmtime do not write any bytes into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">30</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>In windows, wasmtime writes null characters (\u0000) into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">50</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>There is a difference between executing the wasm file in windows and linux.<br>
Maybe in linux, this could be a bug?</p>
<h3>Versions and Environment</h3>
<p>Ubuntu 20.04 (amd64)<br>
Windows 10 (x86_64)<br>
wasmtime 13.0.0<br>
</p>
</blockquote>



<a name="406109149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/406109149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#406109149">(Dec 05 2023 at 17:18)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/7633#issuecomment-1841266940">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">issue #7633</a>:</p>
<blockquote>
<p>Thanks for the report. In the future, can you add to your reports the traces given when WASMTIME_LOG=wasmtime_wasi=trace is set in your host environment?</p>
</blockquote>



<a name="421351419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237633%20A%20difference%20between%20windows%20and%20l.../near/421351419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237633.20A.20difference.20between.20windows.20and.20l.2E.2E.2E.html#421351419">(Feb 14 2024 at 00:58)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/7633">issue #7633</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>The test.c file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560062/test-c.txt">test-c.txt</a></p>
<p>The test.wasm file is uploaded as <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/13560063/test-wasm.txt">test-wasm.txt</a></p>
<h3>Steps to Reproduce</h3>
<p>We create a normal file Data/hello.txt and write some initial content into the file.<br>
using command <code>wasmtime run --dir=./Data test.wasm</code> to execute the wasm file.</p>
<h3>Actual Results</h3>
<p>In linux, wasmtime do not write any bytes into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">30</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>In windows, wasmtime writes null characters (\u0000) into the file and prints:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Successfully</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">fd</span><span class="p">.</span>
<span class="n">Current</span><span class="w"> </span><span class="n">offset</span>: <span class="mi">0</span>
<span class="n">Wrote</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">file</span><span class="p">.</span>
<span class="n">File</span><span class="w"> </span><span class="n">Size</span>: <span class="mi">50</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">Leave</span><span class="w"> </span><span class="n">snapshot</span><span class="p">.</span>
</code></pre></div>
<p>There is a difference between executing the wasm file in windows and linux.<br>
Maybe in linux, this could be a bug?</p>
<h3>Versions and Environment</h3>
<p>Ubuntu 20.04 (amd64)<br>
Windows 10 (x86_64)<br>
wasmtime 13.0.0<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>