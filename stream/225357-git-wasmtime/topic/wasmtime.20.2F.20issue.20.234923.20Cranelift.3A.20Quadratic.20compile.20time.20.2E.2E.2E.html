<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4923 Cranelift: Quadratic compile time ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html">wasmtime / issue #4923 Cranelift: Quadratic compile time ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="299581137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/299581137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#299581137">(Sep 19 2022 at 15:01)</a>:</h4>
<p>adambratschikaye labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<a name="299581138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/299581138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#299581138">(Sep 19 2022 at 15:01)</a>:</h4>
<p>adambratschikaye opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<a name="299581140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/299581140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#299581140">(Sep 19 2022 at 15:01)</a>:</h4>
<p>adambratschikaye labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<a name="299699406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/299699406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#299699406">(Sep 20 2022 at 07:48)</a>:</h4>
<p>adambratschikaye closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<a name="300013613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/300013613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#300013613">(Sep 21 2022 at 18:16)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4923#issuecomment-1254063838">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>My draft fix for this is in #4939.</p>
</blockquote>



<a name="300013614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/300013614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#300013614">(Sep 21 2022 at 18:16)</a>:</h4>
<p>jameysharp reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<a name="300408135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234923%20Cranelift%3A%20Quadratic%20compile%20time%20.../near/300408135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234923.20Cranelift.3A.20Quadratic.20compile.20time.20.2E.2E.2E.html#300408135">(Sep 23 2022 at 16:41)</a>:</h4>
<p>jameysharp closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4923">issue #4923</a>:</p>
<blockquote>
<p>It seems that a <code>wasm</code> source with a chain of blocks each containing a <code>local.get</code> instruction can have quadratic compile time because <code>can_optimize_var_lookup</code> will traverse the entire chain when handling each <code>local.get</code> instruction. As an example, the following <code>wat</code> takes 2.4 seconds to compile on my machine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="p">(</span><span class="n">block</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="w"> </span><span class="p">(</span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span><span class="p">))))</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">repeated</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="mi">000</span><span class="w"> </span><span class="n">times</span><span class="w"></span>
<span class="w">  </span><span class="p">)</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>and a flamegraph: ![flamegraph](<a href="https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg">https://user-images.githubusercontent.com/90606735/191045431-3e7626ef-7c29-4343-b784-4f9f7205d9d5.svg</a>) shows that almost the entire time is spent in <code>can_optimize_var_lookup</code>. Note that the <code>wasm</code> file is 147 KB.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Download the attached <a href="https://github.com/bytecodealliance/wasmtime/files/9599992/blocks.wasm.gz"><code>blocks.wasm.gz</code></a> and unzip it (or take the above <code>wat</code> and convert it to <code>wasm</code>).</li>
<li>Compile it with <code>time target/release/wasmtime compile blocks.wasm</code>.</li>
</ul>
<h3>Expected Results</h3>
<p>I'd expect the compilation to be on the order of 100ms as it is for other modules with a single function of similar size on my machine.</p>
<h3>Actual Results</h3>
<p>The compilation takes over 2 seconds.</p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: commit <code>27435ae398bcce74bf990b9683e5c47c3f6c5d51</code></p>
<p>Operating system: Ubuntu 20.04, Linux kernel 5.4.0-122-generic</p>
<p>Architecture: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Architecture</span>:                    <span class="nc">x86_64</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">op</span><span class="o">-</span><span class="n">mode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                  <span class="mi">32</span><span class="o">-</span><span class="n">bit</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="o">-</span><span class="n">bit</span><span class="w"></span>
<span class="n">Byte</span><span class="w"> </span><span class="n">Order</span>:                      <span class="nc">Little</span><span class="w"> </span><span class="n">Endian</span><span class="w"></span>
<span class="n">Address</span><span class="w"> </span><span class="n">sizes</span>:                   <span class="mi">43</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="n">physical</span><span class="p">,</span><span class="w"> </span><span class="mi">48</span><span class="w"> </span><span class="n">bits</span><span class="w"> </span><span class="kr">virtual</span><span class="w"></span>
<span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                          <span class="mi">64</span><span class="w"></span>
<span class="n">On</span><span class="o">-</span><span class="n">line</span><span class="w"> </span><span class="n">CPU</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">list</span>:             <span class="mi">0</span><span class="o">-</span><span class="mi">63</span><span class="w"></span>
<span class="n">Thread</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">core</span>:              <span class="mi">2</span><span class="w"></span>
<span class="n">Core</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">socket</span>:              <span class="mi">16</span><span class="w"></span>
<span class="n">Socket</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                       <span class="mi">2</span><span class="w"></span>
<span class="n">NUMA</span><span class="w"> </span><span class="n">node</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>:                    <span class="mi">1</span><span class="w"></span>
<span class="n">Vendor</span><span class="w"> </span><span class="n">ID</span>:                       <span class="nc">AuthenticAMD</span><span class="w"></span>
<span class="n">CPU</span><span class="w"> </span><span class="n">family</span>:                      <span class="mi">23</span><span class="w"></span>
<span class="n">Model</span>:                           <span class="mi">49</span><span class="w"></span>
<span class="n">Model</span><span class="w"> </span><span class="n">name</span>:                      <span class="nc">AMD</span><span class="w"> </span><span class="n">EPYC</span><span class="w"> </span><span class="mi">7302</span><span class="w"> </span><span class="mi">16</span><span class="o">-</span><span class="n">Core</span><span class="w"> </span><span class="n">Processor</span><span class="w"></span>
</code></pre></div>
<h3>Extra Info</h3>
<p>I'm working on a PR which should help with this.<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>