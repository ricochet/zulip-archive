<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2071 machinst x64: Use xor/xorps/xorpd to ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html">wasmtime / PR #2071 machinst x64: Use xor/xorps/xorpd to ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="205145508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205145508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205145508">(Jul 27 2020 at 17:30)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2071">PR #2071</a> from <code>x64-xor</code> to <code>main</code>:</p>
<blockquote>
<p>This shows how we can factor out helpers for knowing whether an instruction redefines its input instead of using it.</p>
</blockquote>



<a name="205145509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205145509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205145509">(Jul 27 2020 at 17:30)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/cfallin">cfallin</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2071">PR #2071</a>.</p>



<a name="205145510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205145510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205145510">(Jul 27 2020 at 17:30)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/cfallin">cfallin</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2071">PR #2071</a>.</p>



<a name="205148325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205148325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205148325">(Jul 27 2020 at 17:58)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456007824">PR Review</a>.</p>



<a name="205148326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205148326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205148326">(Jul 27 2020 at 17:58)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456007824">PR Review</a>.</p>



<a name="205148327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205148327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205148327">(Jul 27 2020 at 17:58)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461066879">PR Review Comment</a>:</p>
<blockquote>
<p>This reads a little awkwardly (three cheers for expression-<code>if</code>s, but...). Perhaps add a helper to <code>RegMemImm</code> such as <code>.to_reg() -&gt; Option&lt;Reg&gt;</code>, then you can do <code>op == ... &amp;&amp; src.to_reg() == Some(dst.to_reg()</code>?</p>
</blockquote>



<a name="205148328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205148328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205148328">(Jul 27 2020 at 17:58)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461068384">PR Review Comment</a>:</p>
<blockquote>
<p>We should have a comment here describing what's going on, perhaps similar to my suggestion in @abrown's patch <a href="https://github.com/bytecodealliance/wasmtime/pull/2060#discussion_r460293433">here</a>.</p>
</blockquote>



<a name="205155730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205155730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205155730">(Jul 27 2020 at 19:03)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456055503">PR Review</a>.</p>



<a name="205155732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205155732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205155732">(Jul 27 2020 at 19:03)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461105405">PR Review Comment</a>:</p>
<blockquote>
<p>Another thought: why not make these methods of <code>Inst</code>? Then we can use this logic with <code>inst.is_def()</code> and avoid searching around for <code>alu_rmi_r_is_def</code>?</p>
</blockquote>



<a name="205156036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205156036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205156036">(Jul 27 2020 at 19:06)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456057256">PR Review</a>.</p>



<a name="205156037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205156037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205156037">(Jul 27 2020 at 19:06)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461106826">PR Review Comment</a>:</p>
<blockquote>
<p>What do you think of <code>map_as_def</code>? I don't feel too strongly about that but I think it would pretty helpful to explain here what is going on (e.g. we have to pretend the register is writable because <code>map_def</code> only accepts writable registers).</p>
</blockquote>



<a name="205208360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205208360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205208360">(Jul 28 2020 at 08:20)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456407527">PR Review</a>.</p>



<a name="205208361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205208361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205208361">(Jul 28 2020 at 08:20)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461403972">PR Review Comment</a>:</p>
<blockquote>
<p>I like the expression-<code>if</code>, but maybe it could be made clearer by changing the formal parameters thusly:</p>
<div class="codehilite"><pre><span></span><code>fn alu_rmi_r_is_def(rmi: &amp;RegMemImm, reg: Writable&lt;Reg&gt;, op: AluRmiROpcode)
</code></pre></div>


<p>Other comments:</p>
<ul>
<li>I would find the name <code>alu_rmi_r_is_const</code> more natural; could that be considered?</li>
<li>also <code>op == AluRmiROpcode::Sub</code> behaves similarly, and really we should handle that too, even though we don't expect anybody to actually use it</li>
</ul>
</blockquote>



<a name="205208624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205208624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205208624">(Jul 28 2020 at 08:24)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456410282">PR Review</a>.</p>



<a name="205208625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205208625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205208625">(Jul 28 2020 at 08:24)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461406000">PR Review Comment</a>:</p>
<blockquote>
<p>Just as a sanity check .. do we need special-case handling for <code>map_regs</code>?  IIUC, if there is no special-case handling then the mapping for the <code>reg</code> component of the insn will assert, complaining that the <code>def</code> and <code>use</code> maps are inconsistent .. yes?  Can you confirm?</p>
</blockquote>



<a name="205209357"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205209357" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205209357">(Jul 28 2020 at 08:33)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456417106">PR Review</a>.</p>



<a name="205209358"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205209358" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205209358">(Jul 28 2020 at 08:33)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461411395">PR Review Comment</a>:</p>
<blockquote>
<p>Or maybe <code>alu_rmi_r_produces_const</code> ..</p>
</blockquote>



<a name="205210202"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205210202" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205210202">(Jul 28 2020 at 08:41)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456423371">PR Review</a>.</p>



<a name="205210203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205210203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205210203">(Jul 28 2020 at 08:41)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461416345">PR Review Comment</a>:</p>
<blockquote>
<p>Also <code>cmpeqxx</code> or whatever the recommended generate-all-1s idiom is.  The Intel opt guide suggests this is recommended for Sandy Bridge onwards.</p>
</blockquote>



<a name="205210403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205210403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205210403">(Jul 28 2020 at 08:43)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456425064">PR Review</a>.</p>



<a name="205238403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205238403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205238403">(Jul 28 2020 at 13:58)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-456658623">PR Review</a>.</p>



<a name="205238404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205238404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205238404">(Jul 28 2020 at 13:58)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r461601172">PR Review Comment</a>:</p>
<blockquote>
<p>I add that in #2060.</p>
</blockquote>



<a name="205591838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205591838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205591838">(Jul 31 2020 at 13:50)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-459188957">PR Review</a>.</p>



<a name="205591839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205591839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205591839">(Jul 31 2020 at 13:50)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r463622790">PR Review Comment</a>:</p>
<blockquote>
<p>I like it!</p>
</blockquote>



<a name="205591922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205591922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205591922">(Jul 31 2020 at 13:51)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-459189612">PR Review</a>.</p>



<a name="205591923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205591923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205591923">(Jul 31 2020 at 13:51)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r463623319">PR Review Comment</a>:</p>
<blockquote>
<p>I didn't run into any issues with this, and i could confirm it was probably used. This patch does adjust both reg usage collection and reg usage mapping, so nothing should be missing as far as i can tell.</p>
</blockquote>



<a name="205594886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205594886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205594886">(Jul 31 2020 at 14:14)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#pullrequestreview-459207195">PR Review</a>.</p>



<a name="205594887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205594887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205594887">(Jul 31 2020 at 14:14)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2071#discussion_r463636506">PR Review Comment</a>:</p>
<blockquote>
<p>Thanks for the comments! To sum up:</p>
<ul>
<li>created it as a method of Inst</li>
<li>called <code>produces_const()</code></li>
<li>and added helper <code>to_reg</code> to both RegMem and RegMemImm</li>
</ul>
</blockquote>



<a name="205596415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205596415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205596415">(Jul 31 2020 at 14:27)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2071">PR #2071</a> from <code>x64-xor</code> to <code>main</code>:</p>
<blockquote>
<p>This shows how we can factor out helpers for knowing whether an instruction redefines its input instead of using it.</p>
</blockquote>



<a name="205637129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232071%20machinst%20x64%3A%20Use%20xor/xorps/xorpd%20to%20.../near/205637129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232071.20machinst.20x64.3A.20Use.20xor.2Fxorps.2Fxorpd.20to.20.2E.2E.2E.html#205637129">(Jul 31 2020 at 20:17)</a>:</h4>
<p>abrown merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2071">PR #2071</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>