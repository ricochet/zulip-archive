<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6543 Why does the file layout for the `... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html">wasmtime / issue #6543 Why does the file layout for the `...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="364652906"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/364652906" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#364652906">(Jun 08 2023 at 18:57)</a>:</h4>
<p>brettcannon opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>Specifically, is there a reason why <a href="https://wasmtime.dev/install.sh">https://wasmtime.dev/install.sh</a> put <code>wasmtime</code> into a <code>bin</code> directory but the <code>.tar.xz</code> doesn't?</p>
</blockquote>



<a name="365642987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/365642987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#365642987">(Jun 12 2023 at 18:13)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1587835953">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>As for "why" I don't think there's any reason other than "two different people worked on these features". It should be fine to update on or the other, probably updating the <code>.tar.xz</code> files produced in CI here is the way to go (probably in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/ci/build-tarballs.sh">this script</a>)</p>
</blockquote>



<a name="365690336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/365690336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#365690336">(Jun 12 2023 at 22:05)</a>:</h4>
<p>brettcannon <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1588169742">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>Looking at the script I can see not wanting to do it differently simply because what's the answer for Windows versus Unix? <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> Is the answer still <code>bin/</code> for the <code>wasmtime.exe</code> binary?</p>
<p>I ask as I'm happy to submit a PR to change that script as desired (although it probably also requires changing the <a href="http://install.sh">install.sh</a> script to just do a direct unpacking instead of having to copy <code>wasmtime</code> around).</p>
</blockquote>



<a name="365992890"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/365992890" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#365992890">(Jun 13 2023 at 21:09)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1590031559">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>Ah I don't really know of a standard layout myself so I'm not really sure what the best answer here is. That's a good point though that <code>install.sh</code> will have to account for this one way or another, and that probably needs to land before the change to Wasmtime lands to change the script.</p>
</blockquote>



<a name="366272189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/366272189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#366272189">(Jun 14 2023 at 18:30)</a>:</h4>
<p>brettcannon <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1591786758">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>I also totally understand if the answer is, "no specific reason it's that way", and that's the end of the conversation. I'm thinking about what the best way to install wasmtime in GitHub Actions and I don't like using <code>install.sh</code> as it assumes shell changes. But then there's this difference with the <code>.tar.xz</code> file where either you copy <code>wasmtime</code> to somewhere or you put the whole directory that you unpack on to <code>PATH</code>.</p>
</blockquote>



<a name="366303783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/366303783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#366303783">(Jun 14 2023 at 21:07)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1591986888">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>Heh that's a good question and use case, and one I've often wondered myself! The easiest by far is <code>- run: cargo install wasmtime-cli</code> but that's slow. You can add caching to make it faster but that gets sort of unwieldy and annoying to manage. You could otherwise have a macos/unix/Windows-specific block to download each binary and install them and add them to PATH, but I also find that pretty unwieldy.</p>
<p>Basically I've never found a great way to install precompiled binaries on github actions, but if there's an action like "go download this release for the current platform from this repo" and all we need to do is restructure the tarballs we should definitely do that. I'm not aware of one myself though.</p>
</blockquote>



<a name="366636167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/366636167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#366636167">(Jun 15 2023 at 21:59)</a>:</h4>
<p>brettcannon <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1593772577">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<blockquote>
<p>You could otherwise have a macos/unix/Windows-specific block to download each binary and install them and add them to PATH, but I also find that pretty unwieldy.</p>
</blockquote>
<p>That's what I'm currently doing: <a href="https://github.com/brettcannon/cpython-wasi-build/blob/fd3334ec713145686bf8b634354cfe82889ff2f3/.github/workflows/release.yml#L32-L38">https://github.com/brettcannon/cpython-wasi-build/blob/fd3334ec713145686bf8b634354cfe82889ff2f3/.github/workflows/release.yml#L32-L38</a></p>
<p>I did open #6101 for the idea of putting something like the above behind an action that takes care of those details for you. I think the trick is how to handle what version to download (e.g., can you leave it blank, just say <code>9</code>, etc.). After that I don't know how much to care about what might end up on <code>PATH</code> (and hence this issue <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span>)?</p>
</blockquote>



<a name="366942155"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/366942155" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#366942155">(Jun 16 2023 at 20:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1595286743">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>Ah indeed! I think that #6101 is probably the "best" solution here in the sense that <code>PATH</code> isn't really all that important and it's "just" a means to an end.</p>
<p>For versioning one option would be to bake it into the tag (e.g. <code>uses: bytecodealliance/wasmtime/install@v9.0.0</code>) although having it as a <code>with:</code> argument also seems reasonable</p>
</blockquote>



<a name="366990067"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/366990067" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#366990067">(Jun 16 2023 at 22:01)</a>:</h4>
<p>brettcannon <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1595365578">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<blockquote>
<p>For versioning one option would be to bake it into the tag (e.g. <code>uses: bytecodealliance/wasmtime/install@v9.0.0</code>)</p>
</blockquote>
<p>My one concern with that would be what if there was a bug in the action or some changed required (e.g., GitHub is forcing all the Node-based actions to upgrade to Node 18 right now)? I guess as long as you are always willing to move the tags to match the version then it should work, although updating all of those tags when there's been a fix would be a bit of a headache.</p>
<blockquote>
<p>having it as a <code>with:</code> argument also seems reasonable</p>
</blockquote>
<p>That's probably the best, it just becomes a question of whether it's okay to require the full version (e.g., <code>9.0.0</code>) or if you could leave bits off and have them filled in (e.g. <code>9</code> gets you <code>9.0.4</code>), and is it worth the effort to make that work? Would most people want the latest <strong>or</strong> a specific version for some reason? Or would it be better to just have the action for the latest and provide the YAML snippet for those that need a specific version?</p>
</blockquote>



<a name="367970464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236543%20Why%20does%20the%20file%20layout%20for%20the%20%60.../near/367970464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236543.20Why.20does.20the.20file.20layout.20for.20the.20.60.2E.2E.2E.html#367970464">(Jun 20 2023 at 15:30)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6543#issuecomment-1599025899">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6543">issue #6543</a>:</p>
<blockquote>
<p>True! Tags are probably not the way to go then. I'd probably say though that it's ok to start off simpler by specifying a full version number rather than having to figure out how to expand partial versions as that can always be added later</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>