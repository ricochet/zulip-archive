<html>
<head><meta charset="utf-8"><title>wasmtime / issue #8036 c-api: component model · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html">wasmtime / issue #8036 c-api: component model</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="424248045"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/424248045" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#424248045">(Mar 01 2024 at 14:22)</a>:</h4>
<p>rockwotj opened <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Expose the component model in the C API for other languages than Rust.</p>
<h4>Benefit</h4>
<p>Components in all the languages! (on the host side)</p>
<h4>Implementation</h4>
<p>I have a POC I created here with some feedback I will incorporate.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/pull/7801">https://github.com/bytecodealliance/wasmtime/pull/7801</a></p>
<p>However prior to making further progress on this task, there needs more work on the test infrastructure for the C API. There was a rough plan in Zulip discussed about using GoogleTest and C++.</p>
<h4>Alternatives</h4>
</blockquote>



<a name="424248180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/424248180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#424248180">(Mar 01 2024 at 14:22)</a>:</h4>
<p>rockwotj <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-1973293159">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>I am planning on getting to this, but progress will be slow, so if someone else wants to pick this up, I am happy to take it off my plate</p>
</blockquote>



<a name="428357199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/428357199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#428357199">(Mar 22 2024 at 15:36)</a>:</h4>
<p>ac000 <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2015359535">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Hi,</p>
<p>This is really great to see!</p>
<p>We (<a href="https://unit.nginx.org/">NGINX Unit</a>) wrote a WebAssembly language module using the Wasmtime C API last summer.</p>
<p>However when it came to supporting the component model, we discovered this was totally lacking on the C side of things.</p>
<p>In fact Alex actually ended up writing us a Rust based wasm language module to support components.</p>
<p>However being a <strong>C</strong> guy, I am naturally chomping at the bit to have a NGINX Unit wasm language module in C that supports the component model.</p>
<p>In terms of core functionality is your PoC in a testable state? I.e would it be able to actually run say a WASI 0.2.0 component?</p>
<p>While I am a C programmer, I can only sort of kludge bits of Rust (and maybe C++, C++ and C have really been distinct languages from each other for quite some time) together, but don't really know what I'm doing there...</p>
<p>Cheers,<br>
Andrew</p>
</blockquote>



<a name="429880419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/429880419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#429880419">(Mar 27 2024 at 14:59)</a>:</h4>
<p>rockwotj <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2022993994">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Hey Andrew, glad you're interested in this as well! I have not yet had time to invest in this. I believe my PoC had all the needed bits to invoke a component, but there is more needed (exposing host functions to components for example), and things like resources were entirely unsupported. I have <a href="https://news.ycombinator.com/item?id=16442716">alligator energy</a> here, and will eventually get around to this, starting with a test suite (using Google Test).</p>
<blockquote>
<p>run say a WASI 0.2.0 component?</p>
</blockquote>
<p>Even once I get the component model working, I don't personally have plans to expose WASI 0.2 in the C API (at least the implementation that Wasmtime provides), we have our own WASI implementation we plug in ourselves (that uses our scheduler, allocator, etc). I'm not sure of the state of WASI p1 in the C API, but we can open a followup ticket after this is completed.</p>
</blockquote>



<a name="429880524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/429880524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#429880524">(Mar 27 2024 at 14:59)</a>:</h4>
<p>rockwotj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2022993994">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Hey Andrew, glad you're interested in this as well! I have not yet had time to invest in this. I believe my PoC had all the needed bits to invoke a component, but there is more needed (exposing host functions to components for example), and things like resources were entirely unsupported. It's not actually been tested against a real component, I was wanting to get some feedback first. I have <a href="https://news.ycombinator.com/item?id=16442716">alligator energy</a> here, and will eventually get around to this, starting with a test suite (using Google Test).</p>
<blockquote>
<p>run say a WASI 0.2.0 component?</p>
</blockquote>
<p>Even once I get the component model working, I don't personally have plans to expose WASI 0.2 in the C API (at least the implementation that Wasmtime provides), we have our own WASI implementation we plug in ourselves (that uses our scheduler, allocator, etc). I'm not sure of the state of WASI p1 in the C API, but we can open a followup ticket after this is completed.</p>
</blockquote>



<a name="442706178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/442706178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#442706178">(Jun 05 2024 at 06:39)</a>:</h4>
<p>vlhomutov <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2148996852">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Any update/plan on this? C API is a must-have for components.</p>
<p>Is it possible to enable loading a component as plain WASM module? <br>
I mean: component is just  a WASM module + metadata in special file format.<br>
I  understand that loading component properly requires additional works.<br>
But what is the problem to extract  plain WASM from module file and load it as usual module?</p>
</blockquote>



<a name="443186315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/443186315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#443186315">(Jun 07 2024 at 00:41)</a>:</h4>
<p>fforjan <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2153646259">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Would my understanding that, without the Component in C APi, it would also not be available into a .NET Host ?<br>
We were interesting to explorer the component model with our .Net application for extensions but we are blocked with a simple Module, not Component</p>
</blockquote>



<a name="445804547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/445804547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#445804547">(Jun 20 2024 at 09:50)</a>:</h4>
<p>rockwotj <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2180272305">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<blockquote>
<p>Updates</p>
</blockquote>
<p>Unfortunately I will not be able to get to this anytime soon. I don’t know if this is something the Wasmtime core team is considering taking up. You can ask on Zulip.</p>
<blockquote>
<p>it would also not be available into a .NET Host</p>
</blockquote>
<p>Correct, the component model host bindings for any other language than Rust is blocked on getting this done.</p>
</blockquote>



<a name="482333460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/482333460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#482333460">(Nov 14 2024 at 08:29)</a>:</h4>
<p>lanfeust69 <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2475710409">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>I've been using the C-api for component model for a while (in <a href="https://github.com/klave-network/wasmtime/tree/secretarium">this branch</a>, starting from #7801).</p>
<p>This works by limiting a lot the set of types allowed in host-provided functions, and needing to declare in advance all the allowed signatures, two very serious limitations.</p>
<p>But I'm finally giving a go to a more general implementation, especially now that, after rebasing, <code>LinkerInstance::func_new</code> no longer needs a <code>Component</code> parameter.</p>
</blockquote>



<a name="485164003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/485164003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#485164003">(Nov 29 2024 at 21:42)</a>:</h4>
<p>rockwotj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-1973293159">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>~I am planning on getting to this, but progress will be slow, so if someone else wants to pick this up, I am happy to take it off my plate~</p>
<p>I will probably not be getting to this. Please pick it up if you can work on this</p>
</blockquote>



<a name="494008017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/494008017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#494008017">(Jan 15 2025 at 20:15)</a>:</h4>
<p>mattjohnsonpint <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2593846815">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Happy new year!  Any updates on this?</p>
<p>I'd love to try out the component model in my Go apps via wasmtime-go, but my understanding is that it's not possible to even start working on the Go implementation until the C API supports the component model.</p>
<p>I believe other non-Rust languages are in the same boat.</p>
</blockquote>



<a name="494008067"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/494008067" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#494008067">(Jan 15 2025 at 20:15)</a>:</h4>
<p>mattjohnsonpint edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2593846815">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Happy new year!  Any updates on this?</p>
<p>I'd love to try out the component model in my Go apps via wasmtime-go, but my understanding is that it's not possible to even start working on the Go implementation until the C API supports the component model.</p>
<p>I believe other non-Rust host languages are in the same boat.</p>
</blockquote>



<a name="494095878"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/494095878" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#494095878">(Jan 16 2025 at 09:07)</a>:</h4>
<p>ReneeGA2020 <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2594952756">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<p>Found a PR started by @lanfeust69 <br>
<a href="https://github.com/bytecodealliance/wasmtime/pull/9812">https://github.com/bytecodealliance/wasmtime/pull/9812</a></p>
<p>No one has approved it yet.</p>
</blockquote>



<a name="494176644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238036%20c-api%3A%20component%20model/near/494176644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238036.20c-api.3A.20component.20model.html#494176644">(Jan 16 2025 at 15:37)</a>:</h4>
<p>lanfeust69 <a href="https://github.com/bytecodealliance/wasmtime/issues/8036#issuecomment-2596054082">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8036">issue #8036</a>:</p>
<blockquote>
<blockquote>
<p>Found a PR started by <a href="https://github.com/lanfeust69">@lanfeust69</a> <a href="https://github.com/bytecodealliance/wasmtime/pull/9812">#9812</a></p>
<p>No one has approved it yet.</p>
</blockquote>
<p>There's a fair bit of polishing to do there (starting with splitting in smaller intermediate PRs), I think I eventually will be able to tackle that, but not clear exactly when (I didn't expect to have time during the holidays in any case).</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>