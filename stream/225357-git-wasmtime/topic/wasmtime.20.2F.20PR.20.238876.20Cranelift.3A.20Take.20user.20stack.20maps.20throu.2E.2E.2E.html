<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8876 Cranelift: Take user stack maps throu... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html">wasmtime / PR #8876 Cranelift: Take user stack maps throu...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="447309077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447309077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447309077">(Jun 26 2024 at 19:16)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447309079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447309079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447309079">(Jun 26 2024 at 19:16)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447309081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447309081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447309081">(Jun 26 2024 at 19:16)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a> from <code>fitzgen:saferpoints-lowering</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Previously, user stack maps were inserted by the frontend and preserved in the mid-end. This commit takes them from the mid-end CLIF into the backend vcode, and then from that vcode into the finalized mach buffer during emission.</p>
<p>During lowering, we compile the <code>UserStackMapEntry</code>s into packed <code>UserStackMap</code>s. This is the appropriate moment in time to do that coalescing, packing, and compiling because the stack map entries are immutable from this point on.</p>
<p>Additionally, we include user stack maps in the <code>Debug</code> and disassembly implementations for vcode, just after their associated safepoint instructions. This allows us to see the stack maps we are generating when debugging, as well as write filetests that check we are generating the expected stack maps for the correct instructions.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="447311264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447311264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447311264">(Jun 26 2024 at 19:25)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447539252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539252">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#pullrequestreview-2146051907">PR review</a>:</p>
<blockquote>
<p>I really like this and look forward to seeing the original stackmap support deleted soon! (At that point I suppose we can rename "user stack maps" back to simply "stack maps" again?)</p>
<p>Some thoughts below but overall shape LGTM.</p>
</blockquote>



<a name="447539253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539253">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#pullrequestreview-2146051907">PR review</a>:</p>
<blockquote>
<p>I really like this and look forward to seeing the original stackmap support deleted soon! (At that point I suppose we can rename "user stack maps" back to simply "stack maps" again?)</p>
<p>Some thoughts below but overall shape LGTM.</p>
</blockquote>



<a name="447539254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539254">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657526193">PR review comment</a>:</p>
<blockquote>
<p>A little thing but rather than the explicit <code>+ 4</code> here, could we put the <code>push_user_stack_map()</code> call after the <code>.put4()</code> below? That way the order of operations here matches the semantics of "stackmap at end of instruction" more directly.</p>
</blockquote>



<a name="447539255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539255">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657529367">PR review comment</a>:</p>
<blockquote>
<p>(likewise here as above; coupling feels even a little more brittle since we're depending on the fact we emit two four-byte instructions below)</p>
</blockquote>



<a name="447539256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539256">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657549041">PR review comment</a>:</p>
<blockquote>
<p>Should we assert that no more than one VCode inst lowered from a given CLIF inst is a safepoint-instruction? (In practice this should be the case as long as safepoints are calls only?) Duplicating the same CLIF-level stackmap for multiple VCode insts does seem correct-ish to me in the presence of a "the safepoint could actually happen at these N points" condition but is still somewhat surprising...</p>
</blockquote>



<a name="447539257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539257">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657526666">PR review comment</a>:</p>
<blockquote>
<p>(likewise here as above)</p>
</blockquote>



<a name="447539258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539258">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657552323">PR review comment</a>:</p>
<blockquote>
<p>Given the newtype idea above, could we have a <code>.to_insn_index(num_insts: usize)</code> on the <code>BackwardInsnIndex</code> type?</p>
</blockquote>



<a name="447539259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447539259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447539259">(Jun 27 2024 at 17:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657551033">PR review comment</a>:</p>
<blockquote>
<p>Would it be possible to define a newtype over InsnIndex (<code>BackwardInsnIndex</code>) to make this a little more explicit? I don't think we need to weave it through the rest of lowering and translate out of it when doing the finalize/reverse, necessarily; just want to document in the types that this doesn't go through the same translation as the other index data.</p>
</blockquote>



<a name="447541282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447541282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447541282">(Jun 27 2024 at 17:53)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#pullrequestreview-2146112086">PR review</a>.</p>



<a name="447541283"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447541283" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447541283">(Jun 27 2024 at 17:53)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657562088">PR review comment</a>:</p>
<blockquote>
<p>Yeah I went back and forth on this and had that same reasoning about the stack maps being correct even if there are multiple safepoint mach insts, since nothing has moved those values in the middle of this CLIF instruction's lowering. But conservatively asserting there is only one is fine and something we can relax if we ever need to in the future (seems unlikely).</p>
</blockquote>



<a name="447549780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549780">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447549800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549800">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#pullrequestreview-2146195481">PR review</a>.</p>



<a name="447549801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549801">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657618829">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="447549823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549823">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#pullrequestreview-2146195716">PR review</a>.</p>



<a name="447549826"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549826" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549826">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#discussion_r1657618950">PR review comment</a>:</p>
<blockquote>
<p>And done!</p>
</blockquote>



<a name="447549864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549864">(Jun 27 2024 at 18:22)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447549912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447549912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447549912">(Jun 27 2024 at 18:23)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#issuecomment-2195411845">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>:</p>
<blockquote>
<p>Thanks for the review, Chris!</p>
</blockquote>



<a name="447550729"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447550729" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447550729">(Jun 27 2024 at 18:27)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<a name="447551079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447551079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447551079">(Jun 27 2024 at 18:29)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8876#issuecomment-2195423240">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>:</p>
<blockquote>
<blockquote>
<p>I really like this and look forward to seeing the original stackmap support deleted soon! (At that point I suppose we can rename "user stack maps" back to simply "stack maps" again?)</p>
</blockquote>
<p>Yeah, next I will get Wasmtime using the new system, and then I will start removing the old system. Not 100% sure if I will spend the time to rename "user stack maps" to "stack maps", as the name kinda makes sense to me, given that these are really provided by the frontend "user" and the "user" is responsible for them (as opposed to being generated by Cranelift itself). But I don't feel strongly about it.</p>
</blockquote>



<a name="447557285"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238876%20Cranelift%3A%20Take%20user%20stack%20maps%20throu.../near/447557285" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238876.20Cranelift.3A.20Take.20user.20stack.20maps.20throu.2E.2E.2E.html#447557285">(Jun 27 2024 at 18:55)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8876">PR #8876</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>