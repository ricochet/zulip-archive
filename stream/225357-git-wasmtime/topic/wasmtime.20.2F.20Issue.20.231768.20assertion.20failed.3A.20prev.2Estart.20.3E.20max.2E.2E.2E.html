<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1768 assertion failed: prev.start &gt; max... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html">wasmtime / Issue #1768 assertion failed: prev.start &gt; max...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="198871842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198871842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198871842">(May 27 2020 at 10:06)</a>:</h4>
<p>roman-kashitsyn opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>This seems to be some race condition that happens quite rarely.</p>
<p>We have a large test suite that creates many instances of Wasm modules in parallel, executes one function and destroys the instances. The instances don't share any state, each time we create a new Store, a new Module and then an Instance, call the function, and destroy everything.<br>
The code of the test suite is closed for now.</p>
<p>This issue was only seen twice, so even if the test suite was openly available, it wouldn't be of much help.</p>
<p>The version of Wasmtime we use is<br>
 ```<br>
wasmtime 0.15.0 (git+https://github.com/bytecodealliance/wasmtime?rev=4fdc4349109721f3a3751fa4fedc4732ea5813f8)</p>
<div class="codehilite"><pre><span></span><code>Environment: Linux x86_64, Debug build.
~~~
</code></pre></div>


</blockquote>



<a name="198871843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198871843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198871843">(May 27 2020 at 10:06)</a>:</h4>
<p>roman-kashitsyn labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>This seems to be some race condition that happens quite rarely.</p>
<p>We have a large test suite that creates many instances of Wasm modules in parallel, executes one function and destroys the instances. The instances don't share any state, each time we create a new Store, a new Module and then an Instance, call the function, and destroy everything.<br>
The code of the test suite is closed for now.</p>
<p>This issue was only seen twice, so even if the test suite was openly available, it wouldn't be of much help.</p>
<p>The version of Wasmtime we use is<br>
 ```<br>
wasmtime 0.15.0 (git+https://github.com/bytecodealliance/wasmtime?rev=4fdc4349109721f3a3751fa4fedc4732ea5813f8)</p>
<div class="codehilite"><pre><span></span><code>Environment: Linux x86_64, Debug build.
~~~
</code></pre></div>


</blockquote>



<a name="198872082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198872082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198872082">(May 27 2020 at 10:09)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634562501">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>Do you have a backtrace or full panic message (including assertion location)?</p>
</blockquote>



<a name="198891617"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198891617" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198891617">(May 27 2020 at 13:42)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634669724">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>FWIW I saw this happens if the same module is instantiated on different threads. I encountered and fixed that at <a href="https://github.com/bytecodealliance/wasmtime/pull/1761">https://github.com/bytecodealliance/wasmtime/pull/1761</a></p>
</blockquote>



<a name="198894349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198894349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198894349">(May 27 2020 at 14:00)</a>:</h4>
<p>lostman <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634680897">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>@yurydelendik That's a very interesting looking PR. <code>SendableModule</code> looks like something that can be kept around in a cache to avoid re-JIT-ing modules. Is that correct?</p>
</blockquote>



<a name="198903567"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198903567" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198903567">(May 27 2020 at 14:56)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634718044">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<blockquote>
<p>SendableModule looks like something that can be kept around in a cache to avoid re-JIT-ing modules. Is that correct?</p>
</blockquote>
<p>Correct. Keep in mind that it is a work-in-progress though.</p>
</blockquote>



<a name="198914510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198914510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198914510">(May 27 2020 at 16:10)</a>:</h4>
<p>lostman <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634771980">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>@bjorn3 here are the backtraces from some of the failed tests:</p>
<p>This one points to the lock which gets poisoned:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/4fdc4349109721f3a3751fa4fedc4732ea5813f8/crates/api/src/frame_info.rs#L182">https://github.com/bytecodealliance/wasmtime/blob/4fdc4349109721f3a3751fa4fedc4732ea5813f8/crates/api/src/frame_info.rs#L182</a></p>
<div class="codehilite"><pre><span></span><code>[2020-05-22 14:48:51] stack backtrace:
[2020-05-22 14:48:51]    0: &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt
[2020-05-22 14:48:51]    1: core::fmt::write
[2020-05-22 14:48:51]    2: std::io::Write::write_fmt
[2020-05-22 14:48:51]    3: std::io::impls::&lt;impl std::io::Write for alloc::boxed::Box&lt;W&gt;&gt;::write_fmt
[2020-05-22 14:48:51]    4: std::panicking::default_hook::{{closure}}
[2020-05-22 14:48:51]    5: std::panicking::default_hook
[2020-05-22 14:48:51]    6: std::panicking::rust_panic_with_hook
[2020-05-22 14:48:51]    7: rust_begin_unwind
[2020-05-22 14:48:51]    8: core::panicking::panic_fmt
[2020-05-22 14:48:51]    9: core::result::unwrap_failed
[2020-05-22 14:48:51]   10: core::result::Result&lt;T,E&gt;::unwrap
[2020-05-22 14:48:51]              at /build/rustc-1.41.1-src/src/libcore/result.rs:956
[2020-05-22 14:48:51]   11: wasmtime::frame_info::register
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/frame_info.rs:182
[2020-05-22 14:48:51]   12: wasmtime::module::Module::register_frame_info
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/module.rs:494
[2020-05-22 14:48:51]   13: wasmtime::instance::Instance::new
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/instance.rs:139
</code></pre></div>


<p>And this one to the assertion:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/4fdc4349109721f3a3751fa4fedc4732ea5813f8/crates/api/src/frame_info.rs#L186">https://github.com/bytecodealliance/wasmtime/blob/4fdc4349109721f3a3751fa4fedc4732ea5813f8/crates/api/src/frame_info.rs#L186</a></p>
<div class="codehilite"><pre><span></span><code>[2020-05-22 14:48:51] stack backtrace:
[2020-05-22 14:48:51]    0: &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt
[2020-05-22 14:48:51]    1: core::fmt::write
[2020-05-22 14:48:51]    2: std::io::Write::write_fmt
[2020-05-22 14:48:51]    3: std::io::impls::&lt;impl std::io::Write for alloc::boxed::Box&lt;W&gt;&gt;::write_fmt
[2020-05-22 14:48:51]    4: std::panicking::default_hook::{{closure}}
[2020-05-22 14:48:51]    5: std::panicking::default_hook
[2020-05-22 14:48:51]    6: std::panicking::rust_panic_with_hook
[2020-05-22 14:48:51]    7: std::panicking::begin_panic
[2020-05-22 14:48:51]              at /build/rustc-1.41.1-src/src/libstd/panicking.rs:404
[2020-05-22 14:48:51]    8: wasmtime::frame_info::register
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/frame_info.rs:186
[2020-05-22 14:48:51]    9: wasmtime::module::Module::register_frame_info
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/module.rs:494
[2020-05-22 14:48:51]   10: wasmtime::instance::Instance::new
[2020-05-22 14:48:51]              at /nix/store/hc8ml9nz5f0wpl8x0qf58z3ag5narmnb-crates-io/wasmtime-wasmtime-profiling-wasmtime-cli-wasmtime-fuzz-4fdc4349109721f3a3751fa4fedc4732ea5813f8/src/instance.rs:139
</code></pre></div>


<blockquote>
<p>the same module is instantiated on different threads</p>
</blockquote>
<p>@yurydelendik How can this happen though? We don't move anything between threads. Each test does everything from scratch: create Store, Engine, Instance, Module, etc. Nothing is shared.</p>
</blockquote>



<a name="198937743"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198937743" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198937743">(May 27 2020 at 19:08)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634879028">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<blockquote>
<p>How can this happen though? We don't move anything between threads. Each test does everything from scratch: create Store, Engine, Instance, Module, etc. Nothing is shared.</p>
</blockquote>
<p>My guess, if <code>GlobalFrameInfoRegistration</code> is not dropped, e.g. <code>Module</code> (is not freed) but <code>Store</code> released its resources, and new compilation allocated <code>CodeMemory</code> in the same region -- you may see similar failure.</p>
</blockquote>



<a name="198937795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/198937795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#198937795">(May 27 2020 at 19:09)</a>:</h4>
<p>yurydelendik edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-634879028">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<blockquote>
<p>How can this happen though? We don't move anything between threads. Each test does everything from scratch: create Store, Engine, Instance, Module, etc. Nothing is shared.</p>
</blockquote>
<p>My guess, if <code>GlobalFrameInfoRegistration</code> is not dropped (e.g. <code>Module</code> is not freed) but <code>Store</code> released its resources, and new compilation allocated <code>CodeMemory</code> in the same region -- you may see similar failure.</p>
</blockquote>



<a name="199172240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/199172240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#199172240">(May 29 2020 at 15:44)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-636044071">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>I tried to reproduce this locally with some tests but wasn't able to get too too far. I think <a href="https://gist.github.com/alexcrichton/a9218ef41e9537ec92bbaede2c18a322">this diff</a> may fix the issue since I think we're dropping fields in the wrong order by accident, but I'm not sure. @lostman if you're unable to reduce this to share a test case, can you test out that patch and see if it fixes the issue for you?</p>
</blockquote>



<a name="199261300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/199261300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#199261300">(May 30 2020 at 15:14)</a>:</h4>
<p>lostman <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-636344188">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>@alexcrichton AFAIK this has only appeared twice when running our CI test suite. We've been on this version of Wasmtime since May 1st (and will update shortly).</p>
<p>We have hundreds of tests and this error isn't specific to any single one of them. There were many backtraces like the above in the log for that build.</p>
<p>Also, PR that triggered this error was only few lines long and had nothing to do with Wasmtime.</p>
<p>As such I don't think I can provide any further insight into what happened.</p>
<p>I hope the diff you linked fixes it!</p>
</blockquote>



<a name="199523113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/199523113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#199523113">(Jun 02 2020 at 17:07)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-637685476">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>Ok no worries! In that case I think it's best to defer this fix to #1761 which should land soon anyway</p>
</blockquote>



<a name="200244275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/200244275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#200244275">(Jun 09 2020 at 15:16)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-641364295">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>@roman-kashitsyn was the issue resolved by #1761 ?</p>
</blockquote>



<a name="200254298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/200254298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#200254298">(Jun 09 2020 at 16:19)</a>:</h4>
<p>lostman <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-641411012">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>@yurydelendik @roman-kashitsyn and I work together. I’m just finishing updating our code to latest Wasmtime and will be testing this tomorrow</p>
</blockquote>



<a name="200981840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/200981840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#200981840">(Jun 16 2020 at 07:42)</a>:</h4>
<p>lostman <a href="https://github.com/bytecodealliance/wasmtime/issues/1768#issuecomment-644592521">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>I think this could be closed now. I've updated to latest Wasmtime and we haven't experienced this error again. If it ever comes back we can reopen the issue.</p>
</blockquote>



<a name="201011566"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231768%20assertion%20failed%3A%20prev.start%20%3E%20max.../near/201011566" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231768.20assertion.20failed.3A.20prev.2Estart.20.3E.20max.2E.2E.2E.html#201011566">(Jun 16 2020 at 13:07)</a>:</h4>
<p>yurydelendik closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1768">Issue #1768</a>:</p>
<blockquote>
<p>This seems to be some race condition that happens quite rarely.</p>
<p>We have a large test suite that creates many instances of Wasm modules in parallel, executes one function and destroys the instances. The instances don't share any state, each time we create a new Store, a new Module and then an Instance, call the function, and destroy everything.<br>
The code of the test suite is closed for now.</p>
<p>This issue was only seen twice, so even if the test suite was openly available, it wouldn't be of much help.</p>
<p>The version of Wasmtime we use is<br>
 ```<br>
wasmtime 0.15.0 (git+https://github.com/bytecodealliance/wasmtime?rev=4fdc4349109721f3a3751fa4fedc4732ea5813f8)</p>
<div class="codehilite"><pre><span></span><code>Environment: Linux x86_64, Debug build.
~~~
</code></pre></div>


</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>