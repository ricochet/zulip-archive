<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5724 Algebraic opts: Reuse `iconst 0` from... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html">wasmtime / PR #5724 Algebraic opts: Reuse `iconst 0` from...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="326238575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326238575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326238575">(Feb 06 2023 at 21:07)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a> from <code>opts-reuse-lhs</code> to <code>main</code>:</p>
<blockquote>
<p>We don't need to spend time going through the GVN map to dedup a newly-constructed <code>iconst 0</code> when we already matched that value on the left-hand side of these rules.</p>
<p>Also, mark these rules as subsuming any others since we can't do better than reducing an expression to a constant.</p>
</blockquote>



<a name="326238577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326238577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326238577">(Feb 06 2023 at 21:07)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<a name="326247823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326247823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326247823">(Feb 06 2023 at 22:10)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5724#pullrequestreview-1286099283">PR review</a>.</p>



<a name="326247824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326247824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326247824">(Feb 06 2023 at 22:10)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/5724#discussion_r1097972957">PR review comment</a>:</p>
<blockquote>
<p>Drive-by question not related to this actual PR, is this rule necessary given <a href="https://github.com/bytecodealliance/wasmtime/blob/284fec127a3ea812deb3eabab09bffce3d7edd75/cranelift/codegen/src/opts/cprop.isle#L99-L101">this rule</a> that moves constants to the right?</p>
</blockquote>



<a name="326254516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326254516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326254516">(Feb 06 2023 at 22:57)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5724#pullrequestreview-1286146140">PR review</a>.</p>



<a name="326254517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326254517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326254517">(Feb 06 2023 at 22:57)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5724#discussion_r1098005222">PR review comment</a>:</p>
<blockquote>
<p>Great question. I believe you're right that this rule is not necessary since we have that one. I'm not going to delete it right now though while we're still thinking through how best to express rules involving commutative operators. Chris, Nick, Trevor, and I had a long chat on the subject earlier today, but we don't have a complete plan yet.</p>
</blockquote>



<a name="326476866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326476866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326476866">(Feb 07 2023 at 23:19)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5724#pullrequestreview-1288151860">PR review</a>.</p>



<a name="326477977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326477977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326477977">(Feb 07 2023 at 23:29)</a>:</h4>
<p>jameysharp has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<a name="326478465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326478465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326478465">(Feb 07 2023 at 23:33)</a>:</h4>
<p>jameysharp has disabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<a name="326478467"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326478467" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326478467">(Feb 07 2023 at 23:33)</a>:</h4>
<p>jameysharp closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<a name="326478479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326478479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326478479">(Feb 07 2023 at 23:33)</a>:</h4>
<p>jameysharp reopened <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a> from <code>opts-reuse-lhs</code> to <code>main</code>.</p>



<a name="326478637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326478637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326478637">(Feb 07 2023 at 23:34)</a>:</h4>
<p>jameysharp has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<a name="326482647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235724%20Algebraic%20opts%3A%20Reuse%20%60iconst%200%60%20from.../near/326482647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235724.20Algebraic.20opts.3A.20Reuse.20.60iconst.200.60.20from.2E.2E.2E.html#326482647">(Feb 08 2023 at 00:11)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5724">PR #5724</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>