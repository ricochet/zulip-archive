<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7536 &quot;Unknown import&quot; error when runnin... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html">wasmtime / issue #7536 &quot;Unknown import&quot; error when runnin...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="402001340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402001340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402001340">(Nov 14 2023 at 14:45)</a>:</h4>
<p>kellytk opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>$ git repo<br>
commit 321294a5d21f7006a959ba378ebd32782a76d3d2<br>
...</p>
<p>$ wasmtime --version<br>
wasmtime-cli 16.0.0</p>
<p>crates/test-programs$ cargo build --target=wasm32-wasi</p>
<p>$ wasmtime preview2_ip_name_lookup.wasm<br>
Error: failed to run main module <code>preview2_ip_name_lookup.wasm</code></p>
<p>Caused by:<br>
    0: failed to instantiate "preview2_ip_name_lookup.wasm"<br>
    1: unknown import: <code>wasi:sockets/network@0.2.0-rc-2023-11-10::[resource-drop]network</code> has not been defined</p>
<p>How can this error be resolved?</p>
</blockquote>



<a name="402002373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402002373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402002373">(Nov 14 2023 at 14:50)</a>:</h4>
<p>kellytk edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>$ git log<br>
commit 321294a5d21f7006a959ba378ebd32782a76d3d2<br>
...</p>
<p>$ wasmtime --version<br>
wasmtime-cli 16.0.0</p>
<p>crates/test-programs$ cargo build --target=wasm32-wasi</p>
<p>$ wasmtime preview2_ip_name_lookup.wasm<br>
Error: failed to run main module <code>preview2_ip_name_lookup.wasm</code></p>
<p>Caused by:<br>
    0: failed to instantiate "preview2_ip_name_lookup.wasm"<br>
    1: unknown import: <code>wasi:sockets/network@0.2.0-rc-2023-11-10::[resource-drop]network</code> has not been defined</p>
<p>How can this error be resolved?</p>
</blockquote>



<a name="402002964"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402002964" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402002964">(Nov 14 2023 at 14:52)</a>:</h4>
<p>kellytk edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>$ git log<br>
commit 321294a5d21f7006a959ba378ebd32782a76d3d2<br>
...</p>
<p>$ wasmtime --version<br>
wasmtime-cli 16.0.0</p>
<p>crates/test-programs$ cargo build --target=wasm32-wasi</p>
<p>$ wasmtime preview2_ip_name_lookup.wasm</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">preview2_ip_name_lookup</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"preview2_ip_name_lookup.wasm"</span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">unknown</span><span class="w"> </span><span class="n">import</span>: <span class="err">`</span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">network</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span>::<span class="p">[</span><span class="n">resource</span><span class="o">-</span><span class="nb">drop</span><span class="p">]</span><span class="n">network</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span>
</code></pre></div>
<p>How can this error be resolved?</p>
</blockquote>



<a name="402014427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402014427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402014427">(Nov 14 2023 at 15:48)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810496197">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Thanks for the report! I think this indicates that you're running a WebAssembly core module which was intended to become a component directly as a core module instead of a component. There is no specification for the API that you listed at this time, meaning that youre program cannot be run directly. Instead you'll need to run <code>wasm-tools component new</code> to produce a component which can then be run inside of Wasmtime.</p>
</blockquote>



<a name="402018372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402018372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402018372">(Nov 14 2023 at 16:05)</a>:</h4>
<p>kellytk <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810559410">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Thank you for such a prompt reply. The code I'm attempting to run is located at <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/preview2_ip_name_lookup.rs">https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/preview2_ip_name_lookup.rs</a>. Is the workflow for using <code>wasm-tools</code> through to running the program documented somewhere? I would think code within the <code>wasmtime</code> repo would all be easily runnable.</p>
</blockquote>



<a name="402030354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402030354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402030354">(Nov 14 2023 at 17:04)</a>:</h4>
<p>kellytk <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810705479">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>I don't know if this is what you're referring to, however <code>wasm-tools component new preview2_ip_name_lookup.wasm -o out.wasm</code> (from <a href="https://github.com/bytecodealliance/wasm-tools/tree/main/crates/wit-component#cli-usage">https://github.com/bytecodealliance/wasm-tools/tree/main/crates/wit-component#cli-usage</a>) generates:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">encode</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">module</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">module</span><span class="w"> </span><span class="n">requires</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">import</span><span class="w"> </span><span class="n">interface</span><span class="w"> </span><span class="n">named</span><span class="w"> </span><span class="err">`</span><span class="n">wasi_snapshot_preview1</span><span class="err">`</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="402036139"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402036139" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402036139">(Nov 14 2023 at 17:41)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810788733">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Unfortunately no it's not currently documented, but you'll need to pass an <code>--adapt</code> argument to the <code>wasm-tools</code> command which points to a preview1-to-preview2 adapter. Those can be found in <a href="https://github.com/bytecodealliance/wasmtime/releases/tag/v14.0.4">Wasmtime releases</a> for example</p>
</blockquote>



<a name="402038244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402038244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402038244">(Nov 14 2023 at 17:54)</a>:</h4>
<p>kellytk <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810827231">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Ok, I'll do something to improve that.</p>
<p>Is <code>wasm-tools component new preview2_ip_name_lookup.wasm -o out.wasm --adapt ~/wasi_snapshot_preview1.command.wasm</code> correct? If so, it runs with apparently no output.</p>
</blockquote>



<a name="402038446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402038446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402038446">(Nov 14 2023 at 17:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810829587">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>That should produce an <code>out.wasm</code> component file. You can inspect it with <code>wasm-tools component wit out.wasm</code> for example.</p>
</blockquote>



<a name="402040590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402040590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402040590">(Nov 14 2023 at 18:08)</a>:</h4>
<p>kellytk <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810851398">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Haha, right, pardon me.</p>
<p>$ wasm-tools component wit out.wasm</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">package</span><span class="w"> </span><span class="n">root</span>:<span class="nc">component</span><span class="p">;</span>

<span class="n">world</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">io</span><span class="o">/</span><span class="n">poll</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">clocks</span><span class="o">/</span><span class="n">monotonic</span><span class="o">-</span><span class="n">clock</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">network</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">instance</span><span class="o">-</span><span class="n">network</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">ip</span><span class="o">-</span><span class="n">name</span><span class="o">-</span><span class="n">lookup</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">io</span><span class="o">/</span><span class="n">streams</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">filesystem</span><span class="o">/</span><span class="n">types</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">filesystem</span><span class="o">/</span><span class="n">preopens</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">tcp</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">environment</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">exit</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">stdin</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">stdout</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">stderr</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">terminal</span><span class="o">-</span><span class="n">input</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">terminal</span><span class="o">-</span><span class="n">output</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">terminal</span><span class="o">-</span><span class="n">stdin</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">terminal</span><span class="o">-</span><span class="n">stdout</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="w">  </span><span class="n">import</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">terminal</span><span class="o">-</span><span class="n">stderr</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>

<span class="w">  </span><span class="n">export</span><span class="w"> </span><span class="n">wasi</span>:<span class="nc">cli</span><span class="o">/</span><span class="n">run</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>$ wasmtime out.wasm</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">cannot</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="err">`</span><span class="o">--</span><span class="n">wasm</span><span class="w"> </span><span class="n">component</span><span class="o">-</span><span class="n">model</span><span class="err">`</span>
</code></pre></div>
<p>$ wasmtime --wasm component-model out.wasm</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">out</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">import</span><span class="w"> </span><span class="err">`</span><span class="n">wasi</span>:<span class="nc">io</span><span class="o">/</span><span class="n">streams</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">18</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wrong</span><span class="w"> </span><span class="k">type</span>
    <span class="mi">1</span>: <span class="nc">instance</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="err">`</span><span class="n">output</span><span class="o">-</span><span class="n">stream</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">wrong</span><span class="w"> </span><span class="k">type</span>
    <span class="mi">2</span>: <span class="nc">expected</span><span class="w"> </span><span class="n">resource</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">nothing</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="402045063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402045063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402045063">(Nov 14 2023 at 18:36)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810910803">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>If you are using wasmtime-cli from source, it has a newer version of those interfaces than the ones you have built with that adapter, so make sure you use a wasmtime-cli from the same release as the adapter, or build the adapter from source.</p>
<p>These problems will go away once we ship preview 2 and have stable versions across wasmtime releases, we are almost there.</p>
</blockquote>



<a name="402045119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402045119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402045119">(Nov 14 2023 at 18:36)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810910803">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>If you are using wasmtime-cli from source, it has a newer version of those interfaces than the ones you have built with that adapter, so make sure you use a wasmtime-cli from the same release as the adapter, or build the adapter from source.</p>
<p>These problems will go away once we ship preview 2 and have stable interface versions across wasmtime releases, we are almost there.</p>
</blockquote>



<a name="402046628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402046628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402046628">(Nov 14 2023 at 18:44)</a>:</h4>
<p>kellytk <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810931173">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>Thank you both for enduring the overhead while the ecosystem is so green.</p>
<p>Is the process for building adapters from source documented? I have the wasmtime repo cloned and have built wasmtime from it.</p>
<blockquote>
<p>These problems will go away once we ship preview 2 and have stable interface versions across wasmtime releases, we are almost there.</p>
</blockquote>
<p>Is an up-to-date schedule for such milestones published?</p>
</blockquote>



<a name="402048011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402048011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402048011">(Nov 14 2023 at 18:52)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810953825">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>We're working on getting all these things documented but one thing I'll point out is that when everything is in flux there's not always great documentation. I'd recommend reading a bit into how things work in this repository while we're working on stabilizing everything. The source-of-truth for example about building the adapter is our GitHub Actions configuration which would point you to <a href="https://github.com/bytecodealliance/wasmtime/blob/main/ci/build-wasi-preview1-component-adapter.sh">this script</a>.</p>
<p>Additionally for schedules and milestones and such we do not have a concrete set of documentation to point you towards at this time. Much of this depends on the stabilization of WASI itself which is moving through the standards process. It's intended that by the end of the year WASI has stabilized.</p>
</blockquote>



<a name="402048120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402048120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402048120">(Nov 14 2023 at 18:53)</a>:</h4>
<p>alexcrichton edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7536#issuecomment-1810953825">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>We're working on getting all these things documented but one thing I'll point out is that when everything is in flux there's not always great documentation. I'd recommend reading a bit into how things work in this repository while we're working on stabilizing everything. The source-of-truth for example about building the adapter is our GitHub Actions configuration which would point you to <a href="https://github.com/bytecodealliance/wasmtime/blob/main/ci/build-wasi-preview1-component-adapter.sh">this script</a>.</p>
<p>Additionally for schedules and milestones and such we do not have a concrete set of documentation to point you towards at this time. Much of this depends on the stabilization of WASI itself which is moving through the standards process. It's intended that by the end of the year WASI has a more stable 0.2.0 release.</p>
</blockquote>



<a name="402049344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237536%20%22Unknown%20import%22%20error%20when%20runnin.../near/402049344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237536.20.22Unknown.20import.22.20error.20when.20runnin.2E.2E.2E.html#402049344">(Nov 14 2023 at 18:58)</a>:</h4>
<p>kellytk closed <a href="https://github.com/bytecodealliance/wasmtime/issues/7536">issue #7536</a>:</p>
<blockquote>
<p>$ git log<br>
commit 321294a5d21f7006a959ba378ebd32782a76d3d2<br>
...</p>
<p>$ wasmtime --version<br>
wasmtime-cli 16.0.0</p>
<p>crates/test-programs$ cargo build --target=wasm32-wasi</p>
<p>$ wasmtime preview2_ip_name_lookup.wasm</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">preview2_ip_name_lookup</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"preview2_ip_name_lookup.wasm"</span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">unknown</span><span class="w"> </span><span class="n">import</span>: <span class="err">`</span><span class="n">wasi</span>:<span class="nc">sockets</span><span class="o">/</span><span class="n">network</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">rc</span><span class="o">-</span><span class="mi">2023</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">10</span>::<span class="p">[</span><span class="n">resource</span><span class="o">-</span><span class="nb">drop</span><span class="p">]</span><span class="n">network</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span>
</code></pre></div>
<p>How can this error be resolved?</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>