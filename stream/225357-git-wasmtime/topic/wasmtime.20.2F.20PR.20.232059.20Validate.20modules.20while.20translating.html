<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2059 Validate modules while translating · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html">wasmtime / PR #2059 Validate modules while translating</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="204611388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204611388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204611388">(Jul 21 2020 at 22:44)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasmparser/issues/62">bytecodealliance/wasmparser#62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204611497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204611497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204611497">(Jul 21 2020 at 22:45)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasmparser/issues/62">bytecodealliance/wasmparser#62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204640014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204640014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204640014">(Jul 22 2020 at 08:14)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-453086214">PR Review</a>.</p>



<a name="204640015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204640015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204640015">(Jul 22 2020 at 08:14)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-453086214">PR Review</a>.</p>



<a name="204640016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204640016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204640016">(Jul 22 2020 at 08:14)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#discussion_r458610379">PR Review Comment</a>:</p>
<blockquote>
<p>(Probably a dumb question, but just a sanity check) Does the validator keep internal state to remember which sections it has seen? This might have an impact since sections are supposed to appear in a certain order.</p>
</blockquote>



<a name="204668350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204668350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204668350">(Jul 22 2020 at 13:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-453341551">PR Review</a>.</p>



<a name="204668351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204668351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204668351">(Jul 22 2020 at 13:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#discussion_r458810640">PR Review Comment</a>:</p>
<blockquote>
<p>It does indeed! </p>
</blockquote>



<a name="204673017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204673017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204673017">(Jul 22 2020 at 14:29)</a>:</h4>
<p>alexcrichton edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204677760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204677760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204677760">(Jul 22 2020 at 15:03)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204679684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204679684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204679684">(Jul 22 2020 at 15:16)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204688759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204688759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204688759">(Jul 22 2020 at 16:23)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204688789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204688789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204688789">(Jul 22 2020 at 16:24)</a>:</h4>
<p><strong>alexcrichton</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> as ready for review.</p>



<a name="204688899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204688899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204688899">(Jul 22 2020 at 16:24)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204705440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204705440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204705440">(Jul 22 2020 at 18:38)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-453584675">PR Review</a>.</p>



<a name="204728601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204728601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204728601">(Jul 22 2020 at 22:11)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204825571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204825571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204825571">(Jul 23 2020 at 17:10)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#discussion_r459601116">PR Review Comment</a>:</p>
<blockquote>
<p>One early comment (before i try this tomorrow): can you please expose <code>wasmparser::FuncValidator</code> publicly, so that embedders aren't required to add <code>wasmparser</code> to their own dependencies?</p>
</blockquote>



<a name="204825573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204825573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204825573">(Jul 23 2020 at 17:10)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-454334730">PR Review</a>.</p>



<a name="204825613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204825613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204825613">(Jul 23 2020 at 17:10)</a>:</h4>
<p>bnjbvr edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#discussion_r459601116">PR Review Comment</a>.</p>



<a name="204828659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204828659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204828659">(Jul 23 2020 at 17:39)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="204828753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204828753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204828753">(Jul 23 2020 at 17:40)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#pullrequestreview-454357004">PR Review</a>.</p>



<a name="204828755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204828755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204828755">(Jul 23 2020 at 17:40)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2059#discussion_r459618645">PR Review Comment</a>:</p>
<blockquote>
<p>Sure thing! I've pushed up a comment which reexports <code>wasmparser</code> as a crate since there's a number of types/etc you'll likely want to pull from there.</p>
</blockquote>



<a name="204829776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/204829776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#204829776">(Jul 23 2020 at 17:48)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="205605449"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/205605449" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#205605449">(Jul 31 2020 at 15:33)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="205829170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/205829170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#205829170">(Aug 03 2020 at 18:23)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="205837365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/205837365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#205837365">(Aug 03 2020 at 19:32)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="205837773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/205837773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#205837773">(Aug 03 2020 at 19:35)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="205938264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/205938264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#205938264">(Aug 04 2020 at 17:54)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="208132824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/208132824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#208132824">(Aug 26 2020 at 18:56)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="208180185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/208180185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#208180185">(Aug 27 2020 at 05:47)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="208454016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/208454016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#208454016">(Aug 29 2020 at 21:06)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="210210708"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/210210708" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#210210708">(Sep 16 2020 at 00:50)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="211811594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/211811594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#211811594">(Sep 30 2020 at 19:55)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="211828420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/211828420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#211828420">(Sep 30 2020 at 21:17)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a> from <code>late-validate</code> to <code>main</code>:</p>
<blockquote>
<p>This commit is a change to cranelift-wasm to validate each function body<br>
as it is translated. Additionally top-level module translation functions<br>
will perform module validation. This commit builds on changes in<br>
wasmparser to perform module validation interwtwined with parsing and<br>
translation. This will be necessary for future wasm features such as<br>
module linking where the type behind a function index, for example, can<br>
be far away in another module. Additionally this also brings a nice<br>
benefit where parsing the binary only happens once (instead of having an<br>
up-front serial validation step) and validation can happen in parallel<br>
for each function.</p>
<p>Most of the changes in this commit are plumbing to make sure everything<br>
lines up right. The major functional change here is that module<br>
compilation should be faster by validating in parallel (or skipping<br>
function validation entirely in the case of a cache hit). Otherwise from<br>
a user-facing perspective nothing should be that different.</p>
<p>This commit does mean that cranelift's translation now inherently<br>
validates the input wasm module. This means that the Spidermonkey<br>
integration of cranelift-wasm will also be validating the function as<br>
it's being translated with cranelift. The associated PR for wasmparser<br>
(<a href="https://github.com/bytecodealliance/wasm-tools/pull/62">https://github.com/bytecodealliance/wasm-tools/pull/62</a>) provides the necessary tools to create<br>
a <code>FuncValidator</code> for Gecko, but this is something I'll want careful<br>
review for before landing!</p>
</blockquote>



<a name="212320463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232059%20Validate%20modules%20while%20translating/near/212320463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232059.20Validate.20modules.20while.20translating.html#212320463">(Oct 05 2020 at 16:02)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2059">PR #2059</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>