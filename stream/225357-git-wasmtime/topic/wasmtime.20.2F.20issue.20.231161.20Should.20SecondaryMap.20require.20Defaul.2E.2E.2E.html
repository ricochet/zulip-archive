<html>
<head><meta charset="utf-8"><title>wasmtime / issue #1161 Should SecondaryMap require Defaul... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231161.20Should.20SecondaryMap.20require.20Defaul.2E.2E.2E.html">wasmtime / issue #1161 Should SecondaryMap require Defaul...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="281232782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231161%20Should%20SecondaryMap%20require%20Defaul.../near/281232782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231161.20Should.20SecondaryMap.20require.20Defaul.2E.2E.2E.html#281232782">(May 04 2022 at 23:07)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/1161#issuecomment-1118013304">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1161">issue #1161</a>:</p>
<blockquote>
<p>Doing some issue gardening: I think that this is probably worth closing (thanks Ben for exploring it though!) as it doesn't seem like the refactor complexity is worth it, and as noted above the stored default value is still required to keep the indexing API (return value by ref) the same, so there is no memory-size benefit.</p>
</blockquote>



<a name="281232783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231161%20Should%20SecondaryMap%20require%20Defaul.../near/281232783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231161.20Should.20SecondaryMap.20require.20Defaul.2E.2E.2E.html#281232783">(May 04 2022 at 23:07)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1161">issue #1161</a>:</p>
<blockquote>
<p>SecondaryMap requires its value to be Clone-able, and the only constructor requires the given default value to implement Default. This implies each SecondaryMap stores the default value, while we could just require Default and use <code>Default::default()</code> everywhere we use <code>self.default.clone()</code>. It would also allow using SecondaryMaps for things that implement Default but aren't Clone-able (I've got such a use case in a WIP PR).</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>