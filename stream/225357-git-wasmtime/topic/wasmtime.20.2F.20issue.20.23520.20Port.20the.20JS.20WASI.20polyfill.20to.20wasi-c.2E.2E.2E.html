<html>
<head><meta charset="utf-8"><title>wasmtime / issue #520 Port the JS WASI polyfill to wasi-c... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.23520.20Port.20the.20JS.20WASI.20polyfill.20to.20wasi-c.2E.2E.2E.html">wasmtime / issue #520 Port the JS WASI polyfill to wasi-c...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="355594590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%23520%20Port%20the%20JS%20WASI%20polyfill%20to%20wasi-c.../near/355594590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.23520.20Port.20the.20JS.20WASI.20polyfill.20to.20wasi-c.2E.2E.2E.html#355594590">(May 03 2023 at 19:49)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/520#issuecomment-1533642438">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/520">issue #520</a>:</p>
<blockquote>
<p>Closing this old issue, as the JS polyfill referenced here is no longer in use.</p>
</blockquote>



<a name="355594592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%23520%20Port%20the%20JS%20WASI%20polyfill%20to%20wasi-c.../near/355594592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.23520.20Port.20the.20JS.20WASI.20polyfill.20to.20wasi-c.2E.2E.2E.html#355594592">(May 03 2023 at 19:49)</a>:</h4>
<p>sunfishcode closed <a href="https://github.com/bytecodealliance/wasmtime/issues/520">issue #520</a>:</p>
<blockquote>
<p>Wasmtime has a JS polyfill implementation of WASI:</p>
<p><a href="https://github.com/CraneStation/wasmtime/tree/polyfill/wasmtime-wasi/js-polyfill">https://github.com/CraneStation/wasmtime/tree/polyfill/wasmtime-wasi/js-polyfill</a></p>
<p>which works by compiling wasmtime's C implementation of WASI with Emscripten, and then adding a bit of support code on top of that.</p>
<p>We should port the support code to work on top of wasi-common, compiled with wasm32-unknown-emscripten. In theory, all the big pieces are in place -- wasi-common provides the same functionality as Wasmtime's C implementation of WASI, Emscripten can provide the same underlying support in both cases, and the support code should roughly be the same. So the work here is in rewiring everything up in <a href="https://github.com/CraneStation/wasmtime/blob/polyfill/wasmtime-wasi/js-polyfill/wasi.js">wasi.js</a>, and porting <a href="https://github.com/CraneStation/wasmtime/blob/polyfill/wasmtime-wasi/js-polyfill/polyfill.c">polyfill.c</a> to Rust, probably splitting out that <code>EM_ASM</code> into a standalone JS file.</p>
<p>I've marked this "help wanted" -- if someone's interested in doing this port, that'd be great (and I can help mentor), but it'd even help just to have more ideas for packaging, binding, or other ways we could make the polyfill better. The current support code and <a href="https://github.com/CraneStation/wasmtime/blob/polyfill/wasmtime-wasi/js-polyfill/shell.html">shell.html</a> is super minimal.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>