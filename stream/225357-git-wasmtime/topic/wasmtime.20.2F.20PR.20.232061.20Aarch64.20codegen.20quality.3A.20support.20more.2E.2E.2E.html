<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2061 Aarch64 codegen quality: support more... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html">wasmtime / PR #2061 Aarch64 codegen quality: support more...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="204632608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204632608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204632608">(Jul 22 2020 at 05:54)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a> from <code>aarch64-amode</code> to <code>main</code>:</p>
<blockquote>
<p>Previously, our pattern-matching for generating load/store addresses was<br>
somewhat limited. For example, it could not use a register-extend<br>
address mode to handle the following CLIF:</p>
<div class="codehilite"><pre><span></span><code>   v2760 = uextend.i64 v985
   v2761 = load.i64 notrap aligned readonly v1
   v1018 = iadd v2761, v2760
   store v1017, v1018
</code></pre></div>


<p>This PR adds more general support for address expressions made up of<br>
additions and extensions. In particular, it pattern-matches a tree of<br>
64-bit <code>iadd</code>s, optionally with <code>uextend</code>/<code>sextend</code> from 32-bit values<br>
at the leaves, to collect the list of all addends that form the address.<br>
It also collects all offsets at leaves, combining them.<br>
It applies a series of heuristics to make the best use of the<br>
available addressing modes, filling the load/store itself with as many<br>
64-bit registers, zero/sign-extended 32-bit registers, and/or an offset,<br>
then computing the rest with add instructions as necessary. It attempts<br>
to make use of immediate forms (add-immediate or subtract-immediate)<br>
whenever possible, and also uses the built-in extend operators on add<br>
instructions when possible. There are certainly cases where this is not<br>
optimal (i.e., does not generate the strictly shortest sequence of<br>
instructions), but it should be good enough for most code.</p>
<p>Using <code>perf stat</code> to measure instruction count (runtime only, on<br>
wasmtime, after populating the cache to avoid measuring compilation),<br>
this impacts <code>bz2</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>pre:

       1006.410425      task-clock (msec)         #    1.000 CPUs utilized
               113      context-switches          #    0.112 K/sec
                 1      cpu-migrations            #    0.001 K/sec
             5,036      page-faults               #    0.005 M/sec
     3,221,547,476      cycles                    #    3.201 GHz
     4,000,670,104      instructions              #    1.24  insn per cycle
   &lt;not supported&gt;      branches
        27,958,613      branch-misses

       1.006071348 seconds time elapsed

post:

        963.499525      task-clock (msec)         #    0.997 CPUs utilized
               117      context-switches          #    0.121 K/sec
                 0      cpu-migrations            #    0.000 K/sec
             5,081      page-faults               #    0.005 M/sec
     3,039,687,673      cycles                    #    3.155 GHz
     3,837,761,690      instructions              #    1.26  insn per cycle
   &lt;not supported&gt;      branches
        28,254,585      branch-misses

       0.966072682 seconds time elapsed
</code></pre></div>


<p>In other words, this reduces instruction count by 4.1% on <code>bz2</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="204632609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204632609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204632609">(Jul 22 2020 at 05:54)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/bnjbvr">bnjbvr</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a>.</p>



<a name="204632610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204632610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204632610">(Jul 22 2020 at 05:54)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/bnjbvr">bnjbvr</a> and <a href="https://github.com/julian-seward1">julian-seward1</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a>.</p>



<a name="204632621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204632621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204632621">(Jul 22 2020 at 05:54)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a> from <code>aarch64-amode</code> to <code>main</code>:</p>
<blockquote>
<p>Previously, our pattern-matching for generating load/store addresses was<br>
somewhat limited. For example, it could not use a register-extend<br>
address mode to handle the following CLIF:</p>
<div class="codehilite"><pre><span></span><code>   v2760 = uextend.i64 v985
   v2761 = load.i64 notrap aligned readonly v1
   v1018 = iadd v2761, v2760
   store v1017, v1018
</code></pre></div>


<p>This PR adds more general support for address expressions made up of<br>
additions and extensions. In particular, it pattern-matches a tree of<br>
64-bit <code>iadd</code>s, optionally with <code>uextend</code>/<code>sextend</code> from 32-bit values<br>
at the leaves, to collect the list of all addends that form the address.<br>
It also collects all offsets at leaves, combining them.<br>
It applies a series of heuristics to make the best use of the<br>
available addressing modes, filling the load/store itself with as many<br>
64-bit registers, zero/sign-extended 32-bit registers, and/or an offset,<br>
then computing the rest with add instructions as necessary. It attempts<br>
to make use of immediate forms (add-immediate or subtract-immediate)<br>
whenever possible, and also uses the built-in extend operators on add<br>
instructions when possible. There are certainly cases where this is not<br>
optimal (i.e., does not generate the strictly shortest sequence of<br>
instructions), but it should be good enough for most code.</p>
<p>Using <code>perf stat</code> to measure instruction count (runtime only, on<br>
wasmtime, after populating the cache to avoid measuring compilation),<br>
this impacts <code>bz2</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>pre:

       1006.410425      task-clock (msec)         #    1.000 CPUs utilized
               113      context-switches          #    0.112 K/sec
                 1      cpu-migrations            #    0.001 K/sec
             5,036      page-faults               #    0.005 M/sec
     3,221,547,476      cycles                    #    3.201 GHz
     4,000,670,104      instructions              #    1.24  insn per cycle
   &lt;not supported&gt;      branches
        27,958,613      branch-misses

       1.006071348 seconds time elapsed

post:

        963.499525      task-clock (msec)         #    0.997 CPUs utilized
               117      context-switches          #    0.121 K/sec
                 0      cpu-migrations            #    0.000 K/sec
             5,081      page-faults               #    0.005 M/sec
     3,039,687,673      cycles                    #    3.155 GHz
     3,837,761,690      instructions              #    1.26  insn per cycle
   &lt;not supported&gt;      branches
        28,254,585      branch-misses

       0.966072682 seconds time elapsed
</code></pre></div>


<p>In other words, this reduces instruction count by 4.1% on <code>bz2</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="204632651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204632651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204632651">(Jul 22 2020 at 05:55)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a> from <code>aarch64-amode</code> to <code>main</code>:</p>
<blockquote>
<p>Previously, our pattern-matching for generating load/store addresses was<br>
somewhat limited. For example, it could not use a register-extend<br>
address mode to handle the following CLIF:</p>
<div class="codehilite"><pre><span></span><code>   v2760 = uextend.i64 v985
   v2761 = load.i64 notrap aligned readonly v1
   v1018 = iadd v2761, v2760
   store v1017, v1018
</code></pre></div>


<p>This PR adds more general support for address expressions made up of<br>
additions and extensions. In particular, it pattern-matches a tree of<br>
64-bit <code>iadd</code>s, optionally with <code>uextend</code>/<code>sextend</code> from 32-bit values<br>
at the leaves, to collect the list of all addends that form the address.<br>
It also collects all offsets at leaves, combining them.<br>
It applies a series of heuristics to make the best use of the<br>
available addressing modes, filling the load/store itself with as many<br>
64-bit registers, zero/sign-extended 32-bit registers, and/or an offset,<br>
then computing the rest with add instructions as necessary. It attempts<br>
to make use of immediate forms (add-immediate or subtract-immediate)<br>
whenever possible, and also uses the built-in extend operators on add<br>
instructions when possible. There are certainly cases where this is not<br>
optimal (i.e., does not generate the strictly shortest sequence of<br>
instructions), but it should be good enough for most code.</p>
<p>Using <code>perf stat</code> to measure instruction count (runtime only, on<br>
wasmtime, after populating the cache to avoid measuring compilation),<br>
this impacts <code>bz2</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>pre:

       1006.410425      task-clock (msec)         #    1.000 CPUs utilized
               113      context-switches          #    0.112 K/sec
                 1      cpu-migrations            #    0.001 K/sec
             5,036      page-faults               #    0.005 M/sec
     3,221,547,476      cycles                    #    3.201 GHz
     4,000,670,104      instructions              #    1.24  insn per cycle
   &lt;not supported&gt;      branches
        27,958,613      branch-misses

       1.006071348 seconds time elapsed

post:

        963.499525      task-clock (msec)         #    0.997 CPUs utilized
               117      context-switches          #    0.121 K/sec
                 0      cpu-migrations            #    0.000 K/sec
             5,081      page-faults               #    0.005 M/sec
     3,039,687,673      cycles                    #    3.155 GHz
     3,837,761,690      instructions              #    1.26  insn per cycle
   &lt;not supported&gt;      branches
        28,254,585      branch-misses

       0.966072682 seconds time elapsed
</code></pre></div>


<p>In other words, this reduces instruction count by 4.1% on <code>bz2</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="204923221"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204923221" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204923221">(Jul 24 2020 at 14:36)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-454939904">PR Review</a>.</p>



<a name="204923222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204923222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204923222">(Jul 24 2020 at 14:36)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460093294">PR Review Comment</a>:</p>
<blockquote>
<p>Yes.  That sounds reasonable.</p>
</blockquote>



<a name="204923848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204923848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204923848">(Jul 24 2020 at 14:41)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-454943859">PR Review</a>.</p>



<a name="204923850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204923850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204923850">(Jul 24 2020 at 14:41)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460096275">PR Review Comment</a>:</p>
<blockquote>
<p>Can this case, <code>addends64.len() == 0 &amp;&amp; &lt;whatever&gt;</code> actually happen?  Wouldn't it imply that whatever created this code knew that it would run in an environment where the max virtual address is 2^32 or some small multiple thereof ?<br>
I guess that's implausible for the general 64-bit target case, but it's not <em>per se</em> invalid.</p>
</blockquote>



<a name="204924017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204924017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204924017">(Jul 24 2020 at 14:42)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-454944644">PR Review</a>.</p>



<a name="204924018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204924018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204924018">(Jul 24 2020 at 14:42)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460096859">PR Review Comment</a>:</p>
<blockquote>
<p>And again here -- even more so.  The VA is formed only from an immediate ?<br>
Again, I guess that's OK.  But -- at least -- do we have tests for this?</p>
</blockquote>



<a name="204924123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204924123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204924123">(Jul 24 2020 at 14:43)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-454945221">PR Review</a>.</p>



<a name="204924124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204924124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204924124">(Jul 24 2020 at 14:43)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460097278">PR Review Comment</a>:</p>
<blockquote>
<p>wrapping neg needed here?</p>
</blockquote>



<a name="204949439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204949439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204949439">(Jul 24 2020 at 18:18)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455093789">PR Review</a>.</p>



<a name="204953441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204953441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204953441">(Jul 24 2020 at 18:55)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a> from <code>aarch64-amode</code> to <code>main</code>:</p>
<blockquote>
<p>Previously, our pattern-matching for generating load/store addresses was<br>
somewhat limited. For example, it could not use a register-extend<br>
address mode to handle the following CLIF:</p>
<div class="codehilite"><pre><span></span><code>   v2760 = uextend.i64 v985
   v2761 = load.i64 notrap aligned readonly v1
   v1018 = iadd v2761, v2760
   store v1017, v1018
</code></pre></div>


<p>This PR adds more general support for address expressions made up of<br>
additions and extensions. In particular, it pattern-matches a tree of<br>
64-bit <code>iadd</code>s, optionally with <code>uextend</code>/<code>sextend</code> from 32-bit values<br>
at the leaves, to collect the list of all addends that form the address.<br>
It also collects all offsets at leaves, combining them.<br>
It applies a series of heuristics to make the best use of the<br>
available addressing modes, filling the load/store itself with as many<br>
64-bit registers, zero/sign-extended 32-bit registers, and/or an offset,<br>
then computing the rest with add instructions as necessary. It attempts<br>
to make use of immediate forms (add-immediate or subtract-immediate)<br>
whenever possible, and also uses the built-in extend operators on add<br>
instructions when possible. There are certainly cases where this is not<br>
optimal (i.e., does not generate the strictly shortest sequence of<br>
instructions), but it should be good enough for most code.</p>
<p>Using <code>perf stat</code> to measure instruction count (runtime only, on<br>
wasmtime, after populating the cache to avoid measuring compilation),<br>
this impacts <code>bz2</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>pre:

       1006.410425      task-clock (msec)         #    1.000 CPUs utilized
               113      context-switches          #    0.112 K/sec
                 1      cpu-migrations            #    0.001 K/sec
             5,036      page-faults               #    0.005 M/sec
     3,221,547,476      cycles                    #    3.201 GHz
     4,000,670,104      instructions              #    1.24  insn per cycle
   &lt;not supported&gt;      branches
        27,958,613      branch-misses

       1.006071348 seconds time elapsed

post:

        963.499525      task-clock (msec)         #    0.997 CPUs utilized
               117      context-switches          #    0.121 K/sec
                 0      cpu-migrations            #    0.000 K/sec
             5,081      page-faults               #    0.005 M/sec
     3,039,687,673      cycles                    #    3.155 GHz
     3,837,761,690      instructions              #    1.26  insn per cycle
   &lt;not supported&gt;      branches
        28,254,585      branch-misses

       0.966072682 seconds time elapsed
</code></pre></div>


<p>In other words, this reduces instruction count by 4.1% on <code>bz2</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="204953495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204953495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204953495">(Jul 24 2020 at 18:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455115797">PR Review</a>.</p>



<a name="204953496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204953496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204953496">(Jul 24 2020 at 18:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460232476">PR Review Comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="204954452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204954452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204954452">(Jul 24 2020 at 19:04)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455120741">PR Review</a>.</p>



<a name="204954454"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204954454" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204954454">(Jul 24 2020 at 19:04)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460236322">PR Review Comment</a>:</p>
<blockquote>
<p>Yup, there's a test (<code>f10</code> in <code>amodes.clif</code>). It's conceivable that at least in a JIT scenario, one might want to bake an address into the compiled code (e.g., access a global flag somewhere). In any case, it's valid CLIF, so we should support it, I think.</p>
</blockquote>



<a name="204954694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204954694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204954694">(Jul 24 2020 at 19:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455121739">PR Review</a>.</p>



<a name="204954695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204954695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204954695">(Jul 24 2020 at 19:06)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460237110">PR Review Comment</a>:</p>
<blockquote>
<p>Indeed, it's valid CLIF, so we need to either handle it here, or else define it as invalid and punt this problem to the CLIF verifier. It's conceivable that (as you say) the implementer might know better and use 32-bit pointers, so I don't think we can rule it out.</p>
<p>(I actually asserted that this case did not happen at first, but caught myself with a test-case I had previously written that used only a zero-extended 32-bit value as an address... so if nothing else, at least mischevous unit-test authors are known to do this.)</p>
</blockquote>



<a name="204993233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/204993233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#204993233">(Jul 25 2020 at 07:49)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455269358">PR Review</a>.</p>



<a name="205116901"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116901" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116901">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455766566">PR Review</a>.</p>



<a name="205116902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116902">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-455766566">PR Review</a>.</p>



<a name="205116903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116903">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460879548">PR Review Comment</a>:</p>
<blockquote>
<p>nit: <code>while let Some(input) = workqueue.pop()</code></p>
</blockquote>



<a name="205116904"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116904" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116904">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460881386">PR Review Comment</a>:</p>
<blockquote>
<p>nit: i thought this was a bug at first, because only the 4 opcodes mentioned here should be caught, and then saw the extra condition on Uextend/Sextend. Instead, would it make sense to split this match into two:</p>
<ul>
<li>one for Uextend and Sextend that don't match the condition, so just <code>Opcode::Uextend | Opcode::Sextend</code> after the first arm</li>
<li>one <code>_ =&gt; panic!("unexpected opcode")</code></li>
</ul>
</blockquote>



<a name="205116905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116905">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460881890">PR Review Comment</a>:</p>
<blockquote>
<p>Fyi, the comment line size is 99 chars, so the previous wrapping seemed somewhat correct.</p>
</blockquote>



<a name="205116906"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116906" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116906">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460882162">PR Review Comment</a>:</p>
<blockquote>
<p>maybe trace?</p>
</blockquote>



<a name="205116907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205116907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205116907">(Jul 27 2020 at 13:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r460890368">PR Review Comment</a>:</p>
<blockquote>
<p>From just skimming this code, it's hard to believe that this last branch is hit when <code>addends64.len() &gt; 0</code>. Could the whole series be reorganized as <code>if addends64.len() &gt; 0 { /* subchecks, etc. */ } else /*other subchecks*/{}</code>?</p>
</blockquote>



<a name="205162612"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162612" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162612">(Jul 27 2020 at 20:10)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a> from <code>aarch64-amode</code> to <code>main</code>:</p>
<blockquote>
<p>Previously, our pattern-matching for generating load/store addresses was<br>
somewhat limited. For example, it could not use a register-extend<br>
address mode to handle the following CLIF:</p>
<div class="codehilite"><pre><span></span><code>   v2760 = uextend.i64 v985
   v2761 = load.i64 notrap aligned readonly v1
   v1018 = iadd v2761, v2760
   store v1017, v1018
</code></pre></div>


<p>This PR adds more general support for address expressions made up of<br>
additions and extensions. In particular, it pattern-matches a tree of<br>
64-bit <code>iadd</code>s, optionally with <code>uextend</code>/<code>sextend</code> from 32-bit values<br>
at the leaves, to collect the list of all addends that form the address.<br>
It also collects all offsets at leaves, combining them.<br>
It applies a series of heuristics to make the best use of the<br>
available addressing modes, filling the load/store itself with as many<br>
64-bit registers, zero/sign-extended 32-bit registers, and/or an offset,<br>
then computing the rest with add instructions as necessary. It attempts<br>
to make use of immediate forms (add-immediate or subtract-immediate)<br>
whenever possible, and also uses the built-in extend operators on add<br>
instructions when possible. There are certainly cases where this is not<br>
optimal (i.e., does not generate the strictly shortest sequence of<br>
instructions), but it should be good enough for most code.</p>
<p>Using <code>perf stat</code> to measure instruction count (runtime only, on<br>
wasmtime, after populating the cache to avoid measuring compilation),<br>
this impacts <code>bz2</code> as follows:</p>
<div class="codehilite"><pre><span></span><code>pre:

       1006.410425      task-clock (msec)         #    1.000 CPUs utilized
               113      context-switches          #    0.112 K/sec
                 1      cpu-migrations            #    0.001 K/sec
             5,036      page-faults               #    0.005 M/sec
     3,221,547,476      cycles                    #    3.201 GHz
     4,000,670,104      instructions              #    1.24  insn per cycle
   &lt;not supported&gt;      branches
        27,958,613      branch-misses

       1.006071348 seconds time elapsed

post:

        963.499525      task-clock (msec)         #    0.997 CPUs utilized
               117      context-switches          #    0.121 K/sec
                 0      cpu-migrations            #    0.000 K/sec
             5,081      page-faults               #    0.005 M/sec
     3,039,687,673      cycles                    #    3.155 GHz
     3,837,761,690      instructions              #    1.26  insn per cycle
   &lt;not supported&gt;      branches
        28,254,585      branch-misses

       0.966072682 seconds time elapsed
</code></pre></div>


<p>In other words, this reduces instruction count by 4.1% on <code>bz2</code>.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="205162666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162666">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-456099547">PR Review</a>.</p>



<a name="205162668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162668">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r461141118">PR Review Comment</a>:</p>
<blockquote>
<p>Ah, I had my editor set to 80 characters and probably just rewrapped this while nearby. Undid change, thanks.</p>
</blockquote>



<a name="205162679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162679">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-456099635">PR Review</a>.</p>



<a name="205162680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162680">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r461141179">PR Review Comment</a>:</p>
<blockquote>
<p>Good idea, thanks!</p>
</blockquote>



<a name="205162696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162696">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-456099717">PR Review</a>.</p>



<a name="205162697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162697">(Jul 27 2020 at 20:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r461141268">PR Review Comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="205162764"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162764" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162764">(Jul 27 2020 at 20:12)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-456099920">PR Review</a>.</p>



<a name="205162765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162765">(Jul 27 2020 at 20:12)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r461141417">PR Review Comment</a>:</p>
<blockquote>
<p>Ah yes, it's much cleaner with that split -- thanks!</p>
</blockquote>



<a name="205162780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162780">(Jul 27 2020 at 20:12)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#pullrequestreview-456099997">PR Review</a>.</p>



<a name="205162781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205162781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205162781">(Jul 27 2020 at 20:12)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2061#discussion_r461141482">PR Review Comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="205166553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232061%20Aarch64%20codegen%20quality%3A%20support%20more.../near/205166553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232061.20Aarch64.20codegen.20quality.3A.20support.20more.2E.2E.2E.html#205166553">(Jul 27 2020 at 20:48)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2061">PR #2061</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>