<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9081 large enums slow down compilation · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html">wasmtime / issue #9081 large enums slow down compilation</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="456821813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/456821813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#456821813">(Aug 06 2024 at 10:47)</a>:</h4>
<p>MatthiasGrandl opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>Related to <a href="https://github.com/bytecodealliance/wit-bindgen/issues/1019">https://github.com/bytecodealliance/wit-bindgen/issues/1019</a></p>
<p>I have a large enum with 1424 cases. While it's completely broken on the client side, it works as expected on the host side, but compilation takes ages. On this Macbook Pro M3 Pro it takes 1 minute longer on a fresh compile than without the enum.</p>
<p>I attached the wit for testing.</p>
<p><a href="https://github.com/user-attachments/files/16509148/icons.wit.txt">icons.wit.txt</a><br>
</p>
</blockquote>



<a name="461953189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/461953189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#461953189">(Aug 12 2024 at 20:32)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/9081#issuecomment-2284856301">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>I've tested that with #9122 the enum in question goes from generating 80_000 lines of code to 8_000 lines of code, which should be a large improvement. When that lands though can you confirm that it improves things locally as well? If the compile time is still too long I'll look into this further and see what else is generating a lot of code.</p>
</blockquote>



<a name="461954270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/461954270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#461954270">(Aug 12 2024 at 20:39)</a>:</h4>
<p>MatthiasGrandl <a href="https://github.com/bytecodealliance/wasmtime/issues/9081#issuecomment-2284866608">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>@alexcrichton I would be happy to test it!</p>
</blockquote>



<a name="461960410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/461960410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#461960410">(Aug 12 2024 at 21:24)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>Related to <a href="https://github.com/bytecodealliance/wit-bindgen/issues/1019">https://github.com/bytecodealliance/wit-bindgen/issues/1019</a></p>
<p>I have a large enum with 1424 cases. While it's completely broken on the client side, it works as expected on the host side, but compilation takes ages. On this Macbook Pro M3 Pro it takes 1 minute longer on a fresh compile than without the enum.</p>
<p>I attached the wit for testing.</p>
<p><a href="https://github.com/user-attachments/files/16509148/icons.wit.txt">icons.wit.txt</a><br>
</p>
</blockquote>



<a name="462334513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/462334513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#462334513">(Aug 14 2024 at 12:24)</a>:</h4>
<p>MatthiasGrandl <a href="https://github.com/bytecodealliance/wasmtime/issues/9081#issuecomment-2288604547">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>@alexcrichton tested the changes and they definitely solved my issue! thanks a lot!</p>
</blockquote>



<a name="462360854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239081%20large%20enums%20slow%20down%20compilation/near/462360854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239081.20large.20enums.20slow.20down.20compilation.html#462360854">(Aug 14 2024 at 14:45)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/9081#issuecomment-2289015699">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9081">issue #9081</a>:</p>
<blockquote>
<p>Great, thanks for testing!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>