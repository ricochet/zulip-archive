<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3362 Implement `Unarrow`, `Uunarrow`, and ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html">wasmtime / PR #3362 Implement `Unarrow`, `Uunarrow`, and ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="253733812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/253733812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#253733812">(Sep 17 2021 at 12:27)</a>:</h4>
<p>dheaton-arm opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3362">PR #3362</a> from <code>implement-unarrow</code> to <code>main</code>:</p>
<blockquote>
<p>Implemented the following Opcodes for the Cranelift interpreter:</p>
<ul>
<li>
<p><code>Unarrow</code> to combine two SIMD vectors into a new vector with twice<br>
the lanes but half the width, with signed inputs which are clamped to<br>
<code>0x00</code>.</p>
</li>
<li>
<p><code>Uunarrow</code> to perform the same operation as <code>Unarrow</code> but treating<br>
inputs as unsigned.</p>
</li>
<li>
<p><code>Snarrow</code> to perform the same operation as <code>Unarrow</code> but treating<br>
both inputs and outputs as signed, and saturating accordingly.</p>
</li>
</ul>
<p>Note that all 3 instructions saturate at the type boundaries.</p>
<p>Copyright (c) 2021, Arm Limited</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="253798628"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/253798628" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#253798628">(Sep 17 2021 at 19:54)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#pullrequestreview-757811542">PR review</a>.</p>



<a name="253798629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/253798629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#253798629">(Sep 17 2021 at 19:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#discussion_r711315033">PR review comment</a>:</p>
<blockquote>
<p>Could you turn this into an iterator chain?</p>
</blockquote>



<a name="253798630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/253798630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#253798630">(Sep 17 2021 at 19:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#discussion_r711314751">PR review comment</a>:</p>
<blockquote>
<p>The <code>u128::MAX as i128</code> will overflow, which I guess is fine because I think this is just using the <code>i128</code> as a container for the 128 bits, immediately passed into a <code>Value::int</code> call. But given that, could you use <code>u128</code> instead? IMHO the unsigned types are a bit more idiomatic for "just a bit pattern"-type values.</p>
</blockquote>



<a name="253798631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/253798631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#253798631">(Sep 17 2021 at 19:54)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#pullrequestreview-757811542">PR review</a>.</p>



<a name="254014089"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254014089" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254014089">(Sep 20 2021 at 08:28)</a>:</h4>
<p>dheaton-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#pullrequestreview-758366345">PR review</a>.</p>



<a name="254014090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254014090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254014090">(Sep 20 2021 at 08:28)</a>:</h4>
<p>dheaton-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#discussion_r711966901">PR review comment</a>:</p>
<blockquote>
<p>Sure; I'd gone for <code>i128</code> because <code>Value::int</code> accepts <code>i128</code> rather than <code>u128</code>.</p>
</blockquote>



<a name="254047119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254047119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254047119">(Sep 20 2021 at 13:11)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3362">PR #3362</a> from <code>implement-unarrow</code> to <code>main</code>.</p>



<a name="254171706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254171706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254171706">(Sep 21 2021 at 08:24)</a>:</h4>
<p><strong>dheaton-arm</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3362">PR #3362</a>.</p>



<a name="254242843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254242843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254242843">(Sep 21 2021 at 17:06)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#discussion_r713248069">PR review comment</a>:</p>
<blockquote>
<p>Ah, OK, possibly that could be changed too, but it's not terribly important in this case so I won't hold up the PR for this :-)</p>
</blockquote>



<a name="254242844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254242844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254242844">(Sep 21 2021 at 17:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#pullrequestreview-760028751">PR review</a>.</p>



<a name="254242910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254242910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254242910">(Sep 21 2021 at 17:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3362#pullrequestreview-760029236">PR review</a>.</p>



<a name="254242926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233362%20Implement%20%60Unarrow%60%2C%20%60Uunarrow%60%2C%20and%20.../near/254242926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233362.20Implement.20.60Unarrow.60.2C.20.60Uunarrow.60.2C.20and.20.2E.2E.2E.html#254242926">(Sep 21 2021 at 17:06)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3362">PR #3362</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>