<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8869 cranelift/aarch64: Support fmsub · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html">wasmtime / PR #8869 cranelift/aarch64: Support fmsub</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="446740164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740164">(Jun 24 2024 at 23:25)</a>:</h4>
<p>HerrCai0907 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a> from <code>HerrCai0907:support-fmsub</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="446740165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740165">(Jun 24 2024 at 23:25)</a>:</h4>
<p><strong>HerrCai0907</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446740166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740166">(Jun 24 2024 at 23:25)</a>:</h4>
<p><strong>HerrCai0907</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446740372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740372">(Jun 24 2024 at 23:27)</a>:</h4>
<p>HerrCai0907 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446740503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740503">(Jun 24 2024 at 23:29)</a>:</h4>
<p>HerrCai0907 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446740687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740687">(Jun 24 2024 at 23:30)</a>:</h4>
<p>HerrCai0907 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>:</p>
<blockquote>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
<p>This PR wants to add the fmsub instruction lowering supporting for aarch64.</p>
</blockquote>



<a name="446740733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446740733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446740733">(Jun 24 2024 at 23:31)</a>:</h4>
<p>HerrCai0907 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>:</p>
<blockquote>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
<p>This PR wants to add the fmsub instruction lowering supporting for aarch64.<br>
Part of #8603.</p>
</blockquote>



<a name="446743714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446743714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446743714">(Jun 25 2024 at 00:00)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2137011299">PR review</a>:</p>
<blockquote>
<p>This seems reasonable, but could you add a test case in <code>cranelift/filetests/filetests/isa/aarch64</code> that shows what the disassembly for some simple clif programs will look like?</p>
</blockquote>



<a name="446743715"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446743715" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446743715">(Jun 25 2024 at 00:00)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2137011299">PR review</a>:</p>
<blockquote>
<p>This seems reasonable, but could you add a test case in <code>cranelift/filetests/filetests/isa/aarch64</code> that shows what the disassembly for some simple clif programs will look like?</p>
</blockquote>



<a name="446743716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446743716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446743716">(Jun 25 2024 at 00:00)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1651782278">PR review comment</a>:</p>
<blockquote>
<p>I think that this can be a regular <code>let</code>, as <code>fneg</code> will never fail, right?</p>
</blockquote>



<a name="446754297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446754297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446754297">(Jun 25 2024 at 01:41)</a>:</h4>
<p>HerrCai0907 closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446754459"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446754459" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446754459">(Jun 25 2024 at 01:42)</a>:</h4>
<p>HerrCai0907 reopened <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446756016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446756016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446756016">(Jun 25 2024 at 01:51)</a>:</h4>
<p>HerrCai0907 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1651870206">PR review comment</a>:</p>
<blockquote>
<p>I follow the riscv lower rules.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/f4b49b8c8942523b5bc44d09aa455fadaf848e41/cranelift/codegen/src/isa/riscv64/lower.isle#L1557-L1561">https://github.com/bytecodealliance/wasmtime/blob/f4b49b8c8942523b5bc44d09aa455fadaf848e41/cranelift/codegen/src/isa/riscv64/lower.isle#L1557-L1561</a></p>
</blockquote>



<a name="446756017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446756017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446756017">(Jun 25 2024 at 01:51)</a>:</h4>
<p>HerrCai0907 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2137145609">PR review</a>.</p>



<a name="446756423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446756423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446756423">(Jun 25 2024 at 01:55)</a>:</h4>
<p>HerrCai0907 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1651870206">PR review comment</a>.</p>



<a name="446767434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446767434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446767434">(Jun 25 2024 at 03:22)</a>:</h4>
<p>HerrCai0907 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="446825907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/446825907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#446825907">(Jun 25 2024 at 09:29)</a>:</h4>
<p><strong>HerrCai0907</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="447230991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447230991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447230991">(Jun 26 2024 at 14:27)</a>:</h4>
<p>HerrCai0907 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2142059547">PR review</a>.</p>



<a name="447230994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447230994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447230994">(Jun 26 2024 at 14:27)</a>:</h4>
<p>HerrCai0907 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1654982021">PR review comment</a>:</p>
<blockquote>
<p>I don't find a way to convert this <code>if-let</code> to <code>let</code>. Could you give me some suggestion? @elliottt </p>
</blockquote>



<a name="447772753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447772753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447772753">(Jun 28 2024 at 13:39)</a>:</h4>
<p>HerrCai0907 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="447801919"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447801919" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447801919">(Jun 28 2024 at 15:31)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2148323086">PR review</a>.</p>



<a name="447801924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447801924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447801924">(Jun 28 2024 at 15:31)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1658923545">PR review comment</a>:</p>
<blockquote>
<p>It's a little more verbose, but:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">is_fneg_neg</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">)</span><span class="w"> </span><span class="kt">u64</span><span class="p">)</span>
<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_neg</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">.</span><span class="nb">Result</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="n">_</span><span class="p">))</span><span class="w"> </span><span class="n">n</span><span class="p">)</span>

<span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">is_fneg_value</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">)</span><span class="w"> </span><span class="n">Value</span><span class="p">)</span>
<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_value</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">.</span><span class="nb">Result</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">v</span><span class="p">))</span><span class="w"> </span><span class="n">v</span><span class="p">)</span>

<span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="n">is_fneg</span><span class="w"> </span><span class="p">(</span><span class="n">Value</span><span class="p">)</span><span class="w"> </span><span class="n">IsFneg</span><span class="p">)</span>
<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg</span><span class="w"> </span><span class="p">(</span><span class="n">fneg</span><span class="w"> </span><span class="n">x</span><span class="p">))</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">.</span><span class="nb">Result</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">x</span><span class="p">))</span>
<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">IsFneg</span><span class="p">.</span><span class="nb">Result</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">x</span><span class="p">))</span>

<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="p">(</span><span class="n">lower</span><span class="w"> </span><span class="p">(</span><span class="n">has_type</span><span class="w"> </span><span class="n">ty</span><span class="w"> </span><span class="p">(</span><span class="n">fma</span><span class="w"> </span><span class="n">x_src</span><span class="w"> </span><span class="n">y_src</span><span class="w"> </span><span class="n">z_src</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="kd">let</span>
<span class="w">    </span><span class="p">((</span><span class="n">x_res</span><span class="w"> </span><span class="n">IsFneg</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg</span><span class="w"> </span><span class="n">x_src</span><span class="p">))</span>
<span class="w">     </span><span class="p">(</span><span class="n">y_res</span><span class="w"> </span><span class="n">IsFneg</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg</span><span class="w"> </span><span class="n">y_src</span><span class="p">))</span>
<span class="w">     </span><span class="p">(</span><span class="n">z_res</span><span class="w"> </span><span class="n">IsFneg</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg</span><span class="w"> </span><span class="n">z_src</span><span class="p">))</span>
<span class="w">     </span><span class="p">(</span><span class="n">neg_xy</span><span class="w"> </span><span class="kt">u64</span><span class="w"> </span><span class="p">(</span><span class="n">u64_xor</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_neg</span><span class="w"> </span><span class="n">x_res</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_neg</span><span class="w"> </span><span class="n">y_res</span><span class="p">)))</span>
<span class="w">     </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_value</span><span class="w"> </span><span class="n">x_res</span><span class="p">))</span>
<span class="w">     </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_value</span><span class="w"> </span><span class="n">y_res</span><span class="p">))</span>
<span class="w">     </span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="n">Value</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_value</span><span class="w"> </span><span class="n">z_res</span><span class="p">)))</span>
<span class="w">    </span><span class="p">(</span><span class="n">rv_fma</span><span class="w"> </span><span class="n">ty</span><span class="w"> </span><span class="n">neg_xy</span><span class="w"> </span><span class="p">(</span><span class="n">is_fneg_neg</span><span class="w"> </span><span class="n">z_res</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="n">z</span><span class="p">)))</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="447802201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447802201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447802201">(Jun 28 2024 at 15:31)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#discussion_r1658923545">PR review comment</a>.</p>



<a name="447896769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/447896769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#447896769">(Jun 29 2024 at 00:18)</a>:</h4>
<p>HerrCai0907 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<a name="448656509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/448656509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#448656509">(Jul 02 2024 at 16:58)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8869#pullrequestreview-2154396336">PR review</a>:</p>
<blockquote>
<p>Thank you!</p>
</blockquote>



<a name="448660209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238869%20cranelift/aarch64%3A%20Support%20fmsub/near/448660209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238869.20cranelift.2Faarch64.3A.20Support.20fmsub.html#448660209">(Jul 02 2024 at 17:13)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8869">PR #8869</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>