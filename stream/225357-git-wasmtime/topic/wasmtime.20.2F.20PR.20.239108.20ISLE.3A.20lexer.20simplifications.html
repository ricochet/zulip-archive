<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9108 ISLE: lexer simplifications · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html">wasmtime / PR #9108 ISLE: lexer simplifications</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="459946879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459946879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459946879">(Aug 11 2024 at 21:34)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459946958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459946958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459946958">(Aug 11 2024 at 21:36)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>:</p>
<blockquote>
<ul>
<li>Instead of pushing every byte in a lexed integer into a <code>Vec&lt;u8&gt;</code>, use a slice of the original buffer, and only reallocate if there are underscores that need to be removed</li>
<li>Don't track line/column in <code>Pos</code>, so don't need to update line/column in <code>advance_pos()</code><br>
</li>
</ul>
</blockquote>



<a name="459947697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459947697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459947697">(Aug 11 2024 at 21:48)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>:</p>
<blockquote>
<ul>
<li>Instead of pushing every byte in a lexed integer into a <code>Vec&lt;u8&gt;</code>, use a slice of the original buffer, and only reallocate if there are underscores that need to be removed</li>
<li>Don't track line/column in <code>Pos</code>, so don't need to update line/column in <code>advance_pos()</code></li>
<li>Store text being lexed as <code>&amp;str</code> rather than <code>&amp;[u8]</code> to avoid checking substrings for UTF-8 validty<br>
</li>
</ul>
</blockquote>



<a name="459947722"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459947722" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459947722">(Aug 11 2024 at 21:49)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459947734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459947734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459947734">(Aug 11 2024 at 21:49)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459948008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459948008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459948008">(Aug 11 2024 at 21:54)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459948690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459948690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459948690">(Aug 11 2024 at 22:05)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459952248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459952248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459952248">(Aug 11 2024 at 22:51)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="459952315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459952315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459952315">(Aug 11 2024 at 22:52)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>:</p>
<blockquote>
<ul>
<li>Instead of pushing every byte in a lexed integer into a <code>Vec&lt;u8&gt;</code>, use a slice of the original buffer, and only reallocate if there are underscores that need to be removed</li>
<li>Don't track line/column in <code>Pos</code>, so don't need to update line/column in <code>advance_pos()</code></li>
<li>Store text being lexed as <code>&amp;str</code> rather than <code>&amp;[u8]</code> to avoid checking substrings for UTF-8 validity</li>
<li>Don't try to parse integers twice<br>
</li>
</ul>
</blockquote>



<a name="459963680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/459963680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#459963680">(Aug 12 2024 at 01:04)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9108#issuecomment-2282967560">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="460124219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/460124219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#460124219">(Aug 12 2024 at 17:02)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/9108#issuecomment-2284512770">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>:</p>
<blockquote>
<p>Hi, thanks for these contributions! If I can nerd-snipe you into some unrelated lexer work, we have a <code>logos</code> lexer over in the <code>wasm-wave</code> crate that we need to be rewritten entirely in safe rust. If you are interested in learning more, ping me over on <a href="https://github.com/bytecodealliance/wasmtime/pull/8872">https://github.com/bytecodealliance/wasmtime/pull/8872</a></p>
</blockquote>



<a name="462386028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/462386028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#462386028">(Aug 14 2024 at 17:03)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9108#pullrequestreview-2238740596">PR review</a>:</p>
<blockquote>
<p>This is fantastic, thanks!</p>
<p>Apologies for the slow review turn around, I've been having ISP issues.</p>
<p>One comment below that I'd like to get your take on, but shouldn't be a blocker for landing this. Can address it in a follow up, if necessary.</p>
</blockquote>



<a name="462386029"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/462386029" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#462386029">(Aug 14 2024 at 17:03)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9108#pullrequestreview-2238740596">PR review</a>:</p>
<blockquote>
<p>This is fantastic, thanks!</p>
<p>Apologies for the slow review turn around, I've been having ISP issues.</p>
<p>One comment below that I'd like to get your take on, but shouldn't be a blocker for landing this. Can address it in a follow up, if necessary.</p>
</blockquote>



<a name="462386031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/462386031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#462386031">(Aug 14 2024 at 17:03)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9108#discussion_r1717276317">PR review comment</a>:</p>
<blockquote>
<p>Why not <code>fn peek_char(&amp;self) -&gt; Option&lt;char&gt;</code>? I guess a byte is mildly more performant, in theory if LLVM doesn't clean things up, but that doesn't seem super compelling compared to the simplification of "we are dealing with strings, so we should also deal with chars".</p>
</blockquote>



<a name="462387648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/462387648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#462387648">(Aug 14 2024 at 17:14)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<a name="462388497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239108%20ISLE%3A%20lexer%20simplifications/near/462388497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239108.20ISLE.3A.20lexer.20simplifications.html#462388497">(Aug 14 2024 at 17:19)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9108">PR #9108</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>