<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8501 Turn the `wasmtime-runtime` crate int... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html">wasmtime / PR #8501 Turn the `wasmtime-runtime` crate int...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="436101170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436101170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436101170">(Apr 29 2024 at 17:24)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436101362"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436101362" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436101362">(Apr 29 2024 at 17:25)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>We want to merge them together because there is no abstraction or layering or boundary between them in practice, but our architectures and designs have, at times, been constrained by this artificial crate boundary and what is visible in which crate and this has forced us to use nasty workarounds like defining traits in <code>wasmtime-runtime</code> that get implemented in <code>wasmtime</code> and used as dynamic trait objects inside <code>wasmtime-runtime</code>. Merging them will allow us to remove these hacks.<br>
</p>
</blockquote>



<a name="436106569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436106569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436106569">(Apr 29 2024 at 17:55)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436106656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436106656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436106656">(Apr 29 2024 at 17:55)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>We want to merge them together because there is no abstraction or layering or boundary between them in practice, and our architectures and designs have, at times, been constrained by this artificial crate boundary and what is visible in which crate and this has forced us to use nasty workarounds like defining traits in <code>wasmtime-runtime</code> that get implemented in <code>wasmtime</code> and used as dynamic trait objects inside <code>wasmtime-runtime</code>. Merging them will allow us to remove these hacks.<br>
</p>
</blockquote>



<a name="436108909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436108909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436108909">(Apr 29 2024 at 18:07)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436112490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436112490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436112490">(Apr 29 2024 at 18:27)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436116428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436116428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436116428">(Apr 29 2024 at 18:50)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436120065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436120065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436120065">(Apr 29 2024 at 19:10)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436122542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436122542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436122542">(Apr 29 2024 at 19:25)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436125375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436125375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436125375">(Apr 29 2024 at 19:43)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436319859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436319859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436319859">(Apr 30 2024 at 17:17)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#pullrequestreview-2032060583">PR review</a>.</p>



<a name="436331289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436331289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436331289">(Apr 30 2024 at 18:31)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436331305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436331305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436331305">(Apr 30 2024 at 18:31)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="436337734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/436337734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#436337734">(Apr 30 2024 at 19:15)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>.</p>



<a name="439683994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/439683994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#439683994">(May 20 2024 at 21:33)</a>:</h4>
<p>kaimast <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#issuecomment-2121246820">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>How do I call <code>wasmtime_runtime::raise_user_trap</code> after this change?</p>
</blockquote>



<a name="439687306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/439687306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#439687306">(May 20 2024 at 21:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#issuecomment-2121282614">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>Ah it's no longer possible to call the function after this change as it's private to the <code>wasmtime</code> crate. Could you detail what you were doing with the function? We can try to help out to find a workaround perhaps</p>
</blockquote>



<a name="439687926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/439687926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#439687926">(May 20 2024 at 22:02)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#issuecomment-2121289136">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>Adding to what Alex said: that function was never intended to be exposed to or used by Wasmtime embedders. The <code>wasmtime-runtime</code> crate was an implementation detail of Wasmtime itself. Generally, to raise a trap in Wasm from a host API, you want to return an <code>Err(..)</code> from the host call.</p>
</blockquote>



<a name="439693759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/439693759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#439693759">(May 20 2024 at 22:47)</a>:</h4>
<p>kaimast <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#issuecomment-2121341698">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<blockquote>
<p>Generally, to raise a trap in Wasm from a host API, you want to return an <code>Err(..)</code> from the host call.</p>
</blockquote>
<p>Oh, I did not realize that is possible. I fairly recently ported my code over from Wasmer, so I am not super familiar with API yet. That is indeed a nicer way of doing it... </p>
<p>Thanks for the quick responses!</p>
</blockquote>



<a name="439839677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238501%20Turn%20the%20%60wasmtime-runtime%60%20crate%20int.../near/439839677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238501.20Turn.20the.20.60wasmtime-runtime.60.20crate.20int.2E.2E.2E.html#439839677">(May 21 2024 at 15:10)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8501#issuecomment-2122856584">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8501">PR #8501</a>:</p>
<blockquote>
<p>@kaimast no problem! Feel free to pop into our Zulip or file an issue if you have any more questions.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>