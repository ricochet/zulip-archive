<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2249 Rework the interface of cranelift-module · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html">wasmtime / PR #2249 Rework the interface of cranelift-module</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="211804401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211804401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211804401">(Sep 30 2020 at 18:54)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2249">PR #2249</a> from <code>module_rework</code> to <code>main</code>:</p>
<blockquote>
<p>The old design has a <code>Module</code> struct that wraps around a <code>Backend</code> implementation. Because the <code>Backend</code> is not exposed it is not possible to export extra methods to do things like deallocating specific functions or adding new predefined imports for the jit. It is also not possible to customise the behavior of existing methods to for example allow replacing an already defined function for hot code swapping. It was also not possible to create a module with a non-static lifetime (required for headcrab-inject) In the new design <code>Module</code> is instead a trait with <code>ModuleDeclarations</code> being a struct for some shared behavior regarding how declarations are handled. As the <code>Module</code> is fully exposed, it is possible to add new methlds to the api of every module and customize the behavior of existing methods. None of the previously mentioned use cases are implemented yet. I will leave that for a future PR.</p>
<p>Also fixes #1691</p>
</blockquote>



<a name="211804963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211804963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211804963">(Sep 30 2020 at 18:59)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2249">PR #2249</a>.</p>



<a name="211852668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211852668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211852668">(Sep 30 2020 at 23:29)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#pullrequestreview-499880193">PR Review</a>.</p>



<a name="211852669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211852669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211852669">(Sep 30 2020 at 23:29)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#discussion_r497856048">PR Review Comment</a>:</p>
<blockquote>
<p>Please document whether this is in bytes or in log2(bytes).</p>
</blockquote>



<a name="211852740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211852740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211852740">(Sep 30 2020 at 23:30)</a>:</h4>
<p>sunfishcode edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#discussion_r497856048">PR Review Comment</a>.</p>



<a name="211878488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211878488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211878488">(Oct 01 2020 at 07:53)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2249">PR #2249</a> from <code>module_rework</code> to <code>main</code>:</p>
<blockquote>
<p>The old design has a <code>Module</code> struct that wraps around a <code>Backend</code> implementation. Because the <code>Backend</code> is not exposed it is not possible to export extra methods to do things like deallocating specific functions or adding new predefined imports for the jit. It is also not possible to customise the behavior of existing methods to for example allow replacing an already defined function for hot code swapping. It was also not possible to create a module with a non-static lifetime (required for headcrab-inject) In the new design <code>Module</code> is instead a trait with <code>ModuleDeclarations</code> being a struct for some shared behavior regarding how declarations are handled. As the <code>Module</code> is fully exposed, it is possible to add new methlds to the api of every module and customize the behavior of existing methods. None of the previously mentioned use cases are implemented yet. I will leave that for a future PR.</p>
<p>Also fixes #1691</p>
</blockquote>



<a name="211878498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211878498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211878498">(Oct 01 2020 at 07:53)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#pullrequestreview-500091930">PR Review</a>.</p>



<a name="211878499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/211878499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#211878499">(Oct 01 2020 at 07:53)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#discussion_r498051120">PR Review Comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="212657789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/212657789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#212657789">(Oct 08 2020 at 08:04)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2249">PR #2249</a> from <code>module_rework</code> to <code>main</code>:</p>
<blockquote>
<p>The old design has a <code>Module</code> struct that wraps around a <code>Backend</code> implementation. Because the <code>Backend</code> is not exposed it is not possible to export extra methods to do things like deallocating specific functions or adding new predefined imports for the jit. It is also not possible to customise the behavior of existing methods to for example allow replacing an already defined function for hot code swapping. It was also not possible to create a module with a non-static lifetime (required for headcrab-inject) In the new design <code>Module</code> is instead a trait with <code>ModuleDeclarations</code> being a struct for some shared behavior regarding how declarations are handled. As the <code>Module</code> is fully exposed, it is possible to add new methlds to the api of every module and customize the behavior of existing methods. None of the previously mentioned use cases are implemented yet. I will leave that for a future PR.</p>
<p>Also fixes #1691</p>
</blockquote>



<a name="212717212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/212717212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#212717212">(Oct 08 2020 at 16:40)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2249#pullrequestreview-504969964">PR Review</a>.</p>



<a name="212718907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232249%20Rework%20the%20interface%20of%20cranelift-module/near/212718907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232249.20Rework.20the.20interface.20of.20cranelift-module.html#212718907">(Oct 08 2020 at 16:52)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2249">PR #2249</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>