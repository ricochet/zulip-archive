<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7278 View variables from shared memorie... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html">wasmtime / issue #7278 View variables from shared memorie...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="409303027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/409303027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#409303027">(Dec 21 2023 at 03:46)</a>:</h4>
<p>doinkythederp edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Thanks for filing a feature request! Please fill out the TODOs below.</p>
<h4>Feature</h4>
<p>I'd like to be able to see the values of the variables in my Rust code that I've compiled to WASM when debugging with LLDB. Currently when using CodeLLDB to debug Rust compiled in debug mode, the only variable present is <code>__vmctx</code>. </p>
<h4>Benefit</h4>
<p>This would make it a lot simpler to debug incorrect state in programs and generally understand a misbehaving program.<br>
</p>
</blockquote>



<a name="409436744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/409436744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#409436744">(Dec 21 2023 at 17:47)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1866706435">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>@doinkythederp, thanks for the codespace reproducer. Here's what I get when I follow your instructions:</p>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/541880/dc23a44a-0343-4549-9d18-5d8e2da8c11e">https://github.com/bytecodealliance/wasmtime/assets/541880/dc23a44a-0343-4549-9d18-5d8e2da8c11e</a>)</p>
<p>It looks like, as @cfallin suggested, those values are being optimized away. But when I look at the WAT there seems to be enough there for proper debugging: <a href="https://github.com/bytecodealliance/wasmtime/files/13744850/example.wat.txt">example.wat.txt</a>. So perhaps something is truly wrong with the DWARF here; I remember someone mentioning that that part of the codebase needs some maintenance attention.<br>
</p>
</blockquote>



<a name="425809859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/425809859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#425809859">(Mar 10 2024 at 22:06)</a>:</h4>
<p>squillace <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-1987378121">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Yup. wasmtime 18.02.<br>
![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/1422718/b4e860a9-f8f0-42fa-aee4-cb7aeffeb84f">https://github.com/bytecodealliance/wasmtime/assets/1422718/b4e860a9-f8f0-42fa-aee4-cb7aeffeb84f</a>)</p>
</blockquote>



<a name="442992937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/442992937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#442992937">(Jun 06 2024 at 07:55)</a>:</h4>
<p>pgherveou <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2151642966">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Hey there, I was trying to get this to work as well using wasmtime example, but it fails to print the variable as well,<br>
it looks like this works though when you run the program through wasmtime binary</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">❯</span><span class="w"> </span><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="n">version</span>
<span class="n">lldb</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="mf">17.0.6</span>

<span class="err">❯</span><span class="w"> </span><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="n">batch</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"b  fib"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"run"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"fr v"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"c"</span><span class="w">  </span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="s">"./target/debug/examples/fib-debug"</span>
<span class="n">Current</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">'/</span><span class="n">home</span><span class="o">/</span><span class="n">pg</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w">  </span><span class="n">fib</span>
<span class="n">Breakpoint</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">no</span><span class="w"> </span><span class="n">locations</span><span class="w"> </span><span class="p">(</span><span class="n">pending</span><span class="p">).</span>
<span class="n">WARNING</span><span class="p">:</span><span class="w">  </span><span class="nc">Unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resolve</span><span class="w"> </span><span class="n">breakpoint</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="n">actual</span><span class="w"> </span><span class="n">locations</span><span class="p">.</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="mi">1</span><span class="w"> </span><span class="n">location</span><span class="w"> </span><span class="n">added</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">breakpoint</span><span class="w"> </span><span class="mi">1</span>
<span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">This</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">LLDB</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">no</span><span class="w"> </span><span class="n">plugin</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">language</span><span class="w"> </span><span class="s">"rust"</span><span class="p">.</span><span class="w"> </span><span class="n">Inspection</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">limited</span><span class="p">.</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1334333</span><span class="w"> </span><span class="n">stopped</span>

<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">'</span><span class="na">fib</span><span class="o">-</span><span class="n">debug</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">breakpoint</span><span class="w"> </span><span class="mf">1.1</span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="p">#</span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x00007ffff76cc275</span><span class="w"> </span><span class="n">JIT</span><span class="p">(</span><span class="mh">0x7fffef400010</span><span class="p">)</span><span class="err">`</span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">=&lt;</span><span class="n">unavailable</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">fib</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">17</span>
<span class="w">   </span><span class="mi">1</span><span class="w">    </span><span class="cp">#[no_mangle]</span>
<span class="w">   </span><span class="mi">2</span><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="p">-&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">   </span><span class="mi">4</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">   </span><span class="mi">5</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">0</span><span class="o">..</span><span class="n">n</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="mi">6</span><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">   </span><span class="mi">7</span><span class="w">            </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1334333</span><span class="w"> </span><span class="n">launched</span><span class="p">:</span><span class="w"> </span><span class="o">'/</span><span class="n">home</span><span class="o">/</span><span class="n">pg</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="n">v</span>
<span class="p">(</span><span class="n">WasmtimeVMContext</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">__vmctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="n">unsigned</span><span class="w"> </span><span class="n">int</span><span class="p">)</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">c</span>
<span class="n">fib</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">21</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1334333</span><span class="w"> </span><span class="n">resuming</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1334333</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="mh">0x00000000</span><span class="p">)</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="443063873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443063873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443063873">(Jun 06 2024 at 13:44)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152560845">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>@pgherveou were you running with <a href="https://docs.rs/wasmtime/latest/wasmtime/enum.OptLevel.html"><code>OptLevel::None</code></a> and if not can you test that?</p>
</blockquote>



<a name="443097776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443097776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443097776">(Jun 06 2024 at 15:55)</a>:</h4>
<p>pgherveou <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152874969">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>@alexcrichton <br>
I am running the <a href="https://github.com/bytecodealliance/wasmtime/blob/main/examples/fib-debug/main.rs">example code</a> from the repo.</p>
<p>do you mean that I should configure the config with cranelift <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.strategy">strategy</a> and set <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.cranelift_opt_level">cranelift_opt_level</a> to None ?</p>
</blockquote>



<a name="443098353"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443098353" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443098353">(Jun 06 2024 at 15:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152880133">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Indeed yeah, the <code>strategy</code> is default cranelift so you don't have to configure that unless you want, but <code>OptLevel::None</code> is not the default so you need to explicitly opt-in to that. This is something I just discovered myself a day or two ago, and if that fixes things for you I'll update the example/docs around this.</p>
</blockquote>



<a name="443101129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443101129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443101129">(Jun 06 2024 at 16:09)</a>:</h4>
<p>pgherveou <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152903485">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>mmm  the doc does say it's the default though<br>
<a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.cranelift_opt_level">https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.cranelift_opt_level</a></p>
</blockquote>



<a name="443101451"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443101451" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443101451">(Jun 06 2024 at 16:11)</a>:</h4>
<p>pgherveou <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152906576">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>This does not seem to make a difference for me though, the output of the lldb script is the same as before.</p>
</blockquote>



<a name="443101563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443101563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443101563">(Jun 06 2024 at 16:11)</a>:</h4>
<p>pgherveou edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152903485">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>mmm  the doc does say it's the default though<br>
<a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.cranelift_opt_level">https://docs.rs/wasmtime/latest/wasmtime/struct.Config.html#method.cranelift_opt_level</a></p>
<blockquote>
<p>The default value for this is OptLevel::None.</p>
</blockquote>
</blockquote>



<a name="443102959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443102959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443102959">(Jun 06 2024 at 16:19)</a>:</h4>
<p>pgherveou edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2152906576">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>This does not seem to make a difference for me though, the output of the lldb script is the same as before.<br>
These are the commands that I fired:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">features</span><span class="w"> </span><span class="n">debug</span><span class="o">-</span><span class="n">builtins</span><span class="w"> </span><span class="o">--</span><span class="n">example</span><span class="w"> </span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span>
<span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">example</span><span class="o">-</span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span><span class="o">-</span><span class="n">wasm</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">wasm32</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">unknown</span>
<span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="n">batch</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"b  fib"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"run"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"fr v"</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="s">"c"</span><span class="w">  </span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">fib</span><span class="o">-</span><span class="n">debug</span>
</code></pre></div>
</blockquote>



<a name="443145844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443145844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443145844">(Jun 06 2024 at 19:41)</a>:</h4>
<p>pgherveou <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2153278907">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Things works fine though if I simplify the fib function<br>
to something as simple as </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">[</span><span class="n">no_mangle</span><span class="p">]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">:</span><span class="w"> </span><span class="kt">u32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">u32</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>The C code compiled to wasm seems to work just fine as well too. </p>
</blockquote>



<a name="443160319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237278%20View%20variables%20from%20shared%20memorie.../near/443160319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237278.20View.20variables.20from.20shared.20memorie.2E.2E.2E.html#443160319">(Jun 06 2024 at 20:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/7278#issuecomment-2153398074">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/7278">issue #7278</a>:</p>
<blockquote>
<p>Poking around locally I'm not sure what's going on as well. I spun out the issue into <a href="https://github.com/bytecodealliance/wasmtime/issues/8752">https://github.com/bytecodealliance/wasmtime/issues/8752</a> as an isolated version of the issue you're hitting.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>