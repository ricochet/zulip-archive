<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1565 Reactor support. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html">wasmtime / PR #1565 Reactor support.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="194810120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194810120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194810120">(Apr 21 2020 at 14:32)</a>:</h4>
<p>sunfishcode opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1565" title="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md" title="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194836405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194836405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194836405">(Apr 21 2020 at 17:34)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-397515644" title="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-397515644">PR Review</a>.</p>



<a name="194836406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194836406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194836406">(Apr 21 2020 at 17:34)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412346035" title="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412346035">PR Review Comment</a>:</p>
<blockquote>
<p>Duplicated sections?</p>
</blockquote>



<a name="194836407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194836407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194836407">(Apr 21 2020 at 17:34)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-397515644" title="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-397515644">PR Review</a>.</p>



<a name="194836408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194836408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194836408">(Apr 21 2020 at 17:34)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412351448" title="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412351448">PR Review Comment</a>:</p>
<blockquote>
<p>I think this API makes sense given WASI today, but this feels sort of uncomfortable. This means that we're splitting the world between "instantiate this module" and "instantiate this wasi module". These constructor semantics need to be bubbled to all callers and such. </p>
<p>Would it be possible to avoid splitting into two worlds? One option might be to have this instead of a constructor:</p>
<div class="codehilite"><pre><span></span><span class="k">impl</span><span class="w"> </span><span class="n">Instance</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">initialize_wasi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">Instance</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>That way you'd always create the <code>Instance</code> the same way and it's up to you what to do with it after that.</p>
</blockquote>



<a name="194836410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/194836410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#194836410">(Apr 21 2020 at 17:34)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412354718" title="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r412354718">PR Review Comment</a>:</p>
<blockquote>
<p>Could you add a test for this new behavior too?</p>
<p>Also, perhaps for some ergonomic, could this be something like:</p>
<ul>
<li><code>foo.wasm</code> - parses as module name <code>foo</code> and path <code>foo.wasm</code></li>
<li><code>foo/bar.wasm</code> - parses as module name <code>bar</code> and path name <code>foo/bar.wasm</code></li>
<li><code>foo=bar.wasm</code> - parses as module name <code>foo</code> and path name <code>bar.wasm</code></li>
</ul>
<p>(the <code>=</code> vs <code>::</code> is certainly a bikeshed, but I personally would lean towards <code>=</code>, not that it matters too too much)</p>
</blockquote>



<a name="197638040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197638040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197638040">(May 15 2020 at 01:09)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197638341"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197638341" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197638341">(May 15 2020 at 01:14)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412285131">PR Review</a>.</p>



<a name="197638342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197638342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197638342">(May 15 2020 at 01:14)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425513311">PR Review Comment</a>:</p>
<blockquote>
<p>I'm imagining <code>new_wasi_abi</code> will be a common case. The name is perhaps confusing because this doesn't mean "run with all the WASI APIs available", but just "run the WASI startup functions if present". I actually wonder if we should rename this to <code>new</code> and rename the current <code>new</code> to <code>new_raw</code> or something, to emphasize that it's not automatically running the WASI startup functions (though it does still run the wasm start function).</p>
</blockquote>



<a name="197638624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197638624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197638624">(May 15 2020 at 01:19)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412286453">PR Review</a>.</p>



<a name="197638625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197638625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197638625">(May 15 2020 at 01:19)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425514423">PR Review Comment</a>:</p>
<blockquote>
<p>I've renamed "::" to "=", and added a few tests that use it. I haven't done <code>foo.wasm</code> or <code>foo/bar.wasm</code> yet; I need to think about those a little more first.</p>
</blockquote>



<a name="197642549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642549">(May 15 2020 at 02:40)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412309999">PR Review</a>.</p>



<a name="197642550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642550">(May 15 2020 at 02:40)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425534672">PR Review Comment</a>:</p>
<blockquote>
<p>At first glance this looks like it should be <code>if instance.is_none() ...</code> (it looks like error-checking) but now I see that an Instance shouldn't be returned for commands--an explanatory comment might help?</p>
</blockquote>



<a name="197642568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642568">(May 15 2020 at 02:41)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412310223">PR Review</a>.</p>



<a name="197642569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642569">(May 15 2020 at 02:41)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425534867">PR Review Comment</a>:</p>
<blockquote>
<p>Why do we preopen dirs twice?</p>
</blockquote>



<a name="197642620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642620">(May 15 2020 at 02:42)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412310380">PR Review</a>.</p>



<a name="197642621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197642621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197642621">(May 15 2020 at 02:42)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425534982">PR Review Comment</a>:</p>
<blockquote>
<p>Instanciate -&gt; Instantiate</p>
</blockquote>



<a name="197646019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646019">(May 15 2020 at 03:58)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197646031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646031">(May 15 2020 at 03:58)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412331604">PR Review</a>.</p>



<a name="197646032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646032">(May 15 2020 at 03:58)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425553157">PR Review Comment</a>:</p>
<blockquote>
<p>Once for snapshot1 and once for snapshot0. I've now added a comment about this.</p>
</blockquote>



<a name="197646040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646040">(May 15 2020 at 03:59)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412331676">PR Review</a>.</p>



<a name="197646042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646042">(May 15 2020 at 03:59)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r425553209">PR Review Comment</a>:</p>
<blockquote>
<p>Comment added.</p>
</blockquote>



<a name="197646161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197646161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197646161">(May 15 2020 at 04:01)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="197752639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197752639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197752639">(May 15 2020 at 21:09)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-412969833">PR Review</a>.</p>



<a name="197752640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/197752640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#197752640">(May 15 2020 at 21:09)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r426048367">PR Review Comment</a>:</p>
<blockquote>
<p>I personally still feel that this is not the API we want. Adding a new constructor for instances which "does the wasi thing" is infectious and will continue to force us to duplicate API surface area into the future. I feel remembering to call <code>new_wasi_abi</code> is basically equivalent to remembering to call <code>initialize_wasi</code>, and in terms of composability I feel that an explicit function to initialize is more convenient.</p>
</blockquote>



<a name="198004909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198004909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198004909">(May 18 2020 at 22:45)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198005044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198005044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198005044">(May 18 2020 at 22:47)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198005950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198005950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198005950">(May 18 2020 at 23:00)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-413992974">PR Review</a>.</p>



<a name="198005951"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198005951" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198005951">(May 18 2020 at 23:00)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r426937463">PR Review Comment</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/lucet/pull/506">A lucet change</a> to disconnect initialization from instantiation also points in this direction.</p>
<p>I experimented with a few different API approaches to this, and came up with the patch that's now pushed here. With this, the Rust API's <code>Instance::new</code> and <code>Linker::instantiate</code> return a <code>NewInstance</code>, which is a wrapper around <code>Instance</code> where the programmer has to initialize it before getting the <code>Instance</code> out. We may need to do something different for the C API though.</p>
</blockquote>



<a name="198265778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198265778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198265778">(May 20 2020 at 22:33)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198353721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198353721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198353721">(May 21 2020 at 17:53)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198498927"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198498927" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198498927">(May 22 2020 at 21:50)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198502197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198502197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198502197">(May 22 2020 at 22:29)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198504182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504182">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417214842">PR Review</a>.</p>



<a name="198504183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504183">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417214842">PR Review</a>.</p>



<a name="198504184"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504184" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504184">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429480824">PR Review Comment</a>:</p>
<blockquote>
<p>I think this <code>::</code> should be <code>=</code> now?</p>
</blockquote>



<a name="198504185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504185">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481282">PR Review Comment</a>:</p>
<blockquote>
<p>Is <code>NewInstance</code> still necessary here? I'd imagine that 95% of invocations of <code>Instance::new</code> will immediately want to <code>.start()?</code> aftewards (and seems like 100% in this PR?). Do we have a use case for eventually getting an <code>Instance</code> but not running the <code>start</code> function?</p>
</blockquote>



<a name="198504186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504186">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481539">PR Review Comment</a>:</p>
<blockquote>
<p>The terms "reactor" and "command" I think are pretty new to the documentation here. Would it be possible to link to somewhere else that has more details? This could also clarify that non-WASI-specific modules are handled here too, and they're treated similarly as to reactors.</p>
</blockquote>



<a name="198504187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504187">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481706">PR Review Comment</a>:</p>
<blockquote>
<p>I think this section may want to also get expanded with information about how the <code>Linker</code> needs to already contain all items necessary to instantiate the module when this function is called, even if this is a command.</p>
</blockquote>



<a name="198504188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504188">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481646">PR Review Comment</a>:</p>
<blockquote>
<p>I think in general though these two paragraphs about what happens for reactor/commands could be expanded to describe in a bit more detail what's happening under the hood.</p>
</blockquote>



<a name="198504189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504189">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481972">PR Review Comment</a>:</p>
<blockquote>
<p>These and below are definitely a bummer, but I guess there's not much we can do about it?</p>
<p>How come though we validate that only functions and a few whitelisted things are exported?</p>
</blockquote>



<a name="198504190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504190">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429481812">PR Review Comment</a>:</p>
<blockquote>
<p>Would it be possible to include an inline example of a command and how it's a new instance each time?</p>
</blockquote>



<a name="198504191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504191">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429482053">PR Review Comment</a>:</p>
<blockquote>
<p>This I think may want to use the debug formatter instead of <code>Display</code> to capture the full context of the <code>anyhow::Error</code></p>
</blockquote>



<a name="198504192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504192">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429482190">PR Review Comment</a>:</p>
<blockquote>
<p>Could a small inline comment be added above this whole statement indicating why all these <code>.unwrap()</code>s aren't expected to fail?</p>
</blockquote>



<a name="198504193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504193">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429482565">PR Review Comment</a>:</p>
<blockquote>
<p>Also since this is WASI-specific would it make sense to do something like <code>get_wasi_default()</code>?</p>
</blockquote>



<a name="198504194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504194">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429482493">PR Review Comment</a>:</p>
<blockquote>
<p>This function feels a bit odd to me because the notion of a "default" export doesn't seems super well defined. Is there WASI documentation this could link to? </p>
<p>In isolation it seems like this API should be on an <code>Instance</code> as well, but I understand why it's here instead of instances at this time. Perhaps they could share an implementation of sorts?</p>
</blockquote>



<a name="198504195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504195">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429482691">PR Review Comment</a>:</p>
<blockquote>
<p>I think this should highlight very clearly that that the major purpose of this method is to transparently handle WASI conventions as well, e.g. "WASI" should be somewhere in this heading.</p>
</blockquote>



<a name="198504196"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504196" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504196">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429483112">PR Review Comment</a>:</p>
<blockquote>
<p>Anyway, not something to handle in this PR, just a thought.</p>
</blockquote>



<a name="198504197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504197">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429483277">PR Review Comment</a>:</p>
<blockquote>
<p>While probably not a huge issue it's a bit odd that we have to assign <em>a</em> name to the instance here, since ideally we'd pull out an instance and "do the wasi thing" on it.</p>
</blockquote>



<a name="198504198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198504198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198504198">(May 22 2020 at 22:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429483078">PR Review Comment</a>:</p>
<blockquote>
<p>This is a "preexisting" bug but we should probably at some point spawn this thread before we start instantiating anything to account for <code>start</code> functions and <code>_initialize</code> and such.</p>
<p>(although ideally still discounting compile times of <code>Module</code>)</p>
</blockquote>



<a name="198505825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198505825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198505825">(May 22 2020 at 23:21)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417222328">PR Review</a>.</p>



<a name="198505827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198505827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198505827">(May 22 2020 at 23:21)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429487197">PR Review Comment</a>:</p>
<blockquote>
<p>I guess you're right. I was initially thinking of <a href="https://github.com/bytecodealliance/lucet/pull/506">https://github.com/bytecodealliance/lucet/pull/506</a>, but on reflection, I think this will become less important over time. If we ever do need this, we can always add a separate <code>Instance</code> constructor to construct a partially-initialized <code>Instance</code>.</p>
</blockquote>



<a name="198506355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198506355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198506355">(May 22 2020 at 23:30)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198506366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198506366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198506366">(May 22 2020 at 23:31)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417224157">PR Review</a>.</p>



<a name="198506367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198506367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198506367">(May 22 2020 at 23:31)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429488741">PR Review Comment</a>:</p>
<blockquote>
<p>I've now expanded this comment accordingly.</p>
</blockquote>



<a name="198507752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198507752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198507752">(May 22 2020 at 23:58)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417228610">PR Review</a>.</p>



<a name="198507753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198507753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198507753">(May 22 2020 at 23:58)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429492569">PR Review Comment</a>:</p>
<blockquote>
<p>I'm actually trying to de-emphasize "WASI" here. Commands and Reactors are currently defined in a WASI-repository page, but they're not related to WASI APIs, and I expect they'll eventually move out into the linking and/or interface-types specs.</p>
</blockquote>



<a name="198508192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508192">(May 23 2020 at 00:07)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417230199">PR Review</a>.</p>



<a name="198508193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508193">(May 23 2020 at 00:07)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429494068">PR Review Comment</a>:</p>
<blockquote>
<p>Good point. Perhaps, if caching is enabled and a timeout is requested, we can prime the cache with module compilations, and then start the timer before we start the <code>Linker</code>. If caching is disabled, then we just count compilation time toward the timeout, perhaps.</p>
</blockquote>



<a name="198508234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508234">(May 23 2020 at 00:08)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198508272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508272">(May 23 2020 at 00:09)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417230397">PR Review</a>.</p>



<a name="198508275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508275">(May 23 2020 at 00:09)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429494242">PR Review Comment</a>:</p>
<blockquote>
<p>I used a name here because I think src/commands/run.rs shouldn't be pulling out the instance and doing the initialization manually. The <code>Linker</code> handles that for it, which is good because then the functionality is available to API users as well as command-line users.</p>
</blockquote>



<a name="198508822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508822">(May 23 2020 at 00:22)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-417232160">PR Review</a>.</p>



<a name="198508824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508824">(May 23 2020 at 00:22)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r429495710">PR Review Comment</a>:</p>
<blockquote>
<p>Rust is one of the toolchains using <code>--export-dynamic</code> and I'd ideally like to remove that, but I need to figure out exactly how Rust use cases are depending on that before we can remove it. I've heard of other toolchains using it as well, as it sort of gives people what they want -- "just export my stuff". Except that <code>--export-dynamic</code> was implemented in wasm-ld to handle the Emscripten-specific dynamic linking scheme used in Emscripten, so it also does some additional things that Emscripten needs like exporting <code>__heap_base</code> and <code>__data_end</code>, even when we aren't using Emscripten. So we have a multi-project backwards compatibility knot to untie before we can fix this.</p>
<p>In general, it doesn't make sense for Commands to export globals, tables, or memories, because those are all about state, and Commands don't have any state, except when one of their exported functions is being called.</p>
</blockquote>



<a name="198508928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198508928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198508928">(May 23 2020 at 00:25)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198512748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198512748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198512748">(May 23 2020 at 02:06)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a> from <code>reactor</code> to <code>master</code>:</p>
<blockquote>
<p>This implements the new WASI ABI described here:</p>
<p><a href="https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md">https://github.com/WebAssembly/WASI/blob/master/design/application-abi.md</a></p>
<p>It adds APIs to <code>Instance</code> and <code>Linker</code> with support for running<br>
WASI programs, and also simplifies the process of instantiating<br>
WASI API modules.</p>
<p>This currently only includes Rust API support.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="198780815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198780815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198780815">(May 26 2020 at 15:38)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#pullrequestreview-418426873">PR Review</a>.</p>



<a name="198780816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198780816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198780816">(May 26 2020 at 15:38)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1565#discussion_r430509648">PR Review Comment</a>:</p>
<blockquote>
<p>Ah yeah our usage of LLD is <em>very</em> dated at this point in rustc. At least for rustc it probably won't be too too hard to fix this I think.</p>
</blockquote>



<a name="198781022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231565%20Reactor%20support./near/198781022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231565.20Reactor.20support.2E.html#198781022">(May 26 2020 at 15:39)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1565">PR #1565</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>