<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1427 there are now two WASI submodules · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html">wasmtime / Issue #1427 there are now two WASI submodules</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="192096000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192096000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192096000">(Mar 28 2020 at 00:33)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>As of 6c0c8a46 (#1416), there are two WASI submodules, one at <code>crates/wasi-common/WASI</code> and one at <code>crates/wasi-common/wig/WASI</code>. The commit message doesn't  make it clear which of these is intended. I suspect this is something that got messed up in the squash merge?</p>
</blockquote>



<a name="192096005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192096005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192096005">(Mar 28 2020 at 00:33)</a>:</h4>
<p>pchickey assigned <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>As of 6c0c8a46 (#1416), there are two WASI submodules, one at <code>crates/wasi-common/WASI</code> and one at <code>crates/wasi-common/wig/WASI</code>. The commit message doesn't  make it clear which of these is intended. I suspect this is something that got messed up in the squash merge?</p>
</blockquote>



<a name="192096030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192096030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192096030">(Mar 28 2020 at 00:34)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a> (assigned to sunfishcode):</p>
<blockquote>
<p>As of 6c0c9a46 (#1416), there are two WASI submodules, one at <code>crates/wasi-common/WASI</code> and one at <code>crates/wasi-common/wig/WASI</code>. The commit message doesn't  make it clear which of these is intended. I suspect this is something that got messed up in the squash merge?</p>
</blockquote>



<a name="192096060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192096060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192096060">(Mar 28 2020 at 00:34)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a> (assigned to sunfishcode):</p>
<blockquote>
<p>As of 6c0c9a46 (#1416), there are two WASI submodules, one at <code>crates/wasi-common/WASI</code> and one at <code>crates/wasi-common/wig/WASI</code>. The commit message doesn't make it clear which of these is intended. I suspect this is something that got messed up in the squash merge?</p>
</blockquote>



<a name="192096236"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192096236" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192096236">(Mar 28 2020 at 00:39)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-605368797" title="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-605368797">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>Sorry for the confusion here. The problem is that <code>cargo publish</code> doesn't include <code>wig/WASI</code> in the <code>wasi-common</code> package, causing it to break when built out of tree. An <code>include = </code> directive in Cargo.toml didn't fix it. Adding a <code>WASI</code> symlink fixed it for Mac and Linux but didn't work on Windows. </p>
<p>Since both <code>wasi-common</code> and <code>wig</code> need a <code>WASI</code> directory, for now, the simplest way to fix it was to give them each their own.</p>
</blockquote>



<a name="192097326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192097326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192097326">(Mar 28 2020 at 01:05)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-605372193" title="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-605372193">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>Dang. Well, <code>wig</code> is hopefully on its last legs, I expect we'll be able to get rid of it within a month or so. In the meantime, we point to the <code>witx</code> path underneath <code>wig</code>. If the one under <code>wasi-common</code> is expected to eventually be the only remaining, should we point there instead?</p>
<p>And, can we add some sort of CI check that both submodules have the same rev checked out, so that they dont accidentally get out-of-sync?</p>
<p>I'll take both of these tasks.</p>
</blockquote>



<a name="192278051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192278051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192278051">(Mar 30 2020 at 16:07)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-606092191" title="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-606092191">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>I managed to cook up <a href="https://github.com/bytecodealliance/wasmtime/pull/1434" title="https://github.com/bytecodealliance/wasmtime/pull/1434">https://github.com/bytecodealliance/wasmtime/pull/1434</a> which I think removes the need for two submodules through "weird cargo hacks"</p>
</blockquote>



<a name="192307765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192307765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192307765">(Mar 30 2020 at 19:45)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a> (assigned to sunfishcode):</p>
<blockquote>
<p>As of 6c0c9a46 (#1416), there are two WASI submodules, one at <code>crates/wasi-common/WASI</code> and one at <code>crates/wasi-common/wig/WASI</code>. The commit message doesn't make it clear which of these is intended. I suspect this is something that got messed up in the squash merge?</p>
</blockquote>



<a name="192314642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231427%20there%20are%20now%20two%20WASI%20submodules/near/192314642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231427.20there.20are.20now.20two.20WASI.20submodules.html#192314642">(Mar 30 2020 at 20:42)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-606238580" title="https://github.com/bytecodealliance/wasmtime/issues/1427#issuecomment-606238580">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1427" title="https://github.com/bytecodealliance/wasmtime/issues/1427">Issue #1427</a>:</p>
<blockquote>
<p>Thank you!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>