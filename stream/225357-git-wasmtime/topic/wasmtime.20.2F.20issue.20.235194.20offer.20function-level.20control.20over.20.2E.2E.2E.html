<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5194 offer function-level control over ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html">wasmtime / issue #5194 offer function-level control over ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="307845087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307845087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307845087">(Nov 03 2022 at 21:43)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302709787">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @kubkon</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasi"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>kubkon: wasi</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="307852935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307852935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307852935">(Nov 03 2022 at 22:38)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302757891">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Thanks. I'd rather not break the current use of <code>tracing: true | false</code> in the macro if we can avoid it. For suppressing it on certain functions, could you add an optional suffix like, perhaps, <code>tracing: true except { module::func, module2::func2</code>?</p>
</blockquote>



<a name="307852948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307852948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307852948">(Nov 03 2022 at 22:38)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302757891">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Thanks. I'd rather not break the current use of <code>tracing: true | false</code> in the macro if we can avoid it. For suppressing it on certain functions, could you add an optional suffix like, perhaps, <code>tracing: true except { module::func, module2::func2 }</code>?</p>
</blockquote>



<a name="307856960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307856960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307856960">(Nov 03 2022 at 23:11)</a>:</h4>
<p>joeshaw <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302777506">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Thanks for the feedback, I'll look into it.  My worry with <code>except</code> is that you might expect something different if you did <code>tracing: false except { module::func }</code> but there's probably another word we can use.</p>
</blockquote>



<a name="307858135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307858135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307858135">(Nov 03 2022 at 23:23)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302784554">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>It should probably give an error if used in the <code>false</code> case? <code>exclude</code> is another word we could use.</p>
</blockquote>



<a name="307872849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307872849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307872849">(Nov 04 2022 at 02:18)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1302873845">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Perhaps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">tracing</span>: <span class="nc">true</span><span class="p">,</span><span class="w"> </span><span class="c1">//  all functions</span>

<span class="c1">// ... or ...</span>

<span class="n">tracing</span>: <span class="nc">false</span><span class="p">,</span><span class="w"> </span><span class="c1">// no functions</span>

<span class="c1">// ... or ...</span>

<span class="n">tracing</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span><span class="w"> </span><span class="c1">// only these functions</span>
</code></pre></div>
<p>Would that work for your use case? I agree we'd ideally avoid various directions of lists here if we could. One possibility would be to support globs as well if families of functions to trace all have similar names. I suppose this could even go so far as to have:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">tracing</span>: <span class="p">[</span><span class="s">"trace-me"</span><span class="p">,</span><span class="w"> </span><span class="s">"!this-is-not-trace"</span><span class="p">],</span><span class="w"></span>
</code></pre></div>
<p>where a <code>!</code> in front disables tracing for that function (or any other matching globs)</p>
</blockquote>



<a name="307975538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/307975538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#307975538">(Nov 04 2022 at 14:51)</a>:</h4>
<p>joeshaw <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303678983">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>@alexcrichton For my use case, I am looking to suppress tracing from a function that carries sensitive information, so negation is the only thing that'd work.</p>
<p>Taking a step back: is there a strong reason to have the tracing config be highly customizable?  I think I have a compelling reason for _disabling_ tracing on a particular function but is it important to be able to turn it on for just a few functions?</p>
<p>I'm also hesitant to diverge too much from syntax that already exists.  <code>async</code> allows either a catchall (<code>async: *</code>) or a list of identifiers in braces (<code>async: { module::func1, module::func2 }</code>).<br>
</p>
</blockquote>



<a name="308002249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308002249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308002249">(Nov 04 2022 at 16:46)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303863654">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Keeping consistent with <code>async</code> seems reasonable, but I think that it's fine to change the syntaxes for both at the same time. I would agree that there's probably not much of a use case for "just this function". Perhaps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">tracing</span>: <span class="nc">true</span><span class="p">,</span><span class="w"></span>
<span class="n">tracing</span>: <span class="nc">false</span><span class="p">,</span><span class="w"></span>
<span class="n">tracing_skip</span>: <span class="p">[</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">]</span><span class="w"></span>
</code></pre></div>
<p>and that may work?</p>
</blockquote>



<a name="308013691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308013691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308013691">(Nov 04 2022 at 17:44)</a>:</h4>
<p>joeshaw <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303940694">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>I pushed a new set of commits that implements what @pchickey suggested (but with <code>disable_for</code> instead of <code>except</code> -- but happy to change this back).</p>
<p>Example usage:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wiggle</span>::<span class="n">from_witx</span><span class="o">!</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="n">tracing</span>: <span class="nc">true</span><span class="w"> </span><span class="n">disable_for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">module1</span>::<span class="n">func</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">module2</span>::<span class="n">another_func</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">witx</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="308014571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308014571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308014571">(Nov 04 2022 at 17:49)</a>:</h4>
<p>joeshaw edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303940694">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>I pushed a new set of commits that implements what @pchickey suggested (but with <code>disable_for</code> instead of <code>except</code> because I think it flows better even if you change <code>true</code> to <code>false</code> -- but happy to change this back).</p>
<p>Example usage:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wiggle</span>::<span class="n">from_witx</span><span class="o">!</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="n">tracing</span>: <span class="nc">true</span><span class="w"> </span><span class="n">disable_for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">module1</span>::<span class="n">func</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">module2</span>::<span class="n">another_func</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">witx</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="308015064"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308015064" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308015064">(Nov 04 2022 at 17:50)</a>:</h4>
<p>joeshaw edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303940694">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>I pushed a new set of commits that implements what @pchickey suggested (but with <code>disable_for</code> instead of <code>except</code> because I think it flows better even if you change <code>true</code> to <code>false</code> -- but happy to change this back).</p>
<p>Example usage:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wiggle</span>::<span class="n">from_witx</span><span class="o">!</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="n">tracing</span>: <span class="nc">true</span><span class="w"> </span><span class="n">disable_for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">module1</span>::<span class="n">func</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">module2</span>::<span class="n">another_func</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">witx</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div>
<p>I'm also happy to switch this to be a separate argument altogether if that's preferred.</p>
</blockquote>



<a name="308015147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308015147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308015147">(Nov 04 2022 at 17:51)</a>:</h4>
<p>joeshaw edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1303940694">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>I pushed a new set of commits that implements what @pchickey suggested (but with <code>disable_for</code> instead of <code>except</code> because I think it flows better even if you change <code>true</code> to <code>false</code> -- but happy to change this back).</p>
<p>Example usage:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wiggle</span>::<span class="n">from_witx</span><span class="o">!</span><span class="p">({</span><span class="w"></span>
<span class="w">    </span><span class="n">tracing</span>: <span class="nc">true</span><span class="w"> </span><span class="n">disable_for</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">module1</span>::<span class="n">func</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="n">module2</span>::<span class="n">another_func</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">witx</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</code></pre></div>
<p>I'm also happy to switch this to be a separate argument altogether (@alexcrichton's <code>tracing_skip</code> suggestion) if that's preferred.</p>
</blockquote>



<a name="308037476"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308037476" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308037476">(Nov 04 2022 at 19:49)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1304093785">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Seems reasonable to me <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> but I defer to @pchickey for the final approval</p>
</blockquote>



<a name="308175057"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235194%20offer%20function-level%20control%20over%20.../near/308175057" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235194.20offer.20function-level.20control.20over.20.2E.2E.2E.html#308175057">(Nov 05 2022 at 18:31)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/5194#issuecomment-1304607209">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5194">issue #5194</a>:</p>
<blockquote>
<p>Thanks @joeshaw, this is good work.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>