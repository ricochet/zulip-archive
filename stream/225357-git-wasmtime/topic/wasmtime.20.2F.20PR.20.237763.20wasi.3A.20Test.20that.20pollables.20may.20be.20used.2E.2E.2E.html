<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7763 wasi: Test that pollables may be used... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html">wasmtime / PR #7763 wasi: Test that pollables may be used...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="411986503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/411986503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#411986503">(Jan 09 2024 at 18:03)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a> from <code>elliottt:trevor/pollable-reuse-test</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>We didn't have a test that covered using a pollable multiple times in the test-programs, despite relying on that behavior in the preview1 adapter.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="411986633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/411986633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#411986633">(Jan 09 2024 at 18:04)</a>:</h4>
<p>elliottt <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#issuecomment-1883539329">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>:</p>
<blockquote>
<p>@pchickey and @guybedford, does this look like enough to have caused a test failure in the jco work?</p>
</blockquote>



<a name="412004323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412004323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412004323">(Jan 09 2024 at 20:08)</a>:</h4>
<p>guybedford <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#issuecomment-1883706415">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>:</p>
<blockquote>
<p>Unfortunately I tried this in JCO and it is definitely passing, so I don't think this is capturing a case. JCO pollables will only ever resolve once as they are promise-based, after which they will be always-resolving. @elliottt let me know if I can help debug further at all.</p>
</blockquote>



<a name="412004340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412004340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412004340">(Jan 09 2024 at 20:08)</a>:</h4>
<p>guybedford edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#issuecomment-1883706415">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>:</p>
<blockquote>
<p>Unfortunately I tried this in JCO and it is definitely passing, so I don't think this is capturing the case. JCO pollables will only ever resolve once as they are promise-based, after which they will be always-resolving. @elliottt let me know if I can help debug further at all.</p>
</blockquote>



<a name="412005507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412005507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412005507">(Jan 09 2024 at 20:16)</a>:</h4>
<p>guybedford submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1811915835">PR review</a>.</p>



<a name="412005509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412005509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412005509">(Jan 09 2024 at 20:16)</a>:</h4>
<p>guybedford created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446554258">PR review comment</a>:</p>
<blockquote>
<p>Perhaps this should write until check write doesn't allow anymore writing to ensure it's hitting backpressure?</p>
<p>The issue here in JCO is that we don't have backpressure for stdout since Node.js doesn't support it (<a href="https://nodejs.org/docs/latest/api/process.html#a-note-on-process-io">https://nodejs.org/docs/latest/api/process.html#a-note-on-process-io</a>).</p>
</blockquote>



<a name="412008430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412008430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412008430">(Jan 09 2024 at 20:37)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446589892">PR review comment</a>:</p>
<blockquote>
<p>I'm working separately on a test that pipes stdout to stdin of another instantiation of the same component, and I think will give us a lot more control over how this test works. I'll ping you when it's ready :)</p>
</blockquote>



<a name="412008431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412008431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412008431">(Jan 09 2024 at 20:37)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1811969372">PR review</a>.</p>



<a name="412033198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412033198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412033198">(Jan 09 2024 at 23:58)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042496">(Jan 10 2024 at 01:07)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042516">(Jan 10 2024 at 01:07)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042704">(Jan 10 2024 at 01:09)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042758">(Jan 10 2024 at 01:09)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a> as ready for review.</p>



<a name="412042761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042761">(Jan 10 2024 at 01:09)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042763"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042763" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042763">(Jan 10 2024 at 01:09)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042775">(Jan 10 2024 at 01:09)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/guybedford">guybedford</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412042779"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412042779" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412042779">(Jan 10 2024 at 01:09)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<a name="412061678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412061678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412061678">(Jan 10 2024 at 04:35)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1812393072">PR review</a>.</p>



<a name="412061679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412061679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412061679">(Jan 10 2024 at 04:35)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1812393072">PR review</a>.</p>



<a name="412061681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412061681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412061681">(Jan 10 2024 at 04:35)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446873360">PR review comment</a>:</p>
<blockquote>
<p>Just curious why you chose to create a new prefix and test for these test programs and tests? or can we just make them part of the cli tests?</p>
</blockquote>



<a name="412061682"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412061682" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412061682">(Jan 10 2024 at 04:35)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446872706">PR review comment</a>:</p>
<blockquote>
<p>rather than kill the consumer, can we tell each the producer and consumer how many bytes or messages to send/expect total, so they can both exit gracefully once those conditions are met? this will also let us assert, in the consumer, that after everything expected is consumed, the pollable does not become ready "ever again" (poll with a 250ms timeout and call it good)</p>
</blockquote>



<a name="412063411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412063411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412063411">(Jan 10 2024 at 04:57)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1812408530">PR review</a>.</p>



<a name="412063413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412063413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412063413">(Jan 10 2024 at 04:57)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446883351">PR review comment</a>:</p>
<blockquote>
<p>These are slightly different, as they require two instances to be setup. I suppose they could be cli tests, but it seemed cleaner to separate them out, given that they have special run requirements.</p>
</blockquote>



<a name="412063463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412063463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412063463">(Jan 10 2024 at 04:57)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1446883659">PR review comment</a>:</p>
<blockquote>
<p>If the producer panics, we'll still want to kill the consumer. This was more about ensuring that we cleanup failures properly than anything else.</p>
</blockquote>



<a name="412063464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412063464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412063464">(Jan 10 2024 at 04:57)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1812408952">PR review</a>.</p>



<a name="412195234"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412195234" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412195234">(Jan 10 2024 at 18:11)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1813824456">PR review</a>.</p>



<a name="412195235"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412195235" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412195235">(Jan 10 2024 at 18:11)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1447752354">PR review comment</a>:</p>
<blockquote>
<p>Additionally, consumed amount is something that we could compute in the individual piped tests, and I think would be easier to debug as an assertion failure in the consumer side.</p>
</blockquote>



<a name="412201895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412201895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412201895">(Jan 10 2024 at 18:59)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1813910011">PR review</a>.</p>



<a name="412201898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412201898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412201898">(Jan 10 2024 at 18:59)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1447806376">PR review comment</a>:</p>
<blockquote>
<p>got it! sounds good.</p>
</blockquote>



<a name="412201946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412201946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412201946">(Jan 10 2024 at 19:00)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1813910225">PR review</a>.</p>



<a name="412201949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412201949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412201949">(Jan 10 2024 at 19:00)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#discussion_r1447806505">PR review comment</a>:</p>
<blockquote>
<p>works for me</p>
</blockquote>



<a name="412202101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412202101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412202101">(Jan 10 2024 at 19:00)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7763#pullrequestreview-1813911876">PR review</a>.</p>



<a name="412227856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237763%20wasi%3A%20Test%20that%20pollables%20may%20be%20used.../near/412227856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237763.20wasi.3A.20Test.20that.20pollables.20may.20be.20used.2E.2E.2E.html#412227856">(Jan 10 2024 at 22:10)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7763">PR #7763</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>