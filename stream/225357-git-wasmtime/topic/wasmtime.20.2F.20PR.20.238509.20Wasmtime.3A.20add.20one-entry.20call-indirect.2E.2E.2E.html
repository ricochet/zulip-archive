<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8509 Wasmtime: add one-entry call-indirect... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html">wasmtime / PR #8509 Wasmtime: add one-entry call-indirect...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="436153650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436153650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436153650">(Apr 29 2024 at 22:44)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a> from <code>cfallin:call-indirect-caching</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>In WebAssembly, an indirect call is somewhat slow, because of the indirection required by CFI (control-flow integrity) sandboxing. In particular, a "function pointer" in most source languages compiled to Wasm is represented by an index into a table of funcrefs. The <code>call_indirect</code> instruction then has to do the following steps to invoke a function pointer:</p>
<ul>
<li>Load the funcref table's base and length values from the vmctx.</li>
<li>Bounds-check the invoked index against the actual table size; trap if out-of-bounds.</li>
<li>Spectre mitigation (cmove) on that bounds-check.</li>
<li>Load the <code>vmfuncref</code> from the table given base and index.<ul>
<li>For lazy table init, check if this is a non-initialized funcref pointer, and initialize the entry.</li>
</ul>
</li>
<li>Load the signature from the funcref struct and compare it against the <code>call_indirect</code>'s expected signature; trap if wrong.</li>
<li>Load the actual code pointer for the callee's Wasm-ABI entry point.</li>
<li>Load the callee vmctx (which may be different for a cross-module call).</li>
<li>Put that vmctx in arg 0, our vmctx in arg 1, and invoke the loaded code pointer with an indirect call instruction.</li>
</ul>
<p>Compare and contrast to the process involved in invoking a native function pointer:</p>
<ul>
<li>Invoke the code pointer with an indirect call instruction.</li>
</ul>
<p>This overhead buys us something -- it is part of the SFI sandbox boundary -- but it is very repetitive and unnecessary work in <em>most</em> cases when indirect function calls are performed repeatedly (such as within an inner loop).</p>
<p>This PR introduces the idea of <em>caching</em>: if we know that the result of all the above checks won't change, then if we use the same index as "the last time" (for some definition), we can skip straight to the "invoke the code pointer" step, with a cached code pointer from that last time.</p>
<p>Concretely, it introduces a two-word struct inlined into the vmctx for each <code>call_indirect</code> instruction in the module (up to a limit):</p>
<ul>
<li>The last invoked index;</li>
<li>The code pointer that index corresponded to.</li>
</ul>
<p>When compiling the module, we check whether the table could possibly be mutable at a given index once read: any instructions like <code>table.set</code>, or the whole table exported thus writable from the outside. We also check whether index 0 is a non-null funcref. If neither of these things are true, then we know we can cache an index-to-code-pointer mapping, and we know we can use index 0 as a sentinel for "no cached value".</p>
<p>We then make use of the struct for each indirect call site and generate code to check if the index matches; if so, call cached pointer; if not, load the vmfuncref, check the signature, check that the callee vmctx is the same as caller (intra-module case), and stash the code pointer and index away (fill the cache), then make the call.</p>
<p>On an in-development branch of SpiderMonkey-in-Wasm with ICs (using indirect calls), this is about a 20% speedup; I haven't yet measured on other benchmarks. It is expected that this might be an instantiation-time slowdown due to a larger vmctx (but we could use madvise to zero if needed).</p>
<p>This feature is off by default right now.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="436153652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436153652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436153652">(Apr 29 2024 at 22:44)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436153653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436153653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436153653">(Apr 29 2024 at 22:44)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436154118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436154118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436154118">(Apr 29 2024 at 22:47)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2083815498">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>(I'll run some benchmarks to see what the compile-time impact is like, and how this benefits non-SpiderMonkey workloads; TBD.)</p>
</blockquote>



<a name="436155678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436155678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436155678">(Apr 29 2024 at 22:56)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436161500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436161500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436161500">(Apr 29 2024 at 23:45)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2083878567">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>Benchmarks:</p>
<ul>
<li>Sightglass measures the following for <code>spidermonkey.wasm</code>:</li>
</ul>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">compilation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1456249767.40</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">1315409020.02</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="n">original</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.01</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.17</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">indirect</span><span class="o">-</span><span class="n">calls</span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">17934023164</span><span class="w"> </span><span class="mf">18070879867.60</span><span class="w"> </span><span class="mi">18215783322</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">indirect</span><span class="o">-</span><span class="n">calls</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">15377276916</span><span class="w"> </span><span class="mf">16614630100.20</span><span class="w"> </span><span class="mi">17840489432</span><span class="p">]</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="err">Δ</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">27069455.80</span><span class="w"> </span><span class="err">±</span><span class="w"> </span><span class="mf">22219096.46</span><span class="w"> </span><span class="p">(</span><span class="n">confidence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">99</span><span class="o">%</span><span class="p">)</span>

<span class="w">  </span><span class="n">original</span><span class="p">.</span><span class="n">so</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="mf">1.00</span><span class="n">x</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mf">1.05</span><span class="n">x</span><span class="w"> </span><span class="n">faster</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">indirect</span><span class="o">-</span><span class="n">calls</span><span class="p">.</span><span class="n">so</span><span class="o">!</span>

<span class="w">  </span><span class="p">[</span><span class="mi">1079208474</span><span class="w"> </span><span class="mf">1095097604.00</span><span class="w"> </span><span class="mi">1142114396</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">indirect</span><span class="o">-</span><span class="n">calls</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">1035034082</span><span class="w"> </span><span class="mf">1068028148.20</span><span class="w"> </span><span class="mi">1094035960</span><span class="p">]</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">834480</span><span class="w"> </span><span class="mf">856949.40</span><span class="w"> </span><span class="mi">902120</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="o">-</span><span class="n">indirect</span><span class="o">-</span><span class="n">calls</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">831744</span><span class="w"> </span><span class="mf">860156.60</span><span class="w"> </span><span class="mi">978994</span><span class="p">]</span><span class="w"> </span><span class="n">original</span><span class="p">.</span><span class="n">so</span>
</code></pre></div>
<p>so compilation time does take a little hit but my system is noisy; somewhere between 1% and 17%, the mean looks to be around 8.7%. Instantiation apparently unaffected. And execution time... slightly slower? (But again, noisy system.)</p>
<p>I tried running the next benchmark in the list (pulldown-cmark) and Sightglass crashed mysteriously, so on to trusty <code>hyperfine</code>: no deltas in runtime on spidermonkey or bz2, my two usual suspects.</p>
<p>I suspect that mostly we'll see mostly in-the-noise results for most benchmarks because indirect calls are somewhat rare in C-ish code; it will matter mostly when compiling dynamic languages, or something like Java with a lot of virtual calls. The speedup on weval'd SpiderMonkey is real though so I'd like to at least have this in tree as an option :-) </p>
</blockquote>



<a name="436180087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436180087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436180087">(Apr 30 2024 at 02:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2084268226">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @saulecabrera</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api", "wasmtime:config", "winch"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>saulecabrera: winch</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="436180110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436180110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436180110">(Apr 30 2024 at 02:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2084268706">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<h4>Label Messager: wasmtime:config</h4>
<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>
complete this check list:</p>
<ul>
<li>
<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>
      it.</p>
<p>&lt;details&gt;</p>
<p>Our documentation should be of the following form:</p>
<p>```text<br>
Short, simple summary sentence.</p>
<p>More details. These details can be multiple paragraphs. There should be<br>
information about not just the method, but its parameters and results as<br>
well.</p>
<p>Is this method fallible? If so, when can it return an error?</p>
<p>Can this method panic? If so, when does it panic?</p>
<h1>Example</h1>
<p>Optional example here.<br>
```</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>
  ensured that this configuration is exercised by the fuzz targets.</p>
<p>&lt;details&gt;</p>
<p>For example, if you expose a new strategy for allocating the next instance<br>
slot inside the pooling allocator, you should ensure that at least one of our<br>
fuzz targets exercises that new strategy.</p>
<p>Often, all that is required of you is to ensure that there is a knob for this<br>
configuration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>
of its nested <code>struct</code>s).</p>
<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>
configuration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you are enabling a configuration option by default, make sure that it<br>
  has been fuzzed for at least two weeks before turning it on by default.</p>
</li>
</ul>
<p>[fuzzing-config]: <a href="https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>
[fuzzing-docs]: <a href="https://docs.wasmtime.dev/contributing-fuzzing.html">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>
<hr>
<p>&lt;details&gt;</p>
<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>
<p>To add new label messages or remove existing label messages, edit the<br>
&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/label-messager-action">Learn more.</a></p>
<p>&lt;/details&gt;</p>
</blockquote>



<a name="436297757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436297757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436297757">(Apr 30 2024 at 15:26)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2085668749">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>FWIW, I did a 100-iteration sightglass run of the default suite and got these results:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">instantiation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">472878</span><span class="w"> </span><span class="mf">584750.13</span><span class="w"> </span><span class="mi">1435913</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">471975</span><span class="w"> </span><span class="mf">647599.28</span><span class="w"> </span><span class="mi">1762837</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">7422842</span><span class="w"> </span><span class="mf">8744920.24</span><span class="w"> </span><span class="mi">28196476</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">7439782</span><span class="w"> </span><span class="mf">9281270.19</span><span class="w"> </span><span class="mi">32569639</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">165456</span><span class="w"> </span><span class="mf">245749.33</span><span class="w"> </span><span class="mi">728069</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">161764</span><span class="w"> </span><span class="mf">251740.72</span><span class="w"> </span><span class="mi">723740</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">95484875</span><span class="w"> </span><span class="mf">104221743.11</span><span class="w"> </span><span class="mi">196171026</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">95454637</span><span class="w"> </span><span class="mf">105918836.28</span><span class="w"> </span><span class="mi">208434699</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">358282063</span><span class="w"> </span><span class="mf">404458268.52</span><span class="w"> </span><span class="mi">568579026</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">367557812</span><span class="w"> </span><span class="mf">399158971.64</span><span class="w"> </span><span class="mi">551388853</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">bz2</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">194765165</span><span class="w"> </span><span class="mf">225581880.12</span><span class="w"> </span><span class="mi">437412507</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">197703277</span><span class="w"> </span><span class="mf">222917937.46</span><span class="w"> </span><span class="mi">281571195</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">execution</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">895587497</span><span class="w"> </span><span class="mf">923280792.22</span><span class="w"> </span><span class="mi">972838288</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">891917856</span><span class="w"> </span><span class="mf">927697965.55</span><span class="w"> </span><span class="mi">1121115203</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">compilation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">spidermonkey</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">8325711261</span><span class="w"> </span><span class="mf">8502522129.94</span><span class="w"> </span><span class="mi">8732981273</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">8370183347</span><span class="w"> </span><span class="mf">8530524550.49</span><span class="w"> </span><span class="mi">9984684780</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>

<span class="n">instantiation</span><span class="w"> </span>:: <span class="nc">cycles</span><span class="w"> </span>:: <span class="nc">benchmarks</span><span class="o">/</span><span class="n">pulldown</span><span class="o">-</span><span class="n">cmark</span><span class="o">/</span><span class="n">benchmark</span><span class="p">.</span><span class="n">wasm</span>

<span class="w">  </span><span class="n">No</span><span class="w"> </span><span class="n">difference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">performance</span><span class="p">.</span>

<span class="w">  </span><span class="p">[</span><span class="mi">214742</span><span class="w"> </span><span class="mf">289658.22</span><span class="w"> </span><span class="mi">800685</span><span class="p">]</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">so</span>
<span class="w">  </span><span class="p">[</span><span class="mi">204642</span><span class="w"> </span><span class="mf">290351.57</span><span class="w"> </span><span class="mi">854625</span><span class="p">]</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">so</span>
</code></pre></div>
<p>I think it is safe to say that this doesn't have an affect on our regular suite, and I expect that the JS speed ups you are reporting rely on weval'ing first.</p>
</blockquote>



<a name="436309118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309118">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2031826325">PR review</a>:</p>
<blockquote>
<p>Overall looks great, but I have a few nitpicks, mostly related to improving things for future code readers. Thanks!</p>
</blockquote>



<a name="436309120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309120">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2031826325">PR review</a>:</p>
<blockquote>
<p>Overall looks great, but I have a few nitpicks, mostly related to improving things for future code readers. Thanks!</p>
</blockquote>



<a name="436309124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309124">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585111382">PR review comment</a>:</p>
<blockquote>
<p>Care to add a brief comment to this test file about what we are aiming to exercise here, so that future changes that happen to tweak this disassembly know what property to check is preserved in their changes?</p>
</blockquote>



<a name="436309125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309125">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585101299">PR review comment</a>:</p>
<blockquote>
<p>All the rest of our offset getters are using typed indices; can we define a <code>CallIndirectSiteIndex</code> (feel free to word smith) type for these? It just takes three lines in <code>crates/types/src/lib.rs</code>:</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/types/src/lib.rs#L833-L846">https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/types/src/lib.rs#L833-L846</a></p>
</blockquote>



<a name="436309127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309127">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585095494">PR review comment</a>:</p>
<blockquote>
<p>That's a lot of "index", perhaps we could reword this a little and rename the <code>index</code> parameter to <code>call_site</code>? I think this is a little more clear:</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    /// Return the offset from `self` of `self.call_indirect_caches[call_site].index`.
</code></pre></div>
<p>(And similar above)</p>
</blockquote>



<a name="436309128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309128">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585112652">PR review comment</a>:</p>
<blockquote>
<p>(ditto for all these tests)</p>
</blockquote>



<a name="436309129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309129">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585084044">PR review comment</a>:</p>
<blockquote>
<p>Could you add some comments here for future readers and possibly factor this scan out into a helper method to help prevent this function from getting even more gigantic?</p>
</blockquote>



<a name="436309130"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309130" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309130">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585108377">PR review comment</a>:</p>
<blockquote>
<p>This could really use some more detail. As a user, why shouldn't I just enable this all the time? What are the trade offs? What is the default? What does it do? When does it apply? How does it affect memory footprint and pooling allocator integration? Etc...</p>
<p>The automatic github actions comment has a good template in the first check box: <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2084268706">https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2084268706</a></p>
</blockquote>



<a name="436309131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309131">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585139872">PR review comment</a>:</p>
<blockquote>
<p>indireaching? This is a typo and not an intentional contraction, right?</p>
</blockquote>



<a name="436309132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309132">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585111686">PR review comment</a>:</p>
<blockquote>
<p>Ditto</p>
</blockquote>



<a name="436309133"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309133" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309133">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585155021">PR review comment</a>:</p>
<blockquote>
<p>Could we factor this one out into smaller helpers and add comments describing the code and blocks we are emitting as well? I'm finding it really hard to read this giant block of clif-building code directly. See for example the overview comment and comments for each block we generate here:</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/cranelift/src/gc/enabled.rs#L341-L449">https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/cranelift/src/gc/enabled.rs#L341-L449</a></p>
</blockquote>



<a name="436309134"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436309134" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436309134">(Apr 30 2024 at 16:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585126320">PR review comment</a>:</p>
<blockquote>
<p>Speaking of that comment, the second item doesn't seem to be satisfied in this PR either: adding support for fuzzing this option. It should be just a couple-line change in these places:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/fuzzing/src/generators/config.rs#L458">https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/fuzzing/src/generators/config.rs#L458</a></li>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/fuzzing/src/generators/config.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/0f4c0d4a358187f99f23897d306c8b2a3c94287e/crates/fuzzing/src/generators/config.rs#L150</a></li>
</ul>
</blockquote>



<a name="436346364"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346364" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346364">(Apr 30 2024 at 20:11)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436346835"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346835" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346835">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436346851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346851">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032443825">PR review</a>.</p>



<a name="436346852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346852">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585477877">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="436346859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346859">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032443929">PR review</a>.</p>



<a name="436346860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346860">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585477935">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="436346872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346872">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444039">PR review</a>.</p>



<a name="436346873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346873">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585477996">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="436346877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346877">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444093">PR review</a>.</p>



<a name="436346878"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346878" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346878">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478024">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="436346883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346883">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444156">PR review</a>.</p>



<a name="436346884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346884">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478070">PR review comment</a>:</p>
<blockquote>
<p>For sure, added explanations here and below giving the reasons for expecting/not expecting the opt, and the key bits of IR we're asserting.</p>
</blockquote>



<a name="436346891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346891">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444198">PR review</a>.</p>



<a name="436346892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346892">(Apr 30 2024 at 20:15)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478099">PR review comment</a>:</p>
<blockquote>
<p>Updated!</p>
</blockquote>



<a name="436346894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346894">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444228">PR review</a>.</p>



<a name="436346896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346896">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478118">PR review comment</a>:</p>
<blockquote>
<p>Updated!</p>
</blockquote>



<a name="436346906"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346906" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346906">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444300">PR review</a>.</p>



<a name="436346909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346909">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478152">PR review comment</a>:</p>
<blockquote>
<p>Huh, should be "indirect call caching"; somehow my fingers or a misplaced editor command swallowed the middle bits of that, sorry!</p>
</blockquote>



<a name="436346941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346941">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2032444354">PR review</a>.</p>



<a name="436346942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436346942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436346942">(Apr 30 2024 at 20:16)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1585478188">PR review comment</a>:</p>
<blockquote>
<p>Added a similar comment and factored out a little bit of the logic (and reduced the CFG by one block while I was at it) -- hopefully clearer now!</p>
</blockquote>



<a name="436348841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436348841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436348841">(Apr 30 2024 at 20:30)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436348949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436348949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436348949">(Apr 30 2024 at 20:31)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2087138489">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>Updated, let me know what you think!</p>
</blockquote>



<a name="436349317"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436349317" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436349317">(Apr 30 2024 at 20:33)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2087151873">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>(Oh, and forgot to mention: thanks for the thorough benchmarks on this! I've gotta dig into why Sightglass is so finicky for me...)</p>
</blockquote>



<a name="436349740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436349740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436349740">(Apr 30 2024 at 20:36)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436365603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436365603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436365603">(Apr 30 2024 at 22:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2087639404">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing, wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="436530029"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436530029" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436530029">(May 01 2024 at 16:14)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2088700899">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>Oh also, I mentioned this in the Cranelift meeting, but wanted to put it down here for posterity too: it seems like the limit on the number of caches isn't actually implemented.</p>
</blockquote>



<a name="436536412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436536412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436536412">(May 01 2024 at 16:53)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436536486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436536486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436536486">(May 01 2024 at 16:53)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2088759959">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>Yep, I missed that entirely in this iteration of the patch -- sorry about that! Just updated. I ended up wiring the limit through to a new config option (with docs, CLI flag, fuzzing) so that I could easily test it without a huge test input.</p>
</blockquote>



<a name="436536747"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436536747" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436536747">(May 01 2024 at 16:55)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436574765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436574765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436574765">(May 01 2024 at 21:20)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034462912">PR review</a>:</p>
<blockquote>
<p><span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span> </p>
</blockquote>



<a name="436574766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436574766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436574766">(May 01 2024 at 21:20)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034462912">PR review</a>:</p>
<blockquote>
<p><span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span> </p>
</blockquote>



<a name="436574767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436574767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436574767">(May 01 2024 at 21:20)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1586827712">PR review comment</a>:</p>
<blockquote>
<p>This is great, thank you. I really appreciate having this stuff factored out into bite-sized chunks.</p>
</blockquote>



<a name="436587878"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436587878" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436587878">(May 01 2024 at 23:15)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436588169"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436588169" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436588169">(May 01 2024 at 23:17)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2089277076">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>The merge queue did its job (nice!) and found a conflict with #8515 which merged after this PR's CI ran. I pushed a fix which is fairly small but @fitzgen maybe PTAL at least commit just to be sure?</p>
</blockquote>



<a name="436588326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436588326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436588326">(May 01 2024 at 23:19)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2089277076">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>The merge queue did its job (nice!) and found a conflict with #8515 which merged after this PR's CI ran. I pushed a fix which is fairly small but @fitzgen maybe PTAL at least the last commit just to be sure?</p>
</blockquote>



<a name="436588573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436588573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436588573">(May 01 2024 at 23:21)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#issuecomment-2089280124">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>:</p>
<blockquote>
<p>(or @jameysharp feel free to review last commit too as it interacts with your change in #8515!)</p>
</blockquote>



<a name="436611431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436611431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436611431">(May 02 2024 at 03:47)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034753644">PR review</a>.</p>



<a name="436611432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436611432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436611432">(May 02 2024 at 03:47)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587022341">PR review comment</a>:</p>
<blockquote>
<p>Oh I just noticed this new index type is in between the definition of VMSharedTypeIndex and the impl block defining methods for it. Can we move it before or after so that those two are together?</p>
</blockquote>



<a name="436611433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436611433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436611433">(May 02 2024 at 03:47)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034753644">PR review</a>.</p>



<a name="436611434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436611434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436611434">(May 02 2024 at 03:47)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587027065">PR review comment</a>:</p>
<blockquote>
<p>Is this allowed to return false even when the value is actually zero? Jamey is adding support for the extended const proposal and it extends const expressions with addition, subtraction, and multiplication, so there will soon be many ways to evaluate to zero. Doesn’t mean we can’t land this PR now but we should be clear about the semantics of this method</p>
</blockquote>



<a name="436622923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622923">(May 02 2024 at 06:11)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436622935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622935">(May 02 2024 at 06:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034901118">PR review</a>.</p>



<a name="436622937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622937">(May 02 2024 at 06:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587110952">PR review comment</a>:</p>
<blockquote>
<p>Clarified a bit -- renamed to <code>provably_nonzero_i32</code> (inverted from is-possibly-nonzero -- clearer this way IMHO) and commented more. It's always allowed to return <code>false</code> (can't prove anything), but if <code>true</code>, must actually be a case we know is always nonzero (currently only an i32.const with nonzero constant).</p>
</blockquote>



<a name="436622938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622938">(May 02 2024 at 06:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034901162">PR review</a>.</p>



<a name="436622939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622939">(May 02 2024 at 06:11)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587110982">PR review comment</a>:</p>
<blockquote>
<p>Ah, yeah, didn't notice that; moved down a bit.</p>
</blockquote>



<a name="436622995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436622995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436622995">(May 02 2024 at 06:12)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436623502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436623502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436623502">(May 02 2024 at 06:17)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034907878">PR review</a>.</p>



<a name="436623503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436623503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436623503">(May 02 2024 at 06:17)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587115123">PR review comment</a>:</p>
<blockquote>
<p>I would suggest naming this with the opposite sense, like: <code>is_definitely_nonzero</code>, which returns true for <code>I32Const(x) if x != 0</code>, and may also return true if there are any other circumstances where it can prove this, but otherwise returns false. Then, extended constants or any other strange things will safely return false, meaning that you can't be sure your optimization is valid, and you'll only apply the optimization when it's definitely okay.</p>
<p>Further, when we follow Nick's suggestion for making the <code>ConstExpr</code> evaluator try to run even before an <code>Instance</code> is available, it will be clear how to invoke that to implement this. If it fails because it needs inputs which aren't known until instantiation, or it succeeds but returns 0, then we should return that the expression is not "definitely nonzero".</p>
</blockquote>



<a name="436623660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436623660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436623660">(May 02 2024 at 06:19)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2034909803">PR review</a>.</p>



<a name="436623661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436623661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436623661">(May 02 2024 at 06:19)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1587116301">PR review comment</a>:</p>
<blockquote>
<p>Hah, raced; I'm glad we're on the same page.</p>
</blockquote>



<a name="436627268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436627268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436627268">(May 02 2024 at 06:49)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8509">PR #8509</a>.</p>



<a name="436937653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436937653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436937653">(May 03 2024 at 18:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2038788785">PR review</a>.</p>



<a name="436937654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436937654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436937654">(May 03 2024 at 18:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1589594152">PR review comment</a>:</p>
<blockquote>
<p>Could these be moved to <code>-O</code> options as "tuning" or "optimizaion" options?</p>
<p>The <code>WasmOptions</code> group here is intended for semantic differences in the generated code and these options shouldn't affect any generated code.</p>
<p>(thanks for adding cli flags though!)</p>
</blockquote>



<a name="436938189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436938189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436938189">(May 03 2024 at 18:32)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#discussion_r1589598953">PR review comment</a>:</p>
<blockquote>
<p>Ah, yeah, for sure -- will do in a followup PR.</p>
</blockquote>



<a name="436938190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238509%20Wasmtime%3A%20add%20one-entry%20call-indirect.../near/436938190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238509.20Wasmtime.3A.20add.20one-entry.20call-indirect.2E.2E.2E.html#436938190">(May 03 2024 at 18:32)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8509#pullrequestreview-2038794362">PR review</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>