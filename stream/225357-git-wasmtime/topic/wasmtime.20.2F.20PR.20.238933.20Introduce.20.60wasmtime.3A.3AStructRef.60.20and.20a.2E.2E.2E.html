<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8933 Introduce `wasmtime::StructRef` and a... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html">wasmtime / PR #8933 Introduce `wasmtime::StructRef` and a...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="450554230"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450554230" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450554230">(Jul 10 2024 at 20:13)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450554231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450554231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450554231">(Jul 10 2024 at 20:13)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a> from <code>fitzgen:host-alloc-gc-objects</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit introduces the <code>wasmtime::StructRef</code> type and support for allocating Wasm GC structs from the host. This commit does <em>not</em> add support for the <code>struct.new</code> family of Wasm instructions; guests still cannot allocate Wasm GC objects yet, but initial support should be pretty straightforward after this commit lands.</p>
<p>The <code>StructRef</code> type has everything you expect from other value types in the <code>wasmtime</code> crate:</p>
<ul>
<li>
<p>A method to get its type or check whether it matches a given type</p>
</li>
<li>
<p>An implementation of <code>WasmTy</code> so that it can be used with <code>Func::wrap</code>-style APIs</p>
</li>
<li>
<p>The ability to upcast it into an <code>AnyRef</code> and to do checked downcasts in the opposite direction</p>
</li>
</ul>
<p>There are, additionally, methods for getting, setting, and enumerating a <code>StructRef</code>'s fields.</p>
<p>To allocate a <code>StructRef</code>, we need proof that the struct type we are allocating is being kept alive for the duration that the allocation may live. This is required for many reasons, but a basic example is getting a struct instance's type from the embedder API: this does a type-index-to-<code>StructType</code> lookup and conversion and if the type wasn't kept alive, then the type-index lookup will result in what is logically a use-after-free bug. This won't be a problem for Wasm guests (when we get around to implementing allocation for them) since their module defines the type, the store holds onto its instances' modules, and the allocation cannot outlive the store. For the host, we need another method of keeping the object's type alive, since it might be that the host defined the type and there is no module that also defined it, let alone such a module that is being kept alive in the store.</p>
<p>The solution to the struct-type-lifetime problem that this commit implements for hosts is for the store to hold a hash set of <code>RegisteredType</code>s specifically for objects which were allocated via the embedder API. But we also don't want to do a hash lookup on every allocation, so we also implement a <code>StructRefPre</code> type. A <code>StructRefPre</code> is proof that the embedder has inserted a <code>StructType</code>'s inner <code>RegisteredType</code> into a store. Structurally, it is a pair of the struct type and a store id. All <code>StructRef</code> allocation methods require a <code>StructRefPre</code> argument, which does a fast store id check, rather than a whole hash table insertion.</p>
<p>I opted to require <code>StructRefPre</code> in all allocation cases -- even though this has the downside of always forcing callers to create one before they allocate, even if they are only allocating a single object -- because of two reasons. First, this avoids needing to define duplicate methods, with and without a <code>StructRefPre</code> argument. Second, this avoids a performance footgun in the API where users don't realize that they <em>can</em> avoid extra work by creating a single <code>StructRefPre</code> and then using it multiple times. Anecdotally, I've heard multiple people complain about instantiation being slower than advertised but it turns out they weren't using <code>InstancePre</code>, and I'd like to avoid that situation for allocation if we can.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="450554232"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450554232" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450554232">(Jul 10 2024 at 20:13)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450554879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450554879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450554879">(Jul 10 2024 at 20:15)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2170162269">PR review</a>.</p>



<a name="450554881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450554881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450554881">(Jul 10 2024 at 20:15)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1672905019">PR review comment</a>:</p>
<blockquote>
<p>Note that this is intentionally left for follow up PRs. I want to focus on getting the spec tests passing and all that first, especially since the DRC collector is just the stand in until we eventually grow our semi-space collector.</p>
</blockquote>



<a name="450572302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450572302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450572302">(Jul 10 2024 at 21:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#issuecomment-2221579268">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api", "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="450746337"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746337" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746337">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172172024">PR review</a>:</p>
<blockquote>
<p>I'm liking how this is all shaping up, very nice! I've got cosmetic comments here and there but nothing major.</p>
</blockquote>



<a name="450746339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746339">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172172024">PR review</a>:</p>
<blockquote>
<p>I'm liking how this is all shaping up, very nice! I've got cosmetic comments here and there but nothing major.</p>
</blockquote>



<a name="450746341"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746341" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746341">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674184310">PR review comment</a>:</p>
<blockquote>
<p>Performing a GC requires <code>&amp;mut</code> though, right? So given <code>&amp;StoreOpaque</code> that's static proof that a GC won't happen? </p>
<p>Musing though: because <code>unchecked_try_gc_ref</code> returns a lifetime bound to <code>&amp;StoreOpaque</code> doesn't that mean that GC is already statically disallowed while we're working with the <code>gc_ref</code>? If that's the case could the <code>unchecked_</code> prefix be removed? (fine to defer this to a future PR of course)</p>
</blockquote>



<a name="450746342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746342">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674175270">PR review comment</a>:</p>
<blockquote>
<p>Should this perhaps be hoisted up to the <code>disabled</code> module layer?</p>
</blockquote>



<a name="450746343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746343">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674194568">PR review comment</a>:</p>
<blockquote>
<p>Another source of errors is if <code>fields</code> have the wrong types for <code>allocator</code>, right?</p>
</blockquote>



<a name="450746344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746344">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674187390">PR review comment</a>:</p>
<blockquote>
<p>Should this (and below) perhaps be called <code>unchecked_cast</code> to encourage more scrutiny at callsites?</p>
</blockquote>



<a name="450746345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746345">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674209288">PR review comment</a>:</p>
<blockquote>
<p>I suspect that this looks the same for anyref/arrayref/etc, do you think this could be refactored into a shared method on <code>Rooted</code> perhaps or something like that?</p>
</blockquote>



<a name="450746346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746346">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674196337">PR review comment</a>:</p>
<blockquote>
<p>Oh I thought you made a helper that went from storage type to val type?</p>
</blockquote>



<a name="450746347"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746347" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746347">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674242739">PR review comment</a>:</p>
<blockquote>
<p>I think that this is double-verifying the type because this type-check happens in <code>write_field</code> as well?</p>
</blockquote>



<a name="450746348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746348">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674249499">PR review comment</a>:</p>
<blockquote>
<p>Could this be made a safe trait with something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">PodValueType</span><span class="p">:</span><span class="w"> </span><span class="nb">Copy</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">SIZE</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">;</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">from_le_bytes</span><span class="p">(</span><span class="n">bytes</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="bp">Self</span><span class="p">::</span><span class="n">SIZE</span><span class="p">])</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="p">;</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">to_le_bytes</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">dst</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="bp">Self</span><span class="p">::</span><span class="n">SIZE</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
</blockquote>



<a name="450746349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746349">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674226826">PR review comment</a>:</p>
<blockquote>
<p>Above I was thinking that there should be <code>unchecked_cast</code> to require more scrutiny, but now I'm wondering if it might be good to have that <em>and</em> specific methods per-type to cast "safely" to the parent types? Not memory-safety-related-safety but more correctness-related-safety. That way the upcast method could use <code>unchecked_cast</code> internally but <code>unchecked_cast</code> wouldn't be used externally much as the safer upcasts would be used instead.</p>
</blockquote>



<a name="450746350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746350">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674201024">PR review comment</a>:</p>
<blockquote>
<p>I haven't gotten far enough in the diff so this may be more apparent later, but the <code>?</code> here is a bit suspect while there's uninitialized memory above. What's the consequence of returning an error here with uninitialized memory? Is that ok insofar as the actual reference won't go anywhere and it'll get cleaned up on the next GC?</p>
</blockquote>



<a name="450746351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746351">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674218991">PR review comment</a>:</p>
<blockquote>
<p>Much of this prefix is shared between here and <code>set</code>, would it be possible to refactor that to a shared helper?</p>
<p>Also it feels a little odd where reading fields is always done with the iterator here and <code>field</code> is defined in terms of the iterator while <code>set_field</code> is defined a field-at-a-time. Could the implementation here delegate to <code>field</code> instead of the other way around?</p>
</blockquote>



<a name="450746352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746352">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674266646">PR review comment</a>:</p>
<blockquote>
<p>It took me a bit to work out why this exists given <code>write_field</code> above. I think I understand now in that it has to do with gc barriers and things like that. This leads me to a few questions:</p>
<ul>
<li>Could the documentation be updated to explicitly discuss the difference between this method and <code>write_field</code>?</li>
<li>Would it be possible to change these to a single method? Perhaps with a boolean flag indicating if the previous data is "valid"?</li>
</ul>
</blockquote>



<a name="450746354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746354">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674251126">PR review comment</a>:</p>
<blockquote>
<p>To confirm, all data on the gc heap is always initialized, right? We don't have to use <code>MaybeUninit&lt;u8&gt;</code> here?</p>
</blockquote>



<a name="450746355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450746355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450746355">(Jul 11 2024 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674211055">PR review comment</a>:</p>
<blockquote>
<p>(same for the impls below, and of course ok to defer to a future PR if you'd like)</p>
</blockquote>



<a name="450758644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450758644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450758644">(Jul 11 2024 at 16:46)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172468959">PR review</a>.</p>



<a name="450758645"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450758645" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450758645">(Jul 11 2024 at 16:46)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674345470">PR review comment</a>:</p>
<blockquote>
<p>Spun this out to <a href="https://github.com/bytecodealliance/wasmtime/issues/8940">https://github.com/bytecodealliance/wasmtime/issues/8940</a></p>
</blockquote>



<a name="450769262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450769262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450769262">(Jul 11 2024 at 17:40)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450769915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450769915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450769915">(Jul 11 2024 at 17:44)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172581612">PR review</a>.</p>



<a name="450769916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450769916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450769916">(Jul 11 2024 at 17:44)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674419014">PR review comment</a>:</p>
<blockquote>
<p>heh, I wrote the helper only after I'd already open coded it a bunch and I guess I missed this spot</p>
</blockquote>



<a name="450770222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770222">(Jul 11 2024 at 17:46)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172586440">PR review</a>.</p>



<a name="450770223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770223">(Jul 11 2024 at 17:46)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674421840">PR review comment</a>:</p>
<blockquote>
<p>ah, actually I wrote the helper for <code>wasmtime_types::FieldType</code> not <code>wasmtime::FieldType</code>... we might want to actually do some trait nastiness to dedupe all this stuff at some point...</p>
</blockquote>



<a name="450770317"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770317" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770317">(Jul 11 2024 at 17:47)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172589242">PR review</a>.</p>



<a name="450770318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770318">(Jul 11 2024 at 17:47)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674423492">PR review comment</a>:</p>
<blockquote>
<p>oh no nvm again: it is a method on <code>StorageType</code> not <code>FieldType</code>, d'oh</p>
</blockquote>



<a name="450770886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770886">(Jul 11 2024 at 17:50)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172597314">PR review</a>.</p>



<a name="450770887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770887">(Jul 11 2024 at 17:50)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674428436">PR review comment</a>:</p>
<blockquote>
<p>How are you imagining this? Because this <code>From</code> impl <em>is</em> that safe upcast in my imagination. We could have a trait or something tho too</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">Upcast</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Rooted</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">upcast</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Rooted</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span>
<span class="w">    </span><span class="k">where</span>
<span class="w">        </span><span class="n">T</span><span class="p">:</span><span class="w"> </span><span class="nc">Upcast</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="450770954"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770954" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770954">(Jul 11 2024 at 17:51)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172598627">PR review</a>.</p>



<a name="450770956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450770956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450770956">(Jul 11 2024 at 17:51)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674429154">PR review comment</a>:</p>
<blockquote>
<p>(we would have to seal the trait as well)</p>
</blockquote>



<a name="450771623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450771623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450771623">(Jul 11 2024 at 17:54)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172608013">PR review</a>.</p>



<a name="450771626"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450771626" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450771626">(Jul 11 2024 at 17:54)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674434022">PR review comment</a>:</p>
<blockquote>
<p>From the Rust perspective: yes. We get it zeroed from mmap. At worst it has stale data from a since-reclaimed GC allocation.</p>
<p>From the Wasm perspective, it could be uninitialized, and we have to initialize it before we expose the object to Wasm.</p>
<p>But to answer the question of <code>MaybeUninit</code>: no, it shouldn't be necessary.</p>
</blockquote>



<a name="450771921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450771921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450771921">(Jul 11 2024 at 17:56)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172612708">PR review</a>.</p>



<a name="450771922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450771922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450771922">(Jul 11 2024 at 17:56)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674436640">PR review comment</a>:</p>
<blockquote>
<p>I can certainly add more docs clarifying their relationship.</p>
<p>I don't think I want to merge them into a single method, since if the method isn't inlined then that boolean argument will be materialized and branched on at runtime, which seems pretty silly since all call sites will be statically choosing one or the other. I guess I could have a <code>const bool</code> generic parameter... not sure that is actually any nicer than two different methods tho.</p>
</blockquote>



<a name="450773432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450773432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450773432">(Jul 11 2024 at 18:03)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172631162">PR review</a>.</p>



<a name="450773436"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450773436" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450773436">(Jul 11 2024 at 18:03)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674445343">PR review comment</a>:</p>
<blockquote>
<p>Oh I'm thinking something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="n">Rooted</span><span class="o">&lt;</span><span class="n">StructRef</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">to_anyref</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Rooted</span><span class="o">&lt;</span><span class="n">AnyRef</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">unchecked_cast</span><span class="p">()</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>and repeating that for <code>Rooted&lt;...&gt;</code> as appropriate and having <code>to_foo</code> method for anything that's appropriate</p>
</blockquote>



<a name="450773654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450773654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450773654">(Jul 11 2024 at 18:04)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172634316">PR review</a>.</p>



<a name="450773655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450773655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450773655">(Jul 11 2024 at 18:04)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674446897">PR review comment</a>:</p>
<blockquote>
<p>None of this is perf-sensitive though, right? If perf matters there's tons of places we'd want to improve I think, chiefly being removing the usage of <code>Val</code>. Regardless though I think more docs is sufficient for now.</p>
</blockquote>



<a name="450774329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450774329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450774329">(Jul 11 2024 at 18:07)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674450234">PR review comment</a>:</p>
<blockquote>
<p>Ah, gotcha. Yeah I can do that.</p>
</blockquote>



<a name="450774330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450774330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450774330">(Jul 11 2024 at 18:07)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172642858">PR review</a>.</p>



<a name="450774629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450774629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450774629">(Jul 11 2024 at 18:09)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172646194">PR review</a>.</p>



<a name="450774630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450774630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450774630">(Jul 11 2024 at 18:09)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674451726">PR review comment</a>:</p>
<blockquote>
<p>It isn't perf-sensitive yet, but it will likely eventually be, yes.</p>
<p>I'd certainly like to add a <code>TypedStructRefPre</code> or something to that effect, but I didn't want to do too much too eagerly, especially before I even have the spec tests passing.</p>
</blockquote>



<a name="450775637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450775637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450775637">(Jul 11 2024 at 18:13)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450776127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450776127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450776127">(Jul 11 2024 at 18:16)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172665908">PR review</a>.</p>



<a name="450776130"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450776130" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450776130">(Jul 11 2024 at 18:16)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674461926">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Is that ok insofar as the actual reference won't go anywhere and it'll get cleaned up on the next GC?</p>
</blockquote>
<p>That would be the case for tracing GCs. For the DRC collector, I think we would actually permanently leak it, since it's refcount would be stuck at <code>1</code>.</p>
<p>So, good eye. I'll handle these errors locally and free the allocation before bailing out of the function.</p>
</blockquote>



<a name="450779855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450779855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450779855">(Jul 11 2024 at 18:30)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450780096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450780096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450780096">(Jul 11 2024 at 18:31)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#pullrequestreview-2172724846">PR review</a>.</p>



<a name="450780097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450780097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450780097">(Jul 11 2024 at 18:31)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8933#discussion_r1674494787">PR review comment</a>:</p>
<blockquote>
<p>Spun out into <a href="https://github.com/bytecodealliance/wasmtime/issues/8942">https://github.com/bytecodealliance/wasmtime/issues/8942</a> but yeah you're right, this is all basically the same.</p>
</blockquote>



<a name="450793548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450793548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450793548">(Jul 11 2024 at 19:32)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450794121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450794121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450794121">(Jul 11 2024 at 19:35)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450797025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450797025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450797025">(Jul 11 2024 at 19:51)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450807086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450807086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450807086">(Jul 11 2024 at 20:37)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450807165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450807165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450807165">(Jul 11 2024 at 20:37)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450813920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450813920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450813920">(Jul 11 2024 at 21:23)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450813921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450813921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450813921">(Jul 11 2024 at 21:23)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450813923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450813923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450813923">(Jul 11 2024 at 21:23)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450813940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450813940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450813940">(Jul 11 2024 at 21:23)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450820605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450820605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450820605">(Jul 11 2024 at 22:00)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<a name="450824981"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238933%20Introduce%20%60wasmtime%3A%3AStructRef%60%20and%20a.../near/450824981" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238933.20Introduce.20.60wasmtime.3A.3AStructRef.60.20and.20a.2E.2E.2E.html#450824981">(Jul 11 2024 at 22:29)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8933">PR #8933</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>