<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7759 examples: add component model example · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html">wasmtime / PR #7759 examples: add component model example</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="411674016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411674016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411674016">(Jan 08 2024 at 05:33)</a>:</h4>
<p>rockwotj opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a> from <code>rockwotj:component-example</code> to <code>bytecodealliance:main</code>.</p>



<a name="411674134"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411674134" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411674134">(Jan 08 2024 at 05:34)</a>:</h4>
<p>rockwotj updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411674193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411674193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411674193">(Jan 08 2024 at 05:35)</a>:</h4>
<p>rockwotj edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>:</p>
<blockquote>
<p>As part of my journey on learning how the component model works, I realized there is no example in wasmtime, so I figured it'd be useful to add a simple example of guest and host calls.</p>
</blockquote>



<a name="411674332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411674332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411674332">(Jan 08 2024 at 05:37)</a>:</h4>
<p>rockwotj updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411675189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411675189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411675189">(Jan 08 2024 at 05:49)</a>:</h4>
<p><strong>rockwotj</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a> as ready for review.</p>



<a name="411675190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411675190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411675190">(Jan 08 2024 at 05:49)</a>:</h4>
<p><strong>rockwotj</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411675191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411675191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411675191">(Jan 08 2024 at 05:49)</a>:</h4>
<p><strong>rockwotj</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411675192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411675192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411675192">(Jan 08 2024 at 05:49)</a>:</h4>
<p><strong>rockwotj</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411764773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411764773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411764773">(Jan 08 2024 at 15:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#pullrequestreview-1809399806">PR review</a>:</p>
<blockquote>
<p>Thanks for this!</p>
<p>I'm somewhat of two minds on this. On one hand this example showcases a lot of downsides to the unsupported nature of the component model in languages. For example embeddings may not always embed <code>wit-component</code> itself and turn core wasm into components on-the-fly. Additionally this probably won't work for many "real world" use cases in the sense that WASI isn't handled here. That would require tweaks to both the build process and the embedder. Finaly the <code>wasm32-unknown-unknown</code> target, rarely used off the web, is used here (for simplicity of course, which makes sense)</p>
<p>On the other hand this showcases a concrete working example which is something folks can base work on. In that sense it's great to have! Given the number of moving parts in the component model being able to start somewhere is definitely valuable.</p>
<p>I'd probably lean towards landing this, although perhaps with a few more comments with respect to WASI and usage. Could you add a comment indicating that <code>wasm32-unknown-unknown</code> is used for simplicity here and additionally indicate that the usage of <code>wit-component</code> in embeddings is done for the purposes of this example and otherwise may not be expected in all host embeddings of Wasmtime?</p>
</blockquote>



<a name="411764776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411764776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411764776">(Jan 08 2024 at 15:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#pullrequestreview-1809399806">PR review</a>:</p>
<blockquote>
<p>Thanks for this!</p>
<p>I'm somewhat of two minds on this. On one hand this example showcases a lot of downsides to the unsupported nature of the component model in languages. For example embeddings may not always embed <code>wit-component</code> itself and turn core wasm into components on-the-fly. Additionally this probably won't work for many "real world" use cases in the sense that WASI isn't handled here. That would require tweaks to both the build process and the embedder. Finaly the <code>wasm32-unknown-unknown</code> target, rarely used off the web, is used here (for simplicity of course, which makes sense)</p>
<p>On the other hand this showcases a concrete working example which is something folks can base work on. In that sense it's great to have! Given the number of moving parts in the component model being able to start somewhere is definitely valuable.</p>
<p>I'd probably lean towards landing this, although perhaps with a few more comments with respect to WASI and usage. Could you add a comment indicating that <code>wasm32-unknown-unknown</code> is used for simplicity here and additionally indicate that the usage of <code>wit-component</code> in embeddings is done for the purposes of this example and otherwise may not be expected in all host embeddings of Wasmtime?</p>
</blockquote>



<a name="411764777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411764777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411764777">(Jan 08 2024 at 15:46)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#discussion_r1444856657">PR review comment</a>:</p>
<blockquote>
<p>For this the <code>default-features = false</code> isn't probably the best example to give since default features should be ok for 99% of embeddings. The reason it's disabled in this repository is for the unique use case of the adapter.</p>
</blockquote>



<a name="411764778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411764778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411764778">(Jan 08 2024 at 15:46)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#discussion_r1444858193">PR review comment</a>:</p>
<blockquote>
<p>I think this <code>use</code> can be omitted?</p>
<p>Also, can this file have a comment pointing to the <code>wit-bindgen</code> repository for more information about the generated bindings?</p>
</blockquote>



<a name="411993040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993040">(Jan 09 2024 at 18:48)</a>:</h4>
<p>rockwotj submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#pullrequestreview-1811787759">PR review</a>.</p>



<a name="411993041"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993041" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993041">(Jan 09 2024 at 18:48)</a>:</h4>
<p>rockwotj created <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#discussion_r1446476798">PR review comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="411993044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993044">(Jan 09 2024 at 18:48)</a>:</h4>
<p>rockwotj updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411993061"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993061" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993061">(Jan 09 2024 at 18:48)</a>:</h4>
<p>rockwotj submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#pullrequestreview-1811787976">PR review</a>.</p>



<a name="411993062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993062">(Jan 09 2024 at 18:48)</a>:</h4>
<p>rockwotj created <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#discussion_r1446476940">PR review comment</a>:</p>
<blockquote>
<p>Fixed by using the default.</p>
</blockquote>



<a name="411993571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993571">(Jan 09 2024 at 18:52)</a>:</h4>
<p>rockwotj <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#issuecomment-1883604318">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>:</p>
<blockquote>
<p>Thanks for the review! I ended up submitting this because I wanted to:</p>
<p>1) Have a place where there was a single simple as possible example of the component model that was in code. Everywhere else I could find were documentation of the steps of how to do things and were not specific to wasmtime (so didn't include how to create custom worlds using wasmtime's binding macro).<br>
2) Learn more about the generated bindings via <code>cargo expand</code> so I know what to expose via the C-API</p>
<p>I thought the first use case was something others wanted to do, so I ended up creating this. I whole heartedly agree with your comments and have updated the PR.</p>
</blockquote>



<a name="411993575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993575">(Jan 09 2024 at 18:52)</a>:</h4>
<p><strong>rockwotj</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="411993703"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/411993703" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#411993703">(Jan 09 2024 at 18:53)</a>:</h4>
<p>rockwotj updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<a name="412018607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/412018607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#412018607">(Jan 09 2024 at 21:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7759#pullrequestreview-1812080197">PR review</a>:</p>
<blockquote>
<p>Sounds good!</p>
</blockquote>



<a name="412022111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237759%20examples%3A%20add%20component%20model%20example/near/412022111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237759.20examples.3A.20add.20component.20model.20example.html#412022111">(Jan 09 2024 at 22:23)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7759">PR #7759</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>