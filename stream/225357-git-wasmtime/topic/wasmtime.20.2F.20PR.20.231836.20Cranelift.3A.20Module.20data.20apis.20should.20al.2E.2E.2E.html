<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1836 Cranelift: Module data apis should al... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html">wasmtime / PR #1836 Cranelift: Module data apis should al...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="199976765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/199976765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#199976765">(Jun 06 2020 at 14:11)</a>:</h4>
<p>carlokok opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="199977772"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/199977772" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#199977772">(Jun 06 2020 at 14:34)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-425744484">PR Review</a>.</p>



<a name="199977773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/199977773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#199977773">(Jun 06 2020 at 14:34)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436273499">PR Review Comment</a>:</p>
<blockquote>
<p>Can you add an assertion that it isn't a tls data object? Those only work for <code>StandardSection::Tls</code>.</p>
</blockquote>



<a name="200059589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200059589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200059589">(Jun 08 2020 at 05:23)</a>:</h4>
<p>carlokok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="200129334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200129334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200129334">(Jun 08 2020 at 17:20)</a>:</h4>
<p>carlokok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="200133554"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200133554" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200133554">(Jun 08 2020 at 17:56)</a>:</h4>
<p>carlokok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="200135972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200135972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200135972">(Jun 08 2020 at 18:15)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a>.</p>



<a name="200137536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137536">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-426501423">PR Review</a>.</p>



<a name="200137537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137537">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-426501423">PR Review</a>.</p>



<a name="200137538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137538">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436907499">PR Review Comment</a>:</p>
<blockquote>
<p>idiomatic would be to just say <code>seg.to_owned()</code> rather than use <code>String::from</code>. Also, maybe this method should be named <code>set_segment_section</code>?</p>
</blockquote>



<a name="200137539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137539">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436906269">PR Review Comment</a>:</p>
<blockquote>
<p>In Rust, we don't use assertions to indicate that the user provided bad input to a library function, instead we use the error type of the function's <code>Result</code>. In this case, we want to do something like:</p>
<div class="codehilite"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Some</span><span class="p">((</span><span class="n">segment</span><span class="p">,</span><span class="w"> </span><span class="n">section</span><span class="p">))</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">datasection</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">cranelift_module</span>::<span class="n">ModuleError</span>::<span class="n">Backend</span><span class="p">(</span><span class="n">anyhow</span>::<span class="n">anyhow</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;Custom section not supported by cranelift-faerie: `{}:{}`&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">segment</span><span class="p">,</span><span class="w"> </span><span class="n">section</span><span class="p">)));</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="o">~~~</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="200137540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137540">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436908690">PR Review Comment</a>:</p>
<blockquote>
<p>same as before, return an Err(ModuleError::Backend(anyhow!(...))) rather than assert here please.</p>
</blockquote>



<a name="200137541"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137541" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137541">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436907091">PR Review Comment</a>:</p>
<blockquote>
<p><code>std::string::String</code> is always in scope as <code>String</code> so style would be to just say <code>String</code> here. Also, we should note in the comment what each member of the pair is for - I think they are for segment and section, right? should we make the field named <code>custom_segment_section</code> to reflect that? Is there ever a use case where you'd want to specify a section but not a segment (maybe you're letting a linker script determine segments from section names?)</p>
</blockquote>



<a name="200137542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200137542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200137542">(Jun 08 2020 at 18:29)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436908976">PR Review Comment</a>:</p>
<blockquote>
<p>I think for the simplejit backend we'd be better off just ignoring the custom segment/section than throwing an error here.</p>
</blockquote>



<a name="200140268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140268">(Jun 08 2020 at 18:49)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-426518796">PR Review</a>.</p>



<a name="200140269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140269">(Jun 08 2020 at 18:49)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436919820">PR Review Comment</a>:</p>
<blockquote>
<p>For mach-O files the linker is always responsible for picking the right segment. In fact the object files should only contain a single segment.</p>
</blockquote>



<a name="200140522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140522">(Jun 08 2020 at 18:50)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-426520098">PR Review</a>.</p>



<a name="200140524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140524">(Jun 08 2020 at 18:50)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436920897">PR Review Comment</a>:</p>
<blockquote>
<p>Thanks @bjorn3. So it sounds like we should be specifying a custom section and a custom segment in two different fields.</p>
</blockquote>



<a name="200140790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140790">(Jun 08 2020 at 18:52)</a>:</h4>
<p>carlokok submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-426521555">PR Review</a>.</p>



<a name="200140791"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200140791" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200140791">(Jun 08 2020 at 18:52)</a>:</h4>
<p>carlokok created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r436921848">PR Review Comment</a>:</p>
<blockquote>
<p>@bjorn3 maybe i misunderstand but this:<br>
seg: __OBJC<br>
sec: __image_info</p>
<p>besides <br>
seg: __DATA<br>
sec __data</p>
<p>isn't unusual on mach-o. (that said, segments are ignored on non mach-o afaik)</p>
</blockquote>



<a name="200730682"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200730682" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200730682">(Jun 12 2020 at 22:17)</a>:</h4>
<p>philipc created <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#discussion_r439663555">PR Review Comment</a>:</p>
<blockquote>
<blockquote>
<p>For mach-O files the linker is always responsible for picking the right segment. In fact the object files should only contain a single segment.</p>
</blockquote>
<p>My understanding is that the linker uses the segment name specified in the object file. Note that segment names appear in two places: in the segment and in the section. The linker ignores the first of these, but still uses the segment name in the section. It has to do this, because <code>__const</code> can appear in both <code>__TEXT</code> and <code>__DATA</code>.</p>
</blockquote>



<a name="200730684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200730684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200730684">(Jun 12 2020 at 22:17)</a>:</h4>
<p>philipc submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1836#pullrequestreview-430064598">PR Review</a>.</p>



<a name="200929598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/200929598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#200929598">(Jun 15 2020 at 18:46)</a>:</h4>
<p>carlokok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="201101280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/201101280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#201101280">(Jun 17 2020 at 04:48)</a>:</h4>
<p>carlokok updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a> from <code>feature/object_file_section</code> to <code>master</code>:</p>
<blockquote>
<p>This fixes #1640.</p>
<p>What it does is two things:</p>
<ul>
<li>Expose a new api on the data context type to set the section of the current data item</li>
<li>Emit it in the Object backend</li>
</ul>
<p>I have no idea how to write a testcase for this or if it's meaningful at all.<br>
I don't know who can review this.</p>
</blockquote>



<a name="201102969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/201102969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#201102969">(Jun 17 2020 at 05:29)</a>:</h4>
<p><strong>carlokok</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a>.</p>



<a name="201176666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231836%20Cranelift%3A%20Module%20data%20apis%20should%20al.../near/201176666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231836.20Cranelift.3A.20Module.20data.20apis.20should.20al.2E.2E.2E.html#201176666">(Jun 17 2020 at 17:49)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1836">PR #1836</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>