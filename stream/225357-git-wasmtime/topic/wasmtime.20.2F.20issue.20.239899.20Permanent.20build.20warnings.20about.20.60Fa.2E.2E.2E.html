<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9899 Permanent build warnings about `Fa... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html">wasmtime / issue #9899 Permanent build warnings about `Fa...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="490701911"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239899%20Permanent%20build%20warnings%20about%20%60Fa.../near/490701911" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html#490701911">(Dec 24 2024 at 18:17)</a>:</h4>
<p>SingleAccretion opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9899">issue #9899</a>:</p>
<blockquote>
<p>I am sure everyone building wasmtime is familiar with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">@</span><span class="mf">0.116.0</span><span class="p">:</span><span class="w"> </span><span class="nc">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">rustfmt</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">ISLE</span><span class="o">-</span><span class="n">generated</span><span class="w"> </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="nc">Custom</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="nc">Other</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="s">"`rustfmt` exited with status exit code: 0xc00000fd"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>It is a constant feature of the CI builds as well. <code>0xc00000fd</code> is <code>STATUS_STACK_OVERFLOW</code>.</p>
</blockquote>



<a name="490702183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239899%20Permanent%20build%20warnings%20about%20%60Fa.../near/490702183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html#490702183">(Dec 24 2024 at 18:20)</a>:</h4>
<p>SingleAccretion edited <a href="https://github.com/bytecodealliance/wasmtime/issues/9899">issue #9899</a>:</p>
<blockquote>
<p>I am sure everyone building wasmtime is familiar with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">@</span><span class="mf">0.116.0</span><span class="p">:</span><span class="w"> </span><span class="nc">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">rustfmt</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">ISLE</span><span class="o">-</span><span class="n">generated</span><span class="w"> </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="nc">Custom</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="nc">Other</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="s">"`rustfmt` exited with status exit code: 0xc00000fd"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>It is a constant feature of the CI builds as well. <code>0xc00000fd</code> is <code>STATUS_STACK_OVERFLOW</code>.</p>
</blockquote>



<a name="490704421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239899%20Permanent%20build%20warnings%20about%20%60Fa.../near/490704421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html#490704421">(Dec 24 2024 at 18:46)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/9899#issuecomment-2561345924">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9899">issue #9899</a>:</p>
<blockquote>
<p>Fascinating -- I wonder if this is a <code>rustfmt</code> failure to handle very large functions without recursing. We've run into similar issues with ISLE-generated code being too large for tools in <a href="https://github.com/rust-lang/rust/issues/128422">rust-lang/rust#128422</a>; the ultimate fix should be to the tool IMHO, but...</p>
<p>In the meantime perhaps we can stop running rustfmt on the code <a href="https://github.com/bytecodealliance/wasmtime/blob/f64a9d5056fda49cb90444d5074984e7c942b296/cranelift/codegen/build.rs#L215">here</a>? I don't recall the exact reason we decided to do that; it dates back to the original ISLE integration in <a href="https://github.com/bytecodealliance/wasmtime/commit/7a568b19b42ddb86da156e5566bbbde98307ccb4">this commit</a>. Perhaps we were worried about human readability of the generated code. In any case, we rarely (or at least I rarely?) look at this generated code today, so if it's causing any problems in CI we can skip it. Happy to review a PR for that (with some delay, this is a holiday week for most of us).</p>
</blockquote>



<a name="490900917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239899%20Permanent%20build%20warnings%20about%20%60Fa.../near/490900917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html#490900917">(Dec 26 2024 at 17:48)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/9899">issue #9899</a>:</p>
<blockquote>
<p>I am sure everyone building wasmtime is familiar with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">warning</span><span class="p">:</span><span class="w"> </span><span class="nc">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">@</span><span class="mf">0.116.0</span><span class="p">:</span><span class="w"> </span><span class="nc">Failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">`</span><span class="n">rustfmt</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">ISLE</span><span class="o">-</span><span class="n">generated</span><span class="w"> </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="nc">Custom</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">kind</span><span class="p">:</span><span class="w"> </span><span class="nc">Other</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="s">"`rustfmt` exited with status exit code: 0xc00000fd"</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>It is a constant feature of the CI builds as well. <code>0xc00000fd</code> is <code>STATUS_STACK_OVERFLOW</code>.</p>
</blockquote>



<a name="490952641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239899%20Permanent%20build%20warnings%20about%20%60Fa.../near/490952641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239899.20Permanent.20build.20warnings.20about.20.60Fa.2E.2E.2E.html#490952641">(Dec 27 2024 at 06:02)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/9899#issuecomment-2563354682">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9899">issue #9899</a>:</p>
<blockquote>
<p>I've seen a similar error in CI quite a lot but I always figured it was because <code>rustfmt</code> wasn't installed and that error wasn't otherwise specifically handled. Otherwise though:</p>
<blockquote>
<p>I am sure everyone building wasmtime is familiar with:</p>
</blockquote>
<p>I never actually saw this day-to-day myself and I think it's a Windows-specific issue where Windows has smaller thread stacks by default than other platforms (or at least I think, maybe I'm wrong...). </p>
<p>Mostly just wanted to highlight that you might be one of the first developers to frequently work on Wasmtime on Windows, so please keep your eyes peeled for any other gotchas and points of friction. Most of the preexisting maintainers I believe don't develop day-to-day on Windows, so I wouldn't be surprised if this weren't the only point of friction. #9901 is much appreciated (as is all your DWARF work, thank you!) and please feel free to call out any other issues you see!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>