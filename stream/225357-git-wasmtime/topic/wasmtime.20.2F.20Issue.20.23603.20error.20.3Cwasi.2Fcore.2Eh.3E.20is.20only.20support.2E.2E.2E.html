<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #603 error &lt;wasi/core.h&gt; is only support... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html">wasmtime / Issue #603 error &lt;wasi/core.h&gt; is only support...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="211595070"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211595070" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211595070">(Sep 29 2020 at 08:49)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700553935">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>Hey, I'm facing a similar issue. Please comment the solution if you remember. Would be helpful.<br>
Thanks</p>
</blockquote>



<a name="211595279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211595279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211595279">(Sep 29 2020 at 08:51)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700558368">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>You must use the clang that is part of wasi-sdk, not your system clang.</p>
</blockquote>



<a name="211595709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211595709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211595709">(Sep 29 2020 at 08:56)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700565628">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>I am using the wasi-sdk one<br>
Here's my call <br>
<code>CC check-credentials/src/MD5.cpp -o MD5.wasm -nostartfiles -Wl,--no-entry,--export=GetMD5String -fno-exceptions --target=wasm32 -I ./wasi-sdk-11.0/share/wasi-sysroot/include/</code> where CC is <code>[WASI_SDK_PATH]/bin/clang --sysroot=[WASI_SDK_PATH]/share/wasi-sysroot/</code></p>
</blockquote>



<a name="211595882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211595882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211595882">(Sep 29 2020 at 08:58)</a>:</h4>
<p>rutvora edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700565628">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>I am using the wasi-sdk one<br>
Here's my call <br>
<code>CC check-credentials/src/MD5.cpp -o MD5.wasm -nostartfiles -Wl,--no-entry,--export=GetMD5String -fno-exceptions --target=wasm32 -I ./wasi-sdk-11.0/share/wasi-sysroot/include/</code> where CC is <code>[WASI_SDK_PATH]/bin/clang --sysroot=[WASI_SDK_PATH]/share/wasi-sysroot/</code></p>
<p>Btw, setting <code>--target=wasm32-wasi</code> or <code>--target=wasm32-unknown-wasi</code> returns to me no available targets found compatible.</p>
</blockquote>



<a name="211595955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211595955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211595955">(Sep 29 2020 at 08:59)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700567294">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>Does it work without the <code>--target</code> argument?</p>
</blockquote>



<a name="211596195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211596195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211596195">(Sep 29 2020 at 09:01)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700568749">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>No, it gave a bunch of errors and a lot more warnings. All associated with wasi/api.h with the first error still being the same, that it is only available on WASI platforms.</p>
</blockquote>



<a name="211596499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211596499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211596499">(Sep 29 2020 at 09:05)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700570807">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>it crashes on #ifndef __wasi__<br>
Am I supposed to add an additional header somewhere in my code? </p>
</blockquote>



<a name="211596706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211596706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211596706">(Sep 29 2020 at 09:07)</a>:</h4>
<p>rutvora edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700570807">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>it crashes on #ifndef \_\_wasi\_\_<br>
Am I supposed to add an additional header somewhere in my code? </p>
</blockquote>



<a name="211633339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211633339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211633339">(Sep 29 2020 at 15:02)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700767131">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p><code>__wasi__</code> is predefined by clang when the target is wasm32-wasi. If <code>--target=wasm32-wasi</code> says no targets found compatible, is it possible you're accidentally using some other clang, rather than the clang from the wasi-sdk package?</p>
</blockquote>



<a name="211667936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211667936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211667936">(Sep 29 2020 at 18:57)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700916429">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>@sunfishcode I'm sure I'm calling the clang from WASI SDK. For reference, I have mentioned the command I used in a comment above. And I'm sure the env variable there points to the correct WASI_SDK directory.<br>
I'm on MacOS Catalina, if that has some special conditions which I might have missed out on.</p>
</blockquote>



<a name="211669494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211669494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211669494">(Sep 29 2020 at 19:08)</a>:</h4>
<p>rutvora deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700916429">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>@sunfishcode I'm sure I'm calling the clang from WASI SDK. For reference, I have mentioned the command I used in a comment above. And I'm sure the env variable there points to the correct WASI_SDK directory.<br>
I'm on MacOS Catalina, if that has some special conditions which I might have missed out on.</p>
</blockquote>



<a name="211669889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23603%20error%20%3Cwasi/core.h%3E%20is%20only%20support.../near/211669889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23603.20error.20.3Cwasi.2Fcore.2Eh.3E.20is.20only.20support.2E.2E.2E.html#211669889">(Sep 29 2020 at 19:11)</a>:</h4>
<p>rutvora <a href="https://github.com/bytecodealliance/wasmtime/issues/603#issuecomment-700924143">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/603">Issue #603</a>:</p>
<blockquote>
<p>@sunfishcode I rechecked, turns out I wasn't. I was calling "[WASI_SDK_PATH]/bin/clang" (as a literal) and it defaulted to xCode Clang somehow :/</p>
<p>Thanks for the help though @bjorn3 and @sunfishcode </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>