<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2645 Use `_setjmp` instead of `setjmp` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html">wasmtime / PR #2645 Use `_setjmp` instead of `setjmp`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="225564958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225564958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225564958">(Feb 08 2021 at 16:01)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>:</p>
<blockquote>
<p>Apparently on macOS <code>setjmp</code> manipulates the process-wide signal mask<br>
which adds a good deal of overhead. We don't actually need this<br>
functionality so this commit switches to using the underscore-prefixed<br>
version of setjmp/longjmp which is defined to not maniuplate the signal<br>
mask. This came out of poking around on #2644 and on macOS locally thi<br>
sdropped the overhead from 721ns to 55ns.</p>
<p>I'll note that I'm not sure if the underscore-versions are present in other platforms, but I figure that CI can figure it out here.</p>
</blockquote>



<a name="225567586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225567586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225567586">(Feb 08 2021 at 16:18)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225568728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225568728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225568728">(Feb 08 2021 at 16:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225570500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225570500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225570500">(Feb 08 2021 at 16:35)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225571567"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225571567" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225571567">(Feb 08 2021 at 16:42)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225572524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225572524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225572524">(Feb 08 2021 at 16:48)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225575207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225575207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225575207">(Feb 08 2021 at 17:05)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2645#pullrequestreview-585720723">PR Review</a>.</p>



<a name="225575208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225575208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225575208">(Feb 08 2021 at 17:05)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2645#pullrequestreview-585720723">PR Review</a>.</p>



<a name="225575209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225575209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225575209">(Feb 08 2021 at 17:05)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2645#discussion_r572213335">PR Review Comment</a>:</p>
<blockquote>
<p>tiny nit, but would it be possible to choose other names for the macros rather than aliasing <code>setjmp</code>/<code>longjmp</code>/<code>jmp_buf</code>? This could be confusing otherwise; best to avoid surprising macro indirections :-)</p>
</blockquote>



<a name="225577101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225577101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225577101">(Feb 08 2021 at 17:17)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a> from <code>underscore-setjmp</code> to <code>main</code>.</p>



<a name="225583860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232645%20Use%20%60_setjmp%60%20instead%20of%20%60setjmp%60/near/225583860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232645.20Use.20.60_setjmp.60.20instead.20of.20.60setjmp.60.html#225583860">(Feb 08 2021 at 18:05)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2645">PR #2645</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>