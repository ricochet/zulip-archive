<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1524 Refactor · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html">wasmtime / PR #1524 Refactor</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="194349105"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194349105" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194349105">(Apr 16 2020 at 18:39)</a>:</h4>
<p>sunfishcode opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194351766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351766">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124">PR Review</a>.</p>



<a name="194351768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351768">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394906124">PR Review</a>.</p>



<a name="194351769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351769">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773446" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773446">PR Review Comment</a>:</p>
<blockquote>
<p>I think this would probably be best done by keeping <code>&amp;self</code> as an argument, because that way if you want to test <code>Func</code> a few times you don't have to worry about cloning and getting the <code>Func</code> back in case of an error.</p>
<p>I think we can still return a <code>'static</code> closure here, it just needs to close over the <code>InstanceHandle</code> as well.</p>
</blockquote>



<a name="194351772"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351772" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351772">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774148" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774148">PR Review Comment</a>:</p>
<blockquote>
<p>Out of curiosity, how come this changed? Is the intention to avoid storing the <code>GlobalType</code> next to the <code>ExportGlobal</code> since they're basically inferred from one another?</p>
</blockquote>



<a name="194351773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351773">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773743" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409773743">PR Review Comment</a>:</p>
<blockquote>
<p>It looks like a lot of the diff is due to the change here, I'm curious how come this changed though?</p>
</blockquote>



<a name="194351775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351775">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409776080" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409776080">PR Review Comment</a>:</p>
<blockquote>
<p>I think if we return an <code>ExactSizeIterator</code> we can avoid adding an extra method for this, since it should still be possible to do <code>module.imports().len()</code> in that case.</p>
</blockquote>



<a name="194351776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351776">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409775432" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409775432">PR Review Comment</a>:</p>
<blockquote>
<p>This may need double-checking, but I think <code>self.module</code> may not be necessary any more after this change. I think the <code>Store</code> is still needed but we may be able to remove the <code>Module</code> field from an <code>Instance</code>?</p>
</blockquote>



<a name="194351777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194351777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194351777">(Apr 16 2020 at 18:59)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774741" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409774741">PR Review Comment</a>:</p>
<blockquote>
<p>To enhance this a bit, perhaps this could return an <code>ExactSizeIterator</code> which should allow for enumeration and such?</p>
</blockquote>



<a name="194352497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194352497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194352497">(Apr 16 2020 at 19:04)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409784268" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409784268">PR Review Comment</a>:</p>
<blockquote>
<p>With <code>Instance::exports()</code> computing <code>Extern</code> values on demand, it now returns <code>Extern</code> instead of <code>&amp;Extern</code>. In code like <code>let func = instance.get_export("foo").unwrap().func().unwrap()</code>, if <code>func()</code> took a <code>&amp;self</code>, it'd be taking a reference to a temporary.</p>
</blockquote>



<a name="194352498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194352498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194352498">(Apr 16 2020 at 19:04)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394919724" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394919724">PR Review</a>.</p>



<a name="194353665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194353665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194353665">(Apr 16 2020 at 19:13)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926149" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926149">PR Review</a>.</p>



<a name="194353666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194353666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194353666">(Apr 16 2020 at 19:13)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789357" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789357">PR Review Comment</a>:</p>
<blockquote>
<p>Makes sense yeah, could we perhaps add alternative methods for these idioms though? Idiomatically this feels like the correct signature for this function (a by-value perhaps being <code>into_func(self)</code>). Perhaps we could add <code>Instance::functions()</code> and such which return iterators over just those values?</p>
</blockquote>



<a name="194353812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194353812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194353812">(Apr 16 2020 at 19:14)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926815" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394926815">PR Review</a>.</p>



<a name="194353813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194353813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194353813">(Apr 16 2020 at 19:14)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789915" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409789915">PR Review Comment</a>:</p>
<blockquote>
<p>I did a quick experiment with this, and <code>Linker::instance</code> currently needs <code>Instance::module</code>. We don't currently store the export names in the instance otherwise.</p>
</blockquote>



<a name="194354041"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194354041" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194354041">(Apr 16 2020 at 19:16)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394928112" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394928112">PR Review</a>.</p>



<a name="194354042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194354042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194354042">(Apr 16 2020 at 19:16)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409790905" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409790905">PR Review Comment</a>:</p>
<blockquote>
<p>Ah ok no worries. We could make the internal handle <code>pub(crate)</code> so the linker could access it, but it's fine to tackle this later if really necessary.</p>
</blockquote>



<a name="194360898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194360898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194360898">(Apr 16 2020 at 20:12)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394964851" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-394964851">PR Review</a>.</p>



<a name="194360899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194360899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194360899">(Apr 16 2020 at 20:12)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409820723" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409820723">PR Review Comment</a>:</p>
<blockquote>
<p>This is because <code>Module::exports</code> is now giving you results by value instead of by reference, and without this a lot of common scenarios have to do awkward things to avoid taking a reference of a temporary.</p>
</blockquote>



<a name="194381734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381734">(Apr 16 2020 at 23:49)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073794" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073794">PR Review</a>.</p>



<a name="194381735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381735">(Apr 16 2020 at 23:49)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409912967" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409912967">PR Review Comment</a>:</p>
<blockquote>
<p>And, it turns out, we can actually make <code>Instance::exports</code> provide the names in a reasonable way, which helps the <code>Linker</code>, and makes the API much nicer as you no longer need to <code>zip</code> with <code>Module::exports</code> just to get the names.</p>
<p>Now, nothing in <code>Instance</code> itself or its users need it to have a <code>Module</code>. I've left it in for now because it looks like it might unregister some things in its <code>Drop</code>, but if we want to sort that out we could drop the <code>Module</code> after instantiation.</p>
</blockquote>



<a name="194381798"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381798" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381798">(Apr 16 2020 at 23:50)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073957" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395073957">PR Review</a>.</p>



<a name="194381799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381799">(Apr 16 2020 at 23:50)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913121" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913121">PR Review Comment</a>:</p>
<blockquote>
<p>Cool, done.</p>
</blockquote>



<a name="194381813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381813">(Apr 16 2020 at 23:50)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913217" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913217">PR Review Comment</a>:</p>
<blockquote>
<p>Works great.</p>
</blockquote>



<a name="194381814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381814">(Apr 16 2020 at 23:50)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074071" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074071">PR Review</a>.</p>



<a name="194381842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381842">(Apr 16 2020 at 23:51)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074246" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395074246">PR Review</a>.</p>



<a name="194381843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381843">(Apr 16 2020 at 23:51)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913345" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409913345">PR Review Comment</a>:</p>
<blockquote>
<p>Makes sense. I've now implemented this.</p>
</blockquote>



<a name="194381861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194381861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194381861">(Apr 16 2020 at 23:51)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194382065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194382065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194382065">(Apr 16 2020 at 23:54)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194383236"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194383236" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194383236">(Apr 17 2020 at 00:14)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081798" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081798">PR Review</a>.</p>



<a name="194383237"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194383237" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194383237">(Apr 17 2020 at 00:14)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920187" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920187">PR Review Comment</a>:</p>
<blockquote>
<p>Ok, renaming them to <code>into_func()</code>.</p>
<p>We could add <code>Instance::functions()</code> if that's a common use case, but users could also write <code>Instance.exports().filter_map(|export| export.into_func())</code> if that's what they want.</p>
</blockquote>



<a name="194383447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194383447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194383447">(Apr 17 2020 at 00:17)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194384523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194384523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194384523">(Apr 17 2020 at 00:34)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194471080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471080">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757">PR Review</a>.</p>



<a name="194471081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471081">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-395081757">PR Review</a>.</p>



<a name="194471082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471082">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920150" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r409920150">PR Review Comment</a>:</p>
<blockquote>
<p>Stray lifetime?</p>
</blockquote>



<a name="194471083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471083">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410351976" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410351976">PR Review Comment</a>:</p>
<blockquote>
<p>Instead of having a struct for this could we perhaps return a tuple from the exports iterator?</p>
</blockquote>



<a name="194471084"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471084" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471084">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353195" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353195">PR Review Comment</a>:</p>
<blockquote>
<p>I've worried historicaly that this is pretty unwieldy. The previous incantation was sort of <em>just</em> on the line of not motivating me to try to improve things, but this feels like it's pretty unergonomic to document as a pattern to call things. Would you be ok adding more accessors in this PR for <code>Instance</code>? For example I think we could make this:</p>
<div class="codehilite"><pre><span></span><span class="n">instance</span><span class="p">.</span><span class="n">get_func</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">get2</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w"></span>
</pre></div>


</blockquote>



<a name="194471085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471085">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410352307" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410352307">PR Review Comment</a>:</p>
<blockquote>
<p>You can skip the <code>struct</code> type definition here, inside of the closure you can do <code>drop(&amp;instance_clone)</code> and just use <code>export</code> directly, and that'll capture everything necessary.</p>
</blockquote>



<a name="194471087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471087">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353782" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410353782">PR Review Comment</a>:</p>
<blockquote>
<p>I also don't mind pushing up some new iterators/accessors for <code>Instance</code> as part of this PR too</p>
</blockquote>



<a name="194471088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471088">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354923" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354923">PR Review Comment</a>:</p>
<blockquote>
<p>Similar to above, I think we should keep this as an internal field with a public accessor so we can change the make up of the structure over time.</p>
</blockquote>



<a name="194471089"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471089" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471089">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354691" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410354691">PR Review Comment</a>:</p>
<blockquote>
<p>I personally don't think we should have public-structs-with-public-fields in the API. They're quite inflexible in terms of future additions as well as changing the makeup of the internals. For example committing to two <code>String</code> allocations here I think may be something we want to tweak in the future. We could, for example, have something like <code>Arc&lt;str&gt;</code> which is cheaply cloneable and contains module/string, along with an index of where to split the string.</p>
</blockquote>



<a name="194471090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194471090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194471090">(Apr 17 2020 at 17:06)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410355275" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r410355275">PR Review Comment</a>:</p>
<blockquote>
<p>Could the old methods be preserved since they can be useful in their own right too?</p>
</blockquote>



<a name="194517834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194517834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194517834">(Apr 18 2020 at 00:56)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194517883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194517883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194517883">(Apr 18 2020 at 00:57)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194697152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194697152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194697152">(Apr 20 2020 at 16:06)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194698490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194698490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194698490">(Apr 20 2020 at 16:17)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411510324" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411510324">PR Review Comment</a>:</p>
<blockquote>
<p>Oops, yes. This was from an earlier experiment. Fixed now.</p>
</blockquote>



<a name="194698491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194698491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194698491">(Apr 20 2020 at 16:17)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396607691" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396607691">PR Review</a>.</p>



<a name="194699140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699140">(Apr 20 2020 at 16:22)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396612010" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396612010">PR Review</a>.</p>



<a name="194699142"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699142" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699142">(Apr 20 2020 at 16:22)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411514091" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411514091">PR Review Comment</a>:</p>
<blockquote>
<p>Good idea, I've now added <code>get_func</code> etc. accessors and update the examples and docs to use them, and that makes things much cleaner.</p>
</blockquote>



<a name="194699407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699407">(Apr 20 2020 at 16:23)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613405" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613405">PR Review</a>.</p>



<a name="194699408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699408">(Apr 20 2020 at 16:23)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515322" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515322">PR Review Comment</a>:</p>
<blockquote>
<p>I started cleaning this, and ended up finding it made sense to go ahead and eliminate the allocations. So we now have accessor functions, and they return <code>&amp; 'module str</code>.</p>
</blockquote>



<a name="194699478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699478">(Apr 20 2020 at 16:24)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613623" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396613623">PR Review</a>.</p>



<a name="194699479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699479">(Apr 20 2020 at 16:24)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515518" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411515518">PR Review Comment</a>:</p>
<blockquote>
<p>Also fixed.</p>
</blockquote>



<a name="194699771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194699771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194699771">(Apr 20 2020 at 16:26)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194700602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194700602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194700602">(Apr 20 2020 at 16:32)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396620307" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396620307">PR Review</a>.</p>



<a name="194700603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194700603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194700603">(Apr 20 2020 at 16:32)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411521449" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411521449">PR Review Comment</a>:</p>
<blockquote>
<p>I'm not opposed, I just haven't found cases where they're useful. For the "I don't know what this is" or "This might be one of a few different things" use cases, <code>Extern</code> is just an <code>enum</code> and you can plain old <code>match</code> or <code>if let</code> on it, which read better anyway.</p>
<p>With the new <code>Instance::get_func</code> accessors, even <code>Extern::into_func</code> is a little dubious, because you can use <code>match</code> and <code>if let</code> to do that too, but they are handy when you want to report different errors in cases like this:</p>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="n">instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">get_export</span><span class="p">(</span><span class="s">&quot;_start&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">context</span><span class="p">(</span><span class="s">&quot;expected a _start export&quot;</span><span class="p">)</span><span class="o">?</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">into_func</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">context</span><span class="p">(</span><span class="s">&quot;expected export to be a func&quot;</span><span class="p">)</span><span class="o">?</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[])</span><span class="o">?</span><span class="p">;</span><span class="w"></span>
</pre></div>


</blockquote>



<a name="194700696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194700696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194700696">(Apr 20 2020 at 16:33)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396621064" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396621064">PR Review</a>.</p>



<a name="194700697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194700697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194700697">(Apr 20 2020 at 16:33)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411522132" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411522132">PR Review Comment</a>:</p>
<blockquote>
<p>Ah, cool. I've now done this.</p>
</blockquote>



<a name="194715524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194715524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194715524">(Apr 20 2020 at 18:36)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194716319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194716319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194716319">(Apr 20 2020 at 18:41)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194719638"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194719638" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194719638">(Apr 20 2020 at 19:09)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194723690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723690">(Apr 20 2020 at 19:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002">PR Review</a>.</p>



<a name="194723691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723691">(Apr 20 2020 at 19:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396759002">PR Review</a>.</p>



<a name="194723692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723692">(Apr 20 2020 at 19:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411643645" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411643645">PR Review Comment</a>:</p>
<blockquote>
<p>I think that this is auto-inferred, but could this be changed to <code>Export&lt;'me&gt;</code>?</p>
</blockquote>



<a name="194723693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723693">(Apr 20 2020 at 19:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644682" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644682">PR Review Comment</a>:</p>
<blockquote>
<p>I think the <code>'module self</code> can just be <code>self</code> here (keeping the <code>&amp;'module str</code> ret)</p>
</blockquote>



<a name="194723694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723694">(Apr 20 2020 at 19:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644752" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411644752">PR Review Comment</a>:</p>
<blockquote>
<p>ditto as above</p>
</blockquote>



<a name="194723745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194723745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194723745">(Apr 20 2020 at 19:48)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194725527"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194725527" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194725527">(Apr 20 2020 at 20:03)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194726205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726205">(Apr 20 2020 at 20:09)</a>:</h4>
<p>sunfishcode updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a> from <code>refactor</code> to <code>master</code>:</p>
<blockquote>
<p>This contains refactorings and API changes split off from #1516.</p>
<p>The main public-facing change here is that <code>Instance</code> and <code>Module</code> now compute their imports and exports on demand rather than holding precomputed arrays, and <code>Func::get*</code> return closures which capture an <code>InstanceHandle</code> so that they hold the instance live dynamically.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md" title="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
</blockquote>



<a name="194726441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726441">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776658" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776658">PR Review</a>.</p>



<a name="194726442"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726442" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726442">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659565" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659565">PR Review Comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="194726452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726452">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776753" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776753">PR Review</a>.</p>



<a name="194726453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726453">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659643" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659643">PR Review Comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="194726472"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726472" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726472">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776838" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396776838">PR Review</a>.</p>



<a name="194726474"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194726474" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194726474">(Apr 20 2020 at 20:11)</a>:</h4>
<p>sunfishcode created <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659714" title="https://github.com/bytecodealliance/wasmtime/pull/1524#discussion_r411659714">PR Review Comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="194732043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194732043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194732043">(Apr 20 2020 at 20:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396805590" title="https://github.com/bytecodealliance/wasmtime/pull/1524#pullrequestreview-396805590">PR Review</a>.</p>



<a name="194732054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231524%20Refactor/near/194732054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231524.20Refactor.html#194732054">(Apr 20 2020 at 20:55)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1524" title="https://github.com/bytecodealliance/wasmtime/pull/1524">PR #1524</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>