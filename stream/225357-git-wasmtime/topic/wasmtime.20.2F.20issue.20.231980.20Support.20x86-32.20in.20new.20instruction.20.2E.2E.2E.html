<html>
<head><meta charset="utf-8"><title>wasmtime / issue #1980 Support x86-32 in new instruction ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html">wasmtime / issue #1980 Support x86-32 in new instruction ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="281211404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/281211404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#281211404">(May 04 2022 at 19:58)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>We don't currently have fully working x86 support, but we have a backend in-tree that's largely completely. However, it uses the old instructions selection framework, and as described in #1936, Cranelift is in the process of switching to a new one. While the old framework won't be removed until quite a bit later, that means that not much work will go into it anymore, and that any investments into backends based on it will become obsolete.</p>
<p>We should investigate the best approach to supporting x86 in the new framework.</p>
<p>There's active work going on to implement x64 support in the new framework, but no current effort around x86. In #1789 @whitequark mentions that she'd be happy to contribute to x86 support in the new framework, but only if the general support for targeting x86 exists.</p>
<p>@bnjbvr @julian-seward1, can you comment on what the best approach to take here would be? I understand that this isn't something that's high on your priority list, so as a first step we should just get a clearer picture of what this could look like, and the effort required.</p>
</blockquote>



<a name="281211418"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/281211418" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#281211418">(May 04 2022 at 19:58)</a>:</h4>
<p>cfallin labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>We don't currently have fully working x86 support, but we have a backend in-tree that's largely completely. However, it uses the old instructions selection framework, and as described in #1936, Cranelift is in the process of switching to a new one. While the old framework won't be removed until quite a bit later, that means that not much work will go into it anymore, and that any investments into backends based on it will become obsolete.</p>
<p>We should investigate the best approach to supporting x86 in the new framework.</p>
<p>There's active work going on to implement x64 support in the new framework, but no current effort around x86. In #1789 @whitequark mentions that she'd be happy to contribute to x86 support in the new framework, but only if the general support for targeting x86 exists.</p>
<p>@bnjbvr @julian-seward1, can you comment on what the best approach to take here would be? I understand that this isn't something that's high on your priority list, so as a first step we should just get a clearer picture of what this could look like, and the effort required.</p>
</blockquote>



<a name="289333756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/289333756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#289333756">(Jul 12 2022 at 14:38)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>We don't currently have fully working x86 support, but we have a backend in-tree that's largely completely. However, it uses the old instructions selection framework, and as described in #1936, Cranelift is in the process of switching to a new one. While the old framework won't be removed until quite a bit later, that means that not much work will go into it anymore, and that any investments into backends based on it will become obsolete.</p>
<p>We should investigate the best approach to supporting x86 in the new framework.</p>
<p>There's active work going on to implement x64 support in the new framework, but no current effort around x86. In #1789 @whitequark mentions that she'd be happy to contribute to x86 support in the new framework, but only if the general support for targeting x86 exists.</p>
<p>@bnjbvr @julian-seward1, can you comment on what the best approach to take here would be? I understand that this isn't something that's high on your priority list, so as a first step we should just get a clearer picture of what this could look like, and the effort required.</p>
</blockquote>



<a name="321462006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/321462006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#321462006">(Jan 15 2023 at 09:58)</a>:</h4>
<p>jain98 <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-1383107380">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>@tschneidereit @whitequark @cfallin @bjorn3 I would be interested in picking this up. I still need to dive deeper to come up with a concrete plan, but would one of you (or someone you could connect me to) be willing to mentor me?</p>
</blockquote>



<a name="321914112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/321914112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#321914112">(Jan 17 2023 at 19:54)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-1385969388">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>Hi @jain98! We're always happy to answer questions and help however we can. I'd encourage you to join the <code>#cranelift</code> stream at <a href="https://bytecodealliance.zulipchat.com/">https://bytecodealliance.zulipchat.com/</a> as a good place to ask questions.</p>
<p>Since all our current backends are 64-bit, we haven't necessarily designed everything to support 32-bit targets well. We'd like to fix that, but in the meantime just be aware that you may find some things are harder than they should be. There's been recent discussion about that in #5572, and the advice there applies here too.</p>
</blockquote>



<a name="322799117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/322799117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#322799117">(Jan 22 2023 at 01:41)</a>:</h4>
<p>jain98 <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-1399381269">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>Hi @jameysharp, thanks for replying and a link to a recent discussion. I've already joined the cranelift zulip chat, but figured I'd start here as it seemed more intentional. </p>
<p>It at least looks like there's already an existing backend for x86-32, no? If yes, could you could point me to it? That might be a good starting point for me.</p>
</blockquote>



<a name="323104017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/323104017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#323104017">(Jan 23 2023 at 19:45)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-1400885232">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>There used to be an x86-32 backend, but it was unmaintained and eventually got in the way of working on the rest of Cranelift, so it was deleted. If I'm reading the history correctly there have been at least two complete rewrites of how Cranelift backends are written since the last time that backend worked, so digging it up out of the git history probably won't help you much. Instead I'd suggest looking at the current x86-64 backend, which is mostly in <code>cranelift/codegen/src/isa/x64/</code>.</p>
</blockquote>



<a name="490219228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/490219228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#490219228">(Dec 20 2024 at 19:31)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> removed the wasmtime:platform-support label from <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">Issue #1980</a>.</p>



<a name="490219359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/490219359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#490219359">(Dec 20 2024 at 19:32)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-2557607967">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>For those following this issue Wasmtime now supports 32-bit x86 via the <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/pulley.md">Pulley interpreter</a> which should now be able to run most wasm programs. Pulley is not 100% finished yet in that we still have some polish to do, but it should be suitable for testing at this time. </p>
<p>General support for Wasmtime on 32-bit x86 architectures should be "solved" now and if there are any issues please feel free to open a new issue, and this issue specifically will continue to track the addition of a 32-bit x86 backend for Cranelift.</p>
</blockquote>



<a name="490220101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/490220101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#490220101">(Dec 20 2024 at 19:38)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-2557615804">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>Oh, fantastic! From my perspective Pulley is probably good enough, since the failure case I'm trying to avoid is "YoWASP does not work"; if it works but is slow, I can print a message recommending to upgrade to a 64-bit Python.</p>
<p>(Is there a way to detect that Pulley is being used?)</p>
</blockquote>



<a name="490221175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/490221175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#490221175">(Dec 20 2024 at 19:47)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-2557626373">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>Not currently, but it'd be reasonable to add one for sure</p>
</blockquote>



<a name="490221674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%231980%20Support%20x86-32%20in%20new%20instruction%20.../near/490221674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.231980.20Support.20x86-32.20in.20new.20instruction.20.2E.2E.2E.html#490221674">(Dec 20 2024 at 19:51)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/issues/1980#issuecomment-2557631784">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1980">issue #1980</a>:</p>
<blockquote>
<p>I'd really like to have that, since as I understand there is a ~10x perf degradation, which is fine in that it enables the capability, but this being someone's only impression without understanding that it's unusually slow wouldn't be good.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>