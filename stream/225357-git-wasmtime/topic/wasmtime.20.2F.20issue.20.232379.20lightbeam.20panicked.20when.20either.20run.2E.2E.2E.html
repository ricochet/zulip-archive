<html>
<head><meta charset="utf-8"><title>wasmtime / issue #2379 lightbeam panicked when either run... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.232379.20lightbeam.20panicked.20when.20either.20run.2E.2E.2E.html">wasmtime / issue #2379 lightbeam panicked when either run...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="255087334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%232379%20lightbeam%20panicked%20when%20either%20run.../near/255087334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.232379.20lightbeam.20panicked.20when.20either.20run.2E.2E.2E.html#255087334">(Sep 27 2021 at 17:30)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/2379#issuecomment-928096749">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/2379">issue #2379</a>:</p>
<blockquote>
<p>Lightbeam was removed in <a href="https://github.com/bytecodealliance/wasmtime/pull/3390">https://github.com/bytecodealliance/wasmtime/pull/3390</a> as explained in <a href="https://github.com/bytecodealliance/rfcs/pull/14">RFC 14</a>, so I'm going to close this.</p>
</blockquote>



<a name="255087336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%232379%20lightbeam%20panicked%20when%20either%20run.../near/255087336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.232379.20lightbeam.20panicked.20when.20either.20run.2E.2E.2E.html#255087336">(Sep 27 2021 at 17:30)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/2379">issue #2379</a>:</p>
<blockquote>
<p><strong>- What are the steps to reproduce the issue?</strong><br>
t.wasm is wat2wasm from below text:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$add</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="cp">$lhs</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">param</span><span class="w"> </span><span class="cp">$rhs</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">get_local</span><span class="w"> </span><span class="cp">$lhs</span><span class="w"></span>
<span class="w">    </span><span class="n">get_local</span><span class="w"> </span><span class="cp">$rhs</span><span class="w"></span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">"add"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="cp">$add</span><span class="p">))</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>./wasmtime run --lightbeam t.wasm 1 2<br>
./wasmtime wasm2obj --lightbeam t.wasm t.obj<br>
**- What do you expect to happen? What does actually happen? Does it panic, and<br>
  if so, with which assertion?**<br>
Expect to be run without any issue. Got error with the output:</p>
<blockquote>
<p>thread 'main' panicked at 'index out of bounds: the len is 0 but the index is 0', /PATH/wasmtime/crates/lightbeam/src/backend.rs:637:35<br>
note: run with <code>RUST_BACKTRACE=1</code> environment variable to display a backtrace</p>
</blockquote>
<p><strong>- Which Wasmtime version / commit hash / branch are you using?</strong><br>
main latest by now, commit 12e658a1ef344ccacf872accb0cadd7ef6e8cf4a<br>
<strong>- If relevant, can you include some extra information about your environment?</strong><br>
  (Rust version, operating system, architecture...)<br>
rustc 1.45.2, MacOS<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>