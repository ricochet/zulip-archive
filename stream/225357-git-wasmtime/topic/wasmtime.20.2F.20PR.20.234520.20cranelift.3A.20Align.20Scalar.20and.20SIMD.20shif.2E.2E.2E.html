<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4520 cranelift: Align Scalar and SIMD shif... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html">wasmtime / PR #4520 cranelift: Align Scalar and SIMD shif...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="290696180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290696180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290696180">(Jul 24 2022 at 19:36)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>In #4424 @uweigand reported that we have different semantics for scalar and SIMD shifts, which is unusual in our instruction set.</p>
<p>This PR corrects the AArch64 and x86 backends to mask the shift amount before performing SIMD shifts. The s390x should already follow this behavior.</p>
<p>It also reorganizes the <code>ishl</code>/<code>ushl</code>/<code>sshl</code> tests into separate files. Since we had a bunch of duplicate tests in hard to find files that were somewhat unrelated.</p>
<p>I tried to keep changes contained in separate commits so that it's easier to review.</p>
<p>Fixes #4424<br>
CC: @cfallin @abrown @uweigand @akirilov-arm </p>
</blockquote>



<a name="290699538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290699538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290699538">(Jul 24 2022 at 20:59)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>In #4424 @uweigand reported that we have different semantics for scalar and SIMD shifts, which is unusual in our instruction set.</p>
<p>This PR corrects the AArch64 and x86 backends to mask the shift amount before performing SIMD shifts. The s390x backend should already follow this behavior.</p>
<p>It also reorganizes the <code>ishl</code>/<code>ushl</code>/<code>sshl</code> tests into separate files. Since we had a bunch of duplicate tests in hard to find files that were somewhat unrelated.</p>
<p>I tried to keep changes contained in separate commits so that it's easier to review.</p>
<p>Fixes #4424<br>
CC: @cfallin @abrown @uweigand @akirilov-arm </p>
</blockquote>



<a name="290834894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290834894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290834894">(Jul 26 2022 at 00:02)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1050221535">PR review</a>.</p>



<a name="290899091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290899091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290899091">(Jul 26 2022 at 14:22)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930026359">PR review comment</a>:</p>
<blockquote>
<p>Just a quick comment - I am surprised that passing <code>$I32</code> to <code>sub</code> works for <code>I64X2</code> vectors, since the shift amount should end up being a large positive number (or 0) instead of a small negative number.</p>
</blockquote>



<a name="290899092"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290899092" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290899092">(Jul 26 2022 at 14:22)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051071849">PR review</a>.</p>



<a name="290899093"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290899093" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290899093">(Jul 26 2022 at 14:22)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051071849">PR review</a>.</p>



<a name="290899094"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290899094" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290899094">(Jul 26 2022 at 14:22)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930026519">PR review comment</a>:</p>
<blockquote>
<p>Ditto.</p>
</blockquote>



<a name="290899095"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290899095" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290899095">(Jul 26 2022 at 14:22)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930029460">PR review comment</a>:</p>
<blockquote>
<p>PR #4521 should remove these unnecessary instructions.</p>
</blockquote>



<a name="290907506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290907506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290907506">(Jul 26 2022 at 15:09)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>.</p>



<a name="290907510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290907510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290907510">(Jul 26 2022 at 15:09)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051160981">PR review</a>.</p>



<a name="290907512"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290907512" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290907512">(Jul 26 2022 at 15:09)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930088049">PR review comment</a>:</p>
<blockquote>
<p>I'm guessing <code>dup</code> will sign extend? That's the only way I can see this working, but I can't find any mention of sign extending in the docs.</p>
<p>I've switched to a 64 bit sub.</p>
</blockquote>



<a name="290907569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290907569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290907569">(Jul 26 2022 at 15:10)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051161337">PR review</a>.</p>



<a name="290907572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290907572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290907572">(Jul 26 2022 at 15:10)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930088302">PR review comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> Will rebase once that lands</p>
</blockquote>



<a name="290909966"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290909966" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290909966">(Jul 26 2022 at 15:26)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051188552">PR review</a>.</p>



<a name="290909970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290909970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290909970">(Jul 26 2022 at 15:26)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930107376">PR review comment</a>:</p>
<blockquote>
<p>Ah, now I remember why the original code works and is in fact correct, but I still like the usage of <code>$I64</code> - I forgot that the vector shifts used only <strong>the least significant byte</strong> of the shift amount, so there is in fact masking, just not the kind we need.</p>
</blockquote>



<a name="290935921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290935921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290935921">(Jul 26 2022 at 18:24)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>.</p>



<a name="290938677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290938677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290938677">(Jul 26 2022 at 18:45)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051463364">PR review</a>.</p>



<a name="290938678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290938678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290938678">(Jul 26 2022 at 18:45)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051463364">PR review</a>.</p>



<a name="290938679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290938679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290938679">(Jul 26 2022 at 18:45)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r930304668">PR review comment</a>:</p>
<blockquote>
<p>Could we add a <code>debug_assert!()</code> that <code>ty.lane_bits()</code> is a power of 2?</p>
</blockquote>



<a name="290938712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290938712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290938712">(Jul 26 2022 at 18:45)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1051463364">PR review</a>.</p>



<a name="290955563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/290955563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#290955563">(Jul 26 2022 at 21:00)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>.</p>



<a name="291013255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291013255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291013255">(Jul 27 2022 at 10:09)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1052243842">PR review</a>.</p>



<a name="291076691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291076691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291076691">(Jul 27 2022 at 16:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1052833355">PR review</a>.</p>



<a name="291076692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291076692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291076692">(Jul 27 2022 at 16:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r931293415">PR review comment</a>:</p>
<blockquote>
<p>Likewise here, let's update this comment</p>
</blockquote>



<a name="291076693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291076693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291076693">(Jul 27 2022 at 16:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r931291650">PR review comment</a>:</p>
<blockquote>
<p>There is a <code>.is_power_of_two()</code> method on the integer types that makes this clearer, IMHO (internally I suspect it uses exactly this idiom).</p>
</blockquote>



<a name="291076694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291076694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291076694">(Jul 27 2022 at 16:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#discussion_r931293184">PR review comment</a>:</p>
<blockquote>
<p>This comment is slightly out of date now ("can each use a single instruction, once the shift amount is masked")</p>
</blockquote>



<a name="291076695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291076695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291076695">(Jul 27 2022 at 16:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4520#pullrequestreview-1052833355">PR review</a>.</p>



<a name="291080583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291080583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291080583">(Jul 27 2022 at 17:23)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a> from <code>vec-shift</code> to <code>main</code>.</p>



<a name="291081766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291081766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291081766">(Jul 27 2022 at 17:32)</a>:</h4>
<p>jameysharp has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a>.</p>



<a name="291084788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234520%20cranelift%3A%20Align%20Scalar%20and%20SIMD%20shif.../near/291084788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234520.20cranelift.3A.20Align.20Scalar.20and.20SIMD.20shif.2E.2E.2E.html#291084788">(Jul 27 2022 at 17:54)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4520">PR #4520</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>