<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9669 Panic when running Wasm gc program · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html">wasmtime / issue #9669 Panic when running Wasm gc program</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="484173337"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/484173337" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#484173337">(Nov 24 2024 at 19:11)</a>:</h4>
<p><a href="https://github.com/kritzcreek">kritzcreek</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">Issue #9669</a>.</p>



<a name="484173338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/484173338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#484173338">(Nov 24 2024 at 19:11)</a>:</h4>
<p>kritzcreek opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>:</p>
<blockquote>
<p>Thanks so much for working on implementing the gc proposal! When I tested it on my own small language I ran into a panic and managed to minify the example down to: </p>
<h3>Test Case</h3>
<p>Minimal reproduction:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="n">Error</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::{</span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Instance</span><span class="p">,</span><span class="w"> </span><span class="n">Module</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">};</span>
<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="w"> </span><span class="n">Error</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"\</span>
<span class="s">(module</span>
<span class="s">  (rec</span>
<span class="s">    (type (;0;) (func (result i32)))</span>
<span class="s">    (type (;1;) (array (mut i32)))</span>
<span class="s">    (type $Point (;2;) (struct (field $xs (mut (ref null 1)))))</span>
<span class="s">  )</span>
<span class="s">  (export </span><span class="se">\"</span><span class="s">main</span><span class="se">\"</span><span class="s"> (func $main))</span>
<span class="s">  (func $main (;0;) (type 0) (result i32)</span>
<span class="s">    (local $p (ref null $Point))</span>
<span class="s">    i32.const 0</span>
<span class="s">    array.new_fixed 1 1</span>
<span class="s">    struct.new $Point</span>
<span class="s">    local.set $p</span>
<span class="s">    local.get $p</span>
<span class="s">    struct.get $Point $xs</span>
<span class="s">    i32.const 0</span>
<span class="s">    i32.const 1</span>
<span class="s">    array.set 1</span>
<span class="s">    local.get $p</span>
<span class="s">    struct.get $Point $xs</span>
<span class="s">    i32.const 0</span>
<span class="s">    array.get 1</span>
<span class="s">  )</span>
<span class="s">)"</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Engine</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="n">Config</span><span class="p">::</span><span class="n">new</span><span class="p">().</span><span class="n">wasm_function_references</span><span class="p">(</span><span class="kc">true</span><span class="p">).</span><span class="n">wasm_gc</span><span class="p">(</span><span class="kc">true</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Store</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Module</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">wat</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Instance</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">main_func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="p">.</span><span class="n">get_typed_func</span><span class="p">::</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="s">"main"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">main_func</span><span class="p">.</span><span class="n">call</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="p">())</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Result: {:?}"</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>Panics with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">gc</span><span class="err">\</span><span class="n">enabled</span><span class="err">\</span><span class="n">drc</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">238</span><span class="p">:</span><span class="mi">13</span><span class="p">:</span>
<span class="nc">every</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">stack</span><span class="w"> </span><span class="n">gc_ref</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">Wasm</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">entry</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">VMGcRefActivationsTable</span><span class="p">;</span><span class="w"> </span><span class="mh">0x20</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">table</span>
<span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">begin_panic_handler</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">665</span>
<span class="w">   </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">core</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">panic_fmt</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="o">/</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">74</span>
<span class="w">   </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">enabled</span><span class="p">::</span><span class="n">drc</span><span class="p">::</span><span class="n">DrcHeap</span><span class="p">::</span><span class="n">trace</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">gc</span><span class="err">\</span><span class="n">enabled</span><span class="err">\</span><span class="n">drc</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">238</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">enabled</span><span class="p">::</span><span class="n">drc</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">9</span><span class="p">::</span><span class="n">collect_increment</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">gc</span><span class="err">\</span><span class="n">enabled</span><span class="err">\</span><span class="n">drc</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">719</span>
<span class="w">   </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">gc_runtime</span><span class="p">::</span><span class="n">GarbageCollection</span><span class="p">::</span><span class="n">collect</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">enabled</span><span class="p">::</span><span class="n">drc</span><span class="p">::</span><span class="n">DrcCollection</span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">gc</span><span class="err">\</span><span class="n">gc_runtime</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">682</span>
<span class="w">   </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">GcStore</span><span class="p">::</span><span class="n">gc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">gc</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">68</span>
<span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">store</span><span class="p">::</span><span class="n">StoreOpaque</span><span class="p">::</span><span class="n">gc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">store</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1629</span>
<span class="w">   </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">store</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">17</span><span class="p">::</span><span class="n">gc</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">store</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">2645</span>
<span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">gc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">449</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">115</span>
<span class="w">  </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::</span><span class="n">Instance</span><span class="p">::</span><span class="n">from_vmctx</span><span class="o">&lt;</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">,</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">instance</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">239</span>
<span class="w">  </span><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">113</span>
<span class="w">  </span><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="nc">core</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">unwind_safe</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">25</span><span class="p">::</span><span class="n">call_once</span><span class="o">&lt;</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">,</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="err">\</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panic</span><span class="err">\</span><span class="n">unwind_safe</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">272</span>
<span class="w">  </span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span><span class="p">::</span><span class="n">do_call</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">unwind_safe</span><span class="p">::</span><span class="n">AssertUnwindSafe</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="err">\</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">557</span>
<span class="w">  </span><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="nc">core</span><span class="p">::</span><span class="n">iter</span><span class="p">::</span><span class="n">sources</span><span class="p">::</span><span class="n">once</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">0</span><span class="p">::</span><span class="n">size_hint</span><span class="o">&lt;</span><span class="n">wasmtime_environ</span><span class="p">::</span><span class="n">types</span><span class="p">::</span><span class="n">WasmSubType</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">15</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="err">\</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">521</span>
<span class="w">  </span><span class="mi">16</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">catch_unwind</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">unwind_safe</span><span class="p">::</span><span class="n">AssertUnwindSafe</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">,</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="err">\</span><span class="n">library</span><span class="err">\</span><span class="n">std</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">panic</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">350</span>
<span class="w">  </span><span class="mi">17</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_longjmp</span><span class="o">&lt;</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u32</span><span class="p">,</span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="p">,</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">136</span>
<span class="w">  </span><span class="mi">18</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">gc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">112</span>
<span class="w">  </span><span class="mi">19</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">20</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">21</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">22</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">func</span><span class="err">\</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">217</span>
<span class="w">  </span><span class="mi">23</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">call_closure</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">290</span>
<span class="w">  </span><span class="mi">24</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_setjmp_27_0_0</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">72</span>
<span class="w">  </span><span class="mi">25</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">267</span>
<span class="w">  </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">3</span><span class="p">::</span><span class="n">with</span><span class="p">::</span><span class="n">closure</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">414</span>
<span class="w">  </span><span class="mi">27</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">tls</span><span class="p">::</span><span class="n">set</span><span class="o">&lt;</span><span class="kt">i32</span><span class="p">,</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">3</span><span class="p">::</span><span class="n">with</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">790</span>
<span class="w">  </span><span class="mi">28</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="p">::</span><span class="n">with</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">1</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">414</span>
<span class="w">  </span><span class="mi">29</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">vm</span><span class="err">\</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">259</span>
<span class="w">  </span><span class="mi">30</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">invoke_wasm_and_catch_traps</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="k">impl</span><span class="cp">$</span><span class="mi">1</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::</span><span class="n">closure_env</span><span class="cp">$</span><span class="mi">0</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1613</span>
<span class="w">  </span><span class="mi">31</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call_raw</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">func</span><span class="err">\</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">214</span>
<span class="w">  </span><span class="mi">32</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="kt">i32</span><span class="p">,</span><span class="n">ref_mut</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">store</span><span class="p">::</span><span class="n">Store</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="n">C</span><span class="p">:</span><span class="err">\</span><span class="n">Users</span><span class="err">\</span><span class="n">creek</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">27.0.0</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">runtime</span><span class="err">\</span><span class="n">func</span><span class="err">\</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">107</span>
<span class="w">  </span><span class="mi">33</span><span class="p">:</span><span class="w"> </span><span class="nc">nemo</span><span class="p">::</span><span class="n">main</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="p">.</span><span class="err">\</span><span class="n">crates</span><span class="err">\</span><span class="n">cli</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">34</span>
<span class="w">  </span><span class="mi">34</span><span class="p">:</span><span class="w"> </span><span class="nc">core</span><span class="p">::</span><span class="n">ops</span><span class="p">::</span><span class="n">function</span><span class="p">::</span><span class="nb">FnOnce</span><span class="p">::</span><span class="n">call_once</span><span class="o">&lt;</span><span class="n">enum2</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="p">,</span><span class="n">alloc</span><span class="p">::</span><span class="n">boxed</span><span class="p">::</span><span class="nb">Box</span><span class="o">&lt;</span><span class="k">dyn</span><span class="cp">$</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">,</span><span class="n">alloc</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">Global</span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)(),</span><span class="n">tuple</span><span class="cp">$</span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="o">&gt;</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="n">eeb90cda1969383f56a2637cbd3037bdf598841c</span><span class="err">\</span><span class="n">library</span><span class="err">\</span><span class="n">core</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">ops</span><span class="err">\</span><span class="n">function</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">250</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 27.0.0</p>
<p>Operating system: Verified on Windows and Mac</p>
<p>Architecture: x86_64 and arm64<br>
</p>
</blockquote>



<a name="484176521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/484176521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#484176521">(Nov 24 2024 at 20:05)</a>:</h4>
<p>pchickey assigned fitzgen to <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>.</p>



<a name="484176530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/484176530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#484176530">(Nov 24 2024 at 20:05)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/9669#issuecomment-2496205885">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>:</p>
<blockquote>
<p>Nick is on vacation right now so this may need to wait until he's back.</p>
</blockquote>



<a name="485884291"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/485884291" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#485884291">(Dec 03 2024 at 15:36)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:gc label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">Issue #9669</a>.</p>



<a name="486167462"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/486167462" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#486167462">(Dec 04 2024 at 19:51)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/9669#issuecomment-2518428392">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>:</p>
<blockquote>
<p>Thanks for filing an issue and providing a <code>.wat</code> test case! Back from vacation now and slowly catching up on things.</p>
<p>As I just mentioned in another issue, at this moment the default collector (DRC) does not yet transitively decrement reference counts, so many acyclic garbage objects will be leaked (in this case, the array objects referenced from <code>$Point</code> objects).</p>
<p>This acyclic leakage is not fundamental nor intended long term, it just reflects that this is a young, WIP implementation. (Cycles will always leak with this collector, on the other hand, since it is a simple reference-counting collector and does not include a cycle collector.)</p>
</blockquote>



<a name="486167549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/486167549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#486167549">(Dec 04 2024 at 19:51)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/9669#issuecomment-2518429648">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>:</p>
<blockquote>
<p>Ah but I see that I didn't read closely enough, and that this is finding a stack map issue</p>
</blockquote>



<a name="486167699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239669%20Panic%20when%20running%20Wasm%20gc%20program/near/486167699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239669.20Panic.20when.20running.20Wasm.20gc.20program.html#486167699">(Dec 04 2024 at 19:52)</a>:</h4>
<p>fitzgen edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/9669#issuecomment-2518429648">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9669">issue #9669</a>:</p>
<blockquote>
<p>Ah but I see that I didn't read closely enough, and that this is finding a stack map issue, which the panic is a symptom of. This is a separate issue, unrelated to the leakage.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>