<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4813 feat: add a knob for reset stack · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html">wasmtime / PR #4813 feat: add a knob for reset stack</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="296030371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296030371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296030371">(Aug 30 2022 at 03:28)</a>:</h4>
<p>Duslia opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
This PR has been discussed in #4637. I add a knob for reset stack.</p>
</blockquote>



<a name="296031000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296031000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296031000">(Aug 30 2022 at 03:38)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296050035"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296050035" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296050035">(Aug 30 2022 at 07:34)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296050795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296050795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296050795">(Aug 30 2022 at 07:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089786254">PR review</a>.</p>



<a name="296050796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296050796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296050796">(Aug 30 2022 at 07:39)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958115094">PR review comment</a>:</p>
<blockquote>
<p>This can't be set by the user.</p>
</blockquote>



<a name="296050865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296050865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296050865">(Aug 30 2022 at 07:40)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089786844">PR review</a>.</p>



<a name="296050866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296050866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296050866">(Aug 30 2022 at 07:40)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958115541">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        }
</code></pre></div><br>
</p>
</blockquote>



<a name="296051042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296051042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296051042">(Aug 30 2022 at 07:42)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296051445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296051445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296051445">(Aug 30 2022 at 07:45)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296051609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296051609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296051609">(Aug 30 2022 at 07:47)</a>:</h4>
<p>Duslia created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958122893">PR review comment</a>:</p>
<blockquote>
<p>What do you think would be a better way? </p>
</blockquote>



<a name="296051610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296051610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296051610">(Aug 30 2022 at 07:47)</a>:</h4>
<p>Duslia submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089796827">PR review</a>.</p>



<a name="296052068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296052068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296052068">(Aug 30 2022 at 07:51)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089802045">PR review</a>.</p>



<a name="296052069"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296052069" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296052069">(Aug 30 2022 at 07:51)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958126623">PR review comment</a>:</p>
<blockquote>
<p>Please don't commit this file.</p>
</blockquote>



<a name="296052174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296052174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296052174">(Aug 30 2022 at 07:52)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089803266">PR review</a>.</p>



<a name="296052175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296052175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296052175">(Aug 30 2022 at 07:52)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958127555">PR review comment</a>:</p>
<blockquote>
<p>Adding a setter like <a href="https://github.com/bytecodealliance/wasmtime/blob/d1fb2405d769b3eb81873d2a77b6b75e8d931936/crates/wasmtime/src/config.rs#L598-L603">https://github.com/bytecodealliance/wasmtime/blob/d1fb2405d769b3eb81873d2a77b6b75e8d931936/crates/wasmtime/src/config.rs#L598-L603</a></p>
</blockquote>



<a name="296052665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296052665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296052665">(Aug 30 2022 at 07:56)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296063916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296063916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296063916">(Aug 30 2022 at 09:18)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296064179"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296064179" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296064179">(Aug 30 2022 at 09:20)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1089954615">PR review</a>.</p>



<a name="296064181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296064181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296064181">(Aug 30 2022 at 09:20)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958230564">PR review comment</a>:</p>
<blockquote>
<p>This needs to set <code>reset_stack_page</code>, not <code>async_stack_size</code>.</p>
</blockquote>



<a name="296068239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296068239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296068239">(Aug 30 2022 at 09:47)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296068799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296068799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296068799">(Aug 30 2022 at 09:51)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296069366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296069366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296069366">(Aug 30 2022 at 09:55)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296073701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296073701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296073701">(Aug 30 2022 at 10:27)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296137819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296137819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296137819">(Aug 30 2022 at 14:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1090434384">PR review</a>.</p>



<a name="296137821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296137821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296137821">(Aug 30 2022 at 14:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958572032">PR review comment</a>:</p>
<blockquote>
<p>I would suggest this documentation perhaps for this method:</p>
<blockquote>
<p>Configures whether or not stacks used for async futures are reset to zero after usage.</p>
<p>When the <code>async_support</code> method is enabled for Wasmtime and the <code>call_async</code> variant of calling WebAssembly is used then Wasmtime will create a separate runtime execution stack for each future produced by <code>call_async</code>. When using the pooling instance allocator this allocation will happen from a pool of stacks and additionally deallocation will simply release the stack back to the pool. During the deallocation process Wasmtime will by default reset the contents of the stack back to zero.</p>
<p>This reset back to zero, however, is a defense-in-depth mechanism and is not required for correctness. The operation to reset a stack back to zero can be a costly operation in highly concurrent environments. By setting this option to <code>false</code> this zero-ing operation will not occur which may prove beneficial to throughput in these environments.</p>
</blockquote>
<p>Additionally I might recommend renaming the method/option <code>async_stack_zeroing</code> or something like that to make sure the word "async" is somewhere in there along with "zero" </p>
</blockquote>



<a name="296137822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296137822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296137822">(Aug 30 2022 at 14:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958559586">PR review comment</a>:</p>
<blockquote>
<p>To avoid some extraneous <code>#[cfg]</code> below I think it's ok to remove this <code>#[cfg]</code> while still leaving the <code>#[cfg]</code> on the setter method</p>
</blockquote>



<a name="296137828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296137828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296137828">(Aug 30 2022 at 14:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#discussion_r958560327">PR review comment</a>:</p>
<blockquote>
<p>Here and in some other files there are a lot of changes to the imports here, but I don't think that anything substantively changed? Could the changes you're adding here be backed out to avoid churn in this commit?</p>
</blockquote>



<a name="296137829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296137829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296137829">(Aug 30 2022 at 14:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1090434384">PR review</a>.</p>



<a name="296293247"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296293247" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296293247">(Aug 31 2022 at 10:09)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296293853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296293853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296293853">(Aug 31 2022 at 10:13)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296294078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296294078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296294078">(Aug 31 2022 at 10:15)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296297074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296297074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296297074">(Aug 31 2022 at 10:36)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296297151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296297151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296297151">(Aug 31 2022 at 10:36)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296548780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296548780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296548780">(Sep 01 2022 at 09:29)</a>:</h4>
<p>Duslia edited <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
This PR has been discussed in #4637. I add a knob for reset stack.</p>
</blockquote>



<a name="296551290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296551290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296551290">(Sep 01 2022 at 09:45)</a>:</h4>
<p>Duslia updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296610109"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296610109" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296610109">(Sep 01 2022 at 15:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a> from <code>feat/knob_for_reset_stack</code> to <code>main</code>.</p>



<a name="296610179"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296610179" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296610179">(Sep 01 2022 at 15:26)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a>.</p>



<a name="296610206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296610206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296610206">(Sep 01 2022 at 15:27)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4813#pullrequestreview-1093607906">PR review</a>.</p>



<a name="296649078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234813%20feat%3A%20add%20a%20knob%20for%20reset%20stack/near/296649078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234813.20feat.3A.20add.20a.20knob.20for.20reset.20stack.html#296649078">(Sep 01 2022 at 16:09)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4813">PR #4813</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>