<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7456 Cranelift: Break op cost ties with ex... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html">wasmtime / PR #7456 Cranelift: Break op cost ties with ex...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="399983050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/399983050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#399983050">(Nov 02 2023 at 16:44)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a> from <code>fitzgen:depth-cost</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This means that, when the opcode cost is the same, we prefer shallow and wide<br>
expressions to narrow and deep. For example, <code>(a + b) + (c + d)</code> is preferred to<br>
<code>((a + b) + c) + d</code>. This is beneficial because it exposes more<br>
instruction-level parallelism and shortens live ranges.</p>
<p>Follow up PRs will add rules that take advantage of this.</p>
</blockquote>



<a name="399983051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/399983051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#399983051">(Nov 02 2023 at 16:44)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="399983052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/399983052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#399983052">(Nov 02 2023 at 16:44)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="399984269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/399984269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#399984269">(Nov 02 2023 at 16:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1710801961">PR review</a>.</p>



<a name="399984270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/399984270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#399984270">(Nov 02 2023 at 16:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1380467133">PR review comment</a>:</p>
<blockquote>
<p>Drive-by comment here (sorry!): it might be nice to pack this into a single <code>u32</code>; CLIF data structures in general are pretty sensitive to size in memory, or at least that's been my experience. Maybe 8 bits for depth and 24 for cost (since cost has a bit more range with deep trees, potential loop nest multipliers at some point, etc)?</p>
</blockquote>



<a name="400018058"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400018058" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400018058">(Nov 02 2023 at 20:58)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="400018196"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400018196" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400018196">(Nov 02 2023 at 20:59)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1711229763">PR review</a>:</p>
<blockquote>
<p>LGTM to this as well, thanks! Will wait for #7465 to merge and this to rebase on <code>main</code> then we can merge.</p>
</blockquote>



<a name="400024634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400024634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400024634">(Nov 02 2023 at 21:57)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>:</p>
<blockquote>
<p>This means that, when the opcode cost is the same, we prefer shallow and wide<br>
expressions to narrow and deep. For example, <code>(a + b) + (c + d)</code> is preferred to<br>
<code>((a + b) + c) + d</code>. This is beneficial because it exposes more<br>
instruction-level parallelism and shortens live ranges.</p>
<p>Follow up PRs will add rules that take advantage of this.</p>
<p>Depends on <a href="https://github.com/bytecodealliance/wasmtime/pull/7465">https://github.com/bytecodealliance/wasmtime/pull/7465</a></p>
</blockquote>



<a name="400096118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400096118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400096118">(Nov 03 2023 at 09:40)</a>:</h4>
<p>a1phyr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1712209552">PR review</a>.</p>



<a name="400096121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400096121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400096121">(Nov 03 2023 at 09:40)</a>:</h4>
<p>a1phyr created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381401331">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        iter.fold(Self::zero(), |c, x| c + x)
</code></pre></div><br>
</p>
</blockquote>



<a name="400156122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400156122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400156122">(Nov 03 2023 at 15:29)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1712964608">PR review</a>:</p>
<blockquote>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
</blockquote>



<a name="400156126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400156126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400156126">(Nov 03 2023 at 15:29)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1712964608">PR review</a>:</p>
<blockquote>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
</blockquote>



<a name="400156127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400156127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400156127">(Nov 03 2023 at 15:29)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381858917">PR review comment</a>:</p>
<blockquote>
<p>Should this be strictly less-than? If the value is equal to <code>MAX_OP_COST</code>, and <code>depth</code> is <code>255</code>, we'll allow constructing the special <code>infinity</code> value.<br>
</p>
</blockquote>



<a name="400156128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400156128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400156128">(Nov 03 2023 at 15:29)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381868119">PR review comment</a>:</p>
<blockquote>
<p>We could skip the mask here, as we're shifting off all the bits that get zeroed by the mask.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        self.0 &gt;&gt; Self::DEPTH_BITS
</code></pre></div><br>
</p>
</blockquote>



<a name="400156129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400156129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400156129">(Nov 03 2023 at 15:29)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381878031">PR review comment</a>:</p>
<blockquote>
<p>Should we only add <code>1</code> to depth when the <code>operand_costs</code> was non-empty?</p>
</blockquote>



<a name="400160539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400160539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400160539">(Nov 03 2023 at 15:50)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="400160984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400160984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400160984">(Nov 03 2023 at 15:53)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1713049252">PR review</a>.</p>



<a name="400160987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400160987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400160987">(Nov 03 2023 at 15:53)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381912740">PR review comment</a>:</p>
<blockquote>
<p>Oh we could probably have an ISLE rewrite for this too!</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">ishl</span><span class="w"> </span><span class="p">(</span><span class="n">band</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">k1</span><span class="p">)</span><span class="w"> </span><span class="n">k2</span><span class="p">)</span><span class="w"> </span><span class="o">==&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">ishl</span><span class="w"> </span><span class="n">k2</span><span class="p">)</span><span class="w"> </span><span class="n">when</span><span class="w"> </span><span class="n">shift_mask</span><span class="p">(</span><span class="n">k1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
<p>cc @afonso360: maybe I can nerd snipe you :)</p>
</blockquote>



<a name="400161099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400161099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400161099">(Nov 03 2023 at 15:53)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1381912740">PR review comment</a>.</p>



<a name="400818312"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400818312" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400818312">(Nov 07 2023 at 21:25)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1718807411">PR review</a>.</p>



<a name="400818313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400818313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400818313">(Nov 07 2023 at 21:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1385605494">PR review comment</a>:</p>
<blockquote>
<p>I think it is fine to have <code>depth == 1</code> for ops without operands, and only adding <code>1</code> when we have non-empty operands requires avoiding <code>sum()</code> and makes the method look less elegant so I'm not gonna do it.</p>
</blockquote>



<a name="400818477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400818477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400818477">(Nov 07 2023 at 21:26)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="400824400"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400824400" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400824400">(Nov 07 2023 at 22:13)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#pullrequestreview-1718887914">PR review</a>.</p>



<a name="400824401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400824401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400824401">(Nov 07 2023 at 22:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/7456#discussion_r1385655341">PR review comment</a>:</p>
<blockquote>
<p>Reworked things a bit to make constructing infinity by accident impossible.</p>
</blockquote>



<a name="400824420"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400824420" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400824420">(Nov 07 2023 at 22:13)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="400824447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400824447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400824447">(Nov 07 2023 at 22:13)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<a name="400831845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237456%20Cranelift%3A%20Break%20op%20cost%20ties%20with%20ex.../near/400831845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237456.20Cranelift.3A.20Break.20op.20cost.20ties.20with.20ex.2E.2E.2E.html#400831845">(Nov 07 2023 at 23:16)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7456">PR #7456</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>