<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5780 Use capstone to validate precise-outp... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html">wasmtime / PR #5780 Use capstone to validate precise-outp...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="327894292"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327894292" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327894292">(Feb 14 2023 at 23:29)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>:</p>
<blockquote>
<p>Check both the printed vcode and capstone output in <code>precise-output</code> tests. This lets us continue to rely on printing backend-specific pseudoinstructions in the VCode output (for instance <code>br_table</code> on x64), while also checking the final output of the machinst buffer.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="327894459"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327894459" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327894459">(Feb 14 2023 at 23:30)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>:</p>
<blockquote>
<p>Use <code>capstone</code> when checking precise-output test expectations. This lets us continue to rely on printing backend-specific pseudoinstructions in the VCode output for debuggign purposes (for instance <code>br_table</code> on x64), while also checking the final output of the machinst buffer in filetests.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="327899633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327899633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327899633">(Feb 15 2023 at 00:17)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="327900143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327900143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327900143">(Feb 15 2023 at 00:21)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298626482">PR review</a>.</p>



<a name="327900144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327900144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327900144">(Feb 15 2023 at 00:21)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298626482">PR review</a>.</p>



<a name="327900145"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327900145" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327900145">(Feb 15 2023 at 00:21)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106522975">PR review comment</a>:</p>
<blockquote>
<p>Potential future improvement below (I don't want to necessarily block the PR on this!): the below disassembly logic is largely similar to <code>MachBuffer</code>'s now, except that it prints bytes too, and doesn't include relocs, and currently has just a slice-of-<code>u8</code> here; we could make those format differences options, wire through a <code>MachBuffer</code> somehow, and delegate to the common code here.</p>
</blockquote>



<a name="327901730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327901730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327901730">(Feb 15 2023 at 00:34)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298634739">PR review</a>.</p>



<a name="327901731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327901731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327901731">(Feb 15 2023 at 00:34)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106529969">PR review comment</a>:</p>
<blockquote>
<p>I like that, and would be happy to push that change through before merging this <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="327902777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902777">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298584503">PR review</a>.</p>



<a name="327902778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902778">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298584503">PR review</a>.</p>



<a name="327902780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902780">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106494496">PR review comment</a>:</p>
<blockquote>
<p>I don't think it's possible to build an aarch64 <code>TargetIsa</code> with <code>Architecture::Arm</code>, is it? Same for x64 and <code>X86_32</code>. I can see that you're trying to preserve valid code that was in clif-util, but I think we should just delete these unreachable branches. When there's a 32-bit ARM or x86 backend it'll be easy enough to add these cases again in the appropriate <code>TargetIsa</code>.</p>
<p>I'm inclined not to even match on <code>self.triple().architecture</code> except if we need to know a specific architectural detail to configure the disassembler correctly. The <code>arm.is_thumb()</code> check is a good example of where that would be useful, but I'm proposing to delete that whole branch anyway.</p>
</blockquote>



<a name="327902781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902781">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106490051">PR review comment</a>:</p>
<blockquote>
<p>At this point I think cranelift-codegen only needs <code>anyhow</code> for <code>disassemble</code>, and it seems like a shame to pull it in just for that. Maybe <code>disassemble</code> should return <code>capstone::Error</code> as well.</p>
<p>Also perhaps this comment should mention <code>CompiledCode::disassemble</code> in addition to the existing mention of <code>TargetIsa::to_capstone</code>.</p>
</blockquote>



<a name="327902782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902782">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106496919">PR review comment</a>:</p>
<blockquote>
<p>I don't think cranelift-filetests needs to depend directly on <code>capstone</code>, now that you've moved everything important to cranelift-codegen. (Which turned out really well, I think: good call on putting <code>disassemble</code> there too!)</p>
</blockquote>



<a name="327902783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902783">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106489202">PR review comment</a>:</p>
<blockquote>
<p>I think this tab is what's making the output... jittery?</p>
<p>Can we match the existing format instead? Looks like... no, because the x64 backend padded the mnemonic out to 7 characters, while the other backends I think all use a single space. I'm leaning toward a single space here.</p>
<p>If we print the space only when <code>i.op_str()</code> is <code>Some</code>, that'll reduce the filetests diff for instructions that don't have any operands, like <code>ret</code>.</p>
</blockquote>



<a name="327902784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902784">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106528928">PR review comment</a>:</p>
<blockquote>
<p>If I'm reading the documentation correctly you can just ask the instruction for its length, you don't need to get its bytes first.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            let end = i.address() + i.len() as u64;
</code></pre></div><br>
</p>
</blockquote>



<a name="327902785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902785">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106509415">PR review comment</a>:</p>
<blockquote>
<p>It looks like the only use of <code>params</code> in this function is to borrow it, so you could make this argument a borrow as well. Then in <code>run</code> I think you can pass <code>&amp;comp_ctx.func.params</code> instead of having to clone the params.</p>
</blockquote>



<a name="327902786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902786">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106505135">PR review comment</a>:</p>
<blockquote>
<p>I'm wondering if you can minimize the filetest diffs by setting the disassembly syntax. I think it's defaulting to Intel syntax and we previously mostly followed AT&amp;T syntax, right? Looks like you can call <code>builder.syntax(arch::x86::ArchSyntax::Att)</code> to request that.</p>
</blockquote>



<a name="327902787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327902787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327902787">(Feb 15 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106529786">PR review comment</a>:</p>
<blockquote>
<p>The format string is optional in the <code>writeln</code> macro; if you just want a newline you can leave it out.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            writeln!(buf)?;
</code></pre></div><br>
</p>
</blockquote>



<a name="327903008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903008">(Feb 15 2023 at 00:46)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298642049">PR review</a>.</p>



<a name="327903009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903009">(Feb 15 2023 at 00:46)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106535605">PR review comment</a>:</p>
<blockquote>
<p>I tried this and got a compilation error as <code>len</code> is private. Perhaps it's public in a newer version of <code>capstone</code>?</p>
</blockquote>



<a name="327903119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903119">(Feb 15 2023 at 00:47)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298642778">PR review</a>.</p>



<a name="327903120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903120">(Feb 15 2023 at 00:47)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106536177">PR review comment</a>:</p>
<blockquote>
<p>Nice!</p>
</blockquote>



<a name="327903290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903290">(Feb 15 2023 at 00:48)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298643652">PR review</a>.</p>



<a name="327903291"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903291" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903291">(Feb 15 2023 at 00:48)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106536867">PR review comment</a>:</p>
<blockquote>
<p>Ah, I was looking at the docs for 0.11 and we're using 0.9, which indeed didn't have it. Nevermind!</p>
</blockquote>



<a name="327903485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903485">(Feb 15 2023 at 00:50)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298644514">PR review</a>.</p>



<a name="327903486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903486">(Feb 15 2023 at 00:50)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106537507">PR review comment</a>:</p>
<blockquote>
<p>Oh, there's a borrow checker error here if I don't clone :(</p>
</blockquote>



<a name="327903799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903799">(Feb 15 2023 at 00:53)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298646306">PR review</a>.</p>



<a name="327903800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903800">(Feb 15 2023 at 00:53)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106538871">PR review comment</a>:</p>
<blockquote>
<p>Huh, I may have misread something. Did you access the <code>func</code> through <code>comp_ctx</code>, where it's been moved?</p>
</blockquote>



<a name="327903827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903827">(Feb 15 2023 at 00:53)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298646483">PR review</a>.</p>



<a name="327903828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903828">(Feb 15 2023 at 00:53)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106539018">PR review comment</a>:</p>
<blockquote>
<p>I like the switch back to AT&amp;T, as it mirrors the MInst pretty-printing for x64.</p>
</blockquote>



<a name="327903999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327903999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327903999">(Feb 15 2023 at 00:55)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298647536">PR review</a>.</p>



<a name="327904000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904000">(Feb 15 2023 at 00:55)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106539844">PR review comment</a>:</p>
<blockquote>
<p>Can <code>capstone::Error</code> wrap the error potentially raised by <code>write!</code>? That's currently the only thing holding back removing <code>anyhow</code> here.</p>
</blockquote>



<a name="327904394"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904394" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904394">(Feb 15 2023 at 00:59)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298650093">PR review</a>.</p>



<a name="327904395"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904395" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904395">(Feb 15 2023 at 00:59)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106541711">PR review comment</a>:</p>
<blockquote>
<p>I'm fine with a single space, though it's too bad we can't get the consistent alignment :)</p>
</blockquote>



<a name="327904606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904606">(Feb 15 2023 at 01:01)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298651582">PR review</a>.</p>



<a name="327904607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904607">(Feb 15 2023 at 01:01)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106542794">PR review comment</a>:</p>
<blockquote>
<p><code>compile</code> takes a <code>mut self</code>, so <code>comp_ctx</code> is no longer available at that point.</p>
</blockquote>



<a name="327904759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904759">(Feb 15 2023 at 01:02)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298652688">PR review</a>.</p>



<a name="327904761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327904761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327904761">(Feb 15 2023 at 01:02)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106543589">PR review comment</a>:</p>
<blockquote>
<p>I misread my earlier error, it's not taking a <code>mut self</code>, but a <code>&amp;mut self</code>. Let me investigate a bit.</p>
</blockquote>



<a name="327905143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905143">(Feb 15 2023 at 01:06)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298655047">PR review</a>.</p>



<a name="327905144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905144">(Feb 15 2023 at 01:06)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106545283">PR review comment</a>:</p>
<blockquote>
<p>There's a <code>capstone::Error::CustomError(&amp;'static str)</code> variant. Since there's no data attached to a <code>fmt::Error</code> (the <code>Display</code> impl currently always returns "an error occurred when formatting an argument") that would work. But yeah, I forgot about the <code>write</code> invocations.</p>
</blockquote>



<a name="327905330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905330">(Feb 15 2023 at 01:08)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298656259">PR review</a>.</p>



<a name="327905331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905331">(Feb 15 2023 at 01:08)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106546200">PR review comment</a>:</p>
<blockquote>
<p>Okay, it's not consumed by <code>compile</code>, but the mutable borrow lasts as long as <code>compiled_code</code>, which is causing the borrow error.</p>
</blockquote>



<a name="327905497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905497">(Feb 15 2023 at 01:10)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298657154">PR review</a>.</p>



<a name="327905498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905498">(Feb 15 2023 at 01:10)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106546874">PR review comment</a>:</p>
<blockquote>
<p>Good catch!</p>
</blockquote>



<a name="327905778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905778">(Feb 15 2023 at 01:13)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298659285">PR review</a>.</p>



<a name="327905779"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327905779" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327905779">(Feb 15 2023 at 01:13)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106548402">PR review comment</a>:</p>
<blockquote>
<p>I like that!</p>
</blockquote>



<a name="327906703"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327906703" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327906703">(Feb 15 2023 at 01:24)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="327907315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327907315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327907315">(Feb 15 2023 at 01:32)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="327908006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327908006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327908006">(Feb 15 2023 at 01:42)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298677414">PR review</a>.</p>



<a name="327908007"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327908007" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327908007">(Feb 15 2023 at 01:42)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106561174">PR review comment</a>:</p>
<blockquote>
<p>This cleaned up 10k lines of diff! Thanks for the suggestion :D</p>
</blockquote>



<a name="327910650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910650">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298686066">PR review</a>.</p>



<a name="327910651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910651">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298686066">PR review</a>.</p>



<a name="327910652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910652">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106567423">PR review comment</a>:</p>
<blockquote>
<p>Here are more mysterious disappearing blocks.</p>
</blockquote>



<a name="327910653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910653">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106566870">PR review comment</a>:</p>
<blockquote>
<p>Huh, why did this output disappear?</p>
</blockquote>



<a name="327910654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910654">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106574006">PR review comment</a>:</p>
<blockquote>
<p>For <code>pextrb/w/d</code> we've been pretty-printing the destination register as the 64-bit <code>%rax</code> but it appears that it should have been the 32-bit <code>%eax</code>. Does that mean we've been leaving the high 32-bits uninitialized, and if so, is that an issue? I don't remember the x86-64 rules for when registers get silently zero-extended for you.</p>
</blockquote>



<a name="327910655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910655">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106570415">PR review comment</a>:</p>
<blockquote>
<p>Interesting, Capstone believes we printed the <code>andn</code> operands in reverse order. Could you double-check that and fix the pretty-printer if the disassembler is correct?</p>
</blockquote>



<a name="327910656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910656">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106568783">PR review comment</a>:</p>
<blockquote>
<p>I feel like maybe the disassembler got confused here due to an inline constant. There doesn't appear to be a Capstone flag for skipping unknown instructions on s390, unlike for other targets. Maybe @uweigand can weigh in on whether this disassembly result is nonsense or is actually equivalent to the previous output.</p>
</blockquote>



<a name="327910657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910657">(Feb 15 2023 at 02:16)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106576269">PR review comment</a>:</p>
<blockquote>
<p>Now that <code>params</code> is a borrow, it doesn't need to be borrowed again here. I guess Rust auto-dereferenced it for you?</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    let buf = compiled_code.buffer.disassemble(Some(params), &amp;cs)?;
</code></pre></div><br>
</p>
</blockquote>



<a name="327910899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910899">(Feb 15 2023 at 02:19)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298702618">PR review</a>.</p>



<a name="327910900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327910900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327910900">(Feb 15 2023 at 02:19)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106578915">PR review comment</a>:</p>
<blockquote>
<p>The general rule on x86-64 is that instructions that write the low 32 bits of a 64-bit GPR clear the high 32 bits; I suspect this difference here is just one of notational convention (i.e., there's not actually a bit selecting rax vs eax that we're flipping).</p>
</blockquote>



<a name="327912051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912051">(Feb 15 2023 at 02:35)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298712351">PR review</a>.</p>



<a name="327912052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912052">(Feb 15 2023 at 02:35)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106585628">PR review comment</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="327912210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912210">(Feb 15 2023 at 02:37)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298713669">PR review</a>.</p>



<a name="327912213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912213">(Feb 15 2023 at 02:37)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106586819">PR review comment</a>:</p>
<blockquote>
<p>I followed the intel manual when I added support for <code>andn</code>; I must have inadvertently implemented the intel formatting for the instruction :)</p>
</blockquote>



<a name="327912787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912787">(Feb 15 2023 at 02:45)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298717879">PR review</a>.</p>



<a name="327912788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327912788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327912788">(Feb 15 2023 at 02:45)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106590137">PR review comment</a>:</p>
<blockquote>
<p>If I switch back to intel syntax and regenerate this test output, I see the following:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">;</span><span class="w">   </span><span class="n">push</span><span class="w"> </span><span class="n">rbp</span>
<span class="p">;</span><span class="w">   </span><span class="n">mov</span><span class="w"> </span><span class="n">rbp</span><span class="p">,</span><span class="w"> </span><span class="n">rsp</span>
<span class="p">;</span><span class="w">   </span><span class="n">andn</span><span class="w"> </span><span class="n">eax</span><span class="p">,</span><span class="w"> </span><span class="n">esi</span><span class="p">,</span><span class="w"> </span><span class="n">edi</span>
<span class="p">;</span><span class="w">   </span><span class="n">mov</span><span class="w"> </span><span class="n">rsp</span><span class="p">,</span><span class="w"> </span><span class="n">rbp</span>
<span class="p">;</span><span class="w">   </span><span class="n">pop</span><span class="w"> </span><span class="n">rbp</span>
<span class="p">;</span><span class="w">   </span><span class="n">ret</span>
</code></pre></div>
<p>I'll update the pretty-printer in a separate PR <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="327913390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913390">(Feb 15 2023 at 02:50)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298721126">PR review</a>.</p>



<a name="327913392"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913392" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913392">(Feb 15 2023 at 02:50)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106592747">PR review comment</a>:</p>
<blockquote>
<p>I enabled <code>skipdata</code> on s390x locally, and it fixed a lot of the missing test output. I'll push that change.</p>
</blockquote>



<a name="327913447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913447">(Feb 15 2023 at 02:51)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="327913652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913652">(Feb 15 2023 at 02:54)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298723026">PR review</a>.</p>



<a name="327913654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913654">(Feb 15 2023 at 02:54)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106594231">PR review comment</a>:</p>
<blockquote>
<p>This should be fixed after enabling <code>skipdata</code> in <code>to_capstone</code> for s390x.</p>
</blockquote>



<a name="327913767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913767">(Feb 15 2023 at 02:55)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1298723948">PR review</a>.</p>



<a name="327913768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/327913768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#327913768">(Feb 15 2023 at 02:55)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1106594993">PR review comment</a>:</p>
<blockquote>
<p>This is fixed after enabling <code>skipdata</code> in <code>to_capstone</code> for s390x.</p>
</blockquote>



<a name="328067161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328067161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328067161">(Feb 15 2023 at 17:29)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1300023553">PR review</a>.</p>



<a name="328067166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328067166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328067166">(Feb 15 2023 at 17:29)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1107460569">PR review comment</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/pull/5789">https://github.com/bytecodealliance/wasmtime/pull/5789</a></p>
</blockquote>



<a name="328068475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328068475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328068475">(Feb 15 2023 at 17:34)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="328089459"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328089459" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328089459">(Feb 15 2023 at 19:18)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="328130375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328130375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328130375">(Feb 15 2023 at 23:51)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="328130521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328130521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328130521">(Feb 15 2023 at 23:52)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a> from <code>trevor/capstone-output-filetests</code> to <code>main</code>.</p>



<a name="328133412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328133412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328133412">(Feb 16 2023 at 00:20)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#pullrequestreview-1300571469">PR review</a>.</p>



<a name="328133413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328133413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328133413">(Feb 16 2023 at 00:20)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5780#discussion_r1107879816">PR review comment</a>:</p>
<blockquote>
<p>I looked into this, and it would be a bit more work than I'd like to tackle in this PR. I'll make a follow-up pr <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="328134823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235780%20Use%20capstone%20to%20validate%20precise-outp.../near/328134823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235780.20Use.20capstone.20to.20validate.20precise-outp.2E.2E.2E.html#328134823">(Feb 16 2023 at 00:35)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5780">PR #5780</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>