<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6455 Function references unresolved issues · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html">wasmtime / issue #6455 Function references unresolved issues</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="361032934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/361032934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#361032934">(May 25 2023 at 11:40)</a>:</h4>
<p>dhil opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[ ] Support for function references in the embedder API.</li>
<li>[ ] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[ ] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
</blockquote>



<a name="361253033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/361253033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#361253033">(May 26 2023 at 08:30)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[ ] Support for function references in the embedder API.</li>
<li>[ ] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[ ] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="361337561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/361337561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#361337561">(May 26 2023 at 14:00)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[ ] Support for function references in the embedder API.</li>
<li>[ ] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[ ] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="399961159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/399961159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#399961159">(Nov 02 2023 at 15:08)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[ ] Support for function references in the embedder API.</li>
<li>[ ] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="421558243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/421558243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#421558243">(Feb 15 2024 at 00:31)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/6455#issuecomment-1945168831">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>I've finished support for function references over in <a href="https://github.com/bytecodealliance/wasmtime/pull/7943">https://github.com/bytecodealliance/wasmtime/pull/7943</a></p>
</blockquote>



<a name="422502558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422502558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422502558">(Feb 20 2024 at 21:14)</a>:</h4>
<p>fitzgen closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[ ] Support for function references in the embedder API.</li>
<li>[ ] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="422584112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422584112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422584112">(Feb 21 2024 at 10:13)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[x] Support for function references in the embedder API.</li>
<li>[x] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="422584115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422584115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422584115">(Feb 21 2024 at 10:13)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[x] Support for function references in the embedder API.</li>
<li>[x] Failing tests:<ul>
<li>[ ] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[ ] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="422584121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422584121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422584121">(Feb 21 2024 at 10:13)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[x] Support for function references in the embedder API.</li>
<li>[x] Failing tests:<ul>
<li>[x] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[x] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="422584123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422584123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422584123">(Feb 21 2024 at 10:13)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[x] Support for function references in the embedder API.</li>
<li>[x] Failing tests:<ul>
<li>[x] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[x] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[ ] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<a name="422584127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236455%20Function%20references%20unresolved%20issues/near/422584127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236455.20Function.20references.20unresolved.20issues.html#422584127">(Feb 21 2024 at 10:13)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6455">issue #6455</a>:</p>
<blockquote>
<p>PR #5288 implements the function references proposal modulo a few missing bits. The missing bits are:</p>
<ul>
<li>[x] Support for function references in the embedder API.</li>
<li>[x] Failing tests:<ul>
<li>[x] <code>type-equivalence.wast</code>: type canonicalisation is currently broken due to <code>#[derive(hash)]</code> not considering that two distinct typed function reference indices may point to structurally equivalent types.</li>
<li>[x] <code>br_table.wast</code>: this fails due to incomplete support for the various syntactic sugar in the wasm-tools/<code>wast</code> crate. See bytecodealliance/wasm-tools/pull/952.</li>
<li>[x] <code>ref_null.wast</code> and <code>local_init.wast</code>: fail due to lack of support in the embedder API.</li>
<li>[x] <code>return_call_ref.wast</code>, <code>return_call_indirect.wast,</code> and <code>return_call.wast</code>: fail due to lack of tail call support.</li>
</ul>
</li>
</ul>
<p>At the time of writing the implementation does not take advantage of the static non-null safety to elide null checks when executing <code>call_ref</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762">https://github.com/bytecodealliance/wasmtime/blob/36e9f7e577df11de14f5973308c4b4bd0565eed9/crates/cranelift/src/func_environ.rs#L1744-L1762</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>