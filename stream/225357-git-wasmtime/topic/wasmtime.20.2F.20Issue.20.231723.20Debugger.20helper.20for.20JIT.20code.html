<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1723 Debugger helper for JIT code · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html">wasmtime / Issue #1723 Debugger helper for JIT code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197986660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/197986660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#197986660">(May 18 2020 at 19:48)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-630399365">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="207307315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/207307315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#207307315">(Aug 18 2020 at 19:52)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-675680171">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<p>Run example/server as <code>RUST_LOG="gdb_remote_protocol=trace,wasmtime_cli=trace" cargo run -- tests/all/debug/testsuite/fib-wasm.wasm --gdb-server --opt-level 0 --invoke fib 5</code></p>
<p>Connect using LLDB (version as in <a href="https://reviews.llvm.org/D78801">https://reviews.llvm.org/D78801</a>):</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="mi">22334</span><span class="w"></span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">stopped</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">SIGTRAP</span><span class="w"></span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">0</span>: <span class="mh">0x200000022</span><span class="w"> </span><span class="n">module</span><span class="o">-</span><span class="mf">2.</span><span class="n">wasm</span><span class="w"></span>
-&gt;  <span class="mh">0x200000022</span>: <span class="nc">call</span><span class="w">   </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="mh">0x200000024</span>: <span class="nc">end</span><span class="w"></span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="mh">0x1000000af</span><span class="w"></span>
<span class="n">Breakpoint</span><span class="w"> </span><span class="mi">1</span>: <span class="nc">where</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">module</span><span class="o">-</span><span class="mf">1.</span><span class="n">wasm</span><span class="err">`</span><span class="n">fib</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">109</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">fib</span><span class="o">-</span><span class="n">wasm</span><span class="p">.</span><span class="n">c</span>:<span class="mi">11</span>:<span class="mi">9</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1000000af</span><span class="w"></span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">c</span><span class="w"></span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">resuming</span><span class="w"></span>
<span class="n">Process</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">stopped</span><span class="w"></span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="err">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">break</span><span class="n">point</span><span class="w"> </span><span class="mf">1.1</span><span class="w"></span>
<span class="w">    </span><span class="n">frame</span><span class="w"> </span><span class="err">#</span><span class="mi">0</span>: <span class="mh">0x1000000af</span><span class="w"> </span><span class="n">module</span><span class="o">-</span><span class="mf">1.</span><span class="n">wasm</span><span class="err">`</span><span class="n">fib</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">fib</span><span class="o">-</span><span class="n">wasm</span><span class="p">.</span><span class="n">c</span>:<span class="mi">11</span>:<span class="mi">9</span><span class="w"></span>
<span class="w">   </span><span class="mi">8</span><span class="w">    </span><span class="n">int</span><span class="w"> </span><span class="n">fib</span><span class="p">(</span><span class="n">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="mi">9</span><span class="w">      </span><span class="n">int</span><span class="w"> </span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="mi">10</span><span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
-&gt; <span class="mi">11</span><span class="w">       </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="mi">12</span><span class="w">       </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="mi">13</span><span class="w">       </span><span class="n">b</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="mi">14</span><span class="w">     </span><span class="p">}</span><span class="w"></span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">s</span><span class="w"></span>
<span class="o">..</span><span class="p">.</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="207314060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/207314060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#207314060">(Aug 18 2020 at 20:46)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-675711585">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<p>cc: @jlb6740 </p>
</blockquote>



<a name="207350009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/207350009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#207350009">(Aug 18 2020 at 22:33)</a>:</h4>
<p>jlb6740 <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-675752515">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<p>@abrown Thanks. I've actually used debugging support before based on a gist from @yurydelendik  (<a href="https://gist.github.com/yurydelendik/4103d782dfc62634bc9f4de98de20835">https://gist.github.com/yurydelendik/4103d782dfc62634bc9f4de98de20835</a>). How does this PR relate to that existing support which allowed breaking and stepping in jitted code with lldb? </p>
</blockquote>



<a name="207351561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/207351561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#207351561">(Aug 18 2020 at 22:49)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-675757420">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<blockquote>
<p>How does this PR relate to that existing support which allowed breaking and stepping in jitted code with lldb?</p>
</blockquote>
<p>@jlb6740 that is different in terms of now you don't need to transform the DWARF since debuggers have to understand WebAssembly target (see referred above LLVM's patch). In this case, the VM has to provide direct access to wasm-level locals, memory, stack.</p>
</blockquote>



<a name="209797180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231723%20Debugger%20helper%20for%20JIT%20code/near/209797180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231723.20Debugger.20helper.20for.20JIT.20code.html#209797180">(Sep 11 2020 at 15:41)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/pull/1723#issuecomment-691169662">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1723">Issue #1723</a>:</p>
<blockquote>
<p>rebased <a href="https://reviews.llvm.org/D78801">LLVM D78801</a> at <a href="https://github.com/yurydelendik/llvm-project/tree/D78801">https://github.com/yurydelendik/llvm-project/tree/D78801</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>