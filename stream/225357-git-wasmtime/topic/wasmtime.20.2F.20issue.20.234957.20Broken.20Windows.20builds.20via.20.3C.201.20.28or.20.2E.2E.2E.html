<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4957 Broken Windows builds via &lt; 1 (or ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html">wasmtime / issue #4957 Broken Windows builds via &lt; 1 (or ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="300652871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300652871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300652871">(Sep 25 2022 at 13:49)</a>:</h4>
<p>pinkforest edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Problem now is that anyone using 0.40 e.g. via <code>wasi-common</code> will get 0.25 cap-std </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>And therefore incompat cap-primitives in Windows when using stable &gt; 1.64.0 rust stable that has sealed the <code>FileTypeExt</code> trait</p>
<p>By doing nothing this still works on at least unix but Windows is now broken on it's default state doing nothing on rust stable 1.64</p>
<h2>wasi-common &lt; 1 Windows builds broken</h2>
<p>I would have to bump everything to ^1 atm from 0.40</p>
<h2>Root cause</h2>
<p>This was seen earlier in <a href="https://github.com/bytecodealliance/cap-std/issues/275">https://github.com/bytecodealliance/cap-std/issues/275</a> via nightly broken</p>
<p>A trait was sealed that then broke the builds via <code>[cap-primitives](https://crates.io/crates/cap-primitives)</code></p>
<p>I documented my find originally: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a></p>
<h2>Work/Around - Works for Windows Only probably ?</h2>
<p>There is a work/around here: <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">https://github.com/bytecodealliance/wasmtime/issues/4936</a></p>
<p>The work/around patch is in cap-std commits:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<h2>Work/Around does not work for unix</h2>
<p>Work/around in turn seems to break unix builds as described here: <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650">https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650</a></p>
<h2>Ideal Resolution ?</h2>
<ul>
<li>[ ] Avoid forcing ^1 bump via wasi-common from 0.40</li>
<li>[ ] Patch was broken on unix via patch-branch ?</li>
<li>[ ] Test patch on both Windows and Unix</li>
<li>[ ] Recursive point-release fix to 0.40 wasi-common -&gt; cap-std 0.26 -&gt; cap-primitives 0.26</li>
</ul>
<p>Could we address so this builds for both Windows and Linux / unix via 0.40 ?</p>
<p>Perhaps we could also bump wasi-common so it bumps up to 0.26 that whole chain for cap-primitives ?</p>
<p>But I think the build errors need to be sorted for unix as I suspect the patch has broken all unix now ? <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650">https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650</a></p>
<p>This is how I bumped my :lock: to 0.40.1 - released 25 days ago or so</p>
<h2>Additional attempts</h2>
<p>I also tried quickly with 0.40.1 wasi-common but it still brings 0.25 tree</p>
<p>$ cargo update -p wasmtime-wasi --precise 0.40.1</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">meta</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">frontend</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">isle</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">native</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">wasm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="o">-</span><span class="n">sync</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">asm</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">environ</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">jit</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">jit</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">types</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="o">-</span><span class="n">generate</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
</code></pre></div>
<p>And my dependency tree gets 0.25 on which I had to apply the branch-patch</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.3</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.3</span><span class="w"></span>
</code></pre></div>
<p>I originally went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<h2>Refs</h2>
<p><a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a> &lt;-- Downstream crate impacted<br>
<a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a> &lt;-- Went finding out what happened in std first - did not find these issues here<br>
<a href="https://github.com/bytecodealliance/cap-std/issues/275">https://github.com/bytecodealliance/cap-std/issues/275</a> &lt;-- I went first <br>
<a href="https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/.E2.9C.94.20.23102260.20Sealed.20Windows.20FileTypeExt/near/300637075">https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/.E2.9C.94.20.23102260.20Sealed.20Windows.20FileTypeExt/near/300637075</a> &lt;-- Chris Denton was helpful to point the above issue</p>
<p>Cheers</p>
</blockquote>



<a name="300656195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300656195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300656195">(Sep 25 2022 at 14:20)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257206121">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Please include the error message in this report.</p>
</blockquote>



<a name="300656652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300656652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300656652">(Sep 25 2022 at 14:25)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257207796">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>I've now created a new branch:<br>
<a href="https://github.com/bytecodealliance/cap-std/tree/0.26-with-a-0.25.2-version-number">https://github.com/bytecodealliance/cap-std/tree/0.26-with-a-0.25.2-version-number</a></p>
<p>It is identical to the previous branch, except it sets the version number to 0.25.2, which may help with the cargo patch mechanism.<br>
</p>
</blockquote>



<a name="300656704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300656704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300656704">(Sep 25 2022 at 14:26)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257207835">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>This was via 0.40 - unadulterated with no patching applied - on today's 1.64 stable as well as latest nightly (1.66.0-nightly (<a href="https://github.com/rust-lang/rust/commit/4a14677239bbd9a3892d165ee24513c1a05820e4">https://github.com/rust-lang/rust/commit/4a14677239bbd9a3892d165ee24513c1a05820e4</a> 2022-09-23) on Windows</p>
<p>From: <a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">snip</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">        </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">file_type</span>::<span class="n">FileType</span><span class="w"></span>
<span class="w">        </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">snip</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="w">    </span><span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">&lt;</span><span class="n">snip</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<p>When I tried patching work/around I get the mix-up</p>
</blockquote>



<a name="300657240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300657240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300657240">(Sep 25 2022 at 14:31)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257208643">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I now was properly able to patch all three crates and works in unix</p>
<p>I will get this work/around tested in Windows now</p>
</blockquote>



<a name="300657400"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300657400" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300657400">(Sep 25 2022 at 14:32)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257208643">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I now was properly able to patch all three crates and works in unix w/ <code>0.26-with-a-0.25.2-version-number</code> branch</p>
<p>I will get this work/around tested in Windows now</p>
<p>This is my root Cargo.toml to patch it</p>
<p><div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="c1">##########################################################</span><span class="w"></span>
<span class="c1"># This is required until wasmtime is bumped to ^1</span><span class="w"></span>
<span class="c1"># https://github.com/bytecodealliance/wasmtime/issues/4957</span><span class="w"></span>
<span class="c1"># Tracking: https://github.com/lunatic-solutions/lunatic/issues/136</span><span class="w"></span>
<span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300657466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300657466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300657466">(Sep 25 2022 at 14:32)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257208643">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I now was properly able to patch all three crates and builds in unix w/ <code>0.26-with-a-0.25.2-version-number</code> branch</p>
<p>I will get this work/around tested in Windows now</p>
<p>This is my root Cargo.toml to patch it</p>
<p><div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="c1">##########################################################</span><span class="w"></span>
<span class="c1"># This is required until wasmtime is bumped to ^1</span><span class="w"></span>
<span class="c1"># https://github.com/bytecodealliance/wasmtime/issues/4957</span><span class="w"></span>
<span class="c1"># Tracking: https://github.com/lunatic-solutions/lunatic/issues/136</span><span class="w"></span>
<span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300657501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300657501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300657501">(Sep 25 2022 at 14:33)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257208643">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I now was properly able to patch all three crates and builds in unix w/ <code>0.26-with-a-0.25.2-version-number</code> branch</p>
<p>I will get this work/around tested in Windows now</p>
<p>This is my root Cargo.toml to patch it</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="c1">##########################################################</span><span class="w"></span>
<span class="c1"># This is required until wasmtime is bumped to ^1</span><span class="w"></span>
<span class="c1"># https://github.com/bytecodealliance/wasmtime/issues/4957</span><span class="w"></span>
<span class="c1"># Tracking: https://github.com/lunatic-solutions/lunatic/issues/136</span><span class="w"></span>
<span class="k">[patch.crates-io]</span><span class="w"></span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"https://github.com/bytecodealliance/cap-std.git"</span><span class="p">,</span><span class="w"> </span><span class="n">branch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.26-with-a-0.25.2-version-number"</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This was with:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.64.0</span><span class="w"> </span><span class="p">(</span><span class="n">a55dd71d5</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">19</span><span class="p">)</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300657930"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300657930" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300657930">(Sep 25 2022 at 14:37)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257209769">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>This was via 0.40 - unadulterated with no patching applied - on today's 1.64 stable as well as latest nightly (1.66.0-nightly (<a href="https://github.com/rust-lang/rust/commit/4a14677239bbd9a3892d165ee24513c1a05820e4">https://github.com/rust-lang/rust/commit/4a14677239bbd9a3892d165ee24513c1a05820e4</a> 2022-09-23) on Windows</p>
</blockquote>
<blockquote>
<p>the trait bound file_type::FileType: std:<span aria-label="sealed" class="emoji emoji-1f4e9" role="img" title="sealed">:sealed:</span>:Sealed is not satisfied</p>
</blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.</p>
<p>I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>



<a name="300658470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300658470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300658470">(Sep 25 2022 at 14:42)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257210646">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Strange, we'll need to in any case use this patch-branch given we are unable to get 0.26 cap-std via 0.40 and it's in nightly at least</p>
<p>Thanks for providing the branch, we'll try to bump to ^1 asap</p>
</blockquote>



<a name="300658570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300658570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300658570">(Sep 25 2022 at 14:43)</a>:</h4>
<p>pinkforest closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Problem now is that anyone using 0.40 e.g. via <code>wasi-common</code> will get 0.25 cap-std </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
</code></pre></div>
<p>And therefore incompat cap-primitives in Windows when using stable &gt; 1.64.0 rust stable that has sealed the <code>FileTypeExt</code> trait</p>
<p>By doing nothing this still works on at least unix but Windows is now broken on it's default state doing nothing on rust stable 1.64</p>
<h2>wasi-common &lt; 1 Windows builds broken</h2>
<p>I would have to bump everything to ^1 atm from 0.40</p>
<h2>Root cause</h2>
<p>This was seen earlier in <a href="https://github.com/bytecodealliance/cap-std/issues/275">https://github.com/bytecodealliance/cap-std/issues/275</a> via nightly broken</p>
<p>A trait was sealed that then broke the builds via <code>[cap-primitives](https://crates.io/crates/cap-primitives)</code></p>
<p>I documented my find originally: <a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a></p>
<h2>Work/Around - Works for Windows Only probably ?</h2>
<p>There is a work/around here: <a href="https://github.com/bytecodealliance/wasmtime/issues/4936">https://github.com/bytecodealliance/wasmtime/issues/4936</a></p>
<p>The work/around patch is in cap-std commits:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<h2>Work/Around does not work for unix</h2>
<p>Work/around in turn seems to break unix builds as described here: <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650">https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650</a></p>
<h2>Ideal Resolution ?</h2>
<ul>
<li>[ ] Avoid forcing ^1 bump via wasi-common from 0.40</li>
<li>[ ] Patch was broken on unix via patch-branch ?</li>
<li>[ ] Test patch on both Windows and Unix</li>
<li>[ ] Recursive point-release fix to 0.40 wasi-common -&gt; cap-std 0.26 -&gt; cap-primitives 0.26</li>
</ul>
<p>Could we address so this builds for both Windows and Linux / unix via 0.40 ?</p>
<p>Perhaps we could also bump wasi-common so it bumps up to 0.26 that whole chain for cap-primitives ?</p>
<p>But I think the build errors need to be sorted for unix as I suspect the patch has broken all unix now ? <a href="https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650">https://github.com/bytecodealliance/wasmtime/issues/4936#issuecomment-1257183650</a></p>
<p>This is how I bumped my :lock: to 0.40.1 - released 25 days ago or so</p>
<h2>Additional attempts</h2>
<p>I also tried quickly with 0.40.1 wasi-common but it still brings 0.25 tree</p>
<p>$ cargo update -p wasmtime-wasi --precise 0.40.1</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="w"> </span><span class="n">index</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">meta</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">frontend</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">isle</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">native</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">wasm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">87.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">87.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="o">-</span><span class="n">sync</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">asm</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">environ</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">fiber</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">jit</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">jit</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">types</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="o">-</span><span class="n">generate</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="w">    </span><span class="n">Updating</span><span class="w"> </span><span class="n">wiggle</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.0</span><span class="w"> </span>-&gt; <span class="nc">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
</code></pre></div>
<p>And my dependency tree gets 0.25 on which I had to apply the branch-patch</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">common</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">40.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">rand</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">std</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.3</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">25.3</span><span class="w"></span>
</code></pre></div>
<p>I originally went down the <span aria-label="hole" class="emoji emoji-1f573" role="img" title="hole">:hole:</span> <a href="https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470">https://github.com/bytecodealliance/cap-std/issues/270#issuecomment-1257176470</a></p>
<h2>Refs</h2>
<p><a href="https://github.com/lunatic-solutions/lunatic/issues/136">https://github.com/lunatic-solutions/lunatic/issues/136</a> &lt;-- Downstream crate impacted<br>
<a href="https://github.com/rust-lang/rust/issues/102260">https://github.com/rust-lang/rust/issues/102260</a> &lt;-- Went finding out what happened in std first - did not find these issues here<br>
<a href="https://github.com/bytecodealliance/cap-std/issues/275">https://github.com/bytecodealliance/cap-std/issues/275</a> &lt;-- I went first <br>
<a href="https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/.E2.9C.94.20.23102260.20Sealed.20Windows.20FileTypeExt/near/300637075">https://rust-lang.zulipchat.com/#narrow/stream/219381-t-libs/topic/.E2.9C.94.20.23102260.20Sealed.20Windows.20FileTypeExt/near/300637075</a> &lt;-- Chris Denton was helpful to point the above issue</p>
<p>Cheers</p>
</blockquote>



<a name="300658679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300658679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300658679">(Sep 25 2022 at 14:44)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257210958">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>(I am assuming that patch-branch will stay there for a while so we can bump to ^1 meanwhile)</p>
</blockquote>



<a name="300658710"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300658710" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300658710">(Sep 25 2022 at 14:44)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257210958">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>(I am assuming that patch-branch will stay there for a while so we can bump to ^1 meanwhile)</p>
</blockquote>



<a name="300658745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300658745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300658745">(Sep 25 2022 at 14:44)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257210646">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Strange, we'll need to in any case use this patch-branch given we are unable to get 0.26 cap-std via 0.40 and it's in nightly at least</p>
<p>Thanks for providing the branch, we'll try to bump to ^1 asap</p>
<p>I'll close this since I do not expect to find anymore issues - thanks a lot!</p>
<p>(I am assuming that patch-branch will stay there for a while so we can bump to ^1 meanwhile)</p>
</blockquote>



<a name="300661873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300661873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300661873">(Sep 25 2022 at 15:15)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a> which led to the Sealed error</p>
<p>It should re-produce in 1.64 going by that in 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing ?</p>
</blockquote>



<a name="300661925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300661925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300661925">(Sep 25 2022 at 15:15)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a> which led to the Sealed error</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing ?</p>
</blockquote>



<a name="300661941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300661941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300661941">(Sep 25 2022 at 15:15)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a> which led to the Sealed error</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable ?</p>
</blockquote>



<a name="300661995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300661995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300661995">(Sep 25 2022 at 15:16)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a> which led to the Sealed error</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
</blockquote>



<a name="300662025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300662025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300662025">(Sep 25 2022 at 15:16)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to the Sealed error</p>
<p>The Sealing itself is on 2nd commit</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
</blockquote>



<a name="300665216"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300665216" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300665216">(Sep 25 2022 at 15:53)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to the Sealed error</p>
<p>The Sealing itself is on 2nd commit</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from rename of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 and nightlies before and after that have that so current 1.64 stable is as stable was broken before ?</p>
</blockquote>



<a name="300665285"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300665285" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300665285">(Sep 25 2022 at 15:53)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to the Sealed error</p>
<p>The Sealing itself is on 2nd commit</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from rename of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 stable and nightlies before and after should be broken due to result of this stabilisation.</p>
</blockquote>



<a name="300665360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300665360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300665360">(Sep 25 2022 at 15:54)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to the Sealed error</p>
<p>The Sealing itself is on 2nd commit</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from rename of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 stable and nightlies before and after should be broken due to result of this stabilisation that included the <code>Sealed</code></p>
</blockquote>



<a name="300668293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300668293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300668293">(Sep 25 2022 at 16:23)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to the Sealed error</p>
<p>The Sealing itself is on 2nd commit</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from eventual cloning of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 stable and nightlies before and after should be broken due to result of this stabilisation that included the <code>Sealed</code></p>
</blockquote>



<a name="300668495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300668495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300668495">(Sep 25 2022 at 16:25)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to that <code>Sealed</code> error</p>
<p>The <code>Sealing</code> itself is on 2nd commit which then broke the impl that was relying on the <code>FileTypeExt</code> trait behind unstable feature -</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from eventual cloning of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 stable and nightlies before and after should be broken due to result of this stabilisation that included the <code>Sealed</code></p>
</blockquote>



<a name="300668505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300668505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300668505">(Sep 25 2022 at 16:25)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257216172">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<blockquote>
<p>I'm unable to reproduce this error on Windows with wasi-common 0.40 and today's 1.64 stable.<br>
I do see it with Rust nightly-2022-09-23. This is a known problem, and the fix is <a href="https://github.com/bytecodealliance/wasmtime/pull/4940">https://github.com/bytecodealliance/wasmtime/pull/4940</a>.</p>
</blockquote>
<p>The stabilisation happened here: <a href="https://github.com/rust-lang/rust/pull/98583">https://github.com/rust-lang/rust/pull/98583</a> which led to that <code>Sealed</code> error</p>
<p>The <code>Sealing</code> itself is on 2nd commit which then broke the impl that was relying on the <code>FileTypeExt</code> trait behind unstable feature</p>
<p>It should re-produce in 1.64.0 stable going by that via 0.40 without the patch to deal with the Sealed change that came along ....</p>
<p>Not sure why it is not re-producing in 1.64.0 stable on your side ?</p>
<p>So <code>std::os::windows::fs::FileTypeExt</code> was previously placeholders in here .. 1.64.0 just happened to land it and with Sealed</p>
<p>This is what I could derive from eventual cloning of <code>std::os::unix::fs::FileTypeExt</code> in here:<br>
<code>git diff de739728299408dfce96315b3c82a14c952a6cf3 949f251bccbb84513fe81a427a46864c1e8ad82c</code></p>
<p>The 1.64 stable and nightlies before and after should be broken due to result of this stabilisation that included the <code>Sealed</code></p>
</blockquote>



<a name="300676881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300676881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300676881">(Sep 25 2022 at 17:59)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257245672">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>This repo: <a href="https://github.com/sunfishcode/wasi-common-test">https://github.com/sunfishcode/wasi-common-test</a></p>
<p>depends on wasi-common 0.40 and builds for me on Rust 1.64.0 on Windows. Does it fail for you?</p>
<p>If not, could you prepare a repository which shows the failure?<br>
</p>
</blockquote>



<a name="300681028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300681028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300681028">(Sep 25 2022 at 18:48)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257254426">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Having difficulties atm sourcing a working wine or windows instance to do further testing.</p>
<p>We had it in <code>cargo install lunatic-runtime</code> which is not exactly Minimally Reproducible Example but the released crate (via install) reflects <code>v0.10.0</code> tag in the <a href="https://github.com/lunatic-solutions/lunatic">repo</a> here:  <a href="https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0">https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0</a></p>
<p>Chris may be right here that this may have been also a red herring with <code>Sealed</code> and the real issue where nightly is somehow other way impacted that wasn't relayed via 1.64.0 necessarily - </p>
<p>Question is if 1.64.0 is not really impacted - given re-testing - then this may or may not stabilise later besides <code>windows_file_type_ext</code> that I was looking at from both the patch and the stabilisation PoV considering the rather clear error suspect causation... it would be nice to find an answer to this..</p>
<p>Will be curious to find out once I get my Windows back ..</p>
</blockquote>



<a name="300681351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300681351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300681351">(Sep 25 2022 at 18:51)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257254426">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Having difficulties atm sourcing a working wine or windows instance to do further testing.</p>
<p>We had it in <code>cargo install lunatic-runtime</code> which is not exactly Minimally Reproducible Example but the released crate (via install) reflects <code>v0.10.0</code> tag in the <a href="https://github.com/lunatic-solutions/lunatic">repo</a> here:  <a href="https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0">https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0</a></p>
<p>Chris may be right here that this may have been also a red herring with <code>Sealed</code> and the real issue where nightly is somehow other way impacted that wasn't relayed via 1.64.0 necessarily as one would expect from: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a></p>
<p>Question is if 1.64.0 is not really impacted - given re-testing - then this may or may not stabilise later besides <code>windows_file_type_ext</code> that I was looking at from both the patch and the stabilisation PoV considering the rather clear error suspect causation... it would be nice to find an answer to this..</p>
<p>Will be curious to find out once I get my Windows back ..</p>
</blockquote>



<a name="300681457"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300681457" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300681457">(Sep 25 2022 at 18:52)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257254426">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Having difficulties atm sourcing a working wine or windows instance to do further testing.</p>
<p>We had it in <code>cargo install lunatic-runtime</code> which is not exactly Minimally Reproducible Example but the released crate (via install) reflects <code>v0.10.0</code> tag in the <a href="https://github.com/lunatic-solutions/lunatic">repo</a> here:  <a href="https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0">https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0</a></p>
<p>Chris may be right here that this may have been also a red herring with <code>Sealed</code> and the real issue where nightly is somehow other way impacted that wasn't relayed via 1.64.0 necessarily as one would expect from: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a></p>
<p>Question is if 1.64.0 is not really impacted - given re-testing - then this may or may not stabilise later besides <code>windows_file_type_ext</code> that I was looking at from both the patch and the stabilisation PoV considering the obvious error suspect causation and stabilisation around it... it would be nice to find an answer to this..</p>
<p>Will be curious to find out once I get my Windows back ..</p>
</blockquote>



<a name="300681519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300681519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300681519">(Sep 25 2022 at 18:53)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257254426">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Having difficulties atm sourcing a working wine or windows instance to do further testing.</p>
<p>We had it in <code>cargo install lunatic-runtime</code> which is not exactly Minimally Reproducible Example but the released crate (via install) reflects <code>v0.10.0</code> tag in the <a href="https://github.com/lunatic-solutions/lunatic">repo</a> here:  <a href="https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0">https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0</a></p>
<p>Chris may be right here that this may have been also a red herring with <code>Sealed</code> and the real issue where nightly is somehow other way impacted that wasn't relayed via 1.64.0 necessarily as one would expect from: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a></p>
<p>Question is if 1.64.0 is not really impacted - given re-testing - then this may or may not stabilise later besides <code>windows_file_type_ext</code> that I was looking at..  it would be nice to find an answer to this..</p>
<p>Will be curious to find out once I get my Windows back ..</p>
</blockquote>



<a name="300686589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300686589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300686589">(Sep 25 2022 at 20:07)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269465">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I did extensive further regression on this and it seems 1.64 stable is working still.</p>
<p>The <code>Sealed</code> stuff was red herring indeed -</p>
<p>Now further off to look for that regression what what causes it with the nightly ... purely off curiosity ofcourse</p>
<p>But for the time being the branch fix is sufficient - thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> </p>
</blockquote>



<a name="300686872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300686872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300686872">(Sep 25 2022 at 20:10)</a>:</h4>
<p>pinkforest <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269970">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687846">(Sep 25 2022 at 20:24)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269970">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as feature in stable Rust where as in nightly the perma-unstable feature operates in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687871">(Sep 25 2022 at 20:24)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269970">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the perma-unstable feature operates in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687888">(Sep 25 2022 at 20:24)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269970">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the perma-unstable feature operates solely in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687906"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687906" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687906">(Sep 25 2022 at 20:24)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269970">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the perma-unstable feature operates solely in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687916">(Sep 25 2022 at 20:25)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269465">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I did extensive further regression on this and it seems 1.64 stable is working still.</p>
<p>The <code>Sealed</code> stuff was red herring indeed -</p>
<p>Now further off to look for that regression what what causes it with the nightly ... purely off curiosity ofcourse</p>
<p>But for the time being the branch fix is sufficient - thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> </p>
<h2>FWIW - About nightly</h2>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the perma-unstable feature operates solely in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300687931"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300687931" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300687931">(Sep 25 2022 at 20:25)</a>:</h4>
<p>pinkforest deleted a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257254426">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Having difficulties atm sourcing a working wine or windows instance to do further testing.</p>
<p>We had it in <code>cargo install lunatic-runtime</code> which is not exactly Minimally Reproducible Example but the released crate (via install) reflects <code>v0.10.0</code> tag in the <a href="https://github.com/lunatic-solutions/lunatic">repo</a> here:  <a href="https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0">https://github.com/lunatic-solutions/lunatic/releases/tag/v0.10.0</a></p>
<p>Chris may be right here that this may have been also a red herring with <code>Sealed</code> and the real issue where nightly is somehow other way impacted that wasn't relayed via 1.64.0 necessarily as one would expect from: <a href="https://github.com/rust-lang/rust/pull/98583/files">https://github.com/rust-lang/rust/pull/98583/files</a></p>
<p>Question is if 1.64.0 is not really impacted - given re-testing - then this may or may not stabilise later besides <code>windows_file_type_ext</code> that I was looking at..  it would be nice to find an answer to this..</p>
<p>Will be curious to find out once I get my Windows back ..</p>
</blockquote>



<a name="300688549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300688549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300688549">(Sep 25 2022 at 20:32)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269465">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I did extensive further regression on this and it seems 1.64 stable is working still.</p>
<p>The <code>Sealed</code> stuff was red herring indeed -</p>
<p>Now further off to look for that regression what what causes it with the nightly ... purely off curiosity ofcourse</p>
<p>But for the time being the branch fix is sufficient - thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> </p>
<h2>About nightly</h2>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the perma-unstable feature operates solely in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="300688622"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234957%20Broken%20Windows%20builds%20via%20%3C%201%20%28or%20.../near/300688622" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234957.20Broken.20Windows.20builds.20via.20.3C.201.20.28or.20.2E.2E.2E.html#300688622">(Sep 25 2022 at 20:33)</a>:</h4>
<p>pinkforest edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4957#issuecomment-1257269465">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4957">issue #4957</a>:</p>
<blockquote>
<p>Okay I did extensive further regression on this and it seems 1.64 stable is working still.</p>
<p>The <code>Sealed</code> stuff was red herring indeed -</p>
<p>Now further off to look for that regression what what causes it with the nightly ... purely off curiosity ofcourse</p>
<p>But for the time being the branch fix is sufficient - thank you <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> </p>
<h2>About nightly</h2>
<p>btw fwiw - without fix applied today's nightly still continues this regression w/o the patch branch applied -</p>
<p>_So let me guess nightly simply regresses because <code>Sealed</code> is perma-unstable and <code>sealed</code> itself would not get enabled as a feature in stable Rust where as in nightly the "perma-unstable" feature supposedly operates and is enabled by default solely in_</p>
<p>Hmm <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> yeah it's 6:23 AM going to sleep</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="nb">Default</span><span class="w"> </span><span class="n">host</span>: <span class="nc">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>

<span class="n">installed</span><span class="w"> </span><span class="n">toolchains</span><span class="w"></span>
<span class="o">--------------------</span><span class="w"></span>

<span class="n">stable</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"></span>
<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>

<span class="n">active</span><span class="w"> </span><span class="n">toolchain</span><span class="w"></span>
<span class="o">----------------</span><span class="w"></span>

<span class="n">nightly</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">windows</span><span class="o">-</span><span class="n">msvc</span><span class="w"> </span><span class="p">(</span><span class="n">default</span><span class="p">)</span><span class="w"></span>
<span class="n">rustc</span><span class="w"> </span><span class="mf">1.66.0</span><span class="o">-</span><span class="n">nightly</span><span class="w"> </span><span class="p">(</span><span class="mi">3</span><span class="n">f83906b3</span><span class="w"> </span><span class="mi">2022</span><span class="o">-</span><span class="mi">09</span><span class="o">-</span><span class="mi">24</span><span class="p">)</span><span class="w"></span>

<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="n">v35</span><span class="p">.</span><span class="mf">0.2</span><span class="w"></span>
<span class="n">error</span><span class="p">[</span><span class="n">E0277</span><span class="p">]</span>: <span class="nc">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span>: <span class="nc">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">satisfied</span><span class="w"></span>
<span class="w">   </span><span class="o">-</span>-&gt; <span class="nc">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="p">.</span><span class="n">cargo</span><span class="err">\</span><span class="n">registry</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">-</span><span class="mi">1</span><span class="n">ecc6299db9ec823</span><span class="err">\</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="o">-</span><span class="mf">0.25.3</span><span class="err">\</span><span class="n">src</span><span class="err">\</span><span class="n">fs</span><span class="err">\</span><span class="n">file_type</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">134</span>:<span class="mi">6</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="mi">134</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">impl</span><span class="w"> </span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">FileType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w">      </span><span class="o">^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">implemented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="err">`</span><span class="n">file_type</span>::<span class="n">FileType</span><span class="err">`</span><span class="w"></span>
<span class="w">    </span><span class="o">|</span><span class="w"></span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">help</span>: <span class="nc">the</span><span class="w"> </span><span class="n">following</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="n">implement</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">sealed</span>::<span class="n">Sealed</span><span class="err">`</span>:
              <span class="nc">Child</span><span class="w"></span>
<span class="w">              </span><span class="n">Command</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitCode</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatus</span><span class="w"></span>
<span class="w">              </span><span class="n">ExitStatusError</span><span class="w"></span>
<span class="w">              </span><span class="n">OsStr</span><span class="w"></span>
<span class="w">              </span><span class="n">OsString</span><span class="w"></span>
<span class="w">              </span><span class="n">Simd</span><span class="o">&lt;</span><span class="kt">f32</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="w">            </span><span class="n">and</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">others</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">required</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">bound</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">os</span>::<span class="n">windows</span>::<span class="n">fs</span>::<span class="n">FileTypeExt</span><span class="err">`</span><span class="w"></span>

<span class="n">For</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">error</span><span class="p">,</span><span class="w"> </span><span class="kr">try</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="n">explain</span><span class="w"> </span><span class="n">E0277</span><span class="err">`</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cap</span><span class="o">-</span><span class="n">primitives</span><span class="err">`</span><span class="w"> </span><span class="n">due</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="n">error</span><span class="w"></span>
<span class="n">warning</span>: <span class="nc">build</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">waiting</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">other</span><span class="w"> </span><span class="n">jobs</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">finish</span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">lunatic</span><span class="o">-</span><span class="n">runtime</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">10.0</span><span class="err">`</span><span class="p">,</span><span class="w"> </span><span class="n">intermediate</span><span class="w"> </span><span class="n">artifacts</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="n">C</span>:<span class="err">\</span><span class="o">..</span><span class="err">\</span><span class="n">AppData</span><span class="err">\</span><span class="n">Local</span><span class="err">\</span><span class="n">Temp</span><span class="err">\</span><span class="n">cargo</span><span class="o">-</span><span class="n">installBWk9L0</span><span class="err">`</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>