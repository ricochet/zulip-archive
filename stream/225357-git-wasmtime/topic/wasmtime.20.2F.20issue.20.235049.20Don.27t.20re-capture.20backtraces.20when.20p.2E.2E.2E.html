<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5049 Don&#x27;t re-capture backtraces when p... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html">wasmtime / issue #5049 Don&#x27;t re-capture backtraces when p...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="303664913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303664913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303664913">(Oct 12 2022 at 15:31)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276369989">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<p>Difference in benchmark results after the third commit:</p>
<p>&lt;details&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">20</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">9.1573</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">9.2173</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">9.2943</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.1519</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.1698</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.1840</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">71.950</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">71.263</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">70.647</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">240.68</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">247.98</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">256.50</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">7.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="mf">1.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">40</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">17.594</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">17.679</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">17.777</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.2500</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.2626</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.2735</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">82.311</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">82.060</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">81.828</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">450.31</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">457.42</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">465.32</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">21</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">21.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">12</span><span class="w"> </span><span class="p">(</span><span class="mf">12.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="mf">2.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="mf">3.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="p">(</span><span class="mf">4.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">60</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">24.421</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">24.825</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">25.198</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.3812</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.4169</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.4569</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">87.209</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">86.980</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">86.694</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">651.54</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">668.05</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">681.82</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">3.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="mf">2.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="mf">1.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">80</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">30.406</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">30.660</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">31.073</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.5746</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.6092</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.6311</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">90.168</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">90.023</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">89.849</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">885.12</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">902.27</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">917.09</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">2.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="mf">2.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">100</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">41.574</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">41.822</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">42.132</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.3735</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3911</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.4053</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">91.218</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">91.097</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">90.974</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1007.9</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1023.2</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1038.7</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">18.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="p">(</span><span class="mf">7.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">11</span><span class="w"> </span><span class="p">(</span><span class="mf">11.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">120</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">50.096</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">50.518</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">51.109</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.3479</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3754</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3954</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">92.489</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">92.372</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">92.261</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1192.2</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1211.0</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1231.3</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">15.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">9</span><span class="w"> </span><span class="p">(</span><span class="mf">9.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">140</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">57.252</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">57.426</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">57.624</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.4295</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.4379</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.4453</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">93.581</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">93.502</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">93.423</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1420.4</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1438.8</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1457.9</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">13.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="p">(</span><span class="mf">7.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">160</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">68.391</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">70.340</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">72.333</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.2120</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.2747</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3395</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">94.214</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">94.064</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">93.903</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1540.2</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1584.6</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1628.4</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">14.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">8</span><span class="w"> </span><span class="p">(</span><span class="mf">8.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">180</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">76.005</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">77.580</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">79.369</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.2679</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3202</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.3683</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">95.074</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">94.871</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">94.668</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1775.4</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1849.9</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1930.2</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">11.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="p">(</span><span class="mf">5.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
<span class="n">host</span><span class="o">-</span><span class="n">wasm</span><span class="o">-</span><span class="n">frames</span><span class="o">-</span><span class="n">traps</span><span class="o">/</span><span class="mi">200</span><span class="w"></span>
<span class="w">                        </span><span class="n">time</span>:   <span class="p">[</span><span class="mf">90.825</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">94.718</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="w"> </span><span class="mf">98.745</span><span class="w"> </span><span class="err">µ</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="mf">2.0254</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.1115</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="w"> </span><span class="mf">2.2020</span><span class="w"> </span><span class="n">Melem</span><span class="o">/</span><span class="n">s</span><span class="p">]</span><span class="w"></span>
<span class="w">                 </span><span class="n">change</span>:
                        <span class="nc">time</span>:   <span class="p">[</span><span class="o">-</span><span class="mf">95.291</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">95.072</span><span class="o">%</span><span class="w"> </span><span class="o">-</span><span class="mf">94.844</span><span class="o">%</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.00</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.05</span><span class="p">)</span><span class="w"></span>
<span class="w">                        </span><span class="n">thrpt</span>:  <span class="p">[</span><span class="o">+</span><span class="mf">1839.6</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">1929.0</span><span class="o">%</span><span class="w"> </span><span class="o">+</span><span class="mf">2023.4</span><span class="o">%</span><span class="p">]</span><span class="w"></span>
<span class="w">                        </span><span class="n">Performance</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">improved</span><span class="p">.</span><span class="w"></span>
<span class="n">Found</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="n">outliers</span><span class="w"> </span><span class="n">among</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="n">measurements</span><span class="w"> </span><span class="p">(</span><span class="mf">13.00</span><span class="o">%</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="mi">6</span><span class="w"> </span><span class="p">(</span><span class="mf">6.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">mild</span><span class="w"></span>
<span class="w">  </span><span class="mi">7</span><span class="w"> </span><span class="p">(</span><span class="mf">7.00</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="n">severe</span><span class="w"></span>
</code></pre></div>
<p>&lt;/details&gt;</p>
</blockquote>



<a name="303672879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303672879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303672879">(Oct 12 2022 at 16:12)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276424701">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="303673031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303673031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303673031">(Oct 12 2022 at 16:13)</a>:</h4>
<p>Stebalien <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276426145">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<p>Thanks for looking into this! Unfortunately, no difference. I tested it here: <a href="https://github.com/filecoin-project/ref-fvm/commit/4242e722dfc99e3b5153080be96d2c21f3413dbb">https://github.com/filecoin-project/ref-fvm/commit/4242e722dfc99e3b5153080be96d2c21f3413dbb</a> (looks like I got the patches correct).</p>
<p>I'll put a reproducer together by next week (have a few deadlines this week).</p>
</blockquote>



<a name="303702006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303702006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303702006">(Oct 12 2022 at 18:55)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276601531">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<p>@Stebalien to be clear, enabling backtraces will always have some overhead that is proportional to how many frames are on the stack (capturing the stack is <code>O(frames)</code>) so we shouldn't expect that performance is identical when backtraces are enabled and when they disabled. But comparing performance with this PR vs without this PR should ideally show a marked improvement in performance.</p>
<p>Are you seeing identical performance with this patch applied vs without?</p>
<p>If so, how is the trap being triggered? Is it an <code>unreachable</code> in Wasm, an out-of-bounds memory operation, a host function returning <code>Err(wasmtime::Trap::new(...))</code>, or something else?</p>
<p>(Reproducer would still be appreciated, once you have the cycles.)</p>
</blockquote>



<a name="303707485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303707485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303707485">(Oct 12 2022 at 19:30)</a>:</h4>
<p>Stebalien <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276643285">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<blockquote>
<p>Are you seeing identical performance with this patch applied vs without?</p>
</blockquote>
<p>Within the margin of error, yes. Basically, this test is 300-400x slower with backtraces enabled.</p>
<blockquote>
<p>Is it an unreachable in Wasm, an out-of-bounds memory operation, a host function returning Err(wasmtime::Trap::new(...)), or something else?</p>
</blockquote>
<p>The host is returning a <code>Trap</code> from a syscall. Specifically:</p>
<ol>
<li>Host returns a Trap.</li>
<li>Host handles the Trap on the other side of the <code>func.call</code>.</li>
<li>Host returns to the next wasm instance up the stack.</li>
<li>The next wasm instance calls back into the host (asking the host to "abort").</li>
<li>The host returns another trap, go back to step 2.</li>
</ol>
<p>In other words:</p>
<ol>
<li>Host -&gt; Wasm -&gt; Host -&gt; Wasm ... (1000x) ... -&gt; Host (traps) [Z]</li>
<li>Wasm [W] &lt;- Host [X] &lt;- (Wasm [Y] skipped) &lt;- Host (traps) [Z].</li>
<li>Wasm [W] -&gt; Host (traps) [X].</li>
<li>Wasm [U] &lt;- Host [V] &lt;- (Wasm [W] skipped) &lt;- Host (traps) [X].</li>
</ol>
<p>And so on... Two steps backwards, one step forward, two steps backward, all the way to the top.</p>
<blockquote>
<p>(Reproducer would still be appreciated, once you have the cycles.)</p>
</blockquote>
<p>I'll also do a bit of profiling myself as well.</p>
</blockquote>



<a name="303708428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303708428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303708428">(Oct 12 2022 at 19:36)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276648524">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<blockquote>
<p>The host is returning a <code>Trap</code> from a syscall. Specifically:</p>
<ol>
<li>Host returns a Trap.</li>
<li>Host handles the Trap on the other side of the <code>func.call</code>.</li>
<li>Host returns to the next wasm instance up the stack.</li>
<li>The next wasm instance calls back into the host (asking the host to "abort").</li>
<li>The host returns another trap, go back to step 2.</li>
</ol>
</blockquote>
<p>To clarify, does this mean that for a stack of depth N, there are N traps?</p>
<p>The "quadratic slowdown with backtraces" behavior is completely expected then, from first principles, I think: you're taking N traps, and they have cost 1, 2, 3, ... N frames/levels deep. I don't think there's anything we could do to make this <em>not</em> be quadratic, short of some sort of magical lazily-expanding constant-time stack capture (which we can't do because we don't keep the stack around after the trap fires).</p>
</blockquote>



<a name="303716835"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303716835" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303716835">(Oct 12 2022 at 20:30)</a>:</h4>
<p>Stebalien <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1276702192">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<p>There's one trap at each level. If these stack traces cover the entire rust stack, not just the wasm module handling the trap, that would make sense.</p>
<p>In that case, would the wasmtime team consider keeping the ability to disable backtraces?</p>
</blockquote>



<a name="303848384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303848384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303848384">(Oct 13 2022 at 14:20)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1277692598">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<p>I think it would make sense to add an optional max number of frames captured in a backtrace, which can be set to zero to completely disable backtraces. Then we can limit the cost of a backtrace from O(frames) to some user-chosen acceptable constant overhead.</p>
<p>Going to go ahead and merge this PR and file a new issue for that config option. I'll cc you on it, @Stebalien.</p>
</blockquote>



<a name="303850322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235049%20Don%27t%20re-capture%20backtraces%20when%20p.../near/303850322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235049.20Don.27t.20re-capture.20backtraces.20when.20p.2E.2E.2E.html#303850322">(Oct 13 2022 at 14:28)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/5049#issuecomment-1277705028">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5049">issue #5049</a>:</p>
<blockquote>
<blockquote>
<p>I think it would make sense to add an optional max number of frames captured in a backtrace, which can be set to zero to completely disable backtraces. Then we can limit the cost of a backtrace from O(frames) to some user-chosen acceptable constant overhead.</p>
</blockquote>
<p>#5052 </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>