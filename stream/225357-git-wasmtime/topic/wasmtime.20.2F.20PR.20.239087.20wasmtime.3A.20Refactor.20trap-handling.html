<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9087 wasmtime: Refactor trap-handling · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html">wasmtime / PR #9087 wasmtime: Refactor trap-handling</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="457197633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457197633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457197633">(Aug 07 2024 at 20:42)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9087">PR #9087</a>.</p>



<a name="457197634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457197634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457197634">(Aug 07 2024 at 20:42)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9087">PR #9087</a>.</p>



<a name="457197636"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457197636" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457197636">(Aug 07 2024 at 20:42)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9087">PR #9087</a> from <code>jameysharp:trap-regs</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit groups together the registers that have to be collected from a signal handler to correctly report a trap: namely, the program counter and frame pointer, as of the time that the trap occurred.</p>
<p>I also moved the call to set_jit_trap inside test_if_trap for every platform that uses both methods. Only the implementation for Mach ports still needs to call set_jit_trap because it doesn't use test_if_trap.</p>
<p>In addition I'm fixing an unrelated doc comment that I stumbled across while working on this.</p>
</blockquote>



<a name="457210601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457210601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457210601">(Aug 07 2024 at 22:02)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9087#pullrequestreview-2226264722">PR review</a>:</p>
<blockquote>
<p>Looks good to me!</p>
</blockquote>



<a name="457210602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457210602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457210602">(Aug 07 2024 at 22:02)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/9087#discussion_r1707982850">PR review comment</a>:</p>
<blockquote>
<p>What do you think about removing the <code>..</code> to require this match to be re-examined if the <code>TrapRegisters</code> type changes?</p>
</blockquote>



<a name="457210603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457210603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457210603">(Aug 07 2024 at 22:02)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9087#pullrequestreview-2226264722">PR review</a>:</p>
<blockquote>
<p>Looks good to me!</p>
</blockquote>



<a name="457213487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457213487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457213487">(Aug 07 2024 at 22:23)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9087#pullrequestreview-2226294885">PR review</a>.</p>



<a name="457213488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457213488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457213488">(Aug 07 2024 at 22:23)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/9087#discussion_r1708018967">PR review comment</a>:</p>
<blockquote>
<p>I absolutely agree it's worth thinking about. My next PR specifically will add a field to this struct <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> but this function won't need to look at it. I think it actually makes sense when pattern matching in this particular case to declare "I only care about these registers" even if more get collected later: these two are the ones we need for a backtrace or coredump.</p>
</blockquote>



<a name="457216000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239087%20wasmtime%3A%20Refactor%20trap-handling/near/457216000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239087.20wasmtime.3A.20Refactor.20trap-handling.html#457216000">(Aug 07 2024 at 22:38)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9087">PR #9087</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>