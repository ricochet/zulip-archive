<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5885 fuzzgen: Initial SIMD support · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html">wasmtime / PR #5885 fuzzgen: Initial SIMD support</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="338163700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338163700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338163700">(Feb 26 2023 at 15:09)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5885">PR #5885</a> from <code>fuzz-simd</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR Introduces support for SIMD vectors on fuzzgen. This is mostly to test ABI since it doesn't enable a lot of instructions.</p>
<p>I'm also not planning on introducing pretty much any other SIMD opcodes with the current opcode list system. I think the next step really is to move away from the opcode list.</p>
<hr>
<p>This also does some changes to the clif file format. The current format represents consts as:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">const0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mh">0x00</span><span class="w"> </span><span class="mh">0x01</span><span class="w"> </span><span class="mh">0x02</span><span class="p">]</span>
</code></pre></div>
<p>However, when printing a function we print in the following format:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">const0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x000102</span>
</code></pre></div>
<p>And the file does not parse anymore. I.e. we are printing invalid CLIF when constants are involved.</p>
<p>It was easier for me to change the parser, than the printer. However if people prefer the old format, it should also be a fairly easy change.</p>
<p>Another option would be to start accepting both formats, which should also be fairly easy.</p>
<p>If anyone has opinions about this, let me know!</p>
</blockquote>



<a name="338163701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338163701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338163701">(Feb 26 2023 at 15:09)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5885">PR #5885</a>.</p>



<a name="338439782"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338439782" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338439782">(Feb 27 2023 at 20:09)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5885#pullrequestreview-1316212654">PR review</a>.</p>



<a name="338439785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338439785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338439785">(Feb 27 2023 at 20:09)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5885#pullrequestreview-1316212654">PR review</a>.</p>



<a name="338439786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338439786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338439786">(Feb 27 2023 at 20:09)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5885#discussion_r1119230580">PR review comment</a>:</p>
<blockquote>
<p>I think I'd rather place this check in the risc-v branch of the <code>match triple.architecture</code> below. You can place it before the <code>exceptions!</code> macro and do an early <code>return false</code>, or even say <code>!is_simd &amp;&amp; exceptions!(...)</code> since the macro is just an expression evaluating to a <code>bool.</code></p>
</blockquote>



<a name="338439787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338439787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338439787">(Feb 27 2023 at 20:09)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5885#discussion_r1119134854">PR review comment</a>:</p>
<blockquote>
<p>How about a <code>supports_simd</code> variable instead of <code>is_riscv</code>?</p>
</blockquote>



<a name="338555984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338555984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338555984">(Feb 28 2023 at 11:02)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5885">PR #5885</a> from <code>fuzz-simd</code> to <code>main</code>.</p>



<a name="338559499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338559499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338559499">(Feb 28 2023 at 11:20)</a>:</h4>
<p>afonso360 has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5885">PR #5885</a>.</p>



<a name="338580717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235885%20fuzzgen%3A%20Initial%20SIMD%20support/near/338580717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235885.20fuzzgen.3A.20Initial.20SIMD.20support.html#338580717">(Feb 28 2023 at 13:00)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5885">PR #5885</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>