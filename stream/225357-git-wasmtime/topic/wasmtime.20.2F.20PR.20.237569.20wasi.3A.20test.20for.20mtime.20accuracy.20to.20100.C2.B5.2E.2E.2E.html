<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7569 wasi: test for mtime accuracy to 100µ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html">wasmtime / PR #7569 wasi: test for mtime accuracy to 100µ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="403437054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403437054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403437054">(Nov 21 2023 at 18:08)</a>:</h4>
<p>guybedford edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7569">PR #7569</a>.</p>



<a name="403437075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403437075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403437075">(Nov 21 2023 at 18:08)</a>:</h4>
<p>guybedford edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7569">PR #7569</a>:</p>
<blockquote>
<p>Node.js mtime setting only works up to 100µs accuracy.</p>
<p>This updates the test to work at this level at minimum.</p>
<p>We could make this a configurable test option, I just wasn't sure how to set up such a conditional build feature for the test program - suggestions welcome if not reducing overall accuracy is preferred.</p>
</blockquote>



<a name="403440699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403440699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403440699">(Nov 21 2023 at 18:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#pullrequestreview-1742804993">PR review</a>.</p>



<a name="403440700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403440700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403440700">(Nov 21 2023 at 18:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#pullrequestreview-1742804993">PR review</a>.</p>



<a name="403440701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403440701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403440701">(Nov 21 2023 at 18:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#discussion_r1401008291">PR review comment</a>:</p>
<blockquote>
<p>With 100us accuracy in Node this gets rounded to no change, right? Could this -2000 be increased so the mtim is changed in node?</p>
</blockquote>



<a name="403440702"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403440702" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403440702">(Nov 21 2023 at 18:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#discussion_r1401009206">PR review comment</a>:</p>
<blockquote>
<p>Could these assertions be left as-is with a larger adjustment above that isn't arounded?</p>
</blockquote>



<a name="403466132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403466132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403466132">(Nov 21 2023 at 21:35)</a>:</h4>
<p>guybedford submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#pullrequestreview-1743162174">PR review</a>.</p>



<a name="403466134"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403466134" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403466134">(Nov 21 2023 at 21:35)</a>:</h4>
<p>guybedford created <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#discussion_r1401228258">PR review comment</a>:</p>
<blockquote>
<p>2000 for u64 is 2000 * 100 nanoseconds is 200 microseconds. So I think this is the right accuracy. Reducing the order by one leads to the times being equal in the check. So I think this is right.</p>
</blockquote>



<a name="403466264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403466264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403466264">(Nov 21 2023 at 21:36)</a>:</h4>
<p>guybedford submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#pullrequestreview-1743164835">PR review</a>.</p>



<a name="403466265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403466265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403466265">(Nov 21 2023 at 21:36)</a>:</h4>
<p>guybedford created <a href="https://github.com/bytecodealliance/wasmtime/pull/7569#discussion_r1401229826">PR review comment</a>:</p>
<blockquote>
<p>Do you mean does changing <code>2000</code> to say <code>7243</code> lead to the test still passing? If so, I've verified that is true, yes.</p>
</blockquote>



<a name="403467051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403467051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403467051">(Nov 21 2023 at 21:42)</a>:</h4>
<p>guybedford updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7569">PR #7569</a>.</p>



<a name="403467395"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237569%20wasi%3A%20test%20for%20mtime%20accuracy%20to%20100%C2%B5.../near/403467395" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237569.20wasi.3A.20test.20for.20mtime.20accuracy.20to.20100.C2.B5.2E.2E.2E.html#403467395">(Nov 21 2023 at 21:45)</a>:</h4>
<p>guybedford updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7569">PR #7569</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>