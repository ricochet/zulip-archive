<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3556 Add a document describing how ISLE is... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html">wasmtime / PR #3556 Add a document describing how ISLE is...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="262138783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262138783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262138783">(Nov 19 2021 at 22:22)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a>.</p>



<a name="262138784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262138784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262138784">(Nov 19 2021 at 22:22)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a> from <code>isle-integration-docs</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="262138785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262138785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262138785">(Nov 19 2021 at 22:22)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a>.</p>



<a name="262141290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262141290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262141290">(Nov 19 2021 at 22:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811732077">PR review</a>.</p>



<a name="262141292"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262141292" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262141292">(Nov 19 2021 at 22:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811732077">PR review</a>.</p>



<a name="262141293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262141293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262141293">(Nov 19 2021 at 22:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753572859">PR review comment</a>:</p>
<blockquote>
<p>s/doesn't/don't/</p>
</blockquote>



<a name="262141294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262141294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262141294">(Nov 19 2021 at 22:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753575478">PR review comment</a>:</p>
<blockquote>
<p>This <code>SinkableLoad</code> discussion could refer to the section below as well, noting that it's a form of type safety, disallowing use of the value until we commit to merging it :-)</p>
</blockquote>



<a name="262141295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262141295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262141295">(Nov 19 2021 at 22:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753575655">PR review comment</a>:</p>
<blockquote>
<p>This paragraph has good detail but is a little dense; a snippet or two showing how <code>sinkable_load</code> and <code>sink_load</code> are used in a rule might help?</p>
</blockquote>



<a name="262146010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146010">(Nov 19 2021 at 23:37)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811749620">PR review</a>.</p>



<a name="262146011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146011">(Nov 19 2021 at 23:37)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811749620">PR review</a>.</p>



<a name="262146012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146012">(Nov 19 2021 at 23:37)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753592115">PR review comment</a>:</p>
<blockquote>
<p>s/fnally/finally/</p>
</blockquote>



<a name="262146013"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146013" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146013">(Nov 19 2021 at 23:37)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753586770">PR review comment</a>:</p>
<blockquote>
<p>s/themselves they//</p>
</blockquote>



<a name="262146973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146973">(Nov 19 2021 at 23:49)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811760525">PR review</a>.</p>



<a name="262146974"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146974" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146974">(Nov 19 2021 at 23:49)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811760525">PR review</a>.</p>



<a name="262146983"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262146983" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262146983">(Nov 19 2021 at 23:49)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753595813">PR review comment</a>:</p>
<blockquote>
<p>? caare</p>
</blockquote>



<a name="262147610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262147610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262147610">(Nov 19 2021 at 23:57)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811762652">PR review</a>.</p>



<a name="262147611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262147611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262147611">(Nov 19 2021 at 23:57)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-811762652">PR review</a>.</p>



<a name="262147612"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262147612" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262147612">(Nov 19 2021 at 23:57)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753597554">PR review comment</a>:</p>
<blockquote>
<p>The description of what constitutes a side effect, I am having a hard time appreciating what's really being described or taking it an applying it and thinking up a different example. Is there some way or mechanism to help prevent writing code that violates this no side effect rule? With the description of a side effect here it worries me that it will be easier to create bugs that are harder to track down. </p>
</blockquote>



<a name="262147642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262147642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262147642">(Nov 19 2021 at 23:57)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753597554">PR review comment</a>.</p>



<a name="262147713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262147713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262147713">(Nov 19 2021 at 23:58)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r753597554">PR review comment</a>.</p>



<a name="262345380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262345380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262345380">(Nov 22 2021 at 16:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-812781657">PR review</a>.</p>



<a name="262522203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262522203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262522203">(Nov 23 2021 at 22:20)</a>:</h4>
<p>avanhatt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-814231227">PR review</a>.</p>



<a name="262522204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262522204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262522204">(Nov 23 2021 at 22:20)</a>:</h4>
<p>avanhatt created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r755547587">PR review comment</a>:</p>
<blockquote>
<p>Is this/can this be enforced by the ISLE compiler? Or is it the responsibility of the rule-writer?</p>
</blockquote>



<a name="262523349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262523349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262523349">(Nov 23 2021 at 22:31)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-814238330">PR review</a>.</p>



<a name="262523350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/262523350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#262523350">(Nov 23 2021 at 22:31)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r755553202">PR review comment</a>:</p>
<blockquote>
<p>The latter; the external extractor is a call into Rust, which could in theory do anything.</p>
<p>I had suggested at one point (in a conversation with @fitzgen I think) that we could split the <code>Context</code> trait into <code>InputContext</code> and <code>OutputContext</code>, and hold only an immutable borrow to <code>InputContext</code>, which would give us some type-level enforcement of this, at least...</p>
</blockquote>



<a name="263057468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263057468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263057468">(Nov 29 2021 at 19:36)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-818229442">PR review</a>.</p>



<a name="263057469"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263057469" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263057469">(Nov 29 2021 at 19:36)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r758676939">PR review comment</a>:</p>
<blockquote>
<p>I thought some more about this and determined that if we actually did this, it would make rewriting our peephole optimizations in ISLE impossible because both the input and output contexts would need to borrow the DFG (shared/immutable borrow for input, exclusive/mutable for output) which would be a borrowck error. Or at least it would force us to use <code>RefCell</code> pervasively, which could be a perf hit and certainly would be a pain to work with.</p>
</blockquote>



<a name="263057564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263057564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263057564">(Nov 29 2021 at 19:37)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-818230454">PR review</a>.</p>



<a name="263057565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263057565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263057565">(Nov 29 2021 at 19:37)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r758677469">PR review comment</a>:</p>
<blockquote>
<p>(Even the existing lowering doesn't have an input and output <code>LowerCtx</code> so we would have the same issues with instruction selection, even though we "shouldn't" if we were building this all from scratch)</p>
</blockquote>



<a name="263085845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263085845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263085845">(Nov 30 2021 at 00:13)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a> from <code>isle-integration-docs</code> to <code>main</code>.</p>



<a name="263086722"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263086722" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263086722">(Nov 30 2021 at 00:24)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-818440819">PR review</a>.</p>



<a name="263086723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263086723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263086723">(Nov 30 2021 at 00:24)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r758837108">PR review comment</a>:</p>
<blockquote>
<p>I rewrote this paragraph a bit and broke it up with examples, as Chris suggested. Hope it is clearer now.</p>
<blockquote>
<p>It has me thinking, is there some way or mechanism to help prevent writing code that violates this no side effect rule? With the description of a side effect here it worries me that it will be easier to create bugs that are harder to track down.</p>
</blockquote>
<p>It's the same thing you have to deal with writing Rust code right now too. If you do</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">if</span><span class="w"> </span><span class="n">something_with_side_effects</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">foo</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">bar</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>the side effects of the condition aren't rolled back if you take the <code>bar();</code> branch.</p>
<p>Unfortunately, this isn't really something we can reason about in ISLE itself because all the things that could perform side effects are external Rust helpers.</p>
</blockquote>



<a name="263090099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263090099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263090099">(Nov 30 2021 at 01:02)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a> from <code>isle-integration-docs</code> to <code>main</code>.</p>



<a name="263091280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263091280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263091280">(Nov 30 2021 at 01:20)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-818467120">PR review</a>.</p>



<a name="263091281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263091281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263091281">(Nov 30 2021 at 01:20)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r758858143">PR review comment</a>:</p>
<blockquote>
<p>@fitzgen I think that the peephole (CLIF-to-CLIF) case is a separate design question with some interesting possibilities. The most natural approach (given our constraints) might actually be to send emitted instructions to a separate buffer (either a patch buffer on top of the IR with a later batch-update, or just emit new IR in a straight-through pass), in which case the Input and Output contexts are truly independent. That has the advantage of making the lowerings fine-grained-parallelizable as well. And it would allow us to move to a more VCode-like representation of "compact array of insts, no redirections or next/prev links" which is much more efficient to stream through. The downside is of course that it might take multiple passes to converge, but that's an effort-vs-quality tradeoff knob we can turn.</p>
<p>Anyway, that's a separate discussion (and one I'd love to dive into more!) but the relevance here is just to say "there's another way" :-)</p>
</blockquote>



<a name="263097574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263097574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263097574">(Nov 30 2021 at 03:16)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3556">PR #3556</a>.</p>



<a name="263181251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263181251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263181251">(Nov 30 2021 at 17:43)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-819361785">PR review</a>.</p>



<a name="263181252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263181252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263181252">(Nov 30 2021 at 17:43)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r759518302">PR review comment</a>:</p>
<blockquote>
<p>That would make it possible, yes. But it's also a lot further off than "porting simple preopt to ISLE" is, at least in my mind.</p>
</blockquote>



<a name="263186690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263186690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263186690">(Nov 30 2021 at 18:22)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#discussion_r759548074">PR review comment</a>:</p>
<blockquote>
<p>Hmm, interesting -- we should definitely talk design more here, I think. I'm somewhat uncomfortable with the idea of a pass that does in-place edits, or at least it's not what I had in mind when designing the DSL or when thinking about the pipeline-of-streaming-passes architecture that the new backends are built around. My main concern is that it would paint us into a corner (in terms of rules that we write) where we depend on the immediate availability of the result of an edit, and can't get out of this corner later when we want to do any sort of batch-update optimization (separate streaming passes, or parallelization, or anything like that).</p>
<p>I think that it actually may not be so bad to buffer new instructions at insertion points and "replace value X with value Y" actions. In my estimation probably not any more work than what it would take to build in-place editing glue; both seem like ~a few hundred lines of code, in my estimation.</p>
<p>Anyway, we've branched off the thread topic here, and this is the sort of architectural thing that probably merits at least an issue thread of discussion, so I'm happy to discuss more elsewhere when it comes time for this!</p>
</blockquote>



<a name="263186691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233556%20Add%20a%20document%20describing%20how%20ISLE%20is.../near/263186691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233556.20Add.20a.20document.20describing.20how.20ISLE.20is.2E.2E.2E.html#263186691">(Nov 30 2021 at 18:22)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3556#pullrequestreview-819403028">PR review</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>