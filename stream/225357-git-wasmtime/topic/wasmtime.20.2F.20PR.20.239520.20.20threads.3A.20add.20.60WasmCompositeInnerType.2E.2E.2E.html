<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9520  threads: add `WasmCompositeInnerType... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html">wasmtime / PR #9520  threads: add `WasmCompositeInnerType...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="479546158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479546158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479546158">(Oct 29 2024 at 19:04)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479546160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479546160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479546160">(Oct 29 2024 at 19:04)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a> from <code>abrown:composite-inner</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>As in <code>wasm-tools</code>, push the type down a layer so that <code>WasmCompositeType</code> can be marked shared. This leaves several holes to be filled in by future commits (all marked with <code>TODO: handle shared</code>); in effect, this change allows <code>WasmCompositeType</code> to be marked shared but mostly does not wire up the sharedness during translation.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="479546161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479546161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479546161">(Oct 29 2024 at 19:04)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479562288"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479562288" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479562288">(Oct 29 2024 at 20:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#issuecomment-2445294966">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api", "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="479704932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704932">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#pullrequestreview-2405249527">PR review</a>:</p>
<blockquote>
<p>I talked about this a bit with @abrown yesterday but I wanted to paste the conclusion here as well. My general worry as we propagate this up further is that it's accidentally easy to forget to check <code>.shared</code> which means that further down the road we might have a bug of "oh forgot to check <code>.shared</code> there". I'd prefer to continue to panic/error in variuos places where <code>shared</code> isn't handled today and I've commented a few of them here and there.</p>
</blockquote>



<a name="479704935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704935">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822828568">PR review comment</a>:</p>
<blockquote>
<p>This, and all other translation methods below, should I think return an error if the type is <code>shared</code> since we won't want to support that just yet.</p>
</blockquote>



<a name="479704936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704936">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822829553">PR review comment</a>:</p>
<blockquote>
<p>Like <code>gc/enabled.rs</code>, this and below will want to panic/error on <code>shared</code></p>
</blockquote>



<a name="479704937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704937">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822833265">PR review comment</a>:</p>
<blockquote>
<p>For this accessor and those below I think we'll want to implicitly redefine <code>is_func</code> as <code>is_unshared_func</code> (although without the renaming for now). Eventually if needed we can add <code>is_shared_func</code> but otherwise these should all get extra boolean conditions and such to check if <code>self.shared</code> and act appropriately (e.g. return <code>false</code>, <code>None</code>, or <code>panic!</code>)</p>
</blockquote>



<a name="479704938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704938">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822834142">PR review comment</a>:</p>
<blockquote>
<p>This I think we concluded might be able to be replaced with the trait helper method above.</p>
</blockquote>



<a name="479704939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704939">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822838296">PR review comment</a>:</p>
<blockquote>
<p>I think this is correct to have, this is basically pattern-matching to only unshared structures for <code>struct.new_default</code> which is desired behavior at this time. This panic can then get weeded out in the future once support for <code>struct.new_default</code> comes around.</p>
</blockquote>



<a name="479704941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704941">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822835814">PR review comment</a>:</p>
<blockquote>
<p>In this file I think it's fine to just set <code>shared: false</code> at the end. There'll be more plumbing eventually to handle this if needed but for now it's an accurate reflection that only unshared types are created here.</p>
</blockquote>



<a name="479704942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704942">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822830239">PR review comment</a>:</p>
<blockquote>
<p>I think we'll want to panic on <code>shared</code> here</p>
</blockquote>



<a name="479704944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704944">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822845780">PR review comment</a>:</p>
<blockquote>
<p>Here I think you'll want to propagate the shared-ness from <code>self.types[for_func_ty]</code> up above</p>
</blockquote>



<a name="479704946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704946">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822844615">PR review comment</a>:</p>
<blockquote>
<p>Could this, and the matches below, continue to assert that the type is not-<code>shared</code>? I think the end state we'll want here for now is to introduce <code>ConcreteShared{Array,Func,Struct}(...)</code> but that might be best to do in a follow-up</p>
</blockquote>



<a name="479704947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479704947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479704947">(Oct 30 2024 at 15:12)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1822841117">PR review comment</a>:</p>
<blockquote>
<p>I think this can probably be <code>sub_ty.composite_type.shared</code> to propagate the shared-ness?</p>
</blockquote>



<a name="479739711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479739711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479739711">(Oct 30 2024 at 18:16)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479739814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479739814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479739814">(Oct 30 2024 at 18:17)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479741629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479741629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479741629">(Oct 30 2024 at 18:29)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479741960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479741960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479741960">(Oct 30 2024 at 18:30)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479745519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479745519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479745519">(Oct 30 2024 at 18:53)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479745971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479745971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479745971">(Oct 30 2024 at 18:56)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479767632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479767632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479767632">(Oct 30 2024 at 21:29)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479769201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479769201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479769201">(Oct 30 2024 at 21:43)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479769959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479769959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479769959">(Oct 30 2024 at 21:50)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="479981581"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479981581" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479981581">(Nov 01 2024 at 01:25)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#pullrequestreview-2409330630">PR review</a>.</p>



<a name="479981582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479981582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479981582">(Nov 01 2024 at 01:25)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1825331638">PR review comment</a>:</p>
<blockquote>
<p>Did this sneak in? Or was this to fix something else?</p>
</blockquote>



<a name="479981583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/479981583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#479981583">(Nov 01 2024 at 01:25)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1825331750">PR review comment</a>:</p>
<blockquote>
<p>This line might be able to be deleted now?</p>
</blockquote>



<a name="480122343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480122343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480122343">(Nov 01 2024 at 21:48)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#pullrequestreview-2410924298">PR review</a>.</p>



<a name="480122344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480122344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480122344">(Nov 01 2024 at 21:48)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1826324690">PR review comment</a>:</p>
<blockquote>
<p>This was due to the refactor in 8445481; in order to get rid of the duplication there we need to add the disabled version of this trait in bbce595.</p>
</blockquote>



<a name="480133354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480133354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480133354">(Nov 02 2024 at 00:09)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="480134614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134614">(Nov 02 2024 at 00:29)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="480134864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134864">(Nov 02 2024 at 00:33)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#pullrequestreview-2411033869">PR review</a>.</p>



<a name="480134865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134865">(Nov 02 2024 at 00:33)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1826402349">PR review comment</a>:</p>
<blockquote>
<p>I ended up removing the refactor we used in this PR. Though indeed we could have done <code>gc_runtime.map(...).flatten()</code> and ended up with the same result, I'm concerned that @fitzgen probably is using these <code>expect</code>s as an early warning sign for winch, e.g.</p>
</blockquote>



<a name="480134938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134938">(Nov 02 2024 at 00:34)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#pullrequestreview-2411034052">PR review</a>.</p>



<a name="480134939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134939">(Nov 02 2024 at 00:34)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/9520#discussion_r1826402501">PR review comment</a>:</p>
<blockquote>
<p>This is now gone as a result of fixing conflicts; some intervening commit started using an <code>Option</code> to solve this.</p>
</blockquote>



<a name="480134945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480134945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480134945">(Nov 02 2024 at 00:35)</a>:</h4>
<p>abrown has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<a name="480136086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239520%20%20threads%3A%20add%20%60WasmCompositeInnerType.../near/480136086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239520.20.20threads.3A.20add.20.60WasmCompositeInnerType.2E.2E.2E.html#480136086">(Nov 02 2024 at 00:54)</a>:</h4>
<p>abrown merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9520">PR #9520</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>