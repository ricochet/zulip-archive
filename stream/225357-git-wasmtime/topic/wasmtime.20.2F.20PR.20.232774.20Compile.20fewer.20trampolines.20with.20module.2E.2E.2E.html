<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2774 Compile fewer trampolines with module... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232774.20Compile.20fewer.20trampolines.20with.20module.2E.2E.2E.html">wasmtime / PR #2774 Compile fewer trampolines with module...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="231873767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232774%20Compile%20fewer%20trampolines%20with%20module.../near/231873767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232774.20Compile.20fewer.20trampolines.20with.20module.2E.2E.2E.html#231873767">(Mar 25 2021 at 20:48)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2774">PR #2774</a> from <code>compile-fewer-trampolines</code> to <code>main</code>:</p>
<blockquote>
<p>Previously each module in a module-linking-using-module would compile<br>
all the trampolines for all signatures for all modules. In forest-like<br>
situations with lots of modules this would cause quite a few trampolines<br>
to get compiled. The original intention was to have one global list of<br>
trampolines for all modules in the module-linking graph that they could<br>
all share. With the current design of module linking, however, the<br>
intention is for modules to be relatively isolated from one another<br>
which would make achieving this difficult.</p>
<p>In lieu of total sharing (which would be good for the global scope<br>
anyway but we also don't do that right now) this commit implements an<br>
alternative strategy where each module simply compiles its own<br>
trampolines that it itself can reach. This should mean that<br>
module-linking modules behave more similarly to standalone modules in<br>
terms of trampoline duplication. If we ever do global trampoline<br>
deduplication we can likely batch this all together into one, but for<br>
now this should fix the performance issues seen in fuzzing.</p>
<p>Closes #2525<br>
</p>
</blockquote>



<a name="231877511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232774%20Compile%20fewer%20trampolines%20with%20module.../near/231877511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232774.20Compile.20fewer.20trampolines.20with.20module.2E.2E.2E.html#231877511">(Mar 25 2021 at 21:16)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2774#pullrequestreview-621586654">PR Review</a>.</p>



<a name="231895740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232774%20Compile%20fewer%20trampolines%20with%20module.../near/231895740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232774.20Compile.20fewer.20trampolines.20with.20module.2E.2E.2E.html#231895740">(Mar 26 2021 at 00:11)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2774">PR #2774</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>