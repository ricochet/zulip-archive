<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5036 cranelift: Support `bnot`, `band`, `b... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html">wasmtime / PR #5036 cranelift: Support `bnot`, `band`, `b...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="303345033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/303345033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#303345033">(Oct 11 2022 at 00:55)</a>:</h4>
<p>ArtBlnd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
<p>This patch implements float bitops on x86_64 using SSE instructions.<br>
@afonso360 </p>
<ul>
<li>[x] Check if better single slot bitops available on x86_64. (which has better latency or throughput?...) </li>
<li>[ ] Make single slot mask for <code>f32</code>, <code>f64</code> instead of <code>vector_all_ones</code></li>
</ul>
</blockquote>



<a name="304565010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/304565010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#304565010">(Oct 17 2022 at 21:48)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1144850219">PR review</a>.</p>



<a name="305570328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305570328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305570328">(Oct 22 2022 at 18:52)</a>:</h4>
<p><strong>ArtBlnd</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> as ready for review.</p>



<a name="305570330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305570330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305570330">(Oct 22 2022 at 18:52)</a>:</h4>
<p>ArtBlnd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
<p>This patch implements float bitops on x86_64 using SSE instructions.<br>
@afonso360 </p>
<ul>
<li>[x] Check if better single slot bitops available on x86_64. (which has better latency or throughput?...) </li>
<li>[x] Make single slot mask for <code>f32</code>, <code>f64</code> instead of <code>vector_all_ones</code></li>
</ul>
</blockquote>



<a name="305572447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305572447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305572447">(Oct 22 2022 at 19:07)</a>:</h4>
<p>ArtBlnd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>.</p>



<a name="305850375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305850375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305850375">(Oct 24 2022 at 15:48)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1153358712">PR review</a>.</p>



<a name="305850376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305850376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305850376">(Oct 24 2022 at 15:48)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1003465088">PR review comment</a>:</p>
<blockquote>
<p>Same comment here and below.</p>
</blockquote>



<a name="305850379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305850379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305850379">(Oct 24 2022 at 15:48)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1003463992">PR review comment</a>:</p>
<blockquote>
<p>We should probably use the same <code>if</code> syntax here for consistency...</p>
</blockquote>



<a name="305850380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305850380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305850380">(Oct 24 2022 at 15:48)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1003477637">PR review comment</a>:</p>
<blockquote>
<p>I think it might be preferable to use <code>ANDNPS</code> here: <code>AND</code>-ing the register to itself keeps the same bits in place and the <code>NOT</code> part will do what we want it to do. That way we avoid an extra <code>PCMPEQ*</code> due to the <code>vector_all_ones</code>.</p>
</blockquote>



<a name="305850385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/305850385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#305850385">(Oct 24 2022 at 15:48)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1153358712">PR review</a>.</p>



<a name="307649470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307649470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307649470">(Nov 03 2022 at 02:54)</a>:</h4>
<p>ArtBlnd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>.</p>



<a name="307649510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307649510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307649510">(Nov 03 2022 at 02:55)</a>:</h4>
<p>ArtBlnd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1166224482">PR review</a>.</p>



<a name="307649511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307649511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307649511">(Nov 03 2022 at 02:55)</a>:</h4>
<p>ArtBlnd created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1012455180">PR review comment</a>:</p>
<blockquote>
<p>I am not sure we have to make mask for xor or and after xor. also why than our eq tests does not fail because of side-effects?</p>
</blockquote>



<a name="307649968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307649968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307649968">(Nov 03 2022 at 03:03)</a>:</h4>
<p>ArtBlnd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1012455180">PR review comment</a>.</p>



<a name="307656412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307656412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307656412">(Nov 03 2022 at 04:37)</a>:</h4>
<p>ArtBlnd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>.</p>



<a name="307657365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307657365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307657365">(Nov 03 2022 at 04:52)</a>:</h4>
<p>ArtBlnd created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1012492780">PR review comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">  </span><span class="n">src</span><span class="err">\</span><span class="n">isa</span><span class="err">\</span><span class="n">x64</span><span class="err">\</span><span class="n">lower</span><span class="p">.</span><span class="n">isle</span>:<span class="mi">275</span>:<span class="mi">3</span>: <span class="nc">type</span><span class="w"> </span><span class="n">error</span>: <span class="nc">Used</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">pure</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="o">'</span><span class="na">ty_scalar_float</span><span class="o">'</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">context</span><span class="w"></span>
<span class="w">  </span><span class="n">src</span><span class="err">\</span><span class="n">isa</span><span class="err">\</span><span class="n">x64</span><span class="err">\</span><span class="n">lower</span><span class="p">.</span><span class="n">isle</span>:<span class="mi">337</span>:<span class="mi">3</span>: <span class="nc">type</span><span class="w"> </span><span class="n">error</span>: <span class="nc">Used</span><span class="w"> </span><span class="n">non</span><span class="o">-</span><span class="n">pure</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="o">'</span><span class="na">ty_scalar_float</span><span class="o">'</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">pure</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="n">context</span><span class="w"></span>
<span class="w">  </span><span class="err">```</span><span class="w"></span>

<span class="w">  </span><span class="err">```</span><span class="w"></span>
<span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">ty_scalar_float</span><span class="w"> </span><span class="p">(</span><span class="n">Type</span><span class="p">)</span><span class="w"> </span><span class="n">Type</span><span class="p">)</span><span class="w"></span>
<span class="p">(</span><span class="k">extern</span><span class="w"> </span><span class="n">extractor</span><span class="w"> </span><span class="n">ty_scalar_float</span><span class="w"> </span><span class="n">ty_scalar_float</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>I don't think this is possible now. It should be separate to other patch.</p>
</blockquote>



<a name="307657366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307657366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307657366">(Nov 03 2022 at 04:52)</a>:</h4>
<p>ArtBlnd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1166275202">PR review</a>.</p>



<a name="307657550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307657550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307657550">(Nov 03 2022 at 04:55)</a>:</h4>
<p>ArtBlnd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>.</p>



<a name="307861656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307861656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307861656">(Nov 04 2022 at 00:03)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1167796030">PR review</a>.</p>



<a name="307861657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307861657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307861657">(Nov 04 2022 at 00:03)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1013498531">PR review comment</a>:</p>
<blockquote>
<p>Can you re-phrase your question? I'm not sure exactly what you mean...</p>
</blockquote>



<a name="307873916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307873916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307873916">(Nov 04 2022 at 02:33)</a>:</h4>
<p>ArtBlnd created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1013549915">PR review comment</a>:</p>
<blockquote>
<p>Oh... I misunderstood. just nevermind.</p>
</blockquote>



<a name="307873917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307873917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307873917">(Nov 04 2022 at 02:33)</a>:</h4>
<p>ArtBlnd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1167862047">PR review</a>.</p>



<a name="307873925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/307873925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#307873925">(Nov 04 2022 at 02:33)</a>:</h4>
<p>ArtBlnd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1013549915">PR review comment</a>.</p>



<a name="308704349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308704349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308704349">(Nov 09 2022 at 01:56)</a>:</h4>
<p>ArtBlnd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1173137529">PR review</a>.</p>



<a name="308704350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308704350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308704350">(Nov 09 2022 at 01:56)</a>:</h4>
<p>ArtBlnd created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1017322924">PR review comment</a>:</p>
<blockquote>
<p>I don't think this works. the and<code>not</code> will negative the float value itself. here is result.</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="nc">Failed</span><span class="w"> </span><span class="n">test</span>: <span class="nc">run</span>: <span class="o">%</span><span class="n">bnot_f32</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="n">NaN</span>:<span class="mh">0x3fffff</span><span class="p">,</span><span class="w"> </span><span class="n">actual</span>: <span class="mf">0.0</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="308704426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308704426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308704426">(Nov 09 2022 at 01:57)</a>:</h4>
<p>ArtBlnd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1173138526">PR review</a>.</p>



<a name="308704427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308704427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308704427">(Nov 09 2022 at 01:57)</a>:</h4>
<p>ArtBlnd created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1017323693">PR review comment</a>:</p>
<blockquote>
<p>You can check over here <a href="https://www.felixcloutier.com/x86/andnps#andnps--128-bit-legacy-sse-version-">https://www.felixcloutier.com/x86/andnps#andnps--128-bit-legacy-sse-version-</a></p>
</blockquote>



<a name="308894107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308894107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308894107">(Nov 09 2022 at 23:33)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1174889964">PR review</a>.</p>



<a name="308894108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308894108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308894108">(Nov 09 2022 at 23:33)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#discussion_r1018511931">PR review comment</a>:</p>
<blockquote>
<p>Oh, you're right! The NOT happens before the AND. Sorry for the distraction, let me take one more look at everything else...</p>
</blockquote>



<a name="308894304"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/308894304" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#308894304">(Nov 09 2022 at 23:35)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5036#pullrequestreview-1174891382">PR review</a>.</p>



<a name="310744934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/310744934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#310744934">(Nov 18 2022 at 04:05)</a>:</h4>
<p>ArtBlnd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a> from <code>x86_64-float-bitops1</code> to <code>main</code>.</p>



<a name="310850601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235036%20cranelift%3A%20Support%20%60bnot%60%2C%20%60band%60%2C%20%60b.../near/310850601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235036.20cranelift.3A.20Support.20.60bnot.60.2C.20.60band.60.2C.20.60b.2E.2E.2E.html#310850601">(Nov 18 2022 at 15:45)</a>:</h4>
<p>abrown merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5036">PR #5036</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>