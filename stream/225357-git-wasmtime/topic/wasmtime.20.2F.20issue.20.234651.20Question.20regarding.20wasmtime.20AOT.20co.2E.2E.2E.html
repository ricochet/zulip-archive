<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4651 Question regarding wasmtime AOT co... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html">wasmtime / issue #4651 Question regarding wasmtime AOT co...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="292525621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292525621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292525621">(Aug 09 2022 at 04:29)</a>:</h4>
<p>wilsonwang371 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<p>Hi all,</p>
<p>I was running AOT code using wasmtime. However, my code generated a HeapOutOfBound trap and I need to find the root cause of this issue.</p>
<p>Currently, all that I can get is the AOT module &amp; function line numbers information from which I can find out the original wasm module offset. However, I could not extract any more useful information. Is there any tips or suggestions about how to get more information out of the WASM state at the time of the trap?</p>
<p>Thanks</p>
</blockquote>



<a name="292589054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292589054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292589054">(Aug 09 2022 at 14:28)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4651#issuecomment-1209456310">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<p>Whether or not the <code>*.wasm</code> is AOT compiled in theory shouldn't matter here. Wasmtime should be able to report the WebAssembly file offset of the trapping instruction, and if the original source module is compiled with debuginfo enabled in the <code>*.wasm</code> (this is distinct from debuginfo support in Wasmtime which is different) then Wasmtime should also print a backtrace on the trap with filenames/line numbers.</p>
<p>If you're not seeing this, though, could you compile the original  <code>*.wasm</code> file with debug information?</p>
</blockquote>



<a name="292813980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292813980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292813980">(Aug 10 2022 at 18:58)</a>:</h4>
<p>wilsonwang371 <a href="https://github.com/bytecodealliance/wasmtime/issues/4651#issuecomment-1211134631">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<blockquote>
<p>Whether or not the <code>*.wasm</code> is AOT compiled in theory shouldn't matter here. Wasmtime should be able to report the WebAssembly file offset of the trapping instruction, and if the original source module is compiled with debuginfo enabled in the <code>*.wasm</code> (this is distinct from debuginfo support in Wasmtime which is different) then Wasmtime should also print a backtrace on the trap with filenames/line numbers.</p>
<p>If you're not seeing this, though, could you compile the original <code>*.wasm</code> file with debug information?</p>
</blockquote>
<p>Hi Alex, thanks for reply. I found where the issue is. But I need to access the VM state(example, the stack top pointer and other related data values) to get a better understanding of why it is happening. Is there any way or is there any example code for me to follow?</p>
<p>Thanks</p>
</blockquote>



<a name="292814961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292814961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292814961">(Aug 10 2022 at 19:03)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/4651#issuecomment-1211139875">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<p>Do you mean the native stack pointer (this is stored in the same register as always), the emulated stack pointer of the wasm module (stored in a wasm global, which you can access through the vmcontext, which in turn is the last argument for function calls) or something else?</p>
</blockquote>



<a name="292876338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292876338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292876338">(Aug 11 2022 at 06:59)</a>:</h4>
<p>wilsonwang371 <a href="https://github.com/bytecodealliance/wasmtime/issues/4651#issuecomment-1211618495">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<blockquote>
<p>Do you mean the native stack pointer (this is stored in the same register as always), the emulated stack pointer of the wasm module (stored in a wasm global, which you can access through the vmcontext, which in turn is the last argument for function calls) or something else?</p>
</blockquote>
<p>I mean the emulated stack pointer of wasm module. Yes. The vmcontext. How do i print them? Can you point out the place of the code that can help me print out the wasm module vmcontext when trap happens?</p>
</blockquote>



<a name="292876857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/292876857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#292876857">(Aug 11 2022 at 07:04)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/4651#issuecomment-1211622507">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<p>We don't currently generate debuginfo for this AFAIK, so you will have to manually locate where the vmcontext pointer is stored and at what offset in the vmcontext the global value is stored I think.</p>
</blockquote>



<a name="293938751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234651%20Question%20regarding%20wasmtime%20AOT%20co.../near/293938751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234651.20Question.20regarding.20wasmtime.20AOT.20co.2E.2E.2E.html#293938751">(Aug 17 2022 at 17:06)</a>:</h4>
<p>wilsonwang371 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4651">issue #4651</a>:</p>
<blockquote>
<p>Hi all,</p>
<p>I was running AOT code using wasmtime. However, my code generated a HeapOutOfBound trap and I need to find the root cause of this issue.</p>
<p>Currently, all that I can get is the AOT module &amp; function line numbers information from which I can find out the original wasm module offset. However, I could not extract any more useful information. Is there any tips or suggestions about how to get more information out of the WASM state at the time of the trap?</p>
<p>Thanks</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>