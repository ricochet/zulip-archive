<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2822 Introduce a new API that allows no... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html">wasmtime / Issue #2822 Introduce a new API that allows no...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="233829749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232822%20Introduce%20a%20new%20API%20that%20allows%20no.../near/233829749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html#233829749">(Apr 09 2021 at 14:25)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/2822#issuecomment-816721250">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2822">Issue #2822</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="233987369"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232822%20Introduce%20a%20new%20API%20that%20allows%20no.../near/233987369" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html#233987369">(Apr 10 2021 at 21:03)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2822#issuecomment-817201826">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2822">Issue #2822</a>:</p>
<blockquote>
<p>I wonder if we should be invoking <code>init_traps</code> automatically when we're about to resume a fiber inside of the async machinery just in case the future moved threads. It would reduce the use case of this to only times when users explicitly move a <code>Store</code> and related components to another thread.</p>
</blockquote>



<a name="234120429"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232822%20Introduce%20a%20new%20API%20that%20allows%20no.../near/234120429" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html#234120429">(Apr 12 2021 at 08:17)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/pull/2822#issuecomment-817595687">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2822">Issue #2822</a>:</p>
<blockquote>
<p>It's a good point, and in fact it's already done automatically by wasmtime after resuming from a suspended fiber: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/runtime/src/traphandlers.rs#L436">https://github.com/bytecodealliance/wasmtime/blob/main/crates/runtime/src/traphandlers.rs#L436</a></p>
<p>Your remark makes me notice that this new API would also create a double standard: the runtime may automatically manage switching to a different thread in one case (async import causing wasm execution resuming on a different thread) when in another case one has to explicitly call the new API. The ubiquity of multithreaded future executors makes it justified in my opinion, but that's open to discussion!</p>
</blockquote>



<a name="234681063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232822%20Introduce%20a%20new%20API%20that%20allows%20no.../near/234681063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html#234681063">(Apr 15 2021 at 14:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2822#issuecomment-820447586">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2822">Issue #2822</a>:</p>
<blockquote>
<p>Thanks for this! I agree that it's a little odd that this might automatically happen as part of a future execution but then it doesn't automatically happen otherwise, but I agree that it's probably ok for now. Can you add documentation about this function on the multithreading page and also link the documentation on this function to the multithreading page?</p>
</blockquote>



<a name="234813113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232822%20Introduce%20a%20new%20API%20that%20allows%20no.../near/234813113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232822.20Introduce.20a.20new.20API.20that.20allows.20no.2E.2E.2E.html#234813113">(Apr 16 2021 at 08:15)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/pull/2822#issuecomment-821004712">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2822">Issue #2822</a>:</p>
<blockquote>
<p>Done, thanks!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>