<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3740 Add workflow to test perf using sight... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html">wasmtime / PR #3740 Add workflow to test perf using sight...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="269800844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269800844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269800844">(Jan 28 2022 at 20:53)</a>:</h4>
<p>jlb6740 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a> from <code>add-sightglass-perf-actions</code> to <code>main</code>:</p>
<blockquote>
<p>This is a workflow intended to run sightglass on a self-hosted runner. <br>
</p>
</blockquote>



<a name="269801666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269801666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269801666">(Jan 28 2022 at 21:00)</a>:</h4>
<p>jlb6740 closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a>.</p>



<a name="269814036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269814036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269814036">(Jan 28 2022 at 22:48)</a>:</h4>
<p>jlb6740 reopened <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a> from <code>add-sightglass-perf-actions</code> to <code>main</code>.</p>



<a name="269816982"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269816982" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269816982">(Jan 28 2022 at 23:18)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a> from <code>add-sightglass-perf-actions</code> to <code>main</code>.</p>



<a name="269830138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269830138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269830138">(Jan 29 2022 at 02:09)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a> from <code>add-sightglass-perf-actions</code> to <code>main</code>.</p>



<a name="269832555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/269832555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#269832555">(Jan 29 2022 at 02:54)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a> from <code>add-sightglass-perf-actions</code> to <code>main</code>.</p>



<a name="270053372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053372">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868044912">PR review</a>.</p>



<a name="270053373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053373">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868044912">PR review</a>.</p>



<a name="270053375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053375">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795804903">PR review comment</a>:</p>
<blockquote>
<p>When a push to <code>main</code> happens I think this'll double-checkout main and build it twice?</p>
<p>Ideally though it'd be awesome if we could do just one build as part of this PR and use stored data for previous runs perhaps for comparison. We should be guaranteed that all commits on <code>main</code> have performance information so comparing a new merge to main or a PR is ideally just about picking the revision to compare against.</p>
</blockquote>



<a name="270053376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053376">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795801851">PR review comment</a>:</p>
<blockquote>
<p>I think we'll want to confirm the security story here before merging this. Unfortunately hooking up hosted runners to public repos is explicitly recommended against in the github actions documentation because it becomes pretty easy to run arbitrary code on these hosted runners from external contributors via PRs. I think there's various measures we could put in place to mitigate that but we'll want to make sure that's all in order before having this all hooked up.</p>
</blockquote>



<a name="270053377"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053377" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053377">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795802414">PR review comment</a>:</p>
<blockquote>
<p>Is it possible to use the <code>main</code> branch of sightglass? (unsure if this is largely for testing or whether it's intended that we periodically update this)</p>
</blockquote>



<a name="270053378"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053378" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053378">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795806564">PR review comment</a>:</p>
<blockquote>
<p>I think we might be able to detect this with various env vars set on github actions for prs?</p>
</blockquote>



<a name="270053379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053379">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795805483">PR review comment</a>:</p>
<blockquote>
<p>Personally I'd prefer to keep the usage of external actions to a minimum for the wasmtime repo, so here if we can arrange for rustup to be installed on the hosted runner this I think could be <code>rustup update stable &amp;&amp; rustup default stable</code></p>
</blockquote>



<a name="270053380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270053380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270053380">(Jan 31 2022 at 15:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795808503">PR review comment</a>:</p>
<blockquote>
<p>Although if not my main concern about using third-party actions is the security implications. AFAIK we're largely giving all these actions read/write access to the wasmtime repo so a push to this jwalton/gh-find-current-pr repo could end up compromising us. </p>
<p>One way to mitigate this perhaps would be to run this workflow in a separate repository that is triggered from this repository (or something like that). That way if our other repository gets messed up it's not the end of the world.</p>
</blockquote>



<a name="270078831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270078831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270078831">(Jan 31 2022 at 18:18)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795942965">PR review comment</a>:</p>
<blockquote>
<p>I think there is some mechanism for generating/confirming with tokens that may be what we want. I don't believe I use that here as I was just following the github doc for a basic setup but it is something I'll look into. Also, since you highlighted the on: push/pull_request, note I want to change this to be on comment .. where the trigger occurs on a comment with the string /bench_x64 or something like that. </p>
</blockquote>



<a name="270078832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270078832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270078832">(Jan 31 2022 at 18:18)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868248275">PR review</a>.</p>



<a name="270079109"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270079109" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270079109">(Jan 31 2022 at 18:20)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868249895">PR review</a>.</p>



<a name="270079110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270079110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270079110">(Jan 31 2022 at 18:20)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795944161">PR review comment</a>:</p>
<blockquote>
<p>This is a ref from the main branch of sightglas .. it's actually HEAD as of today. However I wanted to talk about versioning with sightglass so as to be more transparent about what we are using to run tests.</p>
</blockquote>



<a name="270081301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270081301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270081301">(Jan 31 2022 at 18:34)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868264683">PR review</a>.</p>



<a name="270081302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270081302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270081302">(Jan 31 2022 at 18:34)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795954970">PR review comment</a>:</p>
<blockquote>
<p>To be honest, I think there is some caching that is taking place via this github code that lives on the server. I do though the blast the sightglass directory and rebuild that. I don't blast the wasmtime directories but at some point during developing this it seemed those directories were removed but then very quickly rebuilt by the environment, implying to me that something was cached. </p>
<p>This iteration doesn't actually test against much of anything (that will be critiqued for improvement), but as a result this entire process from start to finish only takes about 4-1/2 minutes, so even if everything is rebuilt it currently really doesn't take that long. Also like I mentioned above (and suggested offline), I want this to only run on demand not after every PR is submitted or updated. For this patch, I wanted to have something that was for sure going to work every time and then get fancy with the caching and other efficiency improvements on a future iteration. If there is something obvious to change now though, lets do it.</p>
</blockquote>



<a name="270089751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270089751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270089751">(Jan 31 2022 at 19:24)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-868320025">PR review</a>.</p>



<a name="270089753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270089753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270089753">(Jan 31 2022 at 19:24)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r795992860">PR review comment</a>:</p>
<blockquote>
<p>I think we can get away with not using this findPr or other third-party actions which I'll try to do. That said, when you say "AFAIK we're largely giving all these actions read/write access to the wasmtime repo so a push to this jwalton/gh-find-current-pr repo could end up compromising us." do you mean read/write access to just the downloaded wasmtime repository that is housed on the remote server or are you thinking access to the wasmtime repository as it lives in github? </p>
</blockquote>



<a name="270282813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270282813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270282813">(Feb 01 2022 at 20:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-869810682">PR review</a>.</p>



<a name="270282814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270282814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270282814">(Feb 01 2022 at 20:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r797003316">PR review comment</a>:</p>
<blockquote>
<p>One thing I'd be worried about is that once we have a custom runner hooked up any contributor can make a PR with a new workflow file to run on all PRs which uses the custom runner which I think means we basically don't have any ability to limit what runs on the runner unless we can hard configure it to ignore PRs entirely (or something like that)</p>
</blockquote>



<a name="270282976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270282976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270282976">(Feb 01 2022 at 20:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-869811494">PR review</a>.</p>



<a name="270282977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270282977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270282977">(Feb 01 2022 at 20:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r797004198">PR review comment</a>:</p>
<blockquote>
<p>Ah ok if it's fast enough then seems reasonable to at least start with this and we can alter later if it ever becomes necessary</p>
</blockquote>



<a name="270283108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270283108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270283108">(Feb 01 2022 at 20:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-869812390">PR review</a>.</p>



<a name="270283110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/270283110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#270283110">(Feb 01 2022 at 20:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r797005107">PR review comment</a>:</p>
<blockquote>
<p>I believe that workflows generally get read/write tokens to the bytecodealliance/wasmtime repository that lives on github, so I'm under the impression that a malicious workflow could compromise big chunks of the source code and repo</p>
</blockquote>



<a name="271045535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/271045535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#271045535">(Feb 07 2022 at 21:38)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-875276020">PR review</a>.</p>



<a name="271045536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/271045536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#271045536">(Feb 07 2022 at 21:38)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r801079933">PR review comment</a>:</p>
<blockquote>
<p>This was discussed today and I think the solution is to just only allow to have the privileges to run. Anyone else can run what this is running offline before committing. I will look into a way to have this be triggered via a comment (which I already have but need to work out a wrinkle) and then look to see if we can discover the author of that comment to allow running of the code based on that comment author.</p>
</blockquote>



<a name="271149324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/271149324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#271149324">(Feb 08 2022 at 16:01)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#pullrequestreview-876267512">PR review</a>.</p>



<a name="271149325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/271149325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#271149325">(Feb 08 2022 at 16:01)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3740#discussion_r801796336">PR review comment</a>:</p>
<blockquote>
<p>FWIW I'm mostly <a href="https://docs.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners#self-hosted-runner-security">parroting this</a> which says:</p>
<blockquote>
<p>We recommend that you only use self-hosted runners with private repositories</p>
</blockquote>
<p>and <a href="https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions#hardening-for-self-hosted-runners">this</a></p>
<blockquote>
<p>As a result, self-hosted runners should almost <a href="https://docs.github.com/en/actions/hosting-your-own-runners/about-self-hosted-runners#self-hosted-runner-security-with-public-repositories">never be used for public repositories</a> on GitHub</p>
</blockquote>
<p>I don't know why the "almost" is there, though.</p>
</blockquote>



<a name="289220165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233740%20Add%20workflow%20to%20test%20perf%20using%20sight.../near/289220165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233740.20Add.20workflow.20to.20test.20perf.20using.20sight.2E.2E.2E.html#289220165">(Jul 11 2022 at 16:56)</a>:</h4>
<p>fitzgen closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/3740">PR #3740</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>