<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8622 wasmtime: Introduce the `test-macros`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html">wasmtime / PR #8622 wasmtime: Introduce the `test-macros`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="438684143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438684143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438684143">(May 15 2024 at 00:12)</a>:</h4>
<p>saulecabrera opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a> from <code>saulecabrera:add-test-macros</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit introduces the <code>test-macros</code> crate. The whole idea behind this crate is to export a single or multiple macros to make it easier to configure Wasmtime for integration tests. The main use-case at this time, is running a subset of the integration tests with Cranelift and Winch. This crate could be extended to serve other use-cases, like testing pooling allocator and/or GC configurations.  </p>
<p>This commit introduces a single example of how this macro could be used. If there's agreement on merging this change in some shape or form, I'll follow up with migrating the current tests to use <code>#[wasmtime_test]</code> where applicable. </p>
<p>Part of what's implemented in this PR was discussed in Cranelift's meeting on <a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2024/cranelift-04-24.md">April 24th, 2024</a>, however there are several discussion points that are still "in the air", like for example, what's the best way to avoid the combinatorial explosion problem for the potential test matrix.</p>
<p>-- </p>
<p>cc/ @alexcrichton @fitzgen I'm opening this a draft, but feel free to leave any feedback according the discussion in the Cranelift meeting. I'm a bit concerned because I don't really have a good answer to the combinatorial problem of the test matrix, at least initially I suspect this won't be an issue necessarily, but if this macro grows in functionality I think it might be a problem. </p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="438684375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438684375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438684375">(May 15 2024 at 00:14)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438684562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438684562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438684562">(May 15 2024 at 00:16)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>:</p>
<blockquote>
<p>This commit introduces the <code>test-macros</code> crate. The whole idea behind this crate is to export a single or multiple macros to make it easier to configure Wasmtime for integration tests. The main use-case at this time, is <a href="https://github.com/bytecodealliance/wasmtime/issues/8092">running a subset of the integration tests with Cranelift and Winch</a>. This crate could be extended to serve other use-cases, like testing pooling allocator and/or GC configurations.  </p>
<p>This commit introduces a single example of how this macro could be used. If there's agreement on merging this change in some shape or form, I'll follow up with migrating the current tests to use <code>#[wasmtime_test]</code> where applicable. </p>
<p>Part of what's implemented in this PR was discussed in Cranelift's meeting on <a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2024/cranelift-04-24.md">April 24th, 2024</a>, however there are several discussion points that are still "in the air", like for example, what's the best way to avoid the combinatorial explosion problem for the potential test matrix.</p>
<p>-- </p>
<p>cc/ @alexcrichton @fitzgen I'm opening this a draft, but feel free to leave any feedback according the discussion in the Cranelift meeting. I'm a bit concerned because I don't really have a good answer to the combinatorial problem of the test matrix, at least initially I suspect this won't be an issue necessarily, but if this macro grows in functionality I think it might be a problem. </p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="438772513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438772513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438772513">(May 15 2024 at 10:36)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438772842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438772842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438772842">(May 15 2024 at 10:38)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438773031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438773031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438773031">(May 15 2024 at 10:39)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438784503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438784503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438784503">(May 15 2024 at 11:52)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438789388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438789388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438789388">(May 15 2024 at 12:22)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="438828694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438828694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438828694">(May 15 2024 at 15:18)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#issuecomment-2112838940">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>:</p>
<blockquote>
<p>Excited for this! Will take a look today</p>
</blockquote>



<a name="438851863"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851863" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851863">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2058337879">PR review</a>.</p>



<a name="438851864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851864">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2058337879">PR review</a>.</p>



<a name="438851865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851865">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1601999634">PR review comment</a>:</p>
<blockquote>
<p>I might recommend replacing <code>strategies</code> with something like <code>config: TestConfig</code> which internally has <code>Vec&lt;(String,Ident)&gt;</code> or similar to make this more easily growable in the future to multiple configuration options.</p>
</blockquote>



<a name="438851866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851866">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1601838816">PR review comment</a>:</p>
<blockquote>
<p>Mind also adding <code>publish = false</code> here? (may also require changes to <code>publish.rs</code>, I sort of forget)</p>
<p>Also, to handle the clippy issues on CI you can add:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[lints]</span>
<span class="n">workspace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<p>to inherit the defaults of the workspace which allows clippy lints by default.</p>
</blockquote>



<a name="438851867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851867">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1601998852">PR review comment</a>:</p>
<blockquote>
<p>One possible concern about <code>ItemFn</code> here is that in the limit the entire test crate will be tagged with <code>#[wasmtime_test]</code> and that means the entire crate is parsed through <code>syn</code> and emitted back out. Technically the only needed part here is the function signature. </p>
<p>I'm not sure if it's worth it, but this could try to be a bit clever where it parses <code>syn::ItemFn</code> manually up to the <code>block</code> and then keeps the <code>block</code> as an opaque <code>TokenStream</code> (since it's known that it's brace-delimited anyway). </p>
</blockquote>



<a name="438851868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438851868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438851868">(May 15 2024 at 17:19)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1601992072">PR review comment</a>:</p>
<blockquote>
<p>It might be good to replace this with <a href="https://docs.rs/syn/latest/syn/meta/struct.ParseNestedMeta.html#method.parse_nested_meta"><code>parse_nested_meta</code></a> perhaps?</p>
</blockquote>



<a name="438859968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438859968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438859968">(May 15 2024 at 18:08)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2058562689">PR review</a>:</p>
<blockquote>
<p>Definitely going in a good direction!</p>
</blockquote>



<a name="438859969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438859969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438859969">(May 15 2024 at 18:08)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2058562689">PR review</a>:</p>
<blockquote>
<p>Definitely going in a good direction!</p>
</blockquote>



<a name="438859970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438859970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438859970">(May 15 2024 at 18:08)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1601976038">PR review comment</a>:</p>
<blockquote>
<p>This shouldn't be necessary because a crate in the workspace depends on this crate.</p>
</blockquote>



<a name="438859974"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/438859974" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#438859974">(May 15 2024 at 18:08)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1602056184">PR review comment</a>:</p>
<blockquote>
<p>Yep, this is exactly what I was imagining usage would look like <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="440561723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561723">(May 24 2024 at 18:54)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="440561748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561748">(May 24 2024 at 18:54)</a>:</h4>
<p><strong>saulecabrera</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a> as ready for review.</p>



<a name="440561750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561750">(May 24 2024 at 18:54)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="440561751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561751">(May 24 2024 at 18:54)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="440561752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561752">(May 24 2024 at 18:54)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="440561775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561775">(May 24 2024 at 18:54)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2077640705">PR review</a>.</p>



<a name="440561777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561777">(May 24 2024 at 18:54)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613892532">PR review comment</a>:</p>
<blockquote>
<p>Done, thanks!</p>
</blockquote>



<a name="440561795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561795">(May 24 2024 at 18:54)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2077640928">PR review</a>.</p>



<a name="440561797"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561797" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561797">(May 24 2024 at 18:54)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613892721">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="440561891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561891">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2077642064">PR review</a>.</p>



<a name="440561892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561892">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613893461">PR review comment</a>:</p>
<blockquote>
<p>Good point. Took me a bit to figure out, but I was able to make this idea work by introduce a partial function parser as per your suggestion. Let me know what you think!</p>
</blockquote>



<a name="440561905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561905">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2077642434">PR review</a>.</p>



<a name="440561907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561907">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613893611">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="440561933"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561933" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561933">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2077642745">PR review</a>.</p>



<a name="440561935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440561935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440561935">(May 24 2024 at 18:55)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613893779">PR review comment</a>:</p>
<blockquote>
<p>Done, thanks!</p>
</blockquote>



<a name="440562072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440562072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440562072">(May 24 2024 at 18:56)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#issuecomment-2130176127">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>:</p>
<blockquote>
<p>Thanks for the review Alex and Nick. I've addressed all the comments, I think this is ready for another round of reviews. </p>
</blockquote>



<a name="440562084"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440562084" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440562084">(May 24 2024 at 18:56)</a>:</h4>
<p>saulecabrera edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#issuecomment-2130176127">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>:</p>
<blockquote>
<p>Thanks for the reviews Alex and Nick. I've addressed all the comments, I think this is ready for another round of reviews. </p>
</blockquote>



<a name="440562387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/440562387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#440562387">(May 24 2024 at 18:59)</a>:</h4>
<p>saulecabrera edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#discussion_r1613893461">PR review comment</a>.</p>



<a name="441055865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/441055865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#441055865">(May 28 2024 at 14:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2083046911">PR review</a>:</p>
<blockquote>
<p>Looks great to me, thanks!</p>
<p>I'm going to go ahead and merge, but some other assorted thoughts (which are fine as follow-ups or to ignore entirely):</p>
<ul>
<li>Should the default perhaps be the "full matrix" of tests? For example pooling, default settings (cranelift), and winch might be the three main configurations to execute in right now.</li>
<li>Instead of opting-in to strategy should the attributes be "skip this test on winch" or similar? (e.g. eagerly running all tests instead of having to opt-in to testing)</li>
</ul>
<p>In any case it might make more sense to expand the current strategy implemented and see how it looks after?</p>
</blockquote>



<a name="441058606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/441058606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#441058606">(May 28 2024 at 14:57)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>.</p>



<a name="441244100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238622%20wasmtime%3A%20Introduce%20the%20%60test-macros%60.../near/441244100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238622.20wasmtime.3A.20Introduce.20the.20.60test-macros.60.2E.2E.2E.html#441244100">(May 29 2024 at 13:44)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#issuecomment-2137453729">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8622">PR #8622</a>:</p>
<blockquote>
<p>Those are good suggestions Alex, I like the idea of opting out instead of opting in, it has the potential to make the macro less verbose and easier to integrate. I'll start migrating the tests and see how things shape up and update the macro definition if needed. </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>