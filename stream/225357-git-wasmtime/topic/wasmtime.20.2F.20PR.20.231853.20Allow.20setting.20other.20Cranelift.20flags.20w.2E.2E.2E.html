<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1853 Allow setting other Cranelift flags w... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html">wasmtime / PR #1853 Allow setting other Cranelift flags w...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="200408755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200408755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200408755">(Jun 10 2020 at 12:27)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1853">PR #1853</a> from <code>wasmtime-cranelift-flag</code> to <code>master</code>:</p>
<blockquote>
<p>This would be handy to try different Cranelift settings while running on real hardware. My immediate use case is trying a different regalloc on aarch64, but I made something generic that would allow to use other cranelift flags in wasmtime too.</p>
</blockquote>



<a name="200408756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200408756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200408756">(Jun 10 2020 at 12:27)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1853">PR #1853</a>.</p>



<a name="200425149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200425149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200425149">(Jun 10 2020 at 14:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#pullrequestreview-428125805">PR Review</a>.</p>



<a name="200425150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200425150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200425150">(Jun 10 2020 at 14:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#pullrequestreview-428125805">PR Review</a>.</p>



<a name="200425151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200425151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200425151">(Jun 10 2020 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#discussion_r438176587">PR Review Comment</a>:</p>
<blockquote>
<p>I might recommend using <code>splitn</code> here to avoid needing to worry about this case?</p>
</blockquote>



<a name="200425152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200425152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200425152">(Jun 10 2020 at 14:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#discussion_r438177431">PR Review Comment</a>:</p>
<blockquote>
<p>We may want to flag this method as <code>unsafe</code>? It seems like it's possible that it would be pretty easy to accidentally break safe invariants through arbitrary flags here.</p>
<p>Additionally could this document that it's not necesarily the most stable method in the world? Basically just say that flags are intended to come and go over time, and stability is primarily through the other <code>Config</code> methods.</p>
</blockquote>



<a name="200429537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200429537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200429537">(Jun 10 2020 at 15:11)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1853">PR #1853</a> from <code>wasmtime-cranelift-flag</code> to <code>master</code>:</p>
<blockquote>
<p>This would be handy to try different Cranelift settings while running on real hardware. My immediate use case is trying a different regalloc on aarch64, but I made something generic that would allow to use other cranelift flags in wasmtime too.</p>
</blockquote>



<a name="200430405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200430405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200430405">(Jun 10 2020 at 15:18)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#pullrequestreview-428163340">PR Review</a>.</p>



<a name="200430406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200430406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200430406">(Jun 10 2020 at 15:18)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1853#discussion_r438204905">PR Review Comment</a>:</p>
<blockquote>
<p>The only flags that could be unsafe are <code>libcall_call_conv</code> and <code>enable_safepoints</code> I think. <code>avoid_div_traps</code> could result in an unhandled signal and <code>enable_probestack</code> could result in a panic due to a missing libcall impl.</p>
</blockquote>



<a name="200434985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231853%20Allow%20setting%20other%20Cranelift%20flags%20w.../near/200434985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231853.20Allow.20setting.20other.20Cranelift.20flags.20w.2E.2E.2E.html#200434985">(Jun 10 2020 at 15:50)</a>:</h4>
<p>bnjbvr merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1853">PR #1853</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>