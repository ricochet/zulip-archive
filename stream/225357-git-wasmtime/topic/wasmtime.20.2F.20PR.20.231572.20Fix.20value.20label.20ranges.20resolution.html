<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1572 Fix value label ranges resolution · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html">wasmtime / PR #1572 Fix value label ranges resolution</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="194870669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/194870669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#194870669">(Apr 21 2020 at 22:38)</a>:</h4>
<p>yurydelendik opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Patch built on top of #1542</li>
<li>Documentation for <code>ValueLocRange</code></li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
</ul>
</blockquote>



<a name="195579491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195579491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195579491">(Apr 28 2020 at 15:19)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Patch built on top of #1542</li>
<li>Documentation for <code>ValueLocRange</code></li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
</ul>
</blockquote>



<a name="195593560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195593560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195593560">(Apr 28 2020 at 16:54)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Patch built on top of #1542</li>
<li>Documentation for <code>ValueLocRange</code></li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
</ul>
</blockquote>



<a name="195621007"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621007" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621007">(Apr 28 2020 at 20:18)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901">PR Review</a>.</p>



<a name="195621008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621008">(Apr 28 2020 at 20:18)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901">PR Review</a>.</p>



<a name="195621009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621009">(Apr 28 2020 at 20:18)</a>:</h4>
<p>ggreif created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416891780" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416891780">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>                        .flat_map(move |(wasm_start, wasm_end)| {
                            addr_tr.translate_ranges(*wasm_start, *wasm_end)
                        })
</code></pre></div>


</blockquote>



<a name="195621011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621011">(Apr 28 2020 at 20:18)</a>:</h4>
<p>ggreif created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416862854" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416862854">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>            // Starting from the end, intersect (range_start..range_end) with
</code></pre></div>


</blockquote>



<a name="195621083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621083">(Apr 28 2020 at 20:18)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901">PR Review</a>.</p>



<a name="195621614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621614">(Apr 28 2020 at 20:22)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402182279" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402182279">PR Review</a>.</p>



<a name="195621615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195621615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195621615">(Apr 28 2020 at 20:22)</a>:</h4>
<p>ggreif created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416897725" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416897725">PR Review Comment</a>:</p>
<blockquote>
<p>Courtesy of Haskell's <a href="https://hoogle.haskell.org/?hoogle=concatMap" title="https://hoogle.haskell.org/?hoogle=concatMap"><code>concatMap</code></a> :-)<br>
Potentially a bit faster.</p>
</blockquote>



<a name="195623085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195623085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195623085">(Apr 28 2020 at 20:33)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402139901">PR Review</a>.</p>



<a name="195623324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195623324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195623324">(Apr 28 2020 at 20:35)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402190503" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402190503">PR Review</a>.</p>



<a name="195623325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195623325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195623325">(Apr 28 2020 at 20:35)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402190503" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402190503">PR Review</a>.</p>



<a name="195623326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195623326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195623326">(Apr 28 2020 at 20:35)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416904609" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416904609">PR Review Comment</a>:</p>
<blockquote>
<p>Why not <code>&amp;'a [write::FileId]</code>? Saves an indirection.</p>
</blockquote>



<a name="195626106"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195626106" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195626106">(Apr 28 2020 at 20:59)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Patch built on top of #1542</li>
<li>Documentation for <code>ValueLocRange</code></li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
</ul>
</blockquote>



<a name="195628836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195628836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195628836">(Apr 28 2020 at 21:22)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402221771" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402221771">PR Review</a>.</p>



<a name="195628837"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195628837" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195628837">(Apr 28 2020 at 21:22)</a>:</h4>
<p>ggreif created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>        let value_ranges = self.frame_info
        .and_then(|fi| fi.value_ranges.get(&amp;label))
        .unwrap_or({return});
</code></pre></div>


<p>This might be a little more clear. Matter of taste.</p>
</blockquote>



<a name="195629100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195629100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195629100">(Apr 28 2020 at 21:24)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161">PR Review Comment</a>.</p>



<a name="195650083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195650083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195650083">(Apr 29 2020 at 01:28)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Patch built on top of #1542</li>
<li>Documentation for <code>ValueLocRange</code></li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
</ul>
</blockquote>



<a name="195719822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195719822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195719822">(Apr 29 2020 at 14:43)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402738697" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402738697">PR Review</a>.</p>



<a name="195719823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195719823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195719823">(Apr 29 2020 at 14:43)</a>:</h4>
<p>ggreif created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417371397" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417371397">PR Review Comment</a>:</p>
<blockquote>
<p>It is probably evil. Sorry for this :-/<br>
The only reference a search turned up was <a href="https://www.reddit.com/r/rust/comments/86x1fj/unwrap_orreturn/" title="https://www.reddit.com/r/rust/comments/86x1fj/unwrap_orreturn/">https://www.reddit.com/r/rust/comments/86x1fj/unwrap_orreturn/</a><br>
and I am now convinced, that an eagerly evaluated argument <code>return</code> when passed to <code>unwrap_or</code> will exit the function in any case. I will learn a bit more about this antipattern, but don't apply it <span aria-label="skull" class="emoji emoji-1f480" role="img" title="skull">:skull:</span>!</p>
</blockquote>



<a name="195722117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195722117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195722117">(Apr 29 2020 at 14:56)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Implements FIXME in <a href="http://expression.rs" title="http://expression.rs">expression.rs</a></li>
<li>Move TargetIsa from CompliedExpression structure</li>
<li>Fix expression format for GDB</li>
<li>Add tests for parsing</li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
<li>Misc comments and magical numbers</li>
</ul>
</blockquote>



<a name="195722460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195722460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195722460">(Apr 29 2020 at 14:58)</a>:</h4>
<p>ggreif deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r416931161">PR Review Comment</a>.</p>



<a name="195722464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195722464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195722464">(Apr 29 2020 at 14:58)</a>:</h4>
<p>ggreif deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417371397" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417371397">PR Review Comment</a>.</p>



<a name="195722987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195722987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195722987">(Apr 29 2020 at 15:01)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Implements FIXME in <a href="http://expression.rs" title="http://expression.rs">expression.rs</a></li>
<li>Move <code>TargetIsa</code> from <code>CompiledExpression</code> structure</li>
<li>Fix expression format for GDB</li>
<li>Add tests for parsing</li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
<li>Misc comments and magical numbers</li>
</ul>
</blockquote>



<a name="195724850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195724850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195724850">(Apr 29 2020 at 15:13)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Implements FIXME in <a href="http://expression.rs" title="http://expression.rs">expression.rs</a></li>
<li>Move <code>TargetIsa</code> from <code>CompiledExpression</code> structure</li>
<li>Fix expression format for GDB</li>
<li>Add tests for parsing</li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
<li>Misc comments and magical numbers</li>
</ul>
</blockquote>



<a name="195750570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750570">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402910482" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402910482">PR Review</a>.</p>



<a name="195750571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750571">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402910482" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-402910482">PR Review</a>.</p>



<a name="195750572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750572">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417508444" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417508444">PR Review Comment</a>:</p>
<blockquote>
<p>Tangent: Why aren't we doing <code>#[derive(Clone)]</code> for <code>CompiledExpressionPart</code>? I don't see anything here that is different from what the derive would do.</p>
</blockquote>



<a name="195750573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750573">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417513535" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417513535">PR Review Comment</a>:</p>
<blockquote>
<p>nit: rm commented out code</p>
</blockquote>



<a name="195750574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750574">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417516175" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417516175">PR Review Comment</a>:</p>
<blockquote>
<p>Why asserting the debug formatting and not the value itself?</p>
</blockquote>



<a name="195750575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750575">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417518113" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417518113">PR Review Comment</a>:</p>
<blockquote>
<p>Why not move this <code>if machine_reg &lt; 32</code> logic into <code>GimliWriter::write_op_reg</code>? That could remove a precondition assertion from that method and some duplication here and below.</p>
</blockquote>



<a name="195750576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195750576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195750576">(Apr 29 2020 at 18:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417519136" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417519136">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>    // Dereference is needed.
</code></pre></div>


</blockquote>



<a name="195782018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195782018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195782018">(Apr 29 2020 at 23:17)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-403104887" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-403104887">PR Review</a>.</p>



<a name="195782019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195782019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195782019">(Apr 29 2020 at 23:17)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417667163" title="https://github.com/bytecodealliance/wasmtime/pull/1572#discussion_r417667163">PR Review Comment</a>:</p>
<blockquote>
<p>Not sure. But it is gone: we have <code>[derive(Clone)]</code> now.</p>
</blockquote>



<a name="195791342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195791342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195791342">(Apr 30 2020 at 01:52)</a>:</h4>
<p>yurydelendik updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a> from <code>fix-value-label-resolve</code> to <code>master</code>:</p>
<blockquote>
<p>There was a bug how value labels were resolved, which caused some DWARF expressions not be transformed, e.g. those are in the registers.</p>
<ul>
<li>Implements FIXME in <a href="http://expression.rs" title="http://expression.rs">expression.rs</a></li>
<li>Move <code>TargetIsa</code> from <code>CompiledExpression</code> structure</li>
<li>Fix expression format for GDB</li>
<li>Add tests for parsing</li>
<li>Proper logic in <code>ValueLabelRangesBuilder::process_label</code></li>
<li>Tests for <code>ValueLabelRangesBuilder</code></li>
<li>Refactor <code>build_with_locals</code> to return <code>Iterator</code> instead of <code>Vec&lt;_&gt;</code></li>
<li>Misc comments and magical numbers</li>
</ul>
</blockquote>



<a name="195810985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195810985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195810985">(Apr 30 2020 at 08:33)</a>:</h4>
<p>ggreif submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-403311725" title="https://github.com/bytecodealliance/wasmtime/pull/1572#pullrequestreview-403311725">PR Review</a>.</p>



<a name="195835760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231572%20Fix%20value%20label%20ranges%20resolution/near/195835760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231572.20Fix.20value.20label.20ranges.20resolution.html#195835760">(Apr 30 2020 at 13:07)</a>:</h4>
<p>yurydelendik merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">PR #1572</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>