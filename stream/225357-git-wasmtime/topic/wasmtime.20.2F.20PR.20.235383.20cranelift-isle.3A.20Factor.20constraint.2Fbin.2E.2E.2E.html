<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5383 cranelift-isle: Factor constraint/bin... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html">wasmtime / PR #5383 cranelift-isle: Factor constraint/bin...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="314279135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314279135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314279135">(Dec 06 2022 at 16:58)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5383">PR #5383</a> from <code>isle-binding</code> to <code>main</code>:</p>
<blockquote>
<p>It turns out that during codegen I'll want to know which bindings were added for a particular constraint. Factoring that out and making sure to use it everywhere that constraints and bindings are created ensures that these will always stay in sync. It also simplifies the implementation of <code>normalize_equivalence_classes</code>, which needs to create bindings for constraints but doesn't care what they are.</p>
<p>Also make <code>add_pattern_constraints</code> non-recursive and reuse allocations.</p>
</blockquote>



<a name="314279136"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314279136" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314279136">(Dec 06 2022 at 16:58)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5383">PR #5383</a>.</p>



<a name="314588938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314588938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314588938">(Dec 08 2022 at 01:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5383#pullrequestreview-1209334056">PR review</a>.</p>



<a name="314588939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314588939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314588939">(Dec 08 2022 at 01:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5383#pullrequestreview-1209334056">PR review</a>.</p>



<a name="314588940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314588940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314588940">(Dec 08 2022 at 01:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5383#discussion_r1042834952">PR review comment</a>:</p>
<blockquote>
<p>This is somewhat unintuitive -- iterating over an index gives me ... all indices less than that index?</p>
<p>If we have to have such a method, I'd prefer for it not to be a trait impl of <code>IntoIterator</code> (this also avoids the need to specify the explicit <code>IntoIter</code> type and expose the iterator-chain innards) but rather have something like <code>fn up_to(self) -&gt; impl Iterator&lt;Item = Self&gt; { (0..self.0).map(TupleIndex) }</code>.</p>
</blockquote>



<a name="314588941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314588941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314588941">(Dec 08 2022 at 01:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5383#discussion_r1042834415">PR review comment</a>:</p>
<blockquote>
<p>I think I understand what this method is doing, but it's extremely convoluted and difficult to understand -- the explicit state machine isn't doing it any favors. Since we're inside islec and performance is not extremely critical, could we return a <code>Vec&lt;Binding&gt;</code> here? Then one could do a <code>match self { Constraint::ConstInt { .. } =&gt; vec![], Constraint::Some =&gt; vec![source], ... }</code> instead. Likewise this would avoid the need to iterate over the tuple index (above).</p>
</blockquote>



<a name="314590121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314590121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314590121">(Dec 08 2022 at 01:53)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5383">PR #5383</a> from <code>isle-binding</code> to <code>main</code>.</p>



<a name="314590263"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314590263" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314590263">(Dec 08 2022 at 01:55)</a>:</h4>
<p>jameysharp has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5383">PR #5383</a>.</p>



<a name="314592474"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235383%20cranelift-isle%3A%20Factor%20constraint/bin.../near/314592474" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235383.20cranelift-isle.3A.20Factor.20constraint.2Fbin.2E.2E.2E.html#314592474">(Dec 08 2022 at 02:26)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5383">PR #5383</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>