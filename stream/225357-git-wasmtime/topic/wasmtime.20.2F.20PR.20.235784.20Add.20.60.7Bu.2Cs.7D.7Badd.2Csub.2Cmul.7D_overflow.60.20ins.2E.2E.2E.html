<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5784 Add `{u,s}{add,sub,mul}_overflow` ins... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html">wasmtime / PR #5784 Add `{u,s}{add,sub,mul}_overflow` ins...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="327917663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/327917663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#327917663">(Feb 15 2023 at 03:41)</a>:</h4>
<p>T0b1-iOS opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>:</p>
<blockquote>
<p>Currently, there is not really a way to efficiently detect arithmetic over/underflow which some ISAs (in particular x64) allow and can be important. For example, I'm currently trialing Cranelift as a backend in a database system which needs efficient overflow handling.<br>
There also seems to be more general interest in overflow detection (see #1044).</p>
<p>This PR adds instructions for unsigned and signed add/sub/mul which return a second output indicating overflow.<br>
<code>add</code>/<code>sub</code> support 8 through 128 bit integers while the <code>mul</code> variants only support up to 64 bit integers. (That's because the most efficient implementation for <code>umul_overflow</code> with 128bit integers is along the lines of 50 instructions on x64 at which point it is probably better to emit a function call).<br>
I left <code>iadd_cout</code> and friends untouched as the semantics are a bit confusing right now, e.g. <code>iadd_cout</code> seems to be indicating signed overflow while the pseudocode in the description describes unsigned overflow). </p>
<p>In detail, this PR adds:</p>
<ul>
<li><code>{u,s}{add,sub,mul}_overflow</code> with an implementation in the interpreter (I hope the naming convention is ok)</li>
<li>runtests for these instructions</li>
<li>support for 8/16 bit operands for <code>AluRmiR</code>/<code>AluRM</code> instructions in the x64 backend</li>
<li>support for the usigned <code>mul</code> instruction on x64</li>
<li>support for <code>UMAddL</code>/<code>SMAddL</code> instructions in the aarch64 backend</li>
<li>lowerings of <code>{u,s}{add,sub,mul}_overflow</code> for x64 and aarch64</li>
</ul>
<p>Currently, there are no emit tests since they were not important for the initial testing and I would like to know whether there is interest in these instructions being included first.<br>
Additionally, the 128bit lowerings currently forego the flag helpers since they are, as far as I can tell, not really designed to produce three outputs so getting both the low/high part of an addition and the dst reg for a setcc seemed a bit complicated.<br>
I also do not have a lot of knowledge about RV64/S390X so I don't think I can provide lowerings there.</p>
</blockquote>



<a name="344405691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344405691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344405691">(Mar 25 2023 at 03:12)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344406736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344406736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344406736">(Mar 25 2023 at 03:27)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344551921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344551921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344551921">(Mar 25 2023 at 20:36)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344554355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344554355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344554355">(Mar 25 2023 at 21:05)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344554483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344554483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344554483">(Mar 25 2023 at 21:07)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344554841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344554841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344554841">(Mar 25 2023 at 21:12)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344561569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344561569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344561569">(Mar 25 2023 at 22:32)</a>:</h4>
<p><strong>T0b1-iOS</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> as ready for review.</p>



<a name="344727673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344727673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344727673">(Mar 26 2023 at 23:47)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344841547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344841547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344841547">(Mar 27 2023 at 11:58)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1358944973">PR review</a>.</p>



<a name="344841548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344841548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344841548">(Mar 27 2023 at 11:58)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149198062">PR review comment</a>:</p>
<blockquote>
<p>This description does not seem correct, since we use <code>ints(Interval::All)</code> below, which does include I128's.</p>
<p>The descriptions for <code>umul_overflow</code>/<code>smul_overflow</code> also state something similar.</p>
</blockquote>



<a name="344841549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344841549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344841549">(Mar 27 2023 at 11:58)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1358944973">PR review</a>.</p>



<a name="344951875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951875">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359710482">PR review</a>.</p>



<a name="344951877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951877">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359710482">PR review</a>.</p>



<a name="344951880"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951880" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951880">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149681620">PR review comment</a>:</p>
<blockquote>
<p>s/a arithmetic/an arithmetic/</p>
</blockquote>



<a name="344951881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951881">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149681444">PR review comment</a>:</p>
<blockquote>
<p>small style nit, but I prefer a more functional style here, where instead of a <code>mut</code> binding, we do <code>let (op, size) = match alu_op { ... }</code> and produce original <code>size</code> or an overridden one in each match arm.</p>
</blockquote>



<a name="344951882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951882">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149688421">PR review comment</a>:</p>
<blockquote>
<p>It's somewhat surprising here that we take an arbitrary <code>Cond</code>, given that the helper name is specifically "overflow"-related; could we document which <code>Cond</code>s we expect, or if it's only one in practice, just name it directly?</p>
</blockquote>



<a name="344951883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951883">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149685165">PR review comment</a>:</p>
<blockquote>
<p>I usually prefer to avoid <code>bool</code> flags unless the meaning is really clear from the name. Here it's not clear from the name whether <code>true</code> means zero or sign-extend. (And we've had one CVE from confusing these so the difference is important!) Could we define a purpose-built enum with <code>Zero</code> and <code>Sign</code> arms, if we don't have one elsewhere that we can use, and use it here and in callers as appropriate?</p>
</blockquote>



<a name="344951884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951884">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149687487">PR review comment</a>:</p>
<blockquote>
<p>We usually use the terminology "narrow" to describe types narrower than the native operator/instruction width. Not a huge deal but probably nice for future readability.</p>
</blockquote>



<a name="344951886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951886">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149690132">PR review comment</a>:</p>
<blockquote>
<p>Let's extend the helper so we can -- it's the way we use to avoid subtle bugs from out-of-order <code>emit</code>s and unexpected side-effects.</p>
</blockquote>



<a name="344951887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951887">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149696402">PR review comment</a>:</p>
<blockquote>
<p>Is there any reason we can't use the ordinary <code>mul</code> in the <code>AluRmiR</code>? Alternately, if we do this, we should remove it completely from <code>AluRmiROpcode</code> and switch uses over -- there shouldn't be two different ways to build a MachInst for it.</p>
</blockquote>



<a name="344951888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951888">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149700130">PR review comment</a>:</p>
<blockquote>
<p>Here as well, let's extend <code>with_flags</code> rather than doing an ad-hoc <code>emit</code>.</p>
</blockquote>



<a name="344951889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344951889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344951889">(Mar 27 2023 at 19:28)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149702383">PR review comment</a>:</p>
<blockquote>
<p>It might make the tests a little easier to read and maintain if we use multiple-returns here -- if we return <code>-&gt; i128, i8</code> and compare against <code>[val, of]</code> we can collapse this with the below. See e.g. <code>runtests/i128-concat-split.clif</code> for an example.</p>
</blockquote>



<a name="344964691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344964691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344964691">(Mar 27 2023 at 20:45)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359845423">PR review</a>.</p>



<a name="344964694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344964694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344964694">(Mar 27 2023 at 20:45)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149772965">PR review comment</a>:</p>
<blockquote>
<p><code>AluRmiROpcode.Mul</code> is a signed multiply, it emits <code>imul</code>. This one emits <code>mul</code>, which is unsigned multiplication. I added it as a new MachInst since the implementation for the <code>AluRmiR</code> mul operation states that it is freeloaded into the MachInst and doesn't really fit it already so I didn't add a <code>AluRmiROpcode.UMul</code>.</p>
</blockquote>



<a name="344966307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344966307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344966307">(Mar 27 2023 at 20:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149782178">PR review comment</a>:</p>
<blockquote>
<p>Ah! I had missed that difference; thanks. This is indeed fine then.</p>
</blockquote>



<a name="344966309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344966309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344966309">(Mar 27 2023 at 20:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359858245">PR review</a>.</p>



<a name="344974425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344974425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344974425">(Mar 27 2023 at 21:56)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359925454">PR review</a>.</p>



<a name="344974426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344974426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344974426">(Mar 27 2023 at 21:56)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149827975">PR review comment</a>:</p>
<blockquote>
<p>The problem is that currently <code>with_flags</code> returns a <code>ValueRegs</code> which can hold at max 2 values but the 128bit implementations for the overflow ops would need three return values.<br>
So I could change the <code>with_flags</code> helper to return an <code>InstOutput</code> maybe and change all the places it's used to accomodate this but that would probably be quite a big change.<br>
Or should I simply implement a new helper (e.g. <code>with_flags_extended</code>) that can return an <code>InstOutput</code>?<br>
And should I use <code>InstOutput</code> or create a new type to handle more than one <code>ValueRegs</code>. Though I think the notion of <code>InstOuput</code> with multiple <code>ValueRegs</code> is already quite fitting.<br>
</p>
</blockquote>



<a name="344975745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975745">(Mar 27 2023 at 22:07)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a> from <code>arith_of</code> to <code>main</code>.</p>



<a name="344975840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975840">(Mar 27 2023 at 22:08)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359936483">PR review</a>.</p>



<a name="344975842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975842">(Mar 27 2023 at 22:08)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149835523">PR review comment</a>:</p>
<blockquote>
<p>Thanks for catching that, it should be correct now. I also added your changes for the fuzzer.</p>
</blockquote>



<a name="344975881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975881">(Mar 27 2023 at 22:08)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359937066">PR review</a>.</p>



<a name="344975882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975882">(Mar 27 2023 at 22:08)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149835929">PR review comment</a>:</p>
<blockquote>
<p>I added a description which conditions are used.</p>
</blockquote>



<a name="344975920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975920">(Mar 27 2023 at 22:09)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359937332">PR review</a>.</p>



<a name="344975921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975921">(Mar 27 2023 at 22:09)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149836103">PR review comment</a>:</p>
<blockquote>
<p>I changed that.</p>
</blockquote>



<a name="344975950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344975950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344975950">(Mar 27 2023 at 22:09)</a>:</h4>
<p>T0b1-iOS edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149836103">PR review comment</a>.</p>



<a name="344976162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344976162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344976162">(Mar 27 2023 at 22:11)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359939266">PR review</a>.</p>



<a name="344976163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344976163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344976163">(Mar 27 2023 at 22:11)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149837449">PR review comment</a>:</p>
<blockquote>
<p>I changed it to use the <code>ArgumentExtension</code> enum which I thought is fitting enough. I also changed the <code>lower_extend_op</code> helper to use <code>ArgumentExtension</code> since that was using a <code>bool</code> before also. </p>
</blockquote>



<a name="344976409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344976409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344976409">(Mar 27 2023 at 22:13)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1359941086">PR review</a>.</p>



<a name="344976410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/344976410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#344976410">(Mar 27 2023 at 22:13)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1149838642">PR review comment</a>:</p>
<blockquote>
<p>I changed the description. Is it better now?</p>
</blockquote>



<a name="345266950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345266950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345266950">(Mar 29 2023 at 00:24)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1362091020">PR review</a>.</p>



<a name="345266951"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345266951" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345266951">(Mar 29 2023 at 00:24)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1151277037">PR review comment</a>:</p>
<blockquote>
<p>Hmm -- yeah, <code>with_flags_extended</code> seems like a better option here.</p>
</blockquote>



<a name="345267049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345267049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345267049">(Mar 29 2023 at 00:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1362091707">PR review</a>.</p>



<a name="345267050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345267050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345267050">(Mar 29 2023 at 00:25)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1151277580">PR review comment</a>:</p>
<blockquote>
<p>Yep, thanks!</p>
</blockquote>



<a name="345267070"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345267070" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345267070">(Mar 29 2023 at 00:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1362091845">PR review</a>.</p>



<a name="345267071"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/345267071" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#345267071">(Mar 29 2023 at 00:25)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1151277678">PR review comment</a>:</p>
<blockquote>
<p>Much better, thank you!</p>
</blockquote>



<a name="346667190"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346667190" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346667190">(Apr 03 2023 at 20:06)</a>:</h4>
<p><strong>T0b1-iOS</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="346667192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346667192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346667192">(Apr 03 2023 at 20:06)</a>:</h4>
<p><strong>T0b1-iOS</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="346667194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346667194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346667194">(Apr 03 2023 at 20:06)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="346667536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346667536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346667536">(Apr 03 2023 at 20:08)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1156410013">PR review comment</a>:</p>
<blockquote>
<p>I added the helper now. I added a new <code>ProducesFlags</code> variant that combines two <code>ProducesFlagsReturnsResultWithConsumer</code>. I also added a few helper to extract the values out of the <code>InstOutput</code> afterwards which involves a bit of trickery to extract <code>ValueRegs</code> from it using a reference. You might want to look at that (all that mentions <code>InstOutputRef</code>).<br>
I also renamed <code>produces_flags_append</code> to <code>produces_flags_concat</code> to be in-line with <code>consumes_flags_concat</code>.</p>
</blockquote>



<a name="346667540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346667540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346667540">(Apr 03 2023 at 20:08)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1369729533">PR review</a>.</p>



<a name="346678885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346678885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346678885">(Apr 03 2023 at 21:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1369801714">PR review</a>.</p>



<a name="346678886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346678886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346678886">(Apr 03 2023 at 21:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1369801714">PR review</a>.</p>



<a name="346678887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346678887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346678887">(Apr 03 2023 at 21:06)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1156457276">PR review comment</a>:</p>
<blockquote>
<p>Hmm, now that I see this with <code>InstOutputRef</code>, I don't think this is very readable either; making the "extended" variant of the combinator take <em>only</em> the specific combination we need feels odd too. The second <code>ProducesFlags</code> also consumes flags from the previous op, which makes it a bit of an impedance mismatch too.</p>
<p>I think something like this would (finally!) work though:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="k">type</span> <span class="nc">MultiReg</span><span class="w"> </span><span class="p">(</span><span class="n">Three</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="n">Reg</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="n">Reg</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">c</span><span class="w"> </span><span class="n">Reg</span><span class="p">))</span>

<span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">with_flags_chain</span><span class="w"> </span><span class="p">(</span><span class="n">ProducesFlags</span><span class="w"> </span><span class="n">ProducesAndConsumesFlags</span><span class="w"> </span><span class="n">ConsumesFlags</span><span class="p">)</span><span class="w"> </span><span class="n">MultiReg</span><span class="p">)</span>

<span class="p">;;</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">constructor</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">turns</span><span class="w"> </span><span class="err">`</span><span class="n">adcs</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">aarch64</span><span class="p">)</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="err">`</span><span class="n">add</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">x64</span><span class="p">)</span><span class="w"> </span><span class="n">into</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="err">`</span><span class="n">ProducesAndConsumesFlags</span><span class="err">`</span>

<span class="p">;;</span><span class="w"> </span><span class="n">then</span>:

<span class="p">(</span><span class="n">decl</span><span class="w"> </span><span class="n">pair_and_single</span><span class="w"> </span><span class="p">(</span><span class="n">MultiReg</span><span class="p">)</span><span class="w"> </span><span class="n">InstOutput</span><span class="p">)</span>
<span class="p">(</span><span class="n">rule</span><span class="w"> </span><span class="p">(</span><span class="n">pair_and_single</span><span class="w"> </span><span class="p">(</span><span class="n">MultiReg</span><span class="p">.</span><span class="n">Three</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">output_pair</span><span class="w"> </span><span class="p">(</span><span class="n">value_regs</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="n">c</span><span class="p">))</span>
</code></pre></div>
<p>does that seem reasonable?</p>
</blockquote>



<a name="346685120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346685120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346685120">(Apr 03 2023 at 21:50)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1369846454">PR review</a>.</p>



<a name="346685121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346685121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346685121">(Apr 03 2023 at 21:50)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1156487632">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>The second <code>ProducesFlags</code> also consumes flags from the previous op, which makes it a bit of an impedance mismatch too.<br>
That is true, though the <code>ccmp</code> constructor on arm does the same thing with <code>ProducesFlagsTwiceSideEffect</code>.</p>
</blockquote>
<p>The rest is reasonable, i guess, though I'd need to implement more generic inst constructors for <code>alu_rmi_r</code>/<code>alu_rrr</code> that construct a <code>ConsumesAndProducesFlags</code> (probably better ordered like that) since the helpers do not know which alu op they are constructing specifically.</p>
</blockquote>



<a name="346685181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/346685181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#346685181">(Apr 03 2023 at 21:50)</a>:</h4>
<p>T0b1-iOS edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1156487632">PR review comment</a>.</p>



<a name="347930435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/347930435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#347930435">(Apr 08 2023 at 23:33)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="347930575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/347930575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#347930575">(Apr 08 2023 at 23:35)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1376816240">PR review</a>.</p>



<a name="347930576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/347930576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#347930576">(Apr 08 2023 at 23:35)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#discussion_r1161170286">PR review comment</a>:</p>
<blockquote>
<p>I replaced the old change with what you proposed. It supports more combinations now, though that ended up in a lot of copypaste.</p>
</blockquote>



<a name="348537231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/348537231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#348537231">(Apr 11 2023 at 18:37)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5784#pullrequestreview-1379868231">PR review</a>.</p>



<a name="348549689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/348549689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#348549689">(Apr 11 2023 at 19:44)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="348554550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/348554550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#348554550">(Apr 11 2023 at 20:15)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<a name="348560298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235784%20Add%20%60%7Bu%2Cs%7D%7Badd%2Csub%2Cmul%7D_overflow%60%20ins.../near/348560298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235784.20Add.20.60.7Bu.2Cs.7D.7Badd.2Csub.2Cmul.7D_overflow.60.20ins.2E.2E.2E.html#348560298">(Apr 11 2023 at 20:53)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5784">PR #5784</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>