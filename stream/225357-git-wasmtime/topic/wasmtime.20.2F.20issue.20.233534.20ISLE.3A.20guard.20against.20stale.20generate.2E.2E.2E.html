<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3534 ISLE: guard against stale generate... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233534.20ISLE.3A.20guard.20against.20stale.20generate.2E.2E.2E.html">wasmtime / issue #3534 ISLE: guard against stale generate...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="261607450"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233534%20ISLE%3A%20guard%20against%20stale%20generate.../near/261607450" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233534.20ISLE.3A.20guard.20against.20stale.20generate.2E.2E.2E.html#261607450">(Nov 16 2021 at 07:54)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/3534#issuecomment-969972703">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3534">issue #3534</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:x64", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="261694666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233534%20ISLE%3A%20guard%20against%20stale%20generate.../near/261694666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233534.20ISLE.3A.20guard.20against.20stale.20generate.2E.2E.2E.html#261694666">(Nov 16 2021 at 19:34)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/3534#issuecomment-970612448">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3534">issue #3534</a>:</p>
<blockquote>
<p>@alexcrichton That's an excellent idea -- I've refactored now so that it always computes the manifest, and then either rebuilds or errors out when a recompilation is required, depending on the <code>rebuild-isle</code> feature. Let me know what you think!</p>
</blockquote>



<a name="261720262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233534%20ISLE%3A%20guard%20against%20stale%20generate.../near/261720262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233534.20ISLE.3A.20guard.20against.20stale.20generate.2E.2E.2E.html#261720262">(Nov 16 2021 at 23:01)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/3534#issuecomment-970779542">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3534">issue #3534</a>:</p>
<blockquote>
<p>Just an interesting data point: some of the latest CI failures were because this PR needed a rebase, so the manifest hashes were out-of-date with respect to latest <code>main</code>. This is actually what we want and I'm happy to see it worked: otherwise, if we allow merges of non-rebased ISLE source, the checked-in generated source will go through a git merge as well and who knows how well that'd correspond (due to e.g. renumbered temps, different trie build orders, etc).</p>
<p>Also I had to disable the ISLE build logic via a special Cargo feature in the "Meta deterministic check"; as explained in the commit message, this runs the build script outside of the source tree, which worked previously because the default build options did not look for ISLE source, but now they do. The CI job is checking other output (unrelated to ISLE) though, so this seems fine.</p>
</blockquote>



<a name="261722692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233534%20ISLE%3A%20guard%20against%20stale%20generate.../near/261722692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233534.20ISLE.3A.20guard.20against.20stale.20generate.2E.2E.2E.html#261722692">(Nov 16 2021 at 23:24)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/3534#issuecomment-970819682">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/3534">issue #3534</a>:</p>
<blockquote>
<p>Cool, yeah, we can maybe think more about this at the same time that we think about whether we want to check in the meta-DSL-generated source too (which IIRC we've discussed as a way to reduce compile time). I'll leave it as-is for this PR and create a followup issue to track it.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>