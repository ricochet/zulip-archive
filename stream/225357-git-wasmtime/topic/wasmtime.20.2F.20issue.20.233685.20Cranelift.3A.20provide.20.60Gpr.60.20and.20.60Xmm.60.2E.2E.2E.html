<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3685 Cranelift: provide `Gpr` and `Xmm`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html">wasmtime / issue #3685 Cranelift: provide `Gpr` and `Xmm`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="267797938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/267797938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#267797938">(Jan 12 2022 at 22:46)</a>:</h4>
<p>fitzgen labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>We've talked a bit</p>
<ul>
<li>about leveraging types better during lowering to make it easier to statically catch bugs (and help verification efforts) and</li>
<li>differentiating between plain ol' moves and register-class-converting moves.</li>
</ul>
<p>I think adding newtype wrappers around <code>Reg</code> for general purpose registers vs XMM registers, etc... would help both these things a lot. Basically every register class should have its own newtype wrapper.</p>
<p>I'm spending too much time debugging dynamic errors where I'm accidentally implicitly moving between register classes (either via mov mitosis or otherwise) and it would be way easier to fix this kind of thing if it was a compile time type error that specified exactly where in the sources I'm doing the wrong thing.</p>
</blockquote>



<a name="267797939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/267797939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#267797939">(Jan 12 2022 at 22:46)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>We've talked a bit</p>
<ul>
<li>about leveraging types better during lowering to make it easier to statically catch bugs (and help verification efforts) and</li>
<li>differentiating between plain ol' moves and register-class-converting moves.</li>
</ul>
<p>I think adding newtype wrappers around <code>Reg</code> for general purpose registers vs XMM registers, etc... would help both these things a lot. Basically every register class should have its own newtype wrapper.</p>
<p>I'm spending too much time debugging dynamic errors where I'm accidentally implicitly moving between register classes (either via mov mitosis or otherwise) and it would be way easier to fix this kind of thing if it was a compile time type error that specified exactly where in the sources I'm doing the wrong thing.</p>
</blockquote>



<a name="271327118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/271327118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#271327118">(Feb 09 2022 at 18:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3685#issuecomment-1034076560">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>I believe this was implemented in #3752, so closing.</p>
</blockquote>



<a name="271327119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/271327119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#271327119">(Feb 09 2022 at 18:39)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>We've talked a bit</p>
<ul>
<li>about leveraging types better during lowering to make it easier to statically catch bugs (and help verification efforts) and</li>
<li>differentiating between plain ol' moves and register-class-converting moves.</li>
</ul>
<p>I think adding newtype wrappers around <code>Reg</code> for general purpose registers vs XMM registers, etc... would help both these things a lot. Basically every register class should have its own newtype wrapper.</p>
<p>I'm spending too much time debugging dynamic errors where I'm accidentally implicitly moving between register classes (either via mov mitosis or otherwise) and it would be way easier to fix this kind of thing if it was a compile time type error that specified exactly where in the sources I'm doing the wrong thing.</p>
</blockquote>



<a name="271339853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/271339853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#271339853">(Feb 09 2022 at 20:06)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/3685#issuecomment-1034146993">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>This isn't complete yet, #3752 was just the first half. I'll have a PR up for the other half sometime soon ish.</p>
</blockquote>



<a name="271339862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/271339862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#271339862">(Feb 09 2022 at 20:06)</a>:</h4>
<p>fitzgen reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>We've talked a bit</p>
<ul>
<li>about leveraging types better during lowering to make it easier to statically catch bugs (and help verification efforts) and</li>
<li>differentiating between plain ol' moves and register-class-converting moves.</li>
</ul>
<p>I think adding newtype wrappers around <code>Reg</code> for general purpose registers vs XMM registers, etc... would help both these things a lot. Basically every register class should have its own newtype wrapper.</p>
<p>I'm spending too much time debugging dynamic errors where I'm accidentally implicitly moving between register classes (either via mov mitosis or otherwise) and it would be way easier to fix this kind of thing if it was a compile time type error that specified exactly where in the sources I'm doing the wrong thing.</p>
</blockquote>



<a name="271886851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233685%20Cranelift%3A%20provide%20%60Gpr%60%20and%20%60Xmm%60.../near/271886851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233685.20Cranelift.3A.20provide.20.60Gpr.60.20and.20.60Xmm.60.2E.2E.2E.html#271886851">(Feb 14 2022 at 20:54)</a>:</h4>
<p>fitzgen closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3685">issue #3685</a>:</p>
<blockquote>
<p>We've talked a bit</p>
<ul>
<li>about leveraging types better during lowering to make it easier to statically catch bugs (and help verification efforts) and</li>
<li>differentiating between plain ol' moves and register-class-converting moves.</li>
</ul>
<p>I think adding newtype wrappers around <code>Reg</code> for general purpose registers vs XMM registers, etc... would help both these things a lot. Basically every register class should have its own newtype wrapper.</p>
<p>I'm spending too much time debugging dynamic errors where I'm accidentally implicitly moving between register classes (either via mov mitosis or otherwise) and it would be way easier to fix this kind of thing if it was a compile time type error that specified exactly where in the sources I'm doing the wrong thing.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>