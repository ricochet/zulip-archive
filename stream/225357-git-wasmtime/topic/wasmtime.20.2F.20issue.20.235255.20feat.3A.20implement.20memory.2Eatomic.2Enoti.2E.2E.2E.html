<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5255 feat: implement memory.atomic.noti... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html">wasmtime / issue #5255 feat: implement memory.atomic.noti...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="309203467"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/309203467" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#309203467">(Nov 11 2022 at 14:32)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1311766687">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>The rustix crate wasmtime already uses has futex support. memory.atomic.{notify,wait32,wait64} are modeled after the futex model afaik, not the thread parking model that parking_lot_core exposes. In addition parking_lot_core is modelled on top of futex on Linux. As such using rustix:<span aria-label="thread" class="emoji emoji-1f9f5" role="img" title="thread">:thread:</span>:futex will likely require less code and be more efficient.</p>
</blockquote>



<a name="309204046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/309204046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#309204046">(Nov 11 2022 at 14:35)</a>:</h4>
<p>bjorn3 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1311766687">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>The rustix crate wasmtime already uses has futex support. memory.atomic.{notify,wait32,wait64} are modeled after the futex model afaik, not the thread parking model that parking_lot_core exposes. In addition parking_lot_core is modelled on top of futex on Linux. As such using <code>rustix::thread::futex</code> will likely require less code and be more efficient.</p>
</blockquote>



<a name="309204562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/309204562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#309204562">(Nov 11 2022 at 14:38)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1311772407">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>@bjorn3 <br>
I had a futex solution <a href="https://github.com/bytecodealliance/wasmtime/compare/main...haraldh:wasi-threads-working#diff-aeecd191ed2832ecc670202be8de1d73ff30c8476f710bc5aa6d759bd5d925b9R434">here</a>, but we need a solution for other OSes and AtomicU64, too.</p>
</blockquote>



<a name="309205171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/309205171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#309205171">(Nov 11 2022 at 14:42)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1311775891">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>@bjorn3 see also this <a href="https://github.com/WebAssembly/wasi-threads/issues/10#issuecomment-1291896985">comment</a></p>
</blockquote>



<a name="309205962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/309205962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#309205962">(Nov 11 2022 at 14:47)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1311780649">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Didn't think of wait64. That is indeed an issue.</p>
</blockquote>



<a name="310432858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310432858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310432858">(Nov 16 2022 at 15:18)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317184771">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Implemented <code>parking_spot</code> as a <code>parking_lot_core</code> replacement.</p>
</blockquote>



<a name="310449458"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310449458" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310449458">(Nov 16 2022 at 16:33)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317308714">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Err... SIGKILL is hard in the CI :)</p>
</blockquote>



<a name="310449858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310449858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310449858">(Nov 16 2022 at 16:35)</a>:</h4>
<p>haraldh edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317308714">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Err... SIGKILL is hard in the CI :)<br>
edit: maybe a timeout killer?</p>
</blockquote>



<a name="310449944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310449944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310449944">(Nov 16 2022 at 16:35)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317312112">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Oh, and to reiterate, this will require tests to merge.</p>
</blockquote>



<a name="310450624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310450624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310450624">(Nov 16 2022 at 16:38)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317317076">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<blockquote>
<p>Oh, and to reiterate, this will require tests to merge.</p>
</blockquote>
<p>@alexcrichton wouldn't that need threading support first, to test it in full action?</p>
</blockquote>



<a name="310454201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310454201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310454201">(Nov 16 2022 at 16:56)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1317347506">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>It would indeed, and everything necessary should be implemented in Wasmtime today. There are, for example, already tests with threads.</p>
</blockquote>



<a name="310567138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310567138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310567138">(Nov 17 2022 at 08:53)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1318294640">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>Addressed some of the issues, working on the others. Now tested with my real pthread example.</p>
</blockquote>



<a name="310582362"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310582362" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310582362">(Nov 17 2022 at 10:35)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1318429151">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<p>So, I setup the aarch64 cross compile locally and it passes... just takes some time:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">parking_spot</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="err"></span><span class="w"> </span><span class="n">feature</span><span class="o">/</span><span class="n">atomic_wait_notify</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="err">🦀</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">65.0</span><span class="w"> </span><span class="n">took</span><span class="w"> </span><span class="mi">42</span><span class="n">s</span><span class="w"></span>
<span class="p">[</span><span class="n">debian</span><span class="o">-</span><span class="n">toolbox</span>:<span class="nc">latest</span><span class="p">]</span><span class="w"> </span><span class="err">❯</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">aarch64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w">  </span><span class="o">--</span><span class="n">locked</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">parking_spot</span><span class="w"> </span><span class="o">--</span><span class="n">lib</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">parking_spot</span><span class="w"> </span><span class="n">v4</span><span class="p">.</span><span class="mf">0.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">harald</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">parking_spot</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.78</span><span class="n">s</span><span class="w"></span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">harald</span><span class="o">/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">aarch64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_parking_spot</span><span class="o">-</span><span class="mi">91</span><span class="n">a65de835bf666b</span><span class="p">)</span><span class="w"></span>

<span class="n">running</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="n">tests</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">atomic_wait_notify</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">hundred_unpark_all_one</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_fifty</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_all_one</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_one</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_fifty_then_fifty_all</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_hundred_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_one_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_one_fifty_then_fifty_all_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_all_hundred</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_all_hundred_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">hundred_unpark_all_one_fast</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_all_one_fast</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">hundred_unpark_all_one_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span>::<span class="n">parking_lot</span>::<span class="n">unpark_all_one_fast</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span><span class="w"></span>

<span class="n">test</span><span class="w"> </span><span class="n">result</span>: <span class="nc">ok</span><span class="p">.</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class="n">passed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">failed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ignored</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">measured</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">98.13</span><span class="n">s</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="310628376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310628376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310628376">(Nov 17 2022 at 15:10)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1318778727">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<blockquote>
<p>Oh, and to reiterate, this will require tests to merge.</p>
</blockquote>
<p>@alexcrichton added one basic test... more to follow</p>
</blockquote>



<a name="310771803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310771803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310771803">(Nov 18 2022 at 08:49)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1319710211">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="310817266"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/310817266" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#310817266">(Nov 18 2022 at 13:05)</a>:</h4>
<p>haraldh <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1319969579">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<blockquote>
<p>Looks reasonable to me, thanks!</p>
<p>One thing that we'll want to add is embedder APIs to interact with these instructions as well. For eample I think we'll want <code>SharedMemory::{notify,wait32,wait64}</code> which are basically the same wasm instructions but callable by <code>wasmtime</code> embedders, allowing programmatic interactions with threads as well. That doesn't need to be added necessarily in this PR, however, but it might motivate movement of the implementation of these instructions into <code>wasmtime_runtime::SharedMemory</code> instead of keeping it in libcalls in the long run.</p>
</blockquote>
<p>added <code>Shared::Memory::atomic_*</code> methods.</p>
</blockquote>



<a name="311102274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235255%20feat%3A%20implement%20memory.atomic.noti.../near/311102274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235255.20feat.3A.20implement.20memory.2Eatomic.2Enoti.2E.2E.2E.html#311102274">(Nov 20 2022 at 06:25)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/5255#issuecomment-1321050784">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/5255">issue #5255</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>