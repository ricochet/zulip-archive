<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1600 Allow different Handles to act as stdio · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html">wasmtime / PR #1600 Allow different Handles to act as stdio</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="195298227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195298227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195298227">(Apr 25 2020 at 19:06)</a>:</h4>
<p>kubkon opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1516 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
</blockquote>



<a name="195298228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195298228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195298228">(Apr 25 2020 at 19:06)</a>:</h4>
<p>kubkon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
</blockquote>



<a name="195303910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195303910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195303910">(Apr 25 2020 at 21:33)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
</blockquote>



<a name="195304798"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195304798" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195304798">(Apr 25 2020 at 22:01)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
</blockquote>



<a name="195323037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195323037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195323037">(Apr 26 2020 at 08:00)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
</blockquote>



<a name="195323600"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/195323600" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#195323600">(Apr 26 2020 at 08:15)</a>:</h4>
<p>kubkon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196241334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196241334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196241334">(May 04 2020 at 21:18)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196243926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196243926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196243926">(May 04 2020 at 21:46)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196671746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196671746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196671746">(May 06 2020 at 17:47)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196866815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196866815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196866815">(May 08 2020 at 07:49)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p><strong>This PR builds upon #1561 and should only be merged after #1561 lands in upstream.</strong></p>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196866915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196866915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196866915">(May 08 2020 at 07:50)</a>:</h4>
<p>kubkon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="196866927"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196866927" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196866927">(May 08 2020 at 07:51)</a>:</h4>
<p><strong>kubkon</strong> requested <a href="https://github.com/pchickey" title="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a>.</p>



<a name="196866940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/196866940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#196866940">(May 08 2020 at 07:51)</a>:</h4>
<p><strong>kubkon</strong> requested <a href="https://github.com/pchickey" title="https://github.com/pchickey">pchickey</a> and <a href="https://github.com/sunfishcode" title="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1600" title="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a>.</p>



<a name="198359387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/198359387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#198359387">(May 21 2020 at 18:40)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="198369750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/198369750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#198369750">(May 21 2020 at 20:05)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#pullrequestreview-416452427">PR Review</a>.</p>



<a name="198369751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/198369751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#198369751">(May 21 2020 at 20:05)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#discussion_r428884239">PR Review Comment</a>:</p>
<blockquote>
<p>The C API currently only accepts paths to files for stdin/stdout/stderr, so these should probably be <code>OsFile::try_from</code>.</p>
</blockquote>



<a name="200011256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200011256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200011256">(Jun 07 2020 at 06:57)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939 (hopefully!)</p>
</blockquote>



<a name="200012396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200012396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200012396">(Jun 07 2020 at 07:37)</a>:</h4>
<p>kubkon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939, #1636, #1735</p>
</blockquote>



<a name="200145397"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200145397" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200145397">(Jun 08 2020 at 19:34)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#pullrequestreview-426557971">PR Review</a>.</p>



<a name="200145398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200145398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200145398">(Jun 08 2020 at 19:34)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#pullrequestreview-426557971">PR Review</a>.</p>



<a name="200145399"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200145399" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200145399">(Jun 08 2020 at 19:34)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#discussion_r436952273">PR Review Comment</a>:</p>
<blockquote>
<p>Should this function be merged with <code>create_preview1_instance</code> like <code>create_snapshot0_instance</code> is implemented?</p>
</blockquote>



<a name="200211548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200211548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200211548">(Jun 09 2020 at 11:43)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939, #1636, #1735</p>
</blockquote>



<a name="200216187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200216187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200216187">(Jun 09 2020 at 12:16)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939, #1636, #1735</p>
</blockquote>



<a name="200261861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200261861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200261861">(Jun 09 2020 at 17:15)</a>:</h4>
<p>kubkon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a> from <code>vfs-stdio</code> to <code>master</code>:</p>
<blockquote>
<p>There have been requests to allow more than just raw OS handles to act as stdio in <code>wasi-common</code> (see #939). This PR makes this possible by loosening the requirement of the <code>WasiCtxBuilder</code> to accept any type <code>T: Handle + 'static</code> to act as any of the stdio handles.</p>
<p>A couple words about correctness of this approach. Currently, since we only have a single <code>Handle</code> super-trait to represent all possible WASI handle types (files, dirs, stdio, pipes, virtual, etc.), it is possible to pass in any type to act as stdio which can be wrong. However, I envision this being a problem only in the near(est) future until we work out how to split <code>Handle</code> into several traits (FYI @sunfishcode and I have already started figuring this out), each representing a different type of WASI resource. In this particular case, this would be a resource which would implement the interface required for a handle to act as a stdio (with appropriate rights, etc.).</p>
<p>@jeffcharles @pchickey The minimum this PR still needs is an audit of this approach for the time being (whether it's OK to go with it given the potential correctness problems I've outlined above). Docs around different now-public types are also a must if we decide to go with it. Oh, and I haven't really got to testing this approach, i.e., whether this is actually sufficient of a change to facilitate the requirements of #939. Any comments and feedback is thus most welcome!</p>
<p>Closes #939, #1636, #1735</p>
</blockquote>



<a name="200267102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200267102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200267102">(Jun 09 2020 at 17:57)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1600#pullrequestreview-427408031">PR Review</a>.</p>



<a name="200269706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231600%20Allow%20different%20Handles%20to%20act%20as%20stdio/near/200269706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231600.20Allow.20different.20Handles.20to.20act.20as.20stdio.html#200269706">(Jun 09 2020 at 18:19)</a>:</h4>
<p>kubkon merged <a href="https://github.com/bytecodealliance/wasmtime/pull/1600">PR #1600</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>