<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3917 fuzzing: No coverage of GC-ing whe... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html">wasmtime / issue #3917 fuzzing: No coverage of GC-ing whe...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="274887219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233917%20fuzzing%3A%20No%20coverage%20of%20GC-ing%20whe.../near/274887219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html#274887219">(Mar 10 2022 at 19:57)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3917">issue #3917</a>:</p>
<blockquote>
<p>I was poking around the coverage reports today and found that a surprising piece of dead code was <a href="https://github.com/bytecodealliance/wasmtime/blob/bc1170c2ddba9b8667ad888ac9080bb49410cbad/crates/runtime/src/externref.rs#L942-L969">this block</a> which is where we actually walk the stack map of a stack frame and find the live externref values to keep alive. This means that we have no fuzzing support for stack maps right now which exercises keeping live externref values on the stack alive.</p>
<p>I believe this is unintended so I'm opening an issue for this as this is definitely something that we're going to want to fuzz. The current <code>table_ops</code> fuzzer was thought to cover this but it does not ever make any gc calls with actual live values on the stack. We should either modify that fuzzer or make a new similar fuzzer which generates wasms which deal with <code>externref</code> and have live values on the stack when calls to gc (either explicit or implicit) are made.</p>
</blockquote>



<a name="274887220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233917%20fuzzing%3A%20No%20coverage%20of%20GC-ing%20whe.../near/274887220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html#274887220">(Mar 10 2022 at 19:57)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/3917">issue #3917</a>:</p>
<blockquote>
<p>I was poking around the coverage reports today and found that a surprising piece of dead code was <a href="https://github.com/bytecodealliance/wasmtime/blob/bc1170c2ddba9b8667ad888ac9080bb49410cbad/crates/runtime/src/externref.rs#L942-L969">this block</a> which is where we actually walk the stack map of a stack frame and find the live externref values to keep alive. This means that we have no fuzzing support for stack maps right now which exercises keeping live externref values on the stack alive.</p>
<p>I believe this is unintended so I'm opening an issue for this as this is definitely something that we're going to want to fuzz. The current <code>table_ops</code> fuzzer was thought to cover this but it does not ever make any gc calls with actual live values on the stack. We should either modify that fuzzer or make a new similar fuzzer which generates wasms which deal with <code>externref</code> and have live values on the stack when calls to gc (either explicit or implicit) are made.</p>
</blockquote>



<a name="274887222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233917%20fuzzing%3A%20No%20coverage%20of%20GC-ing%20whe.../near/274887222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html#274887222">(Mar 10 2022 at 19:57)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/3917">issue #3917</a>:</p>
<blockquote>
<p>I was poking around the coverage reports today and found that a surprising piece of dead code was <a href="https://github.com/bytecodealliance/wasmtime/blob/bc1170c2ddba9b8667ad888ac9080bb49410cbad/crates/runtime/src/externref.rs#L942-L969">this block</a> which is where we actually walk the stack map of a stack frame and find the live externref values to keep alive. This means that we have no fuzzing support for stack maps right now which exercises keeping live externref values on the stack alive.</p>
<p>I believe this is unintended so I'm opening an issue for this as this is definitely something that we're going to want to fuzz. The current <code>table_ops</code> fuzzer was thought to cover this but it does not ever make any gc calls with actual live values on the stack. We should either modify that fuzzer or make a new similar fuzzer which generates wasms which deal with <code>externref</code> and have live values on the stack when calls to gc (either explicit or implicit) are made.</p>
</blockquote>



<a name="274887223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233917%20fuzzing%3A%20No%20coverage%20of%20GC-ing%20whe.../near/274887223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html#274887223">(Mar 10 2022 at 19:57)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/3917">issue #3917</a>:</p>
<blockquote>
<p>I was poking around the coverage reports today and found that a surprising piece of dead code was <a href="https://github.com/bytecodealliance/wasmtime/blob/bc1170c2ddba9b8667ad888ac9080bb49410cbad/crates/runtime/src/externref.rs#L942-L969">this block</a> which is where we actually walk the stack map of a stack frame and find the live externref values to keep alive. This means that we have no fuzzing support for stack maps right now which exercises keeping live externref values on the stack alive.</p>
<p>I believe this is unintended so I'm opening an issue for this as this is definitely something that we're going to want to fuzz. The current <code>table_ops</code> fuzzer was thought to cover this but it does not ever make any gc calls with actual live values on the stack. We should either modify that fuzzer or make a new similar fuzzer which generates wasms which deal with <code>externref</code> and have live values on the stack when calls to gc (either explicit or implicit) are made.</p>
</blockquote>



<a name="278620144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233917%20fuzzing%3A%20No%20coverage%20of%20GC-ing%20whe.../near/278620144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233917.20fuzzing.3A.20No.20coverage.20of.20GC-ing.20whe.2E.2E.2E.html#278620144">(Apr 11 2022 at 21:33)</a>:</h4>
<p>fitzgen closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3917">issue #3917</a>:</p>
<blockquote>
<p>I was poking around the coverage reports today and found that a surprising piece of dead code was <a href="https://github.com/bytecodealliance/wasmtime/blob/bc1170c2ddba9b8667ad888ac9080bb49410cbad/crates/runtime/src/externref.rs#L942-L969">this block</a> which is where we actually walk the stack map of a stack frame and find the live externref values to keep alive. This means that we have no fuzzing support for stack maps right now which exercises keeping live externref values on the stack alive.</p>
<p>I believe this is unintended so I'm opening an issue for this as this is definitely something that we're going to want to fuzz. The current <code>table_ops</code> fuzzer was thought to cover this but it does not ever make any gc calls with actual live values on the stack. We should either modify that fuzzer or make a new similar fuzzer which generates wasms which deal with <code>externref</code> and have live values on the stack when calls to gc (either explicit or implicit) are made.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>