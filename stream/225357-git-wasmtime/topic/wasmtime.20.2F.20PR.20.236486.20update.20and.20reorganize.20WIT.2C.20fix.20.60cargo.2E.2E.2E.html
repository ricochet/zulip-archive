<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6486 update and reorganize WIT, fix `cargo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html">wasmtime / PR #6486 update and reorganize WIT, fix `cargo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="362553652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362553652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362553652">(May 31 2023 at 19:31)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<p>I used <a href="https://github.com/bytecodealliance/wit-deps">https://github.com/bytecodealliance/wit-deps</a> to populate the <code>wit/deps</code> directories, I checked in the corresponding <code>deps.toml</code> and <code>deps.lock</code> files for future <code>wit-deps update</code> usage, but I did not add a dependency on the tool (yet?) by either <code>build.rs</code> integration or direct binary usage like was requested in <a href="https://github.com/bytecodealliance/preview2-prototyping/pull/136">https://github.com/bytecodealliance/preview2-prototyping/pull/136</a> earlier</p>
<p>I also did not touch <code>crates/wasi/wit/deps</code> other than <code>preview</code>, since package is using dependency versions, which are different from upstream</p>
<ul>
<li>update outdated WIT files</li>
<li>move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code>, since <code>preview</code> package is the WASI package</li>
<li>fix <code>cargo vendor</code> use cases (downstream crates utilizing Wasmtime via <code>cargo vendor</code>) by ensuring that all WIT-using crates are self-contained</li>
<li>use consistent naming and location scheme for dependencies (e.g. <code>deps/cli-base</code> for <code>wasi:cli-base</code>, just like <code>deps/io</code> is used for <code>wasi:io</code>)</li>
</ul>
</blockquote>



<a name="362553945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362553945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362553945">(May 31 2023 at 19:32)</a>:</h4>
<p><strong>rvolosatovs</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a> as ready for review.</p>



<a name="362553955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362553955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362553955">(May 31 2023 at 19:32)</a>:</h4>
<p><strong>rvolosatovs</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362553956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362553956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362553956">(May 31 2023 at 19:32)</a>:</h4>
<p><strong>rvolosatovs</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362702752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362702752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362702752">(Jun 01 2023 at 10:29)</a>:</h4>
<p><strong>rvolosatovs</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362702755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362702755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362702755">(Jun 01 2023 at 10:29)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362703187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362703187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362703187">(Jun 01 2023 at 10:30)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
</blockquote>



<a name="362704882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362704882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362704882">(Jun 01 2023 at 10:36)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
<p>To update dependencies:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="w"> </span><span class="n">update</span>
</code></pre></div>
<p>To "lock" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="w"> </span><span class="n">lock</span>
</code></pre></div>
<p>Example of a lock operation:</p>
<p>Diff like:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div>
<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gh">index f2ad0e1e5..475c51d56 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gh">index 5c1e9d2f8..7897bb2dd 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>
<span class="gh">index 06e56aff9..55ae6d181 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi/wit/deps.lock</span>
<span class="gu">@@ -10,8 +10,8 @@ sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>

<span class="w"> </span>[filesystem]
<span class="w"> </span>path = "filesystem"
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>url = "https://github.com/WebAssembly/wasi-http/archive/main.tar.gz"
<span class="gh">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div><br>
</p>
</blockquote>



<a name="362705129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362705129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362705129">(Jun 01 2023 at 10:37)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362715062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362715062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362715062">(Jun 01 2023 at 11:12)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362715743"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362715743" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362715743">(Jun 01 2023 at 11:14)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 new dependency, so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href="https://github.com/bytecodealliance/wit-deps">https://github.com/bytecodealliance/wit-deps</a> as a binary directly</p>
<p>To update dependencies:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">update</span>
</code></pre></div>
<p>To "lock" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">lock</span>
</code></pre></div>
<p>Example of a lock operation:</p>
<p>Diff like:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div>
<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gh">index f2ad0e1e5..475c51d56 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gh">index 5c1e9d2f8..7897bb2dd 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>
<span class="gh">index 06e56aff9..55ae6d181 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi/wit/deps.lock</span>
<span class="gu">@@ -10,8 +10,8 @@ sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>

<span class="w"> </span>[filesystem]
<span class="w"> </span>path = "filesystem"
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>url = "https://github.com/WebAssembly/wasi-http/archive/main.tar.gz"
<span class="gh">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div><br>
</p>
</blockquote>



<a name="362715858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362715858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362715858">(Jun 01 2023 at 11:15)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href="https://github.com/bytecodealliance/wit-deps">https://github.com/bytecodealliance/wit-deps</a> as a binary directly</p>
<p>To update dependencies:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">update</span>
</code></pre></div>
<p>To "lock" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">lock</span>
</code></pre></div>
<p>Example of a lock operation:</p>
<p>Diff like:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div>
<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gh">index f2ad0e1e5..475c51d56 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gh">index 5c1e9d2f8..7897bb2dd 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>
<span class="gh">index 06e56aff9..55ae6d181 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi/wit/deps.lock</span>
<span class="gu">@@ -10,8 +10,8 @@ sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>

<span class="w"> </span>[filesystem]
<span class="w"> </span>path = "filesystem"
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>url = "https://github.com/WebAssembly/wasi-http/archive/main.tar.gz"
<span class="gh">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div><br>
</p>
</blockquote>



<a name="362716033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362716033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362716033">(Jun 01 2023 at 11:16)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href="https://github.com/bytecodealliance/wit-deps">https://github.com/bytecodealliance/wit-deps</a> as a binary directly (see <a href="https://github.com/bytecodealliance/wasmtime/pull/6486/commits/d6d6b1c633ac9469e71f7c3877fc2ba52d4368bf">https://github.com/bytecodealliance/wasmtime/pull/6486/commits/d6d6b1c633ac9469e71f7c3877fc2ba52d4368bf</a>)</p>
<p>To update dependencies:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">update</span>
</code></pre></div>
<p>To "lock" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">lock</span>
</code></pre></div>
<p>Example of a lock operation:</p>
<p>Diff like:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div>
<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gh">index f2ad0e1e5..475c51d56 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gh">index 5c1e9d2f8..7897bb2dd 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>
<span class="gh">index 06e56aff9..55ae6d181 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi/wit/deps.lock</span>
<span class="gu">@@ -10,8 +10,8 @@ sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>

<span class="w"> </span>[filesystem]
<span class="w"> </span>path = "filesystem"
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>url = "https://github.com/WebAssembly/wasi-http/archive/main.tar.gz"
<span class="gh">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div><br>
</p>
</blockquote>



<a name="362716244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362716244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362716244">(Jun 01 2023 at 11:16)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="362716313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/362716313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#362716313">(Jun 01 2023 at 11:17)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>Refs #6390</p>
<ul>
<li>Move <code>crates/wasi/wit/deps/preview</code> to <code>crates/wasi/wit</code></li>
<li>Move <code>crates/wasi/wit/test.wit</code> to <code>crates/test-programs/reactor-tests/wit/test.wit</code></li>
<li>Move custom standard packages used by <code>wasi</code> crate to <code>crates/wasi/{filesystem,clocks,cli}</code></li>
<li>Sync dependencies with upstream</li>
<li>Rename <code>wasi:cli-base</code> to <code>wasi:cli</code> to better match upstream</li>
<li>Introduce <code>wasmtime-wit-deps</code> development command to validate and update WIT dependencies</li>
</ul>
<p>NOTE: I have originally made the tool part of the workspace, but that required me to vet 71 dependency changes (additions/updates), so I moved it outside the workspace to remove the need for doing that, after all it should not influence the wasmtime dependency graph and we would not do this audit if we used <a href="https://github.com/bytecodealliance/wit-deps">https://github.com/bytecodealliance/wit-deps</a> as a binary directly (see <a href="https://github.com/bytecodealliance/wasmtime/pull/6486/commits/b22c571b911c1bbdd2d9356d72de18606d3e08ce">https://github.com/bytecodealliance/wasmtime/pull/6486/commits/b22c571b911c1bbdd2d9356d72de18606d3e08ce</a>)</p>
<p>To update dependencies:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">update</span>
</code></pre></div>
<p>To "lock" (e.g. to propagate local changes in <code>crates/wasi</code> to other crates without updating any dependencies from network)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">manifest</span><span class="o">-</span><span class="n">path</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wit</span><span class="o">-</span><span class="n">deps</span><span class="o">/</span><span class="n">Cargo</span><span class="p">.</span><span class="n">toml</span><span class="w"> </span><span class="n">lock</span>
</code></pre></div>
<p>Example of a lock operation:</p>
<p>Diff like:</p>
<div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/wasi/wit/filesystem/filesystem.wit b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div>
<p>followed by <code>cargo run -p wasmtime-wit-deps lock</code> would produce the following diff in the rest of the codebase:</p>
<p><div class="codehilite" data-code-language="Diff"><pre><span></span><code><span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps.lock b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gh">index f2ad0e1e5..475c51d56 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/test-programs/reactor-tests/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps.lock b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gh">index 5c1e9d2f8..7897bb2dd 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps.lock</span>
<span class="gu">@@ -7,8 +7,8 @@ sha256 = "e52b48c854965405223e61fded08da1450cf1ee7a0e5e546433f5fb0df7e1aff"</span>
<span class="w"> </span>sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f3165029efbec49e3c6b3e9b893d6102d31aae1d8119eb38222233afc9ce62"

<span class="w"> </span>[filesystem]
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>sha256 = "3d41ce13364177bdf7eea92d78d9ab302ccd5d9462cfdf074677d50244c565b1"
<span class="gh">diff --git a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi-preview1-component-adapter/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
<span class="gh">diff --git a/crates/wasi/wit/deps.lock b/crates/wasi/wit/deps.lock</span>
<span class="gh">index 06e56aff9..55ae6d181 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps.lock</span>
<span class="gi">+++ b/crates/wasi/wit/deps.lock</span>
<span class="gu">@@ -10,8 +10,8 @@ sha512 = "62a781f27f60c9f882f878578ffc2c0c0ad92bbdbed8c727ec588ca345da348690f316</span>

<span class="w"> </span>[filesystem]
<span class="w"> </span>path = "filesystem"
<span class="gd">-sha256 = "2bfd4a753f7b937c1c32d40c785a2a43414fe3ba062be4b6c6264e07efd8e0d9"</span>
<span class="gd">-sha512 = "4c1f68f9b57bb9fc0564062ae848fdecfba1b33116d03fb17014a23e9fb5ed3f0a1ceaf853397216d40288079c835d11c7f7a9830656da2812cdbddf87247dc5"</span>
<span class="gi">+sha256 = "6f15b1a87e7de09972af5fdd9114cabda085e81a0aa3669ab4e86a6faa982f9a"</span>
<span class="gi">+sha512 = "c9c81eda59bb9286d5ad0b830a5c720279bcf9f57cf8bf65a7febc50275a8b6883f445edf6f382fdaa19088a8093ded5e210801e7012bec8f4c5ce990f674120"</span>

<span class="w"> </span>[http]
<span class="w"> </span>url = "https://github.com/WebAssembly/wasi-http/archive/main.tar.gz"
<span class="gh">diff --git a/crates/wasi/wit/deps/filesystem/filesystem.wit b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gh">index 930f37567..3a60fe5c4 100644</span>
<span class="gd">--- a/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gi">+++ b/crates/wasi/wit/deps/filesystem/filesystem.wit</span>
<span class="gu">@@ -1,5 +1,6 @@</span>
<span class="w"> </span>package wasi:filesystem

<span class="gi">+</span>
<span class="w"> </span>/// WASI filesystem is a filesystem API primarily intended to let users run WASI
<span class="w"> </span>/// programs that access their files on their existing filesystems, without
<span class="w"> </span>/// significant overhead.
</code></pre></div><br>
</p>
</blockquote>



<a name="363048255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/363048255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#363048255">(Jun 02 2023 at 13:21)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="366457016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/366457016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#366457016">(Jun 15 2023 at 11:11)</a>:</h4>
<p>rvolosatovs updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>.</p>



<a name="366458415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/366458415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#366458415">(Jun 15 2023 at 11:16)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>(I have removed the old description, since it's no longer relevant)<br>
Duplicate WIT dependencies of <code>wasi</code> crate in <code>wasi-preview1-component-adapter</code> to avoid using relative paths in <code>wit-bindgen</code> invocations fixing downstream dependencies on <code>wasi-preview1-component-adapter</code> using <code>cargo vendor</code></p>
</blockquote>



<a name="366458892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236486%20update%20and%20reorganize%20WIT%2C%20fix%20%60cargo.../near/366458892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236486.20update.20and.20reorganize.20WIT.2C.20fix.20.60cargo.2E.2E.2E.html#366458892">(Jun 15 2023 at 11:17)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6486">PR #6486</a>:</p>
<blockquote>
<p>(I have removed the old description, since it's no longer relevant)<br>
Duplicate WIT dependencies of <code>wasi</code> crate in <code>wasi-preview1-component-adapter</code> to avoid using relative paths in <code>wit-bindgen</code> invocations fixing downstream dependencies on <code>wasi-preview1-component-adapter</code> using <code>cargo vendor</code></p>
<p>This is checked in CI, but developers are free to use whichever tool they chose to achieve this. Running <code>wit-deps lock</code> from <code>crates/wasi-preview1-component-adapter</code> is one way to do it </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>