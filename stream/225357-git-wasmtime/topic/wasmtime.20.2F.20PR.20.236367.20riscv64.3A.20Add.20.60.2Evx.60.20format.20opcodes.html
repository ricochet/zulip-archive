<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6367 riscv64: Add `.vx` format opcodes · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html">wasmtime / PR #6367 riscv64: Add `.vx` format opcodes</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="357275597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357275597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357275597">(May 10 2023 at 12:40)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a> from <code>afonso360:riscv-vx</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR introduces <code>.vx</code> format opcodes, these <code>splat</code> an X or F register and perform the respective operation.</p>
<p>I've only added <code>vadd</code>, <code>vsub</code> and <code>vrsub</code>, but these are available for most opcodes.</p>
<p>Additionally with the addition of <code>ineg</code> we now pass the <code>simd_*_arith.wast</code> test suites <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> . I'm planning on enabling those when both this and the RegClass PR's are merged.</p>
</blockquote>



<a name="357275602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357275602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357275602">(May 10 2023 at 12:40)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a>.</p>



<a name="357275603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357275603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357275603">(May 10 2023 at 12:40)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a>.</p>



<a name="357308756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357308756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357308756">(May 10 2023 at 14:20)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1189986873">PR review comment</a>:</p>
<blockquote>
<p>This assert triggers since we are now trying to format some integer registers and I didn't change the pretty printer. However this function gets removed in #6366, so I figured it's easier to wait for that to be merged and rebase this.</p>
</blockquote>



<a name="357429270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357429270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357429270">(May 11 2023 at 00:49)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#pullrequestreview-1421518862">PR review</a>:</p>
<blockquote>
<p>Just one quick question about the funct6 values for Vadd and Vsub, otherwise this looks great!</p>
</blockquote>



<a name="357429271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357429271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357429271">(May 11 2023 at 00:49)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#pullrequestreview-1421518862">PR review</a>:</p>
<blockquote>
<p>Just one quick question about the funct6 values for Vadd and Vsub, otherwise this looks great!</p>
</blockquote>



<a name="357429272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357429272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357429272">(May 11 2023 at 00:49)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1190495947">PR review comment</a>:</p>
<blockquote>
<p>What needs to change for these to be converted to <code>Vector</code>?</p>
</blockquote>



<a name="357429273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357429273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357429273">(May 11 2023 at 00:49)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1190514165">PR review comment</a>:</p>
<blockquote>
<p>It's surprising that the vector/vector and vector/scalar combinations have the same <code>funct6</code> value. Does something else end up distinguishing those cases?</p>
</blockquote>



<a name="357515447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357515447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357515447">(May 11 2023 at 09:01)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1190864012">PR review comment</a>:</p>
<blockquote>
<p>Nothing really, just waiting on <a href="https://github.com/bytecodealliance/wasmtime/pull/6366">https://github.com/bytecodealliance/wasmtime/pull/6366</a> to be merged.</p>
</blockquote>



<a name="357516533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357516533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357516533">(May 11 2023 at 09:05)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1190868891">PR review comment</a>:</p>
<blockquote>
<p>Yes, <code>funct3</code> usually dictates the source/destination register types for most opcodes.</p>
</blockquote>



<a name="357516741"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357516741" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357516741">(May 11 2023 at 09:06)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#discussion_r1190868891">PR review comment</a>.</p>



<a name="357637778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/357637778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#357637778">(May 11 2023 at 16:08)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6367#pullrequestreview-1422973870">PR review</a>:</p>
<blockquote>
<p>Looks great, thank you Afonso!</p>
</blockquote>



<a name="358842271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/358842271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#358842271">(May 16 2023 at 20:35)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a>.</p>



<a name="358842404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/358842404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#358842404">(May 16 2023 at 20:36)</a>:</h4>
<p>afonso360 has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a>.</p>



<a name="358855305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236367%20riscv64%3A%20Add%20%60.vx%60%20format%20opcodes/near/358855305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236367.20riscv64.3A.20Add.20.60.2Evx.60.20format.20opcodes.html#358855305">(May 16 2023 at 22:00)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6367">PR #6367</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>