<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6806 Sync wasi-cli with wit definitions in... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html">wasmtime / PR #6806 Sync wasi-cli with wit definitions in...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="381995578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/381995578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#381995578">(Aug 04 2023 at 23:50)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a> from <code>bytecodealliance:pch/sync_wasi_cli</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Based on top of #6791 </p>
<p>See also:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a> - pending<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a> - landed</p>
<p>still TODO: <a href="https://github.com/WebAssembly/wasi-io/pull/38">https://github.com/WebAssembly/wasi-io/pull/38</a></p>
</blockquote>



<a name="381995611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/381995611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#381995611">(Aug 04 2023 at 23:51)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>:</p>
<blockquote>
<p>Based on top of #6791 </p>
<p>See also:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a> - pending<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a> - landed</p>
<p>still TODO: <a href="https://github.com/WebAssembly/wasi-io/pull/38">https://github.com/WebAssembly/wasi-io/pull/38</a><br>
and needs test coverage, presently has none</p>
</blockquote>



<a name="383102043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/383102043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#383102043">(Aug 08 2023 at 23:50)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="383116596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/383116596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#383116596">(Aug 09 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="383337081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/383337081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#383337081">(Aug 09 2023 at 15:52)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="383473365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/383473365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#383473365">(Aug 10 2023 at 02:07)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384909761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384909761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384909761">(Aug 14 2023 at 21:03)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384909799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384909799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384909799">(Aug 14 2023 at 21:03)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384916295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384916295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384916295">(Aug 14 2023 at 21:49)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384927548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384927548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384927548">(Aug 14 2023 at 23:18)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>:</p>
<blockquote>
<p>See also:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a> - pending<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a> - landed</p>
<p>still TODO: <a href="https://github.com/WebAssembly/wasi-io/pull/38">https://github.com/WebAssembly/wasi-io/pull/38</a><br>
and needs test coverage, presently has none</p>
</blockquote>



<a name="384927750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384927750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384927750">(Aug 14 2023 at 23:20)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>:</p>
<blockquote>
<p>This PR synchronizes the wasi:cli package with the upstream spec definition.</p>
<p>As part of this PR I upstreamed changes from the wasmtime repo:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a><br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a></p>
</blockquote>



<a name="384928208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384928208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384928208">(Aug 14 2023 at 23:24)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>:</p>
<blockquote>
<p>This PR synchronizes the wasi:cli package with the upstream spec definition.</p>
<p>As part of this PR I upstreamed changes from the wasmtime repo:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a><br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a></p>
<p>The changes arriving downstream in this change are</p>
<ol>
<li>eliminating the patchwork of "temporary" fixes to the cli definition as the wit language evolved alongside the implementation. This involved calling the package "cli-base" in the wasmtime repo, and putting world definitions separately in a "preview" package.</li>
<li>adding implementations of the <code>terminal-{input, output, stdin, stdout, stderr}</code> functions to the cli implementation, which allows us to implement <code>isatty</code>, bringing preview2's view of stdio to parity with preview 1, where fd_filestat_get could be used to determine whether stdio were ttys. I made some changes in wasi-tests to exercise this functionality to show that it works in all 5 of our WASI implementations. (yes i roll my eyes every time i type all 5 wasi implementations to, because i wrote them, what have i done. what did they do to us)<br>
</li>
</ol>
</blockquote>



<a name="384928217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384928217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384928217">(Aug 14 2023 at 23:25)</a>:</h4>
<p><strong>pchickey</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a> as ready for review.</p>



<a name="384928219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384928219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384928219">(Aug 14 2023 at 23:25)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384928220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384928220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384928220">(Aug 14 2023 at 23:25)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384928221"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384928221" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384928221">(Aug 14 2023 at 23:25)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384929928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384929928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384929928">(Aug 14 2023 at 23:42)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384929996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384929996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384929996">(Aug 14 2023 at 23:43)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384930164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384930164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384930164">(Aug 14 2023 at 23:44)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6806#pullrequestreview-1577802849">PR review</a>:</p>
<blockquote>
<p>This looks great!</p>
</blockquote>



<a name="384934331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384934331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384934331">(Aug 15 2023 at 00:16)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384934360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384934360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384934360">(Aug 15 2023 at 00:16)</a>:</h4>
<p>elliottt has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="384945173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/384945173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#384945173">(Aug 15 2023 at 01:28)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="385230223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/385230223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#385230223">(Aug 15 2023 at 15:31)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="385230677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/385230677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#385230677">(Aug 15 2023 at 15:32)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<a name="385230768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/385230768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#385230768">(Aug 15 2023 at 15:33)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>:</p>
<blockquote>
<p>This PR synchronizes the wasi:cli package with the upstream spec definition.</p>
<p>As part of this PR I upstreamed changes from the wasmtime repo:<br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/19">https://github.com/WebAssembly/wasi-cli/pull/19</a><br>
<a href="https://github.com/WebAssembly/wasi-cli/pull/20">https://github.com/WebAssembly/wasi-cli/pull/20</a></p>
<p>The changes arriving downstream in this change are</p>
<ol>
<li>eliminating the patchwork of "temporary" fixes to the cli definition as the wit language evolved alongside the implementation. This involved calling the package "cli-base" in the wasmtime repo, and putting world definitions separately in a "preview" package.</li>
<li>adding implementations of the <code>terminal-{input, output, stdin, stdout, stderr}</code> functions to the cli implementation, which allows us to implement <code>isatty</code>, bringing preview2's view of stdio to parity with preview 1, where fd_filestat_get could be used to determine whether stdio were ttys. I made some changes in wasi-tests to exercise this functionality to show that it works in all 5 of our WASI implementations. (yes i roll my eyes every time i type all 5 wasi implementations too. because i wrote them. what have i done. what did they do to us)<br>
</li>
</ol>
</blockquote>



<a name="385252931"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236806%20Sync%20wasi-cli%20with%20wit%20definitions%20in.../near/385252931" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236806.20Sync.20wasi-cli.20with.20wit.20definitions.20in.2E.2E.2E.html#385252931">(Aug 15 2023 at 16:58)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6806">PR #6806</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>