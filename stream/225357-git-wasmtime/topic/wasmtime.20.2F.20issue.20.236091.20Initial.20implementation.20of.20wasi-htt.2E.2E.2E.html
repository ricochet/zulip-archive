<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6091 Initial implementation of wasi-htt... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html">wasmtime / issue #6091 Initial implementation of wasi-htt...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="347301206"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/347301206" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#347301206">(Apr 06 2023 at 04:39)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1498483081">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Now that #5929 has merged, I think this is ready for review. We may want to merge #6161 first since this PR includes that one.</p>
</blockquote>



<a name="349146563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/349146563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#349146563">(Apr 13 2023 at 15:39)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1507189257">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Hi, sorry, I haven't forgotten about this PR, I have just been focusing on getting some other stuff done this week and haven't had time to review. I have set aside some time for it tomorrow.</p>
</blockquote>



<a name="350178025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/350178025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#350178025">(Apr 15 2023 at 15:06)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1509866853">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey no worries, I'm not in a rush.</p>
</blockquote>



<a name="351396799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/351396799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#351396799">(Apr 20 2023 at 18:08)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1516744185">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Can this be rebased on top of <a href="https://github.com/bytecodealliance/wasmtime/pull/6228">https://github.com/bytecodealliance/wasmtime/pull/6228</a> (or <code>main</code> once it lands) now?</p>
</blockquote>



<a name="351416088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/351416088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#351416088">(Apr 20 2023 at 19:51)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1516865034">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Yes, I plan to rebase this once it merges.</p>
</blockquote>



<a name="351416274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/351416274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#351416274">(Apr 20 2023 at 19:52)</a>:</h4>
<p>brendandburns edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1516865034">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Yes, I plan to rebase this once #6228 merges.</p>
<p>While we're on the topic of rebase, do you have a good strategy for rebasing this repo since we're doing squash merges? My standard flow is <code>git fetch upstream; git rebase upstream/main</code> but that seems to cause conflicts when rebasing on top of the squashed PR that has merged into main.</p>
</blockquote>



<a name="352333188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/352333188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#352333188">(Apr 24 2023 at 16:52)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1520514393">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>I end up using <code>git rebase -i</code> and delete all the lines that correspond to the squashed PRs that already landed.</p>
</blockquote>



<a name="352594008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/352594008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#352594008">(Apr 25 2023 at 16:58)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1522124589">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey this is rebased and ready for initial review.<br>
</p>
</blockquote>



<a name="352932322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/352932322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#352932322">(Apr 26 2023 at 19:37)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1523944424">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey thanks for the review and the idiomatic suggestions. I will update this PR to reflect the async request above and fix the idiomatic bits too (and add a test)</p>
<p>It will probably take me a few days to get enough free cycles to get it done, but should be by the end of the week.</p>
</blockquote>



<a name="353967560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/353967560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#353967560">(Apr 28 2023 at 16:31)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1527807692">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey as I dug into this it seems that a bunch of components (e.g. the <code>Store</code>) don't implement the <code>Send</code> trait which means they can't be passed into an async function (at least as far as I can tell)</p>
<p>Do you have a perspective on if it is ok to modify them to implement <code>Send</code> or if there is some other approach that is preferable.</p>
</blockquote>



<a name="354010189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/354010189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#354010189">(Apr 28 2023 at 18:02)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1527910215">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Your "context" struct <code>WasiHttp</code> will need to impl Send in order for Store&lt;WasiHttp&gt; to be used by the async wasmtime apis.</p>
<p>The good news is the design goal for the wasmtime async apis was to work perfectly inside a hyper service, <a href="https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs">https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs</a> was the prototype where we actually fleshed all that design out a few years ago. So maybe you can crib some of the patterns there. The bad news is that async Rust has a steep learning curve, and the error messages from rustc aren't quite as brilliant as they are for the rest of the language. If you need to pair program on this for an hour sometime, my calendar next week is pretty open, but I am taking off Friday.</p>
</blockquote>



<a name="354014971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/354014971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#354014971">(Apr 28 2023 at 18:14)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1527910215">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Your "context" struct <code>WasiHttp</code> will need to impl Send in order for Store&lt;WasiHttp&gt; to be used by the async wasmtime apis. If the struct is composed out of Send elements this should be automatic - if rustc is not letting you have a Send impl, don't derive an unsafe one.</p>
<p>The good news is the design goal for the wasmtime async apis was to work perfectly inside a hyper service, <a href="https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs">https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs</a> was the prototype where we actually fleshed all that design out a few years ago. So maybe you can crib some of the patterns there. The bad news is that async Rust has a steep learning curve, and the error messages from rustc aren't quite as brilliant as they are for the rest of the language. If you need to pair program on this for an hour sometime, my calendar next week is pretty open, but I am taking off Friday.</p>
</blockquote>



<a name="354033946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/354033946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#354033946">(Apr 28 2023 at 19:19)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1527991159">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>The biggest problem that I see is that in order to make a call into the WASM module you need to pass the <code>Linker</code> and the <code>Store</code> into the async function and neither of those implement <code>Send</code></p>
<p>The reason that I need to pass it is because the only time that you can get access to that is when the context is constructed (at least as far as I can tell). If there was a way to statically get at the <code>Linker</code> and the <code>Store</code> then it would just be a question of making my context <code>Send</code> but those other wasmtime resources need to be part of the context also.</p>
<p>Looks like you worked around this by constructing the store and linking _inside_ each HTTP execution:</p>
<p><a href="https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs#L301">https://github.com/fastly/Viceroy/blob/main/lib/src/execute.rs#L301</a></p>
<p>Which might be possible here, but would require some pretty significant rewiring since that is created/configured via flags etc in a different place.</p>
</blockquote>



<a name="354055416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/354055416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#354055416">(Apr 28 2023 at 21:29)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1528114071">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>That's right - the pattern required is to construct a store inside each execution so we can give the host functions a mut ref to the Store's T, otherwise you would need to use Arc&lt;Mutex&lt;&gt;&gt; and lock every use to get something Send and Sync to communicate with outside of the execution. The context will have to be designed to take this into account. We pass in the LinkerPre structure to amortize linking, but that will be up to the embedder. Store::new and LinkerPre.instantiate_async is designed to be extremely fast when used with the memory pooling features in the Engine.</p>
</blockquote>



<a name="354055894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/354055894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#354055894">(Apr 28 2023 at 21:32)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1528114071">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>That's right - the pattern required is to construct a store inside each execution so we can give the host functions a mut ref to the Store's T, otherwise you would need to use Arc&lt;Mutex&lt;&gt;&gt; and lock every use to get something Send and Sync to communicate with outside of the execution. The context will have to be designed to take into account that it is created from the embedder's per-http request execution, not the other way around.</p>
<p>Viceroy passes in the LinkerPre structure to amortize linking, but that will be up to the embedder. Store::new and LinkerPre.instantiate_async is designed to be extremely fast when used with the memory pooling features in the Engine.</p>
</blockquote>



<a name="357435313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/357435313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#357435313">(May 11 2023 at 01:41)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1543104432">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Just a quick update that this PR is proving to be more thorny/invasive than I thought b/c of the interplay of Store/Linker/Host.</p>
<p>I think that there needs to be some significant refactoring of how the <code>run</code> command is written to make parts of it accessible in other parts of the code-base.</p>
<p>I'm still working on it (slowly) but it might be a bit of time before this arrives.<br>
</p>
</blockquote>



<a name="357981274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/357981274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#357981274">(May 12 2023 at 20:35)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1546261512">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey ok, I got this working with the switch to <code>call_async</code> and <code>instantiate_async</code>.</p>
<p>Can you take a look and see if this is what you had in mind?</p>
<p>If it looks directionally correct, I'll work on the style and tests.</p>
<p>Thanks!</p>
</blockquote>



<a name="358991608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/358991608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#358991608">(May 17 2023 at 13:59)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1551452848">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey does your <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> mean that this looks correct? Or did it just mean "acknowledged, I will take a look when I get a chance"?</p>
<p>Sorry, the meaning of response emojis are sometimes hard to parse :)</p>
</blockquote>



<a name="359102039"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/359102039" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#359102039">(May 17 2023 at 23:46)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1552221006">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Hi, sorry, the +1 was an acknowledgement that I was going to review it, but I haven't had time to spend on it yet, this week I have been heads down trying to move all of the preview2-prototying repo into this one.</p>
<p>Taking a brief look now, this didn't turn out exactly like I had envisioned, but I am not sure exactly what to suggest to change, I will have to play with refactoring it a bit myself to figure out the right direction. Sorry that isn't very actionable feedback. I will spend time on this next week.</p>
</blockquote>



<a name="359458050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/359458050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#359458050">(May 18 2023 at 17:36)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1553394885">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey sounds good. I actually spent a bunch of time on the refactoring also, I took three different paths at it and this was the one that seemed most "right"</p>
<p>But I'm definitely open to other options.</p>
<p>The most radical one would be to make all wasmtime executions <code>async</code> instead of the current <code>sync</code> default, but I considered that to be to significant of a change to entertain.</p>
</blockquote>



<a name="362917711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/362917711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#362917711">(Jun 02 2023 at 02:25)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1573047395">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey this is updated with a rebase to reflect the recent wit changes.<br>
</p>
</blockquote>



<a name="368909650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/368909650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#368909650">(Jun 23 2023 at 14:07)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1604336981">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>@pchickey friendly ping on this, I suspect that you are busy on other things, so no rush, but wondering what the status of this is.</p>
<p>Thanks!</p>
</blockquote>



<a name="369813487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/369813487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#369813487">(Jun 26 2023 at 19:34)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1608111830">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Right now I am working on getting the preview 2 host streams and pollable implementation landed in #6556. That is the prerequisite for getting wasi-http integrated with the rest of the component model implementation in wasmtime.</p>
<p>Once #6556 lands we need to do pretty hefty renovations to the wasi-http implementation to rebase it on top of that work. @dicej has successfully made a new implementation based on a somewhat similar implementation of streams and pollable <a href="https://github.com/fermyon/spin/blob/132a32daed6632768d52a9336125073e87fee1e8/crates/wasi-cloud/src/http.rs">https://github.com/fermyon/spin/blob/132a32daed6632768d52a9336125073e87fee1e8/crates/wasi-cloud/src/http.rs</a>. The current consensus is that Joel will spearhead the effort to get wasmtime-wasi-http running on top of streams - we are expecting this to more or less amount to a rewrite as he ports his work from the spin repo into this crate. His upstream work also contains a (related, but again a little bit different) implementation of the server piece of this puzzle.</p>
<p>So, I think at this point we have to set this PR aside.</p>
</blockquote>



<a name="389300204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236091%20Initial%20implementation%20of%20wasi-htt.../near/389300204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236091.20Initial.20implementation.20of.20wasi-htt.2E.2E.2E.html#389300204">(Sep 05 2023 at 23:23)</a>:</h4>
<p>brendandburns <a href="https://github.com/bytecodealliance/wasmtime/pull/6091#issuecomment-1707433789">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6091">issue #6091</a>:</p>
<blockquote>
<p>Closing as obsolete.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>