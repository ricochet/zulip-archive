<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9258 Remove StructArgument support from th... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html">wasmtime / PR #9258 Remove StructArgument support from th...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="470714598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470714598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470714598">(Sep 16 2024 at 19:07)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a> from <code>bjorn3:abi_cleanup2</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Unlike x86_64 and some other architectures where large structs are passed at fixed stack offsets, necessitating special Cranelift support, arm64, riscv64 and s390x pass them using regular pointer arguments that can trivially be implemented by frontends.</p>
<p>The current implementation of StructArgument on arm64 and riscv64 uses fixed stack offsets just like on x86_64, which is incorrect as per the ABI documentation. In other words any correct frontend already had to avoid StructArgument on arm64 and riscv64 anyway. For s390x it is correctly implemented but unnecessary and taints even non-s390x specific code.</p>
</blockquote>



<a name="470714607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470714607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470714607">(Sep 16 2024 at 19:07)</a>:</h4>
<p><strong>bjorn3</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a>.</p>



<a name="470714608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470714608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470714608">(Sep 16 2024 at 19:07)</a>:</h4>
<p><strong>bjorn3</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a>.</p>



<a name="470715682"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470715682" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470715682">(Sep 16 2024 at 19:11)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/9258#issuecomment-2353711582">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a>:</p>
<blockquote>
<p>All cg_clif tests pass on arm64.</p>
</blockquote>



<a name="470717525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470717525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470717525">(Sep 16 2024 at 19:18)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9258#pullrequestreview-2307571808">PR review</a>:</p>
<blockquote>
<p>Looks reasonable to me -- thanks for this simplification!</p>
</blockquote>



<a name="470717551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470717551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470717551">(Sep 16 2024 at 19:18)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a>.</p>



<a name="470722520"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239258%20Remove%20StructArgument%20support%20from%20th.../near/470722520" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239258.20Remove.20StructArgument.20support.20from.20th.2E.2E.2E.html#470722520">(Sep 16 2024 at 19:37)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9258">PR #9258</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>