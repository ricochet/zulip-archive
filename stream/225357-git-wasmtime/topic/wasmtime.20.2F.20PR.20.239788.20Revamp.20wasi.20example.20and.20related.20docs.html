<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9788 Revamp wasi example and related docs · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html">wasmtime / PR #9788 Revamp wasi example and related docs</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="488146946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488146946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488146946">(Dec 11 2024 at 17:09)</a>:</h4>
<p>ifsheldon opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a> from <code>ifsheldon:revamp-wasi</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Closes #9777</p>
<p>For now, this is a draft PR because there's a runtime issue in the revamp example. Please see the FIXME in <code>examples/wasi/main.rs</code>. Probably @alexcrichton can help a bit? Thanks!</p>
<p>When the runtime issue is fixed, I will try to revamp more sections in the related doc in following commits. </p>
</blockquote>



<a name="488147505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488147505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488147505">(Dec 11 2024 at 17:12)</a>:</h4>
<p>ifsheldon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Closes #9777</p>
<p>For now, this is a draft PR because there's a runtime issue in the revamp example. Please see the FIXME in <code>examples/wasi/main.rs</code>. There I want to invoke the exported <code>wasi:cli/run@0.2.0</code> function, which is the main function in <code>examples/wasi/wasm/wasi.rs</code>. Probably @alexcrichton or @fitzgen can help a bit? Thanks!</p>
<p>When the runtime issue is fixed, I will try to revamp more sections in the related doc in following commits. </p>
</blockquote>



<a name="488676324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488676324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488676324">(Dec 12 2024 at 16:45)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2500214782">PR review</a>.</p>



<a name="488676325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488676325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488676325">(Dec 12 2024 at 16:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1882508716">PR review comment</a>:</p>
<blockquote>
<p>I might recommend not using an exact rustc version here or just omitting this entirely. All relatively recent rust toolchains will give an error "this is too old" already so it's probably sufficient to just say "have rust installed" here</p>
</blockquote>



<a name="488676326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488676326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488676326">(Dec 12 2024 at 16:45)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1882509984">PR review comment</a>:</p>
<blockquote>
<p>For this, would <a href="https://docs.rs/wasmtime-wasi/latest/wasmtime_wasi/bindings/sync/struct.Command.html">this example</a> help?</p>
</blockquote>



<a name="488755168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755168">(Dec 13 2024 at 02:53)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488755186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755186">(Dec 13 2024 at 02:53)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2501145135">PR review</a>.</p>



<a name="488755187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755187">(Dec 13 2024 at 02:53)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1883177126">PR review comment</a>:</p>
<blockquote>
<p>updated</p>
</blockquote>



<a name="488755256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755256">(Dec 13 2024 at 02:54)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2501145736">PR review</a>.</p>



<a name="488755258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755258">(Dec 13 2024 at 02:54)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1883177711">PR review comment</a>:</p>
<blockquote>
<p>Yes, thanks!</p>
</blockquote>



<a name="488755575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488755575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488755575">(Dec 13 2024 at 02:58)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2540428463">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>But now there comes another issue: this hello-world example is just too specific to wasi:cli, since we used a specific <code>wasmtime_wasi::bindings::sync::Command</code> to run a <code>wasi:cli/command</code>. For a more general component, we need to add another example or at least give a pointer.</p>
<p>BTW, I still don't know why I could not get a <code>Func</code> to execute the <code>run</code> function in <code>wasi:cli/run</code>. </p>
</blockquote>



<a name="488889147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488889147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488889147">(Dec 13 2024 at 17:33)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2541929023">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Personally I think it's reasonable to start with hello-world like this and then graduate up to other examples. For example this page could link to the <code>bindgen_examples</code> page and that could get expanded with a custom world for example (IIRC there may already be one there?)</p>
<blockquote>
<p>BTW, I still don't know why I could not get a Func to execute the run function in wasi:cli/run.</p>
</blockquote>
<p>You needed another invocation of <code>get_export</code>. You loaded the exported instance but you'll need to load the exported function of that instance as well.</p>
</blockquote>



<a name="488992010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992010">(Dec 14 2024 at 12:54)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488992371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992371">(Dec 14 2024 at 12:59)</a>:</h4>
<p>ifsheldon edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Closes #9777</p>
<p><del>For now, this is a draft PR because there's a runtime issue in the revamp example. Please see the FIXME in <code>examples/wasi/main.rs</code>. There I want to invoke the exported <code>wasi:cli/run@0.2.0</code> function, which is the main function in <code>examples/wasi/wasm/wasi.rs</code>. Probably @alexcrichton or @fitzgen can help a bit? Thanks!</del></p>
<p><del>When the runtime issue is fixed, I will try to revamp more sections in the related doc in following commits</del></p>
<p>Updated:</p>
<p>This PR revamps the examples <code>wasi</code> and <code>wasi-async</code> with latest updates from <code>wasmtime</code> and <code>wasmtime-wasi</code> and uses WASIp2 APIs by default. Related documentation is also updated.</p>
</blockquote>



<a name="488992381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992381">(Dec 14 2024 at 12:59)</a>:</h4>
<p><strong>ifsheldon</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a> as ready for review.</p>



<a name="488992382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992382">(Dec 14 2024 at 12:59)</a>:</h4>
<p><strong>ifsheldon</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488992383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992383">(Dec 14 2024 at 12:59)</a>:</h4>
<p><strong>ifsheldon</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488992384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992384">(Dec 14 2024 at 12:59)</a>:</h4>
<p><strong>ifsheldon</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488992507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488992507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488992507">(Dec 14 2024 at 13:00)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2543100754">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>OK, I think this draft PR seems good to me now, so I turned it into a formal PR.</p>
</blockquote>



<a name="488995588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488995588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488995588">(Dec 14 2024 at 13:43)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="488996371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488996371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488996371">(Dec 14 2024 at 13:54)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2543118673">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<blockquote>
<p>You needed another invocation of get_export. You loaded the exported instance but you'll need to load the exported function of that instance as well.</p>
</blockquote>
<p>OK, got that. I also added related code in the example to demonstrate how to do that. </p>
<p>BTW, do you know why <a href="https://docs.rs/wasmtime/latest/wasmtime/component/trait.ComponentNamedList.html"><code>ComponentNamedList</code></a> is implemented for tuple <code>(A1,)</code> but not <code>A1</code>? This is bit counter-intuitive when I want to write something like <code>func.typed::&lt;(), Result&lt;(), ()&gt;&gt;(&amp;store)</code>, which <code>rustc</code> complains about not implementing <code>ComponentNamedList</code>. I really didn't know how to fix this error until I lookup <code>Implementations on Foreign Types</code> section of <a href="https://docs.rs/wasmtime/latest/wasmtime/component/trait.ComponentNamedList.html"><code>ComponentNamedList</code></a>.</p>
</blockquote>



<a name="488996439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/488996439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#488996439">(Dec 14 2024 at 13:55)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2543118673">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<blockquote>
<p>You needed another invocation of get_export. You loaded the exported instance but you'll need to load the exported function of that instance as well.</p>
</blockquote>
<p>OK, got that. I also added related code in the example to demonstrate how to do that. </p>
<p>BTW, do you know why <a href="https://docs.rs/wasmtime/latest/wasmtime/component/trait.ComponentNamedList.html"><code>ComponentNamedList</code></a> is implemented for tuple <code>(A1,)</code> but not <code>A1</code>? Should I file another issue for this? This is bit counter-intuitive when I want to write something like <code>func.typed::&lt;(), Result&lt;(), ()&gt;&gt;(&amp;store)</code>, which <code>rustc</code> complains about not implementing <code>ComponentNamedList</code>. I really didn't know how to fix this error until I lookup <code>Implementations on Foreign Types</code> section of <a href="https://docs.rs/wasmtime/latest/wasmtime/component/trait.ComponentNamedList.html"><code>ComponentNamedList</code></a>.</p>
</blockquote>



<a name="489000760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489000760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489000760">(Dec 14 2024 at 14:52)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489081118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489081118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489081118">(Dec 15 2024 at 12:39)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489269933"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489269933" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489269933">(Dec 16 2024 at 15:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2506557865">PR review</a>:</p>
<blockquote>
<p>Thanks!</p>
<blockquote>
<p>This is bit counter-intuitive when I want to write something like func.typed::&lt;(), Result&lt;(), ()&gt;&gt;(&amp;store),</p>
</blockquote>
<p>This is currently intentional in the sense that it's in theory preferred to use the output of <code>bindgen!</code> where you don't have to deal with this. In that sense the raw component APIs weren't designed to be the most ergonomic and easy-to-use since that's where <code>bindgen!</code> comes in to close the gap.</p>
<p>IIRC there were coherence with that trait impl, but I could be misremembering as well.</p>
</blockquote>



<a name="489269934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489269934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489269934">(Dec 16 2024 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887043557">PR review comment</a>:</p>
<blockquote>
<p>Nowadays we try to call this "WASIp2", so mind renaming that here?</p>
</blockquote>



<a name="489269936"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489269936" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489269936">(Dec 16 2024 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887046469">PR review comment</a>:</p>
<blockquote>
<p>Could the errors be handled here instead of using <code>.unwrap()</code>?</p>
</blockquote>



<a name="489269937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489269937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489269937">(Dec 16 2024 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887044028">PR review comment</a>:</p>
<blockquote>
<p>Same here as above, it's ok to replace "WASI Preview 1" with "WASIp2"</p>
</blockquote>



<a name="489269939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489269939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489269939">(Dec 16 2024 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887044550">PR review comment</a>:</p>
<blockquote>
<p>Another <code>s/WASI Preview 2/WASIp1/</code></p>
</blockquote>



<a name="489296126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296126">(Dec 16 2024 at 17:29)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2506847649">PR review</a>.</p>



<a name="489296128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296128">(Dec 16 2024 at 17:29)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887229808">PR review comment</a>:</p>
<blockquote>
<p>done</p>
</blockquote>



<a name="489296167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296167">(Dec 16 2024 at 17:29)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2506848146">PR review</a>.</p>



<a name="489296168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296168">(Dec 16 2024 at 17:29)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887230080">PR review comment</a>:</p>
<blockquote>
<p>done</p>
</blockquote>



<a name="489296334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296334">(Dec 16 2024 at 17:30)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2506849792">PR review</a>.</p>



<a name="489296335"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296335" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296335">(Dec 16 2024 at 17:30)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1887231155">PR review comment</a>:</p>
<blockquote>
<p>Not really, because these are options, not results, but I added <code>expect()</code> instead of <code>unwrap()</code></p>
</blockquote>



<a name="489296382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296382">(Dec 16 2024 at 17:30)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489296816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489296816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489296816">(Dec 16 2024 at 17:32)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489347295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489347295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489347295">(Dec 16 2024 at 21:31)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2507400326">PR review</a>.</p>



<a name="489394226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489394226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489394226">(Dec 17 2024 at 03:03)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2547405672">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Oops. I digged into <code>examples/wasi/main.c</code> and related <code>c-api</code> crate. It seems <code>c-api</code> crate also needs some renovation.........</p>
<p>For example, <code>c-api</code> exposes this function, which links wasip1 interfaces, but no other functions link wasip2 interfaces.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111</a></p>
<p>I think removing <code>preview1</code> feature from this line and fixing whatever breaks should be enough. This introduces API breaking changes, though.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36</a> </p>
<p>I'd rather like to skip this error first and open another tracking issue.</p>
</blockquote>



<a name="489394898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489394898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489394898">(Dec 17 2024 at 03:09)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2547405672">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Oops. CI complains about file not found <code>target/wasm32-wasip2/debug/wasi.wasm</code>, so I guess Makefile also needs to be updated. </p>
<p>Furthermore, I digged into <code>examples/wasi/main.c</code> and related <code>c-api</code> crate. It seems <code>c-api</code> crate also needs some renovation.........</p>
<p>For example, <code>c-api</code> exposes this function, which links wasip1 interfaces, but no other functions link wasip2 interfaces.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111</a></p>
<p>I think removing <code>preview1</code> feature from this line and fixing whatever breaks should be enough. This introduces API breaking changes, though.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36</a> </p>
<p>I'd rather like to skip this error first and open another tracking issue.</p>
</blockquote>



<a name="489395648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489395648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489395648">(Dec 17 2024 at 03:14)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489395747"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489395747" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489395747">(Dec 17 2024 at 03:15)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2547405672">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Oops. CI complains about file not found <code>target/wasm32-wasip2/debug/wasi.wasm</code>, so I guess CMakeLists also needs to be updated. </p>
<p>Furthermore, I digged into <code>examples/wasi/main.c</code> and related <code>c-api</code> crate. It seems <code>c-api</code> crate also needs some renovation.........</p>
<p>For example, <code>c-api</code> exposes this function, which links wasip1 interfaces, but no other functions link wasip2 interfaces.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/src/linker.rs#L111</a></p>
<p>I think removing <code>preview1</code> feature from this line and fixing whatever breaks should be enough. This introduces API breaking changes, though.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36">https://github.com/bytecodealliance/wasmtime/blob/db4bd219fae182cdebd8ea77b1afbd1bef6ea5c0/crates/c-api/Cargo.toml#L36</a> </p>
<p>I'd rather like to skip this error first and open another tracking issue.</p>
</blockquote>



<a name="489607570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489607570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489607570">(Dec 18 2024 at 02:36)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2550179798">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Can you take a look at the CI error <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#logs">Test C-API macos-latest</a>? I think I made a right correction on CMakeList.txt but I don't know what else needs to be fixed.</p>
</blockquote>



<a name="489821700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489821700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489821700">(Dec 18 2024 at 18:52)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2552046000">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Have you tried running the example locally?</p>
</blockquote>



<a name="489983350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489983350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489983350">(Dec 19 2024 at 15:07)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="489984098"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489984098" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489984098">(Dec 19 2024 at 15:11)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2554529744">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>For the C example, inside <code>examples</code>, I ran <code>mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; cmake --build . --target wasmtime-wasi</code> and then <code>cd ../.. &amp;&amp; ./examples/build/wasmtime-wasi</code> and it worked. The C example still runs the old wasip1 module though, as I mentioned <code>c-api</code> crates lacks wasip2 support now.</p>
</blockquote>



<a name="489985725"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489985725" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489985725">(Dec 19 2024 at 15:18)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2554529744">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>For the C example, inside <code>examples</code>, I ran <code>mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; cmake --build . --target wasmtime-wasi</code> and then <code>cd ../.. &amp;&amp; ./examples/build/wasmtime-wasi</code> and it worked. The C example still runs the old wasip1 module though, as I mentioned <code>c-api</code> crates lacks wasip2 support now. Revamping C wasi example is blocked until #8036 etc is merged.</p>
</blockquote>



<a name="489986074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/489986074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#489986074">(Dec 19 2024 at 15:20)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2554529744">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>For the C example, inside <code>examples</code>, I ran <code>mkdir build &amp;&amp; cd build &amp;&amp; cmake .. &amp;&amp; cmake --build . --target wasmtime-wasi</code> and then <code>cd ../.. &amp;&amp; ./examples/build/wasmtime-wasi</code> and it worked. The C example still runs the old wasip1 module though, as I mentioned <code>c-api</code> crates lacks wasip2 support now. Revamping C wasi example is blocked until #8036 is resolved by #9812 etc.</p>
</blockquote>



<a name="490047237"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490047237" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490047237">(Dec 19 2024 at 20:46)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2516141962">PR review</a>.</p>



<a name="490047238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490047238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490047238">(Dec 19 2024 at 20:46)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1893114751">PR review comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>This [async example code][code2] shows how to use the [wasmtime-wasi][`wasmtime-wasi`] crate to
</code></pre></div>
<p>Here we're talking about a Rust crate rather than a Wasm component.</p>
</blockquote>



<a name="490058506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490058506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490058506">(Dec 19 2024 at 22:20)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2555873511">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Ah I better understand what was going on now. Instead of replacing the current example which I think is still useful for wasm32-wasip1 targets, could this perhaps rename the prior wasi example to wasip1 and add this new example under wasip2? There then wouldn't be a C example of wasip2 because that's not supported yet.</p>
</blockquote>



<a name="490159888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490159888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490159888">(Dec 20 2024 at 13:21)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="490160084"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490160084" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490160084">(Dec 20 2024 at 13:22)</a>:</h4>
<p>ifsheldon submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2517545754">PR review</a>.</p>



<a name="490160085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490160085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490160085">(Dec 20 2024 at 13:22)</a>:</h4>
<p>ifsheldon created <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#discussion_r1893935219">PR review comment</a>:</p>
<blockquote>
<p>yeah, that's a typo due to replacing "module" to "component"</p>
</blockquote>



<a name="490160833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490160833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490160833">(Dec 20 2024 at 13:27)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="490167712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490167712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490167712">(Dec 20 2024 at 14:06)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2557084196">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>OK, I've brought back wasip1 examples.</p>
</blockquote>



<a name="490189406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490189406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490189406">(Dec 20 2024 at 16:02)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#pullrequestreview-2517853847">PR review</a>.</p>



<a name="490199147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490199147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490199147">(Dec 20 2024 at 17:00)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2557390048">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>This <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/12434560618/job/34718541405">test failure</a> is weird to me. I have cleaned all caches and run the commands in this test manually but I saw no failures.</p>
</blockquote>



<a name="490208562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490208562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490208562">(Dec 20 2024 at 18:08)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="490208932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/490208932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#490208932">(Dec 20 2024 at 18:11)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2557390048">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>This <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/12434560618/job/34718541405">test failure</a> is weird to me. I have cleaned all caches and run the commands in this test manually on my Mac but I saw no failures.</p>
</blockquote>



<a name="492133053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492133053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492133053">(Jan 06 2025 at 16:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2573416114">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Have you tried executing only the steps that the <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/12635565419/job/35205791411">failed CI job</a> is executing?</p>
</blockquote>



<a name="492140758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492140758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492140758">(Jan 06 2025 at 16:42)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2573488628">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Yes. Here is my complete log of my terminal outputs. Search for "$" to see my commands:</p>
<ol>
<li><code>cargo clean</code></li>
<li><code>cmake -Sexamples -Bexamples/build -DBUILD_SHARED_LIBS=OFF</code> copied from CI</li>
<li><code>cmake --build examples/build --config Debug</code> copied from CI</li>
<li><code>cmake -E env CTEST_OUTPUT_ON_FAILURE=1 cmake --build examples/build --config Debug --target test</code> copied from CI</li>
</ol>
<p><a href="https://github.com/user-attachments/files/18322068/log.txt">log.txt</a><br>
</p>
</blockquote>



<a name="492141818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492141818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492141818">(Jan 06 2025 at 16:48)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="492142430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492142430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492142430">(Jan 06 2025 at 16:51)</a>:</h4>
<p>ifsheldon <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2573506903">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>I think CI silently swallow the errors caused by a target that was not added. </p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/fc7ef8d62e196df90522b26ed055bc21667cd19a/.github/actions/install-rust/action.yml#L67">https://github.com/bytecodealliance/wasmtime/blob/fc7ef8d62e196df90522b26ed055bc21667cd19a/.github/actions/install-rust/action.yml#L67</a></p>
<p>This is used by CI, but it does not add <code>wasm32-wasip2</code> target. CI should have given better errors stating that a target is not found. </p>
</blockquote>



<a name="492142668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492142668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492142668">(Jan 06 2025 at 16:52)</a>:</h4>
<p>ifsheldon edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2573506903">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>I think CI silently swallow the errors caused by a target that was not added. My local run is successful because I have added <code>wasm32-wasip2</code> target myself before and everything just compiled.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/fc7ef8d62e196df90522b26ed055bc21667cd19a/.github/actions/install-rust/action.yml#L67">https://github.com/bytecodealliance/wasmtime/blob/fc7ef8d62e196df90522b26ed055bc21667cd19a/.github/actions/install-rust/action.yml#L67</a></p>
<p>This is used by CI, but it does not add <code>wasm32-wasip2</code> target. CI should have given better errors stating that a target is not found. </p>
</blockquote>



<a name="492189749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492189749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492189749">(Jan 06 2025 at 21:35)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9788#issuecomment-2573968513">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>:</p>
<blockquote>
<p>Could the wasip2 target be installed for just this one CI job perhaps instead of all of them?</p>
</blockquote>



<a name="492229450"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492229450" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492229450">(Jan 07 2025 at 02:36)</a>:</h4>
<p>ifsheldon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<a name="492356173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239788%20Revamp%20wasi%20example%20and%20related%20docs/near/492356173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239788.20Revamp.20wasi.20example.20and.20related.20docs.html#492356173">(Jan 07 2025 at 17:40)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9788">PR #9788</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>