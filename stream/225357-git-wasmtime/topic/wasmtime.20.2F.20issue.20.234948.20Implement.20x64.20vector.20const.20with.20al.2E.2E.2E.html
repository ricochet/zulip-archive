<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4948 Implement x64 vector const with al... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234948.20Implement.20x64.20vector.20const.20with.20al.2E.2E.2E.html">wasmtime / issue #4948 Implement x64 vector const with al...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="300413092"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234948%20Implement%20x64%20vector%20const%20with%20al.../near/300413092" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234948.20Implement.20x64.20vector.20const.20with.20al.2E.2E.2E.html#300413092">(Sep 23 2022 at 17:10)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4948">issue #4948</a>:</p>
<blockquote>
<blockquote>
<p>One other thought that came back to me while looking at this was that I really wanted to implement <code>vconst</code> (and all other constant accesses for vectors) with the aligned version (<code>MOVDQA</code>, <code>MOVAPS</code>, <code>MOVAPD</code>) instead of the unaligned version we currently use. At the time, it was impossible to ensure that the vector constants were actually aligned so these aligned loads would have trapped--that's why I abandoned that thought, IIRC. But now that may be more possible (?). Now, I'm not sure if this will result in any great latency improvement on most CPUs we use today, but I did wonder if it might improve the cache line story. Just a thought...</p>
</blockquote>
<p>_Originally posted by @abrown in <a href="https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_">https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_</a></p>
</blockquote>



<a name="300413225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234948%20Implement%20x64%20vector%20const%20with%20al.../near/300413225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234948.20Implement.20x64.20vector.20const.20with.20al.2E.2E.2E.html#300413225">(Sep 23 2022 at 17:11)</a>:</h4>
<p>jameysharp labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4948">issue #4948</a>:</p>
<blockquote>
<blockquote>
<p>One other thought that came back to me while looking at this was that I really wanted to implement <code>vconst</code> (and all other constant accesses for vectors) with the aligned version (<code>MOVDQA</code>, <code>MOVAPS</code>, <code>MOVAPD</code>) instead of the unaligned version we currently use. At the time, it was impossible to ensure that the vector constants were actually aligned so these aligned loads would have trapped--that's why I abandoned that thought, IIRC. But now that may be more possible (?). Now, I'm not sure if this will result in any great latency improvement on most CPUs we use today, but I did wonder if it might improve the cache line story. Just a thought...</p>
</blockquote>
<p>_Originally posted by @abrown in <a href="https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_">https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_</a></p>
</blockquote>



<a name="300413226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234948%20Implement%20x64%20vector%20const%20with%20al.../near/300413226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234948.20Implement.20x64.20vector.20const.20with.20al.2E.2E.2E.html#300413226">(Sep 23 2022 at 17:11)</a>:</h4>
<p>jameysharp labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4948">issue #4948</a>:</p>
<blockquote>
<blockquote>
<p>One other thought that came back to me while looking at this was that I really wanted to implement <code>vconst</code> (and all other constant accesses for vectors) with the aligned version (<code>MOVDQA</code>, <code>MOVAPS</code>, <code>MOVAPD</code>) instead of the unaligned version we currently use. At the time, it was impossible to ensure that the vector constants were actually aligned so these aligned loads would have trapped--that's why I abandoned that thought, IIRC. But now that may be more possible (?). Now, I'm not sure if this will result in any great latency improvement on most CPUs we use today, but I did wonder if it might improve the cache line story. Just a thought...</p>
</blockquote>
<p>_Originally posted by @abrown in <a href="https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_">https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_</a></p>
</blockquote>



<a name="300413227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234948%20Implement%20x64%20vector%20const%20with%20al.../near/300413227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234948.20Implement.20x64.20vector.20const.20with.20al.2E.2E.2E.html#300413227">(Sep 23 2022 at 17:11)</a>:</h4>
<p>jameysharp labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4948">issue #4948</a>:</p>
<blockquote>
<blockquote>
<p>One other thought that came back to me while looking at this was that I really wanted to implement <code>vconst</code> (and all other constant accesses for vectors) with the aligned version (<code>MOVDQA</code>, <code>MOVAPS</code>, <code>MOVAPD</code>) instead of the unaligned version we currently use. At the time, it was impossible to ensure that the vector constants were actually aligned so these aligned loads would have trapped--that's why I abandoned that thought, IIRC. But now that may be more possible (?). Now, I'm not sure if this will result in any great latency improvement on most CPUs we use today, but I did wonder if it might improve the cache line story. Just a thought...</p>
</blockquote>
<p>_Originally posted by @abrown in <a href="https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_">https://github.com/bytecodealliance/wasmtime/issues/2399#issuecomment-1235016953_</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>