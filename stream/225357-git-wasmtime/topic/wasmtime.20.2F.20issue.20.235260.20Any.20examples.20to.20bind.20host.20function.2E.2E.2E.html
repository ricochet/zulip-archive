<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5260 Any examples to bind host function... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html">wasmtime / issue #5260 Any examples to bind host function...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="309440434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309440434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309440434">(Nov 13 2022 at 10:59)</a>:</h4>
<p>alexthomas1 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>I have a WASM file that calls a function in the host, but the name of the label becomes env::_Z5hellov.</p>
<p>How do I register the binding in C++? Thank you!</p>
</blockquote>



<a name="309443950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309443950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309443950">(Nov 13 2022 at 11:36)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312708747">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>You have to put the function prototype in a <code>extern "C" { ... }</code> block to disable name mangling.</p>
</blockquote>



<a name="309482323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309482323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309482323">(Nov 13 2022 at 17:48)</a>:</h4>
<p>alexthomas1 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312784991">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>Thank you, I did that and I get</p>
<p>(import "env" "_Z5hellov" (func $hello__ (type 2)))</p>
<p>and </p>
<p>unknown import: <code>env::_Z5hellov</code> has not been defined</p>
<p>when I put the function prototype in the extern block. </p>
</blockquote>



<a name="309482484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309482484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309482484">(Nov 13 2022 at 17:50)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312785270">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>What is the exact code you used?</p>
</blockquote>



<a name="309482609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309482609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309482609">(Nov 13 2022 at 17:52)</a>:</h4>
<p>alexthomas1 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312785498">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>I have been trying to modify the example: third_party/wasmtime/examples/hello.c, to load the binary directly (instead of using the wat representation). </p>
<p>`#include &lt;stdio.h&gt;</p>
<p>extern "C" {<br>
    void hello();<br>
}</p>
<p>int main(int argc, char **argv){<br>
    hello();<br>
}`</p>
<p>This is what my <a href="http://hello.cc">hello.cc</a> looks like.</p>
</blockquote>



<a name="309483868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309483868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309483868">(Nov 13 2022 at 18:03)</a>:</h4>
<p>alexthomas1 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312785498">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>I have been trying to modify the example: third_party/wasmtime/examples/hello.c, to load the binary directly (instead of using the wat representation). </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">`</span>#<span class="n">include</span><span class="w"> </span><span class="o">&lt;</span><span class="n">stdio</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span><span class="w"></span>

<span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="n">hello</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="n">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">**</span><span class="n">argv</span><span class="p">){</span><span class="w"></span>
<span class="w">    </span><span class="n">hello</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="err">`</span><span class="w"></span>
</code></pre></div>
<p>This is what my <a href="http://hello.cc">hello.cc</a> looks like.</p>
</blockquote>



<a name="309485150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309485150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309485150">(Nov 13 2022 at 18:15)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312790058">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>It works for me: <a href="https://godbolt.org/z/YGccKMhWY">https://godbolt.org/z/YGccKMhWY</a></p>
<p><div class="codehilite" data-code-language="wasm"><pre><span></span><code>__main_argc_argv:                       # @__main_argc_argv
        call    hello
        i32.const       0
        end_function
</code></pre></div><br>
</p>
</blockquote>



<a name="309490199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309490199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309490199">(Nov 13 2022 at 19:10)</a>:</h4>
<p>alexthomas1 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312800038">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>On the host-side, in third_party/wasmtime/examples/hello.c, how does wasmtime know the correct symbol to use (i.e. hello)?</p>
</blockquote>



<a name="309490491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309490491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309490491">(Nov 13 2022 at 19:13)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312800652">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>I think it sets hello_callback as the first import, not for the import named "hello".</p>
</blockquote>



<a name="309491258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309491258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309491258">(Nov 13 2022 at 19:22)</a>:</h4>
<p>alexthomas1 <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312802055">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>So when I have multiple imports, how does that work? Are there any examples of this?</p>
<p>I also still get: </p>
<p><code>unknown import: </code>env::_Z5hellov<code> has not been defined</code></p>
</blockquote>



<a name="309499463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309499463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309499463">(Nov 13 2022 at 21:03)</a>:</h4>
<p>alexthomas1 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5260#issuecomment-1312802055">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>So when I have multiple imports, how does that work? Are there any examples of this?</p>
<p>I also still get: </p>
<p><code>unknown import: </code>env::hello<code> has not been defined</code></p>
</blockquote>



<a name="309625998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235260%20Any%20examples%20to%20bind%20host%20function.../near/309625998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235260.20Any.20examples.20to.20bind.20host.20function.2E.2E.2E.html#309625998">(Nov 14 2022 at 15:17)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5260">issue #5260</a>:</p>
<blockquote>
<p>I have a WASM file that calls a function in the host, but the name of the label becomes env::_Z5hellov.</p>
<p>How do I register the binding in C++? Thank you!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>