<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4845 Various improvements to differential ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html">wasmtime / PR #4845 Various improvements to differential ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="296745150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296745150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296745150">(Sep 02 2022 at 03:12)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4845">PR #4845</a> from <code>improve-differential-fuzzing</code> to <code>main</code>:</p>
<blockquote>
<p>I separated out a few commits below to the differential fuzzer which I was working on recently. The main changes are:</p>
<ul>
<li>A <code>start</code> function is now allowed. Support was added to <code>wasmi</code> to run the <code>start</code> function.</li>
<li>Fuzzing now can continue if no engines match the current test case. This is only applicable if <code>ALLOWED_ENGINES</code> is set.</li>
<li>Unstable proposals like memory64 should be less likely to get generated, ideally improving the rate of usage of engines like v8 and wasmi.</li>
<li>A bug related to stack overflow was fixed where if one engine stack overflows it may have inconsistent state with the other so the fuzz test case needs to be discarded from then on.</li>
</ul>
</blockquote>



<a name="296745151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296745151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296745151">(Sep 02 2022 at 03:12)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/4845">PR #4845</a>.</p>



<a name="296827126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296827126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296827126">(Sep 02 2022 at 14:03)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4845">PR #4845</a> from <code>improve-differential-fuzzing</code> to <code>main</code>.</p>



<a name="296857081"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296857081" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296857081">(Sep 02 2022 at 16:43)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#discussion_r961851052">PR review comment</a>:</p>
<blockquote>
<p>Instead of bailing out when an engine doesn't support a config, can we have a pre-pass where the engine is given mutable access to the config to turn off anything that it doesn't support? This just seems like better use of fuzzing time than rejecting iterations and bailing out.</p>
</blockquote>



<a name="296857083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296857083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296857083">(Sep 02 2022 at 16:43)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095119616">PR review</a>.</p>



<a name="296857085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296857085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296857085">(Sep 02 2022 at 16:43)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#discussion_r961852329">PR review comment</a>:</p>
<blockquote>
<p>Slightly surprised we would ever have a case where we can't run the test case in Wasmtime. What is even the point at that time?</p>
</blockquote>



<a name="296857086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296857086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296857086">(Sep 02 2022 at 16:43)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095119616">PR review</a>.</p>



<a name="296857108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296857108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296857108">(Sep 02 2022 at 16:43)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095124613">PR review</a>.</p>



<a name="296876819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296876819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296876819">(Sep 02 2022 at 18:43)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095230268">PR review</a>.</p>



<a name="296876820"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296876820" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296876820">(Sep 02 2022 at 18:43)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#discussion_r961927674">PR review comment</a>:</p>
<blockquote>
<p>I think the issue this is addressing is if testing Wasmtime against Wasmtime has been disabled using the <code>ALLOWED_ENGINES</code> environment variable.</p>
</blockquote>



<a name="296881483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296881483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296881483">(Sep 02 2022 at 19:15)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095257357">PR review</a>.</p>



<a name="296881484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296881484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296881484">(Sep 02 2022 at 19:15)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#discussion_r961946484">PR review comment</a>:</p>
<blockquote>
<p>Yeah I've come around to feeling this way as well, I'll work on refactoring to enable this</p>
</blockquote>



<a name="296881544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296881544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296881544">(Sep 02 2022 at 19:16)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#discussion_r961946784">PR review comment</a>:</p>
<blockquote>
<p>Ah yeah this is only applicable when you're doing something like <code>ALLOWED_ENGINES=wasmi</code> locally where I was trying to only differentially-execute against <code>wasmi</code></p>
</blockquote>



<a name="296881545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296881545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296881545">(Sep 02 2022 at 19:16)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4845#pullrequestreview-1095257715">PR review</a>.</p>



<a name="296881566"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234845%20Various%20improvements%20to%20differential%20.../near/296881566" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234845.20Various.20improvements.20to.20differential.20.2E.2E.2E.html#296881566">(Sep 02 2022 at 19:16)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4845">PR #4845</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>