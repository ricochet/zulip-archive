<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1691 Increase maximum alignment for dat... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231691.20Increase.20maximum.20alignment.20for.20dat.2E.2E.2E.html">wasmtime / Issue #1691 Increase maximum alignment for dat...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197390522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231691%20Increase%20maximum%20alignment%20for%20dat.../near/197390522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231691.20Increase.20maximum.20alignment.20for.20dat.2E.2E.2E.html#197390522">(May 13 2020 at 09:57)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1691">Issue #1691</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Currently an <code>u8</code> is used to represent the alignment. This means that the biggest power of two that fits in the alignment specifier is 128 bytes. I propose to use at least an <code>u16</code> for alignment.</p>
<h4>Benefit</h4>
<p>A rustc test depends on 256 byte alignment. There is also code that requires much bigger alignments like 4096 bytes or even bigger.</p>
<h4>Implementation</h4>
<p>Replace <code>u8</code> with <code>u16</code> to specify alignment in <code>cranelift-module</code>.</p>
<h4>Alternatives</h4>
<p>None</p>
</blockquote>



<a name="197394929"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231691%20Increase%20maximum%20alignment%20for%20dat.../near/197394929" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231691.20Increase.20maximum.20alignment.20for.20dat.2E.2E.2E.html#197394929">(May 13 2020 at 10:45)</a>:</h4>
<p>julian-seward1 <a href="https://github.com/bytecodealliance/wasmtime/issues/1691#issuecomment-627903142">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1691">Issue #1691</a>:</p>
<blockquote>
<p>Could you leave it as <code>u8</code> and reinterpret it to be log2 of the required alignment?  That would restrict the expressable alignments to powers of 2 ; is that a problem?</p>
</blockquote>



<a name="197396925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231691%20Increase%20maximum%20alignment%20for%20dat.../near/197396925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231691.20Increase.20maximum.20alignment.20for.20dat.2E.2E.2E.html#197396925">(May 13 2020 at 11:09)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1691#issuecomment-627912954">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1691">Issue #1691</a>:</p>
<blockquote>
<p>That would also work. I don't think any object file format supports non power of 2 alignments anyway.</p>
</blockquote>



<a name="212718905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231691%20Increase%20maximum%20alignment%20for%20dat.../near/212718905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231691.20Increase.20maximum.20alignment.20for.20dat.2E.2E.2E.html#212718905">(Oct 08 2020 at 16:52)</a>:</h4>
<p>pchickey closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1691">Issue #1691</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Currently an <code>u8</code> is used to represent the alignment. This means that the biggest power of two that fits in the alignment specifier is 128 bytes. I propose to use at least an <code>u16</code> for alignment.</p>
<h4>Benefit</h4>
<p>A rustc test depends on 256 byte alignment. There is also code that requires much bigger alignments like 4096 bytes or even bigger.</p>
<h4>Implementation</h4>
<p>Replace <code>u8</code> with <code>u16</code> to specify alignment in <code>cranelift-module</code>.</p>
<h4>Alternatives</h4>
<p>None</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>