<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3921 Android NDK  link arm64-v8a/libwas... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html">wasmtime / issue #3921 Android NDK  link arm64-v8a/libwas...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="275188854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/275188854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#275188854">(Mar 14 2022 at 02:44)</a>:</h4>
<p>LukiYLS opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>My project link arm64-v8a/libwasmtime.a error</p>
<p>rustix.dcbac7fd-cgu.5.rcgu.o): In function <code>rustix::imp::io::syscalls::pwritev::hdad5057263d83a9f':
  rustix.dcbac7fd-cgu.5:(.text._ZN6rustix3imp2io8syscalls7pwritev17hdad5057263d83a9fE+0x10): undefined reference to </code>pwritev64'<br>
  /Users/lukiyang/Work/sourcecode/DynamicFramework/core/third_party/wasmtime/lib/android/arm64-v8a/libwasmtime.a(fastcover.o): In function <code>ZDICT_trainFromBuffer_fastCover':
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x110): undefined reference to </code>stderr'<br>
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x114): undefined reference to <code>stderr'
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x28c): undefined reference to </code>stderr'<br>
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x290): undefined reference to <code>stderr'
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x2b8): undefined reference to </code>stderr'</p>
<p>Compile libwamtime.a config<br>
ndk = 21.4.7075529<br>
AndroidVersion = 21</p>
<p>My Project config<br>
ndk = 21.4.7075529<br>
minSdkVersion 16<br>
targetSdkVersion 29</p>
</blockquote>



<a name="275240728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/275240728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#275240728">(Mar 14 2022 at 14:10)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3921#issuecomment-1066841285">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>Thanks for the report, but Android isn't supported at this time so it's expected that the source either doesn't compile, doesn't link, or may not work at runtime. It seems that you previously hit compiler errors in <a href="https://github.com/bytecodealliance/wasmtime/issues/3877">https://github.com/bytecodealliance/wasmtime/issues/3877</a> which is what I would naively expect. If you're getting link errors then I'm not entirely sure how you got past the compiler errors and whether these are related. PRs for more platforms are fine to add support for so long as it isn't too much for us to maintain, otherwise if you'd like to see official support for Android that's also a discussion that can be had, but would probably be an RFC.</p>
</blockquote>



<a name="275644088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/275644088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#275644088">(Mar 17 2022 at 12:28)</a>:</h4>
<p>LukiYLS <a href="https://github.com/bytecodealliance/wasmtime/issues/3921#issuecomment-1070861499">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<blockquote>
<p>Thanks for the report, but Android isn't supported at this time so it's expected that the source either doesn't compile, doesn't link, or may not work at runtime. It seems that you previously hit compiler errors in #3877 which is what I would naively expect. If you're getting link errors then I'm not entirely sure how you got past the compiler errors and whether these are related. PRs for more platforms are fine to add support for so long as it isn't too much for us to maintain, otherwise if you'd like to see official support for Android that's also a discussion that can be had, but would probably be an RFC.</p>
</blockquote>
<p>I successfully compiled libwasmtime.a with command:<br>
<code>cargo build --target=aarch64-linux-android --release --manifest-path crates/c-api/Cargo.toml</code></p>
<p>But there is a link error of std in my android project, i tried many ndk version and still get this error</p>
</blockquote>



<a name="275644185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/275644185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#275644185">(Mar 17 2022 at 12:28)</a>:</h4>
<p>LukiYLS <a href="https://github.com/bytecodealliance/wasmtime/issues/3921#issuecomment-1070862088">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>Can you give me a try<br>
</p>
</blockquote>



<a name="275698645"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/275698645" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#275698645">(Mar 17 2022 at 17:33)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3921#issuecomment-1071130223">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>It looks like you're using the right compile target, but again this is an unsupported target, so it's not expected that everything works out of the box. At this point you'll probably need to work backwards from the errors you're seeing and see if the symbols actually do exist and if they don't then the projects using them need to get patched to not use them on android.</p>
</blockquote>



<a name="405599862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/405599862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#405599862">(Dec 03 2023 at 04:00)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasmtime:platform-support label to <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">Issue #3921</a>.</p>



<a name="438140403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/438140403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#438140403">(May 11 2024 at 23:10)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>My project link arm64-v8a/libwasmtime.a error</p>
<p>rustix.dcbac7fd-cgu.5.rcgu.o): In function <code>rustix::imp::io::syscalls::pwritev::hdad5057263d83a9f':
  rustix.dcbac7fd-cgu.5:(.text._ZN6rustix3imp2io8syscalls7pwritev17hdad5057263d83a9fE+0x10): undefined reference to </code>pwritev64'<br>
  /Users/lukiyang/Work/sourcecode/DynamicFramework/core/third_party/wasmtime/lib/android/arm64-v8a/libwasmtime.a(fastcover.o): In function <code>ZDICT_trainFromBuffer_fastCover':
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x110): undefined reference to </code>stderr'<br>
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x114): undefined reference to <code>stderr'
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x28c): undefined reference to </code>stderr'<br>
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x290): undefined reference to <code>stderr'
  fastcover.c:(.text.ZDICT_trainFromBuffer_fastCover+0x2b8): undefined reference to </code>stderr'</p>
<p>Compile libwamtime.a config<br>
ndk = 21.4.7075529<br>
AndroidVersion = 21</p>
<p>My Project config<br>
ndk = 21.4.7075529<br>
minSdkVersion 16<br>
targetSdkVersion 29</p>
</blockquote>



<a name="438140404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233921%20Android%20NDK%20%20link%20arm64-v8a/libwas.../near/438140404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233921.20Android.20NDK.20.20link.20arm64-v8a.2Flibwas.2E.2E.2E.html#438140404">(May 11 2024 at 23:10)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3921#issuecomment-2106053450">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3921">issue #3921</a>:</p>
<blockquote>
<p>I believe that this has since been resolved so closing.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>