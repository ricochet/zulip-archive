<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5059 c-api: allow top level API to set ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html">wasmtime / issue #5059 c-api: allow top level API to set ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="304269813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304269813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304269813">(Oct 16 2022 at 05:17)</a>:</h4>
<p>flouthoc opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Hi Folks, Thanks for creating this wonderful runtime. I was wondering if there are any plans to expose <code>wasm-timeout</code> at <code>c-api</code> level ?<br>
It will allow users of <code>c-api</code> to timout the runtime as per the needs.</p>
<h4>Benefit</h4>
<p>Provides a <code>timout</code> knob for <code>c-api</code> users, giving more control to the end users.</p>
<h4>Implementation</h4>
<p>Maybe creating a top level interface and make timeout part of <code>wasi_config_t</code> could work ?<br>
</p>
</blockquote>



<a name="304269822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304269822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304269822">(Oct 16 2022 at 05:17)</a>:</h4>
<p>flouthoc edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Hi Folks, </p>
<p>Thanks for creating this wonderful runtime. I was wondering if there are any plans to expose <code>wasm-timeout</code> at <code>c-api</code> level ?<br>
It will allow users of <code>c-api</code> to timout the runtime as per the needs.</p>
<h4>Benefit</h4>
<p>Provides a <code>timout</code> knob for <code>c-api</code> users, giving more control to the end users.</p>
<h4>Implementation</h4>
<p>Maybe creating a top level interface and make timeout part of <code>wasi_config_t</code> could work ?<br>
</p>
</blockquote>



<a name="304269965"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304269965" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304269965">(Oct 16 2022 at 05:20)</a>:</h4>
<p>flouthoc <a href="https://github.com/bytecodealliance/wasmtime/issues/5059#issuecomment-1279894722">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<p>If can understand that more than enough issues are already there and upstream maintainers are already busy, If the idea looks good I'd like to help by implementing this feature. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> </p>
</blockquote>



<a name="304269971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304269971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304269971">(Oct 16 2022 at 05:20)</a>:</h4>
<p>flouthoc edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5059#issuecomment-1279894722">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<p>I can understand that more than enough issues are already there and upstream maintainers are already busy, If the idea looks good I'd like to help by implementing this feature. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> </p>
</blockquote>



<a name="304477371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304477371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304477371">(Oct 17 2022 at 14:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/5059#issuecomment-1280970511">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<p>Wasmtime doesn't have a native timeout knob precisely in its embedding API, but the CLI offers a timeout option as built from other primitives in the embedding API. One mechanism for timeouts is epochs which is possible through <code>wasmtime_engine_increment_epoch</code> and <code>wasmtime_config_epoch_interruption_set</code>. Another option is possible through <code>wasmtime_config_consume_fuel_set</code> and <code>wasmtime_context_add_fuel</code>. Are you able to combine those to satisfy your embedding use case?</p>
</blockquote>



<a name="304481182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235059%20c-api%3A%20allow%20top%20level%20API%20to%20set%20.../near/304481182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235059.20c-api.3A.20allow.20top.20level.20API.20to.20set.20.2E.2E.2E.html#304481182">(Oct 17 2022 at 14:56)</a>:</h4>
<p>flouthoc <a href="https://github.com/bytecodealliance/wasmtime/issues/5059#issuecomment-1280999199">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5059">issue #5059</a>:</p>
<blockquote>
<blockquote>
<p>Wasmtime doesn't have a native timeout knob precisely in its embedding API, but the CLI offers a timeout option as built from other primitives in the embedding API. One mechanism for timeouts is epochs which is possible through <code>wasmtime_engine_increment_epoch</code> and <code>wasmtime_config_epoch_interruption_set</code>. Another option is possible through <code>wasmtime_config_consume_fuel_set</code> and <code>wasmtime_context_add_fuel</code>. Are you able to combine those to satisfy your embedding use case?</p>
</blockquote>
<p>@alexcrichton Thanks a lot for checking this, I'll give it a try today and comment back here :)</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>