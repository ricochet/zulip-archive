<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8970 Integrate wasi-runtime-config into wa... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html">wasmtime / PR #8970 Integrate wasi-runtime-config into wa...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="452274219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452274219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452274219">(Jul 18 2024 at 07:55)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>.</p>



<a name="452274222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452274222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452274222">(Jul 18 2024 at 07:55)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>.</p>



<a name="452274224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452274224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452274224">(Jul 18 2024 at 07:55)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>.</p>



<a name="452274225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452274225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452274225">(Jul 18 2024 at 07:55)</a>:</h4>
<p>iawia002 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a> from <code>iawia002:cli-runtime-config</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Part of #8929 </p>
<p>This patch adds two new flags:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">  </span><span class="o">-</span><span class="n">S</span><span class="w">            </span><span class="n">runtime</span><span class="o">-</span><span class="n">config</span><span class="p">[</span><span class="o">=</span><span class="n">y</span><span class="o">|</span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">WASI</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="p">(</span><span class="n">experimental</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="n">S</span><span class="w"> </span><span class="n">runtime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;=&lt;</span><span class="n">val</span><span class="o">&gt;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">Pass</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="p">.</span>
</code></pre></div>
<p>Separating these two flags is considered to handle the scenario where the <code>wasi-runtime-config</code> API is enabled but no configuration needs to be passed.</p>
<p>To use the <code>wasi-runtime-config</code> API in <code>wasmtime-cli</code>:</p>
<ol>
<li>Build Wasmtime with <code>wasi-runtime-config</code> feature:</li>
</ol>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">features</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">runtime</span><span class="o">-</span><span class="n">config</span>
</code></pre></div>
<ol start="2">
<li>Enable <code>wasi-runtime-config</code> API support by <code>-Sruntime-config</code>:</li>
</ol>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="o">/</span><span class="n">serve</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<ol start="3">
<li>Pass custom runtime configs to the component:</li>
</ol>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="o">/</span><span class="n">serve</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=</span><span class="n">key1</span><span class="o">=</span><span class="n">value1</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=</span><span class="n">key2</span><span class="o">=</span><span class="n">value2</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<p>cc @alexcrichton </p>
</blockquote>



<a name="452365590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452365590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452365590">(Jul 18 2024 at 14:54)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#pullrequestreview-2186083657">PR review</a>:</p>
<blockquote>
<p>Thanks for this!</p>
</blockquote>



<a name="452365591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452365591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452365591">(Jul 18 2024 at 14:54)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#pullrequestreview-2186083657">PR review</a>:</p>
<blockquote>
<p>Thanks for this!</p>
</blockquote>



<a name="452365593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452365593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452365593">(Jul 18 2024 at 14:54)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#discussion_r1682992810">PR review comment</a>:</p>
<blockquote>
<p>Currently we assume that all features are enabled during testing, so it's ok to drop this and the marker below.</p>
</blockquote>



<a name="452365594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452365594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452365594">(Jul 18 2024 at 14:54)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#discussion_r1682996490">PR review comment</a>:</p>
<blockquote>
<p>Could this be added to the on-by-default features list? That's generally what we're doing with WASI proposals right now so long as there's no extra build requirements, which this proposal doesn't have.</p>
</blockquote>



<a name="452466518"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452466518" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452466518">(Jul 19 2024 at 01:11)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>.</p>



<a name="452466613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452466613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452466613">(Jul 19 2024 at 01:12)</a>:</h4>
<p>iawia002 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>:</p>
<blockquote>
<p>Part of #8929 </p>
<p>This patch adds two new flags:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">  </span><span class="o">-</span><span class="n">S</span><span class="w">            </span><span class="n">runtime</span><span class="o">-</span><span class="n">config</span><span class="p">[</span><span class="o">=</span><span class="n">y</span><span class="o">|</span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">Enable</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">WASI</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">API</span><span class="w"> </span><span class="p">(</span><span class="n">experimental</span><span class="p">)</span>
<span class="w">  </span><span class="o">-</span><span class="n">S</span><span class="w"> </span><span class="n">runtime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=&lt;</span><span class="n">name</span><span class="o">&gt;=&lt;</span><span class="n">val</span><span class="o">&gt;</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">Pass</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="n">runtime</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">program</span><span class="p">.</span>
</code></pre></div>
<p>Separating these two flags is considered to handle the scenario where the <code>wasi-runtime-config</code> API is enabled but no configuration needs to be passed.</p>
<p>To use the <code>wasi-runtime-config</code> API in <code>wasmtime-cli</code>:</p>
<ol>
<li>Enable <code>wasi-runtime-config</code> API support by <code>-Sruntime-config</code>:</li>
</ol>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="o">/</span><span class="n">serve</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<ol start="2">
<li>Pass custom runtime configs to the component:</li>
</ol>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="o">/</span><span class="n">serve</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=</span><span class="n">key1</span><span class="o">=</span><span class="n">value1</span><span class="w"> </span><span class="o">-</span><span class="n">Sruntime</span><span class="o">-</span><span class="n">config</span><span class="o">-</span><span class="n">var</span><span class="o">=</span><span class="n">key2</span><span class="o">=</span><span class="n">value2</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<p>cc @alexcrichton </p>
</blockquote>



<a name="452466635"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452466635" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452466635">(Jul 19 2024 at 01:13)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#issuecomment-2237836020">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>:</p>
<blockquote>
<p>All comments addressed, PTAL</p>
</blockquote>



<a name="452585161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452585161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452585161">(Jul 19 2024 at 14:35)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8970#pullrequestreview-2188394896">PR review</a>.</p>



<a name="452588298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238970%20Integrate%20wasi-runtime-config%20into%20wa.../near/452588298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238970.20Integrate.20wasi-runtime-config.20into.20wa.2E.2E.2E.html#452588298">(Jul 19 2024 at 14:49)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8970">PR #8970</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>