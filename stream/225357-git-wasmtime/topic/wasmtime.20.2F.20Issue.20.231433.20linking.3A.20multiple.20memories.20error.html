<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1433 linking: multiple memories error · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html">wasmtime / Issue #1433 linking: multiple memories error</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="192232533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192232533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192232533">(Mar 30 2020 at 09:44)</a>:</h4>
<p>Alphapage opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>Hello,</p>
<p>I tried this linking example:<a href="https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html" title="https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html">https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html</a></p>
<p>I just added a <code>linking3.wat</code> file which is a tweaked copy of <code>linking2.wat</code> and added <code>(import "linking3" "memory" (memory 1))</code> to <code>linking1.wat</code>.</p>
<p>But I get a multiple memories error. Is it the normal behaviour ? Can I only link 2 modules ?</p>
<p>Thank you in advance for your help.</p>
</blockquote>



<a name="192255859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192255859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192255859">(Mar 30 2020 at 13:34)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606002310" title="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606002310">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>cc @alexcrichton </p>
</blockquote>



<a name="192260857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192260857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192260857">(Mar 30 2020 at 14:11)</a>:</h4>
<p>pepyakin <a href="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606023558" title="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606023558">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>In the current version of the webassembly spec only one memory per wasm instance is supported, so you basically have three options at the moment:</p>
<ol>
<li>module imports memory,</li>
<li>module exports memory,</li>
<li>module defines no memory,</li>
</ol>
<p>there is a pending proposal for lifting this limitation exists: <a href="https://github.com/WebAssembly/multi-memory" title="https://github.com/WebAssembly/multi-memory">https://github.com/WebAssembly/multi-memory</a></p>
</blockquote>



<a name="192267888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192267888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192267888">(Mar 30 2020 at 14:59)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606052432" title="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606052432">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>Thanks for the report! Wasmtime at this time doesn't implement the multi-memory proposal (I'm not actually sure of anything that does myself), and as pointed out by @pepyakin we'd need to implement that all first before more than one memory is allowed.</p>
</blockquote>



<a name="192269971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192269971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192269971">(Mar 30 2020 at 15:13)</a>:</h4>
<p>Alphapage <a href="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606060344" title="https://github.com/bytecodealliance/wasmtime/issues/1433#issuecomment-606060344">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>Sorry, my mistake! I was thinking that <code>linking1.wat </code>was using its own memory but it is using the imported one from <code>linking2.wat</code>.<br>
I'm really waiting for multi-memory feature to have dedicated memory to share data between modules using dynamic linking. <br>
Because for now, I think you can't reproduce linking1.wat and linking2.wat in c or rust without corrupting the linear memory which is used to allocate dynamic memory.</p>
</blockquote>



<a name="192269973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231433%20linking%3A%20multiple%20memories%20error/near/192269973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231433.20linking.3A.20multiple.20memories.20error.html#192269973">(Mar 30 2020 at 15:13)</a>:</h4>
<p>Alphapage closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1433" title="https://github.com/bytecodealliance/wasmtime/issues/1433">Issue #1433</a>:</p>
<blockquote>
<p>Hello,</p>
<p>I tried this linking example:<a href="https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html" title="https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html">https://bytecodealliance.github.io/wasmtime/examples-rust-linking.html</a></p>
<p>I just added a <code>linking3.wat</code> file which is a tweaked copy of <code>linking2.wat</code> and added <code>(import "linking3" "memory" (memory 1))</code> to <code>linking1.wat</code>.</p>
<p>But I get a multiple memories error. Is it the normal behaviour ? Can I only link 2 modules ?</p>
<p>Thank you in advance for your help.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>