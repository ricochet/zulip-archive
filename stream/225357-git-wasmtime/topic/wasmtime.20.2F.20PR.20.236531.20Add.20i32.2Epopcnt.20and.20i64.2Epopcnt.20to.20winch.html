<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6531 Add i32.popcnt and i64.popcnt to winch · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html">wasmtime / PR #6531 Add i32.popcnt and i64.popcnt to winch</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="366004544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366004544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366004544">(Jun 13 2023 at 22:18)</a>:</h4>
<p>itsrainy edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366008212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366008212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366008212">(Jun 13 2023 at 22:42)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#pullrequestreview-1478168773">PR review</a>:</p>
<blockquote>
<p>Seems right to me! I agree that tests are a good idea before merging but assuming those go okay then I think this is good.</p>
</blockquote>



<a name="366008285"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366008285" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366008285">(Jun 13 2023 at 22:42)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1228772871">PR review comment</a>:</p>
<blockquote>
<p>Can this and the other <code>mov</code> below be written like this? I'm not sure it makes any difference but it seems a little more clear to me if we can avoid using <code>.into()</code> so much. I'm also curious if there are other methods named perhaps <code>sub_rr</code> or <code>and_ir</code> for the other instructions in this sequence.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            self.asm.mov_rr(tmp, dst, size);
</code></pre></div><br>
</p>
</blockquote>



<a name="366022952"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366022952" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366022952">(Jun 14 2023 at 00:57)</a>:</h4>
<p>itsrainy created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1228848510">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>I'm also curious if there are other methods named perhaps sub_rr or and_ir for the other instructions in this sequence.</p>
</blockquote>
<p>there are! I'll change those</p>
</blockquote>



<a name="366023087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366023087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366023087">(Jun 14 2023 at 00:58)</a>:</h4>
<p>itsrainy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366220975"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366220975" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366220975">(Jun 14 2023 at 15:22)</a>:</h4>
<p>itsrainy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366276701"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366276701" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366276701">(Jun 14 2023 at 18:48)</a>:</h4>
<p>itsrainy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366283244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366283244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366283244">(Jun 14 2023 at 19:16)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#pullrequestreview-1480139585">PR review</a>:</p>
<blockquote>
<p>Left one minor comment, but overall this looks great to me, thanks!</p>
</blockquote>



<a name="366283246"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366283246" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366283246">(Jun 14 2023 at 19:16)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#pullrequestreview-1480139585">PR review</a>:</p>
<blockquote>
<p>Left one minor comment, but overall this looks great to me, thanks!</p>
</blockquote>



<a name="366283249"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366283249" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366283249">(Jun 14 2023 at 19:16)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230061980">PR review comment</a>:</p>
<blockquote>
<p>We currently have <code>impl From&lt;Reg&gt; for Gpr</code> and <code>impl From&lt;Reg&gt; for WritableGpr</code> so you could use those here if you wanted to reduce the boilerplate. </p>
</blockquote>



<a name="366285855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366285855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366285855">(Jun 14 2023 at 19:29)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#pullrequestreview-1480125656">PR review</a>.</p>



<a name="366285856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366285856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366285856">(Jun 14 2023 at 19:29)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#pullrequestreview-1480125656">PR review</a>.</p>



<a name="366285857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366285857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366285857">(Jun 14 2023 at 19:29)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230052289">PR review comment</a>:</p>
<blockquote>
<p>Would you add a comment that the fallback is based on <code>MacroAssembler::popcnt32</code> in <a href="https://searchfox.org/mozilla-central/source/js/src/jit/x86-shared/MacroAssembler-x86-shared-inl.h">https://searchfox.org/mozilla-central/source/js/src/jit/x86-shared/MacroAssembler-x86-shared-inl.h</a>?</p>
</blockquote>



<a name="366285858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366285858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366285858">(Jun 14 2023 at 19:29)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230070081">PR review comment</a>:</p>
<blockquote>
<p>I was pretty confused about why you didn't use <code>and_ir</code>, until I dug into the implementation enough to understand that x86 only supports 32-bit immediates for <code>and</code>, so doing it this way lets the underlying assembler decide whether to use <code>load_constant</code> into the scratch register or to emit the immediate operand inline.</p>
<p>I don't know what to suggest but maybe there's a comment that could go here. Or maybe we should just assume that people reading this are more familiar with Winch idioms than I am. <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>
<p>Also, it's a little unfortunate that in the 64-bit case, <code>masks[1]</code> gets loaded into the scratch register twice. It would be nice to avoid that, but it would clutter the implementation here and maybe that's not worth doing.</p>
</blockquote>



<a name="366285859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366285859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366285859">(Jun 14 2023 at 19:29)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230065479">PR review comment</a>:</p>
<blockquote>
<p>This is perfectly reasonable as-is but it keeps bothering me that the constant masks are duplicated in this way. One alternative might be:</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            let masks = [
                0x5555555555555555, // m1
                0x3333333333333333, // m2
                0x0f0f0f0f0f0f0f0f, // m4
                0x0101010101010101, // h01
            ];
            let (mask, shift_amt) = match size {
                OperandSize::S64 =&gt; (u64::MAX as i64, 56u8),
                OperandSize::S32 =&gt; (u32::MAX as i64, 24u8),
            };
</code></pre></div>
<p>Then use e.g. <code>masks[0] &amp; mask</code>. (Maybe rename <code>mask</code> though.)</p>
<p>Another approach is to generate the constants using bit-twiddling tricks. I don't think this is a _good_ idea but I spent enough time figuring out how it would work that I'm going to write it down anyway. You can divide <code>u64::MAX</code> or <code>u32::MAX</code> by certain constants to get these repeating patterns: specifically, <code>[0x3, 0x5, 0x11, 0xff]</code> to produce <code>[0x55..., 0x33..., 0x0f..., 0x01...]</code> respectively.</p>
</blockquote>



<a name="366288231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366288231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366288231">(Jun 14 2023 at 19:41)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230085233">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Or maybe we should just assume that people reading this are more familiar with Winch idioms than I am. <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>
</blockquote>
<p>The scratch register has caused confusion, I agree. This is something that I'd like to improve, so I'm considering adding guards, which will hopefully make its usage traceable and more explicit. </p>
</blockquote>



<a name="366288424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366288424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366288424">(Jun 14 2023 at 19:42)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230085762">PR review comment</a>:</p>
<blockquote>
<p>I just haven't gotten to it <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> </p>
</blockquote>



<a name="366288502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366288502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366288502">(Jun 14 2023 at 19:42)</a>:</h4>
<p>itsrainy created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230086113">PR review comment</a>:</p>
<blockquote>
<p>Yeah I did have the thought about 0x333 getting loaded in twice, so I had briefly replaced the second <code>RegImm::imm(masks[0]).into()</code> with <code>regs::scratch().into()</code>, but that wouldn't work in the 32-bit case and then trying to work around that seemed like added complexity for not a lot of gain</p>
</blockquote>



<a name="366288561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366288561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366288561">(Jun 14 2023 at 19:43)</a>:</h4>
<p>itsrainy edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230086113">PR review comment</a>.</p>



<a name="366289646"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366289646" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366289646">(Jun 14 2023 at 19:48)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230090966">PR review comment</a>:</p>
<blockquote>
<p>I don't think it would be terrible to unconditionally call <code>load_constant</code> here to put the <code>0x333...</code> mask in the scratch register, and use <code>and_rr</code> explicitly. It's one extra instruction in the 32-bit case, but it's only a move-immediate, and the generated code is shorter due to only emitting the constant once.</p>
</blockquote>



<a name="366289726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366289726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366289726">(Jun 14 2023 at 19:49)</a>:</h4>
<p>itsrainy created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230091465">PR review comment</a>:</p>
<blockquote>
<p>I thiiiink I'm inclined to keep it as is, though I don't feel too strongly about that. I initially had the 32-bit and 64-bit code as completely separate branches (this is what spidermonkey and cranelift do) and wasn't sure if I should even combine them in the first place. I kind of like the different constants being explicitly in the code, but I also see that using one to generate the other is tempting. Happy to go either way here</p>
</blockquote>



<a name="366290887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366290887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366290887">(Jun 14 2023 at 19:55)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/6531#discussion_r1230097148">PR review comment</a>:</p>
<blockquote>
<p>Yup, I don't feel strongly about it either, so I'm good with leaving it as is. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="366292305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366292305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366292305">(Jun 14 2023 at 20:02)</a>:</h4>
<p>itsrainy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366292393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366292393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366292393">(Jun 14 2023 at 20:03)</a>:</h4>
<p>itsrainy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<a name="366315404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236531%20Add%20i32.popcnt%20and%20i64.popcnt%20to%20winch/near/366315404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236531.20Add.20i32.2Epopcnt.20and.20i64.2Epopcnt.20to.20winch.html#366315404">(Jun 14 2023 at 22:20)</a>:</h4>
<p>itsrainy merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6531">PR #6531</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>