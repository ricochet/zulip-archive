<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5166 cranelift: Remove `iadd_cin` instr... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html">wasmtime / issue #5166 cranelift: Remove `iadd_cin` instr...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="307291634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307291634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307291634">(Nov 01 2022 at 11:30)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two add's chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Is there any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
</blockquote>



<a name="307291790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307291790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307291790">(Nov 01 2022 at 11:31)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two add's chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
</blockquote>



<a name="307293514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307293514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307293514">(Nov 01 2022 at 11:43)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two add's chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
<hr>
<p>For reference here's the <a href="https://godbolt.org/z/Eb8xn683W">llvm output for this instruction</a>, and as far as I can tell, it doesn't seem to be doing anything particularly special for any of the arches that we support.</p>
<p>For the <code>carry &amp; 1</code> it does emit the <code>and</code> instruction + two <code>add</code>'s, and for the <code>carry != 0</code> it does do something special on aarch64 and x86, but we can also pattern match <code>iadd+icmp not zero</code> and emit that same code?</p>
</blockquote>



<a name="307293563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307293563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307293563">(Nov 01 2022 at 11:43)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two add's chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
<hr>
<p>For reference here's the <a href="https://godbolt.org/z/Eb8xn683W">llvm output for this instruction</a>, and as far as I can tell, it doesn't seem to be doing anything particularly special for any of the arches that we support.</p>
<p>For the <code>carry &amp; 1</code> it does emit the <code>and</code> instruction + two <code>add</code>'s.</p>
<p>And for the <code>carry != 0</code> it does do something special on aarch64 and x86, but we can also pattern match <code>iadd+icmp not zero</code> and emit that same code?</p>
</blockquote>



<a name="307293588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307293588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307293588">(Nov 01 2022 at 11:43)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two add's chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
<hr>
<p>For reference here's the <a href="https://godbolt.org/z/Eb8xn683W">llvm output for this instruction</a>, and as far as I can tell, it doesn't seem to be doing anything particularly special for any of the arches that we support.</p>
<p>For the <code>carry &amp; 1</code> it does emit the <code>and</code> instruction + two <code>add</code>'s.</p>
<p>And for the <code>carry != 0</code> it does do something special on aarch64 and x86, but we can also pattern match <code>iadd+icmp not zero</code> and emit that same code.</p>
</blockquote>



<a name="307294099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307294099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307294099">(Nov 01 2022 at 11:47)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two <code>add</code>'s chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
<hr>
<p>For reference here's the <a href="https://godbolt.org/z/Eb8xn683W">llvm output for this instruction</a>, and as far as I can tell, it doesn't seem to be doing anything particularly special for any of the arches that we support.</p>
<p>For the <code>carry &amp; 1</code> it does emit the <code>and</code> instruction + two <code>add</code>'s.</p>
<p>And for the <code>carry != 0</code> it does do something special on aarch64 and x86, but we can also pattern match <code>iadd+icmp not zero</code> and emit that same code.</p>
</blockquote>



<a name="307294549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307294549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307294549">(Nov 01 2022 at 11:50)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298402418">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>What would be the purpose of removing iadd_cin while keeping iadd_carry? It is useful for terminating a bigint addition.</p>
</blockquote>



<a name="307295935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307295935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307295935">(Nov 01 2022 at 12:00)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298411454">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>I'm proposing removing <code>iadd_cin</code> because that one feels a bit redundant to me.</p>
<p>However <code>iadd_carry</code> does have the carry bit output, which makes it quite different, It essentially outputs the carry if either of the two <code>add</code>'s overflows, and as you mentioned it is very useful. We also have specialized instructions in hardware to represent that operation. Which is not the case for our <code>iadd_cin</code>.</p>
<p><code>iadd_cout</code> is also not a substitute of <code>iadd_carry</code> since that one computes the overflow over a single add.</p>
</blockquote>



<a name="307296008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307296008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307296008">(Nov 01 2022 at 12:01)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298411454">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>I'm proposing removing <code>iadd_cin</code> because that one feels a bit redundant to me.</p>
<p>However <code>iadd_carry</code> does have the carry bit output, which makes it quite different.</p>
<p>It outputs the carry if either of the two <code>add</code>'s overflows, and as you mentioned it is very useful. We also have specialized instructions in hardware to represent that operation. Which is not the case for our <code>iadd_cin</code>.</p>
<p><code>iadd_cout</code> is also not a substitute of <code>iadd_carry</code> since that one computes the overflow over a single add.</p>
</blockquote>



<a name="307296558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307296558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307296558">(Nov 01 2022 at 12:04)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298411454">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>I'm proposing removing <code>iadd_cin</code> because that one feels a bit redundant to me since it could be replaced with two <code>add</code>'s as mentioned above.</p>
<p>However <code>iadd_carry</code> does have the carry bit output, which makes it quite different.</p>
<p>It outputs the carry if either of the two <code>add</code>'s overflows, and as you mentioned it is very useful. We also have specialized instructions in hardware to represent that operation. Which is not the case for our <code>iadd_cin</code>.</p>
<p><code>iadd_cout</code> is also not a substitute of <code>iadd_carry</code> since that one computes the overflow over a single add.</p>
</blockquote>



<a name="307296590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307296590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307296590">(Nov 01 2022 at 12:05)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298411454">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>I'm proposing removing <code>iadd_cin</code> because that one feels a bit redundant to me since it could be replaced with two <code>add</code>'s as mentioned above.</p>
<p>However <code>iadd_carry</code> does have the carry bit <strong>output</strong>, which makes it quite different.</p>
<p>It outputs the carry if either of the two <code>add</code>'s overflows, and as you mentioned it is very useful. We also have specialized instructions in hardware to represent that operation. Which is not the case for our <code>iadd_cin</code>.</p>
<p><code>iadd_cout</code> is also not a substitute of <code>iadd_carry</code> since that one computes the overflow over a single add.</p>
</blockquote>



<a name="307297334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307297334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307297334">(Nov 01 2022 at 12:09)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298420407">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>iadd_cin is iadd_carry except that it doesn't materialize the carry flag. In other words iadd_cin can be implemented using a single adc instruction on x86 while iadd_carry must be implemented as adc+setc if not fused with the instruction using the output carry flag.</p>
</blockquote>



<a name="307298872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307298872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307298872">(Nov 01 2022 at 12:19)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298430789">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<blockquote>
<p>In other words iadd_cin can be implemented using a single adc instruction on x86 </p>
</blockquote>
<p>Right, but in our case we have no guarantee that the previous input has set the carry flag unless we pattern match some previous instruction.</p>
<p>So we need to pattern mach the carry input of <code>iadd_cin</code> in order to lower it to an <code>adc</code>. And if we are doing that, we can also do that on <code>iadd</code> and use <code>adc</code> there.</p>
</blockquote>



<a name="307301687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307301687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307301687">(Nov 01 2022 at 12:37)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298449231">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>What I'm proposing is replacing the following:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add1</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cin</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>With this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add2</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v4</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In the <code>v3 = iadd v1, v2</code> line, we know that <code>v2</code> is a carry output, so we can pattern match <code>(iadd _ (iadd_cout _ _))</code> and avoid materializing the carry flag by doing the <code>adc</code> instruction there.</p>
<hr>
<p>We actually can't yet do this exact pattern matching since ISLE can't match two output instructions, but the same goes for <code>iadd_cin</code>.</p>
</blockquote>



<a name="307301819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307301819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307301819">(Nov 01 2022 at 12:38)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298449231">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>What I'm proposing is replacing the following:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add1</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cin</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>With this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add2</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v4</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>In the <code>v3 = iadd v1, v2</code> line, we know that <code>v2</code> is a carry output, so we can pattern match <code>(iadd _ (iadd_cout _ _))</code> and avoid materializing the carry flag by doing the <code>adc</code> instruction there.</p>
<hr>
<p>We actually can't do this exact pattern matching yet, since ISLE can't match two output instructions, but the same goes for <code>iadd_cin</code>.</p>
</blockquote>



<a name="307302627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/307302627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#307302627">(Nov 01 2022 at 12:43)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1298449231">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>What I'm proposing is replacing the following:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add1</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cin</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>With this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="o">%</span><span class="n">add2</span><span class="p">(</span><span class="kt">i8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i8</span> <span class="p">{</span><span class="w"></span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span>: <span class="kt">i8</span><span class="p">)</span>:
    <span class="nc">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v3</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v4</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>~In the <code>v3 = iadd v1, v2</code> line, we know that <code>v2</code> is a carry output, so we can pattern match <code>(iadd _ (iadd_cout _ _))</code> and avoid materializing the carry flag by doing the <code>adc</code> instruction there.~</p>
<p>Edit: In the <code>v4 = iadd v1, v3</code> line, we can pattern match <code>(iadd _ (iadd _ (iadd_cout _ _)))</code> and avoid materializing the carry flag by doing the <code>adc</code> instruction there.</p>
<hr>
<p>We actually can't do this exact pattern matching yet, since ISLE can't match two output instructions, but the same goes for <code>iadd_cin</code>.</p>
</blockquote>



<a name="404483189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/404483189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#404483189">(Nov 27 2023 at 20:17)</a>:</h4>
<p>scottmcm <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-1828510266">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>Maybe the value is more clear here for wider integers?</p>
<p>It seems like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>
<span class="w">    </span><span class="n">v6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cin</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>
</code></pre></div>
<p>would, in general, need to be</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd_cout</span><span class="w"> </span><span class="n">v0</span><span class="p">,</span><span class="w"> </span><span class="n">v1</span>
<span class="w">    </span><span class="n">v7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="w"> </span><span class="n">v5</span>
<span class="w">    </span><span class="n">v8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v2</span>
<span class="w">    </span><span class="n">v6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v8</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>
</code></pre></div>
<p>in order to not have <code>iadd_cin</code>.  Though that's certainly still pattern-matchable, just increasing the number of permutations that would need to be matched.</p>
<p>(but it's also possible that I completely don't understand cranelift's type expectations)<br>
</p>
</blockquote>



<a name="468281468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/468281468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#468281468">(Sep 06 2024 at 20:11)</a>:</h4>
<p>afonso360 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This operation is essentially two <code>add</code>'s chained together, I think that any optimizations that we make based on this operation can also be made on the <code>iadd</code> instruction, so there doesn't seem to be any benefit of keeping this around other than frontend convenience. And if that is important, maybe we should just move this to a frontend helper that expands to two <code>iadd</code>'s + some masking for the carry input?</p>
<p>Additionally since the removal of booleans, the input for the carry bit seems a bit under-specified. We need some form of masking on the carry input, either <code>carry &amp; 1</code> or <code>carry != 0</code>. (This also affects the <code>iadd_carry</code> instruction).</p>
<p>We discussed carry operations last week in #5123 and also in the cranelift weekly meeting (<a href="https://github.com/bytecodealliance/meetings/blob/main/cranelift/2022/cranelift-10-26.md">notes</a>) but nothing concrete about <code>iadd_cin</code> I think.</p>
<p>Some <a href="https://github.com/bytecodealliance/wasmtime/pull/3233#discussion_r695919017">previous discussion about this</a> mentions that cg-clif may need <code>iadd_cin</code> to "efficiently implement certain llvm intrinsics used by core::arch intrinsics that are stabilized" and points to the <a href="https://github.com/bjorn3/rustc_codegen_cranelift/blob/9f5b52045c928157b12bec1d670e220fc7597375/src/intrinsics/llvm.rs#L145-L181">current implementation</a> but that seems to be implementing <code>iadd_carry</code> which I agree probably needs to remain.</p>
<p>@bjorn3 Do you know of any operation that cg-clif would need to do, that needs <code>iadd_cin</code> but couldn't efficiently be replaced with <code>iadd+iadd</code>?</p>
<hr>
<p>For reference here's the <a href="https://godbolt.org/z/Eb8xn683W">llvm output for this instruction</a>, and as far as I can tell, it doesn't seem to be doing anything particularly special for any of the arches that we support.</p>
<p>For the <code>carry &amp; 1</code> it does emit the <code>and</code> instruction + two <code>add</code>'s.</p>
<p>And for the <code>carry != 0</code> it does do something special on aarch64 and x86, but we can also pattern match <code>iadd+icmp not zero</code> and emit that same code.</p>
</blockquote>



<a name="468281469"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235166%20cranelift%3A%20Remove%20%60iadd_cin%60%20instr.../near/468281469" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235166.20cranelift.3A.20Remove.20.60iadd_cin.60.20instr.2E.2E.2E.html#468281469">(Sep 06 2024 at 20:11)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/5166#issuecomment-2334742220">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5166">issue #5166</a>:</p>
<blockquote>
<p>Fixed by #9199</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>