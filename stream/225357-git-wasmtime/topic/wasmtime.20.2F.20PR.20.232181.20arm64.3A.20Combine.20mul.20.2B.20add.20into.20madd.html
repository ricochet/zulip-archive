<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2181 arm64: Combine mul + add into madd · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html">wasmtime / PR #2181 arm64: Combine mul + add into madd</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="208818714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/208818714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#208818714">(Sep 02 2020 at 12:56)</a>:</h4>
<p>jgouly opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2181">PR #2181</a> from <code>madd-opt</code> to <code>main</code>:</p>
<blockquote>
<p>Copyright (c) 2020, Arm Limited.</p>
</blockquote>



<a name="208825428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/208825428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#208825428">(Sep 02 2020 at 13:44)</a>:</h4>
<p>jgouly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2181">PR #2181</a> from <code>madd-opt</code> to <code>main</code>:</p>
<blockquote>
<p>Copyright (c) 2020, Arm Limited.</p>
</blockquote>



<a name="208945566"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/208945566" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#208945566">(Sep 03 2020 at 10:11)</a>:</h4>
<p>jgouly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2181">PR #2181</a> from <code>madd-opt</code> to <code>main</code>:</p>
<blockquote>
<p>Copyright (c) 2020, Arm Limited.</p>
</blockquote>



<a name="209410217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209410217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209410217">(Sep 08 2020 at 16:20)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#pullrequestreview-484300170">PR Review</a>.</p>



<a name="209410218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209410218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209410218">(Sep 08 2020 at 16:20)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#pullrequestreview-484300170">PR Review</a>.</p>



<a name="209410219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209410219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209410219">(Sep 08 2020 at 16:20)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#discussion_r485043877">PR Review Comment</a>:</p>
<blockquote>
<p>@julian-seward1 was going to investigate some weird spilling behavior in the regalloc, and I suspect this may be related. OK to leave this for now, I suppose, since it becomes zero bytes in the output, but hopefully we have a better fix soon!</p>
</blockquote>



<a name="209410220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209410220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209410220">(Sep 08 2020 at 16:20)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#discussion_r485043294">PR Review Comment</a>:</p>
<blockquote>
<p>Can we call this <code>addend_idx</code>?</p>
</blockquote>



<a name="209471301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209471301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209471301">(Sep 09 2020 at 04:39)</a>:</h4>
<p>julian-seward1 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#pullrequestreview-484655309">PR Review</a>.</p>



<a name="209471302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209471302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209471302">(Sep 09 2020 at 04:39)</a>:</h4>
<p>julian-seward1 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2181#discussion_r485332914">PR Review Comment</a>:</p>
<blockquote>
<p>I'd prefer that this NOP was removed before landing.  That it has any effect possibly involves some combination of the RA's spill-cost heuristics and/or isel reaching back for operands over basic block boundaries and/or the possibility that isel has separately created an instruction to do the multiply.  There's no particular reason it would have this effect in other cases, and I'd prefer not to have to reason about it when trying to debug these RA effects -- things are complicated enough without it.</p>
</blockquote>



<a name="209807927"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/209807927" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#209807927">(Sep 11 2020 at 17:07)</a>:</h4>
<p>jgouly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2181">PR #2181</a> from <code>madd-opt</code> to <code>main</code>:</p>
<blockquote>
<p>Copyright (c) 2020, Arm Limited.</p>
</blockquote>



<a name="210172930"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232181%20arm64%3A%20Combine%20mul%20%2B%20add%20into%20madd/near/210172930" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232181.20arm64.3A.20Combine.20mul.20.2B.20add.20into.20madd.html#210172930">(Sep 15 2020 at 18:52)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2181">PR #2181</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>