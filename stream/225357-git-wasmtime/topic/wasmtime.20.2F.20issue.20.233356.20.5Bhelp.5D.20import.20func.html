<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3356 [help] import func · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233356.20.5Bhelp.5D.20import.20func.html">wasmtime / issue #3356 [help] import func</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="253560413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233356%20%5Bhelp%5D%20import%20func/near/253560413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233356.20.5Bhelp.5D.20import.20func.html#253560413">(Sep 16 2021 at 10:40)</a>:</h4>
<p>silence-coding opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3356">issue #3356</a>:</p>
<blockquote>
<p>How to import a function like log_str that can pass complex structures</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="sd">/// # fn main() -&gt; anyhow::Result&lt;()&gt; {</span>
<span class="w">    </span><span class="sd">/// # let engine = Engine::default();</span>
<span class="w">    </span><span class="sd">/// let mut linker = Linker::new(&amp;engine);</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "double", |x: i32| x * 2)?;</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "log_i32", |x: i32| println!("{}", x))?;</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "log_str", |caller: Caller&lt;'_, ()&gt;, ptr: i32, len: i32| {</span>
<span class="w">    </span><span class="sd">///     // ...</span>
<span class="w">    </span><span class="sd">/// })?;</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="253561354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233356%20%5Bhelp%5D%20import%20func/near/253561354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233356.20.5Bhelp.5D.20import.20func.html#253561354">(Sep 16 2021 at 10:49)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/3356#issuecomment-920792548">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3356">issue #3356</a>:</p>
<blockquote>
<p>Wasm only allows i32, i64, f32 and f64 as parameter types. It doesn't support structs or anything like that. Instead more complex types need to be stored in the linear memory of the wasm module. You can use <a href="https://github.com/bytecodealliance/witx-bindgen">witx-bindgen</a> to help generate bindings on both the host and guest side that handle this for you.</p>
</blockquote>



<a name="253571991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233356%20%5Bhelp%5D%20import%20func/near/253571991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233356.20.5Bhelp.5D.20import.20func.html#253571991">(Sep 16 2021 at 12:21)</a>:</h4>
<p>silence-coding <a href="https://github.com/bytecodealliance/wasmtime/issues/3356#issuecomment-920853377">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3356">issue #3356</a>:</p>
<blockquote>
<p>@bjorn3 Thank you very much. It's very useful.</p>
</blockquote>



<a name="253571997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233356%20%5Bhelp%5D%20import%20func/near/253571997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233356.20.5Bhelp.5D.20import.20func.html#253571997">(Sep 16 2021 at 12:21)</a>:</h4>
<p>silence-coding closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3356">issue #3356</a>:</p>
<blockquote>
<p>How to import a function like log_str that can pass complex structures</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="sd">/// # fn main() -&gt; anyhow::Result&lt;()&gt; {</span>
<span class="w">    </span><span class="sd">/// # let engine = Engine::default();</span>
<span class="w">    </span><span class="sd">/// let mut linker = Linker::new(&amp;engine);</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "double", |x: i32| x * 2)?;</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "log_i32", |x: i32| println!("{}", x))?;</span>
<span class="w">    </span><span class="sd">/// linker.func_wrap("host", "log_str", |caller: Caller&lt;'_, ()&gt;, ptr: i32, len: i32| {</span>
<span class="w">    </span><span class="sd">///     // ...</span>
<span class="w">    </span><span class="sd">/// })?;</span>
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>