<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8718 impl Send for JITModule · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html">wasmtime / PR #8718 impl Send for JITModule</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="441715669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441715669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441715669">(May 31 2024 at 14:02)</a>:</h4>
<p><strong>MolotovCherry</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>.</p>



<a name="441715671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441715671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441715671">(May 31 2024 at 14:02)</a>:</h4>
<p><strong>MolotovCherry</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>.</p>



<a name="441715675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441715675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441715675">(May 31 2024 at 14:02)</a>:</h4>
<p>MolotovCherry opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a> from <code>MolotovCherry:main</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><code>JITModule</code> currently is <code>!Send</code>, which makes it less useful. According to bjorn, it makes sense to make it <code>Send</code>.</p>
<p>I'm fairly new to this, but please let me know any issues/concerns you have and I'll do my best to address them. Thanks!</p>
<p>Ref: <a href="#narrow/stream/206238-general/topic/Cross.20thread.20JITModule/near/441536899">https://bytecodealliance.zulipchat.com/#narrow/stream/206238-general/topic/Cross.20thread.20JITModule/near/441536899</a></p>
<p>cc @bjorn3 </p>
</blockquote>



<a name="441715875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441715875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441715875">(May 31 2024 at 14:03)</a>:</h4>
<p>MolotovCherry edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>:</p>
<blockquote>
<p><code>JITModule</code> currently is <code>!Send</code>, which makes it less useful. According to bjorn, it makes sense to make it <code>Send</code>.</p>
<p>I'm fairly new to this, but please let me know any issues/concerns you have with this and I'll do my best to address them. Thanks!</p>
<p>Ref: <a href="#narrow/stream/206238-general/topic/Cross.20thread.20JITModule/near/441536899">https://bytecodealliance.zulipchat.com/#narrow/stream/206238-general/topic/Cross.20thread.20JITModule/near/441536899</a></p>
<p>cc @bjorn3 </p>
</blockquote>



<a name="441721211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441721211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441721211">(May 31 2024 at 14:26)</a>:</h4>
<p>MolotovCherry submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2090991245">PR review</a>.</p>



<a name="441721212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441721212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441721212">(May 31 2024 at 14:26)</a>:</h4>
<p>MolotovCherry created <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622507493">PR review comment</a>:</p>
<blockquote>
<p>Seeing that <code>libcall_names</code> already originally required <code>Send + Sync</code> in <code>JITBuilder</code>, I wonder if it would be better to also add <code>Sync</code> to this.</p>
</blockquote>



<a name="441721276"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441721276" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441721276">(May 31 2024 at 14:26)</a>:</h4>
<p>MolotovCherry edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622507493">PR review comment</a>.</p>



<a name="441722016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441722016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441722016">(May 31 2024 at 14:29)</a>:</h4>
<p>MolotovCherry edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622507493">PR review comment</a>.</p>



<a name="441723687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441723687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441723687">(May 31 2024 at 14:37)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2091017992">PR review</a>.</p>



<a name="441723688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441723688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441723688">(May 31 2024 at 14:37)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622523165">PR review comment</a>:</p>
<blockquote>
<p>Instead of implementing <code>Send</code> on <code>JITModule</code>, which may cause issues if we add a new non-<code>Send</code> field, maybe it would be possible to implement <code>Send</code> on each type that doesn't currently like <code>CompiledBlob</code> and <code>PtrLen</code>. For the <code>symbols</code> field you can for example wrap the <code>*const u8</code> in a newtype.</p>
</blockquote>



<a name="441723912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441723912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441723912">(May 31 2024 at 14:38)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2091020002">PR review</a>.</p>



<a name="441723913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441723913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441723913">(May 31 2024 at 14:38)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622524377">PR review comment</a>:</p>
<blockquote>
<p>I don't think there is much point in making it <code>Sync</code> too as <code>JITModule</code> can't be <code>Sync</code> anyway. For <code>libcall_names</code> it makes sense for it to be <code>Sync</code> to be able to pass <code>cranelift_module::default_libcall_names()</code>.</p>
</blockquote>



<a name="441732297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441732297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441732297">(May 31 2024 at 15:15)</a>:</h4>
<p>MolotovCherry updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>.</p>



<a name="441733194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441733194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441733194">(May 31 2024 at 15:18)</a>:</h4>
<p>MolotovCherry submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2091112506">PR review</a>.</p>



<a name="441733196"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441733196" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441733196">(May 31 2024 at 15:18)</a>:</h4>
<p>MolotovCherry created <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622581118">PR review comment</a>:</p>
<blockquote>
<p>Should be mostly good now I think. I made a <code>SendWrapper</code> for fields which can be wrapped in it in <code>JITModule</code>, and impl'd <code>Send</code> on any types that didn't like <code>CompiledBlob</code> and <code>PtrLen</code>. I also had to wrap all the <code>NonNull</code> fields as they were also offenders</p>
</blockquote>



<a name="441733307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441733307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441733307">(May 31 2024 at 15:19)</a>:</h4>
<p>MolotovCherry edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622581118">PR review comment</a>.</p>



<a name="441734131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441734131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441734131">(May 31 2024 at 15:22)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2091119384">PR review</a>.</p>



<a name="441734132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441734132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441734132">(May 31 2024 at 15:22)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#discussion_r1622585250">PR review comment</a>:</p>
<blockquote>
<p>Deriving Copy and Clone should be fine.</p>
</blockquote>



<a name="441734625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/441734625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#441734625">(May 31 2024 at 15:24)</a>:</h4>
<p>MolotovCherry updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>.</p>



<a name="442356282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/442356282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#442356282">(Jun 03 2024 at 19:58)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8718#pullrequestreview-2094731362">PR review</a>.</p>



<a name="442359533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238718%20impl%20Send%20for%20JITModule/near/442359533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238718.20impl.20Send.20for.20JITModule.html#442359533">(Jun 03 2024 at 20:13)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8718">PR #8718</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>