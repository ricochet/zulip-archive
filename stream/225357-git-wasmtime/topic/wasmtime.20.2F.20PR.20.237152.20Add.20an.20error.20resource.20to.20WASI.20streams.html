<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7152 Add an error resource to WASI streams · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html">wasmtime / PR #7152 Add an error resource to WASI streams</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="394924817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/394924817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#394924817">(Oct 04 2023 at 22:20)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a> from <code>alexcrichton:wasi-stream-error-information</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit adds a new <code>error</code> resource to the <code>wasi:io/streams</code><br>
interface. This <code>error</code> resource is returned as part of<br>
<code>last-operation-failed</code> and serves as a means to discover through other<br>
interfaces more granular type information than a generic string. This<br>
error type has a new function in the <code>filesystem</code> interface, for<br>
example, which enables getting filesystem-related error codes from I/O<br>
performed on filesystem-originating streams. This is plumbed through to<br>
the adapter as well to return more than <code>ERRNO_IO</code> from failed<br>
read/write operations now too.</p>
<p>This is not super fancy just yet but is intended to be a vector through<br>
which future additions can be done. The main thing this enables is to<br>
avoid dropping errors on the floor in the host and enabling the guest to<br>
discover further information about I/O errors on streams.</p>
<p>Closes <a href="https://github.com/bytecodealliance/wasmtime/issues/7017">https://github.com/bytecodealliance/wasmtime/issues/7017</a></p>
</blockquote>



<a name="394924818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/394924818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#394924818">(Oct 04 2023 at 22:20)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="394924822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/394924822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#394924822">(Oct 04 2023 at 22:20)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="394924823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/394924823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#394924823">(Oct 04 2023 at 22:20)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395086293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395086293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395086293">(Oct 05 2023 at 17:09)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#pullrequestreview-1660270560">PR review</a>:</p>
<blockquote>
<p>This looks great!</p>
</blockquote>



<a name="395086294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395086294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395086294">(Oct 05 2023 at 17:09)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#pullrequestreview-1660270560">PR review</a>:</p>
<blockquote>
<p>This looks great!</p>
</blockquote>



<a name="395086295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395086295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395086295">(Oct 05 2023 at 17:09)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#discussion_r1347685768">PR review comment</a>:</p>
<blockquote>
<p>The syntax for naming resources in <code>with</code> turned this into <code>demo:pkg/a/b</code>, would it make the sense to do the same here?</p>
</blockquote>



<a name="395086296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395086296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395086296">(Oct 05 2023 at 17:09)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#discussion_r1347689903">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    /// `stream-error` values are returned whenever an
</code></pre></div><br>
</p>
</blockquote>



<a name="395104148"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395104148" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395104148">(Oct 05 2023 at 19:10)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#pullrequestreview-1660537076">PR review</a>.</p>



<a name="395104150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395104150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395104150">(Oct 05 2023 at 19:10)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/7152#discussion_r1347861184">PR review comment</a>:</p>
<blockquote>
<p>Agreed! I'll do this in a follow up as I'd also like to change <code>"...": Type</code> to <code>"..." =&gt; Type</code></p>
</blockquote>



<a name="395104178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395104178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395104178">(Oct 05 2023 at 19:10)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395104194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395104194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395104194">(Oct 05 2023 at 19:10)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395105874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395105874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395105874">(Oct 05 2023 at 19:23)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395128733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395128733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395128733">(Oct 05 2023 at 22:40)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395128825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395128825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395128825">(Oct 05 2023 at 22:41)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<a name="395135558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237152%20Add%20an%20error%20resource%20to%20WASI%20streams/near/395135558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237152.20Add.20an.20error.20resource.20to.20WASI.20streams.html#395135558">(Oct 05 2023 at 23:54)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7152">PR #7152</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>