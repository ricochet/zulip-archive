<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6113 x64: Deduplicate fcmp emission logic · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html">wasmtime / PR #6113 x64: Deduplicate fcmp emission logic</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="345234216"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345234216" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345234216">(Mar 28 2023 at 20:17)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a> from <code>deduplicate-emit-fcmp</code> to <code>main</code>:</p>
<blockquote>
<p>The <code>select</code>-of-<code>fcmp</code> lowering duplicated a good deal of <code>FloatCC</code><br>
lowering logic that was already done by <code>emit_fcmp</code>, so this commit<br>
refactors these lowering rules to instead delegate to <code>emit_fcmp</code> and<br>
then handle that result.</p>
<p>I also split up the commits here where the first one is slightly unidiomatic in a few places but doesn't affect any of the test outputs. The next two commits swap the order of a few operands and shows the test updates necessary to get there.</p>
</blockquote>



<a name="345234218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345234218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345234218">(Mar 28 2023 at 20:17)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345234221"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345234221" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345234221">(Mar 28 2023 at 20:17)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345234224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345234224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345234224">(Mar 28 2023 at 20:17)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345234225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345234225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345234225">(Mar 28 2023 at 20:17)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345266370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345266370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345266370">(Mar 29 2023 at 00:19)</a>:</h4>
<p>cfallin assigned <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a> to cfallin.</p>



<a name="345266716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345266716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345266716">(Mar 29 2023 at 00:22)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6113#pullrequestreview-1362089292">PR review</a>.</p>



<a name="345266717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345266717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345266717">(Mar 29 2023 at 00:22)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6113#pullrequestreview-1362089292">PR review</a>.</p>



<a name="345266719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345266719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345266719">(Mar 29 2023 at 00:22)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6113#discussion_r1151275668">PR review comment</a>:</p>
<blockquote>
<p>Pre-existing, but I think something is out-of-order in the pretty-printing here -- would you mind fixing this while we're here?</p>
</blockquote>



<a name="345433113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345433113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345433113">(Mar 29 2023 at 15:06)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345433115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345433115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345433115">(Mar 29 2023 at 15:06)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345433118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345433118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345433118">(Mar 29 2023 at 15:06)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a> (assigned to cfallin) from <code>deduplicate-emit-fcmp</code> to <code>main</code>.</p>



<a name="345433167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345433167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345433167">(Mar 29 2023 at 15:06)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<a name="345471331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236113%20x64%3A%20Deduplicate%20fcmp%20emission%20logic/near/345471331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236113.20x64.3A.20Deduplicate.20fcmp.20emission.20logic.html#345471331">(Mar 29 2023 at 17:30)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6113">PR #6113</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>