<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4393 Add debug symbol transformation fo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html">wasmtime / issue #4393 Add debug symbol transformation fo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="288713542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/288713542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#288713542">(Jul 06 2022 at 18:48)</a>:</h4>
<p>jeffcharles opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<a name="289215407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289215407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289215407">(Jul 11 2022 at 16:19)</a>:</h4>
<p>akirilov-arm labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<a name="289215408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289215408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289215408">(Jul 11 2022 at 16:19)</a>:</h4>
<p>akirilov-arm labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<a name="289215409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289215409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289215409">(Jul 11 2022 at 16:19)</a>:</h4>
<p>akirilov-arm labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<a name="289215410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289215410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289215410">(Jul 11 2022 at 16:19)</a>:</h4>
<p>akirilov-arm labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<a name="289766639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289766639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289766639">(Jul 15 2022 at 18:40)</a>:</h4>
<p>akirilov-arm <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1185809524">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<p>Have you seen issue #2856? It documents some of the issues with full debugging support on non-x86 platforms (in fact, it subsumes the previous AArch64-specific issue, #1523) and is probably a better place to discuss any details that are not AArch64-specific.</p>
</blockquote>



<a name="289977107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/289977107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#289977107">(Jul 18 2022 at 14:57)</a>:</h4>
<p>jeffcharles <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1187606047">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<p>I had not seen that issue. I can take a look at those details.</p>
<p>Even without changes to the debug crate though, given my change, I'm currently able to get a reasonable debugging experience on AArch64 as opposed to an error message with the status quo.</p>
</blockquote>



<a name="290021011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/290021011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#290021011">(Jul 18 2022 at 20:49)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1188295637">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<p>I see the PR just makes aarch64 do exactly what x64 and s390x already do. I don't know much yet about Cranelift's target backends, but it seems plausible to me that <code>inst::unwind::systemv::map_reg</code> would be the right choice for aarch64 as well. @akirilov-arm, is there any reason not to merge this?</p>
<p>Also, maybe we should edit the contributor guidelines to say that if it's easier to explain your issue by just opening a pull request showing what you want changed, then you don't need to open an issue first? Anyway I'd say go ahead and open a PR here with your proposed changes.</p>
</blockquote>



<a name="290096174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/290096174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#290096174">(Jul 19 2022 at 13:11)</a>:</h4>
<p>akirilov-arm <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1189035514">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<blockquote>
<p>@akirilov-arm, is there any reason not to merge this?</p>
</blockquote>
<p>I don't know, usually I don't look at PRs that have not been opened in this repository. From a cursory glance it looks OK, but I am not really familiar with that part of the code.</p>
</blockquote>



<a name="290141375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/290141375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#290141375">(Jul 19 2022 at 18:30)</a>:</h4>
<p>jeffcharles <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1189422056">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<p>I've opened a PR at #4468.</p>
</blockquote>



<a name="290151726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/290151726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#290151726">(Jul 19 2022 at 19:50)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4393#issuecomment-1189489010">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<p>Merged, thank you!</p>
</blockquote>



<a name="290151727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234393%20Add%20debug%20symbol%20transformation%20fo.../near/290151727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234393.20Add.20debug.20symbol.20transformation.20fo.2E.2E.2E.html#290151727">(Jul 19 2022 at 19:50)</a>:</h4>
<p>jameysharp closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4393">issue #4393</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Debug symbol transformation for AArch64. That is, when running <code>wasmtime compile -g &lt;path_to_wasm&gt;</code>, <code>wasmtime</code> does not exit with an error message and debug symbols are included in the resulting <code>.cwasm</code> file.</p>
<h4>Benefit</h4>
<p>It enables developers writing code targeting a Wasm environment to be able to step debug their code in a Wasm environment if they are using Apple Silicon.</p>
<h4>Implementation</h4>
<p><a href="https://github.com/jeffcharles/wasmtime/pull/1/files">https://github.com/jeffcharles/wasmtime/pull/1/files</a>. This uses a similar approach to how the symbols are mapped for x86_64. I can open that PR on this repo instead. The contribution guidelines mentioned I should open an issue here first to discuss.</p>
<p>The PR above seems to work for a number of test cases that I've tried.</p>
<h4>Alternatives</h4>
<p>I'm not sure what the alternatives are.<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>