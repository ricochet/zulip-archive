<html>
<head><meta charset="utf-8"><title>wasmtime / issue #8395 WASI semver compatibility should a... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html">wasmtime / issue #8395 WASI semver compatibility should a...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="433794582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/433794582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#433794582">(Apr 17 2024 at 14:49)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasi label to <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">Issue #8395</a>.</p>



<a name="433794595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/433794595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#433794595">(Apr 17 2024 at 14:49)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">issue #8395</a>:</p>
<blockquote>
<p>In <a href="https://github.com/bytecodealliance/wasmtime/pull/7994">https://github.com/bytecodealliance/wasmtime/pull/7994</a> the <code>component::Linker</code> type in Wasmtime was made aware of semver by enabling loading a component that requires 0.2.0 of an interface with a supplied 0.2.1 of an interface. This enables us to update WASI in Wasmtime without breaking the ability to load older components.</p>
<p>This support, however, does not work for exports. If a component exports 0.2.0 and the runtime is generating bindings for 0.2.1 then loading the export will fail currently, there's no logic anywhere to probe for older verions.</p>
<p>This represents a snag in our story of WASI compatibility in Wasmtime and is something we should address before updating WASI to 0.2.1</p>
</blockquote>



<a name="433794633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/433794633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#433794633">(Apr 17 2024 at 14:49)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasmtime:api label to <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">Issue #8395</a>.</p>



<a name="433848860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/433848860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#433848860">(Apr 17 2024 at 18:23)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/8395#issuecomment-2061940158">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">issue #8395</a>:</p>
<blockquote>
<p>Removing exports in a new interface version should be trivially fine? Adding non-optional exports shouldn't be allowed as the host may attempt to call them. Adding optional exports would be fine, but the component model doesn't have a way to represent them, right?</p>
</blockquote>



<a name="433856095"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/433856095" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#433856095">(Apr 17 2024 at 19:04)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/8395#issuecomment-2062012236">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">issue #8395</a>:</p>
<blockquote>
<p>Correct yeah, the problem here has to do with <code>bindgen!</code> and how exports are looked up. Currently they're done with exact string matches so if we were to update to WASI 0.2.1 then we'd look for a <code>wasi:cli/run@0.2.1</code> exported interface but wouldn't be able to find that on an older component where it's called <code>wasi:cli/run@0.2.0</code></p>
</blockquote>



<a name="445430465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238395%20WASI%20semver%20compatibility%20should%20a.../near/445430465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238395.20WASI.20semver.20compatibility.20should.20a.2E.2E.2E.html#445430465">(Jun 18 2024 at 18:23)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/8395">issue #8395</a>:</p>
<blockquote>
<p>In <a href="https://github.com/bytecodealliance/wasmtime/pull/7994">https://github.com/bytecodealliance/wasmtime/pull/7994</a> the <code>component::Linker</code> type in Wasmtime was made aware of semver by enabling loading a component that requires 0.2.0 of an interface with a supplied 0.2.1 of an interface. This enables us to update WASI in Wasmtime without breaking the ability to load older components.</p>
<p>This support, however, does not work for exports. If a component exports 0.2.0 and the runtime is generating bindings for 0.2.1 then loading the export will fail currently, there's no logic anywhere to probe for older verions.</p>
<p>This represents a snag in our story of WASI compatibility in Wasmtime and is something we should address before updating WASI to 0.2.1</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>