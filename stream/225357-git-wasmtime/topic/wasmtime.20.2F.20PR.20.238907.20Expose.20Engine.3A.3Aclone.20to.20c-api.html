<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8907 Expose Engine::clone to c-api · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html">wasmtime / PR #8907 Expose Engine::clone to c-api</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="449590437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449590437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449590437">(Jul 07 2024 at 02:24)</a>:</h4>
<p><strong>CGamesPlay</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">PR #8907</a>.</p>



<a name="449590438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449590438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449590438">(Jul 07 2024 at 02:24)</a>:</h4>
<p><strong>CGamesPlay</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">PR #8907</a>.</p>



<a name="449590439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449590439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449590439">(Jul 07 2024 at 02:24)</a>:</h4>
<p>CGamesPlay opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">PR #8907</a> from <code>CGamesPlay:main</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This creates an API to allow cloning references to wasm_engine_t in the C API. This is simple in the Rust API which implements Clone, however it is not exposed to the C API.</p>
<p>Use case: in tree-sitter's wasm support, we create a store object and want to instantiate modules into it over the course of the object's lifetime. This requires a handle to the underlying engine, which means our store must be kept alongside a reference to the engine (since tree-sitter is a library, it doesn't want to assume a global wasm engine). This currently requires transferring ownership of the engine to the tree sitter store container, which means we can't reuse engine objects between multiple stores.</p>
<p>This pertains to <a href="https://github.com/tree-sitter/tree-sitter/issues/3454">https://github.com/tree-sitter/tree-sitter/issues/3454</a>.</p>
</blockquote>



<a name="449870062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449870062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449870062">(Jul 08 2024 at 13:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#pullrequestreview-2163318774">PR review</a>.</p>



<a name="449870063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449870063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449870063">(Jul 08 2024 at 13:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#pullrequestreview-2163318774">PR review</a>.</p>



<a name="449870064"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449870064" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449870064">(Jul 08 2024 at 13:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#discussion_r1668634581">PR review comment</a>:</p>
<blockquote>
<p>Good catch! We'll need to update this documentation further nowadays because some headers are generated as part of the build now so CMake is primarily needed to get the headers right.</p>
</blockquote>



<a name="449870065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449870065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449870065">(Jul 08 2024 at 13:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#discussion_r1668633325">PR review comment</a>:</p>
<blockquote>
<p>Could the documentation be updated here to indicate that <code>wasm_engine_delete</code> must be called on the returned reference?</p>
</blockquote>



<a name="449877441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449877441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449877441">(Jul 08 2024 at 13:57)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">PR #8907</a>.</p>



<a name="449886151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449886151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449886151">(Jul 08 2024 at 14:34)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#pullrequestreview-2163536507">PR review</a>.</p>



<a name="449891023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/449891023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#449891023">(Jul 08 2024 at 14:49)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">PR #8907</a>.</p>



<a name="469803270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/469803270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#469803270">(Sep 13 2024 at 00:01)</a>:</h4>
<p>av1934413 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#pullrequestreview-2301603569">PR review</a>.</p>



<a name="469803271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238907%20Expose%20Engine%3A%3Aclone%20to%20c-api/near/469803271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238907.20Expose.20Engine.3A.3Aclone.20to.20c-api.html#469803271">(Sep 13 2024 at 00:01)</a>:</h4>
<p>av1934413 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8907#discussion_r1757733025">PR review comment</a>:</p>
<blockquote>
<p>274df2d52a8568f99e608f59046b20a948a15dea</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>