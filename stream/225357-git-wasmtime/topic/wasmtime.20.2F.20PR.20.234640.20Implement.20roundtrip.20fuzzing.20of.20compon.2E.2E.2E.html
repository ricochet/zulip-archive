<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4640 Implement roundtrip fuzzing of compon... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html">wasmtime / PR #4640 Implement roundtrip fuzzing of compon...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="292464708"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292464708" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292464708">(Aug 08 2022 at 17:01)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a> from <code>fuzz-adapters</code> to <code>main</code>:</p>
<blockquote>
<p>This series of commits is an implementation of enhancing the existing <code>component_api</code> fuzzer which roundtrips values through components to also roundtrip values through adapter modules as well. The fuzzer itself is extended in a pretty small fashion by "simply" instantiating a second component in the tests and everything is wired up to call the same echo function provided by the host. This will exercise the type hierarchies for adapter modules and various edges of the adapter compiler as well.</p>
<p>After running the fuzzer locally for a bit it found a nice crop of issues in the adapter compiler. The fixes for all of these are split out into individual commits. The main issue found was that the output module was growing exponentially in size with respect to the size of the input. To fix this I implemented a "de-inlining" scheme of sorts where memory-to-memory conversions of types are now split out into individual functions to allow reuse and avoid inlining everything into one mega function for each adapter. This doesn't 100% fix the issue because stack-to-stack conversion can still show some exponential behaviour, but at least for now this fixes the most egregious cases and the fuzzer isn't routinely timing out.</p>
</blockquote>



<a name="292464709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292464709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292464709">(Aug 08 2022 at 17:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a>.</p>



<a name="292466296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292466296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292466296">(Aug 08 2022 at 17:14)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a> from <code>fuzz-adapters</code> to <code>main</code>.</p>



<a name="292466762"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292466762" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292466762">(Aug 08 2022 at 17:18)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4640#pullrequestreview-1065521377">PR review</a>.</p>



<a name="292466763"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292466763" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292466763">(Aug 08 2022 at 17:18)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4640#pullrequestreview-1065521377">PR review</a>.</p>



<a name="292466764"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292466764" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292466764">(Aug 08 2022 at 17:18)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/4640#discussion_r940476662">PR review comment</a>:</p>
<blockquote>
<p>I feel like we should check for <code>-1</code> and trap if we see it, just so that we can't iloop here.</p>
</blockquote>



<a name="292471196"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292471196" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292471196">(Aug 08 2022 at 17:24)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a> from <code>fuzz-adapters</code> to <code>main</code>.</p>



<a name="292471224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292471224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292471224">(Aug 08 2022 at 17:25)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a>.</p>



<a name="292475423"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234640%20Implement%20roundtrip%20fuzzing%20of%20compon.../near/292475423" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234640.20Implement.20roundtrip.20fuzzing.20of.20compon.2E.2E.2E.html#292475423">(Aug 08 2022 at 18:01)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4640">PR #4640</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>