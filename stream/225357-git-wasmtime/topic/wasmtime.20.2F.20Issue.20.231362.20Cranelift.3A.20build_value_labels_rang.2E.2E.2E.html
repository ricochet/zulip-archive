<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1362 Cranelift: build_value_labels_rang... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html">wasmtime / Issue #1362 Cranelift: build_value_labels_rang...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="191114307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191114307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191114307">(Mar 19 2020 at 13:44)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<ul>
<li>It assumes only one new <code>ValueLabel</code> introduced at each <code>SourceLoc</code>. (<code>build_value_labels_index</code>)</li>
<li>It assumes <code>SourceLoc</code> is strictly ascending. (Checking for <code>last_srcloc.unwrap() &gt; srcloc</code> instead of <code>last_srcloc.unwrap() != srcloc</code>)</li>
<li>It assumes that a <code>ValueLabel</code> is only alive for a continuous range of <code>SourceLoc</code>. (<code>values_labels.range(range)</code>)</li>
</ul>
<p>All of those assumptions are broken by cg_clif, meaning that <code>build_value_labels_ranges</code> often misses  values in the output.</p>
</blockquote>



<a name="191114308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191114308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191114308">(Mar 19 2020 at 13:44)</a>:</h4>
<p>bjorn3 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<ul>
<li>It assumes only one new <code>ValueLabel</code> introduced at each <code>SourceLoc</code>. (<code>build_value_labels_index</code>)</li>
<li>It assumes <code>SourceLoc</code> is strictly ascending. (Checking for <code>last_srcloc.unwrap() &gt; srcloc</code> instead of <code>last_srcloc.unwrap() != srcloc</code>)</li>
<li>It assumes that a <code>ValueLabel</code> is only alive for a continuous range of <code>SourceLoc</code>. (<code>values_labels.range(range)</code>)</li>
</ul>
<p>All of those assumptions are broken by cg_clif, meaning that <code>build_value_labels_ranges</code> often misses  values in the output.</p>
</blockquote>



<a name="191114309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191114309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191114309">(Mar 19 2020 at 13:44)</a>:</h4>
<p>bjorn3 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<ul>
<li>It assumes only one new <code>ValueLabel</code> introduced at each <code>SourceLoc</code>. (<code>build_value_labels_index</code>)</li>
<li>It assumes <code>SourceLoc</code> is strictly ascending. (Checking for <code>last_srcloc.unwrap() &gt; srcloc</code> instead of <code>last_srcloc.unwrap() != srcloc</code>)</li>
<li>It assumes that a <code>ValueLabel</code> is only alive for a continuous range of <code>SourceLoc</code>. (<code>values_labels.range(range)</code>)</li>
</ul>
<p>All of those assumptions are broken by cg_clif, meaning that <code>build_value_labels_ranges</code> often misses  values in the output.</p>
</blockquote>



<a name="191114332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191114332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191114332">(Mar 19 2020 at 13:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601186589" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601186589">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>This issue or pull request has been labeled: "cranelift"</p>
<p>&lt;details&gt; &lt;summary&gt;Users Subscribed to "cranelift"&lt;/summary&gt;</p>
<ul>
<li>@bnjbvr</li>
</ul>
<p>&lt;/details&gt;</p>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action" target="_blank" title="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a></p>
</blockquote>



<a name="191127346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191127346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191127346">(Mar 19 2020 at 15:13)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601235242" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601235242">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<p>I started working on this at <a href="https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes" target="_blank" title="https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes">https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes</a>, but I am stuck ATM. Associated cg_clif branch: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements" target="_blank" title="https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements">https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements</a>. In the following case <code>val0</code>, <code>val1</code>, <code>val2</code>, <code>val3</code>, <code>val4</code> and <code>val5</code> should get one or more <code>ValueLocRange</code>'s. However only <code>val2</code> and <code>val4</code> get one.</p>
<p>&lt;details&gt;&lt;summary&gt;Debug println&lt;/summary&gt;</p>
<div class="codehilite"><pre><span></span>{
    ComparableSourceLoc(SourceLoc(1)): [
        (v3, val2),
        (v3, val5),
    ],
    ComparableSourceLoc(SourceLoc(2)): [
        (v3, val5),
        (v6, val4),
    ],
    ComparableSourceLoc(SourceLoc(3)): [
        (v3, val5),
    ],
    ComparableSourceLoc(SourceLoc(4)): [
        (v6, val4),
    ],
    ComparableSourceLoc(SourceLoc(5)): [
        (v7, val0),
    ],
    ComparableSourceLoc(SourceLoc(6)): [
        (v7, val0),
    ],
    ComparableSourceLoc(SourceLoc(4294967294)): [
        (v1, val2),
        (v2, val3),
        (v0, val1),
    ],
}
Instance { def: Item(DefId(0:34 ~ mini_core_hello_world[317d]::start[0])), substs: [()] }
{
    val2: [ValueLocRange { loc: Reg(22), start: 5, end: 21 }],
    val4: [ValueLocRange { loc: Reg(16), start: 21, end: 27 }],
}
Some({
    v0: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val1 }]),
    v1: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val2 }]),
    v2: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val3 }]),
    v3: Starts([ValueLabelStart { from: SourceLoc(1), label: val2 }, ValueLabelStart { from: SourceLoc(1), label: val5 }, ValueLabelStart { from: SourceLoc(2), label: val5 }, ValueLabelStart { from: SourceLoc(3), label: val5 }]),
    v6: Starts([ValueLabelStart { from: SourceLoc(2), label: val4 }, ValueLabelStart { from: SourceLoc(4), label: val4 }]),
    v7: Starts([ValueLabelStart { from: SourceLoc(5), label: val0 }, ValueLabelStart { from: SourceLoc(6), label: val0 }])
})
VarDebugInfo { name: &quot;main&quot;, place: _1 }
VarDebugInfo { name: &quot;argc&quot;, place: _2 }
VarDebugInfo { name: &quot;argv&quot;, place: _3 }
</pre></div>


<p>&lt;/details&gt;</p>
<p>&lt;details&gt;&lt;summary&gt;Cranelift ir&lt;/summary&gt;</p>
<div class="codehilite"><pre><span></span>test compile
set is_pic
target x86_64-unknown-linux-gnu

function u0:0(i64 [%rdi], i64 [%rsi], i64 [%rdx], i64 fp [%rbp]) -&gt; i64 [%rax], i64 fp [%rbp] system_v {
; symbol _ZN21mini_core_hello_world5start17hec55b7ca64fc434eE
; instance Instance { def: Item(DefId(0:34 ~ mini_core_hello_world[317d]::start[0])), substs: [()] }
; sig ([fn(), isize, *const *const u8]; c_variadic: false)-&gt;isize

; kind  loc.idx   param    pass mode                            ty
; ssa   _0    isize                             8b 8, 8
; ret   _0      -          ByVal(types::I64)                    isize
; arg   _1      = v0       ByVal(types::I64)                    fn()
; arg   _2      = v1       ByVal(types::I64)                    isize
; arg   _3      = v2       ByVal(types::I64)                    *const *const u8

; kind  local ty                              size align (abi,pref)
; ssa   _1    fn()                              8b 8, 8
; ssa   _2    isize                             8b 8, 8
; ssa   _3    *const *const u8                  8b 8, 8
; ssa   _4    bool                              1b 1, 1
; ssa   _5    isize                             8b 8, 8

    ss0 = incoming_arg 16, offset -16

                                block0(v0: i64 [%rdi], v1: i64 [%rsi], v2: i64 [%rdx], v8: i64 [%rbp]):
                                    v3 -&gt; v1
[RexOp1pushq#50]                    x86_push v8
[RexOp1copysp#8089]                 copy_special %rsp -&gt; %rbp
;                                                            ;  val2@%rsi
@fffffffe [-]                       nop
; write_cvalue: Var(_1) &lt;- ByVal(v0)
; write_cvalue: Var(_2) &lt;- ByVal(v1)
; write_cvalue: Var(_3) &lt;- ByVal(v2)
@fffffffe [-]                       fallthrough block1

                                block1:
@fffffffe [-]                       nop
; StorageLive(_4)
; StorageLive(_5)
; _5 = _2
; write_cvalue: Var(_5) &lt;- ByVal(v3)
; _4 = Eq(move _5, const 3isize)
@0002 [RexOp1pu_id#b8,%rax]         v4 = iconst.i64 3
@0002 [DynRexOp1icscc#8039,%rax]    v5 = icmp.i64 eq v1, v4
@0002 [RexOp2urm_noflags#4b6,%rax]  v6 = bint.i8 v5
; write_cvalue: Var(_4) &lt;- ByVal(v6)
; StorageDead(_5)
;                                                            ;  val4@%rax val2☠
@0003 [ghost_use_gpr#00]            ghost_use.i64 v1
; StorageDead(_4)
@0004 [ghost_use_gpr#00]            ghost_use v6
; _0 = const 0isize
@0005 [RexOp1pu_id#b8,%rax]         v7 = iconst.i64 0
; write_cvalue: Var(_0) &lt;- ByVal(v7)
;
; return
;                                                            ;  val4☠
[RexOp1popq#58,%rbp]                v9 = x86_pop.i64
@0006 [Op1ret#c3]                   return v7, v9
}
</pre></div>


<p>&lt;/details&gt;</p>
</blockquote>



<a name="191129858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191129858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191129858">(Mar 19 2020 at 15:30)</a>:</h4>
<p>bjorn3 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601235242" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601235242">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<p>I started working on this at <a href="https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes" target="_blank" title="https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes">https://github.com/bjorn3/wasmtime/tree/value_debuginfo_fixes</a>, but I am stuck ATM. Associated cg_clif branch: <a href="https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements" target="_blank" title="https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements">https://github.com/bjorn3/rustc_codegen_cranelift/tree/wip_debuginfo_improvements</a> (bjorn3/rustc_codegen_cranelift@12b6e83a489180ff52a9376c6674202c6cd1ecda). In the following case <code>val0</code>, <code>val1</code>, <code>val2</code>, <code>val3</code>, <code>val4</code> and <code>val5</code> should get one or more <code>ValueLocRange</code>'s. However only <code>val2</code> and <code>val4</code> get one.</p>
<p>&lt;details&gt;&lt;summary&gt;Debug println&lt;/summary&gt;</p>
<div class="codehilite"><pre><span></span>{
    ComparableSourceLoc(SourceLoc(1)): [
        (v3, val2),
        (v3, val5),
    ],
    ComparableSourceLoc(SourceLoc(2)): [
        (v3, val5),
        (v6, val4),
    ],
    ComparableSourceLoc(SourceLoc(3)): [
        (v3, val5),
    ],
    ComparableSourceLoc(SourceLoc(4)): [
        (v6, val4),
    ],
    ComparableSourceLoc(SourceLoc(5)): [
        (v7, val0),
    ],
    ComparableSourceLoc(SourceLoc(6)): [
        (v7, val0),
    ],
    ComparableSourceLoc(SourceLoc(4294967294)): [
        (v1, val2),
        (v2, val3),
        (v0, val1),
    ],
}
Instance { def: Item(DefId(0:34 ~ mini_core_hello_world[317d]::start[0])), substs: [()] }
{
    val2: [ValueLocRange { loc: Reg(22), start: 5, end: 21 }],
    val4: [ValueLocRange { loc: Reg(16), start: 21, end: 27 }],
}
Some({
    v0: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val1 }]),
    v1: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val2 }]),
    v2: Starts([ValueLabelStart { from: SourceLoc(4294967294), label: val3 }]),
    v3: Starts([ValueLabelStart { from: SourceLoc(1), label: val2 }, ValueLabelStart { from: SourceLoc(1), label: val5 }, ValueLabelStart { from: SourceLoc(2), label: val5 }, ValueLabelStart { from: SourceLoc(3), label: val5 }]),
    v6: Starts([ValueLabelStart { from: SourceLoc(2), label: val4 }, ValueLabelStart { from: SourceLoc(4), label: val4 }]),
    v7: Starts([ValueLabelStart { from: SourceLoc(5), label: val0 }, ValueLabelStart { from: SourceLoc(6), label: val0 }])
})
VarDebugInfo { name: &quot;main&quot;, place: _1 }
VarDebugInfo { name: &quot;argc&quot;, place: _2 }
VarDebugInfo { name: &quot;argv&quot;, place: _3 }
</pre></div>


<p>&lt;/details&gt;</p>
<p>&lt;details&gt;&lt;summary&gt;Cranelift ir&lt;/summary&gt;</p>
<div class="codehilite"><pre><span></span>test compile
set is_pic
target x86_64-unknown-linux-gnu

function u0:0(i64 [%rdi], i64 [%rsi], i64 [%rdx], i64 fp [%rbp]) -&gt; i64 [%rax], i64 fp [%rbp] system_v {
; symbol _ZN21mini_core_hello_world5start17hec55b7ca64fc434eE
; instance Instance { def: Item(DefId(0:34 ~ mini_core_hello_world[317d]::start[0])), substs: [()] }
; sig ([fn(), isize, *const *const u8]; c_variadic: false)-&gt;isize

; kind  loc.idx   param    pass mode                            ty
; ssa   _0    isize                             8b 8, 8
; ret   _0      -          ByVal(types::I64)                    isize
; arg   _1      = v0       ByVal(types::I64)                    fn()
; arg   _2      = v1       ByVal(types::I64)                    isize
; arg   _3      = v2       ByVal(types::I64)                    *const *const u8

; kind  local ty                              size align (abi,pref)
; ssa   _1    fn()                              8b 8, 8
; ssa   _2    isize                             8b 8, 8
; ssa   _3    *const *const u8                  8b 8, 8
; ssa   _4    bool                              1b 1, 1
; ssa   _5    isize                             8b 8, 8

    ss0 = incoming_arg 16, offset -16

                                block0(v0: i64 [%rdi], v1: i64 [%rsi], v2: i64 [%rdx], v8: i64 [%rbp]):
                                    v3 -&gt; v1
[RexOp1pushq#50]                    x86_push v8
[RexOp1copysp#8089]                 copy_special %rsp -&gt; %rbp
;                                                            ;  val2@%rsi
@fffffffe [-]                       nop
; write_cvalue: Var(_1) &lt;- ByVal(v0)
; write_cvalue: Var(_2) &lt;- ByVal(v1)
; write_cvalue: Var(_3) &lt;- ByVal(v2)
@fffffffe [-]                       fallthrough block1

                                block1:
@fffffffe [-]                       nop
; StorageLive(_4)
; StorageLive(_5)
; _5 = _2
; write_cvalue: Var(_5) &lt;- ByVal(v3)
; _4 = Eq(move _5, const 3isize)
@0002 [RexOp1pu_id#b8,%rax]         v4 = iconst.i64 3
@0002 [DynRexOp1icscc#8039,%rax]    v5 = icmp.i64 eq v1, v4
@0002 [RexOp2urm_noflags#4b6,%rax]  v6 = bint.i8 v5
; write_cvalue: Var(_4) &lt;- ByVal(v6)
; StorageDead(_5)
;                                                            ;  val4@%rax val2☠
@0003 [ghost_use_gpr#00]            ghost_use.i64 v1
; StorageDead(_4)
@0004 [ghost_use_gpr#00]            ghost_use v6
; _0 = const 0isize
@0005 [RexOp1pu_id#b8,%rax]         v7 = iconst.i64 0
; write_cvalue: Var(_0) &lt;- ByVal(v7)
;
; return
;                                                            ;  val4☠
[RexOp1popq#58,%rbp]                v9 = x86_pop.i64
@0006 [Op1ret#c3]                   return v7, v9
}
</pre></div>


<p>&lt;/details&gt;</p>
</blockquote>



<a name="191145278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191145278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191145278">(Mar 19 2020 at 17:14)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601306565" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-601306565">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span>[
    LiveRange { value: v0, affinity: Reg(RegClassIndex(0)), def_begin: ProgramPoint(block0), def_end: ProgramPoint(inst1), liveind: [Interval { begin: block1, end: inst6 }] },
    LiveRange { value: v2, affinity: Reg(RegClassIndex(0)), def_begin: ProgramPoint(inst3), def_end: ProgramPoint(inst4), liveind: [] },
    LiveRange { value: v3, affinity: Reg(RegClassIndex(4)), def_begin: ProgramPoint(inst4), def_end: ProgramPoint(inst5), liveind: [] },
    LiveRange { value: v4, affinity: Reg(RegClassIndex(0)), def_begin: ProgramPoint(inst5), def_end: ProgramPoint(inst7), liveind: [] },
]
</pre></div>


<p>It seems that <code>v1</code> doesn't have liveness information despite the <code>ghost_use.i64 v1</code>.</p>
</blockquote>



<a name="191611103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231362%20Cranelift%3A%20build_value_labels_rang.../near/191611103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231362.20Cranelift.3A.20build_value_labels_rang.2E.2E.2E.html#191611103">(Mar 24 2020 at 13:47)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-603248459" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362#issuecomment-603248459">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1362" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1362">Issue #1362</a>:</p>
<blockquote>
<blockquote>
<p>It assumes SourceLoc is strictly ascending. (Checking for last_srcloc.unwrap() &gt; srcloc instead of last_srcloc.unwrap() != srcloc)</p>
</blockquote>
<p>This property might be essential track ranges transformation (e.g. during DWARF translation). Though it is possible to expose that indirectly via some context.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>