<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5050 Host component import function par... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html">wasmtime / issue #5050 Host component import function par...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="303692302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303692302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303692302">(Oct 12 2022 at 17:58)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Host component import function parameters should take borrowed values.</p>
<p>Presently, the arguments to a host component import function (as provided to <code>wasmtime::component::LinkerInstance::func_wrap</code>) have to implement <code>IntoComponentFunc</code>, whose argument list is required to impl <code>Lift</code>. <code>Lift</code> does not allow borrowed values. So, these import functions are passed <code>String</code> when it would be better for them to accept <code>&amp;str</code>.</p>
<h4>Benefit</h4>
<p>Passing in a borrowed value will reduce the number of copies required to output lists. The implementation of a synchronous <code>fd_write</code> would benefit from this optimization. <br>
</p>
</blockquote>



<a name="303692303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303692303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303692303">(Oct 12 2022 at 17:58)</a>:</h4>
<p>pchickey labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Host component import function parameters should take borrowed values.</p>
<p>Presently, the arguments to a host component import function (as provided to <code>wasmtime::component::LinkerInstance::func_wrap</code>) have to implement <code>IntoComponentFunc</code>, whose argument list is required to impl <code>Lift</code>. <code>Lift</code> does not allow borrowed values. So, these import functions are passed <code>String</code> when it would be better for them to accept <code>&amp;str</code>.</p>
<h4>Benefit</h4>
<p>Passing in a borrowed value will reduce the number of copies required to output lists. The implementation of a synchronous <code>fd_write</code> would benefit from this optimization. <br>
</p>
</blockquote>



<a name="303702750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303702750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303702750">(Oct 12 2022 at 18:59)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Host component import function parameters should take borrowed values.</p>
<p>Presently, the arguments to a host component import function (as provided to <code>wasmtime::component::LinkerInstance::func_wrap</code>) have to implement <code>IntoComponentFunc</code>, whose argument list is required to impl <code>Lift</code>. <code>Lift</code> does not allow borrowed values. So, these import functions are passed <code>String</code> or <code>Vec&lt;u8&gt;</code> when it would be better for them to accept <code>&amp;str</code> or <code>&amp;[u8]</code>. A borrowed value would be able to point to memory in a guest linear memory, whereas an owned value requires a copy out of linear memory.</p>
<h4>Benefit</h4>
<p>Passing in a borrowed value will reduce the number of copies required to output lists. The implementation of a synchronous <code>fd_write</code> would benefit from this optimization. <br>
</p>
</blockquote>



<a name="303702875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303702875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303702875">(Oct 12 2022 at 19:00)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Host component import function parameters should take borrowed values.</p>
<p>Presently, the arguments to a host component import function (as provided to <code>wasmtime::component::LinkerInstance::func_wrap</code>) have to implement <code>IntoComponentFunc</code>, whose argument list is required to impl <code>Lift</code>. <code>Lift</code> does not allow borrowed values. So, these import functions are passed <code>String</code> or <code>Vec&lt;u8&gt;</code> when it would be better for them to accept <code>&amp;str</code> or <code>&amp;[u8]</code>.</p>
<h4>Benefit</h4>
<p>Passing in a borrowed value will reduce the number of copies required to output lists.  A borrowed value would be able to point to memory in a guest linear memory, whereas an owned value requires a copy out of linear memory.</p>
<p>The implementation of a synchronous <code>fd_write</code> would benefit from this optimization. <br>
</p>
</blockquote>



<a name="303927222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303927222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303927222">(Oct 13 2022 at 21:30)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/5050#issuecomment-1278199700">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<p>I got this wrong. Borrowed values are available in parameters to import funcs via <code>WasmStr</code> and <code>WasmList</code>. Wasmtime has what we need, so I'll file an issue on wit-bindgen to use them.</p>
</blockquote>



<a name="303927224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235050%20Host%20component%20import%20function%20par.../near/303927224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235050.20Host.20component.20import.20function.20par.2E.2E.2E.html#303927224">(Oct 13 2022 at 21:30)</a>:</h4>
<p>pchickey closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5050">issue #5050</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Host component import function parameters should take borrowed values.</p>
<p>Presently, the arguments to a host component import function (as provided to <code>wasmtime::component::LinkerInstance::func_wrap</code>) have to implement <code>IntoComponentFunc</code>, whose argument list is required to impl <code>Lift</code>. <code>Lift</code> does not allow borrowed values. So, these import functions are passed <code>String</code> or <code>Vec&lt;u8&gt;</code> when it would be better for them to accept <code>&amp;str</code> or <code>&amp;[u8]</code>.</p>
<h4>Benefit</h4>
<p>Passing in a borrowed value will reduce the number of copies required to output lists.  A borrowed value would be able to point to memory in a guest linear memory, whereas an owned value requires a copy out of linear memory.</p>
<p>The implementation of a synchronous <code>fd_write</code> would benefit from this optimization. <br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>