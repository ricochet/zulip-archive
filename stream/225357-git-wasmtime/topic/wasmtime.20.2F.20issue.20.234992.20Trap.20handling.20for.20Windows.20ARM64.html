<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4992 Trap handling for Windows ARM64 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html">wasmtime / issue #4992 Trap handling for Windows ARM64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="301824006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/301824006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#301824006">(Oct 01 2022 at 13:48)</a>:</h4>
<p>Berrysoft opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>After #4990 merged, we can build wasmtime for Windows ARM64, and it should work without trap handling.</p>
</blockquote>



<a name="301824090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/301824090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#301824090">(Oct 01 2022 at 13:49)</a>:</h4>
<p>Berrysoft edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>After #4990 merged, we can build wasmtime for Windows ARM64, and it should work without trap handling.</p>
<p>We now need to add trap handling to make it totally work.</p>
</blockquote>



<a name="301841405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/301841405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#301841405">(Oct 01 2022 at 16:21)</a>:</h4>
<p>Berrysoft <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1264412215">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/aarch64/mod.rs#L152">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/aarch64/mod.rs#L152</a></p>
</blockquote>



<a name="301841432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/301841432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#301841432">(Oct 01 2022 at 16:21)</a>:</h4>
<p>Berrysoft edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1264412215">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/3fa545bd89d6e18e6e85eab57499ee9c9f5032f2/cranelift/codegen/src/isa/aarch64/mod.rs#L152">https://github.com/bytecodealliance/wasmtime/blob/3fa545bd89d6e18e6e85eab57499ee9c9f5032f2/cranelift/codegen/src/isa/aarch64/mod.rs#L152</a></p>
</blockquote>



<a name="301841505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/301841505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#301841505">(Oct 01 2022 at 16:22)</a>:</h4>
<p>Berrysoft edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1264412215">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/3fa545bd89d6e18e6e85eab57499ee9c9f5032f2/cranelift/codegen/src/isa/aarch64/mod.rs#L151-L154">https://github.com/bytecodealliance/wasmtime/blob/3fa545bd89d6e18e6e85eab57499ee9c9f5032f2/cranelift/codegen/src/isa/aarch64/mod.rs#L151-L154</a></p>
</blockquote>



<a name="302347552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/302347552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#302347552">(Oct 04 2022 at 21:09)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>After #4990 merged, we can build wasmtime for Windows ARM64, and it should work without trap handling.</p>
<p>We now need to add trap handling to make it totally work.</p>
</blockquote>



<a name="339612246"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/339612246" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#339612246">(Mar 04 2023 at 21:04)</a>:</h4>
<p>hwoodiwiss <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1454875170">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Is this something that's being looked at actively at the moment, and would a community contributions be welcome for this?</p>
</blockquote>



<a name="339612270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/339612270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#339612270">(Mar 04 2023 at 21:04)</a>:</h4>
<p>hwoodiwiss edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1454875170">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Is this something that's being looked at actively at the moment, and would a community contribution be welcome?</p>
</blockquote>



<a name="339615027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/339615027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#339615027">(Mar 04 2023 at 21:46)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-1454897227">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>No one has indicated they're working on it, so if you or anyone who is familiar with Windows on Arm is willing to build it, we'd very much welcome it!</p>
</blockquote>



<a name="470704171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/470704171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#470704171">(Sep 16 2024 at 18:30)</a>:</h4>
<p>dpaoliello <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2353620522">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>It's hackathon week at Microsoft, so I'm going to have a go at this as my project...</p>
</blockquote>



<a name="470705540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/470705540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#470705540">(Sep 16 2024 at 18:36)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2353640902">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Oh nice, that'd be great! If you have any questions feel free to reach out here or <a href="https://bytecodealliance.zulipchat.com/">on Zulip</a></p>
</blockquote>



<a name="471032768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/471032768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#471032768">(Sep 17 2024 at 16:28)</a>:</h4>
<p>dpaoliello <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2356395481">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>I have a draft PR: #9266</p>
<p>Currently most tests are passing, but there is a crash in the JITted code. Unfortunately, there doesn't seem to be debug info (or stack is corrupted just for the JIT frames) and WinDbg is crashing when I try to capture a Time Travel Trace.</p>
</blockquote>



<a name="471035430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/471035430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#471035430">(Sep 17 2024 at 16:40)</a>:</h4>
<p>dpaoliello edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2356395481">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>I have a draft PR: #9266</p>
<p>Update: I misread the stack, looks like it's a crash due to a "malformed function table during unwind" - investigating further...</p>
</blockquote>



<a name="471319884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/471319884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#471319884">(Sep 18 2024 at 18:11)</a>:</h4>
<p>dpaoliello <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2359113276">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Update: I got everything working (required a more careful reading of the spec and how wasmtime emits instructions).<br>
PR has been published.</p>
</blockquote>



<a name="471320605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/471320605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#471320605">(Sep 18 2024 at 18:15)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2359122156">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Very exciting, thanks @dpaoliello! It looks like Alex has looked at the PR at a high level; I'll do a detailed review.</p>
</blockquote>



<a name="471527940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/471527940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#471527940">(Sep 19 2024 at 16:55)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>After #4990 merged, we can build wasmtime for Windows ARM64, and it should work without trap handling.</p>
<p>We now need to add trap handling to make it totally work.</p>
</blockquote>



<a name="473079240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234992%20Trap%20handling%20for%20Windows%20ARM64/near/473079240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234992.20Trap.20handling.20for.20Windows.20ARM64.html#473079240">(Sep 27 2024 at 11:00)</a>:</h4>
<p>kpreisser <a href="https://github.com/bytecodealliance/wasmtime/issues/4992#issuecomment-2379013428">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4992">issue #4992</a>:</p>
<blockquote>
<p>Thank you very much for implementing unwind support for Windows Arm64, and providing release artifacts!<br>
When running the unit tests of <a href="https://github.com/bytecodealliance/wasmtime-dotnet/"><code>wasmtime-dotnet</code></a> on Windows 11 Version 23H2 Arm64 (using the <code>wasmtime-dev-aarch64-windows-c-api.zip</code> artifact of the latest dev release), all tests now succeed.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>