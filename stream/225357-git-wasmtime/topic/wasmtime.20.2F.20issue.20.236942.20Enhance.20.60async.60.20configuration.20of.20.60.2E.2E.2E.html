<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6942 Enhance `async` configuration of `... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html">wasmtime / issue #6942 Enhance `async` configuration of `...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="388346578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388346578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388346578">(Aug 31 2023 at 15:12)</a>:</h4>
<p>yowl <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701235990">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>"This is done thinking that the majority of functions probably want to be async" in real life this may be true.  For tests however, if the target runtime, and I'm concerned with dotnet CoreCLR, requires WASI support then we need to run the wit-bindgen tests with async support and while I'm not sure of the extent of the async requirements yet, it may just be the <code>Instantiate</code> function.  Just a comment really, I can add all the test methods to the exclude list.</p>
</blockquote>



<a name="388347117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388347117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388347117">(Aug 31 2023 at 15:14)</a>:</h4>
<p>yowl edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701235990">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>"This is done thinking that the majority of functions probably want to be async" in real life this may be true.  For tests however, if the target runtime, and I'm concerned with dotnet CoreCLR, requires WASI support then we need to run the wit-bindgen runtime tests with async support and while I'm not sure of the extent of the async requirements yet, it may just be the <code>Instantiate</code> function.  Just a comment really, I can add all the test methods to the exclude list.</p>
</blockquote>



<a name="388348048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388348048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388348048">(Aug 31 2023 at 15:19)</a>:</h4>
<p>yowl <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701247527">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>Actually thinking about this a bit more, as the tests are "round trip" and the import list is the same as the export list, if I have to change all the tests to async (because exports are always async), then I don't think this PR really affects me: I've got to change the test implementation signatures anyway.</p>
</blockquote>



<a name="388348387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388348387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388348387">(Aug 31 2023 at 15:20)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701250340">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>Good point! I think I'll update to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="k">async</span>: <span class="nc">true</span><span class="p">,</span>
<span class="w">    </span><span class="k">async</span>: <span class="nc">false</span><span class="p">,</span>
<span class="w">    </span><span class="k">async</span>: <span class="p">{</span>
<span class="w">        </span><span class="n">except_imports</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span>
<span class="w">        </span><span class="n">only_imports</span>: <span class="p">[</span><span class="s">"..."</span><span class="p">],</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>to handle that case. That also keeps everything in the <code>async</code> key which I like better.</p>
</blockquote>



<a name="388351036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388351036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388351036">(Aug 31 2023 at 15:33)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701270726">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>Ok I've updated with a new syntax which has either "only these imports" or "except these imports" options which I think should handle your case @yowl </p>
</blockquote>



<a name="388351365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388351365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388351365">(Aug 31 2023 at 15:34)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701273586">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>Oh oops I didn't see your latest comment until just now, well in any case I think this is a better syntax regardless!</p>
</blockquote>



<a name="388365899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236942%20Enhance%20%60async%60%20configuration%20of%20%60.../near/388365899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236942.20Enhance.20.60async.60.20configuration.20of.20.60.2E.2E.2E.html#388365899">(Aug 31 2023 at 16:35)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/6942#issuecomment-1701388305">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6942">issue #6942</a>:</p>
<blockquote>
<p>Thanks! This will help in many places</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>