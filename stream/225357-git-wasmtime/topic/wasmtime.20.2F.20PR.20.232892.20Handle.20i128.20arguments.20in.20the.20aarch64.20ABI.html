<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2892 Handle i128 arguments in the aarch64 ABI · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html">wasmtime / PR #2892 Handle i128 arguments in the aarch64 ABI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="238278386"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238278386" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238278386">(May 11 2021 at 09:37)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>:</p>
<blockquote>
<p>When dealing with params that need to be split, we follow the arch64 ABI and split the value in two, and make sure that start that argument in an even numbered xN register.</p>
<p>The apple ABI does not require this, so on those platforms, we start params anywhere.</p>
<hr>
<p>This is a draft because I'm not really sure how to implement tests for this.</p>
<p>It would be really nice if we could implement tests like the <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/filetests/filetests/isa/riscv/abi.clif">riscv backend </a> does, but the aarch64 doesn't seem to produce that output in legaliztion?</p>
<p>I've had a look at the riscv ABI implementation and it looks like they use <code>TargetIsa</code>. Only the riscv and the x86 backend use that. So I'm not sure if that is part of the old backends.</p>
<p>Otherwise I think the best way to test this might be to just do tests and call <code>compute_arg_locs</code> directly.<br>
I can also go a bit further and implement the lowering for multiple registers and then do the tests in clif files if you would prefer that.</p>
</blockquote>



<a name="238460753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238460753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238460753">(May 12 2021 at 11:52)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="238461027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238461027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238461027">(May 12 2021 at 11:54)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="238462881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238462881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238462881">(May 12 2021 at 12:10)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="238463555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238463555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238463555">(May 12 2021 at 12:16)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="238616589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238616589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238616589">(May 13 2021 at 12:51)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="238622443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/238622443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#238622443">(May 13 2021 at 13:41)</a>:</h4>
<p><strong>afonso360</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> as ready for review.</p>



<a name="239346686"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346686" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346686">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-662663771">PR review</a>.</p>



<a name="239346687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346687">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-662663771">PR review</a>.</p>



<a name="239346688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346688">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r634821245">PR review comment</a>:</p>
<blockquote>
<p>This document is already outdated - it doesn't cover SVE, for example. Instead, point to <a href="https://github.com/ARM-software/abi-aa/releases">the authoritative source</a> - you can find links both to a HTML and a PDF version for a particular release; alternatively, use the HTML version from the <code>main</code> branch.</p>
<p>The same link is also used on line 190 - you should change it too.</p>
</blockquote>



<a name="239346689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346689">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r634823909">PR review comment</a>:</p>
<blockquote>
<p>I suppose that you changed the code structure from a series of <code>if</code>s and <code>else</code>s to usage of <code>continue</code> to make it easier to read (personally, I'd have kept the difference smaller), but IMHO checking the same condition twice looks weird, in spite of the negation the second time, and this block is short enough to just use an <code>else</code> block.</p>
</blockquote>



<a name="239346690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346690">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r634825027">PR review comment</a>:</p>
<blockquote>
<p>Couldn't we just calculate this on line 415?</p>
</blockquote>



<a name="239346691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346691">(May 19 2021 at 00:31)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r634826844">PR review comment</a>:</p>
<blockquote>
<p>This should be <code>The Apple AArch64 ABI</code>.</p>
</blockquote>



<a name="239346943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239346943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239346943">(May 19 2021 at 00:34)</a>:</h4>
<p>akirilov-arm edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r634821245">PR review comment</a>.</p>



<a name="239396829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239396829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239396829">(May 19 2021 at 10:04)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="239553386"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239553386" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239553386">(May 20 2021 at 08:29)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/akirilov-arm">akirilov-arm</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a>.</p>



<a name="239648795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648795">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636410379">PR review comment</a>:</p>
<blockquote>
<p>This function should be called <code>extend_reg()</code>.</p>
</blockquote>



<a name="239648796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648796">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636372796">PR review comment</a>:</p>
<blockquote>
<p>On second thought, this should really be a link to a specific release, the latest one being 2021Q1. The section number is no longer correct - it is 6.4 now. <a href="https://github.com/ARM-software/abi-aa/blob/2bcab1e3b22d55170c563c3c7940134089176746/aapcs64/aapcs64.rst#64parameter-passing">Here</a>'s a direct link to the specific section in the HTML version.</p>
</blockquote>



<a name="239648797"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648797" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648797">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636374623">PR review comment</a>:</p>
<blockquote>
<p>Ditto; <a href="https://github.com/ARM-software/abi-aa/blob/2bcab1e3b22d55170c563c3c7940134089176746/aapcs64/aapcs64.rst#642parameter-passing-rules">here</a>'s another direct link.</p>
</blockquote>



<a name="239648798"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648798" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648798">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636416915">PR review comment</a>:</p>
<blockquote>
<p>Future-proof this by making the type of <code>c</code> to be <code>u128</code>. Some of the operations in the body of the function will need adjustments too; same for the comment before the function.</p>
</blockquote>



<a name="239648799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648799">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636406948">PR review comment</a>:</p>
<blockquote>
<p>How about returning <code>(in_regs, ty, is_const)</code> and then removing lines 269 and 274?</p>
</blockquote>



<a name="239648800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648800">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636418054">PR review comment</a>:</p>
<blockquote>
<p>Use the plural:</p>
<blockquote>
<p>... value into newly-allocated temporary registers, returning these registers.</p>
</blockquote>
</blockquote>



<a name="239648801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648801">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-664765266">PR review</a>.</p>



<a name="239648802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648802">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r636404232">PR review comment</a>:</p>
<blockquote>
<p>This should say <code>put_input_in_regs</code>.</p>
</blockquote>



<a name="239648803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239648803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239648803">(May 20 2021 at 19:47)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-664765266">PR review</a>.</p>



<a name="239732704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239732704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239732704">(May 21 2021 at 11:09)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="239739672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239739672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239739672">(May 21 2021 at 12:11)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/akirilov-arm">akirilov-arm</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a>.</p>



<a name="239772270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239772270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239772270">(May 21 2021 at 15:50)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-665594595">PR review</a>.</p>



<a name="239772271"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239772271" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239772271">(May 21 2021 at 15:50)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r637012819">PR review comment</a>:</p>
<blockquote>
<p>Ditto.</p>
</blockquote>



<a name="239772272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239772272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239772272">(May 21 2021 at 15:50)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-665594595">PR review</a>.</p>



<a name="239772273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239772273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239772273">(May 21 2021 at 15:50)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r637023252">PR review comment</a>:</p>
<blockquote>
<p>Sorry, I forgot that this function has other callers than just <code>put_input_in_reg()</code> and the new signature is more inconvenient for them - this should just return <code>ValueRegs&lt;Reg&gt;</code>, so that line 1575 in <code>cranelift/codegen/src/isa/aarch64/lower_inst.rs</code>, for example, doesn't ignore anything, and then the function body should be moved to another internal, non-public function, which is also going to be called by <code>put_input_in_reg()</code> directly.</p>
</blockquote>



<a name="239772274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239772274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239772274">(May 21 2021 at 15:50)</a>:</h4>
<p>akirilov-arm created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r637012595">PR review comment</a>:</p>
<blockquote>
<p>My bad - this should use the tag, <code>2021Q1</code>, not the commit ID, i.e. it should look like <a href="https://github.com/ARM-software/abi-aa/blob/2021Q1/aapcs64/aapcs64.rst#64parameter-passing">this</a>.</p>
</blockquote>



<a name="239774707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239774707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239774707">(May 21 2021 at 16:06)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a> from <code>aarch64-multireg-args</code> to <code>main</code>.</p>



<a name="239774818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239774818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239774818">(May 21 2021 at 16:06)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-665631666">PR review</a>.</p>



<a name="239774820"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239774820" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239774820">(May 21 2021 at 16:06)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#discussion_r637039610">PR review comment</a>:</p>
<blockquote>
<p>This feels a lot less awkward than what we had before</p>
</blockquote>



<a name="239775124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239775124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239775124">(May 21 2021 at 16:07)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/akirilov-arm">akirilov-arm</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a>.</p>



<a name="239777131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239777131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239777131">(May 21 2021 at 16:22)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-665644583">PR review</a>.</p>



<a name="239777193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239777193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239777193">(May 21 2021 at 16:22)</a>:</h4>
<p>akirilov-arm submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2892#pullrequestreview-665644583">PR review</a>.</p>



<a name="239827463"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232892%20Handle%20i128%20arguments%20in%20the%20aarch64%20ABI/near/239827463" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232892.20Handle.20i128.20arguments.20in.20the.20aarch64.20ABI.html#239827463">(May 21 2021 at 23:57)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2892">PR #2892</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>