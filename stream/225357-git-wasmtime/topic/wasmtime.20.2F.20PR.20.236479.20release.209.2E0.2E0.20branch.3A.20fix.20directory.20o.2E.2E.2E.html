<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6479 release 9.0.0 branch: fix directory o... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236479.20release.209.2E0.2E0.20branch.3A.20fix.20directory.20o.2E.2E.2E.html">wasmtime / PR #6479 release 9.0.0 branch: fix directory o...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="362314009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236479%20release%209.0.0%20branch%3A%20fix%20directory%20o.../near/362314009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236479.20release.209.2E0.2E0.20branch.3A.20fix.20directory.20o.2E.2E.2E.html#362314009">(May 30 2023 at 22:52)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6479">PR #6479</a>:</p>
<blockquote>
<p>Backport of fixes added to #6463.</p>
<p>Fix to the fixes that became 9.0.2 release: #6462 and #6471. We intend to merge this PR and ship it as patch release 9.0.3.</p>
<p>In order to work with wasi-testsuite, it needs to be possible to<br>
path_open(dirfd, ".", ...) with the same rights reported in the<br>
fdstat of that dirfd. When we report the Rights::all() set, both<br>
FD_READ and FD_WRITE are set in the base rights, which results in<br>
unix rejecting an openat2(dirfd, ".", O_RDWR) with EISDIR.</p>
<p>By not having the FD_READ and FD_WRITE rights present in the base<br>
rights, the open syscall defaults to O_RDONLY, which is the only<br>
access mode allowed for opening directories.</p>
<p>Note: wasi-testsuite is used to test our wasi-common implementation upstream, but not in this release branch, which is why this problem did not get caught before releasing 9.0.2.</p>
</blockquote>



<a name="362321891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236479%20release%209.0.0%20branch%3A%20fix%20directory%20o.../near/362321891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236479.20release.209.2E0.2E0.20branch.3A.20fix.20directory.20o.2E.2E.2E.html#362321891">(May 31 2023 at 00:19)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6479">PR #6479</a>.</p>



<a name="362507177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236479%20release%209.0.0%20branch%3A%20fix%20directory%20o.../near/362507177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236479.20release.209.2E0.2E0.20branch.3A.20fix.20directory.20o.2E.2E.2E.html#362507177">(May 31 2023 at 16:19)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6479#pullrequestreview-1453659001">PR review</a>.</p>



<a name="362514950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236479%20release%209.0.0%20branch%3A%20fix%20directory%20o.../near/362514950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236479.20release.209.2E0.2E0.20branch.3A.20fix.20directory.20o.2E.2E.2E.html#362514950">(May 31 2023 at 16:50)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6479">PR #6479</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>