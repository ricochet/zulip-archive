<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5331 Flush icache on Android aarch64 too · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235331.20Flush.20icache.20on.20Android.20aarch64.20too.html">wasmtime / PR #5331 Flush icache on Android aarch64 too</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="312681477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235331%20Flush%20icache%20on%20Android%20aarch64%20too/near/312681477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235331.20Flush.20icache.20on.20Android.20aarch64.20too.html#312681477">(Nov 28 2022 at 17:34)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5331">PR #5331</a> from <code>flush-icache-on-android-aarch64</code> to <code>main</code>:</p>
<blockquote>
<p>This updates the icache flushing code so it does the flushing on Android as well. From fuzzy memories working on this in the past and <a href="https://searchfox.org/mozilla-central/source/js/src/jit/FlushICache.cpp#112">quick inspection of what Firefox does these days</a>, this is required for both Android and linux, and Android is guaranteed to have access to the <code>membarrier</code> function.</p>
<p>I've also slightly refactored the code to use an internal module named <code>details</code>, I find it slightly cleaner as it avoids all the dead code in other combinations of targets/archs, but it's mostly esthetic, so I could revert that part.</p>
<p>In addition to correctness, this also fixes the build of wasmtime 3.0.0 on the android architecture, which we rely on. If that fix is deemed acceptable, it would be extra nice to get a dot release of wasmtime with that build fix too!</p>
<p>cc @afonso360 @akirilov-arm @alexcrichton @cfallin </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>