<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2309 Add Trap::trap_code · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html">wasmtime / PR #2309 Add Trap::trap_code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="214206689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214206689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214206689">(Oct 22 2020 at 15:49)</a>:</h4>
<p>leoyvens opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a> from <code>trap-is-user</code> to <code>main</code>:</p>
<blockquote>
<p>The public <code>Trap</code> in wasmtime is right now very opaque compared to the internal information which is available about the trap reason. This exposes the trap code of a wasm trap, which is useful to for example differentiate traps from host functions to traps coming from wasm itself.</p>
</blockquote>



<a name="214367925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214367925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214367925">(Oct 23 2020 at 21:24)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a> from <code>trap-is-user</code> to <code>main</code>:</p>
<blockquote>
<p>The public <code>Trap</code> in wasmtime is right now very opaque compared to the internal information which is available about the trap reason. This exposes the trap code of a wasm trap, which is useful to for example differentiate traps from host functions to traps coming from wasm itself.</p>
</blockquote>



<a name="214367950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214367950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214367950">(Oct 23 2020 at 21:25)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a> from <code>trap-is-user</code> to <code>main</code>:</p>
<blockquote>
<p>The public <code>Trap</code> in wasmtime is right now very opaque compared to the internal information which is available about the trap reason. This exposes the trap code of a wasm trap, which is useful to for example differentiate traps from host functions to traps coming from wasm itself.</p>
</blockquote>



<a name="214658163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658163">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-517321952">PR Review</a>.</p>



<a name="214658164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658164">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-517321952">PR Review</a>.</p>



<a name="214658165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658165">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512394596">PR Review Comment</a>:</p>
<blockquote>
<p>I think this documentation may need an update since I think it's cranelift-specific. Also can you add a test that traps are reported as <code>HeapOutOfBounds</code>? The extra clause here is a little worrisome...</p>
</blockquote>



<a name="214658166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658166">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512394264">PR Review Comment</a>:</p>
<blockquote>
<p>This I presume is copy-pasted, but mind dropping this clause? I believe this is no longer the case.</p>
</blockquote>



<a name="214658168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658168">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512395125">PR Review Comment</a>:</p>
<blockquote>
<p>I'm not sure if this can actually arise from wasm code? We may not need to include this?</p>
</blockquote>



<a name="214658169"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658169" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658169">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512394758">PR Review Comment</a>:</p>
<blockquote>
<p>I think the <code>table_addr</code> bit here needs to be tweaked in the documentation since that's cranelift-internal.</p>
</blockquote>



<a name="214658170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658170">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512395449">PR Review Comment</a>:</p>
<blockquote>
<p>The "resumable" part here can be dropped since that's not true of wasmtime right now.</p>
</blockquote>



<a name="214658171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214658171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214658171">(Oct 27 2020 at 03:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512395627">PR Review Comment</a>:</p>
<blockquote>
<p>Could this be expanded a bit to explain when it's <code>None</code> and when it's <code>Some</code>?</p>
</blockquote>



<a name="214730462"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730462" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730462">(Oct 27 2020 at 17:00)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a> from <code>trap-is-user</code> to <code>main</code>:</p>
<blockquote>
<p>The public <code>Trap</code> in wasmtime is right now very opaque compared to the internal information which is available about the trap reason. This exposes the trap code of a wasm trap, which is useful to for example differentiate traps from host functions to traps coming from wasm itself.</p>
</blockquote>



<a name="214730508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730508">(Oct 27 2020 at 17:01)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-517936591">PR Review</a>.</p>



<a name="214730509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730509">(Oct 27 2020 at 17:01)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512867178">PR Review Comment</a>:</p>
<blockquote>
<p>This does happen for non-saturating truncation and this specific case of division <a href="https://github.com/WebAssembly/spec/blob/55a5e2c88890ccbe2b992f571b95704234977dac/interpreter/exec/int.ml#L131">https://github.com/WebAssembly/spec/blob/55a5e2c88890ccbe2b992f571b95704234977dac/interpreter/exec/int.ml#L131</a>. Maybe there is a better name for this variant.</p>
</blockquote>



<a name="214730514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730514">(Oct 27 2020 at 17:01)</a>:</h4>
<p>leoyvens edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512867178">PR Review Comment</a>.</p>



<a name="214730614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730614">(Oct 27 2020 at 17:02)</a>:</h4>
<p>leoyvens submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-517937385">PR Review</a>.</p>



<a name="214730616"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214730616" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214730616">(Oct 27 2020 at 17:02)</a>:</h4>
<p>leoyvens created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512867775">PR Review Comment</a>:</p>
<blockquote>
<p>Added tests, whatever that clause means I couldn't find any consequences of it in testing so I removed it here.</p>
</blockquote>



<a name="214754073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754073">(Oct 27 2020 at 19:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-518085827">PR Review</a>.</p>



<a name="214754074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754074">(Oct 27 2020 at 19:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512984268">PR Review Comment</a>:</p>
<blockquote>
<p>Ah yes, indeed!</p>
</blockquote>



<a name="214754149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754149">(Oct 27 2020 at 19:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-518086250">PR Review</a>.</p>



<a name="214754151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754151">(Oct 27 2020 at 19:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512984858">PR Review Comment</a>:</p>
<blockquote>
<p>Could this get moved to <code>tests/all/*.rs</code>? That's were we store most other tests.</p>
</blockquote>



<a name="214754305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754305">(Oct 27 2020 at 19:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-518087028">PR Review</a>.</p>



<a name="214754306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754306">(Oct 27 2020 at 19:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#pullrequestreview-518087028">PR Review</a>.</p>



<a name="214754310"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214754310" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214754310">(Oct 27 2020 at 19:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2309#discussion_r512985953">PR Review Comment</a>:</p>
<blockquote>
<p>Also, while you're at it, mind simplifying this a bit with a helper function?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">assert_trap_code</span><span class="p">(</span><span class="n">wat</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">,</span><span class="w"> </span><span class="n">code</span>: <span class="nc">ir</span>::<span class="n">TrapCode</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>or something like that?</p>
</blockquote>



<a name="214761660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214761660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214761660">(Oct 27 2020 at 20:44)</a>:</h4>
<p>leoyvens updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a> from <code>trap-is-user</code> to <code>main</code>:</p>
<blockquote>
<p>The public <code>Trap</code> in wasmtime is right now very opaque compared to the internal information which is available about the trap reason. This exposes the trap code of a wasm trap, which is useful to for example differentiate traps from host functions to traps coming from wasm itself.</p>
</blockquote>



<a name="214766804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232309%20Add%20Trap%3A%3Atrap_code/near/214766804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232309.20Add.20Trap.3A.3Atrap_code.html#214766804">(Oct 27 2020 at 21:30)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2309">PR #2309</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>