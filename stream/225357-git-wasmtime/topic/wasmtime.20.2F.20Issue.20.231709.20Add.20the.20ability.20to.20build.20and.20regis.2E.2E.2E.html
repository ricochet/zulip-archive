<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1709 Add the ability to build and regis... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html">wasmtime / Issue #1709 Add the ability to build and regis...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="197595030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/197595030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#197595030">(May 14 2020 at 18:07)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>E.g. it may make sense for the <code>cg_clif</code> (the cranelift-based backend for rustc) to have its own peephole optimizations pass that contains optimizations specific to code generated by <code>cg_clif</code>.</p>
</blockquote>



<a name="197595031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/197595031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#197595031">(May 14 2020 at 18:07)</a>:</h4>
<p>fitzgen labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>E.g. it may make sense for the <code>cg_clif</code> (the cranelift-based backend for rustc) to have its own peephole optimizations pass that contains optimizations specific to code generated by <code>cg_clif</code>.</p>
</blockquote>



<a name="197595033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/197595033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#197595033">(May 14 2020 at 18:07)</a>:</h4>
<p>fitzgen labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>E.g. it may make sense for the <code>cg_clif</code> (the cranelift-based backend for rustc) to have its own peephole optimizations pass that contains optimizations specific to code generated by <code>cg_clif</code>.</p>
</blockquote>



<a name="197595053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/197595053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#197595053">(May 14 2020 at 18:07)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-628800398">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift:area:peepmatic"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: cranelift:area:peepmatic</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="197595054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/197595054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#197595054">(May 14 2020 at 18:07)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-628800401">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="204024584"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204024584" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204024584">(Jul 15 2020 at 23:12)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659061599">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>Regarding other peepmatic transform rules I'm wondering is it possible implement such simplification for integers which actually behave as boolean? Something like:</p>
<div class="codehilite"><pre><span></span><code><span class="p">(</span><span class="k">=&gt;</span> <span class="p">(</span><span class="k">when</span> <span class="p">(</span><span class="n">icmp_imm</span> <span class="n">eq</span> <span class="mi">0</span> <span class="n">$x</span><span class="p">)</span>
      <span class="p">(</span><span class="n">bit-width</span> <span class="n">$x</span> <span class="mi">1</span><span class="p">))</span>
    <span class="p">(</span><span class="n">bxor_imm</span> <span class="mi">1</span> <span class="n">$x</span><span class="p">))</span>
</code></pre></div>


<p>and other thansforms which have <code>i1</code> (boolean) type. Or it doesn't make sense for peepmatic?</p>
</blockquote>



<a name="204032830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204032830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204032830">(Jul 16 2020 at 00:59)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659092495">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>Although there is a <code>b1</code> type for 1-bit booleans, there isn't really an <code>i1</code> type for 1-bit integers.</p>
<p>As for specifically replacing an <code>icmp_imm</code> with an <code>bxor_imm</code>, I'm not convinced it would improve codegen since both instructions have a single uop and latency of 1 cycle on x86_64 (I don't know about aarch64).</p>
<p>On the more general topic of "what kind of optimizations make sense for peepmatic?": I don't think it makes sense to focus on adding one-off peepmatic optimizations to Cranelift at this time. Instead, I am planning on writing</p>
<ul>
<li>a left-hand side extractor, that extracts candidate LHSes from clif IR into <a href="https://github.com/google/souper/">Souper</a> IR, and</li>
<li>a Souper optimization to peepmatic DSL translator.</li>
</ul>
<p>With these two bits in hand, we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes. This should be much more fruitful (and less buggy!) than writing optimizations by hand.</p>
<p>But of course by the time we have these synthesized optimizations from Souper, we need a way to hook them into Cranelift, which is what resolving this issue should provide :)</p>
<p>If you're interested in helping out with this stuff, let me know and I can try and divide up these tasks into smaller bits! Also, I probably didn't explain everything super well, so if you have questions about what I am talking about, don't hesitate to ask questions.</p>
</blockquote>



<a name="204054375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204054375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204054375">(Jul 16 2020 at 07:44)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659223055">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>a left-hand side extractor, that extracts candidate LHSes from clif IR into Souper IR<br>
we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes</p>
</blockquote>
<p>That's sound very cool! As I understand it's working in this <a href="https://github.com/jubitaneja/cranelift-peepholes">repo</a> currently?</p>
</blockquote>



<a name="204054744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204054744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204054744">(Jul 16 2020 at 07:50)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659223055">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>a left-hand side extractor, that extracts candidate LHSes from clif IR into Souper IR<br>
we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes</p>
</blockquote>
<p>That's sound very cool! As I understand progress going <a href="https://github.com/jubitaneja/cranelift-peepholes">here</a>?</p>
</blockquote>



<a name="204054921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204054921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204054921">(Jul 16 2020 at 07:52)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659223055">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>a left-hand side extractor, that extracts candidate LHSes from clif IR into Souper IR<br>
we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes</p>
</blockquote>
<p>That's sound very cool! As I understand progress going <a href="https://github.com/jubitaneja/cranelift-peepholes">here</a>?</p>
<blockquote>
<p>As for specifically replacing an icmp_imm with an bxor_imm, I'm not convinced it would improve codegen since both instructions have a single uop and latency of 1 cycle on x86_64 (I don't know about aarch64).</p>
</blockquote>
<p>Thanks for explanation. I just ask about this due to LLVM's cost model it seems always prefer bit-wise <code>xor</code> for <code>i1</code> types</p>
</blockquote>



<a name="204054940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204054940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204054940">(Jul 16 2020 at 07:52)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659223055">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>a left-hand side extractor, that extracts candidate LHSes from clif IR into Souper IR<br>
we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes</p>
</blockquote>
<p>That's sound very cool! As I understand progress going <a href="https://github.com/jubitaneja/cranelift-peepholes">here</a>?</p>
<blockquote>
<p>As for specifically replacing an icmp_imm with an bxor_imm, I'm not convinced it would improve codegen since both instructions have a single uop and latency of 1 cycle on x86_64 (I don't know about aarch64).</p>
</blockquote>
<p>Thanks for explanation. I just ask about this due to LLVM's cost model it seems always prefer bit-wise <code>xor</code> for <code>i1</code>/<code>b1</code> types</p>
</blockquote>



<a name="204054962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204054962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204054962">(Jul 16 2020 at 07:53)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-659223055">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>a left-hand side extractor, that extracts candidate LHSes from clif IR into Souper IR<br>
we will be able to automatically find missing optimizations, and generate the optimal RHS for each of our given LHSes</p>
</blockquote>
<p>That's sound very cool! As I understand progress going <a href="https://github.com/jubitaneja/cranelift-peepholes">here</a>?</p>
<blockquote>
<p>As for specifically replacing an icmp_imm with an bxor_imm, I'm not convinced it would improve codegen since both instructions have a single uop and latency of 1 cycle on x86_64 (I don't know about aarch64).</p>
</blockquote>
<p>Thanks for explanation. I just ask about this due to LLVM's cost model it seems always prefer bit-wise <code>xor</code> for <code>i1</code>/<code>b1</code> types in this case</p>
</blockquote>



<a name="204229882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204229882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204229882">(Jul 17 2020 at 16:45)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-660216202">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>That's sound very cool! As I understand progress going <a href="https://github.com/jubitaneja/cranelift-peepholes">here</a>?</p>
</blockquote>
<p>Sort of. Jubi and I are working closely together, but her project is taking a slightly different path (translating Souper optimizations into Rust source code that implements a peephole pass directly, rather than using peepmatic, which didn't exist when she started). That said, we are sharing notes and brainstorming together.</p>
<p>I haven't started working on the extractor or the Souper-to-peepmatic stuff yet, because I've been busy with reference types.</p>
<blockquote>
<p>I just ask about this due to LLVM's cost model it seems always prefer bit-wise <code>xor</code> for <code>i1</code>/<code>b1</code> types in this case</p>
</blockquote>
<p>It could be canonicalization, like you mentioned in the other thread. Or perhaps on some microarchs it makes a difference.</p>
</blockquote>



<a name="204249719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204249719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204249719">(Jul 17 2020 at 19:41)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-660303644">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>I haven't started working on the extractor or the Souper-to-peepmatic stuff yet, because I've been busy with reference types</p>
</blockquote>
<p>Ah, got it. Yeah, implementing reference types is really puzzled for vm and compilers. I heard llvm / lld has some difficulties with that.</p>
</blockquote>



<a name="204249735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204249735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204249735">(Jul 17 2020 at 19:41)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-660303644">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<blockquote>
<p>I haven't started working on the extractor or the Souper-to-peepmatic stuff yet, because I've been busy with reference types</p>
</blockquote>
<p>Ah, got it. Yeah, implementing reference types is really puzzled for vm and compilers. I heard llvm / lld has some difficulties with that as well</p>
</blockquote>



<a name="204292318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231709%20Add%20the%20ability%20to%20build%20and%20regis.../near/204292318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231709.20Add.20the.20ability.20to.20build.20and.20regis.2E.2E.2E.html#204292318">(Jul 18 2020 at 09:01)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/issues/1709#issuecomment-660452896">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1709">Issue #1709</a>:</p>
<blockquote>
<p>I'm wondering is it make sense add optimization for double equal to zero? For example binaryen (wasm target) when optimize for size usually prefer <code>(i32.eqz (i32.eqz (local.get $x)))</code> instead <code>(i32.ne (local.get $x) (i32.const 0)))</code> due to first version one byte smaller</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>