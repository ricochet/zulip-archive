<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6674 Can not compile `wasmtime-wasi 10.... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html">wasmtime / issue #6674 Can not compile `wasmtime-wasi 10....</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="371077592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371077592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371077592">(Jun 30 2023 at 09:56)</a>:</h4>
<p>alisomay opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo init temp_project --bin</code></li>
<li>Add <code>wasmtime-wasi = "=10.0.1"</code> as a dependency </li>
<li>Run <code>cargo build</code></li>
</ul>
<h3>Expected Results</h3>
<p>Successful build.</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">    </span>Blocking<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span>lock<span class="w"> </span>on<span class="w"> </span>build<span class="w"> </span>directory
<span class="w">   </span>Compiling<span class="w"> </span>log<span class="w"> </span>v0.4.19
<span class="w">   </span>Compiling<span class="w"> </span>indexmap<span class="w"> </span>v1.9.3
<span class="w">   </span>Compiling<span class="w"> </span>rustix<span class="w"> </span>v0.37.21
<span class="w">   </span>Compiling<span class="w"> </span>crc32fast<span class="w"> </span>v1.3.2
<span class="w">   </span>Compiling<span class="w"> </span>memchr<span class="w"> </span>v2.5.0
<span class="w">   </span>Compiling<span class="w"> </span>hashbrown<span class="w"> </span>v0.13.2
<span class="w">   </span>Compiling<span class="w"> </span>pulldown-cmark<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit-debug<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>psm<span class="w"> </span>v0.1.21
<span class="w">   </span>Compiling<span class="w"> </span>witx<span class="w"> </span>v0.9.1
<span class="w">   </span>Compiling<span class="w"> </span>tracing<span class="w"> </span>v0.1.37
<span class="w">   </span>Compiling<span class="w"> </span>wasmparser<span class="w"> </span>v0.107.0
<span class="w">   </span>Compiling<span class="w"> </span>gimli<span class="w"> </span>v0.27.3
<span class="w">   </span>Compiling<span class="w"> </span>object<span class="w"> </span>v0.30.4
<span class="w">   </span>Compiling<span class="w"> </span>wit-parser<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-generate<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-fiber<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>memfd<span class="w"> </span>v0.6.3
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wit-bindgen<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-component-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>addr2line<span class="w"> </span>v0.19.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-types<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmprinter<span class="w"> </span>v0.2.59
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-environ<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-runtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-common<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-cap-std-sync<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wasi<span class="w"> </span>v10.0.1
error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:408:26
<span class="w">     </span><span class="p">|</span>
<span class="m">408</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:409:26
<span class="w">     </span><span class="p">|</span>
<span class="m">409</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:414:26
<span class="w">     </span><span class="p">|</span>
<span class="m">414</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:415:26
<span class="w">     </span><span class="p">|</span>
<span class="m">415</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>this<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0631<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>wasmtime-wasi<span class="sb">`</span><span class="w"> </span><span class="o">(</span>lib<span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">4</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Rust <code>1.70</code></li>
<li><code>stable-aarch64-apple-darwin</code></li>
</ul>
<p>Wasmtime version or commit: <code>10.0.1</code></p>
<p>Operating system: MacOS Ventura 13.0.1 (M1 Max)</p>
<p>Architecture: <code>stable-aarch64-apple-darwin</code></p>
<h3>Extra Info</h3>
<p>This started to happen after a <code>cargo clean</code>.<br>
Then I've made a brand new project to test if it is because of my environment and the results were the same.<br>
</p>
</blockquote>



<a name="371079606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371079606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371079606">(Jun 30 2023 at 10:02)</a>:</h4>
<p>alisomay edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo init temp_project --bin</code></li>
<li>Add <code>wasmtime-wasi = "=10.0.1"</code> as a dependency </li>
<li>Run <code>cargo build</code></li>
</ul>
<h3>Expected Results</h3>
<p>Successful build.</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">    </span>Blocking<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span>lock<span class="w"> </span>on<span class="w"> </span>build<span class="w"> </span>directory
<span class="w">   </span>Compiling<span class="w"> </span>log<span class="w"> </span>v0.4.19
<span class="w">   </span>Compiling<span class="w"> </span>indexmap<span class="w"> </span>v1.9.3
<span class="w">   </span>Compiling<span class="w"> </span>rustix<span class="w"> </span>v0.37.21
<span class="w">   </span>Compiling<span class="w"> </span>crc32fast<span class="w"> </span>v1.3.2
<span class="w">   </span>Compiling<span class="w"> </span>memchr<span class="w"> </span>v2.5.0
<span class="w">   </span>Compiling<span class="w"> </span>hashbrown<span class="w"> </span>v0.13.2
<span class="w">   </span>Compiling<span class="w"> </span>pulldown-cmark<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit-debug<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>psm<span class="w"> </span>v0.1.21
<span class="w">   </span>Compiling<span class="w"> </span>witx<span class="w"> </span>v0.9.1
<span class="w">   </span>Compiling<span class="w"> </span>tracing<span class="w"> </span>v0.1.37
<span class="w">   </span>Compiling<span class="w"> </span>wasmparser<span class="w"> </span>v0.107.0
<span class="w">   </span>Compiling<span class="w"> </span>gimli<span class="w"> </span>v0.27.3
<span class="w">   </span>Compiling<span class="w"> </span>object<span class="w"> </span>v0.30.4
<span class="w">   </span>Compiling<span class="w"> </span>wit-parser<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-generate<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-fiber<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>memfd<span class="w"> </span>v0.6.3
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wit-bindgen<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-component-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>addr2line<span class="w"> </span>v0.19.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-types<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmprinter<span class="w"> </span>v0.2.59
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-environ<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-runtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-common<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-cap-std-sync<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wasi<span class="w"> </span>v10.0.1
error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:408:26
<span class="w">     </span><span class="p">|</span>
<span class="m">408</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:409:26
<span class="w">     </span><span class="p">|</span>
<span class="m">409</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:414:26
<span class="w">     </span><span class="p">|</span>
<span class="m">414</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:415:26
<span class="w">     </span><span class="p">|</span>
<span class="m">415</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>this<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0631<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>wasmtime-wasi<span class="sb">`</span><span class="w"> </span><span class="o">(</span>lib<span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">4</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Rust <code>1.70</code></li>
<li><code>stable-aarch64-apple-darwin</code></li>
</ul>
<p>Wasmtime version or commit: <code>10.0.1</code></p>
<p>Operating system: MacOS Ventura 13.0.1 (M1 Max)</p>
<p>Architecture: <code>stable-aarch64-apple-darwin</code></p>
<h3>Extra Info</h3>
<p>This started to happen after a <code>cargo clean</code>.<br>
Then I've made a brand new project to test if it is because of my environment and the results were the same.<br>
The errors do not resolve when it is added as a git dependency either.<br>
<code>wasmtime-wasi = { git = "https://github.com/bytecodealliance/wasmtime.git" }</code></p>
</blockquote>



<a name="371079876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371079876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371079876">(Jun 30 2023 at 10:03)</a>:</h4>
<p>alisomay edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo init temp_project --bin</code></li>
<li>Add <code>wasmtime-wasi = "=10.0.1"</code> as a dependency </li>
<li>Run <code>cargo build</code></li>
</ul>
<h3>Expected Results</h3>
<p>Successful build.</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">    </span>Blocking<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span>lock<span class="w"> </span>on<span class="w"> </span>build<span class="w"> </span>directory
<span class="w">   </span>Compiling<span class="w"> </span>log<span class="w"> </span>v0.4.19
<span class="w">   </span>Compiling<span class="w"> </span>indexmap<span class="w"> </span>v1.9.3
<span class="w">   </span>Compiling<span class="w"> </span>rustix<span class="w"> </span>v0.37.21
<span class="w">   </span>Compiling<span class="w"> </span>crc32fast<span class="w"> </span>v1.3.2
<span class="w">   </span>Compiling<span class="w"> </span>memchr<span class="w"> </span>v2.5.0
<span class="w">   </span>Compiling<span class="w"> </span>hashbrown<span class="w"> </span>v0.13.2
<span class="w">   </span>Compiling<span class="w"> </span>pulldown-cmark<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit-debug<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>psm<span class="w"> </span>v0.1.21
<span class="w">   </span>Compiling<span class="w"> </span>witx<span class="w"> </span>v0.9.1
<span class="w">   </span>Compiling<span class="w"> </span>tracing<span class="w"> </span>v0.1.37
<span class="w">   </span>Compiling<span class="w"> </span>wasmparser<span class="w"> </span>v0.107.0
<span class="w">   </span>Compiling<span class="w"> </span>gimli<span class="w"> </span>v0.27.3
<span class="w">   </span>Compiling<span class="w"> </span>object<span class="w"> </span>v0.30.4
<span class="w">   </span>Compiling<span class="w"> </span>wit-parser<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-generate<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-fiber<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>memfd<span class="w"> </span>v0.6.3
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wit-bindgen<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-component-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>addr2line<span class="w"> </span>v0.19.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-types<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmprinter<span class="w"> </span>v0.2.59
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-environ<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-runtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-common<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-cap-std-sync<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wasi<span class="w"> </span>v10.0.1
error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:408:26
<span class="w">     </span><span class="p">|</span>
<span class="m">408</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:409:26
<span class="w">     </span><span class="p">|</span>
<span class="m">409</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:414:26
<span class="w">     </span><span class="p">|</span>
<span class="m">414</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:415:26
<span class="w">     </span><span class="p">|</span>
<span class="m">415</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>this<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0631<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>wasmtime-wasi<span class="sb">`</span><span class="w"> </span><span class="o">(</span>lib<span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">4</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Rust <code>1.70</code></li>
<li><code>stable-aarch64-apple-darwin</code></li>
</ul>
<p>Wasmtime version or commit: <code>10.0.1</code></p>
<p>Operating system: MacOS Ventura 13.0.1 (M1 Max)</p>
<p>Architecture: <code>stable-aarch64-apple-darwin</code></p>
<h3>Extra Info</h3>
<p>This started to happen after a <code>cargo clean</code>.<br>
Then I've made a brand new project to test if it is because of my environment and the results were the same.<br>
The errors do not resolve when it is added as a git dependency either.<br>
<code>wasmtime-wasi = { git = "https://github.com/bytecodealliance/wasmtime.git" }</code><br>
<code>10.0.0</code> also throws the same compiler error.</p>
</blockquote>



<a name="371092543"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371092543" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371092543">(Jun 30 2023 at 10:37)</a>:</h4>
<p>alisomay <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1614469046">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>A workaround is pinning.</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">wasmtime-wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=10.0.1"</span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
</code></pre></div>
<p><code>cap-x</code> <code>1.0.16</code> and up is the issue. </p>
<p>When we run <code>cargo clean</code> or <code>update</code> the transative dependency goes above <code>1.0.16</code>.</p>
<p>I still leave it open since the maintainers would update to <code>1.0.16</code> and above in <code>cap</code> dependencies.</p>
</blockquote>



<a name="371092893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371092893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371092893">(Jun 30 2023 at 10:38)</a>:</h4>
<p>alisomay edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1614469046">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>A workaround is pinning.</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">wasmtime-wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=10.0.1"</span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
</code></pre></div>
<p><code>cap-x</code> <code>1.0.16</code> and up is the issue. </p>
<p>When we run <code>cargo clean</code> or <code>update</code> the transative dependency goes above <code>1.0.15</code>.</p>
<p>I still leave it open since the maintainers would update to <code>1.0.16</code> and above in <code>cap</code> dependencies.</p>
</blockquote>



<a name="371093053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371093053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371093053">(Jun 30 2023 at 10:39)</a>:</h4>
<p>alisomay edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1614469046">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>A workaround is pinning.</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">wasmtime-wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=10.0.1"</span>
<span class="n">cap-fs-ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-primitives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
<span class="n">cap-std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"=1.0.15"</span>
</code></pre></div>
<p><code>cap-x</code> <code>1.0.16</code> and up is the issue. </p>
<p>When we run <code>cargo clean</code> or <code>update</code> the transative dependency goes above <code>1.0.15</code>.</p>
<p>I still leave it open since the maintainers would update to <code>1.0.16</code> and above in <code>cap</code> dependencies.<br>
</p>
</blockquote>



<a name="371201498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371201498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371201498">(Jun 30 2023 at 15:13)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1614799733">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>@sunfishcode it seems likely this may be caused by the 1.0.16 release of cap-std crates yesterday, would you be able to take a look into this?</p>
</blockquote>



<a name="371268647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371268647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371268647">(Jun 30 2023 at 18:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1615055982">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>I opened <a href="https://github.com/bytecodealliance/cap-std/issues/324">https://github.com/bytecodealliance/cap-std/issues/324</a> for some more details here.</p>
</blockquote>



<a name="371273945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371273945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371273945">(Jun 30 2023 at 18:59)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/6674#issuecomment-1615080324">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<p>With <a href="https://github.com/bytecodealliance/cap-std/issues/324#issuecomment-1615071696">yanks</a> this should now be resolved, thanks for the report!</p>
</blockquote>



<a name="371273947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236674%20Can%20not%20compile%20%60wasmtime-wasi%2010..../near/371273947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236674.20Can.20not.20compile.20.60wasmtime-wasi.2010.2E.2E.2E.2E.html#371273947">(Jun 30 2023 at 18:59)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6674">issue #6674</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo init temp_project --bin</code></li>
<li>Add <code>wasmtime-wasi = "=10.0.1"</code> as a dependency </li>
<li>Run <code>cargo build</code></li>
</ul>
<h3>Expected Results</h3>
<p>Successful build.</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">    </span>Blocking<span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>file<span class="w"> </span>lock<span class="w"> </span>on<span class="w"> </span>build<span class="w"> </span>directory
<span class="w">   </span>Compiling<span class="w"> </span>log<span class="w"> </span>v0.4.19
<span class="w">   </span>Compiling<span class="w"> </span>indexmap<span class="w"> </span>v1.9.3
<span class="w">   </span>Compiling<span class="w"> </span>rustix<span class="w"> </span>v0.37.21
<span class="w">   </span>Compiling<span class="w"> </span>crc32fast<span class="w"> </span>v1.3.2
<span class="w">   </span>Compiling<span class="w"> </span>memchr<span class="w"> </span>v2.5.0
<span class="w">   </span>Compiling<span class="w"> </span>hashbrown<span class="w"> </span>v0.13.2
<span class="w">   </span>Compiling<span class="w"> </span>pulldown-cmark<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit-debug<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>psm<span class="w"> </span>v0.1.21
<span class="w">   </span>Compiling<span class="w"> </span>witx<span class="w"> </span>v0.9.1
<span class="w">   </span>Compiling<span class="w"> </span>tracing<span class="w"> </span>v0.1.37
<span class="w">   </span>Compiling<span class="w"> </span>wasmparser<span class="w"> </span>v0.107.0
<span class="w">   </span>Compiling<span class="w"> </span>gimli<span class="w"> </span>v0.27.3
<span class="w">   </span>Compiling<span class="w"> </span>object<span class="w"> </span>v0.30.4
<span class="w">   </span>Compiling<span class="w"> </span>wit-parser<span class="w"> </span>v0.8.0
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-generate<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-fiber<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>memfd<span class="w"> </span>v0.6.3
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wit-bindgen<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-component-macro<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>addr2line<span class="w"> </span>v0.19.0
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-types<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmprinter<span class="w"> </span>v0.2.59
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-environ<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-runtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-jit<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wiggle<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-common<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasi-cap-std-sync<span class="w"> </span>v10.0.1
<span class="w">   </span>Compiling<span class="w"> </span>wasmtime-wasi<span class="w"> </span>v10.0.1
error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:408:26
<span class="w">     </span><span class="p">|</span>
<span class="m">408</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:409:26
<span class="w">     </span><span class="p">|</span>
<span class="m">409</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:414:26
<span class="w">     </span><span class="p">|</span>
<span class="m">414</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>atim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

error<span class="o">[</span>E0631<span class="o">]</span>:<span class="w"> </span><span class="nb">type</span><span class="w"> </span>mismatch<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">function</span><span class="w"> </span>arguments
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.cargo/registry/src/index.crates.io-6f17d22bba15001f/wasmtime-wasi-10.0.1/src/preview2/preview2/filesystem.rs:415:26
<span class="w">     </span><span class="p">|</span>
<span class="m">415</span><span class="w">  </span><span class="p">|</span><span class="w">                 </span>mtim.map<span class="o">(</span>cap_fs_ext::SystemTimeSpec::from_std<span class="o">)</span>,
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>---<span class="w"> </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span><span class="p">|</span>
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>expected<span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span>this
<span class="w">     </span><span class="p">|</span><span class="w">                      </span><span class="p">|</span><span class="w">   </span>found<span class="w"> </span>signature<span class="w"> </span>defined<span class="w"> </span>here
<span class="w">     </span><span class="p">|</span><span class="w">                      </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span>introduced<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>call
<span class="w">     </span><span class="p">|</span>
<span class="w">     </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>expected<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
<span class="w">                </span>found<span class="w"> </span><span class="k">function</span><span class="w"> </span>signature<span class="w"> </span><span class="sb">`</span>fn<span class="o">(</span>fs_set_times::system_time_spec::SystemTimeSpec<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>_<span class="sb">`</span>
note:<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>std::option::Option::&lt;T&gt;::map<span class="sb">`</span>
<span class="w">    </span>--&gt;<span class="w"> </span>/Users/vallahiboyle/.rustup/toolchains/stable-aarch64-apple-darwin/lib/rustlib/src/rust/library/core/src/option.rs:1095:12
<span class="w">     </span><span class="p">|</span>
<span class="m">1095</span><span class="w"> </span><span class="p">|</span><span class="w">         </span>F:<span class="w"> </span>~const<span class="w"> </span>FnOnce<span class="o">(</span>T<span class="o">)</span><span class="w"> </span>-&gt;<span class="w"> </span>U,
<span class="w">     </span><span class="p">|</span><span class="w">            </span>^^^^^^^^^^^^^^^^^^^^^<span class="w"> </span>required<span class="w"> </span>by<span class="w"> </span>this<span class="w"> </span>bound<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="sb">`</span>Option::&lt;T&gt;::map<span class="sb">`</span>

For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>this<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0631<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>wasmtime-wasi<span class="sb">`</span><span class="w"> </span><span class="o">(</span>lib<span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">4</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Rust <code>1.70</code></li>
<li><code>stable-aarch64-apple-darwin</code></li>
</ul>
<p>Wasmtime version or commit: <code>10.0.1</code></p>
<p>Operating system: MacOS Ventura 13.0.1 (M1 Max)</p>
<p>Architecture: <code>stable-aarch64-apple-darwin</code></p>
<h3>Extra Info</h3>
<p>This started to happen after a <code>cargo clean</code>.<br>
Then I've made a brand new project to test if it is because of my environment and the results were the same.<br>
The errors do not resolve when it is added as a git dependency either.<br>
<code>wasmtime-wasi = { git = "https://github.com/bytecodealliance/wasmtime.git" }</code><br>
<code>10.0.0</code> also throws the same compiler error.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>