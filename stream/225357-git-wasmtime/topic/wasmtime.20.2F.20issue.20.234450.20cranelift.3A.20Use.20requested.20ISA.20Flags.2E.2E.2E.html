<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4450 cranelift: Use requested ISA Flags... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234450.20cranelift.3A.20Use.20requested.20ISA.20Flags.2E.2E.2E.html">wasmtime / issue #4450 cranelift: Use requested ISA Flags...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="289759712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234450%20cranelift%3A%20Use%20requested%20ISA%20Flags.../near/289759712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234450.20cranelift.3A.20Use.20requested.20ISA.20Flags.2E.2E.2E.html#289759712">(Jul 15 2022 at 17:43)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/4450#issuecomment-1185763746">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4450">issue #4450</a>:</p>
<blockquote>
<blockquote>
<p>It looks like the existing behavior is to select an ISA with all native-supported features enabled.</p>
<p>The new behavior is to select an ISA with all features disabled unless you specifically ask for them, and then skip the test if the features you asked for aren't available.</p>
<p>Is that right?</p>
</blockquote>
<p>Yes, except that we don't start with <em>all</em> features disabled, we start with the defaults enabled by cranelift. So on x86_64 for example we start with <code>has_sse41</code> and a bunch of others. These can be explicitly disabled to test the lowering without those features.</p>
</blockquote>



<a name="289761041"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234450%20cranelift%3A%20Use%20requested%20ISA%20Flags.../near/289761041" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234450.20cranelift.3A.20Use.20requested.20ISA.20Flags.2E.2E.2E.html#289761041">(Jul 15 2022 at 17:55)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4450#issuecomment-1185763746">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4450">issue #4450</a>:</p>
<blockquote>
<blockquote>
<p>It looks like the existing behavior is to select an ISA with all native-supported features enabled.</p>
<p>The new behavior is to select an ISA with all features disabled unless you specifically ask for them, and then skip the test if the features you asked for aren't available.</p>
<p>Is that right?</p>
</blockquote>
<p>Yes, except that we don't start with <em>all</em> features disabled, we start with the defaults enabled by cranelift. So on x86_64 for example we start with <code>has_sse41</code> and a bunch of others. These can be explicitly disabled to test the lowering without those features.</p>
<p>Starting from an empty set of features would be valuable, I think we can try that.</p>
</blockquote>



<a name="289765756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234450%20cranelift%3A%20Use%20requested%20ISA%20Flags.../near/289765756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234450.20cranelift.3A.20Use.20requested.20ISA.20Flags.2E.2E.2E.html#289765756">(Jul 15 2022 at 18:33)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4450#issuecomment-1185763746">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4450">issue #4450</a>:</p>
<blockquote>
<blockquote>
<p>It looks like the existing behavior is to select an ISA with all native-supported features enabled.</p>
<p>The new behavior is to select an ISA with all features disabled unless you specifically ask for them, and then skip the test if the features you asked for aren't available.</p>
<p>Is that right?</p>
</blockquote>
<p>Yes, except that we don't start with <em>all</em> features disabled, we start with the defaults enabled by cranelift. So on x86_64 for example we start with <code>has_sse41</code> and a bunch of others. These can be explicitly disabled to test the lowering without those features.</p>
<p>Starting from an empty set of features would be valuable, I think we can try that. But I'd like to hear what people think is preferable.</p>
<p>Also CC @abrown and @bnjbvr from the original issue #1891</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>