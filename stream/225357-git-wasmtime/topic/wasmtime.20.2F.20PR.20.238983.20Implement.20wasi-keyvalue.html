<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8983 Implement wasi-keyvalue · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html">wasmtime / PR #8983 Implement wasi-keyvalue</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="453100725"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453100725" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453100725">(Jul 22 2024 at 07:21)</a>:</h4>
<p>iawia002 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a> from <code>iawia002:wasi-keyvalue</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>The <a href="https://github.com/WebAssembly/wasi-keyvalue">wasi-keyvalue</a> API has entered Phase 2. This patch implements the API, giving wasm components access to key-value storages.</p>
<p>Currently, only the Redis storage backend has been implemented, and support for more kv storage (e.g. etcd, etc.) will be added in the future.</p>
<p>cc @alexcrichton </p>
</blockquote>



<a name="453100727"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453100727" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453100727">(Jul 22 2024 at 07:21)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453100728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453100728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453100728">(Jul 22 2024 at 07:21)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453100729"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453100729" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453100729">(Jul 22 2024 at 07:21)</a>:</h4>
<p><strong>iawia002</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453102913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453102913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453102913">(Jul 22 2024 at 07:32)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453104987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453104987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453104987">(Jul 22 2024 at 07:43)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453111613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453111613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453111613">(Jul 22 2024 at 08:16)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2242359871">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Would it make sense to have a local storage method too? That would allow quick tests without requiring the setup of an entire database.</p>
</blockquote>



<a name="453122453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453122453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453122453">(Jul 22 2024 at 09:06)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2242460485">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<blockquote>
<p>Would it make sense to have a local storage method too? That would allow quick tests without requiring the setup of an entire database.</p>
</blockquote>
<p>Sure, I'll implement an in-memory backend and make the other database backends optional.</p>
</blockquote>



<a name="453131857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453131857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453131857">(Jul 22 2024 at 09:52)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453137352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453137352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453137352">(Jul 22 2024 at 10:18)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2242604361">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>I will fix the dead-code warning, but I have no idea why the <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/10038599012/job/27740867443?pr=8983">runtime_config_get test failed</a>:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">----</span><span class="w"> </span><span class="n">runtime_config_get</span><span class="w"> </span><span class="n">stdout</span><span class="w"> </span><span class="o">----</span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">runtime_config_get</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">147</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span>
<span class="nc">internal</span><span class="w"> </span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">entered</span><span class="w"> </span><span class="n">unreachable</span><span class="w"> </span><span class="n">code</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="453361705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453361705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453361705">(Jul 23 2024 at 08:53)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453365137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453365137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453365137">(Jul 23 2024 at 09:11)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2244675280">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<blockquote>
<p>I will fix the dead-code warning, but I have no idea why the <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/10038599012/job/27740867443?pr=8983">runtime_config_get test failed</a>:</p>
<p><code>
---- runtime_config_get stdout ----
thread 'runtime_config_get' panicked at crates/wasmtime/src/runtime/vm/libcalls.rs:147:5:
internal error: entered unreachable code
</code></p>
</blockquote>
<p>I have figured it out (#8997) and made a temporary solution by adding the <code>wasmtime/wmemcheck</code> feature to <code>wasi-runtime-config</code>:</p>
<p><div class="codehilite" data-code-language="YAML"><pre><span></span><code><span class="p p-Indicator">[</span><span class="nv">features</span><span class="p p-Indicator">]</span>
<span class="c1"># Do not use, this is only used for testing in CI,</span>
<span class="c1"># see https://github.com/bytecodealliance/wasmtime/issues/8997</span>
<span class="l l-Scalar l-Scalar-Plain">test = ["wasmtime/wmemcheck"]</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="453757939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757939">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2197338534">PR review</a>:</p>
<blockquote>
<p>This is looking quite good to me, thanks for the PR and the work here! The biggest question below I have is about how buckets are opened.</p>
</blockquote>



<a name="453757940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757940">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2197338534">PR review</a>:</p>
<blockquote>
<p>This is looking quite good to me, thanks for the PR and the work here! The biggest question below I have is about how buckets are opened.</p>
</blockquote>



<a name="453757941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757941">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690183208">PR review comment</a>:</p>
<blockquote>
<p>Since <code>::default()</code> is used here it looks like there's no way to configure this in-memory configuration?</p>
</blockquote>



<a name="453757942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757942">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690173279">PR review comment</a>:</p>
<blockquote>
<p>Is there perhaps a more "official" action to use here to setup redis? We in theory try to avoid third-party dependencies on actions because of security concerns, but if it's a complicated and/or widely-enough-used action we can make an exception.</p>
</blockquote>



<a name="453757943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757943">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690186602">PR review comment</a>:</p>
<blockquote>
<p>This exposes the ability for wasm to make a connection to any redis server it wants without the host being able to intervene. In general we try to model the implementations of WASI proposals to deny access to things by default with explicit opt-ins to provide access. </p>
<p>Perhaps as an alternative design, could the configuration for <code>WasiKeyValueCtx</code> look along the lines of one of:</p>
<ul>
<li>Provides are added ahead-of-time to <code>WasiKeyValueCtx</code> which means the host has an allow-listed set of provides each component gets access to.</li>
<li>The host has a callback or trait which receives the <code>open</code> call here and returns a <code>Box&lt;dyn Host&gt;</code>? That would enable the host to customize whether it wants the logic this method has implemneted or something more custom.</li>
</ul>
</blockquote>



<a name="453757945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453757945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453757945">(Jul 24 2024 at 17:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690187817">PR review comment</a>:</p>
<blockquote>
<p>It loosk like this is silently ignoring non-integer previous values and converting them to 0?</p>
</blockquote>



<a name="453872608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453872608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453872608">(Jul 25 2024 at 07:16)</a>:</h4>
<p>iawia002 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2198507033">PR review</a>.</p>



<a name="453872610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453872610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453872610">(Jul 25 2024 at 07:16)</a>:</h4>
<p>iawia002 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690939154">PR review comment</a>:</p>
<blockquote>
<p>Yes, the in-memory implementation is very simple. Currently, it doesn't have any configurable features, so configuration is not supported here.</p>
</blockquote>



<a name="453872780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453872780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453872780">(Jul 25 2024 at 07:17)</a>:</h4>
<p>iawia002 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2198508994">PR review</a>.</p>



<a name="453872781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453872781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453872781">(Jul 25 2024 at 07:17)</a>:</h4>
<p>iawia002 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690941051">PR review comment</a>:</p>
<blockquote>
<p>Fixed, now, non-integer data conversion errors will be returned directly.</p>
</blockquote>



<a name="453873313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453873313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453873313">(Jul 25 2024 at 07:19)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="453874665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453874665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453874665">(Jul 25 2024 at 07:25)</a>:</h4>
<p>iawia002 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2198529007">PR review</a>.</p>



<a name="453874666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453874666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453874666">(Jul 25 2024 at 07:25)</a>:</h4>
<p>iawia002 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690958136">PR review comment</a>:</p>
<blockquote>
<p>I am now using GitHub's <a href="https://docs.github.com/en/actions/using-containerized-services/creating-redis-service-containers">Redis service containers</a> to start a Redis service, but the drawback is that it can only run on Linux. Therefore, the previous macOS testing has been removed, but I think this is an acceptable compromise.</p>
</blockquote>



<a name="453875708"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453875708" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453875708">(Jul 25 2024 at 07:32)</a>:</h4>
<p>iawia002 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2198542675">PR review</a>.</p>



<a name="453875709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453875709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453875709">(Jul 25 2024 at 07:32)</a>:</h4>
<p>iawia002 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1690973432">PR review comment</a>:</p>
<blockquote>
<p>I chose the whitelist strategy and added a general configuration method that applies to all providers. By default, servers at all addresses are blocked from connecting. Which addresses the components can connect to depends on the runtime configuration.</p>
</blockquote>



<a name="453875847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453875847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453875847">(Jul 25 2024 at 07:32)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2249652097">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>All comments addressed ec3373a, PTAL</p>
</blockquote>



<a name="453970116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453970116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453970116">(Jul 25 2024 at 14:53)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2199557943">PR review</a>.</p>



<a name="453970117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453970117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453970117">(Jul 25 2024 at 14:53)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1691602235">PR review comment</a>:</p>
<blockquote>
<p>Yeah that sounds reasonable to me too, thanks!</p>
</blockquote>



<a name="453970686"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453970686" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453970686">(Jul 25 2024 at 14:56)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2199563824">PR review</a>.</p>



<a name="453970687"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453970687" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453970687">(Jul 25 2024 at 14:56)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1691606835">PR review comment</a>:</p>
<blockquote>
<p>Could this be renamed to <code>allow_redis_hosts</code>?</p>
</blockquote>



<a name="453970689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/453970689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#453970689">(Jul 25 2024 at 14:56)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1691606325">PR review comment</a>:</p>
<blockquote>
<p>I'm at least personally a bit hesitant to include this when it doesn't have any support/tests/etc. Would it be possible to hook this up to the configuration of <code>WasiKeyValueCtx</code>? Or somehow expose the ability to configure this? Otherwise I think it'd be better to remove the internals of <code>InMemory</code> and make it an empty struct which is a noop implementation of the trait.</p>
</blockquote>



<a name="454155294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454155294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454155294">(Jul 26 2024 at 03:18)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="454156537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454156537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454156537">(Jul 26 2024 at 03:29)</a>:</h4>
<p>iawia002 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2200843384">PR review</a>.</p>



<a name="454156539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454156539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454156539">(Jul 26 2024 at 03:29)</a>:</h4>
<p>iawia002 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#discussion_r1692442893">PR review comment</a>:</p>
<blockquote>
<p>I added a configuration option to the In-Memory provider that allows presetting some data. I believe this provider is valuable, especially in testing scenarios, where users can use this provider to mock some data without relying on a real database. PTAL if this is reasonable.</p>
</blockquote>



<a name="454163153"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454163153" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454163153">(Jul 26 2024 at 04:19)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="454165671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454165671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454165671">(Jul 26 2024 at 04:38)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2251960858">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>All comments addressed b9d2bd2, PTAL.</p>
<p>The CI failed due to the feature combinations issue we encountered before. Since the changes are not related to this PR, I have submitted a separate PR #9016 to address that issue. Once that PR is merged, I will rebase this PR, and the CI should be happy then.</p>
</blockquote>



<a name="454317227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454317227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454317227">(Jul 26 2024 at 14:59)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#pullrequestreview-2202084190">PR review</a>:</p>
<blockquote>
<p>Looks good to me, thanks! I'll queue for merge after a rebase makes CI happy</p>
<p>(thanks for helping to debug CI and fix the issue!)</p>
</blockquote>



<a name="454346662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454346662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454346662">(Jul 26 2024 at 17:51)</a>:</h4>
<p>iawia002 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="454350232"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454350232" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454350232">(Jul 26 2024 at 18:14)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2253250430">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Hi @alexcrichton, CI is happy now except <code>cargo vet</code>, I believe that should be handled by you.</p>
</blockquote>



<a name="454371516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454371516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454371516">(Jul 26 2024 at 20:50)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="454372236"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454372236" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454372236">(Jul 26 2024 at 20:56)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="454374633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/454374633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#454374633">(Jul 26 2024 at 21:15)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>.</p>



<a name="455502998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455502998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455502998">(Jul 31 2024 at 23:11)</a>:</h4>
<p>thomastaylor312 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2261639047">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Hey there! wasi-keyvalue champion here. So I don't think any of the champions knew this was landing. I'm super excited someone implemented it here (thanks @iawia002)! However, we are in the process of incorporating a last round of feedback now that we've had people implementing against it: <a href="https://github.com/WebAssembly/wasi-keyvalue/pull/46">https://github.com/WebAssembly/wasi-keyvalue/pull/46</a>. We might want to hold off on releasing this until we can make those changes and go to a full 0.2.0 release of wasi-keyvalue</p>
</blockquote>



<a name="455503284"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455503284" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455503284">(Jul 31 2024 at 23:13)</a>:</h4>
<p>thomastaylor312 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2261639047">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Hey there! wasi-keyvalue champion here. So I don't think any of the champions knew this was landing. I'm super excited someone implemented it here (thanks @iawia002)! However, we are in the process of incorporating a last round of feedback now that we've had people implementing against it: <a href="https://github.com/WebAssembly/wasi-keyvalue/pull/46">https://github.com/WebAssembly/wasi-keyvalue/pull/46</a>. We might want to hold off on releasing this until we can make those changes and go to a full 0.2.0 release of wasi-keyvalue.</p>
<p>Also, and in memory KV store makes sense to me, but I don't think we want to take hard deps on other KV stores in something like wasmtime. This was something that we had loosely talked about as being "host plugins" using something like wRPC</p>
</blockquote>



<a name="455503656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455503656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455503656">(Jul 31 2024 at 23:16)</a>:</h4>
<p>thomastaylor312 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2261639047">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Hey there! wasi-keyvalue champion here. So I don't think any of the champions knew this was landing. I'm super excited someone implemented it here (thanks @iawia002)! However, we are in the process of incorporating a last round of feedback now that we've had people implementing against it: <a href="https://github.com/WebAssembly/wasi-keyvalue/pull/46">https://github.com/WebAssembly/wasi-keyvalue/pull/46</a>. We might want to hold off on releasing this until we can make those changes and go to a full 0.2.0 release of wasi-keyvalue.</p>
<p>Also, an in memory KV store makes sense to me, but I don't think we want to take hard deps on other KV stores in something like wasmtime. This was something that we had loosely talked about as being "host plugins" using something like wRPC</p>
</blockquote>



<a name="455526297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455526297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455526297">(Aug 01 2024 at 02:18)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2261820697">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Hi @thomastaylor312, basically, when a proposal enters Phase 2, we can start implementing it. If we wait for it to be completely ready before we begin, the timeline would become excessively long. Therefore, we also have corresponding implementations for draft versions of proposals, allowing users to start experimenting with the API.</p>
<p>For the <code>wasi-keyvalue</code>, the implementation targets a specific tag <a href="https://github.com/WebAssembly/wasi-keyvalue/commit/219ea3612a53f1bf5b2d137551b22d0268fd3c58">219ea36</a>. I will continue to track the latest changes in this proposal to keep the implementation up to date.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/ba864e987ef1ab87c439ca6b396264547d2425e1/ci/vendor-wit.sh#L61">https://github.com/bytecodealliance/wasmtime/blob/ba864e987ef1ab87c439ca6b396264547d2425e1/ci/vendor-wit.sh#L61</a></p>
<p>Regarding the release issue, strictly speaking, this has not yet been landed. According to the <a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/contributing-release-process.md#releasing-a-major-version">wasmtime release schedule</a>, the code will be frozen on the 5th and will not be released until the 20th of this month. So we still have time to follow up on the latest changes in the <code>wasi-keyvalue</code> proposal.</p>
<p>Overall, I think we can go ahead and release this, allowing users of wasmtime v24 to try out the <code>wasi-keyvalue@0.2.0-draft</code> API.</p>
<blockquote>
<p>but I don't think we want to take hard deps on other KV stores in something like wasmtime. This was something that we had loosely talked about as being "host plugins" using something like wRPC</p>
</blockquote>
<p>I agree with this, there are too many KV storage solutions. But I'm not sure if we should move all KV storage implementations out of wasmtime, because depending on Redis/etcd/Memcached, etc., does not affect <code>wasmtime</code> itself. It only affects the standalone crate <code>wasmtime-wasi-keyvalue</code> and the <code>wasmtime-cli</code>. I hope to implement some very popular providers in wasmtime and turn the others into "host plugins".</p>
</blockquote>



<a name="455819194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455819194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455819194">(Aug 02 2024 at 04:03)</a>:</h4>
<p>thomastaylor312 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2264487392">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>Yeah we chatted about this today in the wasmtime meeting. So I think we are ok with the current pinned tag, especially since things are behind a feature flag.</p>
<p>However, I still think keeping Redis in tree is a bad idea. The reason why even the super popular ones should be a plugin type model is that now any time the redis client has a bug, you have to update the keyvalue crate and the CLI just to get the bug fix. I know this could happen with any crate, but with client APIs, these kinds of fixes happen quite often. If it happens to be security sensitive, it would necessitate a release of the crate and CLI for anyone depending on it. This wouldn't happen if this was done by loading a plugin separately</p>
</blockquote>



<a name="455825218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455825218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455825218">(Aug 02 2024 at 04:30)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2264525668">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>I understand your concerns. I am not sure what the "host plugins" will look like exactly. Since you mentioned wrpc, I assume it will involve a server and a client? If we turn all in-tree providers into plugins, would the user have to go through the following additional steps to access Redis?</p>
<ol>
<li>Deploy the plugin server</li>
<li>Import the plugin</li>
</ol>
<p>Compared to releasing patch versions for <code>wasmtime-wasi-keyvalue</code> and <code>wasmtime-cli</code>, I am more worried about the impact on usability. Will this be too difficult for users, especially the step of deploying a separate plugin server?</p>
<p>Anyway, before the 0.2 release of <code>wasi-keyvalue</code>, I don't plan to add more providers. I originally intended to consider these after the official release, but now it seems this will be on hold until we decide how to handle these providers.</p>
</blockquote>



<a name="455862464"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455862464" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455862464">(Aug 02 2024 at 07:55)</a>:</h4>
<p>iawia002 deleted a <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2264525668">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>I understand your concerns. I am not sure what the "host plugins" will look like exactly. Since you mentioned wrpc, I assume it will involve a server and a client? If we turn all in-tree providers into plugins, would the user have to go through the following additional steps to access Redis?</p>
<ol>
<li>Deploy the plugin server</li>
<li>Import the plugin</li>
</ol>
<p>Compared to releasing patch versions for <code>wasmtime-wasi-keyvalue</code> and <code>wasmtime-cli</code>, I am more worried about the impact on usability. Will this be too difficult for users, especially the step of deploying a separate plugin server?</p>
<p>Anyway, before the 0.2 release of <code>wasi-keyvalue</code>, I don't plan to add more providers. I originally intended to consider these after the official release, but now it seems this will be on hold until we decide how to handle these providers.</p>
</blockquote>



<a name="455865618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/455865618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#455865618">(Aug 02 2024 at 08:06)</a>:</h4>
<p>iawia002 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2264813319">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>I have now seen the <a href="https://github.com/bytecodealliance/meetings/blob/main/wasmtime/2024/wasmtime-08-01.md">meeting notes</a>. I apologize for any inconvenience caused by not notifying you during the implementation. I will submit a PR to revert the introduction of Redis.</p>
</blockquote>



<a name="456666923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238983%20Implement%20wasi-keyvalue/near/456666923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238983.20Implement.20wasi-keyvalue.html#456666923">(Aug 05 2024 at 18:02)</a>:</h4>
<p>thomastaylor312 <a href="https://github.com/bytecodealliance/wasmtime/pull/8983#issuecomment-2269615084">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8983">PR #8983</a>:</p>
<blockquote>
<p>No problem! I just wanted to make sure we had our ducks in a row here as we move forward adding new interfaces</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>