<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2258 machinst x64: check SSE requirements ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html">wasmtime / PR #2258 machinst x64: check SSE requirements ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="212094895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212094895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212094895">(Oct 02 2020 at 16:05)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a>.</p>



<a name="212094896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212094896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212094896">(Oct 02 2020 at 16:05)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a> from <code>check-sse</code> to <code>main</code>:</p>
<blockquote>
<p>This builds on top of #2255 (two commits), and adds a dynamic check that every time we emit an instruction that uses SSE features, the features were enabled by the configuration. This avoids cases where we could use e.g. SSE4.1 on a machine that doesn't have it.</p>
<p>The way to pass the ISA flags is a bit tricky; please see commit message for the explanation of why it was done this way. Happy to try a different way if anybody has better suggestions!</p>
</blockquote>



<a name="212098198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212098198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212098198">(Oct 02 2020 at 16:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#pullrequestreview-501275912">PR Review</a>.</p>



<a name="212098199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212098199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212098199">(Oct 02 2020 at 16:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#pullrequestreview-501275912">PR Review</a>.</p>



<a name="212098200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212098200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212098200">(Oct 02 2020 at 16:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#discussion_r498923378">PR Review Comment</a>:</p>
<blockquote>
<p>Could we rename this to <code>isa_requirement()</code>? I think "ISA" is a more standard term than "iset" as an abbreviation.</p>
</blockquote>



<a name="212098201"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212098201" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212098201">(Oct 02 2020 at 16:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#discussion_r498924696">PR Review Comment</a>:</p>
<blockquote>
<p>Are all of the below SSE2, e.g. <code>JmpIf</code>? (Perhaps they have some options or encodings that are?)</p>
<p>(To be clear, I like this function and the explicitness of this <code>match</code>; I'm just curious about the comment is all.)</p>
</blockquote>



<a name="212310359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212310359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212310359">(Oct 05 2020 at 14:53)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#pullrequestreview-502139910">PR Review</a>.</p>



<a name="212310360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212310360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212310360">(Oct 05 2020 at 14:53)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#discussion_r499659896">PR Review Comment</a>:</p>
<blockquote>
<p>Yep, I just checked the ones for which i had a few doubts:</p>
<ul>
<li>the conversions from int to float/doubles (and reciprocally) are SSE (for floats) and SSE2 (for doubles)</li>
<li>JmpIf is just a plain old conditional jump, (e.g. <code>jo</code>), so nothing to fret about.</li>
</ul>
</blockquote>



<a name="212310673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212310673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212310673">(Oct 05 2020 at 14:55)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a> from <code>check-sse</code> to <code>main</code>:</p>
<blockquote>
<p>This builds on top of #2255 (two commits), and adds a dynamic check that every time we emit an instruction that uses SSE features, the features were enabled by the configuration. This avoids cases where we could use e.g. SSE4.1 on a machine that doesn't have it.</p>
<p>The way to pass the ISA flags is a bit tricky; please see commit message for the explanation of why it was done this way. Happy to try a different way if anybody has better suggestions!</p>
</blockquote>



<a name="212320240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212320240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212320240">(Oct 05 2020 at 16:00)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a> from <code>check-sse</code> to <code>main</code>:</p>
<blockquote>
<p>This builds on top of #2255 (two commits), and adds a dynamic check that every time we emit an instruction that uses SSE features, the features were enabled by the configuration. This avoids cases where we could use e.g. SSE4.1 on a machine that doesn't have it.</p>
<p>The way to pass the ISA flags is a bit tricky; please see commit message for the explanation of why it was done this way. Happy to try a different way if anybody has better suggestions!</p>
</blockquote>



<a name="212448726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212448726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212448726">(Oct 06 2020 at 15:59)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a> from <code>check-sse</code> to <code>main</code>:</p>
<blockquote>
<p>This builds on top of #2255 (two commits), and adds a dynamic check that every time we emit an instruction that uses SSE features, the features were enabled by the configuration. This avoids cases where we could use e.g. SSE4.1 on a machine that doesn't have it.</p>
<p>The way to pass the ISA flags is a bit tricky; please see commit message for the explanation of why it was done this way. Happy to try a different way if anybody has better suggestions!</p>
</blockquote>



<a name="212530515"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212530515" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212530515">(Oct 07 2020 at 08:58)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a> from <code>check-sse</code> to <code>main</code>:</p>
<blockquote>
<p>This builds on top of #2255 (two commits), and adds a dynamic check that every time we emit an instruction that uses SSE features, the features were enabled by the configuration. This avoids cases where we could use e.g. SSE4.1 on a machine that doesn't have it.</p>
<p>The way to pass the ISA flags is a bit tricky; please see commit message for the explanation of why it was done this way. Happy to try a different way if anybody has better suggestions!</p>
</blockquote>



<a name="212535233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212535233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212535233">(Oct 07 2020 at 09:43)</a>:</h4>
<p><strong>bnjbvr</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a>.</p>



<a name="212592830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212592830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212592830">(Oct 07 2020 at 17:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2258#pullrequestreview-504113859">PR Review</a>.</p>



<a name="212654498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232258%20machinst%20x64%3A%20check%20SSE%20requirements%20.../near/212654498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232258.20machinst.20x64.3A.20check.20SSE.20requirements.20.2E.2E.2E.html#212654498">(Oct 08 2020 at 07:21)</a>:</h4>
<p>bnjbvr merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2258">PR #2258</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>