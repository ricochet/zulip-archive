<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5056 epoch_interruption in async fails ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html">wasmtime / issue #5056 epoch_interruption in async fails ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="304098123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304098123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304098123">(Oct 14 2022 at 19:01)</a>:</h4>
<p>bryanburgers opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>I am running into a situation where epoch_interruption in async calls is not working as I expect.</p>
<p>When trying to reproduce, I saw strange behavior.</p>
<p>Essentially, when using <code>futures::join!</code> to join the running wasm call with a future that will eventually call <code>engine.increment_epoch()</code>, sometimes the running future will never yield, so the epoch future doesn't have a chance to run and perform an <code>increment_epoch()</code>.</p>
<p>In the test case below as written, the program never returns. However, several different minor tweaks does cause it to return.</p>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// cargo new --bin wasmtime-epoch</span>
<span class="c1">// cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</span>

<span class="sd">/// Infinite loop</span>
<span class="k">const</span><span class="w"> </span><span class="n">WAT</span>: <span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">r#"</span>
<span class="s">(module</span>
<span class="s">    (func $run</span>
<span class="s">        (loop $loop</span>
<span class="s">            br $loop))</span>
<span class="s">    (export "run" (func $run)))</span>
<span class="s">"#</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[tokio::main]</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Basic setup</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Config</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">epoch_interruption</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 2</span>
<span class="w">    </span><span class="n">store</span><span class="p">.</span><span class="n">set_epoch_deadline</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 3</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Module</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">WAT</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">()).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Instance</span>::<span class="n">new_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">get_typed_func</span>::<span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="s">"run"</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 4</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">epoch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">tokio</span>::<span class="n">time</span>::<span class="n">sleep</span><span class="p">(</span><span class="n">std</span>::<span class="n">time</span>::<span class="n">Duration</span>::<span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"incrementing epoch"</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">engine</span><span class="p">.</span><span class="n">increment_epoch</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasm_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">.</span><span class="n">call_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">futures</span>::<span class="n">join</span><span class="o">!</span><span class="p">(</span><span class="n">wasm_future</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_future</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">display_reason</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo new --bin wasmtime-epoch</code></li>
<li><code>cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</code></li>
<li>Copy the above reproduction into <code>main.rs</code></li>
<li><code>cargo run</code></li>
</ul>
<h3>Expected Results</h3>
<p>After 1s, I expect <code>epoch_future</code> to print "incrementing epoch", and then some time later I expect <code>wasm_future</code> to finish with an error because of a trap.</p>
<h3>Actual Results</h3>
<p>The program never finishes.</p>
<h4>But other similar things do work</h4>
<ul>
<li>
<p>If I use a <code>tokio::spawn</code> instead of joining the futures, it works.</p>
<p><code>rust
let engine_clone = engine.clone();
let epoch_future = async move {
    tokio::time::sleep(std::time::Duration::from_secs(1)).await;
    println!("incrementing epoch");
    engine_clone.increment_epoch();
};
let wasm_future = func.call_async(&amp;mut store, ());
tokio::spawn(epoch_future);
let result = wasm_future.await;
</code></p>
</li>
<li>
<p>If I put an <code>engine.increment_epoch()</code> in position 3 or 4 above, before I even start running the wasm function, it works. (But it doesn't work for position 1 or 2.)</p>
</li>
<li>
<p>If I use the sync version of this code instead of the async, it works. (But that uses a <code>thread::spawn</code>, which is pretty similar to the <code>tokio::spawn</code> test above.)</p>
</li>
</ul>
<h3>Versions and Environment</h3>
<p>wasmtime version: 1.0.1</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;output of <code>cargo tree</code>&lt;/summary&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">bryan</span><span class="o">/</span><span class="n">personal</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">executor</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">slab</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.7</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">tokio</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">21.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">tokio</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="k">async</span><span class="o">-</span><span class="k">trait</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.57</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde_derive</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">ahash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">getrandom</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.7</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">29.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crc32fast</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">paste</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.9</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">psm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.21</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">jobserver</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.25</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">rayon</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">5.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memoffset</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">scopeguard</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">rayon</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">target</span><span class="o">-</span><span class="n">lexicon</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.4</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmparser</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">89.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">13.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">directories</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">dirs</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">file</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="n">logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">env_logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">atty</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.14</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">humantime</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">6.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">aho</span><span class="o">-</span><span class="n">corasick</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.19</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">regex</span><span class="o">-</span><span class="n">syntax</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.27</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">termcolor</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">rustix</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">35.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bitflags</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.8</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">io</span><span class="o">-</span><span class="n">lifetimes</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">sha2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">block</span><span class="o">-</span><span class="n">buffer</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">typenum</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cpufeatures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">opaque</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">toml</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">11.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">safe</span><span class="w"> </span><span class="n">v5</span><span class="p">.</span><span class="mf">0.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.1</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">arrayvec</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">gimli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">26.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fallible</span><span class="o">-</span><span class="n">iterator</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">stable_deref_trait</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regalloc2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fxhash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">byteorder</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">4.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="304098125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304098125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304098125">(Oct 14 2022 at 19:01)</a>:</h4>
<p>bryanburgers labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>I am running into a situation where epoch_interruption in async calls is not working as I expect.</p>
<p>When trying to reproduce, I saw strange behavior.</p>
<p>Essentially, when using <code>futures::join!</code> to join the running wasm call with a future that will eventually call <code>engine.increment_epoch()</code>, sometimes the running future will never yield, so the epoch future doesn't have a chance to run and perform an <code>increment_epoch()</code>.</p>
<p>In the test case below as written, the program never returns. However, several different minor tweaks does cause it to return.</p>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// cargo new --bin wasmtime-epoch</span>
<span class="c1">// cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</span>

<span class="sd">/// Infinite loop</span>
<span class="k">const</span><span class="w"> </span><span class="n">WAT</span>: <span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">r#"</span>
<span class="s">(module</span>
<span class="s">    (func $run</span>
<span class="s">        (loop $loop</span>
<span class="s">            br $loop))</span>
<span class="s">    (export "run" (func $run)))</span>
<span class="s">"#</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[tokio::main]</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Basic setup</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Config</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">epoch_interruption</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 2</span>
<span class="w">    </span><span class="n">store</span><span class="p">.</span><span class="n">set_epoch_deadline</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 3</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Module</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">WAT</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">()).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Instance</span>::<span class="n">new_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">get_typed_func</span>::<span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="s">"run"</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 4</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">epoch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">tokio</span>::<span class="n">time</span>::<span class="n">sleep</span><span class="p">(</span><span class="n">std</span>::<span class="n">time</span>::<span class="n">Duration</span>::<span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"incrementing epoch"</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">engine</span><span class="p">.</span><span class="n">increment_epoch</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasm_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">.</span><span class="n">call_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">futures</span>::<span class="n">join</span><span class="o">!</span><span class="p">(</span><span class="n">wasm_future</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_future</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">display_reason</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo new --bin wasmtime-epoch</code></li>
<li><code>cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</code></li>
<li>Copy the above reproduction into <code>main.rs</code></li>
<li><code>cargo run</code></li>
</ul>
<h3>Expected Results</h3>
<p>After 1s, I expect <code>epoch_future</code> to print "incrementing epoch", and then some time later I expect <code>wasm_future</code> to finish with an error because of a trap.</p>
<h3>Actual Results</h3>
<p>The program never finishes.</p>
<h4>But other similar things do work</h4>
<ul>
<li>
<p>If I use a <code>tokio::spawn</code> instead of joining the futures, it works.</p>
<p><code>rust
let engine_clone = engine.clone();
let epoch_future = async move {
    tokio::time::sleep(std::time::Duration::from_secs(1)).await;
    println!("incrementing epoch");
    engine_clone.increment_epoch();
};
let wasm_future = func.call_async(&amp;mut store, ());
tokio::spawn(epoch_future);
let result = wasm_future.await;
</code></p>
</li>
<li>
<p>If I put an <code>engine.increment_epoch()</code> in position 3 or 4 above, before I even start running the wasm function, it works. (But it doesn't work for position 1 or 2.)</p>
</li>
<li>
<p>If I use the sync version of this code instead of the async, it works. (But that uses a <code>thread::spawn</code>, which is pretty similar to the <code>tokio::spawn</code> test above.)</p>
</li>
</ul>
<h3>Versions and Environment</h3>
<p>wasmtime version: 1.0.1</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;output of <code>cargo tree</code>&lt;/summary&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">bryan</span><span class="o">/</span><span class="n">personal</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">executor</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">slab</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.7</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">tokio</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">21.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">tokio</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="k">async</span><span class="o">-</span><span class="k">trait</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.57</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde_derive</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">ahash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">getrandom</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.7</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">29.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crc32fast</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">paste</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.9</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">psm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.21</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">jobserver</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.25</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">rayon</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">5.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memoffset</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">scopeguard</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">rayon</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">target</span><span class="o">-</span><span class="n">lexicon</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.4</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmparser</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">89.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">13.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">directories</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">dirs</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">file</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="n">logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">env_logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">atty</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.14</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">humantime</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">6.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">aho</span><span class="o">-</span><span class="n">corasick</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.19</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">regex</span><span class="o">-</span><span class="n">syntax</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.27</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">termcolor</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">rustix</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">35.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bitflags</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.8</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">io</span><span class="o">-</span><span class="n">lifetimes</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">sha2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">block</span><span class="o">-</span><span class="n">buffer</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">typenum</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cpufeatures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">opaque</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">toml</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">11.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">safe</span><span class="w"> </span><span class="n">v5</span><span class="p">.</span><span class="mf">0.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.1</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">arrayvec</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">gimli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">26.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fallible</span><span class="o">-</span><span class="n">iterator</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">stable_deref_trait</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regalloc2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fxhash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">byteorder</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">4.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="304099026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304099026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304099026">(Oct 14 2022 at 19:06)</a>:</h4>
<p>bryanburgers edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>I am running into a situation where epoch_interruption in async calls is not working as I expect.</p>
<p>When trying to reproduce, I saw strange behavior.</p>
<p>Essentially, when using <code>futures::join!</code> to join the running wasm call with a future that will eventually call <code>engine.increment_epoch()</code>, sometimes the running future will never yield, so the epoch future doesn't have a chance to run and perform an <code>increment_epoch()</code>.</p>
<p>In the test case below as written, the program never returns. However, several different minor tweaks does cause it to return.</p>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// cargo new --bin wasmtime-epoch</span>
<span class="c1">// cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</span>

<span class="sd">/// Infinite loop</span>
<span class="k">const</span><span class="w"> </span><span class="n">WAT</span>: <span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">r#"</span>
<span class="s">(module</span>
<span class="s">    (func $run</span>
<span class="s">        (loop $loop</span>
<span class="s">            br $loop))</span>
<span class="s">    (export "run" (func $run)))</span>
<span class="s">"#</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[tokio::main]</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Basic setup</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Config</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">epoch_interruption</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 2</span>
<span class="w">    </span><span class="n">store</span><span class="p">.</span><span class="n">set_epoch_deadline</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 3</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Module</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">WAT</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">()).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Instance</span>::<span class="n">new_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">get_typed_func</span>::<span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="s">"run"</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 4</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">epoch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">tokio</span>::<span class="n">time</span>::<span class="n">sleep</span><span class="p">(</span><span class="n">std</span>::<span class="n">time</span>::<span class="n">Duration</span>::<span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"incrementing epoch"</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">engine</span><span class="p">.</span><span class="n">increment_epoch</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasm_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">.</span><span class="n">call_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">futures</span>::<span class="n">join</span><span class="o">!</span><span class="p">(</span><span class="n">wasm_future</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_future</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">display_reason</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo new --bin wasmtime-epoch</code></li>
<li><code>cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</code></li>
<li>Copy the above reproduction into <code>main.rs</code></li>
<li><code>cargo run</code></li>
</ul>
<h3>Expected Results</h3>
<p>After 1s, I expect <code>epoch_future</code> to print "incrementing epoch", and then some time later I expect <code>wasm_future</code> to finish with an error because of a trap.</p>
<h3>Actual Results</h3>
<p>The program never finishes.</p>
<h4>But other similar things do work</h4>
<ul>
<li>
<p>If I use a <code>tokio::spawn</code> instead of joining the futures, it works.</p>
<p><code>rust
let engine_clone = engine.clone();
let epoch_future = async move {
    tokio::time::sleep(std::time::Duration::from_secs(1)).await;
    println!("incrementing epoch");
    engine_clone.increment_epoch();
};
let wasm_future = func.call_async(&amp;mut store, ());
tokio::spawn(epoch_future);
let result = wasm_future.await;
</code></p>
</li>
<li>
<p>If I put an <code>engine.increment_epoch()</code> in position 3 or 4 above, before I even start running the wasm function, it works. (But it doesn't work for position 1 or 2.)</p>
</li>
<li>
<p>If I use the sync version of this code instead of the async, it works. (But that uses a <code>thread::spawn</code>, which is pretty similar to the <code>tokio::spawn</code> test above.)</p>
</li>
</ul>
<h3>Versions and Environment</h3>
<p>wasmtime version: 1.0.1</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;output of <code>cargo tree</code>&lt;/summary&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">bryan</span><span class="o">/</span><span class="n">personal</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">executor</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">slab</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.7</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">tokio</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">21.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">tokio</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="k">async</span><span class="o">-</span><span class="k">trait</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.57</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde_derive</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">ahash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">getrandom</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.7</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">29.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crc32fast</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">paste</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.9</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">psm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.21</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">jobserver</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.25</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">rayon</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">5.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memoffset</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">scopeguard</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">rayon</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">target</span><span class="o">-</span><span class="n">lexicon</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.4</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmparser</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">89.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">13.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">directories</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">dirs</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">file</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="n">logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">env_logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">atty</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.14</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">humantime</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">6.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">aho</span><span class="o">-</span><span class="n">corasick</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.19</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">regex</span><span class="o">-</span><span class="n">syntax</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.27</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">termcolor</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">rustix</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">35.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bitflags</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.8</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">io</span><span class="o">-</span><span class="n">lifetimes</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">sha2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">block</span><span class="o">-</span><span class="n">buffer</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">typenum</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cpufeatures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">opaque</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">toml</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">11.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">safe</span><span class="w"> </span><span class="n">v5</span><span class="p">.</span><span class="mf">0.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.1</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">arrayvec</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">gimli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">26.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fallible</span><span class="o">-</span><span class="n">iterator</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">stable_deref_trait</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regalloc2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fxhash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">byteorder</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">4.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="304100379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304100379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304100379">(Oct 14 2022 at 19:15)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5056#issuecomment-1279368570">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>Your wasm module is blocking the thread on which you run it. In async code this not allowed as it causes starvation. You have to run blocking code within <code>tokio::task::spawn_blocking</code>.</p>
</blockquote>



<a name="304102574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304102574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304102574">(Oct 14 2022 at 19:30)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5056#issuecomment-1279380484">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>@bryanburgers -- if I understand your example correctly, it is creating a deadlock via a circular dependence: the async wasm call will not yield until the epoch changes, but the yield is only going to occur when the next async task runs (the other future you've created).</p>
<p>In theory a multithreaded async runtime might choose to create a second thread and thus get to the epoch-increment before the wasm call finishes; but it doesn't have to. Semantically the guarantee that every async task must provide is that it finishes in finite (ideally short) time; and a runtime is allowed to be designed assuming that.</p>
<p>The way out of this is to ensure that the epoch increment happens outside the context of the event loop. What we do (in the environment we designed epoch interruption for originally) is spawn a separate, dedicated thread that loops forever, sleeps for the epoch length and increments the epoch counter. The sleep duration gives an upper bound on the amount of time any async wasm function can execute in one timeslice.</p>
<blockquote>
<p>Your wasm module is blocking the thread on which you run it. In async code this not allowed as it causes starvation. You have to run blocking code within tokio::task::spawn_blocking.</p>
</blockquote>
<p>That's the point of epoch interruption though -- calling a function on an event-loop thread is safe because the epoch will eventually change and cause it to yield if it hasn't finished yet. The only issue is that we need to ensure the epoch increment happens :-)</p>
</blockquote>



<a name="304102698"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304102698" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304102698">(Oct 14 2022 at 19:31)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/5056#issuecomment-1279381395">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>Since the epoch interruption mechanism is working as intended (the bug here is that the embedding code is not calling <code>increment_epoch()</code>) I'll go ahead and close this issue; but please feel free to ask if you have any other questions on how to use this properly!</p>
</blockquote>



<a name="304102699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304102699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304102699">(Oct 14 2022 at 19:31)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>I am running into a situation where epoch_interruption in async calls is not working as I expect.</p>
<p>When trying to reproduce, I saw strange behavior.</p>
<p>Essentially, when using <code>futures::join!</code> to join the running wasm call with a future that will eventually call <code>engine.increment_epoch()</code>, sometimes the running future will never yield, so the epoch future doesn't have a chance to run and perform an <code>increment_epoch()</code>.</p>
<p>In the test case below as written, the program never returns. However, several different minor tweaks does cause it to return.</p>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// cargo new --bin wasmtime-epoch</span>
<span class="c1">// cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</span>

<span class="sd">/// Infinite loop</span>
<span class="k">const</span><span class="w"> </span><span class="n">WAT</span>: <span class="kp">&amp;</span><span class="kt">str</span> <span class="o">=</span><span class="w"> </span><span class="s">r#"</span>
<span class="s">(module</span>
<span class="s">    (func $run</span>
<span class="s">        (loop $loop</span>
<span class="s">            br $loop))</span>
<span class="s">    (export "run" (func $run)))</span>
<span class="s">"#</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[tokio::main]</span><span class="w"></span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Basic setup</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Config</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">epoch_interruption</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 1</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 2</span>
<span class="w">    </span><span class="n">store</span><span class="p">.</span><span class="n">set_epoch_deadline</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 3</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Module</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">WAT</span><span class="p">.</span><span class="n">as_bytes</span><span class="p">()).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">Instance</span>::<span class="n">new_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">get_typed_func</span>::<span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="p">(),</span><span class="w"> </span><span class="n">_</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="s">"run"</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="c1">// engine.increment_epoch(); // Position 4</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">epoch_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">tokio</span>::<span class="n">time</span>::<span class="n">sleep</span><span class="p">(</span><span class="n">std</span>::<span class="n">time</span>::<span class="n">Duration</span>::<span class="n">from_secs</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"incrementing epoch"</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">engine</span><span class="p">.</span><span class="n">increment_epoch</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasm_future</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func</span><span class="p">.</span><span class="n">call_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">futures</span>::<span class="n">join</span><span class="o">!</span><span class="p">(</span><span class="n">wasm_future</span><span class="p">,</span><span class="w"> </span><span class="n">epoch_future</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kd">let</span><span class="w"> </span><span class="nb">Err</span><span class="p">(</span><span class="n">err</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="n">err</span><span class="p">.</span><span class="n">display_reason</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ul>
<li><code>cargo new --bin wasmtime-epoch</code></li>
<li><code>cargo add wasmtime futures tokio -F tokio/rt-multi-thread -F tokio/macros -F tokio/time</code></li>
<li>Copy the above reproduction into <code>main.rs</code></li>
<li><code>cargo run</code></li>
</ul>
<h3>Expected Results</h3>
<p>After 1s, I expect <code>epoch_future</code> to print "incrementing epoch", and then some time later I expect <code>wasm_future</code> to finish with an error because of a trap.</p>
<h3>Actual Results</h3>
<p>The program never finishes.</p>
<h4>But other similar things do work</h4>
<ul>
<li>
<p>If I use a <code>tokio::spawn</code> instead of joining the futures, it works.</p>
<p><code>rust
let engine_clone = engine.clone();
let epoch_future = async move {
    tokio::time::sleep(std::time::Duration::from_secs(1)).await;
    println!("incrementing epoch");
    engine_clone.increment_epoch();
};
let wasm_future = func.call_async(&amp;mut store, ());
tokio::spawn(epoch_future);
let result = wasm_future.await;
</code></p>
</li>
<li>
<p>If I put an <code>engine.increment_epoch()</code> in position 3 or 4 above, before I even start running the wasm function, it works. (But it doesn't work for position 1 or 2.)</p>
</li>
<li>
<p>If I use the sync version of this code instead of the async, it works. (But that uses a <code>thread::spawn</code>, which is pretty similar to the <code>tokio::spawn</code> test above.)</p>
</li>
</ul>
<h3>Versions and Environment</h3>
<p>wasmtime version: 1.0.1</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;output of <code>cargo tree</code>&lt;/summary&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">bryan</span><span class="o">/</span><span class="n">personal</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">epoch</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">executor</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">slab</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.7</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">io</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">sink</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">task</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">futures</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.24</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">├──</span><span class="w"> </span><span class="n">tokio</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">21.2</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">pin</span><span class="o">-</span><span class="n">project</span><span class="o">-</span><span class="n">lite</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.9</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">tokio</span><span class="o">-</span><span class="n">macros</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="err">└──</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="k">async</span><span class="o">-</span><span class="k">trait</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.57</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde_derive</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.46</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.102</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">ahash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">getrandom</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.7</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">29.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crc32fast</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">hashbrown</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">paste</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.9</span><span class="w"> </span><span class="p">(</span><span class="n">proc</span><span class="o">-</span><span class="kr">macro</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">psm</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.21</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">jobserver</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.25</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">rayon</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">5.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">epoch</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memoffset</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">scopeguard</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">either</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">8.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">rayon</span><span class="o">-</span><span class="n">core</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">channel</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">deque</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.2</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">├──</span><span class="w"> </span><span class="n">crossbeam</span><span class="o">-</span><span class="n">utils</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">8.12</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">num_cpus</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">13.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">autocfg</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">target</span><span class="o">-</span><span class="n">lexicon</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">12.4</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmparser</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">89.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">base64</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">13.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bincode</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.3</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">directories</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">dirs</span><span class="o">-</span><span class="n">sys</span><span class="o">-</span><span class="n">next</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">file</span><span class="o">-</span><span class="n">per</span><span class="o">-</span><span class="n">thread</span><span class="o">-</span><span class="n">logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">env_logger</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">atty</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.14</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">humantime</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">1.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regex</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">6.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">aho</span><span class="o">-</span><span class="n">corasick</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.19</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">memchr</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">5.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">regex</span><span class="o">-</span><span class="n">syntax</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">6.27</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">termcolor</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">1.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">rustix</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">35.11</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bitflags</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">errno</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.8</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">io</span><span class="o">-</span><span class="n">lifetimes</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">sha2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">block</span><span class="o">-</span><span class="n">buffer</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">typenum</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">15.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">version_check</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.4</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cpufeatures</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.5</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">digest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">9.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">generic</span><span class="o">-</span><span class="n">array</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">14.6</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">opaque</span><span class="o">-</span><span class="n">debug</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">toml</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">5.9</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">11.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">safe</span><span class="w"> </span><span class="n">v5</span><span class="p">.</span><span class="mf">0.2</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">├──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">           </span><span class="err">└──</span><span class="w"> </span><span class="n">zstd</span><span class="o">-</span><span class="n">sys</span><span class="w"> </span><span class="n">v2</span><span class="p">.</span><span class="mf">0.1</span><span class="o">+</span><span class="n">zstd</span><span class="p">.</span><span class="mf">1.5.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">libc</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.135</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="p">[</span><span class="n">build</span><span class="o">-</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">               </span><span class="err">└──</span><span class="w"> </span><span class="n">cc</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.73</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">├──</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">cranelift</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">anyhow</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.65</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">arrayvec</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">7.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">bforest</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">       </span><span class="err">└──</span><span class="w"> </span><span class="n">serde</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.145</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">entity</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">88.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">gimli</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">26.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fallible</span><span class="o">-</span><span class="n">iterator</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">indexmap</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">9.1</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">stable_deref_trait</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">2.0</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">regalloc2</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">3.2</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">fxhash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.1</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">└──</span><span class="w"> </span><span class="n">byteorder</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">4.3</span><span class="w"></span>
<span class="w">    </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">│</span><span class="w">   </span><span class="err">├──</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"></span>

<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="304452331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235056%20epoch_interruption%20in%20async%20fails%20.../near/304452331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235056.20epoch_interruption.20in.20async.20fails.20.2E.2E.2E.html#304452331">(Oct 17 2022 at 12:49)</a>:</h4>
<p>bryanburgers <a href="https://github.com/bytecodealliance/wasmtime/issues/5056#issuecomment-1280807211">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5056">issue #5056</a>:</p>
<blockquote>
<p>@cfallin Thanks for the explanation. It took a bit to put it all together, but it makes sense now.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>