<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #932 DWARF-5 support · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html">wasmtime / Issue #932 DWARF-5 support</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="195489412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195489412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195489412">(Apr 28 2020 at 00:02)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing.</p>
</blockquote>



<a name="195489499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195489499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195489499">(Apr 28 2020 at 00:04)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195494615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195494615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195494615">(Apr 28 2020 at 01:49)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Next milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems:</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>OUTDATED info below.</p>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195494672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195494672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195494672">(Apr 28 2020 at 01:50)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>Next milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems:</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195568499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195568499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195568499">(Apr 28 2020 at 14:04)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>Next milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems:</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
<li>accept <code>.debug_types</code> (middle-term)</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195568801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195568801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195568801">(Apr 28 2020 at 14:06)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>The upcoming milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems:</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>Next Goal</p>
<hr>
<ul>
<li>accept <code>.debug_types</code> (middle-term)</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195595523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195595523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195595523">(Apr 28 2020 at 17:07)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>The upcoming milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems (possibly related to <a href="https://github.com/bytecodealliance/wasmtime/issues/1613" title="https://github.com/bytecodealliance/wasmtime/issues/1613">https://github.com/bytecodealliance/wasmtime/issues/1613</a>):</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>Next Goal</p>
<hr>
<ul>
<li>accept <code>.debug_types</code> (middle-term)</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195621852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195621852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195621852">(Apr 28 2020 at 20:24)</a>:</h4>
<p>ggreif edited <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>The upcoming milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems (possibly related to <a href="https://github.com/bytecodealliance/wasmtime/issues/1613" title="https://github.com/bytecodealliance/wasmtime/issues/1613">https://github.com/bytecodealliance/wasmtime/issues/1613</a>):</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>[x] (potentially resolved by <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">https://github.com/bytecodealliance/wasmtime/pull/1572</a>) ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>Next Goal</p>
<hr>
<ul>
<li>accept <code>.debug_types</code> (middle-term)</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<a name="195875889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195875889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195875889">(Apr 30 2020 at 17:46)</a>:</h4>
<p>yurydelendik <a href="https://github.com/bytecodealliance/wasmtime/issues/932#issuecomment-622003724" title="https://github.com/bytecodealliance/wasmtime/issues/932#issuecomment-622003724">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>@ggreif is anything else left to close this particular issue? I see <code>.debug_types</code> and "operand stack locations". I would suggest to open a separate issue for the latter to track it with <a href="https://reviews.llvm.org/D78818" title="https://reviews.llvm.org/D78818">https://reviews.llvm.org/D78818</a>.</p>
</blockquote>



<a name="195888709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195888709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195888709">(Apr 30 2020 at 19:22)</a>:</h4>
<p>ggreif <a href="https://github.com/bytecodealliance/wasmtime/issues/932#issuecomment-622054297" title="https://github.com/bytecodealliance/wasmtime/issues/932#issuecomment-622054297">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>I have my own heap of problems, with my compiler. Happy to close this one.</p>
</blockquote>



<a name="195888711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23932%20DWARF-5%20support/near/195888711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23932.20DWARF-5.20support.html#195888711">(Apr 30 2020 at 19:22)</a>:</h4>
<p>ggreif closed <a href="https://github.com/bytecodealliance/wasmtime/issues/932" title="https://github.com/bytecodealliance/wasmtime/issues/932">Issue #932</a>:</p>
<blockquote>
<p>Current Goal</p>
<hr>
<p>The upcoming milestone is <code>Exprloc</code> support for the <a href="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions" title="https://yurydelendik.github.io/webassembly-dwarf/#DWARF-expressions-and-location-descriptions">Wasm-style locations</a>. I'll try to put together a PR next.</p>
<p>So far I see following problems (possibly related to <a href="https://github.com/bytecodealliance/wasmtime/issues/1613" title="https://github.com/bytecodealliance/wasmtime/issues/1613">https://github.com/bytecodealliance/wasmtime/issues/1613</a>):</p>
<ul>
<li>no operand stack locations yet (middle-term)</li>
<li>index needs (seems) to begin at <code>1</code> (I'd expect <code>0</code>) to obtain valid ranges</li>
<li>[x] (potentially resolved by <a href="https://github.com/bytecodealliance/wasmtime/pull/1572" title="https://github.com/bytecodealliance/wasmtime/pull/1572">https://github.com/bytecodealliance/wasmtime/pull/1572</a>) ranges get discarded <a href="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367" title="https://github.com/bytecodealliance/wasmtime/pull/1410#issuecomment-620025367">because not being sufficiently populated with labels</a>.</li>
</ul>
<p>Next Goal</p>
<hr>
<ul>
<li>accept <code>.debug_types</code> (middle-term)</li>
</ul>
<p>OUTDATED info below</p>
<hr>
<p>I gather that the <a href="https://yurydelendik.github.io/webassembly-dwarf/" title="https://yurydelendik.github.io/webassembly-dwarf/">Wasm DWARF spec</a> defines DWARF-5 as the baseline debug format.</p>
<p>However several sections from Version 5 are rejected by <code>wasmtime</code> with panics. E.g.<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63" title="https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63">https://github.com/bytecodealliance/wasmtime/blob/master/crates/debug/src/read_debuginfo.rs#L63</a></p>
<p>For my purposes <code>".debug_rnglists"</code> is the most important.</p>
<p>Is there any ETA for supporting these?</p>
<p>Note: The <code>clang-10</code> compiler (currently in <code>rc1</code>) <a href="https://bugs.llvm.org/show_bug.cgi?id=44728" title="https://bugs.llvm.org/show_bug.cgi?id=44728">doesn't reliably emit DWARF-5</a> yet.</p>
<p><code>clang-11</code> (pre-release) seems to generate DWARF-5 without crashing. As per #1410 the DWARF example Wasm files are compiled with this <code>clang</code>.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>