<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8396 Swich CI to test with nextest · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html">wasmtime / PR #8396 Swich CI to test with nextest</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="433832243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433832243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433832243">(Apr 17 2024 at 16:46)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a> from <code>elliottt:trevor/nextest</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><code>cargo-nextest</code> has a better strategy for running tests in parallel, which should allow us to improve CI time by not waiting on long-pole tests like cranelift-tools::filetests.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="433832414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433832414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433832414">(Apr 17 2024 at 16:47)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433833068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433833068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433833068">(Apr 17 2024 at 16:50)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433836444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433836444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433836444">(Apr 17 2024 at 17:08)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433843786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433843786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433843786">(Apr 17 2024 at 17:54)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433847670"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433847670" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433847670">(Apr 17 2024 at 18:16)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433848381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433848381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433848381">(Apr 17 2024 at 18:20)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<p><code>cargo-nextest</code> has a better strategy for running tests in parallel, which should allow us to improve CI time by not waiting on long-pole tests like cranelift-tools::filetests.</p>
<p>This PR does continue testing <code>wasi-common</code> with <code>cargo test</code>, as <code>nextest</code> doesn't allocate a pty to each test (<a href="https://github.com/nextest-rs/nextest/issues/1357">https://github.com/nextest-rs/nextest/issues/1357</a>). Without this change, those tests reliably fail when attempting to poll stdin/stdout.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="433853497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433853497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433853497">(Apr 17 2024 at 18:50)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433858240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433858240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433858240">(Apr 17 2024 at 19:16)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433871921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433871921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433871921">(Apr 17 2024 at 20:45)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8396#issuecomment-2062256398">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<p>Comparing this with another run sampled historically I don't think there's any speedup? That matches my gut on this given the low core count of actions runners and how all our tests are internally parallel too. </p>
</blockquote>



<a name="433872176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433872176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433872176">(Apr 17 2024 at 20:47)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433872829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433872829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433872829">(Apr 17 2024 at 20:51)</a>:</h4>
<p>elliottt <a href="https://github.com/bytecodealliance/wasmtime/pull/8396#issuecomment-2062284820">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<blockquote>
<p>Comparing this with another run sampled historically I don't think there's any speedup? That matches my gut on this given the low core count of actions runners and how all our tests are internally parallel too.</p>
</blockquote>
<p>I'm seeing 15 vs 18 minutes for the Linux x64 run, and that's with the non-cached build of <code>cargo-nextest</code>.</p>
</blockquote>



<a name="433873131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433873131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433873131">(Apr 17 2024 at 20:53)</a>:</h4>
<p>elliottt edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/8396#issuecomment-2062284820">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<blockquote>
<p>Comparing this with another run sampled historically I don't think there's any speedup? That matches my gut on this given the low core count of actions runners and how all our tests are internally parallel too.</p>
</blockquote>
<p>I'm seeing 15 vs 18 minutes for the Linux x64 run, though that's with the cached build of <code>cargo-nextest</code>.</p>
</blockquote>



<a name="433873514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433873514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433873514">(Apr 17 2024 at 20:56)</a>:</h4>
<p>elliottt <a href="https://github.com/bytecodealliance/wasmtime/pull/8396#issuecomment-2062306923">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<blockquote>
<blockquote>
<p>Comparing this with another run sampled historically I don't think there's any speedup? That matches my gut on this given the low core count of actions runners and how all our tests are internally parallel too.</p>
</blockquote>
<p>I'm seeing 15 vs 18 minutes for the Linux x64 run, though that's with the cached build of <code>cargo-nextest</code>.</p>
</blockquote>
<p>Never mind, @alexcrichton pointed out that this is due to not running the lldb tests on branches :)</p>
</blockquote>



<a name="433874607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433874607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433874607">(Apr 17 2024 at 21:03)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433876177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433876177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433876177">(Apr 17 2024 at 21:15)</a>:</h4>
<p>elliottt closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433876178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433876178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433876178">(Apr 17 2024 at 21:15)</a>:</h4>
<p>elliottt <a href="https://github.com/bytecodealliance/wasmtime/pull/8396#issuecomment-2062364640">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>:</p>
<blockquote>
<p>Given that this isn't really speeding up testing, I don't think this is worth pursuing. If we decide to start partitioning tests onto different runners in the future it would be worth picking this back up, but without that the benefit just isn't there.</p>
</blockquote>



<a name="433879905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433879905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433879905">(Apr 17 2024 at 21:46)</a>:</h4>
<p>elliottt reopened <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<a name="433880712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238396%20Swich%20CI%20to%20test%20with%20nextest/near/433880712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238396.20Swich.20CI.20to.20test.20with.20nextest.html#433880712">(Apr 17 2024 at 21:53)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8396">PR #8396</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>