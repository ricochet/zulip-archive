<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7775 bindgen: errors if interface and e... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html">wasmtime / issue #7775 bindgen: errors if interface and e...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="412851671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/412851671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#412851671">(Jan 14 2024 at 22:29)</a>:</h4>
<p><a href="https://github.com/jcbhmr">jcbhmr</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">Issue #7775</a>.</p>



<a name="412851672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/412851672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#412851672">(Jan 14 2024 at 22:29)</a>:</h4>
<p>jcbhmr opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">issue #7775</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here<br>
no wasm. just rust.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>TODO: first, ...</li>
<li>TODO: second, ...</li>
<li>Etc...</li>
<li>crate a new cargo project</li>
<li>add wasmtime with the component-model feature</li>
<li>use the below wit in the wit/ folder with bindgen!()</li>
<li>see error</li>
</ul>
<div class="codehilite" data-code-language="wit"><pre><span></span><code>package jcbhmr:hello-world-rust-wasm-component-lib;

interface my-box {
  resource my-box {
    constructor(value: u32);
    value: func() -&gt; u32;
  }
  set-global: func(value: my-box);
  global-value: func() -&gt; u32;
}

world example {
  export my-box;
}
</code></pre></div>
<h3>Expected Results</h3>
<p>it to either auto-rename it due to duplication or otherwise scope it so that this collision doesn't happen</p>
<h3>Actual Results</h3>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c">https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c</a>)</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 16.0.0</p>
<p>Operating system: Windows (using WSL)</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="412851737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/412851737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#412851737">(Jan 14 2024 at 22:30)</a>:</h4>
<p>jcbhmr edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">issue #7775</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here<br>
no wasm. just rust.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>TODO: first, ...</li>
<li>TODO: second, ...</li>
<li>Etc...</li>
<li>crate a new cargo project</li>
<li>add wasmtime with the component-model feature</li>
<li>use the below wit in the wit/ folder with bindgen!()</li>
<li>see error</li>
</ul>
<div class="codehilite" data-code-language="wit"><pre><span></span><code>package jcbhmr:hello-world-rust-wasm-component-lib;

interface my-box {
  resource my-box {
    constructor(value: u32);
    value: func() -&gt; u32;
  }
  set-global: func(value: my-box);
  global-value: func() -&gt; u32;
}

world example {
  export my-box;
}
</code></pre></div>
<h3>Expected Results</h3>
<p>it to either auto-rename it due to duplication or otherwise scope it so that this collision doesn't happen</p>
<h3>Actual Results</h3>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c">https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c</a>)</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>jcbhmr@PIG-2016:~/Documents/rswasmtest$<span class="w"> </span>cargo<span class="w">  </span>build
<span class="w">   </span>Compiling<span class="w"> </span>rswasmtest<span class="w"> </span>v0.1.0<span class="w"> </span><span class="o">(</span>/home/jcbhmr/Documents/rswasmtest<span class="o">)</span>
error<span class="o">[</span>E0428<span class="o">]</span>:<span class="w"> </span>the<span class="w"> </span>name<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>defined<span class="w"> </span>multiple<span class="w"> </span><span class="nb">times</span>
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>redefined<span class="w"> </span>here
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>defined<span class="w"> </span>only<span class="w"> </span>once<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>namespace<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span><span class="nv">module</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

error<span class="o">[</span>E0116<span class="o">]</span>:<span class="w"> </span>cannot<span class="w"> </span>define<span class="w"> </span>inherent<span class="w"> </span><span class="sb">`</span>impl<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="nb">type</span><span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>crate<span class="w"> </span>where<span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>defined
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span>impl<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>defined<span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>crate.
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>define<span class="w"> </span>and<span class="w"> </span>implement<span class="w"> </span>a<span class="w"> </span>trait<span class="w"> </span>or<span class="w"> </span>new<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nv">instead</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

Some<span class="w"> </span>errors<span class="w"> </span>have<span class="w"> </span>detailed<span class="w"> </span>explanations:<span class="w"> </span>E0116,<span class="w"> </span>E0428.
For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>an<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0116<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>rswasmtest<span class="sb">`</span><span class="w"> </span><span class="o">(</span>bin<span class="w"> </span><span class="s2">"rswasmtest"</span><span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">2</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 16.0.0</p>
<p>Operating system: Windows (using WSL)</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="412852076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/412852076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#412852076">(Jan 14 2024 at 22:36)</a>:</h4>
<p>jcbhmr edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">issue #7775</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here<br>
no wasm. just rust.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>TODO: first, ...</li>
<li>TODO: second, ...</li>
<li>Etc...</li>
<li>crate a new cargo project</li>
<li>add wasmtime with the component-model feature</li>
<li>use the below wit in the wit/ folder with bindgen!()</li>
<li>see error</li>
</ul>
<div class="codehilite" data-code-language="wit"><pre><span></span><code>package jcbhmr:hello-world-rust-wasm-component-lib;

interface my-box {
  resource my-box {
    constructor(value: u32);
    value: func() -&gt; u32;
  }
  set-global: func(value: my-box);
  global-value: func() -&gt; u32;
}

world example {
  export my-box;
}
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">component</span>::<span class="o">*</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">};</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">();</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>it to either auto-rename it due to duplication or otherwise scope it so that this collision doesn't happen</p>
<h3>Actual Results</h3>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c">https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c</a>)</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>jcbhmr@PIG-2016:~/Documents/rswasmtest$<span class="w"> </span>cargo<span class="w">  </span>build
<span class="w">   </span>Compiling<span class="w"> </span>rswasmtest<span class="w"> </span>v0.1.0<span class="w"> </span><span class="o">(</span>/home/jcbhmr/Documents/rswasmtest<span class="o">)</span>
error<span class="o">[</span>E0428<span class="o">]</span>:<span class="w"> </span>the<span class="w"> </span>name<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>defined<span class="w"> </span>multiple<span class="w"> </span><span class="nb">times</span>
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>redefined<span class="w"> </span>here
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>defined<span class="w"> </span>only<span class="w"> </span>once<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>namespace<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span><span class="nv">module</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

error<span class="o">[</span>E0116<span class="o">]</span>:<span class="w"> </span>cannot<span class="w"> </span>define<span class="w"> </span>inherent<span class="w"> </span><span class="sb">`</span>impl<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="nb">type</span><span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>crate<span class="w"> </span>where<span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>defined
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span>impl<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>defined<span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>crate.
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>define<span class="w"> </span>and<span class="w"> </span>implement<span class="w"> </span>a<span class="w"> </span>trait<span class="w"> </span>or<span class="w"> </span>new<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nv">instead</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

Some<span class="w"> </span>errors<span class="w"> </span>have<span class="w"> </span>detailed<span class="w"> </span>explanations:<span class="w"> </span>E0116,<span class="w"> </span>E0428.
For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>an<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0116<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>rswasmtest<span class="sb">`</span><span class="w"> </span><span class="o">(</span>bin<span class="w"> </span><span class="s2">"rswasmtest"</span><span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">2</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 16.0.0</p>
<p>Operating system: Windows (using WSL)</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="412852103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/412852103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#412852103">(Jan 14 2024 at 22:36)</a>:</h4>
<p>jcbhmr edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">issue #7775</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here<br>
no wasm. just rust.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>TODO: first, ...</li>
<li>TODO: second, ...</li>
<li>Etc...</li>
<li>crate a new cargo project</li>
<li>add wasmtime with the component-model feature</li>
<li>use the below wit in the wit/ folder with bindgen!()</li>
<li>see error</li>
</ul>
<div class="codehilite" data-code-language="wit"><pre><span></span><code>package jcbhmr:hello-world-rust-wasm-component-lib;

interface my-box {
  resource my-box {
    constructor(value: u32);
    value: func() -&gt; u32;
  }
  set-global: func(value: my-box);
  global-value: func() -&gt; u32;
}

world example {
  export my-box;
}
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">component</span>::<span class="o">*</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">};</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">();</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>it to either auto-rename it due to duplication or otherwise scope it so that this collision doesn't happen</p>
<h3>Actual Results</h3>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c">https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c</a>)</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>jcbhmr@PIG-2016:~/Documents/rswasmtest$<span class="w"> </span>cargo<span class="w">  </span>build
<span class="w">   </span>Compiling<span class="w"> </span>rswasmtest<span class="w"> </span>v0.1.0<span class="w"> </span><span class="o">(</span>/home/jcbhmr/Documents/rswasmtest<span class="o">)</span>
error<span class="o">[</span>E0428<span class="o">]</span>:<span class="w"> </span>the<span class="w"> </span>name<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>defined<span class="w"> </span>multiple<span class="w"> </span><span class="nb">times</span>
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>redefined<span class="w"> </span>here
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>defined<span class="w"> </span>only<span class="w"> </span>once<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>namespace<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span><span class="nv">module</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

error<span class="o">[</span>E0116<span class="o">]</span>:<span class="w"> </span>cannot<span class="w"> </span>define<span class="w"> </span>inherent<span class="w"> </span><span class="sb">`</span>impl<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="nb">type</span><span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>crate<span class="w"> </span>where<span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>defined
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span>impl<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>defined<span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>crate.
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>define<span class="w"> </span>and<span class="w"> </span>implement<span class="w"> </span>a<span class="w"> </span>trait<span class="w"> </span>or<span class="w"> </span>new<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nv">instead</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

Some<span class="w"> </span>errors<span class="w"> </span>have<span class="w"> </span>detailed<span class="w"> </span>explanations:<span class="w"> </span>E0116,<span class="w"> </span>E0428.
For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>an<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0116<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>rswasmtest<span class="sb">`</span><span class="w"> </span><span class="o">(</span>bin<span class="w"> </span><span class="s2">"rswasmtest"</span><span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">2</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 16.0.0</p>
<p>Operating system: Windows 10 using WSL</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="416661538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237775%20bindgen%3A%20errors%20if%20interface%20and%20e.../near/416661538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237775.20bindgen.3A.20errors.20if.20interface.20and.20e.2E.2E.2E.html#416661538">(Jan 18 2024 at 22:40)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/7775">issue #7775</a>:</p>
<blockquote>
<p>Thanks for filing a bug report! Please fill out the TODOs below.</p>
<p><strong>Note: if you want to report a security issue, please read our <a href="https://bytecodealliance.org/security">security policy</a>!</strong></p>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here<br>
no wasm. just rust.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>TODO: first, ...</li>
<li>TODO: second, ...</li>
<li>Etc...</li>
<li>crate a new cargo project</li>
<li>add wasmtime with the component-model feature</li>
<li>use the below wit in the wit/ folder with bindgen!()</li>
<li>see error</li>
</ul>
<div class="codehilite" data-code-language="wit"><pre><span></span><code>package jcbhmr:hello-world-rust-wasm-component-lib;

interface my-box {
  resource my-box {
    constructor(value: u32);
    value: func() -&gt; u32;
  }
  set-global: func(value: my-box);
  global-value: func() -&gt; u32;
}

world example {
  export my-box;
}
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">component</span>::<span class="o">*</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">};</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">();</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>it to either auto-rename it due to duplication or otherwise scope it so that this collision doesn't happen</p>
<h3>Actual Results</h3>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c">https://github.com/bytecodealliance/wasmtime/assets/61068799/c1f6ab0f-f013-4cb3-9a71-b05ff7e4884c</a>)</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>jcbhmr@PIG-2016:~/Documents/rswasmtest$<span class="w"> </span>cargo<span class="w">  </span>build
<span class="w">   </span>Compiling<span class="w"> </span>rswasmtest<span class="w"> </span>v0.1.0<span class="w"> </span><span class="o">(</span>/home/jcbhmr/Documents/rswasmtest<span class="o">)</span>
error<span class="o">[</span>E0428<span class="o">]</span>:<span class="w"> </span>the<span class="w"> </span>name<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>is<span class="w"> </span>defined<span class="w"> </span>multiple<span class="w"> </span><span class="nb">times</span>
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>redefined<span class="w"> </span>here
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span><span class="sb">`</span>MyBox<span class="sb">`</span><span class="w"> </span>must<span class="w"> </span>be<span class="w"> </span>defined<span class="w"> </span>only<span class="w"> </span>once<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>namespace<span class="w"> </span>of<span class="w"> </span>this<span class="w"> </span><span class="nv">module</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

error<span class="o">[</span>E0116<span class="o">]</span>:<span class="w"> </span>cannot<span class="w"> </span>define<span class="w"> </span>inherent<span class="w"> </span><span class="sb">`</span>impl<span class="sb">`</span><span class="w"> </span><span class="k">for</span><span class="w"> </span>a<span class="w"> </span><span class="nb">type</span><span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>crate<span class="w"> </span>where<span class="w"> </span>the<span class="w"> </span><span class="nb">type</span><span class="w"> </span>is<span class="w"> </span>defined
<span class="w"> </span>--&gt;<span class="w"> </span>src/main.rs:4:1
<span class="w">  </span><span class="p">|</span>
<span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bindgen!<span class="o">()</span><span class="p">;</span>
<span class="w">  </span><span class="p">|</span><span class="w"> </span>^^^^^^^^^^<span class="w"> </span>impl<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">type</span><span class="w"> </span>defined<span class="w"> </span>outside<span class="w"> </span>of<span class="w"> </span>crate.
<span class="w">  </span><span class="p">|</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>define<span class="w"> </span>and<span class="w"> </span>implement<span class="w"> </span>a<span class="w"> </span>trait<span class="w"> </span>or<span class="w"> </span>new<span class="w"> </span><span class="nb">type</span><span class="w"> </span><span class="nv">instead</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span>note:<span class="w"> </span>this<span class="w"> </span>error<span class="w"> </span>originates<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>macro<span class="w"> </span><span class="sb">`</span>bindgen<span class="sb">`</span><span class="w"> </span><span class="o">(</span><span class="k">in</span><span class="w"> </span>Nightly<span class="w"> </span>builds,<span class="w"> </span>run<span class="w"> </span>with<span class="w"> </span>-Z<span class="w"> </span>macro-backtrace<span class="w"> </span><span class="k">for</span><span class="w"> </span>more<span class="w"> </span>info<span class="o">)</span>

Some<span class="w"> </span>errors<span class="w"> </span>have<span class="w"> </span>detailed<span class="w"> </span>explanations:<span class="w"> </span>E0116,<span class="w"> </span>E0428.
For<span class="w"> </span>more<span class="w"> </span>information<span class="w"> </span>about<span class="w"> </span>an<span class="w"> </span>error,<span class="w"> </span>try<span class="w"> </span><span class="sb">`</span>rustc<span class="w"> </span>--explain<span class="w"> </span>E0116<span class="sb">`</span>.
error:<span class="w"> </span>could<span class="w"> </span>not<span class="w"> </span>compile<span class="w"> </span><span class="sb">`</span>rswasmtest<span class="sb">`</span><span class="w"> </span><span class="o">(</span>bin<span class="w"> </span><span class="s2">"rswasmtest"</span><span class="o">)</span><span class="w"> </span>due<span class="w"> </span>to<span class="w"> </span><span class="m">2</span><span class="w"> </span>previous<span class="w"> </span>errors
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 16.0.0</p>
<p>Operating system: Windows 10 using WSL</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>