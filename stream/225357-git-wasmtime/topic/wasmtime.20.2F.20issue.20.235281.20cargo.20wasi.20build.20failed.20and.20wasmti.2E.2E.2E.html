<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5281 cargo wasi build failed and wasmti... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html">wasmtime / issue #5281 cargo wasi build failed and wasmti...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="310422140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310422140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310422140">(Nov 16 2022 at 14:25)</a>:</h4>
<p>Dennis-Zhang-SH opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>Hi,</p>
<p>I met following issues that I could not resolve.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">clean</span><span class="w"></span>

<span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.47</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.103</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">16.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.1</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">backend</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">support</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">libadd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">8.44</span><span class="n">s</span><span class="w"></span>
<span class="n">wasmtime</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="w"> </span><span class="n">greet</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="s">"Wasmtime CLI"</span><span class="w"></span>
<span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"./target/wasm32-wasi/release/libadd.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">unknown</span><span class="w"> </span><span class="n">import</span>: <span class="err">`</span><span class="n">__wbindgen_placeholder__</span>::<span class="n">__wbindgen_describe</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span><span class="w"></span>


<span class="n">cargo</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.03</span><span class="n">s</span><span class="w"></span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">unknown</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">LocalTee</span><span class="p">(</span><span class="n">LocalTee</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">local</span>: <span class="nc">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">idx</span>: <span class="mi">331</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">})</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">interpreter</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">363</span>:<span class="mi">18</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">rustc</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="s">"/Users/dennis/Library/Caches/cargo-wasi/0.1.26/wasm-bindgen/0.2.83/wasm-bindgen"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/libadd.rustc.wasm"</span><span class="w"> </span><span class="s">"--out-dir"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/.tmpsc1F5p"</span><span class="w"> </span><span class="s">"--out-name"</span><span class="w"> </span><span class="s">"foo"</span><span class="w"></span>
<span class="w">        </span><span class="n">status</span>: <span class="nc">exit</span><span class="w"> </span><span class="n">status</span>: <span class="mi">101</span><span class="w"></span>
</code></pre></div>
<p>the original codes and toml are:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasm_bindgen</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">add</span><span class="p">(</span><span class="n">left</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">right</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">format!</span><span class="p">(</span><span class="s">"Hello, {}!"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Cargo.toml</span>
<span class="p">[</span><span class="n">lib</span><span class="p">]</span><span class="w"></span>
<span class="k">crate</span><span class="o">-</span><span class="k">type</span> <span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">'</span><span class="na">cdylib</span><span class="o">'</span><span class="p">]</span><span class="w"></span>

<span class="p">[</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.2.83"</span><span class="w"></span>
</code></pre></div>
<p>Can somebody help me with it?</p>
</blockquote>



<a name="310422322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310422322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310422322">(Nov 16 2022 at 14:26)</a>:</h4>
<p>Dennis-Zhang-SH edited <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>Hi,</p>
<p>I met following issues that I could not resolve.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">clean</span><span class="w"></span>

<span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.47</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.103</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">16.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.1</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">backend</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">support</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">libadd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">8.44</span><span class="n">s</span><span class="w"></span>


<span class="n">wasmtime</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="w"> </span><span class="n">greet</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="s">"Wasmtime CLI"</span><span class="w"></span>
<span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"./target/wasm32-wasi/release/libadd.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">unknown</span><span class="w"> </span><span class="n">import</span>: <span class="err">`</span><span class="n">__wbindgen_placeholder__</span>::<span class="n">__wbindgen_describe</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span><span class="w"></span>


<span class="n">cargo</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.03</span><span class="n">s</span><span class="w"></span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">unknown</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">LocalTee</span><span class="p">(</span><span class="n">LocalTee</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">local</span>: <span class="nc">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">idx</span>: <span class="mi">331</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">})</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">interpreter</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">363</span>:<span class="mi">18</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">rustc</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="s">"/Users/dennis/Library/Caches/cargo-wasi/0.1.26/wasm-bindgen/0.2.83/wasm-bindgen"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/libadd.rustc.wasm"</span><span class="w"> </span><span class="s">"--out-dir"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/.tmpsc1F5p"</span><span class="w"> </span><span class="s">"--out-name"</span><span class="w"> </span><span class="s">"foo"</span><span class="w"></span>
<span class="w">        </span><span class="n">status</span>: <span class="nc">exit</span><span class="w"> </span><span class="n">status</span>: <span class="mi">101</span><span class="w"></span>
</code></pre></div>
<p>the original codes and toml are:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasm_bindgen</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">add</span><span class="p">(</span><span class="n">left</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">right</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">format!</span><span class="p">(</span><span class="s">"Hello, {}!"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Cargo.toml</span>
<span class="p">[</span><span class="n">lib</span><span class="p">]</span><span class="w"></span>
<span class="k">crate</span><span class="o">-</span><span class="k">type</span> <span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">'</span><span class="na">cdylib</span><span class="o">'</span><span class="p">]</span><span class="w"></span>

<span class="p">[</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.2.83"</span><span class="w"></span>
</code></pre></div>
<p>Can somebody help me with it?</p>
</blockquote>



<a name="310429810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310429810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310429810">(Nov 16 2022 at 15:02)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317161655">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>Wasm-bindgen is for the web only. It is not compatible with wasi. You probably want to use wit-bindgen instead.</p>
</blockquote>



<a name="310431371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310431371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310431371">(Nov 16 2022 at 15:11)</a>:</h4>
<p>Dennis-Zhang-SH <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317174089">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<blockquote>
<p>Wasm-bindgen is for the web only. It is not compatible with wasi. You probably want to use wit-bindgen instead.</p>
</blockquote>
<p>thanks, I totally missed that the feature has been removed on the wasmtime book, my bad, I will check out wit-bindgen.</p>
</blockquote>



<a name="310431437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310431437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310431437">(Nov 16 2022 at 15:11)</a>:</h4>
<p>Dennis-Zhang-SH closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>Hi,</p>
<p>I met following issues that I could not resolve.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">clean</span><span class="w"></span>

<span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">proc</span><span class="o">-</span><span class="n">macro2</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.47</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">unicode</span><span class="o">-</span><span class="n">ident</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.5</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">quote</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.21</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">syn</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.103</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">4.17</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">shared</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">cfg</span><span class="o">-</span><span class="k">if</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">0.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">once_cell</span><span class="w"> </span><span class="n">v1</span><span class="p">.</span><span class="mf">16.0</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">bumpalo</span><span class="w"> </span><span class="n">v3</span><span class="p">.</span><span class="mf">11.1</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="n">backend</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">support</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="o">-</span><span class="kr">macro</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">2.83</span><span class="w"></span>
<span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">libadd</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">8.44</span><span class="n">s</span><span class="w"></span>


<span class="n">wasmtime</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="w"> </span><span class="n">greet</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="s">"Wasmtime CLI"</span><span class="w"></span>
<span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="p">.</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"./target/wasm32-wasi/release/libadd.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">unknown</span><span class="w"> </span><span class="n">import</span>: <span class="err">`</span><span class="n">__wbindgen_placeholder__</span>::<span class="n">__wbindgen_describe</span><span class="err">`</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">defined</span><span class="w"></span>


<span class="n">cargo</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">release</span><span class="w"></span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="n">release</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.03</span><span class="n">s</span><span class="w"></span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">unknown</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">LocalTee</span><span class="p">(</span><span class="n">LocalTee</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">local</span>: <span class="nc">Id</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">idx</span>: <span class="mi">331</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">})</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="n">interpreter</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">363</span>:<span class="mi">18</span><span class="w"></span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span><span class="w"></span>
<span class="n">error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">process</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">dennis</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">libadd</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">libadd</span><span class="p">.</span><span class="n">rustc</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">execute</span><span class="w"> </span><span class="s">"/Users/dennis/Library/Caches/cargo-wasi/0.1.26/wasm-bindgen/0.2.83/wasm-bindgen"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/libadd.rustc.wasm"</span><span class="w"> </span><span class="s">"--out-dir"</span><span class="w"> </span><span class="s">"/Users/dennis/Documents/code/libadd/target/wasm32-wasi/release/.tmpsc1F5p"</span><span class="w"> </span><span class="s">"--out-name"</span><span class="w"> </span><span class="s">"foo"</span><span class="w"></span>
<span class="w">        </span><span class="n">status</span>: <span class="nc">exit</span><span class="w"> </span><span class="n">status</span>: <span class="mi">101</span><span class="w"></span>
</code></pre></div>
<p>the original codes and toml are:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasm_bindgen</span>::<span class="n">prelude</span>::<span class="o">*</span><span class="p">;</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">add</span><span class="p">(</span><span class="n">left</span>: <span class="kt">i32</span><span class="p">,</span><span class="w"> </span><span class="n">right</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">left</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">right</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="cp">#[wasm_bindgen]</span><span class="w"></span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">greet</span><span class="p">(</span><span class="n">name</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">String</span> <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="fm">format!</span><span class="p">(</span><span class="s">"Hello, {}!"</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// Cargo.toml</span>
<span class="p">[</span><span class="n">lib</span><span class="p">]</span><span class="w"></span>
<span class="k">crate</span><span class="o">-</span><span class="k">type</span> <span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">'</span><span class="na">cdylib</span><span class="o">'</span><span class="p">]</span><span class="w"></span>

<span class="p">[</span><span class="n">dependencies</span><span class="p">]</span><span class="w"></span>
<span class="n">wasm</span><span class="o">-</span><span class="n">bindgen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"0.2.83"</span><span class="w"></span>
</code></pre></div>
<p>Can somebody help me with it?</p>
</blockquote>



<a name="310434026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310434026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310434026">(Nov 16 2022 at 15:23)</a>:</h4>
<p>Dennis-Zhang-SH <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317192668">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>@bjorn3 Does it mean currently wasmtime could not load any wasm file as module? I removed wasm-bindgen and build with <code>cargo wasi build --release</code>, but it still won't work, saying <code>Unsupported feature: Support for interface types has temporarily been removed from wasmtime</code></p>
</blockquote>



<a name="310437490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310437490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310437490">(Nov 16 2022 at 15:36)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317212715">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>cargo-wasi seems to use interface types, which has been removed from wasmtime as the interface types proposal for webassembly is currently inactive in favor of the component model proposal. Using <code>cargo build --target wasm32-wasi</code> rather than <code>cargo wasi build</code> should work just fine. This will build a regular wasm module that doesn't use interface types.</p>
</blockquote>



<a name="310439563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310439563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310439563">(Nov 16 2022 at 15:46)</a>:</h4>
<p>Dennis-Zhang-SH <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317227128">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<blockquote>
<p>cargo-wasi seems to use interface types, which has been removed from wasmtime as the interface types proposal for webassembly is currently inactive in favor of the component model proposal. Using <code>cargo build --target wasm32-wasi</code> rather than <code>cargo wasi build</code> should work just fine. This will build a regular wasm module that doesn't use interface types.</p>
</blockquote>
<p>Thanks for explaining, so the whole cargo wasi and wasm-bindgen are abandon right? It would be better to update the document. </p>
</blockquote>



<a name="310440390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310440390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310440390">(Nov 16 2022 at 15:50)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317233338">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>Wasm-bindgen is universally used when targeting the web. Just not when targeting wasi. As for cargo-wasi I'm not sure what the plan for it is.</p>
</blockquote>



<a name="310538086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310538086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310538086">(Nov 17 2022 at 03:07)</a>:</h4>
<p>Dennis-Zhang-SH <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1317997649">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>@bjorn3 okay, is there any wasmtime community? I would like to join, I have some questions haha, such as why println! macro could work in bin wasmtime while not in lib wasm</p>
</blockquote>



<a name="310566746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235281%20cargo%20wasi%20build%20failed%20and%20wasmti.../near/310566746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235281.20cargo.20wasi.20build.20failed.20and.20wasmti.2E.2E.2E.html#310566746">(Nov 17 2022 at 08:50)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5281#issuecomment-1318291022">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5281">issue #5281</a>:</p>
<blockquote>
<p>There is <a href="https://bytecodealliance.zulipchat.com">https://bytecodealliance.zulipchat.com</a>.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>