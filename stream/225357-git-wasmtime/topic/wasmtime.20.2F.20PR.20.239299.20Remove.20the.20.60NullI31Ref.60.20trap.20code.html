<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9299 Remove the `NullI31Ref` trap code · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html">wasmtime / PR #9299 Remove the `NullI31Ref` trap code</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="472520965"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472520965" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472520965">(Sep 24 2024 at 15:32)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9299">PR #9299</a>.</p>



<a name="472520966"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472520966" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472520966">(Sep 24 2024 at 15:32)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9299">PR #9299</a>.</p>



<a name="472520968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472520968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472520968">(Sep 24 2024 at 15:32)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9299">PR #9299</a>.</p>



<a name="472520971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472520971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472520971">(Sep 24 2024 at 15:32)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9299">PR #9299</a> from <code>fitzgen:no-null-i31-trap-code</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>To precisely match the Wasm spec tests, we would also need <code>NullStructRef</code> and <code>NullArrayRef</code>, etc... This is not practical, given the encoding space we have available. We are already matching expected "null FOO reference" trap messages when running the spec tests to our own "null reference" messages, so we can do that for <code>i31</code>s as well.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="472536099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472536099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472536099">(Sep 24 2024 at 16:56)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9299#pullrequestreview-2325864814">PR review</a>:</p>
<blockquote>
<p>We've got a fair number of bits fre in <code>MemFlags</code> so it's in theory not too hard to support more trap codes there, but I also think this is fine to have less specific traps for now and we can always refactor later if necessary</p>
</blockquote>



<a name="472540993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239299%20Remove%20the%20%60NullI31Ref%60%20trap%20code/near/472540993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239299.20Remove.20the.20.60NullI31Ref.60.20trap.20code.html#472540993">(Sep 24 2024 at 17:23)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9299">PR #9299</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>