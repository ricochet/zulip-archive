<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1517 Add ability to call CLIF functions... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html">wasmtime / Issue #1517 Add ability to call CLIF functions...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="194227671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194227671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194227671">(Apr 15 2020 at 21:07)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614280504" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614280504">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>I expect this to fail because there are no encodings for booleans in <code>load</code> and <code>store</code>.</p>
</blockquote>



<a name="194227816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194227816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194227816">(Apr 15 2020 at 21:08)</a>:</h4>
<p>abrown edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614280504" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614280504">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>I expect this to fail because there are no encodings for booleans in <code>load</code> and <code>store</code>. @sunfishcode and others: should we add these encodings or should <code>make_trampoline</code> do something special for booleans?</p>
</blockquote>



<a name="194229668"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194229668" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194229668">(Apr 15 2020 at 21:25)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614288168" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614288168">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action" title="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="194333713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194333713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194333713">(Apr 16 2020 at 16:45)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614766799" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614766799">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>@alexcrichton, here's the PR with the trampolines I was referring to.</p>
</blockquote>



<a name="194333752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194333752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194333752">(Apr 16 2020 at 16:45)</a>:</h4>
<p>abrown edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614766799" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614766799">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>@alexcrichton, here's the PR with the trampolines I was referring to. (You might notice they look pretty similar to the ones you created <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span>).</p>
</blockquote>



<a name="194364605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194364605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194364605">(Apr 16 2020 at 20:41)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614883858" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-614883858">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>Nice! FWIW reading this over I think there's actually not a whole lot that we'd share between wasmtime and cranelift. Only a few small loops/etc would be shared, and otherwise it seems like we'd probably bend over backwards too much trying to cater to both use cases. In that sense I'd personally be ok if we just left this duplication in the two?</p>
</blockquote>



<a name="194566513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231517%20Add%20ability%20to%20call%20CLIF%20functions.../near/194566513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231517.20Add.20ability.20to.20call.20CLIF.20functions.2E.2E.2E.html#194566513">(Apr 18 2020 at 22:20)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-615962537" title="https://github.com/bytecodealliance/wasmtime/pull/1517#issuecomment-615962537">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1517" title="https://github.com/bytecodealliance/wasmtime/pull/1517">Issue #1517</a>:</p>
<blockquote>
<p>Ok, I think this is ready: since the x86 backend does not have encodings for loading and storing booleans, I took @sunfishcode's suggestion and convert boolean values from (<code>load + icmp_imm ne ..., 0</code>) and to (<code>bint + store</code>).</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>