<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2117 wasmtime: Extract cranelift/lightbeam... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html">wasmtime / PR #2117 wasmtime: Extract cranelift/lightbeam...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="206295622"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206295622" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206295622">(Aug 07 2020 at 18:51)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="206297880"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206297880" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206297880">(Aug 07 2020 at 19:10)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#discussion_r467222080">PR Review Comment</a>:</p>
<blockquote>
<p>It is possible to move some of this imports into "crates/environ/src/data_structures.rs"?</p>
</blockquote>



<a name="206297881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206297881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206297881">(Aug 07 2020 at 19:10)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#pullrequestreview-463551232">PR Review</a>.</p>



<a name="206299677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206299677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206299677">(Aug 07 2020 at 19:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="206299678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206299678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206299678">(Aug 07 2020 at 19:26)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#pullrequestreview-463560335">PR Review</a>.</p>



<a name="206299680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206299680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206299680">(Aug 07 2020 at 19:26)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#discussion_r467229053">PR Review Comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="206299786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206299786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206299786">(Aug 07 2020 at 19:27)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="206300101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206300101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206300101">(Aug 07 2020 at 19:30)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="206300440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206300440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206300440">(Aug 07 2020 at 19:33)</a>:</h4>
<p>yurydelendik created <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#discussion_r467231810">PR Review Comment</a>:</p>
<blockquote>
<p>Nice. Sorry, I also meant other no <code>use cranelift_codegen::XXX</code> above -- they can be re-exported in wasmtime_environ too thus removing direct dependency on cranelift crates.</p>
</blockquote>



<a name="206300441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206300441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206300441">(Aug 07 2020 at 19:33)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#pullrequestreview-463563908">PR Review</a>.</p>



<a name="206300451"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206300451" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206300451">(Aug 07 2020 at 19:33)</a>:</h4>
<p>yurydelendik edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#discussion_r467231810">PR Review Comment</a>.</p>



<a name="206301716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206301716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206301716">(Aug 07 2020 at 19:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#pullrequestreview-463571344">PR Review</a>.</p>



<a name="206301717"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206301717" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206301717">(Aug 07 2020 at 19:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#discussion_r467237540">PR Review Comment</a>:</p>
<blockquote>
<p>I was thinking of doing that yeah but I realized that lightbeam itself depends on <code>cranelift-codegen</code>, so I figured it was probably best to just do the same thing. </p>
</blockquote>



<a name="206304014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206304014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206304014">(Aug 07 2020 at 20:10)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="206307043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/206307043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#206307043">(Aug 07 2020 at 20:43)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a> from <code>move-compilers-out-of-environ</code> to <code>main</code>:</p>
<blockquote>
<p>This commit extracts the two implementations of <code>Compiler</code> into two<br>
separate crates, <code>wasmtime-cranelfit</code> and <code>wasmtime-lightbeam</code>. The<br>
<code>wasmtime-jit</code> crate then depends on these two and instantiates them<br>
appropriately. The goal here is to start reducing the weight of the<br>
<code>wasmtime-environ</code> crate, which currently serves as a common set of<br>
types between all <code>wasmtime-*</code> crates. Long-term I'd like to remove the<br>
dependency on Cranelift from <code>wasmtime-environ</code>, but that's going to<br>
take a lot more work.</p>
<p>In the meantime I figure it's a good way to get started by separating<br>
out the lightbeam/cranelift function compilers from the<br>
<code>wasmtime-environ</code> crate. We can continue to iterate on moving things<br>
out in the future, too.</p>
</blockquote>



<a name="207470066"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/207470066" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#207470066">(Aug 19 2020 at 22:44)</a>:</h4>
<p>yurydelendik submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2117#pullrequestreview-471014120">PR Review</a>.</p>



<a name="207504693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232117%20wasmtime%3A%20Extract%20cranelift/lightbeam.../near/207504693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232117.20wasmtime.3A.20Extract.20cranelift.2Flightbeam.2E.2E.2E.html#207504693">(Aug 20 2020 at 09:34)</a>:</h4>
<p>tschneidereit merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2117">PR #2117</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>