<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5874 riscv64: Move `is_null`/`is_invalid` ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html">wasmtime / PR #5874 riscv64: Move `is_null`/`is_invalid` ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="336480925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/336480925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#336480925">(Feb 24 2023 at 13:24)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5874">PR #5874</a> from <code>riscv64-ref-check</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>Small PR moving <code>is_null</code>/<code>is_invalid</code> to ISLE. It also removes a few branches from the generated code.</p>
<p>It also fixes <code>is_invalid</code> which was slightly broken.</p>
</blockquote>



<a name="336547948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/336547948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#336547948">(Feb 24 2023 at 17:56)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#pullrequestreview-1314024375">PR review</a>.</p>



<a name="336547949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/336547949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#336547949">(Feb 24 2023 at 17:56)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#pullrequestreview-1314024375">PR review</a>.</p>



<a name="336547956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/336547956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#336547956">(Feb 24 2023 at 17:56)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#discussion_r1117404393">PR review comment</a>:</p>
<blockquote>
<p>I'd be inclined to not shadow <code>v</code> here with a new definition. It's not a bug or anything, but I had to read a little more carefully to see that the seqz consumes the redefinition, not the original input.</p>
<p>I think you could inline it, actually, and maybe that's more clear? I don't know, I haven't developed strong opinions about style in ISLE source yet.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>  (seqz (alu_rr_imm12 (AluOPRRI.Addi) v (imm12_const 1))))
</code></pre></div><br>
</p>
</blockquote>



<a name="337983411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/337983411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#337983411">(Feb 25 2023 at 11:37)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5874">PR #5874</a> from <code>riscv64-ref-check</code> to <code>main</code>.</p>



<a name="337984220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/337984220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#337984220">(Feb 25 2023 at 11:42)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#pullrequestreview-1314506270">PR review</a>.</p>



<a name="337984222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/337984222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#337984222">(Feb 25 2023 at 11:42)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#discussion_r1117908555">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>I think you could inline it, actually, and maybe that's more clear? I don't know, I haven't developed strong opinions about style in ISLE source yet.</p>
</blockquote>
<p>I haven't either, but it would be nice to have some sort of consensus among backends!</p>
<p>One of the things I noticed while working in the RISC-V backend is that we don't seem to define too many instructions helpers. We always do something like <code>(alu_rrr (opcode) ...)</code>, I'm personally not a big fan of this, but I'm not sure how other people feel about this stuff.</p>
<p>Also maybe we could get some sort of lisp formatter that would work for folks? Styles are different across all backends, It'd be nice to standardize on <em>something</em>. </p>
<p>Maybe that is something for <a href="https://github.com/bytecodealliance/wasmtime/issues/5752">https://github.com/bytecodealliance/wasmtime/issues/5752</a>, I'm not sure how far LSP goes.</p>
</blockquote>



<a name="337984367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/337984367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#337984367">(Feb 25 2023 at 11:44)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5874#discussion_r1117908555">PR review comment</a>.</p>



<a name="338001355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235874%20riscv64%3A%20Move%20%60is_null%60/%60is_invalid%60%20.../near/338001355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235874.20riscv64.3A.20Move.20.60is_null.60.2F.60is_invalid.60.20.2E.2E.2E.html#338001355">(Feb 25 2023 at 13:26)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5874">PR #5874</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>