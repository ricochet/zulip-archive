<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4502 fuzzgen: Fuzz Switch API · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html">wasmtime / PR #4502 fuzzgen: Fuzz Switch API</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="290425731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290425731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290425731">(Jul 21 2022 at 19:54)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>:</p>
<blockquote>
<p>Hey,</p>
<p>Turns out this is an interface that the frontend provides.<br>
We should fuzz it.</p>
<p>cc: @jameysharp </p>
</blockquote>



<a name="290425832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290425832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290425832">(Jul 21 2022 at 19:55)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047068007">PR review</a>.</p>



<a name="290425833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290425833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290425833">(Jul 21 2022 at 19:55)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927052496">PR review comment</a>:</p>
<blockquote>
<p>For i128, maybe you could generate two variables and then use <code>iconcat</code> if <code>get_variable_of_type</code> doesn't support it directly?</p>
</blockquote>



<a name="290426729"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426729" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426729">(Jul 21 2022 at 20:02)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927057230">PR review comment</a>:</p>
<blockquote>
<p><code>Switch</code> is designed to work for any kind of pattern. It should work just as well for switches like 1..5, 7..12 as for those like 1, 7, 33, 91. The former will use a branch and then two jump tables, while the later will only use branches. I presume the current code is biased towards the later option, right?</p>
</blockquote>



<a name="290426730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426730">(Jul 21 2022 at 20:02)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047074992">PR review</a>.</p>



<a name="290426822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426822">(Jul 21 2022 at 20:03)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047076025">PR review</a>.</p>



<a name="290426825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426825">(Jul 21 2022 at 20:03)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927057947">PR review comment</a>:</p>
<blockquote>
<p>I think increasing this a bit will allow for more interesting patterns of generated code.</p>
</blockquote>



<a name="290426868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426868">(Jul 21 2022 at 20:03)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047076468">PR review</a>.</p>



<a name="290426869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290426869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290426869">(Jul 21 2022 at 20:03)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927058238">PR review comment</a>:</p>
<blockquote>
<p>I'm doing exactly that <a href="https://github.com/afonso360/wasmtime/commit/b5802659e58b6eccb6b469483ce4301c11fe6e8b#diff-226e0f113ddbbcedaa5265109a951e52d30aa35307537684f56a5e6bedc9ba0eR323-R328">here</a>!</p>
<p>But we need a few additional bits to introduce I128 support.</p>
<p>Right now the fuzzer is hitting #4498 and #4406 when I add I128 support. I can add support for I128 values and work around those two issues by disabling those ops for i128.</p>
<p>I think it would be best to do this in a separate PR.</p>
</blockquote>



<a name="290427085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290427085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290427085">(Jul 21 2022 at 20:05)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047078338">PR review</a>.</p>



<a name="290427086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290427086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290427086">(Jul 21 2022 at 20:05)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927059500">PR review comment</a>:</p>
<blockquote>
<p>You shouldn't hit <a href="https://github.com/bytecodealliance/wasmtime/issues/4498">https://github.com/bytecodealliance/wasmtime/issues/4498</a> for the Switch api, right? Only when using <code>br_table</code> directly.</p>
</blockquote>



<a name="290427106"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290427106" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290427106">(Jul 21 2022 at 20:05)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047078463">PR review</a>.</p>



<a name="290427107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290427107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290427107">(Jul 21 2022 at 20:05)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927059582">PR review comment</a>:</p>
<blockquote>
<p>Yeah, Its going to be very unlikely that the fuzzer will generate that. I'll add a bias for adding contiguous ranges.</p>
</blockquote>



<a name="290431308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290431308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290431308">(Jul 21 2022 at 20:41)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>.</p>



<a name="290432313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290432313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290432313">(Jul 21 2022 at 20:49)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1047123569">PR review</a>.</p>



<a name="290432314"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290432314" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290432314">(Jul 21 2022 at 20:49)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#discussion_r927091437">PR review comment</a>:</p>
<blockquote>
<p>I don't think so, but we will hit the special cased lowering. I'll rebase the i128 patch after merging this, and disable the crashing ops so that we can start fuzzing Switch's i128.</p>
</blockquote>



<a name="290432555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290432555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290432555">(Jul 21 2022 at 20:51)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>.</p>



<a name="290436548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290436548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290436548">(Jul 21 2022 at 21:29)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>.</p>



<a name="290581293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290581293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290581293">(Jul 23 2022 at 00:16)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4502#pullrequestreview-1048477059">PR review</a>.</p>



<a name="290602910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290602910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290602910">(Jul 23 2022 at 08:58)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>.</p>



<a name="290605409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290605409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290605409">(Jul 23 2022 at 10:01)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a> from <code>fuzzgen-switch</code> to <code>main</code>.</p>



<a name="290826952"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234502%20fuzzgen%3A%20Fuzz%20Switch%20API/near/290826952" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234502.20fuzzgen.3A.20Fuzz.20Switch.20API.html#290826952">(Jul 25 2022 at 22:26)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4502">PR #4502</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>