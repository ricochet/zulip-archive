<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9633 Cranelift: rework isle-in-source-tree... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html">wasmtime / PR #9633 Cranelift: rework isle-in-source-tree...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="483535586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483535586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483535586">(Nov 20 2024 at 17:20)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>.</p>



<a name="483535588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483535588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483535588">(Nov 20 2024 at 17:20)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>.</p>



<a name="483535591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483535591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483535591">(Nov 20 2024 at 17:20)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a> from <code>cfallin:cranelift-isle-source-tree</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Per #9625 and #9588, a downstream user of Cranelift was misusing the <code>isle-in-source-tree</code> feature, enabling it indiscriminately even in published crates (<a href="https://github.com/wasmerio/wasmer/issues/5202">wasmerio/wasmer#5202</a>). This went against the intent of the feature, to be a way for local developers to observe the generated source. As such, it ran afoul of some safety checks for that purpose, and also polluted users' Cargo caches in a way that we cannot now fix except in future releases.</p>
<p>The best we can do is probably to take away features that are liable to be misused. Following discussion in today's Cranelift weekly meeting, we decided to provide this functionality under an environment variable instead. This allows folks who know what they're doing to get the same behavior, but does not expose a feature to crate users.</p>
<p>Fixes #9625.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="483535958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483535958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483535958">(Nov 20 2024 at 17:22)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9633#pullrequestreview-2449273549">PR review</a>.</p>



<a name="483536808"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483536808" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483536808">(Nov 20 2024 at 17:26)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>.</p>



<a name="483539346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483539346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483539346">(Nov 20 2024 at 17:40)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/9633#issuecomment-2489197603">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>:</p>
<blockquote>
<p>I think the merge queue run raced with the release; cargo-vet failed because it found a version on <a href="http://crates.io">crates.io</a> it didn't expect. Re-running, but noting in case we see it again later -- interesting corner case!</p>
</blockquote>



<a name="483539933"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483539933" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483539933">(Nov 20 2024 at 17:44)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9633#issuecomment-2489204910">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>:</p>
<blockquote>
<p>Ah I don't think this is spurious but should be fixed at <a href="https://github.com/bytecodealliance/wasmtime/pull/9635">https://github.com/bytecodealliance/wasmtime/pull/9635</a></p>
</blockquote>



<a name="483545129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239633%20Cranelift%3A%20rework%20isle-in-source-tree.../near/483545129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239633.20Cranelift.3A.20rework.20isle-in-source-tree.2E.2E.2E.html#483545129">(Nov 20 2024 at 18:15)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">PR #9633</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>