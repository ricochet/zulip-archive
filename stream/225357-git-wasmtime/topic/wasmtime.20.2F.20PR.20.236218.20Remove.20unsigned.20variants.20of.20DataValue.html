<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6218 Remove unsigned variants of DataValue · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html">wasmtime / PR #6218 Remove unsigned variants of DataValue</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="350180713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350180713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350180713">(Apr 15 2023 at 15:22)</a>:</h4>
<p>T0b1-iOS opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a> from <code>T0b1-iOS:rem_unsigned_data_values</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>As discussed in issue #5398 and Zulip previously, the unsigned variants of DataValue do not make a lot of sense given that Cranelift does not distinguish between signed/unsigned values in the IR and the operations specify signedness when it matters.</p>
<p>This changes makes the interpreter reflect that by using explicit signed/unsigned operations when required that follow the IR naming scheme by prepending <code>s</code> or <code>u</code> before the operation name.</p>
</blockquote>



<a name="350180719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350180719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350180719">(Apr 15 2023 at 15:22)</a>:</h4>
<p><strong>T0b1-iOS</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>.</p>



<a name="350180720"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350180720" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350180720">(Apr 15 2023 at 15:22)</a>:</h4>
<p><strong>T0b1-iOS</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>.</p>



<a name="350180836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350180836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350180836">(Apr 15 2023 at 15:23)</a>:</h4>
<p>T0b1-iOS edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>:</p>
<blockquote>
<p>As discussed in issue #5398 and Zulip previously, the unsigned variants of DataValue do not make a lot of sense given that Cranelift does not distinguish between signed/unsigned values in the IR and the operations specify signedness when it matters.<br>
Given that there seems to have been no public progress for a couple of months I decided to pick it up.</p>
<p>This changes makes the interpreter reflect that by using explicit signed/unsigned operations when required that follow the IR naming scheme by prepending <code>s</code> or <code>u</code> before the operation name.</p>
</blockquote>



<a name="350579894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350579894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350579894">(Apr 17 2023 at 17:37)</a>:</h4>
<p>afonso360 assigned <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a> to afonso360.</p>



<a name="350589042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350589042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350589042">(Apr 17 2023 at 18:23)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/afonso360">afonso360</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>.</p>



<a name="350761425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350761425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350761425">(Apr 18 2023 at 12:17)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#pullrequestreview-1389979982">PR review</a>.</p>



<a name="350761426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350761426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350761426">(Apr 18 2023 at 12:17)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#pullrequestreview-1389979982">PR review</a>.</p>



<a name="350761427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350761427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350761427">(Apr 18 2023 at 12:17)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#discussion_r1169946400">PR review comment</a>:</p>
<blockquote>
<p>Small nit about these. If we're following the IR naming scheme I think these would be better named as <code>sadd_overflow</code>/<code>smul_overflow</code>/etc.. since that is the name of the opcode.</p>
<p>It's also really neat that the other operations in <code>DataValue</code> now have the names of the opcodes!</p>
</blockquote>



<a name="350764348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350764348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350764348">(Apr 18 2023 at 12:28)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a> (assigned to afonso360):</p>
<blockquote>
<p>As discussed in issue #5398 and Zulip previously, the unsigned variants of DataValue do not make a lot of sense given that Cranelift does not distinguish between signed/unsigned values in the IR and the operations specify signedness when it matters.<br>
Given that there seems to have been no public progress for a couple of months I decided to pick it up.</p>
<p>This changes makes the interpreter reflect that by using explicit signed/unsigned operations when required that follow the IR naming scheme by prepending <code>s</code> or <code>u</code> before the operation name.</p>
<p>Edit(afonso360): Closes #5398</p>
</blockquote>



<a name="350788667"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350788667" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350788667">(Apr 18 2023 at 13:52)</a>:</h4>
<p>T0b1-iOS updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a> (assigned to afonso360).</p>



<a name="350788731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350788731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350788731">(Apr 18 2023 at 13:52)</a>:</h4>
<p>T0b1-iOS submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#pullrequestreview-1390179334">PR review</a>.</p>



<a name="350788732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350788732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350788732">(Apr 18 2023 at 13:52)</a>:</h4>
<p>T0b1-iOS created <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#discussion_r1170075856">PR review comment</a>:</p>
<blockquote>
<p>I changed it. Hope it's better now</p>
</blockquote>



<a name="350790812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350790812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350790812">(Apr 18 2023 at 14:00)</a>:</h4>
<p>afonso360 has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>.</p>



<a name="350790846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350790846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350790846">(Apr 18 2023 at 14:00)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#pullrequestreview-1390197289">PR review</a>.</p>



<a name="350790847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350790847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350790847">(Apr 18 2023 at 14:00)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6218#discussion_r1170087460">PR review comment</a>:</p>
<blockquote>
<p>Looks great, thanks!</p>
</blockquote>



<a name="350808607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236218%20Remove%20unsigned%20variants%20of%20DataValue/near/350808607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236218.20Remove.20unsigned.20variants.20of.20DataValue.html#350808607">(Apr 18 2023 at 15:04)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6218">PR #6218</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>