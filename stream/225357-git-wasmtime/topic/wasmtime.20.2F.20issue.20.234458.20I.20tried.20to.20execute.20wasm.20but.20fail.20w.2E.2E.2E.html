<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4458 I tried to execute wasm but fail w... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html">wasmtime / issue #4458 I tried to execute wasm but fail w...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="289805148"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/289805148" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#289805148">(Jul 16 2022 at 03:19)</a>:</h4>
<p>abc767234318 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9125060/demo.zip">demo.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.936.</p>
<h3>Steps to Reproduce</h3>
<p>wasmtime --dir=. demo.wasm '{"a":"txt", "b":1}'</p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">stdin</span><span class="w"></span>
<span class="p">[</span><span class="n">Usage</span><span class="p">]</span>: <span class="nc">wasmer</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="o">=</span><span class="p">.</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">'</span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">2</span><span class="p">}</span><span class="o">'</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">unmarshaled</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
<span class="o">----------------------------------------</span><span class="w"></span>
<span class="n">Got</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">1</span><span class="p">}</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">updated</span><span class="w"></span>
</code></pre></div>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">demo</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"demo.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">command</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="o">'</span><span class="nb">__</span><span class="na">rustc_debug_gdb_scripts_section__</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime-cli 0.38.1</p>
<p>Operating system: ubuntu20.04<br>
</p>
</blockquote>



<a name="289805149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/289805149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#289805149">(Jul 16 2022 at 03:19)</a>:</h4>
<p>abc767234318 labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9125060/demo.zip">demo.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.936.</p>
<h3>Steps to Reproduce</h3>
<p>wasmtime --dir=. demo.wasm '{"a":"txt", "b":1}'</p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">stdin</span><span class="w"></span>
<span class="p">[</span><span class="n">Usage</span><span class="p">]</span>: <span class="nc">wasmer</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="o">=</span><span class="p">.</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">'</span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">2</span><span class="p">}</span><span class="o">'</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">unmarshaled</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
<span class="o">----------------------------------------</span><span class="w"></span>
<span class="n">Got</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">1</span><span class="p">}</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">updated</span><span class="w"></span>
</code></pre></div>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">demo</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"demo.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">command</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="o">'</span><span class="nb">__</span><span class="na">rustc_debug_gdb_scripts_section__</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime-cli 0.38.1</p>
<p>Operating system: ubuntu20.04<br>
</p>
</blockquote>



<a name="289805542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/289805542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#289805542">(Jul 16 2022 at 03:29)</a>:</h4>
<p>abc767234318 edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9125060/demo.zip">demo.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.936.</p>
<h3>Steps to Reproduce</h3>
<p>touch log.txt<br>
wasmtime --dir=. demo.wasm '{"a":"txt", "b":1}'</p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">stdin</span><span class="w"></span>
<span class="p">[</span><span class="n">Usage</span><span class="p">]</span>: <span class="nc">wasmer</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="o">=</span><span class="p">.</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">'</span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">2</span><span class="p">}</span><span class="o">'</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">unmarshaled</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
<span class="o">----------------------------------------</span><span class="w"></span>
<span class="n">Got</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">1</span><span class="p">}</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">updated</span><span class="w"></span>
</code></pre></div>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">demo</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"demo.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">command</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="o">'</span><span class="nb">__</span><span class="na">rustc_debug_gdb_scripts_section__</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime-cli 0.38.1</p>
<p>Operating system: ubuntu20.04<br>
</p>
</blockquote>



<a name="291425899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/291425899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#291425899">(Jul 30 2022 at 12:16)</a>:</h4>
<p>rostamn739 <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1200147425">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>This is a more detailed run with <code>--allow-unknown-exports</code></p>
<p><div class="codehilite" data-code-language="Bash"><pre><span></span><code>✗ cargo run -- run --allow-precompiled --allow-unknown-exports ./demo.cwasm
     Running <span class="sb">`</span>target/debug/wasmtime run --allow-precompiled --allow-unknown-exports ./demo.cwasm<span class="sb">`</span>
The program accepts a JSON input via stdin
<span class="o">[</span>Usage<span class="o">]</span>: wasmer run --dir<span class="o">=</span>. main.wasm <span class="s1">'{"a":"txt", "b":2}'</span>
The input is unmarshaled and saved to a file log.txt
----------------------------------------
Got <span class="nv">input</span> <span class="o">=</span> <span class="o">{</span><span class="s2">"a"</span>:<span class="s2">"txt"</span>,<span class="s2">"b"</span>: <span class="m">123</span><span class="o">}</span>
thread <span class="s1">'main'</span> panicked at <span class="s1">'cannot open file: Custom { kind: Other, error: "failed to find a preopened file descriptor through which \"log.txt\" could be opened" }'</span>, src/libcore/result.rs:1084:5
note: run with <span class="sb">`</span><span class="nv">RUST_BACKTRACE</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span> environment variable to display a backtrace.
Error: failed to run main module <span class="sb">`</span>./demo.cwasm<span class="sb">`</span>

Caused by:
    <span class="m">0</span>: failed to invoke <span class="nb">command</span> default
    <span class="m">1</span>: wasm trap: wasm <span class="sb">`</span>unreachable<span class="sb">`</span> instruction executed
       wasm backtrace:
           <span class="m">0</span>: 0x3adc6 - &lt;unknown&gt;!__rust_start_panic
           <span class="m">1</span>: 0x3a5ef - &lt;unknown&gt;!rust_panic
           <span class="m">2</span>: 0x3a2b4 - &lt;unknown&gt;!std::panicking::rust_panic_with_hook::h38e55c6f9a9b5d9f
           <span class="m">3</span>: 0x3a087 - &lt;unknown&gt;!std::panicking::continue_panic_fmt::hbdab1a44e1ebdad7
           <span class="m">4</span>: 0x39fe6 - &lt;unknown&gt;!rust_begin_unwind
           <span class="m">5</span>: 0x43303 - &lt;unknown&gt;!core::panicking::panic_fmt::h7e9f94035af782b3
           <span class="m">6</span>: 0x4508f - &lt;unknown&gt;!core::result::unwrap_failed::hf7591c1dd9412006
           <span class="m">7</span>: 0x7e6c - &lt;unknown&gt;!core::result::Result&lt;T,E&gt;::expect::h4b0ac66bb9239b5e
           <span class="m">8</span>: 0x17ca - &lt;unknown&gt;!demo::main::hd0c421d0ef0fb50e
           <span class="m">9</span>: 0x1ae5 - &lt;unknown&gt;!std::rt::lang_start::<span class="o">{{</span>closure<span class="o">}}</span>::h298634c7c1655c18
          <span class="m">10</span>: 0x39966 - &lt;unknown&gt;!std::sys_common::backtrace::__rust_begin_short_backtrace::hf3ea6316715e2a72
          <span class="m">11</span>: 0x39fd8 - &lt;unknown&gt;!std::panicking::try::do_call::h2cc3188b185bea03
          <span class="m">12</span>: 0x3adba - &lt;unknown&gt;!__rust_maybe_catch_panic
          <span class="m">13</span>: 0x3a73c - &lt;unknown&gt;!std::rt::lang_start_internal::h5c7c5a5aac4d00f7
          <span class="m">14</span>: 0x1a90 - &lt;unknown&gt;!std::rt::lang_start::hbe7627577ab85542
          <span class="m">15</span>: 0x1a10 - &lt;unknown&gt;!main
          <span class="m">16</span>:  0x9f5 - &lt;unknown&gt;!_start
       note: using the <span class="sb">`</span><span class="nv">WASMTIME_BACKTRACE_DETAILS</span><span class="o">=</span><span class="m">1</span><span class="sb">`</span> environment variable to may show more debugging information
</code></pre></div><br>
</p>
</blockquote>



<a name="292620570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/292620570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#292620570">(Aug 09 2022 at 17:14)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1209649821">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>According to #2294, newer versions of Rust shouldn't emit the <code>__rustc_debug_gdb_scripts_section__</code> symbol any more. Based on #511, it sounds like 1.50 is new enough, which is over a year old. It looks like this was built with Rust 1.38, which is almost three years old.</p>
<p>I don't know enough about either Rust's WASI target or wasmtime's WASI implementation, but I'm wondering if recompiling with newer Rust would fix both of these issues.</p>
<p>@sunfishcode, does this sound familiar to you?</p>
</blockquote>



<a name="292625344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/292625344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#292625344">(Aug 09 2022 at 17:42)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1209683850">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>I don't know recognize <code>__rustc_debug_gdb_scripts_section__</code> myself, but that sounds plausible.</p>
</blockquote>



<a name="292625365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/292625365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#292625365">(Aug 09 2022 at 17:42)</a>:</h4>
<p>sunfishcode edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1209683850">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>I don't recognize <code>__rustc_debug_gdb_scripts_section__</code> myself, but that sounds plausible.</p>
</blockquote>



<a name="292659096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/292659096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#292659096">(Aug 09 2022 at 21:16)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1209904512">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>I don't know what toolchain produces the error message "failed to find a preopened file descriptor through which \"log.txt\" could be opened", so it's not clear to me what the problem is, without a significant amount of debugging.</p>
<p>This binary uses the old "wasi_unstable" module. It would be valuable to recompile it and see if the error persists.<br>
</p>
</blockquote>



<a name="313403133"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/313403133" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#313403133">(Dec 02 2022 at 00:07)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4458#issuecomment-1334600789">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<p>I'm going to close this since I believe Wasmtime is working as intended, requiring the <code>--allow-unknown-exports</code> flag. The subsequent error message seems related to the specific wasm module here and possibly a missing <code>--dir .</code> option. I don't think there's anything left to fix per se here, so I'm going to close this.</p>
</blockquote>



<a name="313403135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234458%20I%20tried%20to%20execute%20wasm%20but%20fail%20w.../near/313403135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234458.20I.20tried.20to.20execute.20wasm.20but.20fail.20w.2E.2E.2E.html#313403135">(Dec 02 2022 at 00:07)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4458">issue #4458</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/9125060/demo.zip">demo.zip</a><br>
This is a wasm file first mentioned in wasmer issues NO.936.</p>
<h3>Steps to Reproduce</h3>
<p>touch log.txt<br>
wasmtime --dir=. demo.wasm '{"a":"txt", "b":1}'</p>
<h3>Expected Results</h3>
<p>Successfully execute the test.wasm and print :</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">accepts</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">via</span><span class="w"> </span><span class="n">stdin</span><span class="w"></span>
<span class="p">[</span><span class="n">Usage</span><span class="p">]</span>: <span class="nc">wasmer</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="o">=</span><span class="p">.</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">'</span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">2</span><span class="p">}</span><span class="o">'</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">unmarshaled</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">saved</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"></span>
<span class="o">----------------------------------------</span><span class="w"></span>
<span class="n">Got</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">"a"</span>:<span class="s">"txt"</span><span class="p">,</span><span class="w"> </span><span class="s">"b"</span>:<span class="mi">1</span><span class="p">}</span><span class="w"></span>
<span class="n">File</span><span class="w"> </span><span class="n">log</span><span class="p">.</span><span class="n">txt</span><span class="w"> </span><span class="n">updated</span><span class="w"></span>
</code></pre></div>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="n">demo</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"></span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span>:
    <span class="mi">0</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">instantiate</span><span class="w"> </span><span class="s">"demo.wasm"</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span>: <span class="nc">command</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="o">'</span><span class="nb">__</span><span class="na">rustc_debug_gdb_scripts_section__</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">function</span><span class="w"></span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime-cli 0.38.1</p>
<p>Operating system: ubuntu20.04<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>