<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5446 cranelift: Add a conditional branch i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html">wasmtime / PR #5446 cranelift: Add a conditional branch i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="316084137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316084137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316084137">(Dec 15 2022 at 16:31)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>:</p>
<blockquote>
<p>Add a conditional branch instruction with two targets: <code>brif</code>. This instruction<br>
will eventually replace <code>brz</code> and <code>brnz</code>, as it encompasses the behavior of<br>
both.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316085297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316085297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316085297">(Dec 15 2022 at 16:36)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>:</p>
<blockquote>
<p>Add a conditional branch instruction with two targets: <code>brif</code>. This instruction will eventually replace <code>brz</code> and <code>brnz</code>, as it encompasses the behavior of both.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316086466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316086466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316086466">(Dec 15 2022 at 16:40)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316094780"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316094780" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316094780">(Dec 15 2022 at 17:16)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219649114">PR review</a>.</p>



<a name="316094781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316094781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316094781">(Dec 15 2022 at 17:16)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1049937631">PR review comment</a>:</p>
<blockquote>
<p>This is a gross hack. <code>Block</code> and <code>Value</code> are two entirely distinct types. They should never be mixed.</p>
</blockquote>



<a name="316095268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316095268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316095268">(Dec 15 2022 at 17:18)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219652138">PR review</a>.</p>



<a name="316095270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316095270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316095270">(Dec 15 2022 at 17:18)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1049939934">PR review comment</a>:</p>
<blockquote>
<p>Did you mean to commit this file?</p>
</blockquote>



<a name="316095755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316095755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316095755">(Dec 15 2022 at 17:20)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219655169">PR review</a>.</p>



<a name="316095757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316095757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316095757">(Dec 15 2022 at 17:20)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1049942060">PR review comment</a>:</p>
<blockquote>
<p>Maybe you could have a <code>BlockOrValue</code> type just for <code>BlockWithArgs</code> and then ensure that this type never leaks out of the <code>BlockWithArgs</code>?</p>
</blockquote>



<a name="316098913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316098913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316098913">(Dec 15 2022 at 17:34)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219674123">PR review</a>.</p>



<a name="316098914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316098914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316098914">(Dec 15 2022 at 17:34)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1049955091">PR review comment</a>:</p>
<blockquote>
<p>It was pulled in after rebasing over more recent work. Thanks for catching that.</p>
</blockquote>



<a name="316099173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316099173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316099173">(Dec 15 2022 at 17:35)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316123960"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316123960" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316123960">(Dec 15 2022 at 19:36)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219835179">PR review</a>.</p>



<a name="316123961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316123961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316123961">(Dec 15 2022 at 19:36)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050061328">PR review comment</a>:</p>
<blockquote>
<p>I appreciate how quick you are to share your insights on Cranelift issues and PRs. Your comments are usually helpful and lead to making Cranelift better for everyone. In this case, though, this is not the most helpful comment.</p>
<p>Before commenting on code where I'm not satisfied with its quality, I try to ask myself: Why did the author choose this way of expressing this idea? Maybe they know it's not ideal but they needed a placeholder while they're focusing on other parts of the problem. This case looks like a placeholder, given the empty "TODO" comments. Since this PR is still in "draft" status, placeholders are fine. They're only an issue if we merge something to main that'll cause us problems later.</p>
<p>It's useful to open draft PRs to run CI against work-in-progress. They're also an opportunity to get early feedback, but preferably when the author has specifically requested it. Even then, that feedback should be focused on the high-level ideas, not the implementation details, which are likely to change as the patch matures. (I aspire to follow the "Three-Phase Contribution Review" model described in "<a href="https://sage.thesharps.us/2014/09/01/the-gentle-art-of-patch-review/">The Gentle Art of Patch Review</a>".)</p>
<p>So, while I agree with you that this PR probably shouldn't be merged in exactly this form, it's too early to critique this implementation detail with the degree of severity of your first reaction. Your <code>BlockOrValue</code> suggestion is a good one, but Trevor may have equally good alternatives in mind.</p>
<p>It's good to suggest better alternatives, and even good to note concerns. For example, you could say, "We'll have to carefully audit anywhere that the <code>Block</code> and <code>Value</code> types are allowed to mix, and in the final version of this PR I'd prefer to avoid that." Just keep in mind that the patch's author may already know that, especially for draft PRs, and that they may even have good reasons for it.</p>
</blockquote>



<a name="316133991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316133991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316133991">(Dec 15 2022 at 20:30)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1219904377">PR review</a>.</p>



<a name="316133992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316133992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316133992">(Dec 15 2022 at 20:30)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050107939">PR review comment</a>:</p>
<blockquote>
<p>I agree I could have reacted much better. I will keep this in mind for the future.</p>
</blockquote>



<a name="316153124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316153124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316153124">(Dec 15 2022 at 22:23)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316168576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316168576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316168576">(Dec 16 2022 at 00:30)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316169321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316169321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316169321">(Dec 16 2022 at 00:38)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316173372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173372">(Dec 16 2022 at 01:22)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316173898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173898">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220152336">PR review</a>.</p>



<a name="316173899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173899">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050279692">PR review comment</a>:</p>
<blockquote>
<p>"bloks" -&gt; "blocks"</p>
</blockquote>



<a name="316173900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173900">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050281821">PR review comment</a>:</p>
<blockquote>
<p>I've noticed rust-analyzer doesn't do quite what I want with imports like this. I'd want <code>BlockWithArgs</code> to go into the list of imports on line 68, and leave <code>use crate::ir;</code> as a separate item, but several times I've seen it do this kind of rewrite instead.</p>
</blockquote>



<a name="316173902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173902">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050286507">PR review comment</a>:</p>
<blockquote>
<p>I haven't looked at how this lexer works. Does this correctly handle missing whitespace? Like, if someone wrote <code>brif v0 thenblock1 elseblock2</code>, would it reject that or would it strip off the "then"/"else" prefix and then see that it has a valid block name?</p>
</blockquote>



<a name="316173903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173903">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050284794">PR review comment</a>:</p>
<blockquote>
<p>I think this is the first place that <code>typecheck_variable_args_iterator</code> is called twice with the same instruction. Since it compares the given iterator against <code>inst_variable_args(inst)</code>, I wouldn't think that would be the right thing to do. Is it?</p>
</blockquote>



<a name="316173904"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173904" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173904">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050279460">PR review comment</a>:</p>
<blockquote>
<p>I see this was copy-pasted from the comment above because they all have the same typo. <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> "primarliy" -&gt; "primarily"</p>
</blockquote>



<a name="316173905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316173905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316173905">(Dec 16 2022 at 01:28)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220152336">PR review</a>.</p>



<a name="316174306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174306">(Dec 16 2022 at 01:33)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050289507">PR review comment</a>:</p>
<blockquote>
<p>What about adding a <code>self</code> import on line 67 and removing line 66?</p>
</blockquote>



<a name="316174307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174307">(Dec 16 2022 at 01:33)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220165910">PR review</a>.</p>



<a name="316174366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174366">(Dec 16 2022 at 01:34)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050289507">PR review comment</a>.</p>



<a name="316174547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174547">(Dec 16 2022 at 01:36)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220167227">PR review</a>.</p>



<a name="316174548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174548">(Dec 16 2022 at 01:36)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050290457">PR review comment</a>:</p>
<blockquote>
<p>This description of the <code>BlockWithArgs</code> invariants is exactly what I wanted to see. Perhaps most of it should be merged into the doc comment for the <code>BlockWithArgs::values</code> field above, though?</p>
</blockquote>



<a name="316174834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174834">(Dec 16 2022 at 01:40)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220170012">PR review</a>.</p>



<a name="316174835"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174835" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174835">(Dec 16 2022 at 01:40)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050291884">PR review comment</a>:</p>
<blockquote>
<p>It shouldn't be called at all, thanks for catching this! This was a hold-over from when the block args were held in the same ValueList.</p>
</blockquote>



<a name="316174883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174883">(Dec 16 2022 at 01:40)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220171163">PR review</a>.</p>



<a name="316174884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316174884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316174884">(Dec 16 2022 at 01:40)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050292110">PR review comment</a>:</p>
<blockquote>
<p>Happy to move it!</p>
</blockquote>



<a name="316175025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316175025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316175025">(Dec 16 2022 at 01:42)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220173685">PR review</a>.</p>



<a name="316175026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316175026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316175026">(Dec 16 2022 at 01:42)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050293082">PR review comment</a>:</p>
<blockquote>
<p>I don't feel strongly either way about using <code>self</code> imports. I just don't like having two import items with different parts of the import list like this.</p>
<p>I'd actually be tempted to quit importing anything except <code>ir</code> and <code>ir::types</code>, and qualify every reference to names in the <code>ir</code> module, given how short the module name is. But that's not something to do in this PR; it has enough else going on already.</p>
</blockquote>



<a name="316175653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316175653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316175653">(Dec 16 2022 at 01:51)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220178137">PR review</a>.</p>



<a name="316175654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316175654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316175654">(Dec 16 2022 at 01:51)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050298788">PR review comment</a>:</p>
<blockquote>
<p>Scratch that, it should be called from here: how else would we typecheck the branches of <code>brif</code> :)</p>
<p>I think the issue here is that it's assumed that the args always come from the instruction. I'll rework this to take the args as a separate argument, so that it's possible to check the args for a specific block.</p>
</blockquote>



<a name="316176037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316176037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316176037">(Dec 16 2022 at 01:57)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316176482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316176482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316176482">(Dec 16 2022 at 02:02)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220184023">PR review</a>.</p>



<a name="316176483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316176483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316176483">(Dec 16 2022 at 02:02)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050303369">PR review comment</a>:</p>
<blockquote>
<p>Like with the <code>Conditional</code> case below, you can get the args from <code>SingleDest</code>'s second field, can't you?</p>
<p>I think the same is true of both <code>CallInfo</code> cases, for that matter.</p>
</blockquote>



<a name="316176484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316176484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316176484">(Dec 16 2022 at 02:02)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220184023">PR review</a>.</p>



<a name="316176947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316176947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316176947">(Dec 16 2022 at 02:08)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316177076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177076">(Dec 16 2022 at 02:10)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316177122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177122">(Dec 16 2022 at 02:11)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220190219">PR review</a>.</p>



<a name="316177123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177123">(Dec 16 2022 at 02:11)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050307734">PR review comment</a>:</p>
<blockquote>
<p>Oh nice catch!</p>
</blockquote>



<a name="316177246"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177246" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177246">(Dec 16 2022 at 02:12)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316177370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177370">(Dec 16 2022 at 02:14)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1050308839">PR review comment</a>:</p>
<blockquote>
<p>You're right, it would parse <code>thenblock0</code>. I've opted to remove those keywords for now, separating the control argument and blocks with commas instead:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">brif</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">block1</span><span class="p">,</span><span class="w"> </span><span class="n">block2</span><span class="w"></span>
</code></pre></div><br>
</p>
</blockquote>



<a name="316177371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177371">(Dec 16 2022 at 02:14)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1220191722">PR review</a>.</p>



<a name="316177548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316177548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316177548">(Dec 16 2022 at 02:17)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>:</p>
<blockquote>
<p>Add a conditional branch instruction with two targets: <code>brif</code>. This instruction will eventually replace <code>brz</code> and <code>brnz</code>, as it encompasses the behavior of both.</p>
<p>This PR is currently rebased on top of #5450.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316187705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316187705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316187705">(Dec 16 2022 at 04:47)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316337096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316337096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316337096">(Dec 16 2022 at 18:46)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316337141"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316337141" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316337141">(Dec 16 2022 at 18:46)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>:</p>
<blockquote>
<p>Add a conditional branch instruction with two targets: <code>brif</code>. This instruction will eventually replace <code>brz</code> and <code>brnz</code>, as it encompasses the behavior of both.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="316348061"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316348061" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316348061">(Dec 16 2022 at 19:51)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316355622"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316355622" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316355622">(Dec 16 2022 at 20:39)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316370839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316370839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316370839">(Dec 16 2022 at 22:18)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="316384380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/316384380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#316384380">(Dec 17 2022 at 00:22)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="321953660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/321953660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#321953660">(Jan 18 2023 at 00:32)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322057619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322057619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322057619">(Jan 18 2023 at 13:54)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1253527480">PR review</a>.</p>



<a name="322057621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322057621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322057621">(Jan 18 2023 at 13:54)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1073565699">PR review comment</a>:</p>
<blockquote>
<p><code>branch_destination</code> below will need to be updated too I think to return <code>None</code> for <code>Brif</code>.</p>
</blockquote>



<a name="322057716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322057716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322057716">(Jan 18 2023 at 13:55)</a>:</h4>
<p>bjorn3 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1073565699">PR review comment</a>.</p>



<a name="322060491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322060491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322060491">(Jan 18 2023 at 14:06)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1253548497">PR review</a>.</p>



<a name="322060496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322060496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322060496">(Jan 18 2023 at 14:06)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1073579517">PR review comment</a>:</p>
<blockquote>
<p>I think it does so in the order returned by <code>visit_branch_targets</code> which you implemented as <code>then_block</code> and then <code>else_block</code>, but the code to compute this doesn't seem to be made to preserve this order, but rather preserved it by accident. See <a href="https://github.com/bytecodealliance/wasmtime/blob/94b51cdb179d08dbedd2934a3dc11e2c5aef481a/cranelift/codegen/src/machinst/blockorder.rs">https://github.com/bytecodealliance/wasmtime/blob/94b51cdb179d08dbedd2934a3dc11e2c5aef481a/cranelift/codegen/src/machinst/blockorder.rs</a></p>
</blockquote>



<a name="322060773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322060773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322060773">(Jan 18 2023 at 14:07)</a>:</h4>
<p>bjorn3 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1073579517">PR review comment</a>.</p>



<a name="322096263"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322096263" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322096263">(Jan 18 2023 at 16:29)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1253845628">PR review</a>.</p>



<a name="322096264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322096264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322096264">(Jan 18 2023 at 16:29)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1073768985">PR review comment</a>:</p>
<blockquote>
<p>Yep, I have a load of local changes that rework <code>branch_destination</code> to be generated the way that <code>arguments</code> is currently, so that we can use the same trick to view multiple <code>BlockCall</code> values as a slice.</p>
</blockquote>



<a name="322110632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322110632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322110632">(Jan 18 2023 at 17:28)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322122211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322122211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322122211">(Jan 18 2023 at 18:23)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322123025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322123025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322123025">(Jan 18 2023 at 18:27)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322134565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322134565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322134565">(Jan 18 2023 at 19:23)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322141321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322141321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322141321">(Jan 18 2023 at 20:01)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322142468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322142468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322142468">(Jan 18 2023 at 20:07)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322174814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322174814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322174814">(Jan 18 2023 at 23:39)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322183404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322183404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322183404">(Jan 19 2023 at 01:05)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322184589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322184589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322184589">(Jan 19 2023 at 01:18)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322627368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322627368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322627368">(Jan 20 2023 at 22:22)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322628488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322628488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322628488">(Jan 20 2023 at 22:29)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322631595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322631595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322631595">(Jan 20 2023 at 22:49)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322641030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322641030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322641030">(Jan 21 2023 at 00:15)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322782397"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322782397" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322782397">(Jan 21 2023 at 21:53)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322783224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322783224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322783224">(Jan 21 2023 at 22:03)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="322783868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322783868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322783868">(Jan 21 2023 at 22:12)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>:</p>
<blockquote>
<p>Add a conditional branch instruction with two targets: <code>brif</code>. This instruction will eventually replace <code>brz</code> and <code>brnz</code>, as it encompasses the behavior of both.</p>
<p>This PR also changes the <code>InstructionData</code> layout for instruction formats that hold <code>BlockCall</code> values, taking the same approach we use for <code>Value</code>  arguments. This allows <code>branch_destination</code> to return a slice to the <code>BlockCall</code> values held in the instruction, rather than requiring that we pattern match on <code>InstructionData</code> to fetch the then/else blocks.</p>
<p>Function generation for fuzzing has been updated to generate uses of <code>brif</code>, and I've run the <code>cranelift-fuzzgen</code> target locally for hours without triggering any new failures.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="322783900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322783900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322783900">(Jan 21 2023 at 22:12)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> as ready for review.</p>



<a name="322783913"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322783913" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322783913">(Jan 21 2023 at 22:12)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a>.</p>



<a name="322783921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/322783921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#322783921">(Jan 21 2023 at 22:12)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a>.</p>



<a name="323119864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323119864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323119864">(Jan 23 2023 at 21:18)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266349598">PR review</a>.</p>



<a name="323119865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323119865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323119865">(Jan 23 2023 at 21:18)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266349598">PR review</a>.</p>



<a name="323119866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323119866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323119866">(Jan 23 2023 at 21:18)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1084562626">PR review comment</a>:</p>
<blockquote>
<p>Will this always be enough? I don't remember if we have any explicitly-enforced implementation limits on <code>br_table</code> successor count, but we should verify this (and leave a comment here, and possibly enforce in the validator) if we stick with a <code>u8</code>.</p>
</blockquote>



<a name="323120769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323120769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323120769">(Jan 23 2023 at 21:25)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266360338">PR review</a>.</p>



<a name="323120773"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323120773" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323120773">(Jan 23 2023 at 21:25)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1084573687">PR review comment</a>:</p>
<blockquote>
<p><code>cranelift_frontend::Switch</code> assumes that everything that fits in 32bits works. It is definitively realistic to have more than 256 entires in a <code>br_table</code> for rust code.</p>
</blockquote>



<a name="323140391"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323140391" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323140391">(Jan 23 2023 at 23:59)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266612780">PR review</a>.</p>



<a name="323140392"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323140392" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323140392">(Jan 23 2023 at 23:59)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1084691641">PR review comment</a>:</p>
<blockquote>
<p>Good call, I'll bump this to <code>u32</code>.</p>
</blockquote>



<a name="323141354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323141354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323141354">(Jan 24 2023 at 00:08)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="323141453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323141453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323141453">(Jan 24 2023 at 00:09)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266616855">PR review</a>.</p>



<a name="323141454"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323141454" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323141454">(Jan 24 2023 at 00:09)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#pullrequestreview-1266616855">PR review</a>.</p>



<a name="323141455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323141455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323141455">(Jan 24 2023 at 00:09)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1084694958">PR review comment</a>:</p>
<blockquote>
<p>Comment missing.</p>
</blockquote>



<a name="323141456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323141456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323141456">(Jan 24 2023 at 00:09)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/5446#discussion_r1084696572">PR review comment</a>:</p>
<blockquote>
<p>I'm not seeing any test here where the <code>then_block</code> and <code>else_block</code> have different numbers of block arguments. That could be good to exercise if it isn't done elsewhere.</p>
</blockquote>



<a name="323148344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323148344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323148344">(Jan 24 2023 at 01:12)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="323148840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323148840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323148840">(Jan 24 2023 at 01:18)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a> from <code>trevor/brif</code> to <code>main</code>.</p>



<a name="323367387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235446%20cranelift%3A%20Add%20a%20conditional%20branch%20i.../near/323367387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235446.20cranelift.3A.20Add.20a.20conditional.20branch.20i.2E.2E.2E.html#323367387">(Jan 24 2023 at 22:37)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5446">PR #5446</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>