<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4369 Add cmake compatibility to c-api · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html">wasmtime / issue #4369 Add cmake compatibility to c-api</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="288295786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288295786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288295786">(Jul 02 2022 at 23:41)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1172979212">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:c-api", "wasmtime:docs"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:c-api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="288297137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288297137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288297137">(Jul 03 2022 at 00:18)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1172983000">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p><code>error: failed to open: /home/runner/work/wasmtime/wasmtime/target/release/.cargo-lock</code> This PR couldn't have caused that CI error</p>
</blockquote>



<a name="288299574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288299574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288299574">(Jul 03 2022 at 01:22)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1172988682">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p><code>error occurred: Failed to find tool. Is </code>aarch64-linux-gnu-gcc<code> installed?</code> how should I go about fixing this?</p>
</blockquote>



<a name="288370381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288370381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288370381">(Jul 04 2022 at 06:15)</a>:</h4>
<p>TheGreatRambler edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1172988682">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p><code>error occurred: Failed to find tool. Is aarch64-linux-gnu-gcc installed?</code> how should I go about fixing this?</p>
</blockquote>



<a name="288549476"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288549476" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288549476">(Jul 05 2022 at 15:48)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1175214289">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Thanks for this! This seems reasonable enough to me. Could this be used to replace and/or modify the existing <code>run-examples</code> crate run on CI? Additionally we ideally wouldn't add any more time to CI since building, especially in release mode, is a bit hefty. Could this ensure that the crates are only built in CI once?</p>
</blockquote>



<a name="288570552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288570552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288570552">(Jul 05 2022 at 17:54)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1175337410">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>I've moved compilation to the <code>run-examples</code> crate and verified it worked, the CI seems stuck on my end so not sure how well it will work here</p>
</blockquote>



<a name="288620597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288620597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288620597">(Jul 06 2022 at 03:58)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1175753438">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>CI failed due to a lack of disk space. If it becomes a problem in the future I found <a href="https://github.com/apache/flink/blob/master/tools/azure-pipelines/free_disk_space.sh">this script from Apache</a> that could help, it just removes unnecessary packages from the runner.</p>
</blockquote>



<a name="288692444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/288692444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#288692444">(Jul 06 2022 at 16:02)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1176404228">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>I don't even know what to do to fix this CI error. I'm just going to give it a break for now</p>
</blockquote>



<a name="289013598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/289013598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#289013598">(Jul 09 2022 at 02:44)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1179464927">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Can anyone provide any tips for why the externref example works perfectly fine on my machine but fails in the CI? I clean the build folder to save disk space, but that should only impact the <code>examples/build</code> folder, <code>externref.wat</code> isn't stored there</p>
</blockquote>



<a name="289156099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/289156099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#289156099">(Jul 11 2022 at 07:53)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1180079264">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Still running out of storage? I... I don't even know, I'm going to revert the tests and test from there</p>
</blockquote>



<a name="290066446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290066446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290066446">(Jul 19 2022 at 08:12)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1188739698">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Could someone (if this is possible) manually restart the CI and/or give any tips on how to fix this final issue? It has to do with <code>CI / Test (windows-2019)</code> in particular taking too long or hanging.</p>
</blockquote>



<a name="290067009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290067009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290067009">(Jul 19 2022 at 08:19)</a>:</h4>
<p>TheGreatRambler edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1188739698">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Could someone (if this is possible) manually restart the CI and/or give any tips on how to fix this final issue? It has to do with <code>CI / Test (windows-2019)</code> in particular hanging on linking.</p>
</blockquote>



<a name="290131228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290131228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290131228">(Jul 19 2022 at 17:08)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1189344239">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>I don't know CMake on Windows really at all, but that looks like some form of a legitimate loop of some kind.</p>
</blockquote>



<a name="290394790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290394790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290394790">(Jul 21 2022 at 15:56)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1191661659">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>A little over 2 minutes of that difference was the <code>free-disk-space</code> action, which makes sense to me. But the biggest difference was an extra 4+ minutes in <code>run-tests.sh</code>, which I really think shouldn't have been affected by this PR at all. Other steps were also a little longer, so I think that particular CI job runner was just more heavily loaded.</p>
<p>That said, I would also like to know if removing the <code>free-disk-space</code> action passes CI now. I didn't get a look at the failure mode before you added it so I'm not sure what to expect. But given that the Windows tests seem to have magically fixed themselves (right? you didn't change anything that should explain that?) I'm wondering if this PR just got extraordinarily unlucky with its CI runs.</p>
</blockquote>



<a name="290425086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290425086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290425086">(Jul 21 2022 at 19:48)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1191870122">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p><code>free-disk-space</code> was an unneccesary action I pulled in when I kept running out of space during tests. Turns out it was because I was pulling in the full rust toolchain rather than the minimal one, so it should be unneccesary.</p>
</blockquote>



<a name="290425320"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290425320" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290425320">(Jul 21 2022 at 19:50)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1191871961">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>As for the Windows builds passing this time, it could be dumb luck but I actually reduced the warnings msvc reports to <code>/W3</code> (the default) just in case, it may have helped by reducing stdout.</p>
</blockquote>



<a name="290450253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290450253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290450253">(Jul 22 2022 at 00:11)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192047970">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>The new problem seems to be that the examples which rely on wasm blobs can't find them when run under CTest. The macos build is the one that failed but I think it just got to that point before any of the other job runners did, since I don't see any reason why it should be Mac-specific. Do you need to change how you set the current working directory for each test, perhaps?</p>
</blockquote>



<a name="290451956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290451956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290451956">(Jul 22 2022 at 00:40)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192063205">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>It has to do with the order in which I build the tests, since wasm modules are built for some c tests to run. Now the new problem is msbuild not taking the ctest arguments, and it sort of needs to accept them, without <code>--output-on-failure</code> you can't diagnose issues.</p>
</blockquote>



<a name="290458297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290458297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290458297">(Jul 22 2022 at 02:46)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192123625">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Of COURSE it got stuck again</p>
</blockquote>



<a name="290458310"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290458310" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290458310">(Jul 22 2022 at 02:47)</a>:</h4>
<p>TheGreatRambler edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192123625">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Of COURSE it got stuck again, this PR is taking so much of my time lol</p>
</blockquote>



<a name="290459229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290459229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290459229">(Jul 22 2022 at 03:05)</a>:</h4>
<p>TheGreatRambler edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192123625">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Of COURSE it got stuck again, this PR is taking so much of my time lol (I wish Github let me see the command line output so I can debug better)</p>
</blockquote>



<a name="290472333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290472333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290472333">(Jul 22 2022 at 07:05)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192254525">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>I've cancelled and restarted the windows-2019 job; 4+ hours in, it clearly wasn't going to work. I wish I had any good guesses about what's going on; I'd assumed there might be something weird in the run-examples crate, but that's gone now and we're still seeing this hang in CI. You have my sympathy for how painful this has been!</p>
<p>I don't know much about cmake but I see there's a <a href="https://cmake.org/cmake/help/latest/prop_test/TIMEOUT.html">TIMEOUT property</a> that you can set on a test. Maybe you can set a timeout on all the tests and at least get it to fail faster? I think 30 seconds ought to be more than enough time when things are working okay.</p>
<p>Ooh, I see you have a new patch on the branch while I was typing this. I'll be curious to see if that fixes things.</p>
</blockquote>



<a name="290473298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290473298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290473298">(Jul 22 2022 at 07:20)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192265212">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Hey, windows-2019 got past the point where it had been stuck! Although I see my suggestion of a 30-second timeout would have been too short for <code>epochs-rust</code> and <code>tokio-rust</code>, which took closer to 120 seconds on Windows and 70 seconds on Ubuntu. So I guess 300 seconds might be a better choice, if you should decide to set timeouts.</p>
</blockquote>



<a name="290477106"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290477106" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290477106">(Jul 22 2022 at 08:11)</a>:</h4>
<p>TheGreatRambler <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192304810">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>It was getting stuck because both <code>memory.c</code> and <code>multimemory.c</code> read 8 bytes into a variable on the stack rather than 4, which I guess the old testing didn't catch. Cmake catches exceptions and return codes, so it just got silently stuck. Ideally everything is fine now</p>
</blockquote>



<a name="290541585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234369%20Add%20cmake%20compatibility%20to%20c-api/near/290541585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234369.20Add.20cmake.20compatibility.20to.20c-api.html#290541585">(Jul 22 2022 at 17:21)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4369#issuecomment-1192785728">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4369">issue #4369</a>:</p>
<blockquote>
<p>Alex and I are dismayed that our CI didn't catch that bug sooner; apparently we should start using <code>-Werror</code> in CI or something. That's not a problem for this PR though, which I'm merging now. Thank you for all your effort getting this through!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>