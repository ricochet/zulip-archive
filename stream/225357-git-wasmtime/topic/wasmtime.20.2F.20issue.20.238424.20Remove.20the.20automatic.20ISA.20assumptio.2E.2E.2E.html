<html>
<head><meta charset="utf-8"><title>wasmtime / issue #8424 Remove the automatic ISA assumptio... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238424.20Remove.20the.20automatic.20ISA.20assumptio.2E.2E.2E.html">wasmtime / issue #8424 Remove the automatic ISA assumptio...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="434609456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238424%20Remove%20the%20automatic%20ISA%20assumptio.../near/434609456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238424.20Remove.20the.20automatic.20ISA.20assumptio.2E.2E.2E.html#434609456">(Apr 21 2024 at 18:31)</a>:</h4>
<p>lambdadeltakay opened <a href="https://github.com/bytecodealliance/wasmtime/issues/8424">issue #8424</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Allow for specifiying no ISA targets and not failing to compile in the <a href="http://build.rs">build.rs</a> when no ISA targets are specified on a unsupported platform for code generation on cranelift-codegen</p>
<h4>Benefit</h4>
<p>This would allow for using cranelift-codegen related utilities on platforms like wasm or powerpc.</p>
<h4>Implementation</h4>
<p>This would require just removing the code in the <a href="http://build.rs">build.rs</a> that assumes the ISA target for generation when no ISA targets are specified</p>
<h4>Alternatives</h4>
<p>A possible alternative would be a feature flag that would specify that no ISA targets should be built in</p>
</blockquote>



<a name="434609583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238424%20Remove%20the%20automatic%20ISA%20assumptio.../near/434609583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238424.20Remove.20the.20automatic.20ISA.20assumptio.2E.2E.2E.html#434609583">(Apr 21 2024 at 18:33)</a>:</h4>
<p>lambdadeltakay edited <a href="https://github.com/bytecodealliance/wasmtime/issues/8424">issue #8424</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Allow for specifiying no ISA targets and not failing to compile in the <a href="http://build.rs">build.rs</a> when no ISA targets are specified on a unsupported platform for code generation on cranelift-codegen</p>
<h4>Benefit</h4>
<p>This would allow for using cranelift related utilities on platforms like wasm or powerpc.</p>
<h4>Implementation</h4>
<p>This would require just removing the code in the <a href="http://build.rs">build.rs</a> that assumes the ISA target for generation when no ISA targets are specified</p>
<h4>Alternatives</h4>
<p>A possible alternative would be a feature flag that would specify that no ISA targets should be built in</p>
</blockquote>



<a name="434611658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238424%20Remove%20the%20automatic%20ISA%20assumptio.../near/434611658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238424.20Remove.20the.20automatic.20ISA.20assumptio.2E.2E.2E.html#434611658">(Apr 21 2024 at 19:04)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/8424#issuecomment-2068167906">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8424">issue #8424</a>:</p>
<blockquote>
<p>I believe disabling the host-arch feature of cranelift-codegen will already do this.</p>
</blockquote>



<a name="434612058"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238424%20Remove%20the%20automatic%20ISA%20assumptio.../near/434612058" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238424.20Remove.20the.20automatic.20ISA.20assumptio.2E.2E.2E.html#434612058">(Apr 21 2024 at 19:10)</a>:</h4>
<p>lambdadeltakay <a href="https://github.com/bytecodealliance/wasmtime/issues/8424#issuecomment-2068169387">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8424">issue #8424</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/1fa8de140fce161ed5d77cf939558de79d3956c1/cranelift/codegen/build.rs#L42-L51">https://github.com/bytecodealliance/wasmtime/blob/1fa8de140fce161ed5d77cf939558de79d3956c1/cranelift/codegen/build.rs#L42-L51</a></p>
<p>From my experiments and these lines of code it doesn't seem to do this, instead I have to manually set at least one ISA that doesn't relate to the target to avoid a compile error</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>