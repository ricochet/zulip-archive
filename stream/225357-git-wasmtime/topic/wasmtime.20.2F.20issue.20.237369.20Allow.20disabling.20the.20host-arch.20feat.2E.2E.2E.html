<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7369 Allow disabling the host-arch feat... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237369.20Allow.20disabling.20the.20host-arch.20feat.2E.2E.2E.html">wasmtime / issue #7369 Allow disabling the host-arch feat...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="398548341"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237369%20Allow%20disabling%20the%20host-arch%20feat.../near/398548341" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237369.20Allow.20disabling.20the.20host-arch.20feat.2E.2E.2E.html#398548341">(Oct 25 2023 at 19:26)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/7369#issuecomment-1779915869">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7369">issue #7369</a>:</p>
<blockquote>
<p>Without the <code>unwind</code> feature enabled I get:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0433</span><span class="p">]</span>: <span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">resolve</span>: <span class="nc">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="err">`</span><span class="n">systemv</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">unwind</span><span class="err">`</span>
<span class="w">    </span><span class="o">-</span>-&gt; <span class="nc">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">vcode</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">1181</span>:<span class="mi">41</span>
<span class="w">     </span><span class="o">|</span>
<span class="mi">1181</span><span class="w"> </span><span class="o">|</span><span class="w">                     </span><span class="k">crate</span>::<span class="n">isa</span>::<span class="n">unwind</span>::<span class="n">systemv</span>::<span class="n">caller_sp_to_cfa_offset</span><span class="p">();</span>
<span class="w">     </span><span class="o">|</span><span class="w">                                         </span><span class="o">^^^^^^^</span><span class="w"> </span><span class="n">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">find</span><span class="w"> </span><span class="err">`</span><span class="n">systemv</span><span class="err">`</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">`</span><span class="n">unwind</span><span class="err">`</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="398548479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237369%20Allow%20disabling%20the%20host-arch%20feat.../near/398548479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237369.20Allow.20disabling.20the.20host-arch.20feat.2E.2E.2E.html#398548479">(Oct 25 2023 at 19:27)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/7369#issuecomment-1779917948">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7369">issue #7369</a>:</p>
<blockquote>
<p>It would be great if this could get backported too. Without this rust's CI fails when trying to build cg_clif for distribution with rustup.</p>
</blockquote>



<a name="398548991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237369%20Allow%20disabling%20the%20host-arch%20feat.../near/398548991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237369.20Allow.20disabling.20the.20host-arch.20feat.2E.2E.2E.html#398548991">(Oct 25 2023 at 19:31)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/7369#issuecomment-1779923790">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7369">issue #7369</a>:</p>
<blockquote>
<p>Thanks! I'm a little surprised that the dependency from <code>wasmtime-cranelift</code> on the <code>cranelift</code> crate, without <code>features = ['default']</code>, still works. I think it's because without any enabled ISAs it still builds the host ISA? Mind adding it there though to be safe?</p>
<p>Otherwise yeah looks like disabling the <code>unwind</code> feature and not being able to compile is indeed a Cranelift bug. If you'd like feel free to open an issue (or a subsequent PR) to fix that. Enabling it here by default is definitely ok.</p>
<p>Also a point release is fine by me, and there's one <a href="https://github.com/bytecodealliance/wasmtime/pull/7368">slated tomorrow</a> for <a href="https://github.com/bytecodealliance/wasmtime/pull/7362">https://github.com/bytecodealliance/wasmtime/pull/7362</a> as well so good timing!</p>
<p>If you wouldn't mind preparing the PR for the backport that'd be appreciated!</p>
</blockquote>



<a name="398549491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237369%20Allow%20disabling%20the%20host-arch%20feat.../near/398549491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237369.20Allow.20disabling.20the.20host-arch.20feat.2E.2E.2E.html#398549491">(Oct 25 2023 at 19:35)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/7369#issuecomment-1779930092">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7369">issue #7369</a>:</p>
<blockquote>
<blockquote>
<p>Mind adding it there though to be safe?</p>
</blockquote>
<p>Done</p>
<blockquote>
<p>If you'd like feel free to open an issue (or a subsequent PR) to fix that.</p>
</blockquote>
<p>Sure</p>
<blockquote>
<p>If you wouldn't mind preparing the PR for the backport that'd be appreciated!</p>
</blockquote>
<p>Will do.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>