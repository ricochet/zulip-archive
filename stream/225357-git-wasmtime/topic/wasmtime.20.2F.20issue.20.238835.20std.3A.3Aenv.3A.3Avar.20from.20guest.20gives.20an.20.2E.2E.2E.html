<html>
<head><meta charset="utf-8"><title>wasmtime / issue #8835 std::env::var from guest gives an ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html">wasmtime / issue #8835 std::env::var from guest gives an ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="445431272"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445431272" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445431272">(Jun 18 2024 at 18:27)</a>:</h4>
<p><a href="https://github.com/pimeys">pimeys</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">Issue #8835</a>.</p>



<a name="445431275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445431275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445431275">(Jun 18 2024 at 18:27)</a>:</h4>
<p>pimeys opened <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>So, this is pretty weird, and kind of hard to reproduce... But I was able to get my wasm component to panic with a simple call in the guest:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="n">Guest</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">on_gateway_request</span><span class="p">(</span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="nc">Headers</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">:</span><span class="w"> </span><span class="nc">GatewayRequest</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">dbg!</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var</span><span class="p">(</span><span class="s">"TEST"</span><span class="p">));</span>

<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The host has wasm component model enabled, async support is on and so is fuel consumption. Enabled WASI calls:</p>
<ul>
<li>inherit_env</li>
<li>inherit_stdout</li>
<li>inherit_stderr</li>
</ul>
<p>In addition, </p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Fetch the code from this PR <a href="https://github.com/grafbase/grafbase/pull/1781">https://github.com/grafbase/grafbase/pull/1781</a></li>
<li>cd gateway/crates/wasi-component-loader</li>
<li>cargo test</li>
</ul>
<h3>Expected Results</h3>
<p>Test would fail normally or at least not panic in guest.</p>
<h3>Actual Results</h3>
<p>The guest panics on <code>std::env::var</code> call:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">tests</span><span class="p">::</span><span class="n">simple_no_io</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">tests</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span>
<span class="nc">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">Internal</span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e3cf8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">macros</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">h7cf3bf67e3d70272</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e28c9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">BumpArena</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">he1fbf182c547cac8</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e246e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">cabi_import_realloc</span>
<span class="w">    </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e6374</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">shim</span><span class="o">!</span><span class="n">indirect</span><span class="o">-</span><span class="n">wasi</span><span class="p">:</span><span class="nc">cli</span><span class="o">/</span><span class="n">environment</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">get</span><span class="o">-</span><span class="n">environment</span>
<span class="w">    </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e2f80</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">State</span><span class="p">::</span><span class="n">get_environment</span><span class="p">::</span><span class="n">h3dc87564e4fc1678</span>
<span class="w">    </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e318a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">environ_sizes_get</span>
<span class="w">    </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e639c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">shim</span><span class="o">!</span><span class="n">adapt</span><span class="o">-</span><span class="n">wasi_snapshot_preview1</span><span class="o">-</span><span class="n">environ_sizes_get</span>
<span class="w">    </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf881</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasi_environ_sizes_get</span>
<span class="w">    </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf7cb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasilibc_initialize_environ</span>
<span class="w">    </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf79f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasilibc_ensure_environ</span>
<span class="w">   </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf956</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">getenv</span>
<span class="w">   </span><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="mh">0xb34c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasi</span><span class="p">::</span><span class="n">os</span><span class="p">::</span><span class="n">getenv</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h33bc44affa161e82</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">wasi</span><span class="o">/</span><span class="n">os</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">232</span><span class="p">:</span><span class="mi">26</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">common</span><span class="p">::</span><span class="n">small_c_string</span><span class="p">::</span><span class="n">run_with_cstr_stack</span><span class="p">::</span><span class="n">h23ef8d478e26889e</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">small_c_string</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">18</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">common</span><span class="p">::</span><span class="n">small_c_string</span><span class="p">::</span><span class="n">run_with_cstr</span><span class="p">::</span><span class="n">hd4d5aa4218b3b0e3</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">small_c_string</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">18</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasi</span><span class="p">::</span><span class="n">os</span><span class="p">::</span><span class="n">getenv</span><span class="p">::</span><span class="n">h4705807cae3a5746</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">wasi</span><span class="o">/</span><span class="n">os</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">230</span><span class="p">:</span><span class="mi">5</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">_var_os</span><span class="p">::</span><span class="n">h2ae2b5d04ee9b40f</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">271</span><span class="p">:</span><span class="mi">5</span>
<span class="w">   </span><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="mh">0xb4b0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">::</span><span class="n">hada13acc4a42ce7a</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">267</span><span class="p">:</span><span class="mi">5</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">_var</span><span class="p">::</span><span class="n">h2b1d5a2954263ac1</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">234</span><span class="p">:</span><span class="mi">11</span>
<span class="w">   </span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="mh">0x8f83</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var</span><span class="p">::</span><span class="n">hafe1dcfdc420c7d8</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">230</span><span class="p">:</span><span class="mi">5</span>
<span class="w">   </span><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="mh">0x5efb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">simple</span><span class="p">::</span><span class="n">Component</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">simple</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">Guest</span><span class="o">&gt;</span><span class="p">::</span><span class="n">on_gateway_request</span><span class="p">::</span><span class="n">he08741f1ce21dd99</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">26</span>
<span class="w">   </span><span class="mi">15</span><span class="p">:</span><span class="w"> </span><span class="mh">0x6fd0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">_export_on_gateway_request_cabi</span><span class="p">::</span><span class="n">h09965d60ff594d81</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">19</span>
<span class="w">   </span><span class="mi">16</span><span class="p">:</span><span class="w"> </span><span class="mh">0x620b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">gateway</span><span class="o">-</span><span class="n">request</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">68</span><span class="p">:</span><span class="mi">76</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="nc">cannot</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">instance</span>

<span class="n">Stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">::</span><span class="n">msg</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">anyhow</span><span class="o">-</span><span class="mf">1.0.86</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">error</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">83</span><span class="p">:</span><span class="mi">36</span>
<span class="w">   </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">__private</span><span class="p">::</span><span class="n">format_err</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">anyhow</span><span class="o">-</span><span class="mf">1.0.86</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">689</span><span class="p">:</span><span class="mi">13</span>
<span class="w">   </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">call_host</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">182</span><span class="p">:</span><span class="mi">9</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">HostFunc</span><span class="p">::</span><span class="n">entrypoint</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">60</span><span class="p">:</span><span class="mi">17</span>
<span class="w">   </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">unwind_safe</span><span class="p">::</span><span class="n">AssertUnwindSafe</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">ops</span><span class="p">::</span><span class="n">function</span><span class="p">::</span><span class="nb">FnOnce</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;&gt;</span><span class="p">::</span><span class="n">call_once</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panic</span><span class="o">/</span><span class="n">unwind_safe</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">272</span><span class="p">:</span><span class="mi">9</span>
<span class="w">   </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span><span class="p">::</span><span class="n">do_call</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">552</span><span class="p">:</span><span class="mi">40</span>
<span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="nc">__rust_try</span>
<span class="w">   </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">516</span><span class="p">:</span><span class="mi">19</span>
<span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">catch_unwind</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panic</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">146</span><span class="p">:</span><span class="mi">14</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_longjmp</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">123</span><span class="p">:</span><span class="mi">15</span>
<span class="w">  </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">handle_result</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">294</span><span class="p">:</span><span class="mi">11</span>
<span class="w">  </span><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">HostFunc</span><span class="p">::</span><span class="n">entrypoint</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">15</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">16</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">17</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span><span class="n">A2</span><span class="p">,</span><span class="n">A3</span><span class="p">,</span><span class="n">A4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">WasmParams</span><span class="o">&gt;</span><span class="p">::</span><span class="n">invoke</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">851</span><span class="p">:</span><span class="mi">21</span>
<span class="w">  </span><span class="mi">18</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">HostAbi</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1898</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">19</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span><span class="n">A2</span><span class="p">,</span><span class="n">A3</span><span class="p">,</span><span class="n">A4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">WasmParams</span><span class="o">&gt;</span><span class="p">::</span><span class="n">invoke</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">850</span><span class="p">:</span><span class="mi">17</span>
<span class="w">  </span><span class="mi">20</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">Params</span><span class="p">,</span><span class="n">Results</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">209</span><span class="p">:</span><span class="mi">17</span>
<span class="w">  </span><span class="mi">21</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">call_closure</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">267</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">22</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_setjmp_21_0_1</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">66</span><span class="p">:</span><span class="mi">3</span>
<span class="w">  </span><span class="mi">23</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">244</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">24</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="o">&gt;</span><span class="p">::</span><span class="n">with</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">387</span><span class="p">:</span><span class="mi">44</span>
<span class="w">  </span><span class="mi">25</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">tls</span><span class="p">::</span><span class="n">set</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">759</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="o">&gt;</span><span class="p">::</span><span class="n">with</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">387</span><span class="p">:</span><span class="mi">19</span>
<span class="w">  </span><span class="mi">27</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">242</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">28</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">invoke_wasm_and_catch_traps</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1567</span><span class="p">:</span><span class="mi">22</span>
<span class="w">  </span><span class="mi">29</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">Params</span><span class="p">,</span><span class="n">Results</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call_raw</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">205</span><span class="p">:</span><span class="mi">22</span>
<span class="w">  </span><span class="mi">30</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">options</span><span class="p">::</span><span class="n">Options</span><span class="p">::</span><span class="n">realloc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">options</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">107</span><span class="p">:</span><span class="mi">31</span>
<span class="w">  </span><span class="mi">31</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">options</span><span class="p">::</span><span class="n">LowerContext</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">realloc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">options</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">252</span><span class="p">:</span><span class="mi">9</span>
<span class="w">  </span><span class="mi">32</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">lower_string</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1148</span><span class="p">:</span><span class="mi">23</span>
<span class="w">  </span><span class="mi">33</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">str</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">Lower</span><span class="o">&gt;</span><span class="p">::</span><span class="n">store</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1112</span><span class="p">:</span><span class="mi">26</span>
<span class="w">  </span><span class="mi">34</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">alloc</span><span class="p">::</span><span class="n">string</span><span class="p">::</span><span class="nb">String</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">Lower</span><span class="o">&gt;</span><span class="p">::</span><span class="n">store</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span>
<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="445431544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445431544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445431544">(Jun 18 2024 at 18:29)</a>:</h4>
<p>pimeys <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2176716924">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>To be fair, I have a separate test project that _does not call_ the guest from rust tests. I tried to load the env var in there inside the guest, and it worked as expected.</p>
</blockquote>



<a name="445439885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445439885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445439885">(Jun 18 2024 at 19:10)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2176781882">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>If I understand it correctly, the issue is here:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e3cf8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">macros</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">h7cf3bf67e3d70272</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e28c9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">BumpArena</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">he1fbf182c547cac8</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e246e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">cabi_import_realloc</span>
<span class="w">    </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e6374</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">shim</span><span class="o">!</span><span class="n">indirect</span><span class="o">-</span><span class="n">wasi</span><span class="p">:</span><span class="nc">cli</span><span class="o">/</span><span class="n">environment</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">get</span><span class="o">-</span><span class="n">environment</span>
<span class="w">    </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e2f80</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">State</span><span class="p">::</span><span class="n">get_environment</span><span class="p">::</span><span class="n">h3dc87564e4fc1678</span>
</code></pre></div>
<p>To be precise the adapter for <code>indirect-wasi:cli/environment@0.2.0-get-environment</code> calls back into your wasm component to allocate memory. While this happens it is not allowed to call any imports, but <code>wasi_snapshot_preview1::macros::print</code> is called here. As for why that happens, it is likely that <code>BumpArena::alloc</code> ran out of memory and tried to panic. If so this should have been fixed by <a href="https://github.com/bytecodealliance/wasmtime/pull/8594">https://github.com/bytecodealliance/wasmtime/pull/8594</a>. You will need to update cargo-component to get this fix though as the bug is inside the wasip1 to wasip2 adapter which cargo-component includes in the wasm component itself.</p>
</blockquote>



<a name="445454660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445454660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445454660">(Jun 18 2024 at 20:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2176916300">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>I believe that @bjorn3 is correct (thanks!), and this is definitely a frustration I've had in the past with debugging the adapter too.</p>
<p>I've confirmed that by default if the environment variable block is too big then cargo-component-produced components fail with this error (as the allocation is too big), but if I use <code>package.metadata.component.adapter</code> to point to the latest version of the adapter it works.</p>
<p>Given that I think that this should be fixable by updating the adapter you're using. Would you be able to test that out @pimeys?</p>
</blockquote>



<a name="445466165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445466165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445466165">(Jun 18 2024 at 21:37)</a>:</h4>
<p>pimeys <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2177075401">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>Sure, my work on this continues tomorrow. Could you point me to instructions on how exactly I should do this? Eventually our users will also need to build these modules, so we might need something simpler for them to manage.</p>
<p>Maybe if we let the users configure exactly the variables they need, they could go around the issues until the fix lands into stable.</p>
</blockquote>



<a name="445470851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445470851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445470851">(Jun 18 2024 at 22:12)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2177165932">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>Sure yeah, this was a relatively recent bug fix so you'll want to grab the adapter from <a href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/wasi-preview1-component-adapter/provider/artefacts">here</a>. For your use case you'll want the <code>*.reactor.wasm</code> one (<a href="https://github.com/bytecodealliance/wasmtime/raw/main/crates/wasi-preview1-component-adapter/provider/artefacts/wasi_snapshot_preview1.reactor.wasm">link</a>). Next you'll add this to the <code>Cargo.toml</code> in the project that's built with <code>cargo component</code>:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[package.metadata.component]</span>
<span class="n">adapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"path/to/wasi_snapshot_preview1.reactor.wasm"</span>
</code></pre></div>
<p>Then <code>cargo component build</code> will pick up that adapter and use it which should have the fix. The built-in one to cargo-component can also be updated soon too.</p>
</blockquote>



<a name="445529632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445529632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445529632">(Jun 19 2024 at 08:00)</a>:</h4>
<p>pimeys <a href="https://github.com/bytecodealliance/wasmtime/issues/8835#issuecomment-2178020425">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<p>Thanks @alexcrichton, this solved my test issues.</p>
</blockquote>



<a name="445676245"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%238835%20std%3A%3Aenv%3A%3Avar%20from%20guest%20gives%20an%20.../near/445676245" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.238835.20std.3A.3Aenv.3A.3Avar.20from.20guest.20gives.20an.20.2E.2E.2E.html#445676245">(Jun 19 2024 at 18:37)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/8835">issue #8835</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>So, this is pretty weird, and kind of hard to reproduce... But I was able to get my wasm component to panic with a simple call in the guest:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="n">Guest</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Component</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">on_gateway_request</span><span class="p">(</span><span class="n">headers</span><span class="p">:</span><span class="w"> </span><span class="nc">Headers</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">:</span><span class="w"> </span><span class="nc">GatewayRequest</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">ErrorResponse</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">dbg!</span><span class="p">(</span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var</span><span class="p">(</span><span class="s">"TEST"</span><span class="p">));</span>

<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The host has wasm component model enabled, async support is on and so is fuel consumption. Enabled WASI calls:</p>
<ul>
<li>inherit_env</li>
<li>inherit_stdout</li>
<li>inherit_stderr</li>
</ul>
<p>In addition, </p>
<h3>Steps to Reproduce</h3>
<ul>
<li>Fetch the code from this PR <a href="https://github.com/grafbase/grafbase/pull/1781">https://github.com/grafbase/grafbase/pull/1781</a></li>
<li>cd gateway/crates/wasi-component-loader</li>
<li>cargo test</li>
</ul>
<h3>Expected Results</h3>
<p>Test would fail normally or at least not panic in guest.</p>
<h3>Actual Results</h3>
<p>The guest panics on <code>std::env::var</code> call:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">tests</span><span class="p">::</span><span class="n">simple_no_io</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">tests</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">28</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span>
<span class="nc">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">Internal</span><span class="p">(</span><span class="n">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e3cf8</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">macros</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">h7cf3bf67e3d70272</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e28c9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">BumpArena</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">he1fbf182c547cac8</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e246e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">cabi_import_realloc</span>
<span class="w">    </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e6374</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">shim</span><span class="o">!</span><span class="n">indirect</span><span class="o">-</span><span class="n">wasi</span><span class="p">:</span><span class="nc">cli</span><span class="o">/</span><span class="n">environment</span><span class="o">@</span><span class="mf">0.2.0</span><span class="o">-</span><span class="n">get</span><span class="o">-</span><span class="n">environment</span>
<span class="w">    </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e2f80</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">wasi_snapshot_preview1</span><span class="p">::</span><span class="n">State</span><span class="p">::</span><span class="n">get_environment</span><span class="p">::</span><span class="n">h3dc87564e4fc1678</span>
<span class="w">    </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e318a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">adapter</span><span class="p">:</span><span class="nc">wasi_snapshot_preview1</span><span class="o">!</span><span class="n">environ_sizes_get</span>
<span class="w">    </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="mh">0x1e639c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wit</span><span class="o">-</span><span class="n">component</span><span class="p">:</span><span class="nc">shim</span><span class="o">!</span><span class="n">adapt</span><span class="o">-</span><span class="n">wasi_snapshot_preview1</span><span class="o">-</span><span class="n">environ_sizes_get</span>
<span class="w">    </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf881</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasi_environ_sizes_get</span>
<span class="w">    </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf7cb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasilibc_initialize_environ</span>
<span class="w">    </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf79f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__wasilibc_ensure_environ</span>
<span class="w">   </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="mh">0xf956</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">getenv</span>
<span class="w">   </span><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="mh">0xb34c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasi</span><span class="p">::</span><span class="n">os</span><span class="p">::</span><span class="n">getenv</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h33bc44affa161e82</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">wasi</span><span class="o">/</span><span class="n">os</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">232</span><span class="p">:</span><span class="mi">26</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">common</span><span class="p">::</span><span class="n">small_c_string</span><span class="p">::</span><span class="n">run_with_cstr_stack</span><span class="p">::</span><span class="n">h23ef8d478e26889e</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">small_c_string</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">49</span><span class="p">:</span><span class="mi">18</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">common</span><span class="p">::</span><span class="n">small_c_string</span><span class="p">::</span><span class="n">run_with_cstr</span><span class="p">::</span><span class="n">hd4d5aa4218b3b0e3</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">common</span><span class="o">/</span><span class="n">small_c_string</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mi">18</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasi</span><span class="p">::</span><span class="n">os</span><span class="p">::</span><span class="n">getenv</span><span class="p">::</span><span class="n">h4705807cae3a5746</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">sys</span><span class="o">/</span><span class="n">pal</span><span class="o">/</span><span class="n">wasi</span><span class="o">/</span><span class="n">os</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">230</span><span class="p">:</span><span class="mi">5</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">_var_os</span><span class="p">::</span><span class="n">h2ae2b5d04ee9b40f</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">271</span><span class="p">:</span><span class="mi">5</span>
<span class="w">   </span><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="mh">0xb4b0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">::</span><span class="n">hada13acc4a42ce7a</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">267</span><span class="p">:</span><span class="mi">5</span><span class="w">              </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">_var</span><span class="p">::</span><span class="n">h2b1d5a2954263ac1</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">234</span><span class="p">:</span><span class="mi">11</span>
<span class="w">   </span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="mh">0x8f83</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var</span><span class="p">::</span><span class="n">hafe1dcfdc420c7d8</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">env</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">230</span><span class="p">:</span><span class="mi">5</span>
<span class="w">   </span><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="mh">0x5efb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">simple</span><span class="p">::</span><span class="n">Component</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">simple</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">Guest</span><span class="o">&gt;</span><span class="p">::</span><span class="n">on_gateway_request</span><span class="p">::</span><span class="n">he08741f1ce21dd99</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">18</span><span class="p">:</span><span class="mi">26</span>
<span class="w">   </span><span class="mi">15</span><span class="p">:</span><span class="w"> </span><span class="mh">0x6fd0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">simple</span><span class="p">::</span><span class="n">bindings</span><span class="p">::</span><span class="n">_export_on_gateway_request_cabi</span><span class="p">::</span><span class="n">h09965d60ff594d81</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">19</span>
<span class="w">   </span><span class="mi">16</span><span class="p">:</span><span class="w"> </span><span class="mh">0x620b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">on</span><span class="o">-</span><span class="n">gateway</span><span class="o">-</span><span class="n">request</span>
<span class="w">                    </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">grafbase</span><span class="o">/</span><span class="n">gateway</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">loader</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">simple</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">68</span><span class="p">:</span><span class="mi">76</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="nc">cannot</span><span class="w"> </span><span class="n">leave</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">instance</span>

<span class="n">Stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">::</span><span class="n">msg</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">anyhow</span><span class="o">-</span><span class="mf">1.0.86</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">error</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">83</span><span class="p">:</span><span class="mi">36</span>
<span class="w">   </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">__private</span><span class="p">::</span><span class="n">format_err</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">anyhow</span><span class="o">-</span><span class="mf">1.0.86</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">689</span><span class="p">:</span><span class="mi">13</span>
<span class="w">   </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">call_host</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">182</span><span class="p">:</span><span class="mi">9</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">HostFunc</span><span class="p">::</span><span class="n">entrypoint</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">60</span><span class="p">:</span><span class="mi">17</span>
<span class="w">   </span><span class="mi">4</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">unwind_safe</span><span class="p">::</span><span class="n">AssertUnwindSafe</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">ops</span><span class="p">::</span><span class="n">function</span><span class="p">::</span><span class="nb">FnOnce</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;&gt;</span><span class="p">::</span><span class="n">call_once</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">core</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panic</span><span class="o">/</span><span class="n">unwind_safe</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">272</span><span class="p">:</span><span class="mi">9</span>
<span class="w">   </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span><span class="p">::</span><span class="n">do_call</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">552</span><span class="p">:</span><span class="mi">40</span>
<span class="w">   </span><span class="mi">6</span><span class="p">:</span><span class="w"> </span><span class="nc">__rust_try</span>
<span class="w">   </span><span class="mi">7</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="kr">try</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panicking</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">516</span><span class="p">:</span><span class="mi">19</span>
<span class="w">   </span><span class="mi">8</span><span class="p">:</span><span class="w"> </span><span class="nc">std</span><span class="p">::</span><span class="n">panic</span><span class="p">::</span><span class="n">catch_unwind</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">rustc</span><span class="o">/</span><span class="mi">9</span><span class="n">b00956e56009bab2aa15d7bff10916599e3d6d6</span><span class="o">/</span><span class="n">library</span><span class="o">/</span><span class="n">std</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">panic</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">146</span><span class="p">:</span><span class="mi">14</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_longjmp</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">123</span><span class="p">:</span><span class="mi">15</span>
<span class="w">  </span><span class="mi">10</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">handle_result</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">294</span><span class="p">:</span><span class="mi">11</span>
<span class="w">  </span><span class="mi">11</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">host</span><span class="p">::</span><span class="n">HostFunc</span><span class="p">::</span><span class="n">entrypoint</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">host</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">59</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">12</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">13</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">14</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">15</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">16</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="w">  </span><span class="mi">17</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span><span class="n">A2</span><span class="p">,</span><span class="n">A3</span><span class="p">,</span><span class="n">A4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">WasmParams</span><span class="o">&gt;</span><span class="p">::</span><span class="n">invoke</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">851</span><span class="p">:</span><span class="mi">21</span>
<span class="w">  </span><span class="mi">18</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">HostAbi</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1898</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">19</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span><span class="n">A2</span><span class="p">,</span><span class="n">A3</span><span class="p">,</span><span class="n">A4</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">WasmParams</span><span class="o">&gt;</span><span class="p">::</span><span class="n">invoke</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">850</span><span class="p">:</span><span class="mi">17</span>
<span class="w">  </span><span class="mi">20</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">Params</span><span class="p">,</span><span class="n">Results</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call_raw</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">209</span><span class="p">:</span><span class="mi">17</span>
<span class="w">  </span><span class="mi">21</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::</span><span class="n">call_closure</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">267</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">22</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime_setjmp_21_0_1</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">66</span><span class="p">:</span><span class="mi">3</span>
<span class="w">  </span><span class="mi">23</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">244</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">24</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="o">&gt;</span><span class="p">::</span><span class="n">with</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">387</span><span class="p">:</span><span class="mi">44</span>
<span class="w">  </span><span class="mi">25</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">tls</span><span class="p">::</span><span class="n">set</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">759</span><span class="p">:</span><span class="mi">13</span>
<span class="w">  </span><span class="mi">26</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="o">&gt;</span><span class="p">::</span><span class="n">with</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">387</span><span class="p">:</span><span class="mi">19</span>
<span class="w">  </span><span class="mi">27</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">242</span><span class="p">:</span><span class="mi">18</span>
<span class="w">  </span><span class="mi">28</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">invoke_wasm_and_catch_traps</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1567</span><span class="p">:</span><span class="mi">22</span>
<span class="w">  </span><span class="mi">29</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">TypedFunc</span><span class="o">&lt;</span><span class="n">Params</span><span class="p">,</span><span class="n">Results</span><span class="o">&gt;</span><span class="p">::</span><span class="n">call_raw</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">205</span><span class="p">:</span><span class="mi">22</span>
<span class="w">  </span><span class="mi">30</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">options</span><span class="p">::</span><span class="n">Options</span><span class="p">::</span><span class="n">realloc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">options</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">107</span><span class="p">:</span><span class="mi">31</span>
<span class="w">  </span><span class="mi">31</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">options</span><span class="p">::</span><span class="n">LowerContext</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">realloc</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">options</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">252</span><span class="p">:</span><span class="mi">9</span>
<span class="w">  </span><span class="mi">32</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">lower_string</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1148</span><span class="p">:</span><span class="mi">23</span>
<span class="w">  </span><span class="mi">33</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">str</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">Lower</span><span class="o">&gt;</span><span class="p">::</span><span class="n">store</span>
<span class="w">             </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">pimeys</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="mf">21.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">component</span><span class="o">/</span><span class="n">func</span><span class="o">/</span><span class="n">typed</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1112</span><span class="p">:</span><span class="mi">26</span>
<span class="w">  </span><span class="mi">34</span><span class="p">:</span><span class="w"> </span><span class="o">&lt;</span><span class="n">alloc</span><span class="p">::</span><span class="n">string</span><span class="p">::</span><span class="nb">String</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">func</span><span class="p">::</span><span class="n">typed</span><span class="p">::</span><span class="n">Lower</span><span class="o">&gt;</span><span class="p">::</span><span class="n">store</span>
<span class="w">             </span><span class="n">at</span>
<span class="p">[</span><span class="n">message</span><span class="w"> </span><span class="n">truncated</span><span class="p">]</span>
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>