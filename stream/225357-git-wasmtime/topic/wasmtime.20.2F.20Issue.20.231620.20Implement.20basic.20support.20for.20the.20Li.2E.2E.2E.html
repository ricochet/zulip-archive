<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1620 Implement basic support for the Li... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html">wasmtime / Issue #1620 Implement basic support for the Li...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="195575697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/195575697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#195575697">(Apr 28 2020 at 14:54)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-620658017" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-620658017">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>r=me on the wasmtime bits here, thanks!</p>
</blockquote>



<a name="195609971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/195609971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#195609971">(Apr 28 2020 at 18:53)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-620791983" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-620791983">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr, @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action" title="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="196127713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196127713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196127713">(May 03 2020 at 23:07)</a>:</h4>
<p>stuaxo <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623198266" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623198266">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>This is awesome, could it help Rust compile dos executables ?</p>
<p><a href="https://github.com/Serentty/rusty-dos/" title="https://github.com/Serentty/rusty-dos/">https://github.com/Serentty/rusty-dos/</a></p>
</blockquote>



<a name="196127856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196127856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196127856">(May 03 2020 at 23:11)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623198814" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623198814">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<blockquote>
<p>This is awesome, could it help Rust compile dos executables ?</p>
</blockquote>
<p>Certainly not, this PR is not even remotely related to DOS and I cannot imagine that Cranelift would ever be able to emit real-mode x86 machine code.</p>
</blockquote>



<a name="196169530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196169530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196169530">(May 04 2020 at 11:45)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623415856" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623415856">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>Cranelift could theoretically add <code>data32</code> prefixes everywhere.</p>
</blockquote>



<a name="196171671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196171671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196171671">(May 04 2020 at 12:10)</a>:</h4>
<p>stuaxo <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623426400" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-623426400">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>Oh heh, I meant 32 bit protected mode DOS, but fair enough.</p>
</blockquote>



<a name="196391007"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196391007" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196391007">(May 06 2020 at 02:21)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-624408788" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-624408788">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<blockquote>
<p>I'd give ArgumentPurpose::CalleeSaved a shot here, this is well after register allocation so it's probably free of risk in side effects there. </p>
</blockquote>
<p>I tried that first and I <em>think</em> it either didn't work correctly or generated useless instructions. I can recheck it if you want to be sure, but that was my first implementation.</p>
</blockquote>



<a name="196391556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196391556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196391556">(May 06 2020 at 02:35)</a>:</h4>
<p>iximeow <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-624412054" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-624412054">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>I'd greatly appreciate if you could check again. If it fails in a weird way I'd think Cranelift should be better-behaved. Worst case, it helps motivate an atypical ArgumentPurpose that isn't <code>CalleeSave</code>. Or, we should be clearer about the semantics of <code>ArgumentPurpose</code> and <code>Normal</code> should be acceptable (by being an argument to the function, even if it's not an ABI-mandated one)</p>
</blockquote>



<a name="196859706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196859706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196859706">(May 08 2020 at 05:42)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-625641772" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-625641772">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>@iximeow I stand corrected--there seems to be no observable difference and everything apperas to work just fine with %rsp as CSR.</p>
</blockquote>



<a name="196859708"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196859708" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196859708">(May 08 2020 at 05:42)</a>:</h4>
<p>whitequark edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-625641772" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-625641772">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>@iximeow I stand corrected--there seems to be no observable difference in the generated code and everything appears to work just fine with %rsp as CSR.</p>
</blockquote>



<a name="196982952"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231620%20Implement%20basic%20support%20for%20the%20Li.../near/196982952" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231620.20Implement.20basic.20support.20for.20the.20Li.2E.2E.2E.html#196982952">(May 09 2020 at 09:44)</a>:</h4>
<p>whitequark <a href="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-626138834" title="https://github.com/bytecodealliance/wasmtime/pull/1620#issuecomment-626138834">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/1620" title="https://github.com/bytecodealliance/wasmtime/pull/1620">Issue #1620</a>:</p>
<blockquote>
<p>I've updated the PR to use <code>ArgumentPurpoe::CalleeSave</code>.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>