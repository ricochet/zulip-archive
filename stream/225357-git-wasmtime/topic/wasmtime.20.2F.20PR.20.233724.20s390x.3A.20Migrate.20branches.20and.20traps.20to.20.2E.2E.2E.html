<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3724 s390x: Migrate branches and traps to ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html">wasmtime / PR #3724 s390x: Migrate branches and traps to ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="269293229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269293229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269293229">(Jan 25 2022 at 17:36)</a>:</h4>
<p>uweigand opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3724">PR #3724</a> from <code>s390x-isle-branchtrap</code> to <code>main</code>:</p>
<blockquote>
<p>In order to migrate branches to ISLE, we define a second entry<br>
point <code>lower_branch</code> which gets the list of branch targets as<br>
additional argument.</p>
<p>This requires a small change to <code>lower_common</code>: the <code>isle_lower</code><br>
callback argument is changed from a function pointer to a closure.<br>
This allows passing the extra argument via a closure.</p>
<p>Traps make use of the recently added facility to emit safepoints<br>
from ISLE, but are otherwise straightforward.</p>
<p>@cfallin @fitzgen </p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="269299000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299000">(Jan 25 2022 at 18:13)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862679409">PR review</a>.</p>



<a name="269299001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299001">(Jan 25 2022 at 18:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r791991032">PR review comment</a>:</p>
<blockquote>
<p>I think this should go in the shared prelude, next to <code>value_regs_none</code>.</p>
</blockquote>



<a name="269299002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299002">(Jan 25 2022 at 18:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r791992689">PR review comment</a>:</p>
<blockquote>
<p>And then I would expect this to go into <code>wasmtime/cranelift/codegen/src/machinst/isle.rs</code></p>
</blockquote>



<a name="269299003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299003">(Jan 25 2022 at 18:13)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862679409">PR review</a>.</p>



<a name="269299004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299004">(Jan 25 2022 at 18:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r791993493">PR review comment</a>:</p>
<blockquote>
<p>And this should be in the prelude as well.</p>
</blockquote>



<a name="269299281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299281">(Jan 25 2022 at 18:14)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862687036">PR review</a>.</p>



<a name="269299282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269299282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269299282">(Jan 25 2022 at 18:14)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r791995330">PR review comment</a>:</p>
<blockquote>
<p>I see that <code>emit</code> actually isn't in the prelude, but we do <em>use</em> it from the prelude. So we should probably move <code>emit</code> to the prelude as well, since in practice it has to be the same declaration across all backends anyways. Happy to have that as part of this updated PR or we can do it in another PR.</p>
</blockquote>



<a name="269300053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269300053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269300053">(Jan 25 2022 at 18:19)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862692544">PR review</a>.</p>



<a name="269300054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269300054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269300054">(Jan 25 2022 at 18:19)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r791999850">PR review comment</a>:</p>
<blockquote>
<p>Yes, that's why I didn't put it in the prelude ...</p>
<p>I agree it makes sense to move emit / emit_safepoint there, but then we should also move the implementations to machinst/isle.re, right?</p>
<p>I'd be happy to do that, but I think it would be better to do it in another PR, as it will touch all back-ends.<br>
</p>
</blockquote>



<a name="269303223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269303223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269303223">(Jan 25 2022 at 18:40)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862713869">PR review</a>.</p>



<a name="269303224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269303224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269303224">(Jan 25 2022 at 18:40)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r792015197">PR review comment</a>:</p>
<blockquote>
<p>Yes, we wouldn't necessarily have to move the implementations as well, nothing is stopping us from implementing the ISLE context's <code>emit</code> trait method once for each backend even when the <code>decl</code> is in the prelude.</p>
<p>In fact the x86_64 implementation is a little different, in that it calls a <code>mov_mitosis</code> method on each inst in <code>emitted_insts</code>, and if we made this code common then we would need to add such a method to the <code>MachInst</code> trait or something.</p>
<p>So I think we can move just the ISLE <code>decl</code> into the prelude without moving the rust trait implementations at all. Happy to have this in a follow up PR.</p>
</blockquote>



<a name="269303963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269303963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269303963">(Jan 25 2022 at 18:45)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862719076">PR review</a>.</p>



<a name="269303965"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269303965" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269303965">(Jan 25 2022 at 18:45)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r792018935">PR review comment</a>:</p>
<blockquote>
<p>Ah, I see.   But even if we don't move the implementaton, once the <code>decl</code> is in the prelude as <code>extern constructor</code>, <em>every</em> back-end <em>must</em> implement it or it won't compile any more.   So we'll still need to touch all back-ends.  (In fact, with the x86 <code>mov_mitosis</code> implementation, I'm not sure exactly how the safepoint variant would work.  I guess only the last instruction in the list should be the safepoint?)</p>
</blockquote>



<a name="269304445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269304445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269304445">(Jan 25 2022 at 18:48)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r792021618">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>once the <code>decl</code> is in the prelude as <code>extern constructor</code>, _every_ back-end _must_ implement it or it won't compile any more.</p>
</blockquote>
<p>Correct. (Also, it is already the case that every backend must implement it or the ISLE won't compile because we are calling <code>emit</code> and assuming it is declared from inside the prelude already, it just so happens that we have N identical declarations for each backend instead of a single shared declaration in the prelude.)</p>
<blockquote>
<p>(In fact, with the x86 <code>mov_mitosis</code> implementation, I'm not sure exactly how the safepoint variant would work. I guess only the last instruction in the list should be the safepoint?)</p>
</blockquote>
<p>Yeah, I will have to think a bit about how to do this best. I think making only the last instruction a safepoint would work, but we might want to have some debug asserts in there too. Planning on tackling this after I'm done with my newtype wrappers PR by which time this PR will have merged.</p>
</blockquote>



<a name="269304446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269304446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269304446">(Jan 25 2022 at 18:48)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862722811">PR review</a>.</p>



<a name="269305597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269305597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269305597">(Jan 25 2022 at 18:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862730674">PR review</a>.</p>



<a name="269305598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269305598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269305598">(Jan 25 2022 at 18:56)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r792027256">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>I think making only the last instruction a safepoint would work,</p>
</blockquote>
<p>Yeah, I think that's the correct solution -- the expanded list should always have the form of zero or more moves, followed by the original instruction; and the safepoint bit applies to the latter.</p>
</blockquote>



<a name="269305967"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269305967" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269305967">(Jan 25 2022 at 18:59)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-862733419">PR review</a>.</p>



<a name="269305969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/269305969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#269305969">(Jan 25 2022 at 18:59)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#discussion_r792029229">PR review comment</a>:</p>
<blockquote>
<p>There are some instructions that always generate their results into a particular register, and so when our SSA-ified version of that instruction wants the result in a temp, we have to generate a move that follows the "real" instruction, so we can have trailing moves as well after move mitosis. This shouldn't be the case for safepoints I don't think (except maybe ABI/calling convention stuff where results are always in <code>rax</code>?) and we should be able to just debug assert this.</p>
</blockquote>



<a name="270109912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/270109912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#270109912">(Jan 31 2022 at 21:42)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3724#pullrequestreview-868450328">PR review</a>.</p>



<a name="270109928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233724%20s390x%3A%20Migrate%20branches%20and%20traps%20to%20.../near/270109928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233724.20s390x.3A.20Migrate.20branches.20and.20traps.20to.20.2E.2E.2E.html#270109928">(Jan 31 2022 at 21:42)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/3724">PR #3724</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>