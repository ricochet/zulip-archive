<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6606 x64: Add non-SSSE3 lowerings of `p... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236606.20x64.3A.20Add.20non-SSSE3.20lowerings.20of.20.60p.2E.2E.2E.html">wasmtime / issue #6606 x64: Add non-SSSE3 lowerings of `p...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="367787293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236606%20x64%3A%20Add%20non-SSSE3%20lowerings%20of%20%60p.../near/367787293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236606.20x64.3A.20Add.20non-SSSE3.20lowerings.20of.20.60p.2E.2E.2E.html#367787293">(Jun 20 2023 at 02:52)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6606#issuecomment-1598037648">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6606">issue #6606</a>:</p>
<blockquote>
<p>This ended up being a bit more complicated than I originally thought. Turns out that Cranelift previously didn't correctly implement the Windows fastcall calling convention with respect to vector arguments since they're all supposed to be indirect rather than immediate in registers (unlike System-V). That motivated me to remove the usage of <code>lower_pshufb</code> and the usage of a libcall, ending up in an SSE2 lowering for <code>i8x16.popcnt</code> that's not the end of the world. I couldn't find a way to avoid the libcall for <code>shuffle</code> or <code>swizzle</code>, though, so I doubled down on fixing it. I've attempted to add the ABI bits here to get that working, but more eyes are of course always appreciated.</p>
</blockquote>



<a name="367806457"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236606%20x64%3A%20Add%20non-SSSE3%20lowerings%20of%20%60p.../near/367806457" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236606.20x64.3A.20Add.20non-SSSE3.20lowerings.20of.20.60p.2E.2E.2E.html#367806457">(Jun 20 2023 at 05:44)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/6606#issuecomment-1598151404">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6606">issue #6606</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:area:machinst", "cranelift:area:x64", "cranelift:module", "cranelift:wasm", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>