<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6924 riscv64: Implement SIMD floating poin... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html">wasmtime / PR #6924 riscv64: Implement SIMD floating poin...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="387921509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387921509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387921509">(Aug 29 2023 at 16:49)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<a name="387921510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387921510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387921510">(Aug 29 2023 at 16:49)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<a name="387922696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387922696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387922696">(Aug 29 2023 at 16:56)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<a name="387922706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387922706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387922706">(Aug 29 2023 at 16:56)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR implements the floating point conversion instructions (<code>fvdemote</code>, <code>fvpromote_low</code>, <code>fcvt_{to,from}_{u,s}int{,_sat}</code>) on the RISC-V backend. </p>
<p>All of the underlying instructions were implemented in #6920, so we don't need to introduce new ones.</p>
<hr>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> With this PR we now have SIMD fully implemented for RISC-V<span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p>There is 1 test that is not passing yet, but I think that is due to a NaN payload bit mismatch that is allowed by the spec. But I'm going to open a separate issue to confirm that.</p>
<p>(This PR is built on top of #6920 so we need to merge that one first)</p>
</blockquote>



<a name="387922934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387922934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387922934">(Aug 29 2023 at 16:56)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a> from <code>afonso360:riscv-simd-ftoi</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR implements the floating point conversion instructions (<code>fvdemote</code>, <code>fvpromote_low</code>, <code>fcvt_{to,from}_{u,s}int{,_sat}</code>) on the RISC-V backend. </p>
<p>All of the underlying instructions were implemented in #6920, so we don't need to introduce new ones.</p>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> With this PR we now have SIMD fully implemented for RISC-V<span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p>There is 1 test that is not passing yet, but I think that is due to a NaN payload bit mismatch that is allowed by the spec. But I'm going to open a separate issue to confirm that.</p>
<p>(This PR is built on top of #6920 so we need to merge that one first)</p>
</blockquote>



<a name="387923465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/387923465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#387923465">(Aug 29 2023 at 16:59)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR implements the floating point conversion instructions (<code>fvdemote</code>, <code>fvpromote_low</code>, <code>fcvt_{to,from}_{u,s}int{,_sat}</code>) on the RISC-V backend. </p>
<p>All of the underlying instructions were implemented in #6920, so we don't need to introduce new ones.</p>
<p>Almost all instructions match 1-to-1 with the WASM spec, except <code>fcvt_to_{u,s}int_sat</code>, where NaN's need to be manually zeroed out. And on <code>fvdemote</code> RISC-V leaves the upper lanes undefined, so we also zero them out manually.</p>
<hr>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> With this PR we now have SIMD fully implemented for RISC-V<span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p>There is 1 test that is not passing yet, but I think that is due to a NaN payload bit mismatch that is allowed by the spec. But I'm going to open a separate issue to confirm that.</p>
<p>(This PR is built on top of #6920 so we need to merge that one first)</p>
</blockquote>



<a name="388190259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/388190259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#388190259">(Aug 30 2023 at 20:27)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<a name="388190465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/388190465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#388190465">(Aug 30 2023 at 20:29)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>This PR implements the floating point conversion instructions (<code>fvdemote</code>, <code>fvpromote_low</code>, <code>fcvt_{to,from}_{u,s}int{,_sat}</code>) on the RISC-V backend. </p>
<p>Almost all instructions match 1-to-1 with the WASM spec, except <code>fcvt_to_{u,s}int_sat</code>, where NaN's need to be manually zeroed out. And on <code>fvdemote</code> RISC-V leaves the upper lanes undefined, so we also zero them out manually.</p>
<hr>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> With this PR we now have SIMD fully implemented for RISC-V<span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
<p>There is 1 test that is not passing yet, but I think that is due to a NaN payload bit mismatch that is allowed by the spec. But I'm going to open a separate issue to confirm that.</p>
<p>(This PR is built on top of #6920 so we need to merge that one first)</p>
</blockquote>



<a name="388191654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/388191654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#388191654">(Aug 30 2023 at 20:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6924#pullrequestreview-1603456829">PR review</a>:</p>
<blockquote>
<p><span aria-label="confetti" class="emoji emoji-1f38a" role="img" title="confetti">:confetti:</span> nice!</p>
<p>You've done quite a lot of work on this backend and it's very much appreciated, thank you!</p>
</blockquote>



<a name="388192417"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/388192417" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#388192417">(Aug 30 2023 at 20:42)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<a name="388201495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236924%20riscv64%3A%20Implement%20SIMD%20floating%20poin.../near/388201495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236924.20riscv64.3A.20Implement.20SIMD.20floating.20poin.2E.2E.2E.html#388201495">(Aug 30 2023 at 21:54)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6924">PR #6924</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>