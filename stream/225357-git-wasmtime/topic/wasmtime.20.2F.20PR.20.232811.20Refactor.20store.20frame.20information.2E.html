<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2811 Refactor store frame information. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html">wasmtime / PR #2811 Refactor store frame information.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="233547063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233547063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233547063">(Apr 07 2021 at 19:25)</a>:</h4>
<p>peterhuene opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a> from <code>improve-store-registration</code> to <code>main</code>:</p>
<blockquote>
<p>This PR refactors the store frame information to eliminate the copying of<br>
data out from <code>CompiledModule</code>.</p>
<p>It also moves the population of a <code>BTreeMap</code> out of the frame information and<br>
into <code>CompiledModule</code> where it is only ever calculated once rather than at<br>
every new module instantiation into a <code>Store</code>. The map is also lazy-initialized<br>
so the cost of populating the map is incurred only when a trap occurs.</p>
<p>This should help improve instantiation time of modules with a large number of<br>
functions and functions with lots of instructions.</p>
</blockquote>



<a name="233548326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233548326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233548326">(Apr 07 2021 at 19:34)</a>:</h4>
<p><strong>peterhuene</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a>.</p>



<a name="233549891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233549891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233549891">(Apr 07 2021 at 19:46)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630489044">PR Review</a>.</p>



<a name="233549892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233549892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233549892">(Apr 07 2021 at 19:46)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609010603">PR Review Comment</a>:</p>
<blockquote>
<p>I just realized this doesn't need to be <code>Arc</code> any more; will fix.</p>
</blockquote>



<a name="233549908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233549908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233549908">(Apr 07 2021 at 19:46)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609010603">PR Review Comment</a>.</p>



<a name="233549988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233549988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233549988">(Apr 07 2021 at 19:47)</a>:</h4>
<p>peterhuene updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a> from <code>improve-store-registration</code> to <code>main</code>.</p>



<a name="233552897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233552897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233552897">(Apr 07 2021 at 20:07)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630498762">PR Review</a>.</p>



<a name="233552898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233552898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233552898">(Apr 07 2021 at 20:07)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630498762">PR Review</a>.</p>



<a name="233552899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233552899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233552899">(Apr 07 2021 at 20:07)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609034225">PR Review Comment</a>:</p>
<blockquote>
<p>The <code>is_wasm_pc</code> function is somewhat special in that it can primarily get invoked from a signal handler on Unix and Windows. Technically we're doing signal-unsafe things here by grabbing a lock as soon as we enter this function, but it's presumed fine in that we're pretty unlikely to segfault in this function itself. This reminds me, though, could you add some words to this function's documentation indicating that it's called from signal handlers and as a result the contents should be carefully written?</p>
<p>I was originally worried slightly that this call to <code>func</code> would involve assembling the <code>BTreeMap</code> which could involve allocations which could be tricky in a signal handler native-stack wise, but in thinking about it I'm not too worried about that.</p>
<p>Thinking a bit more about this, though, I'm not actually sure if we need the <code>BTreeMap</code> any more. Since <code>func_map()</code> is only ever used for function lookup, we can probably just do a binary search on an array with the pc? I presume that the list of functions is sorted in address order in some array in the compiled artifacts anyway. If we use that I think we can actually remove the need for that whole map entirely?</p>
</blockquote>



<a name="233552900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233552900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233552900">(Apr 07 2021 at 20:07)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609027160">PR Review Comment</a>:</p>
<blockquote>
<p>I think this can avoid returning an <code>Option</code>? Most of the usage of indexing we have through things like <code>DefinedFuncIndex</code> we have panic if invalid</p>
</blockquote>



<a name="233558430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233558430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233558430">(Apr 07 2021 at 20:46)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630568758">PR Review</a>.</p>



<a name="233558431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233558431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233558431">(Apr 07 2021 at 20:46)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609058040">PR Review Comment</a>:</p>
<blockquote>
<p>I agree, we probably don't need a <code>BTreeMap</code> here.  I'll improve this further.</p>
</blockquote>



<a name="233567612"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233567612" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233567612">(Apr 07 2021 at 21:39)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630652423">PR Review</a>.</p>



<a name="233567615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233567615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233567615">(Apr 07 2021 at 21:39)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609086808">PR Review Comment</a>:</p>
<blockquote>
<p>I think we can guarantee that <code>finished_functions</code> are in sort-order (they're based on the ELF symbols which we are writing in-order) so we should be able to just utilize that for the search (based on the start vs. the end).</p>
</blockquote>



<a name="233577505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233577505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233577505">(Apr 07 2021 at 23:12)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630739812">PR Review</a>.</p>



<a name="233577506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233577506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233577506">(Apr 07 2021 at 23:12)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630739812">PR Review</a>.</p>



<a name="233577507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233577507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233577507">(Apr 07 2021 at 23:12)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609117923">PR Review Comment</a>:</p>
<blockquote>
<p>We could do a <code>with_capacity</code> here.</p>
</blockquote>



<a name="233577568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233577568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233577568">(Apr 07 2021 at 23:13)</a>:</h4>
<p>peterhuene submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630783432">PR Review</a>.</p>



<a name="233577569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233577569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233577569">(Apr 07 2021 at 23:13)</a>:</h4>
<p>peterhuene created <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#discussion_r609132592">PR Review Comment</a>:</p>
<blockquote>
<p>Good eye!  Thankfully I'm about to push up a change that removes this <code>BTreeMap</code> and just does a binary search on the finished function ranges directly.</p>
</blockquote>



<a name="233579864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233579864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233579864">(Apr 07 2021 at 23:38)</a>:</h4>
<p>peterhuene updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a> from <code>improve-store-registration</code> to <code>main</code>.</p>



<a name="233579895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233579895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233579895">(Apr 07 2021 at 23:39)</a>:</h4>
<p><strong>peterhuene</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a>.</p>



<a name="233579896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233579896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233579896">(Apr 07 2021 at 23:39)</a>:</h4>
<p><strong>peterhuene</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> and <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a>.</p>



<a name="233581745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233581745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233581745">(Apr 08 2021 at 00:00)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630854334">PR Review</a>.</p>



<a name="233581808"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233581808" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233581808">(Apr 08 2021 at 00:00)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2811#pullrequestreview-630854880">PR Review</a>.</p>



<a name="233582473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233582473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233582473">(Apr 08 2021 at 00:07)</a>:</h4>
<p>peterhuene edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a> from <code>improve-store-registration</code> to <code>main</code>:</p>
<blockquote>
<p>This PR refactors the store frame information to eliminate the copying of<br>
data out from <code>CompiledModule</code>.</p>
<p>It also removes the population of a <code>BTreeMap</code> in favor of doing a binary<br>
search on the finished functions in the associated <code>CompiledModule</code>.</p>
<p>This should help improve instantiation time of modules with a large number of<br>
functions and functions with lots of instructions.</p>
</blockquote>



<a name="233587957"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232811%20Refactor%20store%20frame%20information./near/233587957" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232811.20Refactor.20store.20frame.20information.2E.html#233587957">(Apr 08 2021 at 01:16)</a>:</h4>
<p>peterhuene merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2811">PR #2811</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>