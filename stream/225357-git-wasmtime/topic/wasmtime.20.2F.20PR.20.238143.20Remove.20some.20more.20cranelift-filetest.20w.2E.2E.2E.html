<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8143 Remove some more cranelift-filetest w... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html">wasmtime / PR #8143 Remove some more cranelift-filetest w...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="426655777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655777">(Mar 15 2024 at 01:01)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a> from <code>alexcrichton:remove-some-more-test-bits</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Some more cleanup enabled through #8140 and #8129</p>
</blockquote>



<a name="426655778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655778">(Mar 15 2024 at 01:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426655779"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655779" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655779">(Mar 15 2024 at 01:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426655783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655783">(Mar 15 2024 at 01:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426655784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655784">(Mar 15 2024 at 01:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426655785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426655785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426655785">(Mar 15 2024 at 01:01)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426657995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426657995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426657995">(Mar 15 2024 at 01:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#pullrequestreview-1937967203">PR review</a>.</p>



<a name="426657996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426657996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426657996">(Mar 15 2024 at 01:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#pullrequestreview-1937967203">PR review</a>.</p>



<a name="426657997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426657997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426657997">(Mar 15 2024 at 01:25)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#discussion_r1525653067">PR review comment</a>:</p>
<blockquote>
<p>Idle thought: if the test is now a Wasmtime test, should this environment variable be something like <code>WASMTIME_TEST_BLESS</code>?</p>
<p>(Smallest of small bikeshed color comments, fine either way, just a thought...)</p>
</blockquote>



<a name="426682457"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426682457" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426682457">(Mar 15 2024 at 06:41)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#pullrequestreview-1938211105">PR review</a>.</p>



<a name="426682458"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426682458" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426682458">(Mar 15 2024 at 06:41)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#discussion_r1525819250">PR review comment</a>:</p>
<blockquote>
<p>Can the cranelift-wasm and wasmparser dependencies be removed from filetests?</p>
</blockquote>



<a name="426762063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426762063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426762063">(Mar 15 2024 at 15:03)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426762091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426762091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426762091">(Mar 15 2024 at 15:03)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#pullrequestreview-1939185865">PR review</a>.</p>



<a name="426762093"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426762093" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426762093">(Mar 15 2024 at 15:03)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#discussion_r1526426813">PR review comment</a>:</p>
<blockquote>
<p>Oh indeed they can!</p>
</blockquote>



<a name="426762180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426762180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426762180">(Mar 15 2024 at 15:03)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426762213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426762213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426762213">(Mar 15 2024 at 15:04)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426767125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426767125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426767125">(Mar 15 2024 at 15:27)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426767275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426767275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426767275">(Mar 15 2024 at 15:27)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426772335"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426772335" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426772335">(Mar 15 2024 at 15:51)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426772603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426772603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426772603">(Mar 15 2024 at 15:53)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/8143#issuecomment-1999957877">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>:</p>
<blockquote>
<p>This <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/8298501522/job/22712023968">hit an unusual error on CI</a> which looked like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">filetests</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">riscv64gc</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">filetests</span><span class="o">-</span><span class="mi">9</span><span class="n">d21d101a4f160f6</span><span class="p">)</span>
<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">worker</span><span class="w"> </span>#<span class="mi">2</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">jit</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">backend</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">342</span>:<span class="mi">40</span>:
<span class="nc">can</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">resolve</span><span class="w"> </span><span class="n">libcall</span><span class="w"> </span><span class="n">ceilf</span>
</code></pre></div>
<p>Apparently the removal of the wasm-related dependencies also removed all dependencies on libm for riscv64 which meant that tests were failing as a dlsym for various libcall symbols was failing. I just added a commit which forces linking to libm by referring to a symbol and calling it.</p>
</blockquote>



<a name="426772621"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426772621" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426772621">(Mar 15 2024 at 15:53)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<a name="426791991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238143%20Remove%20some%20more%20cranelift-filetest%20w.../near/426791991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238143.20Remove.20some.20more.20cranelift-filetest.20w.2E.2E.2E.html#426791991">(Mar 15 2024 at 17:34)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8143">PR #8143</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>