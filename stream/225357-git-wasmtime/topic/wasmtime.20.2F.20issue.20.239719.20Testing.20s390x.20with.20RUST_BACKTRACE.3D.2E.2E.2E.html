<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9719 Testing s390x with RUST_BACKTRACE=... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html">wasmtime / issue #9719 Testing s390x with RUST_BACKTRACE=...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="485930414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/485930414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#485930414">(Dec 03 2024 at 19:06)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">issue #9719</a>:</p>
<blockquote>
<p>In landing <a href="https://github.com/bytecodealliance/wasmtime/pull/9702">https://github.com/bytecodealliance/wasmtime/pull/9702</a> I was wrestling with a s390x-specific failure on CI. The problem seems to stem from <code>RUST_BACKTRACE=1</code> and using <code>std::backtrace</code> which an updated version of <code>anyhow</code> uses. This code is now all landed on <code>main</code> so the current main branch of Wasmtime fails with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span>
<span class="cp">$</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">CARGO_PROFILE_DEV_OPT_LEVEL</span><span class="o">=</span><span class="mi">2</span>
<span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span>
<span class="o">..</span><span class="p">.</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">test</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">56.55</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_wasi</span><span class="o">-</span><span class="n">e36f6fb1833db8d7</span><span class="p">)</span>

<span class="n">running</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">tests</span>
<span class="n">test</span><span class="w"> </span><span class="n">host</span><span class="p">::</span><span class="n">filesystem</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">table_readdir_works</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">memory_stdin_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">random</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">deterministic</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">async_stdout_stream_unblocks</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">async_stdin_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">infinite_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">finite_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">empty_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">sink_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">closed_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">multiple_chunks_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">multiple_chunks_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_write_stream_with_flush</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>

<span class="n">test</span><span class="w"> </span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="nc">ok</span><span class="p">.</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">passed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">failed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ignored</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">measured</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.36</span><span class="n">s</span>

<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">all</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">all</span><span class="o">-</span><span class="n">d771c2793612b780</span><span class="p">)</span>

<span class="n">running</span><span class="w"> </span><span class="mi">196</span><span class="w"> </span><span class="n">tests</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_clock_time_get</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_fd_filestat_get</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">api</span><span class="p">::</span><span class="n">api_time</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">api</span><span class="p">::</span><span class="n">api_reactor</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_big_random_buf</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">qemu</span><span class="p">:</span><span class="w"> </span><span class="nc">uncaught</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">(</span><span class="n">Segmentation</span><span class="w"> </span><span class="n">fault</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">test</span><span class="w"> </span><span class="n">all</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">qemu</span><span class="o">-</span><span class="n">s390x</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w"> </span><span class="o">-</span><span class="n">E</span><span class="w"> </span><span class="n">LD_LIBRARY_PATH</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">E</span><span class="w"> </span><span class="n">WASMTIME_TEST_NO_HOG_MEMORY</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">alex</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">all</span><span class="o">-</span><span class="n">d771c2793612b780</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">signal</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">SIGSEGV</span><span class="p">:</span><span class="w"> </span><span class="nc">invalid</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">reference</span><span class="p">)</span>
</code></pre></div>
<p>@uweigand would you be able to help take a closer look at this? I'm not sure if this is a Wasmtime/jit code issue (maybe unwind info?) or something else in rustc perhaps</p>
</blockquote>



<a name="485930425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/485930425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#485930425">(Dec 03 2024 at 19:06)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the cranelift:area:s390x label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">Issue #9719</a>.</p>



<a name="485962161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/485962161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#485962161">(Dec 03 2024 at 22:01)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/issues/9719#issuecomment-2515639144">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">issue #9719</a>:</p>
<blockquote>
<p>Good news is I can reproduce natively, so it's not a qemu issue.  The segfault happens in MD_FALLBACK_FRAME_STATE_FOR in libgcc, because of an invalid PC.  This typically indicates some problem with unwind info in a lower frame.  And indeed GDB also isn't able to unwind fully.  I'll need to look where this comes from.</p>
</blockquote>



<a name="485983712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/485983712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#485983712">(Dec 04 2024 at 00:36)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/issues/9719#issuecomment-2515876079">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">issue #9719</a>:</p>
<blockquote>
<p>This is a regression introduced with the tail-call ABI.  If we have incoming tail-call stack arguments, the DWARF rule to unwind the caller's SP is incorrect.  I'm working on a fix.</p>
</blockquote>



<a name="485993259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/485993259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#485993259">(Dec 04 2024 at 01:57)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/issues/9719#issuecomment-2515993340">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">issue #9719</a>:</p>
<blockquote>
<p>The above PR fixes the issue for me.</p>
</blockquote>



<a name="486123691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239719%20Testing%20s390x%20with%20RUST_BACKTRACE%3D.../near/486123691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239719.20Testing.20s390x.20with.20RUST_BACKTRACE.3D.2E.2E.2E.html#486123691">(Dec 04 2024 at 15:47)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/9719">issue #9719</a>:</p>
<blockquote>
<p>In landing <a href="https://github.com/bytecodealliance/wasmtime/pull/9702">https://github.com/bytecodealliance/wasmtime/pull/9702</a> I was wrestling with a s390x-specific failure on CI. The problem seems to stem from <code>RUST_BACKTRACE=1</code> and using <code>std::backtrace</code> which an updated version of <code>anyhow</code> uses. This code is now all landed on <code>main</code> so the current main branch of Wasmtime fails with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span>
<span class="cp">$</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">CARGO_PROFILE_DEV_OPT_LEVEL</span><span class="o">=</span><span class="mi">2</span>
<span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span>
<span class="o">..</span><span class="p">.</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">test</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">56.55</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_wasi</span><span class="o">-</span><span class="n">e36f6fb1833db8d7</span><span class="p">)</span>

<span class="n">running</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">tests</span>
<span class="n">test</span><span class="w"> </span><span class="n">host</span><span class="p">::</span><span class="n">filesystem</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">table_readdir_works</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">memory_stdin_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">random</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">deterministic</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">async_stdout_stream_unblocks</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stdio</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">async_stdin_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">infinite_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">finite_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">empty_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">sink_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">closed_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">multiple_chunks_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">multiple_chunks_read_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_write_stream</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">pipe</span><span class="p">::</span><span class="n">test</span><span class="p">::</span><span class="n">backpressure_write_stream_with_flush</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>

<span class="n">test</span><span class="w"> </span><span class="n">result</span><span class="p">:</span><span class="w"> </span><span class="nc">ok</span><span class="p">.</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="n">passed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">failed</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ignored</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">measured</span><span class="p">;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">filtered</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="w"> </span><span class="n">finished</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.36</span><span class="n">s</span>

<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">all</span><span class="o">/</span><span class="n">main</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">all</span><span class="o">-</span><span class="n">d771c2793612b780</span><span class="p">)</span>

<span class="n">running</span><span class="w"> </span><span class="mi">196</span><span class="w"> </span><span class="n">tests</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_clock_time_get</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_fd_filestat_get</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">api</span><span class="p">::</span><span class="n">api_time</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">api</span><span class="p">::</span><span class="n">api_reactor</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">async_</span><span class="p">::</span><span class="n">preview1_big_random_buf</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">qemu</span><span class="p">:</span><span class="w"> </span><span class="nc">uncaught</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="p">(</span><span class="n">Segmentation</span><span class="w"> </span><span class="n">fault</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="w"> </span><span class="o">--</span><span class="n">test</span><span class="w"> </span><span class="n">all</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">qemu</span><span class="o">-</span><span class="n">s390x</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="w"> </span><span class="o">-</span><span class="n">E</span><span class="w"> </span><span class="n">LD_LIBRARY_PATH</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">lib</span><span class="w"> </span><span class="o">-</span><span class="n">E</span><span class="w"> </span><span class="n">WASMTIME_TEST_NO_HOG_MEMORY</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">alex</span><span class="o">/</span><span class="n">code</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">s390x</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">all</span><span class="o">-</span><span class="n">d771c2793612b780</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">signal</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">SIGSEGV</span><span class="p">:</span><span class="w"> </span><span class="nc">invalid</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">reference</span><span class="p">)</span>
</code></pre></div>
<p>@uweigand would you be able to help take a closer look at this? I'm not sure if this is a Wasmtime/jit code issue (maybe unwind info?) or something else in rustc perhaps</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>