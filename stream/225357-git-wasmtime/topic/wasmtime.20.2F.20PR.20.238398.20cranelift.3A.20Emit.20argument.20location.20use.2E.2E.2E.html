<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8398 cranelift: Emit argument location use... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html">wasmtime / PR #8398 cranelift: Emit argument location use...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="433952735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/433952735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#433952735">(Apr 18 2024 at 06:42)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a>.</p>



<a name="433952736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/433952736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#433952736">(Apr 18 2024 at 06:42)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a>.</p>



<a name="433952737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/433952737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#433952737">(Apr 18 2024 at 06:42)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a> from <code>jameysharp:undo-argloc-moves</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This reverts the key parts of e3a08d4c40f64ff7a2113d23af73f40af0859a10 (#8151), because it turns out that we didn't need that abstraction.</p>
<p>Several changes in the last month have enabled this:</p>
<ul>
<li>
<p>#8292 and then #8316 allow us to refer to either incoming or outgoing argument areas in a (mostly) consistent way</p>
</li>
<li>
<p>#8327, #8377, and #8383 demonstrate that we never need to delay writing stack arguments directly to their final location</p>
</li>
</ul>
</blockquote>



<a name="434204207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/434204207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#434204207">(Apr 18 2024 at 17:04)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a>.</p>



<a name="434227266"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/434227266" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#434227266">(Apr 18 2024 at 19:44)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8398#pullrequestreview-2009748335">PR review</a>:</p>
<blockquote>
<p>Awesome! Now that I'm thinking about it, I believe we added this specifically for <code>GrowArgumentArea</code> and <code>ShrinkArgumentArea</code>, both of which no longer exist <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> </p>
</blockquote>



<a name="434230853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/434230853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#434230853">(Apr 18 2024 at 20:10)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/8398#issuecomment-2065198771">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a>:</p>
<blockquote>
<p>Of the several variations on the theme that we've considered, this one was even earlier than the grow/shrink frame approach. We intended to use regalloc2's parallel move resolver to shuffle values between stack slots, registers, and the argument area, to capture all the work of restoring clobber-saves, putting arguments in the right places, and getting the return address in the right place too. That turned out to be complicated. Fortunately, the fact that Ulrich's suggestion (proactively resizing the argument area) works shows we will never have to do parallel moves.</p>
</blockquote>



<a name="434232710"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238398%20cranelift%3A%20Emit%20argument%20location%20use.../near/434232710" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238398.20cranelift.3A.20Emit.20argument.20location.20use.2E.2E.2E.html#434232710">(Apr 18 2024 at 20:25)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8398">PR #8398</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>