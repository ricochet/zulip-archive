<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7258 wasi-streams: Spawned worker threa... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237258.20wasi-streams.3A.20Spawned.20worker.20threa.2E.2E.2E.html">wasmtime / issue #7258 wasi-streams: Spawned worker threa...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="396950225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237258%20wasi-streams%3A%20Spawned%20worker%20threa.../near/396950225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237258.20wasi-streams.3A.20Spawned.20worker.20threa.2E.2E.2E.html#396950225">(Oct 16 2023 at 17:47)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7258">issue #7258</a>.</p>



<a name="396950297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237258%20wasi-streams%3A%20Spawned%20worker%20threa.../near/396950297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237258.20wasi-streams.3A.20Spawned.20worker.20threa.2E.2E.2E.html#396950297">(Oct 16 2023 at 17:47)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7258">issue #7258</a>.</p>



<a name="396950707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237258%20wasi-streams%3A%20Spawned%20worker%20threa.../near/396950707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237258.20wasi-streams.3A.20Spawned.20worker.20threa.2E.2E.2E.html#396950707">(Oct 16 2023 at 17:50)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/issues/7258">issue #7258</a>:</p>
<blockquote>
<p>Currently the worker thread managing writes to stdout will drop when the guest-side write end is dropped. We need to fix this, as it's quite common to repeatedly call <code>std::io::get_stdout()</code> and drop the result in rust.</p>
<p>The general approach that we discussed is to have the stdout/stderr worker tasks alive for the duration of the guest, and a separate channel for reporting new write channels to those tasks. The tasks would then be responsible for selecting between the new writer channel and all the known writer channels when processing incoming jobs, removing known writers from the managed set when those ends drop instead of aborting.</p>
</blockquote>



<a name="396950783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237258%20wasi-streams%3A%20Spawned%20worker%20threa.../near/396950783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237258.20wasi-streams.3A.20Spawned.20worker.20threa.2E.2E.2E.html#396950783">(Oct 16 2023 at 17:51)</a>:</h4>
<p>elliottt assigned <a href="https://github.com/bytecodealliance/wasmtime/issues/7258">issue #7258</a> to elliottt.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>