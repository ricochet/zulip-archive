<html>
<head><meta charset="utf-8"><title>wasmtime / issue #3674 Don&#x27;t include line numbers in isle... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html">wasmtime / issue #3674 Don&#x27;t include line numbers in isle...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="267426535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267426535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267426535">(Jan 10 2022 at 11:25)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>They make the diffs to those files much bigger than necessary as line numbers often change, thus making it harder to review the generated files. It also makes git pack files slightly bigger. As an alternative to line numbers maybe fragments of the source isle files can be included that can be searched for in the source files?</p>
</blockquote>



<a name="267489514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267489514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267489514">(Jan 10 2022 at 19:43)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1009281634">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>I think the line numbers are useful when looking at the generated code and understanding why things are there and what source they correspond to.</p>
<p>I think including ISLE source fragments is a could improvement, but still doesn't obviate the need for line numbers, since it doesn't help me go back to the canonical source location if I have edits to make.</p>
<p>We could potentially add a <code>-diff</code> line to <code>.gitattributes</code> so that diffs for generated files are suppressed.</p>
</blockquote>



<a name="267489980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267489980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267489980">(Jan 10 2022 at 19:47)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1009284389">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<blockquote>
<p>We could potentially add a -diff line to .gitattributes so that diffs for generated files are suppressed.</p>
</blockquote>
<p>I would like to still have diffs for the generated code to see what it is exactly doing. That is why I want the diffs for them to be less noisy. Github currently hides the diffs anyway due to the size.</p>
</blockquote>



<a name="267508125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267508125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267508125">(Jan 10 2022 at 22:09)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1009390819">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>@bjorn3 I'm curious, are you looking at the diffs of generated code in PRs that add e.g. instruction lowerings in order to understand what new functionality is included?</p>
<p>In general, I would hope that one doesn't need to resort to that, in the sense that the diffs at the ISLE DSL level should be clear enough; if the only way to tell what changed is to look at the generated code, then that's an issue with language or prelude design, IMHO.</p>
<p>Also, we can't necessarily guarantee that the output will be "stable" with incremental updates: perhaps sometime in the future, we have a heuristic that generated lowering code, or chooses a different strategy, when something changes on the input side. </p>
<p>In other words, I'd prefer to optimize for understandability of the generated code at a point in time -- hence the line number comments, so e.g. someone following with a debugger can get back to ISLE source -- rather than "incremental-update diff cleanliness". Does that make sense? Understanding what you're hoping to get from the diffs could of course help us refine this.</p>
</blockquote>



<a name="267508253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267508253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267508253">(Jan 10 2022 at 22:10)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1009390819">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>@bjorn3 I'm curious, are you looking at the diffs of generated code in PRs that add e.g. instruction lowerings in order to understand what new functionality is included?</p>
<p>In general, I would hope that one doesn't need to resort to that, in the sense that the diffs at the ISLE DSL level should be clear enough; if the only way to tell what changed is to look at the generated code, then that's an issue with language or prelude design, IMHO.</p>
<p>Also, we can't necessarily guarantee that the output will be "stable" with incremental updates: perhaps sometime in the future, we have a heuristic that generates very lowering code by choosing a different strategy when something changes on the input side. </p>
<p>In other words, I'd prefer to optimize for understandability of the generated code at a point in time -- hence the line number comments, so e.g. someone following with a debugger can get back to ISLE source -- rather than "incremental-update diff cleanliness". Does that make sense? Understanding what you're hoping to get from the diffs could of course help us refine this.</p>
</blockquote>



<a name="267508280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/267508280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#267508280">(Jan 10 2022 at 22:10)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1009390819">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>@bjorn3 I'm curious, are you looking at the diffs of generated code in PRs that add e.g. instruction lowerings in order to understand what new functionality is included?</p>
<p>In general, I would hope that one doesn't need to resort to that, in the sense that the diffs at the ISLE DSL level should be clear enough; if the only way to tell what changed is to look at the generated code, then that's an issue with language or prelude design, IMHO.</p>
<p>Also, we can't necessarily guarantee that the output will be "stable" with incremental updates: perhaps sometime in the future, we have a heuristic that generates very different lowering code by choosing a different strategy when something changes on the input side. </p>
<p>In other words, I'd prefer to optimize for understandability of the generated code at a point in time -- hence the line number comments, so e.g. someone following with a debugger can get back to ISLE source -- rather than "incremental-update diff cleanliness". Does that make sense? Understanding what you're hoping to get from the diffs could of course help us refine this.</p>
</blockquote>



<a name="282952890"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/282952890" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#282952890">(May 19 2022 at 16:15)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/3674#issuecomment-1131920627">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>ISLE-generated code is no longer checked in, so I'm going to close this.</p>
</blockquote>



<a name="282952892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%233674%20Don%27t%20include%20line%20numbers%20in%20isle.../near/282952892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.233674.20Don.27t.20include.20line.20numbers.20in.20isle.2E.2E.2E.html#282952892">(May 19 2022 at 16:15)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/3674">issue #3674</a>:</p>
<blockquote>
<p>They make the diffs to those files much bigger than necessary as line numbers often change, thus making it harder to review the generated files. It also makes git pack files slightly bigger. As an alternative to line numbers maybe fragments of the source isle files can be included that can be searched for in the source files?</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>