<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7240 Support reset_fuel in store APIs · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html">wasmtime / PR #7240 Support reset_fuel in store APIs</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="396570597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396570597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396570597">(Oct 13 2023 at 21:02)</a>:</h4>
<p>rockwotj edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7240">PR #7240</a>:</p>
<blockquote>
<p>Add a simpler interface to reset the amount of fuel in a store.</p>
<p>Fixes: <a href="https://github.com/bytecodealliance/wasmtime/issues/5109">https://github.com/bytecodealliance/wasmtime/issues/5109</a></p>
<p>A continuation of <a href="https://github.com/bytecodealliance/wasmtime/pull/5220">https://github.com/bytecodealliance/wasmtime/pull/5220</a>, which has stalled.</p>
</blockquote>



<a name="396570654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396570654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396570654">(Oct 13 2023 at 21:03)</a>:</h4>
<p>rockwotj edited <a href="https://github.com/bytecodealliance/wasmtime/pull/7240">PR #7240</a>:</p>
<blockquote>
<p>Add a simpler interface to reset the amount of fuel in a store.</p>
<p>Fixes: <a href="https://github.com/bytecodealliance/wasmtime/issues/5109">https://github.com/bytecodealliance/wasmtime/issues/5109</a></p>
<p>A continuation of <a href="https://github.com/bytecodealliance/wasmtime/pull/5220">https://github.com/bytecodealliance/wasmtime/pull/5220</a>, which has stalled. To make it more obvious that <code>consumed_fuel</code> is reset, I've changed the name to this method to be <code>reset_fuel</code>.</p>
</blockquote>



<a name="396575210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396575210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396575210">(Oct 13 2023 at 21:49)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#discussion_r1358875558">PR review comment</a>:</p>
<blockquote>
<p>Ah yeah I see that it is copy-pasted. Mind removing this paragraph here and in the other place?</p>
<p>If you want to go above and beyond, you could replace it with a bit about how one might configure execution to trap or async yield on out of fuel via <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.out_of_fuel_async_yield">https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.out_of_fuel_async_yield</a> and <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.out_of_fuel_trap">https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.out_of_fuel_trap</a></p>
</blockquote>



<a name="396575211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396575211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396575211">(Oct 13 2023 at 21:49)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#pullrequestreview-1677413510">PR review</a>:</p>
<blockquote>
<p>Thanks! Just one documentation nitpick below to be addressed and then we can merge this.</p>
</blockquote>



<a name="396575212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396575212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396575212">(Oct 13 2023 at 21:49)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#pullrequestreview-1677413510">PR review</a>:</p>
<blockquote>
<p>Thanks! Just one documentation nitpick below to be addressed and then we can merge this.</p>
</blockquote>



<a name="396575213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396575213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396575213">(Oct 13 2023 at 21:49)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#discussion_r1358872476">PR review comment</a>:</p>
<blockquote>
<p>Is this just copy-pasted? Because with the Rust API you can yield on out-of-fuel and I thought that the C API supported async as well now, but I am not sure if the fuel bits for that are connected or not.</p>
</blockquote>



<a name="396579068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396579068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396579068">(Oct 13 2023 at 22:32)</a>:</h4>
<p>rockwotj updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7240">PR #7240</a>.</p>



<a name="396579073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396579073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396579073">(Oct 13 2023 at 22:32)</a>:</h4>
<p>rockwotj submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#pullrequestreview-1677474398">PR review</a>.</p>



<a name="396579074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396579074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396579074">(Oct 13 2023 at 22:32)</a>:</h4>
<p>rockwotj created <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#discussion_r1358917171">PR review comment</a>:</p>
<blockquote>
<p>Done! Thanks for catching :) </p>
</blockquote>



<a name="396585671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396585671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396585671">(Oct 14 2023 at 00:04)</a>:</h4>
<p><strong>rockwotj</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7240">PR #7240</a>.</p>



<a name="396948951"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396948951" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396948951">(Oct 16 2023 at 17:39)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7240#pullrequestreview-1680610890">PR review</a>:</p>
<blockquote>
<p>LGTM! We can land this in the meantime as the details in that other issue are hashed out.</p>
</blockquote>



<a name="396955243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237240%20Support%20reset_fuel%20in%20store%20APIs/near/396955243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237240.20Support.20reset_fuel.20in.20store.20APIs.html#396955243">(Oct 16 2023 at 18:24)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7240">PR #7240</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>