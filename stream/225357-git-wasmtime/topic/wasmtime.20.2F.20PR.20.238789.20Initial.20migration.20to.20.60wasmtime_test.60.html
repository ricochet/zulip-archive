<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8789 Initial migration to `wasmtime_test` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html">wasmtime / PR #8789 Initial migration to `wasmtime_test`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="444342864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444342864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444342864">(Jun 12 2024 at 22:22)</a>:</h4>
<p>saulecabrera opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a> from <code>saulecabrera:start-migration-to-wasmtime-test</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit introduces the initial migration to the <code>wasmtime_test</code> macro.</p>
<p>This change starts by migrating all the applicable <code>func.rs</code> integration tests and at the same time it removes all the duplicated integration tests in <code>winch.rs</code>.</p>
<p>Additionally, this change introduces a slight change to how the macro works. Inspired by <a href="https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2083046911">https://github.com/bytecodealliance/wasmtime/pull/8622#pullrequestreview-2083046911</a> it defaults to including all the known configuration combinations and allows the macro user to opt-out where applicable. This makes the usage of the macro less verbose.</p>
<p>The intention is to follow-up with subsequent PRs to migrate the all the applicable tests.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="444342866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444342866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444342866">(Jun 12 2024 at 22:22)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<a name="444342867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444342867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444342867">(Jun 12 2024 at 22:22)</a>:</h4>
<p><strong>saulecabrera</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<a name="444343551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444343551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444343551">(Jun 12 2024 at 22:29)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<a name="444344063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444344063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444344063">(Jun 12 2024 at 22:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#pullrequestreview-2114335845">PR review</a>.</p>



<a name="444344064"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444344064" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444344064">(Jun 12 2024 at 22:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#pullrequestreview-2114335845">PR review</a>.</p>



<a name="444344065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444344065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444344065">(Jun 12 2024 at 22:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#discussion_r1637191155">PR review comment</a>:</p>
<blockquote>
<p>Similar to below adding <code>features(simd)</code> here might make sense to auto-exclude Winch</p>
</blockquote>



<a name="444344066"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444344066" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444344066">(Jun 12 2024 at 22:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#discussion_r1637190554">PR review comment</a>:</p>
<blockquote>
<p>Thought on this, the reason that this test isn't supported on Winch is because it requires wasm gc, right? If that's the case it might be reasonable to have something like <code>features(gc)</code> for this macro. The macro would have built-in knowledge that Winch doesn't support <code>gc</code> but it would also additionally pre-configure the input <code>Config</code> to have <code>wasm_gc(true)</code> for example.</p>
<p>That might make things easier to un-ignore for winch in the future as it would only involve changing one location for "ok now winch supports gc" as opposed to hunting down the various exceptions</p>
</blockquote>



<a name="444558947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444558947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444558947">(Jun 13 2024 at 20:48)</a>:</h4>
<p>saulecabrera updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<a name="444559250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444559250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444559250">(Jun 13 2024 at 20:50)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#issuecomment-2166764724">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>:</p>
<blockquote>
<p>Thanks for the review @alexcrichton. Your suggestions make sense to me, I've pushed an update in <a href="https://github.com/bytecodealliance/wasmtime/pull/8789/commits/9638a94bda3cc6dfa23101b393ded52f4fd0bbdd">https://github.com/bytecodealliance/wasmtime/pull/8789/commits/9638a94bda3cc6dfa23101b393ded52f4fd0bbdd</a>. Let me know what you think. I also removed some redundant <code>config.wasm_&lt;feature&gt;</code> for features that are now enabled by default (e.g. <code>reference_types</code>).</p>
</blockquote>



<a name="444560042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444560042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444560042">(Jun 13 2024 at 20:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8789#pullrequestreview-2117005490">PR review</a>:</p>
<blockquote>
<p>Looks great, and thanks!</p>
</blockquote>



<a name="444560052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444560052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444560052">(Jun 13 2024 at 20:55)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<a name="444562944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238789%20Initial%20migration%20to%20%60wasmtime_test%60/near/444562944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238789.20Initial.20migration.20to.20.60wasmtime_test.60.html#444562944">(Jun 13 2024 at 21:11)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8789">PR #8789</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>