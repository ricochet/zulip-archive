<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4076 Update QEMU to 7.0.0 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html">wasmtime / issue #4076 Update QEMU to 7.0.0</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="280382690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/280382690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#280382690">(Apr 27 2022 at 17:22)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1111274651">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>cc @uweigand for s390x issues (qemu is segfaulting) -- are there any known problems in qemu 7.0.0 wrt s390x support?</p>
</blockquote>



<a name="280503790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/280503790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#280503790">(Apr 28 2022 at 14:41)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1112292371">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>Alas perhaps an update another day!</p>
</blockquote>



<a name="280504037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/280504037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#280504037">(Apr 28 2022 at 14:42)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1112294337">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<blockquote>
<p>cc @uweigand for s390x issues (qemu is segfaulting) -- are there any known problems in qemu 7.0.0 wrt s390x support?</p>
</blockquote>
<p>I don't know of any known problems, but some regression may of course have crept in.  I'll try to reproduce a run with qemu 7.0.0 locally.</p>
</blockquote>



<a name="280533480"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/280533480" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#280533480">(Apr 28 2022 at 18:05)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1112510037">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>It seems this patch: <a href="https://lists.gnu.org/archive/html/qemu-devel/2021-09/msg07466.html">https://lists.gnu.org/archive/html/qemu-devel/2021-09/msg07466.html</a> is causing the problem.  This changes the layout of a data structure on the signal stack that user-space code relies upon.   Reverting the data structure change using the attached patch makes the problem go away for me.<br>
<a href="https://github.com/bytecodealliance/wasmtime/files/8585287/qemu-fix-s390-sigframe.txt">qemu-fix-s390-sigframe.txt</a></p>
</blockquote>



<a name="280537162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/280537162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#280537162">(Apr 28 2022 at 18:34)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1112535237">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>Oh nice! I don't know of any pressing need to land this so I think it's ok to wait for this to be resolved upstream in a release before we update.</p>
</blockquote>



<a name="285666085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/285666085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#285666085">(Jun 10 2022 at 12:06)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1152289128">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<blockquote>
<p>Oh nice! I don't know of any pressing need to land this so I think it's ok to wait for this to be resolved upstream in a release before we update.</p>
</blockquote>
<p>Just FYI the patch to fix this regression has now been merged; QEMU 7.1.0 should have the fix.</p>
</blockquote>



<a name="287188446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/287188446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#287188446">(Jun 23 2022 at 13:21)</a>:</h4>
<p>iii-i <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1164402014">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>I brought <code>ci/qemu-madvise.patch</code> upstream: <a href="https://lists.gnu.org/archive/html/qemu-devel/2022-06/msg03752.html">https://lists.gnu.org/archive/html/qemu-devel/2022-06/msg03752.html</a>.<br>
You should be able to drop it once you switch to 7.1.0.</p>
</blockquote>



<a name="287199905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234076%20Update%20QEMU%20to%207.0.0/near/287199905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234076.20Update.20QEMU.20to.207.2E0.2E0.html#287199905">(Jun 23 2022 at 14:38)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/4076#issuecomment-1164493085">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4076">issue #4076</a>:</p>
<blockquote>
<p>Oh awesome, thanks @iii-i!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>