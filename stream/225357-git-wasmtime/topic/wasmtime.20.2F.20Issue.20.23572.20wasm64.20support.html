<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #572 wasm64 support · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html">wasmtime / Issue #572 wasm64 support</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="191327615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/191327615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#191327615">(Mar 21 2020 at 04:20)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-601992256" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-601992256">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>There is now an official spec proposal repo, <a href="https://github.com/WebAssembly/memory64" target="_blank" title="https://github.com/WebAssembly/memory64">memory64</a>.</p>
</blockquote>



<a name="209738293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209738293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209738293">(Sep 11 2020 at 03:42)</a>:</h4>
<p>lygstate <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-690855420">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>When this going to happen?</p>
</blockquote>



<a name="209738426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209738426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209738426">(Sep 11 2020 at 03:46)</a>:</h4>
<p>aardappel <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-690856397">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>I've implemented wasm64 support in LLVM, LLD, WABT, now working on Binaryen..</p>
</blockquote>



<a name="209738730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209738730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209738730">(Sep 11 2020 at 03:56)</a>:</h4>
<p>lygstate <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-690858787">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>Wonderfull work, support in wasmtime would be relative harder?</p>
</blockquote>



<a name="209763711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209763711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209763711">(Sep 11 2020 at 10:22)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-691013281">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>Indeed, that's excellent progress, @aardappel!</p>
<blockquote>
<p>Wonderfull work, support in wasmtime would be relative harder?</p>
</blockquote>
<p>My understanding — which might be wrong — is that it's probably not a huge amount of work, but also non-trivial. @alexcrichton and @sunfishcode, ISTM we talked about this a while ago, do you happen to have an idea of the work involved to make this happen?</p>
</blockquote>



<a name="209768869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209768869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209768869">(Sep 11 2020 at 11:31)</a>:</h4>
<p>lygstate <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-691040228">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<blockquote>
<p>Indeed, that's excellent progress, @aardappel!</p>
<blockquote>
<p>Wonderfull work, support in wasmtime would be relative harder?</p>
</blockquote>
<p>My understanding — which might be wrong — is that it's probably not a huge amount of work, but also non-trivial. @alexcrichton and @sunfishcode, ISTM we talked about this a while ago, do you happen to have an idea of the work involved to make this happen?</p>
</blockquote>
<p>does the wasm64 and wasm32 have different abi？</p>
</blockquote>



<a name="209769506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209769506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209769506">(Sep 11 2020 at 11:38)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-691043063">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>They would need to have different abi's. Pointer size is part of the abi and they use different pointer sizes.</p>
</blockquote>



<a name="209817049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23572%20wasm64%20support/near/209817049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23572.20wasm64.20support.html#209817049">(Sep 11 2020 at 18:22)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/572#issuecomment-691245314">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/572">Issue #572</a>:</p>
<blockquote>
<p>I suspect this would be relatively simple to implement nowadays. The memory64 proposal is quite small, basically just changing memory-operating instructions to work with either 32 or 64-bit indices. The work in <code>wasmparser</code> is already done to implement the <code>memory64</code> proposal, so all that's needed to be done is to thread it all through cranelift. </p>
<p>At this time this probably won't be as well optimized as memory32 since we can't naively do the exact same guard page trick we do there (reserving a 32-bit region of the address space). That being said cranelift has all the internal machinery to insert manual checks on each load/store, so we'd just need to hook that up. Overall this is likely a simple-ish refactoring of the code translator to conditionally use 64 or 32-bit indices everywhere, depending on what type each memory has.</p>
<p>The <code>wasmtime</code> API itself may not even have to change at all for something like this. We might add a flag to <code>Memory</code> as to whether it's 64-bit or not, but otherwise everything is pretty much the same. Although ABIs are different that's only really an artifact of compilation toolchains, once you get to the runtime it's all basically just a wasm blob.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>