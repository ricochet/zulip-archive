<html>
<head><meta charset="utf-8"><title>wasmtime / issue #9506 wasi-nn: WinML failure in CI · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239506.20wasi-nn.3A.20WinML.20failure.20in.20CI.html">wasmtime / issue #9506 wasi-nn: WinML failure in CI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="478597661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239506%20wasi-nn%3A%20WinML%20failure%20in%20CI/near/478597661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239506.20wasi-nn.3A.20WinML.20failure.20in.20CI.html#478597661">(Oct 23 2024 at 23:11)</a>:</h4>
<p><a href="https://github.com/abrown">abrown</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/9506">Issue #9506</a>.</p>



<a name="478597662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239506%20wasi-nn%3A%20WinML%20failure%20in%20CI/near/478597662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239506.20wasi-nn.3A.20WinML.20failure.20in.20CI.html#478597662">(Oct 23 2024 at 23:11)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/issues/9506">issue #9506</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>@alexcrichton pointed out that the WinML backend of wasi-nn managed to segfault on CI:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/pull/9503#issuecomment-2433683294">conversation</a></li>
<li><a href="https://github.com/bytecodealliance/wasmtime/actions/runs/11489183176/job/31977480705#step:8:488">logs</a></li>
</ul>
<h3>Steps to Reproduce</h3>
<p>It's unclear how we'll reproduce this.</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: <code>main</code></p>
<p>Operating system: Windows (Microsoft Windows Server 2022)</p>
<p>Architecture: x64</p>
</blockquote>



<a name="478597718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239506%20wasi-nn%3A%20WinML%20failure%20in%20CI/near/478597718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239506.20wasi-nn.3A.20WinML.20failure.20in.20CI.html#478597718">(Oct 23 2024 at 23:12)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/issues/9506#issuecomment-2433742160">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9506">issue #9506</a>:</p>
<blockquote>
<p>cc: @jianjunz </p>
</blockquote>



<a name="478598543"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%239506%20wasi-nn%3A%20WinML%20failure%20in%20CI/near/478598543" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.239506.20wasi-nn.3A.20WinML.20failure.20in.20CI.html#478598543">(Oct 23 2024 at 23:20)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/9506#issuecomment-2433761356">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/9506">issue #9506</a>:</p>
<blockquote>
<p>Snippets of the log (since it'll go away in a few months) are:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">..</span><span class="p">.</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">tests</span><span class="err">\</span><span class="n">test</span><span class="o">-</span><span class="n">programs</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">deps</span><span class="err">\</span><span class="n">test_programs</span><span class="o">-</span><span class="n">d43fa5ca1c8e41fa</span><span class="p">.</span><span class="n">exe</span><span class="p">)</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">WinML</span><span class="w"> </span><span class="n">learning</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">LearningModelDevice</span><span class="p">(</span><span class="n">IUnknown</span><span class="p">(</span><span class="mh">0x23ce2bc8460</span><span class="p">)))</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">WinML</span><span class="w"> </span><span class="n">learning</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">LearningModelDevice</span><span class="p">(</span><span class="n">IUnknown</span><span class="p">(</span><span class="mh">0x23ce2bc8460</span><span class="p">)))</span>

<span class="n">running</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="n">tests</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_wit_image_classification_onnx</span><span class="w">            </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ignored</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_wit_image_classification_pytorch</span><span class="w">         </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">WinML</span><span class="w"> </span><span class="n">learning</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">LearningModelDevice</span><span class="p">(</span><span class="n">IUnknown</span><span class="p">(</span><span class="mh">0x23ce2bc87e0</span><span class="p">)))</span>
<span class="n">ignored</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_witx_image_classification_onnx</span><span class="w">           </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ignored</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_witx_image_classification_pytorch</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ignored</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">downloading</span><span class="p">:</span><span class="w"> </span><span class="s">"curl"</span><span class="w"> </span><span class="s">"--location"</span><span class="w"> </span><span class="s">"https://github.com/onnx/models/raw/bec48b6a70e5e9042c0badbaafefe4454e072d08/validated/vision/classification/mobilenet/model/mobilenetv2-10.onnx?download="</span><span class="w"> </span><span class="s">"--output"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">debug</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-wasi-nn-b2acdb39530e4cba</span><span class="se">\\</span><span class="s">out</span><span class="se">\\</span><span class="s">fixtures</span><span class="se">\\</span><span class="s">model.onnx"</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">downloading</span><span class="p">:</span><span class="w"> </span><span class="s">"curl"</span><span class="w"> </span><span class="s">"--location"</span><span class="w"> </span><span class="s">"https://github.com/intel/openvino-rs/raw/72d75601e9be394b3e8c7ff28313d66ef53ff358/crates/openvino/tests/fixtures/mobilenet/mobilenet.bin"</span><span class="w"> </span><span class="s">"--output"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">debug</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-wasi-nn-b2acdb39530e4cba</span><span class="se">\\</span><span class="s">out</span><span class="se">\\</span><span class="s">fixtures</span><span class="se">\\</span><span class="s">model.bin"</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">downloading</span><span class="p">:</span><span class="w"> </span><span class="s">"curl"</span><span class="w"> </span><span class="s">"--location"</span><span class="w"> </span><span class="s">"https://github.com/intel/openvino-rs/raw/72d75601e9be394b3e8c7ff28313d66ef53ff358/crates/openvino/tests/fixtures/mobilenet/mobilenet.xml"</span><span class="w"> </span><span class="s">"--output"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">debug</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-wasi-nn-b2acdb39530e4cba</span><span class="se">\\</span><span class="s">out</span><span class="se">\\</span><span class="s">fixtures</span><span class="se">\\</span><span class="s">model.xml"</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">downloading</span><span class="p">:</span><span class="w"> </span><span class="s">"curl"</span><span class="w"> </span><span class="s">"--location"</span><span class="w"> </span><span class="s">"https://github.com/intel/openvino-rs/raw/72d75601e9be394b3e8c7ff28313d66ef53ff358/crates/openvino/tests/fixtures/mobilenet/tensor-1x224x224x3-f32.bgr"</span><span class="w"> </span><span class="s">"--output"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">debug</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-wasi-nn-b2acdb39530e4cba</span><span class="se">\\</span><span class="s">out</span><span class="se">\\</span><span class="s">fixtures</span><span class="se">\\</span><span class="s">tensor.bgr"</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">bin</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">xml</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">tensor</span><span class="p">.</span><span class="n">bgr</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">bin</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">xml</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">tensor</span><span class="p">.</span><span class="n">bgr</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="p">#</span><span class="mi">0</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4004</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">886</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3958254</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">905</span><span class="p">,</span><span class="w"> </span><span class="mf">0.36464655</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span><span class="w"> </span><span class="mf">0.010480323</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">912</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0082290955</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">742</span><span class="p">,</span><span class="w"> </span><span class="mf">0.007244849</span><span class="p">)]</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_witx_image_classification_openvino</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">openvino</span><span class="w"> </span><span class="n">version</span><span class="p">:</span><span class="w"> </span><span class="mf">2024.4.0</span><span class="o">-</span><span class="mi">16579</span><span class="o">-</span><span class="n">c3152d32c9c</span><span class="o">-</span><span class="n">releases</span><span class="o">/</span><span class="mi">2024</span><span class="o">/</span><span class="mi">4</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">bin</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">xml</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">tensor</span><span class="p">.</span><span class="n">bgr</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="nc">Resource</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4004</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">886</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3958254</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">905</span><span class="p">,</span><span class="w"> </span><span class="mf">0.36464655</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span><span class="w"> </span><span class="mf">0.010480323</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">912</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0082290955</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">742</span><span class="p">,</span><span class="w"> </span><span class="mf">0.007244849</span><span class="p">)]</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_wit_image_classification_openvino_named</span><span class="w">  </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">WinML</span><span class="w"> </span><span class="n">learning</span><span class="w"> </span><span class="n">device</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">available</span><span class="p">:</span><span class="w"> </span><span class="nb">Ok</span><span class="p">(</span><span class="n">LearningModelDevice</span><span class="p">(</span><span class="n">IUnknown</span><span class="p">(</span><span class="mh">0x23ce6d92150</span><span class="p">)))</span>
<span class="o">&gt;</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">cached</span><span class="w"> </span><span class="n">artifact</span><span class="p">:</span><span class="w"> </span><span class="nc">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="o">-</span><span class="n">b2acdb39530e4cba</span><span class="err">\</span><span class="n">out</span><span class="err">\</span><span class="n">fixtures</span><span class="err">\</span><span class="n">model</span><span class="p">.</span><span class="n">onnx</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="nc">Resource</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4004</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">886</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3958254</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">905</span><span class="p">,</span><span class="w"> </span><span class="mf">0.36464655</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span><span class="w"> </span><span class="mf">0.010480323</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">912</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0082290955</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">742</span><span class="p">,</span><span class="w"> </span><span class="mf">0.007244849</span><span class="p">)]</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_wit_image_classification_openvino</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="nc">Resource</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">handle</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">963</span><span class="p">,</span><span class="w"> </span><span class="mf">14.325485</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">923</span><span class="p">,</span><span class="w"> </span><span class="mf">13.550032</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">762</span><span class="p">,</span><span class="w"> </span><span class="mf">13.373666</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">118</span><span class="p">,</span><span class="w"> </span><span class="mf">12.3188925</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">926</span><span class="p">,</span><span class="w"> </span><span class="mf">11.933905</span><span class="p">)]</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_wit_image_classification_winml_named</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="p">#</span><span class="mi">0</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">created</span><span class="w"> </span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="n">execution</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">ID</span><span class="p">:</span><span class="w"> </span><span class="nc">GraphExecutionContext</span><span class="p">#</span><span class="mi">0</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">input</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">602112</span><span class="w"> </span><span class="n">bytes</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4004</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">886</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3958254</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">905</span><span class="p">,</span><span class="w"> </span><span class="mf">0.36464655</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">85</span><span class="p">,</span><span class="w"> </span><span class="mf">0.010480323</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">912</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0082290955</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">742</span><span class="p">,</span><span class="w"> </span><span class="mf">0.007244849</span><span class="p">)]</span>
<span class="n">test</span><span class="w"> </span><span class="n">nn_witx_image_classification_openvino_named</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">executed</span><span class="w"> </span><span class="n">graph</span><span class="w"> </span><span class="n">inference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="n">ms</span>
<span class="p">[</span><span class="n">nn</span><span class="p">]</span><span class="w"> </span><span class="n">retrieved</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">tensor</span><span class="p">:</span><span class="w"> </span><span class="mi">4000</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">found</span><span class="w"> </span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">sorted</span><span class="w"> </span><span class="n">top</span><span class="w"> </span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">963</span><span class="p">,</span><span class="w"> </span><span class="mf">14.325485</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">923</span><span class="p">,</span><span class="w"> </span><span class="mf">13.550032</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">762</span><span class="p">,</span><span class="w"> </span><span class="mf">13.373666</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">118</span><span class="p">,</span><span class="w"> </span><span class="mf">12.3188925</span><span class="p">),</span><span class="w"> </span><span class="n">InferenceResult</span><span class="p">(</span><span class="mi">926</span><span class="p">,</span><span class="w"> </span><span class="mf">11.933905</span><span class="p">)]</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="o">--</span><span class="n">test</span><span class="w"> </span><span class="n">test</span><span class="o">-</span><span class="n">programs</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">wasmtime</span><span class="err">\</span><span class="n">target</span><span class="err">\</span><span class="n">debug</span><span class="err">\</span><span class="n">deps</span><span class="err">\</span><span class="n">test_programs</span><span class="o">-</span><span class="n">d43fa5ca1c8e41fa</span><span class="p">.</span><span class="n">exe</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">exit</span><span class="w"> </span><span class="n">code</span><span class="p">:</span><span class="w"> </span><span class="mh">0xc0000005</span><span class="p">,</span><span class="w"> </span><span class="n">STATUS_ACCESS_VIOLATION</span><span class="p">)</span>
<span class="n">D</span><span class="p">:</span><span class="err">\</span><span class="n">a</span><span class="err">\</span><span class="n">_temp</span><span class="err">\</span><span class="n">a500644d</span><span class="o">-</span><span class="n">a4c9</span><span class="o">-</span><span class="mi">4428</span><span class="o">-</span><span class="n">a896</span><span class="o">-</span><span class="mi">9463</span><span class="n">bc38ded7</span><span class="p">.</span><span class="n">sh</span><span class="p">:</span><span class="w"> </span><span class="nc">line</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="mi">1116</span><span class="w"> </span><span class="n">Segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w">      </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="o">-</span><span class="n">p</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">nn</span><span class="w"> </span><span class="o">--</span><span class="n">features</span><span class="w"> </span><span class="n">winml</span>
<span class="o">..</span><span class="p">.</span>
</code></pre></div><br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>