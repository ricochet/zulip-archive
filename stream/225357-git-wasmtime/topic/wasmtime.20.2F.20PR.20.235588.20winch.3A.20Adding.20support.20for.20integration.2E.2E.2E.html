<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5588 winch: Adding support for integration... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html">wasmtime / PR #5588 winch: Adding support for integration...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="322087843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322087843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322087843">(Jan 18 2023 at 15:56)</a>:</h4>
<p>KevinRizzoTO edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[x] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;</p>
<p>As discussed on our call, this PR adds support for integration tests to Winch in the style of the Cranelift <code>filetests</code> (for WAT). For information on how these work I've added documentation in the <code>winch/docs</code> folder <a href="https://github.com/bytecodealliance/wasmtime/blob/6bbb803859eae75baa201433fd90fadbb759c604/winch/docs/testing.md">here</a>. There are still some features missing that we are going to add as we continue the project, like support for sending shared flags through the test configuration. Winch doesn't use these currently so it's been omitted to keep this PR smaller.</p>
<p>I also took this as an opportunity to consolidate some dependencies into the top level <code>Cargo.toml</code>. Some dependencies used by Cranelift were needed for the Winch tests, so I wanted to make sure the version would be consistent and consolidated to a single location.<br>
</p>
</blockquote>



<a name="322088342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322088342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322088342">(Jan 18 2023 at 15:58)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322093573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093573">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#pullrequestreview-1253778862">PR review</a>.</p>



<a name="322093575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093575">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#pullrequestreview-1253778862">PR review</a>.</p>



<a name="322093577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093577">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073733496">PR review comment</a>:</p>
<blockquote>
<p>We can use the workspace version of this dependency. </p>
</blockquote>



<a name="322093578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093578">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073734904">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    // Without this, all functions are seen as dead code since they are only used in tests.
</code></pre></div><br>
</p>
</blockquote>



<a name="322093579"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093579" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093579">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073737537">PR review comment</a>:</p>
<blockquote>
<p>Would adding <code>#[cfg(test)]</code> above line 3 instead of this directive achieve the same result?</p>
</blockquote>



<a name="322093580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093580">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073741388">PR review comment</a>:</p>
<blockquote>
<p>Equally applies to the comments below. </p>
</blockquote>



<a name="322093581"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322093581" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322093581">(Jan 18 2023 at 16:19)</a>:</h4>
<p>saulecabrera created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073740929">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>/// Generate a test case for every .wat file in the filetests directory.
/// This should only be used from the filetests crate.
</code></pre></div><br>
</p>
</blockquote>



<a name="322100015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322100015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322100015">(Jan 18 2023 at 16:44)</a>:</h4>
<p>KevinRizzoTO submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#pullrequestreview-1253884902">PR review</a>.</p>



<a name="322100016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322100016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322100016">(Jan 18 2023 at 16:44)</a>:</h4>
<p>KevinRizzoTO created <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#discussion_r1073786621">PR review comment</a>:</p>
<blockquote>
<p>Oh yes it did! Forgot to add this in, thanks</p>
</blockquote>



<a name="322100301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322100301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322100301">(Jan 18 2023 at 16:45)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322101680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322101680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322101680">(Jan 18 2023 at 16:51)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322146900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322146900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322146900">(Jan 18 2023 at 20:32)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322150651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322150651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322150651">(Jan 18 2023 at 20:54)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322157652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322157652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322157652">(Jan 18 2023 at 21:33)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322162339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322162339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322162339">(Jan 18 2023 at 22:02)</a>:</h4>
<p>KevinRizzoTO updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a> from <code>winch-golden-tests</code> to <code>main</code>.</p>



<a name="322268257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322268257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322268257">(Jan 19 2023 at 12:31)</a>:</h4>
<p>saulecabrera submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5588#pullrequestreview-1261692779">PR review</a>.</p>



<a name="322268888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235588%20winch%3A%20Adding%20support%20for%20integration.../near/322268888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235588.20winch.3A.20Adding.20support.20for.20integration.2E.2E.2E.html#322268888">(Jan 19 2023 at 12:34)</a>:</h4>
<p>saulecabrera merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5588">PR #5588</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>