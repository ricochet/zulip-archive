<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4020 Question: Cranelift Self Compilation · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html">wasmtime / issue #4020 Question: Cranelift Self Compilation</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="278778888"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278778888" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278778888">(Apr 13 2022 at 02:59)</a>:</h4>
<p>jeff-hykin opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>For many years now I've been eargerly waiting for a language that can compile it's own compiler to wasm/wasi. I've talked with the guy who made the llvm to wasm demo (sadly that project has quickly been going nowhere). I've talked to some rust groups about compiling a minimal subset of a rust compiler to wasm. I've talked with some people from V-lang, etc.</p>
<p>So my question is, how unrealistic is it for cranelift to compile itself to wasm (a module function with IR input and  wasm-bytes output)? "Unrealistic" as-in; is there unavoidable multithreading, or raw assembly, etc in cranelift that would be a show-stopper for compiling it to WASM.</p>
<p>Thanks!</p>
</blockquote>



<a name="278778894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278778894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278778894">(Apr 13 2022 at 02:59)</a>:</h4>
<p>jeff-hykin edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>For many years now I've been eargerly waiting/searching for a language that can compile it's own compiler to wasm/wasi. I've talked with the guy who made the llvm to wasm demo (sadly that project has quickly been going nowhere). I've talked to some rust groups about compiling a minimal subset of a rust compiler to wasm. I've talked with some people from V-lang, etc.</p>
<p>So my question is, how unrealistic is it for cranelift to compile itself to wasm (a module function with IR input and  wasm-bytes output)? "Unrealistic" as-in; is there unavoidable multithreading, or raw assembly, etc in cranelift that would be a show-stopper for compiling it to WASM.</p>
<p>Thanks!</p>
</blockquote>



<a name="278779023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278779023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278779023">(Apr 13 2022 at 03:00)</a>:</h4>
<p>jeff-hykin edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>For many years now I've been eargerly waiting/searching for a language that can compile it's own compiler to wasm/wasi. I've talked with the guy who made the llvm to wasm demo (sadly that project has quickly been going nowhere). I've talked to some rust groups about compiling a minimal subset of a rust compiler to wasm. I've talked with some people from V-lang, etc.</p>
<p>So my question is, how unrealistic is it for cranelift to compile itself to wasm (a module function with IR input and  wasm-bytes output)? "How unrealistic" as-in; is there unavoidable multithreading, or raw assembly, etc in cranelift that would be a show-stopper for compiling it to WASM.</p>
<p>Thanks!</p>
</blockquote>



<a name="278779054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278779054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278779054">(Apr 13 2022 at 03:01)</a>:</h4>
<p>jeff-hykin edited <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>For many years now I've been eargerly waiting/searching for a language that can compile it's own compiler to wasm/wasi. I've talked with the guy who made the llvm to wasm demo (sadly that project has quickly been going nowhere). I've talked to some rust groups about compiling a minimal subset of a rust compiler to wasm. I've talked with some people from V-lang, etc.</p>
<p>So my question is, how unrealistic is it for cranelift to compile itself to wasm (a module function with IR input and  wasm-bytes output)? "How unrealistic" as-in; does cranelift have unavoidable multithreading, or raw assembly, etc that would be a show-stopper for compiling it to WASM.</p>
<p>Thanks!</p>
</blockquote>



<a name="278780639"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278780639" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278780639">(Apr 13 2022 at 03:37)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/4020#issuecomment-1097519891">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>Hi @jeff-hykin -- this use-case would mainly depend on support for generating Wasm bytecode, which we previously discussed a bit in #2566. I think that while it's not totally unrealistic, it's a major undertaking: Wasm as an ISA is very different from our current target architectures in several important ways (stack machine, unlimited "registers" (locals) hence maybe no or only simple regalloc, functions are a first-class machine feature rather than software-managed via stack conventions, structured control flow, etc). I'd encourage you to read over that thread for ideas and background.</p>
</blockquote>



<a name="278781038"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278781038" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278781038">(Apr 13 2022 at 03:46)</a>:</h4>
<p>jeff-hykin <a href="https://github.com/bytecodealliance/wasmtime/issues/4020#issuecomment-1097523380">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>Oh I'm actually embarrassed to admit I didn't realize WASM/WASI wasn't a cranelift backend. And I was just reading the internals of the IR last week <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> Thanks for the pointer to that thread.  That'll certainly resolve this issue for now.</p>
<p>I suppose I just associated wasmtime/bytecode-alliance/cranelift so much I had just always assumed WASM was a cranelift backend.</p>
</blockquote>



<a name="278781043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234020%20Question%3A%20Cranelift%20Self%20Compilation/near/278781043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234020.20Question.3A.20Cranelift.20Self.20Compilation.html#278781043">(Apr 13 2022 at 03:46)</a>:</h4>
<p>jeff-hykin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4020">issue #4020</a>:</p>
<blockquote>
<p>For many years now I've been eargerly waiting/searching for a language that can compile it's own compiler to wasm/wasi. I've talked with the guy who made the llvm to wasm demo (sadly that project has quickly been going nowhere). I've talked to some rust groups about compiling a minimal subset of a rust compiler to wasm. I've talked with some people from V-lang, etc.</p>
<p>So my question is, how unrealistic is it for cranelift to compile itself to wasm (a module function with IR input and  wasm-bytes output)? "How unrealistic" as-in; does cranelift have unavoidable multithreading, or raw assembly, etc that would be a show-stopper for compiling it to WASM.</p>
<p>Thanks!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>