<html>
<head><meta charset="utf-8"><title>wasmtime / PR #8598 Move wast tests to their own test suite · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html">wasmtime / PR #8598 Move wast tests to their own test suite</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="438143385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438143385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438143385">(May 12 2024 at 00:16)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438143386"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438143386" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438143386">(May 12 2024 at 00:16)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a> from <code>alexcrichton:custom-wast-harness</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit moves testing of <code>*.wast</code> files out of the <code>all</code> test suite binary and into its own separate binary. The motivation for this is well-described in #4861 with one of the chief reasons being that if the test suite is run and then a new file is added re-running the test suite won't see the file.</p>
<p>The <code>libtest-mimic</code> crate provides an easy way of regaining most of the features of the <code>libtest</code> harness such as parallel test execution and filters, meaning that it's pretty easy to switch everything over. The only slightly-tricky bit was redoing the filter for whether a test is ignored or not, but most of the pieces were copied over from the previous <code>build.rs</code> logic.</p>
<p>Closes #4861</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="438143387"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438143387" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438143387">(May 12 2024 at 00:16)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438143388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438143388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438143388">(May 12 2024 at 00:16)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438144529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438144529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438144529">(May 12 2024 at 00:41)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438211768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438211768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438211768">(May 12 2024 at 20:58)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#pullrequestreview-2051451351">PR review</a>:</p>
<blockquote>
<p>Oh I am excited for this. Thank you for doing it!</p>
</blockquote>



<a name="438211769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438211769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438211769">(May 12 2024 at 20:58)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#pullrequestreview-2051451351">PR review</a>:</p>
<blockquote>
<p>Oh I am excited for this. Thank you for doing it!</p>
</blockquote>



<a name="438211770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438211770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438211770">(May 12 2024 at 20:58)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#discussion_r1597711499">PR review comment</a>:</p>
<blockquote>
<p>If all tests are ignored on miri, can we just avoid constructing any trials in the first place?</p>
</blockquote>



<a name="438211771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438211771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438211771">(May 12 2024 at 20:58)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#discussion_r1597712226">PR review comment</a>:</p>
<blockquote>
<p>What happened to the indentation here? Anyway, can I suggest either using <code>["references", "tail-call", ...].contains(part)</code> or <code>match part { "references" | "tail-call" | ... }</code>, with the <code>starts_with</code> cases separate?</p>
</blockquote>



<a name="438393218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438393218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438393218">(May 13 2024 at 15:41)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438393352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438393352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438393352">(May 13 2024 at 15:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#pullrequestreview-2053066507">PR review</a>.</p>



<a name="438393355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438393355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438393355">(May 13 2024 at 15:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/8598#discussion_r1598687454">PR review comment</a>:</p>
<blockquote>
<p>Looks like some hard tabs snuck in by accident and rustfmt gives up in comments-interleaved-in-<code>if</code> condition. In any case your suggestion is much better!</p>
</blockquote>



<a name="438393365"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438393365" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438393365">(May 13 2024 at 15:42)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<a name="438400934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%238598%20Move%20wast%20tests%20to%20their%20own%20test%20suite/near/438400934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.238598.20Move.20wast.20tests.20to.20their.20own.20test.20suite.html#438400934">(May 13 2024 at 16:21)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/8598">PR #8598</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>