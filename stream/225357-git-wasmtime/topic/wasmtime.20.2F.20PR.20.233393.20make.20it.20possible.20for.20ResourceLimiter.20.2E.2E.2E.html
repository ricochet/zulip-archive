<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3393 make it possible for ResourceLimiter ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html">wasmtime / PR #3393 make it possible for ResourceLimiter ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="255326733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255326733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255326733">(Sep 29 2021 at 01:18)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="255407489"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407489" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407489">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766736756">PR review</a>.</p>



<a name="255407490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407490">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766736756">PR review</a>.</p>



<a name="255407491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407491">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718557635">PR review comment</a>:</p>
<blockquote>
<p>I've commented more about this below but I'd ideally prefer to not have this since if you're asking for the store and someone forgot to configure it that's a bug rather than something we'll gracefully want to handle.</p>
</blockquote>



<a name="255407492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407492">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718556326">PR review comment</a>:</p>
<blockquote>
<p>I think it's probably ok to skip the <code>limiter_</code> prefix on these methods (micro-nit)</p>
</blockquote>



<a name="255407493"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407493" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407493">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718551331">PR review comment</a>:</p>
<blockquote>
<p>This'll either need a different signature (taking <code>&amp;mut self</code>) or need to be <code>unsafe</code> because otherwise I don't think it's safe in Rust to go from <code>&amp;self</code> to <code>&amp;mut T</code></p>
</blockquote>



<a name="255407494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407494">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718561285">PR review comment</a>:</p>
<blockquote>
<p>To prevent all consumers fo this trait from using <code>async_trait</code> I think it might be good to change this to have a default implementation of calling the <code>memory_growing</code> method?</p>
<p>I think it's a bit of a bummer to have both methods because if you're async you only want one and if you're not async you only want the other, but I don't know otherwise of a great way to manage this.</p>
<p>This does raise the question though of what happens when <code>Memory::new</code> (or <code>Memory::grow</code>) is called when async is configured? Even some async embeddings don't necessarily want async memory growth so enabling async doesn't guarantee that this method is configured. Ideally it's an embedder bug if <code>Memory::new</code> is called when async memory growth is desired though.</p>
<p>I think this might mean that we'll want a method here (perhaps default <code>false</code>?) which indicates which growth method to use (sync-or-async) and we dispatch with that on memory growth?</p>
</blockquote>



<a name="255407495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407495">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718564783">PR review comment</a>:</p>
<blockquote>
<p>In addition to this change in this file I think we'll also want to add <code>Memory::new_async</code> and <code>Memory::grow_async</code> both as <code>async</code> methods. That may actually be pretty tricky though because currently the async implementation of <code>block_on</code> requires stack-switching and assumes we're on a wasm stack. </p>
<p>Otherwise adding these methods though would require open-coding a bit the limit logic where we could directly <code>.await</code> the future in these functions returned by the limiter. That may be the best route here though? (should ideally only be a small amount of duplication in the runtime implementation to have a method and an <code>async</code> method)</p>
</blockquote>



<a name="255407496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407496">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718558240">PR review comment</a>:</p>
<blockquote>
<p>Similar to <code>Memory</code> I think we'll want this to be <code>&amp;mut dyn Store</code> instead of an <code>Option</code></p>
</blockquote>



<a name="255407497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407497">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718554708">PR review comment</a>:</p>
<blockquote>
<p>With taking a store here instead of a limiter I think it's actually a bug in Wasmtime if we ever create a table/memory <em>without</em> a store because that means if there were a registered limiter we'd be skipping that. I think we probably want to change this constructor to take <code>&amp;mut dyn Store</code> instead of <code>Option&lt;_&gt;</code> to reflect that and we can fix it if it ever trips a panic (I don't believe it will checking Wasmtime's current usage).</p>
</blockquote>



<a name="255407498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407498">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718562111">PR review comment</a>:</p>
<blockquote>
<p>Does there need to be an async counterpart for this as well as <code>memory_grow_failed</code>? I figured the use case was "blocking" until there's enough memory to allow, but I'm not sure what sort of blocking work you'd want to do on growth failure.</p>
</blockquote>



<a name="255407499"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407499" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407499">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718557179">PR review comment</a>:</p>
<blockquote>
<p>That being said I'm also wary of this because anything that looks at the store should require that the store is set, so I'd ideally prefer to not have this method and if anyone needs to observe the store then they're on the path that already has the store set and it's safe to assert it's there.</p>
</blockquote>



<a name="255407500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407500">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718566511">PR review comment</a>:</p>
<blockquote>
<p>I think we'll need to handle this because in this case a trap means that the future was dropped on the outside, so we need to propagate this trap to wasm to make wasm "abort" gracefully as well. Basically once the future is dropped we just need to clean it up quickly so the thinking is to propagate the error all the way back to the start.</p>
</blockquote>



<a name="255407501"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407501" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407501">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718555894">PR review comment</a>:</p>
<blockquote>
<p>I think changing this to not-an-option will also propagate out relatively far-ish.  That's ok though because almost all instance allocation requests should have a store configured, only the initial blank module as well as host functions should skip their stores during construction, and the <code>Option</code>-handling is basically just here to make sure those two cases don't panic/segfault.</p>
</blockquote>



<a name="255407502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255407502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255407502">(Sep 29 2021 at 14:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718565699">PR review comment</a>:</p>
<blockquote>
<p>Ah yeah to expand on some thoughts from above, I don't think we'll want this conditional on the <code>async</code> cargo feature since that's on-by-default but rather some runtime configuration in the limiter itself which indicates which version to use.</p>
</blockquote>



<a name="255432327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255432327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255432327">(Sep 29 2021 at 16:45)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766950194">PR review</a>.</p>



<a name="255432328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255432328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255432328">(Sep 29 2021 at 16:45)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718705522">PR review comment</a>:</p>
<blockquote>
<p>Good point, I can probably leave this out. was keeping it in for completeness but I don't have a compelling use case</p>
</blockquote>



<a name="255432601"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255432601" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255432601">(Sep 29 2021 at 16:47)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766951589">PR review</a>.</p>



<a name="255432602"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255432602" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255432602">(Sep 29 2021 at 16:47)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718706590">PR review comment</a>:</p>
<blockquote>
<p>So, I tried having a default implementation, but it turns out that with async_trait those arent object-safe and rustc rejects them.</p>
<p>The other possibility is to have two public traits, <code>ResourceLimiter</code> and <code>ResourceLimiterAsync</code>, and an internal <code>enum RLimiter { Sync(&amp;mut dyn ResourceLimiter), Async(&amp;mut dyn ResourceLimiterAsync) }</code> and <code>StoreInner::limiter</code> has type <code>Option&lt;Box&lt;dyn FnMut(&amp;mut T) -&gt; RLimiter&gt;&gt;</code> and some chrome on the config methods to wrap the closure's return value in the Sync or Async variant.<br>
</p>
</blockquote>



<a name="255433020"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255433020" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255433020">(Sep 29 2021 at 16:49)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766954176">PR review</a>.</p>



<a name="255433021"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255433021" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255433021">(Sep 29 2021 at 16:49)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718708608">PR review comment</a>:</p>
<blockquote>
<p>Yep my initial constructor took just a <code>&amp;mut dyn Store</code> and the option fell out of some complications elsewhere, and I hadn't thought that all the way through to indicate a bug in Wasmtime. I'll have to chase that out.</p>
</blockquote>



<a name="255433562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255433562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255433562">(Sep 29 2021 at 16:52)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718710695">PR review comment</a>:</p>
<blockquote>
<p>Good point, I meant to check this assumption by you. I forgot about the whole future dropped thing.</p>
</blockquote>



<a name="255433563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255433563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255433563">(Sep 29 2021 at 16:52)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-766956937">PR review</a>.</p>



<a name="255465821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255465821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255465821">(Sep 29 2021 at 20:08)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-767139203">PR review</a>.</p>



<a name="255465822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/255465822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#255465822">(Sep 29 2021 at 20:08)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r718847282">PR review comment</a>:</p>
<blockquote>
<p>Ah ok then yeah I like your idea if we can't have defaulted <code>async fn</code> in traits, that seems reasonable to me and also solves the issue of async-runtime-still-uses-sync-limiter.</p>
</blockquote>



<a name="258295198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258295198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258295198">(Oct 20 2021 at 00:36)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258296896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258296896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258296896">(Oct 20 2021 at 00:58)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-783907286">PR review</a>.</p>



<a name="258296897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258296897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258296897">(Oct 20 2021 at 00:58)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r732342173">PR review comment</a>:</p>
<blockquote>
<p>This is done now!</p>
</blockquote>



<a name="258448726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258448726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258448726">(Oct 20 2021 at 21:39)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258462928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258462928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258462928">(Oct 20 2021 at 23:53)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258473315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258473315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258473315">(Oct 21 2021 at 01:34)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258555344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555344">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733728183">PR review comment</a>:</p>
<blockquote>
<p>With this new signature it may also be worth mentioning in the safety documentation that this is only safe if <code>store: &amp;mut dyn Store</code> is not used to get access to the <code>Memory</code> that lives within the store. Technically you could safely, from <code>store</code>, reach <code>self</code> via an instance and get two mutable references. So long as the trait implementation of <code>Store</code> doesn't do that though this should be safe.</p>
</blockquote>



<a name="258555345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555345">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-785760861">PR review</a>.</p>



<a name="258555346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555346">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733731176">PR review comment</a>:</p>
<blockquote>
<p>Ah this is a bummer, I tried to avoid this because if the instance didn't have any start function it would avoid the need for a fiber which can be somewhat expensive. I see though how this is required for memories/tables and limiting their growth. I think let's leave this as you have it here and if it's an issue in the future we can try to optimize the further if truly necessary (and it may not be at all necessary)</p>
</blockquote>



<a name="258555347"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555347" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555347">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733723675">PR review comment</a>:</p>
<blockquote>
<p>I think this can probably be removed now?</p>
</blockquote>



<a name="258555348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555348">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733725066">PR review comment</a>:</p>
<blockquote>
<p>Yeah I think that this will want to be <code>unsafe</code> b/c there's no guarantee that this <code>StorePtr</code> wasn't used outside the original lifetime of the borrow.</p>
</blockquote>



<a name="258555349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555349">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733738891">PR review comment</a>:</p>
<blockquote>
<p>This is one case where this can probably come up as a user error but we're not prepared to catch this panic and re-raise it across the boundary when we get back to wasm. Arguably we probably should <code>catch_panic</code> an intrinsic like this though because we're calling arbitrary user code limiting memory growth now that I think about it though.</p>
<p>Would you be up for adding a <code>catch_panic</code> around <a href="https://github.com/bytecodealliance/wasmtime/blob/e04357505eb05760f2ea94cebeef6e8370cd9458/crates/runtime/src/libcalls.rs#L187-L199">this block</a> (and the table version) which <a href="https://github.com/bytecodealliance/wasmtime/blob/e04357505eb05760f2ea94cebeef6e8370cd9458/crates/runtime/src/traphandlers.rs#L101-L111">reraises the panic</a>? (similar treatment for <code>table_grow</code> as well, and to be clear this isn't something new about this PR it's just something I'm realizing here. That wouldmake this <code>.expect</code> safe and we could leave it as-is.</p>
</blockquote>



<a name="258555350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555350">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733741034">PR review comment</a>:</p>
<blockquote>
<p>Ah yeah the meaning of this is that the future representing the execution of wasm was dropped by the host so the coroutine has been resumed and should "finish ASAP", so the trap here means "please stop executing code on the coroutine as fast as you can". To do that I think it'd be best to propagate the trap to wasm here, which should skip execution of all remaining wasm. I think that can be done by returning <code>Result&lt;bool, Trap&gt;</code> from this <code>Store</code> funtion most likely.</p>
</blockquote>



<a name="258555351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555351">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733723917">PR review comment</a>:</p>
<blockquote>
<p>stray newline removal?</p>
</blockquote>



<a name="258555352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555352">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-785760861">PR review</a>.</p>



<a name="258555356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555356">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733734391">PR review comment</a>:</p>
<blockquote>
<p>Could this (and other grow/new methods affected) have a <code># Panics</code> section which indicates the scenario where a non-async store is used will cause a panic? Also it might be good to link to the <code>store</code> method which configures the async limiter to indicate that it's how this is intended to be used.</p>
</blockquote>



<a name="258555357"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258555357" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258555357">(Oct 21 2021 at 14:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r733731756">PR review comment</a>:</p>
<blockquote>
<p>One thing I'll say though is that now that the inner loop of <code>run_async</code> and <code>run</code> are the same we could probably pull those into a shared method so they do precisely the same thing.</p>
</blockquote>



<a name="258598795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258598795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258598795">(Oct 21 2021 at 18:56)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258600876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258600876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258600876">(Oct 21 2021 at 19:10)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258601504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258601504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258601504">(Oct 21 2021 at 19:15)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258621662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258621662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258621662">(Oct 21 2021 at 21:40)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-786213792">PR review</a>.</p>



<a name="258621663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258621663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258621663">(Oct 21 2021 at 21:40)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r734057014">PR review comment</a>:</p>
<blockquote>
<p>Also, could you add a comment that the <code>catch_unwind</code> is specifically necessary here because we could run arbitrary user-provided code on growth?</p>
</blockquote>



<a name="258621665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258621665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258621665">(Oct 21 2021 at 21:40)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#pullrequestreview-786213792">PR review</a>.</p>



<a name="258621666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258621666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258621666">(Oct 21 2021 at 21:40)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/3393#discussion_r734056663">PR review comment</a>:</p>
<blockquote>
<p>Could this be structured with a <code>match</code> to avoid needing the <code>.unwrap()</code>?</p>
</blockquote>



<a name="258624887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258624887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258624887">(Oct 21 2021 at 22:07)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258626452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258626452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258626452">(Oct 21 2021 at 22:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258633161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258633161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258633161">(Oct 21 2021 at 23:24)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<a name="258634978"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233393%20make%20it%20possible%20for%20ResourceLimiter%20.../near/258634978" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233393.20make.20it.20possible.20for.20ResourceLimiter.20.2E.2E.2E.html#258634978">(Oct 21 2021 at 23:43)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3393">PR #3393</a> from <code>pch/async_limiting</code> to <code>main</code>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>