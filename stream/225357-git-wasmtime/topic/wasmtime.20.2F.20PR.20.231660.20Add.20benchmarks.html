<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1660 Add benchmarks · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html">wasmtime / PR #1660 Add benchmarks</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="196324654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196324654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196324654">(May 05 2020 at 15:33)</a>:</h4>
<p>Vurich opened <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift w.r.t. compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>. Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196324932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196324932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196324932">(May 05 2020 at 15:35)</a>:</h4>
<p>Vurich edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift w.r.t. compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks and the likely reliability of the results, I tried to dig into the code to make sure that what I thought was being run was actually being run (and likewise, what I didn't think would be run would definitely not be run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196324965"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196324965" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196324965">(May 05 2020 at 15:35)</a>:</h4>
<p>Vurich edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that what I thought was being run was actually being run (and likewise, what I didn't think would be run would definitely not be run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196325043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196325043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196325043">(May 05 2020 at 15:36)</a>:</h4>
<p>Vurich edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196325117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196325117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196325117">(May 05 2020 at 15:36)</a>:</h4>
<p>Vurich edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is actually measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196325126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196325126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196325126">(May 05 2020 at 15:36)</a>:</h4>
<p>Vurich edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196325136"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196325136" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196325136">(May 05 2020 at 15:36)</a>:</h4>
<p><strong>Vurich</strong> requested <a href="https://github.com/sunfishcode" title="https://github.com/sunfishcode">sunfishcode</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a>.</p>



<a name="196327777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196327777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196327777">(May 05 2020 at 15:56)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-405927550" title="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-405927550">PR Review</a>.</p>



<a name="196327778"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196327778" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196327778">(May 05 2020 at 15:56)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r420219724" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r420219724">PR Review Comment</a>:</p>
<blockquote>
<p>Will this disable the verifier for fuzzing?</p>
</blockquote>



<a name="196596110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196596110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196596110">(May 06 2020 at 07:21)</a>:</h4>
<p>Vurich submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-406357075" title="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-406357075">PR Review</a>.</p>



<a name="196596111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196596111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196596111">(May 06 2020 at 07:21)</a>:</h4>
<p>Vurich created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r420590164" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r420590164">PR Review Comment</a>:</p>
<blockquote>
<p>Great point, although I'm not sure if it actually will disable these checks in fuzzing - this file appears to only be for the spec test suite, and fuzzing should really have <code>debug_assertions</code> turned on anyway. Either way, I can easily revert this change, as I made it before I split the benchmarks into their own file - before, the tests and benchmarks were identical except that the benchmarks had <code>b.iter(|| {})</code> around <code>wast_context.run_file(wast)</code>. It's now not really necessary.</p>
</blockquote>



<a name="196596159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196596159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196596159">(May 06 2020 at 07:21)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196597006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196597006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196597006">(May 06 2020 at 07:33)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660" title="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>master</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e" title="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="196787905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787905">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-407586580" title="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-407586580">PR Review</a>.</p>



<a name="196787907"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787907" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787907">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-407586580" title="https://github.com/bytecodealliance/wasmtime/pull/1660#pullrequestreview-407586580">PR Review</a>.</p>



<a name="196787908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787908">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421593680" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421593680">PR Review Comment</a>:</p>
<blockquote>
<p>Could this file be renamed to perhaps <code>spec.rs</code> or something that indicates that it's benchmarking the spec test suite?</p>
<p>FWIW the spec test suite I don't think is really the most interesting of benchmarks, but at least for our own internal tracking and performance monitoring it probably isn't so bad to track!</p>
</blockquote>



<a name="196787909"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787909" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787909">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421594868" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421594868">PR Review Comment</a>:</p>
<blockquote>
<p>Could this be deduplicated with the <code>wasmtime-wast</code> crate? Perhaps something where a function to handle each directive is provided and then we say "run this file", or something like that?</p>
</blockquote>



<a name="196787910"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787910" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787910">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421593945" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421593945">PR Review Comment</a>:</p>
<blockquote>
<p>Would it be possible to use a hand-rolled <code>harness = false</code> scheme or something like <code>criterion</code> that works on stable?</p>
</blockquote>



<a name="196787911"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/196787911" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#196787911">(May 07 2020 at 15:30)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421594323" title="https://github.com/bytecodealliance/wasmtime/pull/1660#discussion_r421594323">PR Review Comment</a>:</p>
<blockquote>
<p>This I think is duplicated with the testing code as well as with the function below, could this all be consolidated into one function, perhaps in the <code>wasmtime-wast</code> crate itself?</p>
</blockquote>



<a name="202009363"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/202009363" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#202009363">(Jun 25 2020 at 18:49)</a>:</h4>
<p>alexcrichton edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="207377759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/207377759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#207377759">(Aug 19 2020 at 07:29)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="207385655"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/207385655" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#207385655">(Aug 19 2020 at 09:16)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="207646571"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/207646571" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#207646571">(Aug 21 2020 at 15:17)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="209521017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/209521017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#209521017">(Sep 09 2020 at 14:46)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="210244522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/210244522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#210244522">(Sep 16 2020 at 10:38)</a>:</h4>
<p>Vurich updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a> from <code>master</code> to <code>main</code>:</p>
<blockquote>
<p>So I wrote these benchmarks with the aim of getting a vague idea of how Lightbeam compares to Cranelift in compile-time and runtime performance, you can see the results in this gist <a href="https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e">https://gist.github.com/Vurich/8696e67180aa3c93b4548fb1f298c29e</a>.</p>
<p>I'd love any criticisms of the methodology used by these benchmarks w.r.t. the likely reliability of the results, I tried to dig into the code to make sure that, in the loop which is being measured, what I thought was being run was actually being run (and what I didn't think would be run was actually not being run), but I'd love if there were some holes to poke in the way that these benchmarks have been written.</p>
<p>Unfortunately, it changes the API of <code>wasmtime-wast</code> in order to make public a couple of functions (and one type returned by one of those functions) that the benchmarks need. I considered making these functions public only when <code>cfg(test)</code> is active, or to inline the benchmarks into that file itself instead of making a separate <code>benches</code> binary, but I figured that it would be more helpful to ask here what people would consider the best way to go about that. I personally didn't see anything majorly problematic with just making these methods public and it was the easiest method of implementation, so that's the method that I chose for the original version of this PR, with the understanding that I can change it later if necessary.</p>
</blockquote>



<a name="255087350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231660%20Add%20benchmarks/near/255087350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231660.20Add.20benchmarks.html#255087350">(Sep 27 2021 at 17:30)</a>:</h4>
<p>alexcrichton closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/1660">PR #1660</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>