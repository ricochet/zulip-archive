<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4758 cranelift-fuzzgen fuzzbug: &quot;interp... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html">wasmtime / issue #4758 cranelift-fuzzgen fuzzbug: &quot;interp...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="294896698"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/294896698" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#294896698">(Aug 23 2022 at 15:51)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>OSS-Fuzz: <a href="https://oss-fuzz.com/testcase-detail/4625103710715904">https://oss-fuzz.com/testcase-detail/4625103710715904</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">interpreter</span><span class="w"> </span><span class="n">failed</span>: <span class="nc">Error</span><span class="p">(</span><span class="n">StepError</span><span class="p">(</span><span class="n">UnknownFunction</span><span class="p">(</span><span class="n">fn0</span><span class="p">)))</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="o">/</span><span class="n">fuzz_targets</span><span class="o">/</span><span class="n">cranelift</span><span class="o">-</span><span class="n">fuzzgen</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">93</span><span class="p">](</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/wasmtime/blob/d620705a323e3da59bd90473b4e627c8502b1255/fuzz/fuzz_targets/cranelift-fuzzgen.rs#L93):36</span>
</code></pre></div>
<p>input:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">/////wH/////AP8B64L/</span>
</code></pre></div>
<p>cc @afonso360 </p>
</blockquote>



<a name="294901941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/294901941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#294901941">(Aug 23 2022 at 16:17)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1224297161">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>Formatted: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">ubuntu</span><span class="o">@</span><span class="n">instance</span><span class="o">-</span><span class="mi">20220805</span><span class="o">-</span><span class="mi">0848</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">fuzz</span><span class="w"> </span><span class="n">fmt</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">fuzzgen</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="mf">4758.</span><span class="k">in</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">features</span><span class="w"></span>

<span class="n">Output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fmt</span>::<span class="n">Debug</span><span class="err">`</span>:

<span class="p">;;</span><span class="w"> </span><span class="n">Fuzzgen</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"></span>

<span class="n">test</span><span class="w"> </span><span class="n">interpret</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">run</span><span class="w"></span>
<span class="n">set</span><span class="w"> </span><span class="n">enable_llvm_abi_extensions</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">aarch64</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">s390x</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span><span class="w"></span>

<span class="n">function</span><span class="w"> </span><span class="n">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"> </span><span class="n">system_v</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">sig0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">system_v</span><span class="w"></span>
<span class="w">    </span><span class="n">fn0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="n">u0</span>:<span class="mi">0</span><span class="w"> </span><span class="n">sig0</span><span class="w"></span>

<span class="n">block0</span>:
    <span class="nc">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">call</span><span class="w"> </span><span class="n">fn0</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">Note</span>: <span class="nc">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">placeholder</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">probably</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">wrong</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>I think this was introduced in #4155, and at the time I didn't think it would cause issues. I think the optimal fix for this is #4667 and subsequently adding support for generating multiple functions in fuzzgen (ensuring that we only produce valid references). </p>
<p>That way we don't have to disable important features for the <code>cranelift-icache</code> fuzzer.</p>
</blockquote>



<a name="294901977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/294901977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#294901977">(Aug 23 2022 at 16:17)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1224297161">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>Formatted: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">ubuntu</span><span class="o">@</span><span class="n">instance</span><span class="o">-</span><span class="mi">20220805</span><span class="o">-</span><span class="mi">0848</span>:<span class="o">~/</span><span class="n">git</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">fuzz</span><span class="w"> </span><span class="n">fmt</span><span class="w"> </span><span class="n">cranelift</span><span class="o">-</span><span class="n">fuzzgen</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="mf">4758.</span><span class="k">in</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">features</span><span class="w"></span>

<span class="n">Output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">std</span>::<span class="n">fmt</span>::<span class="n">Debug</span><span class="err">`</span>:

<span class="p">;;</span><span class="w"> </span><span class="n">Fuzzgen</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"></span>

<span class="n">test</span><span class="w"> </span><span class="n">interpret</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">run</span><span class="w"></span>
<span class="n">set</span><span class="w"> </span><span class="n">enable_llvm_abi_extensions</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">aarch64</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">s390x</span><span class="w"></span>
<span class="n">target</span><span class="w"> </span><span class="n">x86_64</span><span class="w"></span>

<span class="n">function</span><span class="w"> </span><span class="n">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"> </span><span class="n">system_v</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">sig0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">system_v</span><span class="w"></span>
<span class="w">    </span><span class="n">fn0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="n">u0</span>:<span class="mi">0</span><span class="w"> </span><span class="n">sig0</span><span class="w"></span>

<span class="n">block0</span>:
    <span class="nc">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">    </span><span class="n">call</span><span class="w"> </span><span class="n">fn0</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">Note</span>: <span class="nc">the</span><span class="w"> </span><span class="n">results</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">below</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">cases</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">simply</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">placeholder</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">probably</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">wrong</span><span class="w"></span>

<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
<span class="p">;</span><span class="w"> </span><span class="n">run</span>: <span class="nc">u0</span>:<span class="mi">1</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>I think this was introduced in #4155, and at the time I didn't think it would cause issues. I think the optimal fix for this is #4667 and subsequently adding support for generating multiple functions in fuzzgen (and ensuring that we only produce valid references). </p>
<p>That way we don't have to disable important features for the <code>cranelift-icache</code> fuzzer.</p>
</blockquote>



<a name="294903156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/294903156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#294903156">(Aug 23 2022 at 16:23)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1224305299">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>Oh! I was just looking at that part of the function generator last week, and wondering how that ever worked. I didn't realize it was introduced in the icache PR.</p>
</blockquote>



<a name="295269873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/295269873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#295269873">(Aug 25 2022 at 16:50)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1227521380">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>@bnjbvr and @cfallin: The incremental cache PR added support to cranelift_fuzzgen for generating random function calls. This is fine for the icache fuzz target which only compiles functions, so it doesn't care if the target of the call exists. But the fuzzgen target tries to run the generated functions so it needs the callee to exist.</p>
<p>How important is testing function calls to our confidence that the incremental cache is working? If we just turn off that part of the function generator, would that significantly reduce our confidence that we can detect bugs in the incremental cache?</p>
<p>Maybe we can parameterize the function generator over a list of other functions and libcalls that it can use. In the fuzzgen target we'd currently pass an empty list, and as work like #4667 develops we can add support there later. Then we'd move the current implementation of <code>generate_funcrefs</code> into the icache target and pass its output into the function generator. Does that seem sensible?</p>
</blockquote>



<a name="295270251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/295270251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#295270251">(Aug 25 2022 at 16:52)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1227523654">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<blockquote>
<p>How important is testing function calls to our confidence that the incremental cache is working?</p>
</blockquote>
<p>One of my main worries with a previous version of the incremental cache PR was that it would misbehave around function calls, so I did say pretty important.</p>
</blockquote>



<a name="295271593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/295271593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#295271593">(Aug 25 2022 at 16:59)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1227533723">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>I think we should be able to disable function calls by altering the <code>funcrefs_per_func</code> config on the fuzzer. I think if we don't generate function references we also never generate <code>call</code>'s. And its already a control that's built in so we just need to alter it slightly</p>
</blockquote>



<a name="295271807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/295271807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#295271807">(Aug 25 2022 at 17:00)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1227534471">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>Yes, one of two (IIRC?) ways that we are "resilient" in the incremental cache is when specific function references change but the shape of the CLIF remains the same; so we definitely want to test this. Luckily it sounds from above like it's pretty easy to parameterize this differently in different fuzz targets!</p>
</blockquote>



<a name="295272001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/295272001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#295272001">(Aug 25 2022 at 17:01)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/issues/4758#issuecomment-1227535394">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>This has the same issue as the other PR's that it changes the input format, so we won't be able to merge it, but its a pretty easy solution for now.</p>
</blockquote>



<a name="296003985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234758%20cranelift-fuzzgen%20fuzzbug%3A%20%22interp.../near/296003985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234758.20cranelift-fuzzgen.20fuzzbug.3A.20.22interp.2E.2E.2E.html#296003985">(Aug 29 2022 at 21:30)</a>:</h4>
<p>jameysharp closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4758">issue #4758</a>:</p>
<blockquote>
<p>OSS-Fuzz: <a href="https://oss-fuzz.com/testcase-detail/4625103710715904">https://oss-fuzz.com/testcase-detail/4625103710715904</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">interpreter</span><span class="w"> </span><span class="n">failed</span>: <span class="nc">Error</span><span class="p">(</span><span class="n">StepError</span><span class="p">(</span><span class="n">UnknownFunction</span><span class="p">(</span><span class="n">fn0</span><span class="p">)))</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="o">/</span><span class="n">fuzz_targets</span><span class="o">/</span><span class="n">cranelift</span><span class="o">-</span><span class="n">fuzzgen</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">93</span><span class="p">](</span><span class="n">https</span>:<span class="c1">//github.com/bytecodealliance/wasmtime/blob/d620705a323e3da59bd90473b4e627c8502b1255/fuzz/fuzz_targets/cranelift-fuzzgen.rs#L93):36</span>
</code></pre></div>
<p>input:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">/////wH/////AP8B64L/</span>
</code></pre></div>
<p>cc @afonso360 </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>