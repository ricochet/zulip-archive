<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9853 pulley: Implement integer vector comp... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html">wasmtime / PR #9853 pulley: Implement integer vector comp...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="489820104"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820104" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820104">(Dec 18 2024 at 18:41)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a> from <code>alexcrichton:pulley-simd-compare</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>More wast tests passing.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="489820106"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820106" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820106">(Dec 18 2024 at 18:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<a name="489820107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820107">(Dec 18 2024 at 18:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<a name="489820108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820108">(Dec 18 2024 at 18:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<a name="489820109"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820109" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820109">(Dec 18 2024 at 18:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<a name="489820111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489820111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489820111">(Dec 18 2024 at 18:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<a name="489824674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489824674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489824674">(Dec 18 2024 at 19:09)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#pullrequestreview-2512647936">PR review</a>:</p>
<blockquote>
<p>Thanks! Looks right to me; I checked over most of this for copy-pastos but am additionally trusting the runtests as a backstop. Item of stray curiosity below but nothing to block on.</p>
</blockquote>



<a name="489824676"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489824676" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489824676">(Dec 18 2024 at 19:09)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#discussion_r1890713171">PR review comment</a>:</p>
<blockquote>
<p>Stray curiosity: did you happen to look if LLVM can autovectorize this? It sure would be neat to have vector op implementations bottom out in native vector instructions when Pulley runs on a SIMD-capable host...</p>
<p>(No worries if not, it's not the main goal, but if it inspires anything then all the better)</p>
</blockquote>



<a name="489826324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489826324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489826324">(Dec 18 2024 at 19:20)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#pullrequestreview-2512677873">PR review</a>.</p>



<a name="489826325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489826325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489826325">(Dec 18 2024 at 19:20)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#discussion_r1890727136">PR review comment</a>:</p>
<blockquote>
<p>Heh I've been double-checking this along the way for most of the simd opcodes. The good news is yes! LLVM does a pretty good job at auto-vectorizing all these methods.</p>
<p>For example <code>vaddi32x4</code> looks like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="mi">0000000000000000</span><span class="w"> </span><span class="o">&lt;</span><span class="n">_ZN97_</span><span class="cp">$LT$pulley_interpreter</span><span class="o">..</span><span class="n">interp</span><span class="o">..</span><span class="n">Interpreter</span><span class="cp">$u20$as$u20$pulley_interpreter</span><span class="o">..</span><span class="n">decode</span><span class="o">..</span><span class="n">OpVisitor</span><span class="cp">$GT$</span><span class="mi">9</span><span class="n">vaddi32x417h24bc21fe57c19519E</span><span class="o">&gt;</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="mi">48</span><span class="w"> </span><span class="mi">8</span><span class="n">b</span><span class="w"> </span><span class="mi">07</span><span class="w">                </span><span class="n">mov</span><span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="n">rdi</span><span class="p">),</span><span class="o">%</span><span class="n">rax</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w">   </span><span class="mi">89</span><span class="w"> </span><span class="n">f1</span><span class="w">                   </span><span class="n">mov</span><span class="w">    </span><span class="o">%</span><span class="n">esi</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">   </span><span class="mi">5</span><span class="p">:</span><span class="w">   </span><span class="mi">40</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="n">b6</span><span class="w"> </span><span class="n">d6</span><span class="w">             </span><span class="n">movzbl</span><span class="w"> </span><span class="o">%</span><span class="n">sil</span><span class="p">,</span><span class="o">%</span><span class="n">edx</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">ee</span><span class="w"> </span><span class="mi">04</span><span class="w">                </span><span class="n">shr</span><span class="w">    </span><span class="cp">$</span><span class="mh">0x4</span><span class="p">,</span><span class="o">%</span><span class="n">esi</span>
<span class="w">   </span><span class="n">c</span><span class="p">:</span><span class="w">   </span><span class="mi">81</span><span class="w"> </span><span class="n">e6</span><span class="w"> </span><span class="n">f0</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="mi">00</span><span class="w"> </span><span class="mi">00</span><span class="w">       </span><span class="n">and</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xff0</span><span class="p">,</span><span class="o">%</span><span class="n">esi</span>
<span class="w">  </span><span class="mi">12</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">e9</span><span class="w"> </span><span class="mi">0</span><span class="n">c</span><span class="w">                </span><span class="n">shr</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xc</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">  </span><span class="mi">15</span><span class="p">:</span><span class="w">   </span><span class="mi">81</span><span class="w"> </span><span class="n">e1</span><span class="w"> </span><span class="n">f0</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="mi">00</span><span class="w"> </span><span class="mi">00</span><span class="w">       </span><span class="n">and</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xff0</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">  </span><span class="mi">1</span><span class="n">b</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">e2</span><span class="w"> </span><span class="mi">04</span><span class="w">                </span><span class="n">shl</span><span class="w">    </span><span class="cp">$</span><span class="mh">0x4</span><span class="p">,</span><span class="o">%</span><span class="n">edx</span>
<span class="w">  </span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="mi">6</span><span class="n">f</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">30</span><span class="w">          </span><span class="n">vmovdqa</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rsi</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="o">%</span><span class="n">xmm0</span>
<span class="w">  </span><span class="mi">23</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="n">fe</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">08</span><span class="w">          </span><span class="n">vpaddd</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rcx</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="o">%</span><span class="n">xmm0</span><span class="p">,</span><span class="o">%</span><span class="n">xmm0</span>
<span class="w">  </span><span class="mi">28</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="mi">7</span><span class="n">f</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">10</span><span class="w">          </span><span class="n">vmovdqa</span><span class="w"> </span><span class="o">%</span><span class="n">xmm0</span><span class="p">,(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rdx</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="mi">2</span><span class="n">d</span><span class="p">:</span><span class="w">   </span><span class="mi">31</span><span class="w"> </span><span class="n">c0</span><span class="w">                   </span><span class="n">xor</span><span class="w">    </span><span class="o">%</span><span class="n">eax</span><span class="p">,</span><span class="o">%</span><span class="n">eax</span>
<span class="w">  </span><span class="mi">2</span><span class="n">f</span><span class="p">:</span><span class="w">   </span><span class="nc">c3</span><span class="w">                      </span><span class="n">ret</span>
</code></pre></div>
<p>and the method here looks like this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="mi">0000000000000000</span><span class="w"> </span><span class="o">&lt;</span><span class="n">_ZN105_</span><span class="cp">$LT$pulley_interpreter</span><span class="o">..</span><span class="n">interp</span><span class="o">..</span><span class="n">Interpreter</span><span class="cp">$u20$as$u20$pulley_interpreter</span><span class="o">..</span><span class="n">decode</span><span class="o">..</span><span class="n">ExtendedOpVisitor</span><span class="cp">$GT$</span><span class="mi">7</span><span class="n">veq8x1617h73aa3ce30a2d51abE</span><span class="o">&gt;</span><span class="p">:</span>
<span class="w">   </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="mi">48</span><span class="w"> </span><span class="mi">8</span><span class="n">b</span><span class="w"> </span><span class="mi">07</span><span class="w">                </span><span class="n">mov</span><span class="w">    </span><span class="p">(</span><span class="o">%</span><span class="n">rdi</span><span class="p">),</span><span class="o">%</span><span class="n">rax</span>
<span class="w">   </span><span class="mi">3</span><span class="p">:</span><span class="w">   </span><span class="mi">89</span><span class="w"> </span><span class="n">f1</span><span class="w">                   </span><span class="n">mov</span><span class="w">    </span><span class="o">%</span><span class="n">esi</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">   </span><span class="mi">5</span><span class="p">:</span><span class="w">   </span><span class="mi">40</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="n">b6</span><span class="w"> </span><span class="n">d6</span><span class="w">             </span><span class="n">movzbl</span><span class="w"> </span><span class="o">%</span><span class="n">sil</span><span class="p">,</span><span class="o">%</span><span class="n">edx</span>
<span class="w">   </span><span class="mi">9</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">ee</span><span class="w"> </span><span class="mi">04</span><span class="w">                </span><span class="n">shr</span><span class="w">    </span><span class="cp">$</span><span class="mh">0x4</span><span class="p">,</span><span class="o">%</span><span class="n">esi</span>
<span class="w">   </span><span class="n">c</span><span class="p">:</span><span class="w">   </span><span class="mi">81</span><span class="w"> </span><span class="n">e6</span><span class="w"> </span><span class="n">f0</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="mi">00</span><span class="w"> </span><span class="mi">00</span><span class="w">       </span><span class="n">and</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xff0</span><span class="p">,</span><span class="o">%</span><span class="n">esi</span>
<span class="w">  </span><span class="mi">12</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">e9</span><span class="w"> </span><span class="mi">0</span><span class="n">c</span><span class="w">                </span><span class="n">shr</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xc</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">  </span><span class="mi">15</span><span class="p">:</span><span class="w">   </span><span class="mi">81</span><span class="w"> </span><span class="n">e1</span><span class="w"> </span><span class="n">f0</span><span class="w"> </span><span class="mi">0</span><span class="n">f</span><span class="w"> </span><span class="mi">00</span><span class="w"> </span><span class="mi">00</span><span class="w">       </span><span class="n">and</span><span class="w">    </span><span class="cp">$</span><span class="mh">0xff0</span><span class="p">,</span><span class="o">%</span><span class="n">ecx</span>
<span class="w">  </span><span class="mi">1</span><span class="n">b</span><span class="p">:</span><span class="w">   </span><span class="nc">c1</span><span class="w"> </span><span class="n">e2</span><span class="w"> </span><span class="mi">04</span><span class="w">                </span><span class="n">shl</span><span class="w">    </span><span class="cp">$</span><span class="mh">0x4</span><span class="p">,</span><span class="o">%</span><span class="n">edx</span>
<span class="w">  </span><span class="mi">1</span><span class="n">e</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="mi">6</span><span class="n">f</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">30</span><span class="w">          </span><span class="n">vmovdqa</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rsi</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="o">%</span><span class="n">xmm0</span>
<span class="w">  </span><span class="mi">23</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="mi">74</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">08</span><span class="w">          </span><span class="n">vpcmpeqb</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rcx</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="o">%</span><span class="n">xmm0</span><span class="p">,</span><span class="o">%</span><span class="n">xmm0</span>
<span class="w">  </span><span class="mi">28</span><span class="p">:</span><span class="w">   </span><span class="nc">c5</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="mi">7</span><span class="n">f</span><span class="w"> </span><span class="mi">04</span><span class="w"> </span><span class="mi">10</span><span class="w">          </span><span class="n">vmovdqa</span><span class="w"> </span><span class="o">%</span><span class="n">xmm0</span><span class="p">,(</span><span class="o">%</span><span class="n">rax</span><span class="p">,</span><span class="o">%</span><span class="n">rdx</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="mi">2</span><span class="n">d</span><span class="p">:</span><span class="w">   </span><span class="mi">31</span><span class="w"> </span><span class="n">c0</span><span class="w">                   </span><span class="n">xor</span><span class="w">    </span><span class="o">%</span><span class="n">eax</span><span class="p">,</span><span class="o">%</span><span class="n">eax</span>
<span class="w">  </span><span class="mi">2</span><span class="n">f</span><span class="p">:</span><span class="w">   </span><span class="nc">c3</span><span class="w">                      </span><span class="n">ret</span>
</code></pre></div>
<p>Most of the complexity here is decoding <code>BinaryOperands&lt;VReg&gt;</code> where it's three 5-bit values packed into a 16-bit value, but otherwise it's pretty optimal in terms of lowering.</p>
</blockquote>



<a name="489826486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489826486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489826486">(Dec 18 2024 at 19:21)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#pullrequestreview-2512682256">PR review</a>.</p>



<a name="489826487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489826487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489826487">(Dec 18 2024 at 19:21)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/9853#discussion_r1890728726">PR review comment</a>:</p>
<blockquote>
<p>Nice, that's great!</p>
</blockquote>



<a name="489827592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239853%20pulley%3A%20Implement%20integer%20vector%20comp.../near/489827592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239853.20pulley.3A.20Implement.20integer.20vector.20comp.2E.2E.2E.html#489827592">(Dec 18 2024 at 19:28)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9853">PR #9853</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>