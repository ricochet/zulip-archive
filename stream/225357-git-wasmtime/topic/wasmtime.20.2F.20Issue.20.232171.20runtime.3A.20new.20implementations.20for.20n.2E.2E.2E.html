<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2171 runtime: new implementations for n... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html">wasmtime / Issue #2171 runtime: new implementations for n...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="208445855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208445855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208445855">(Aug 29 2020 at 17:54)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683322507">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Thanks for this! Do you have some wall-clock benchmarks as well which show the improvement?</p>
</blockquote>



<a name="208446027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208446027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208446027">(Aug 29 2020 at 17:58)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683322975">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>no, I just compared metrics from llvm-mca. Btw it will be great to have some online benchmark tools like <a href="https://quick-bench.com"><code>quick-bench.com</code></a> which allow you bench on different architectures and version of compiler</p>
</blockquote>



<a name="208452900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208452900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208452900">(Aug 29 2020 at 20:37)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results:</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
</blockquote>



<a name="208452954"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208452954" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208452954">(Aug 29 2020 at 20:38)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results:</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed in 3 times faster</p>
</blockquote>



<a name="208453143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208453143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208453143">(Aug 29 2020 at 20:43)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results:</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed approach in 3 times faster</p>
</blockquote>



<a name="208453294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208453294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208453294">(Aug 29 2020 at 20:46)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results:</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed approach in 3 times faster</p>
<p>And btw all this was expected from llvm-mca metrics. I choose <code>nearest_copysign</code> due to potentially it could have better speed on ARMs </p>
</blockquote>



<a name="208453324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208453324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208453324">(Aug 29 2020 at 20:47)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results:</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed approach in 3 times faster</p>
<p>And btw all this was expected from llvm-mca metrics. I choose <code>nearest_copysign</code> due to potentially it could have better performance on ARMs </p>
</blockquote>



<a name="208453450"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208453450" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208453450">(Aug 29 2020 at 20:51)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results on my MacBook Pro (15-inch 2019, 2,3 GHz 8-cores i9):</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed approach in 3 times faster</p>
<p>And btw all this was expected from llvm-mca metrics. I choose <code>nearest_copysign</code> due to potentially it could have better performance on ARMs </p>
</blockquote>



<a name="208453511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208453511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208453511">(Aug 29 2020 at 20:53)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683339394">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Here benchmark results on MacBook Pro (15-inch 2019, 2,3 GHz 8-cores i9):</p>
<p><a href="https://gist.github.com/MaxGraey/a826c71909353e3a28a54e8a749c06ac">benchmark code</a></p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">973</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="mi">049</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">935</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">135</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">115</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">961</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">102</span><span class="p">,</span><span class="mi">740</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="mi">607</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>nearest_original</code> is original function in wasmtime<br>
<code>nearest_copysign</code> is proposed in current PR.</p>
<p>So it seems new proposed approach in 3 times faster</p>
<p>And btw all this was expected from llvm-mca metrics. I choose <code>nearest_copysign</code> due to potentially it could have better performance on ARMs </p>
</blockquote>



<a name="208457345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208457345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208457345">(Aug 29 2020 at 22:37)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683349114">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>@alexcrichton I'm wondering is it possible use <a href="https://doc.rust-lang.org/1.29.0/core/arch/x86/fn._mm_round_pd.html"><code>sse4.1 _mm_round_pd intrinsic</code></a> for this in wasmtime? And fallback to current polyfill for rest of architectures</p>
</blockquote>



<a name="208457489"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208457489" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208457489">(Aug 29 2020 at 22:40)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683349114">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>@alexcrichton I'm wondering is it possible use <a href="https://doc.rust-lang.org/1.29.0/core/arch/x86/fn._mm_round_pd.html"><code>sse4.1 _mm_round_pd(ps) intrinsic</code></a> for this in wasmtime? And fallback to current polyfill for rest of architectures</p>
</blockquote>



<a name="208474391"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208474391" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208474391">(Aug 30 2020 at 08:12)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683390776">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>The <code>NearestF32</code> and <code>NearestF64</code> libcalls are already a fallback for when there is no hardware instruction to do this. The old style x86 backend already uses <code>roundss</code> and <code>roundsd</code>: <a href="https://github.com/bytecodealliance/wasmtime/blob/5c5a30f76c35e15697fc150fb00c4b86be621d66/cranelift/codegen/meta/src/isa/x86/encodings.rs#L1341-L1345">https://github.com/bytecodealliance/wasmtime/blob/5c5a30f76c35e15697fc150fb00c4b86be621d66/cranelift/codegen/meta/src/isa/x86/encodings.rs#L1341-L1345</a> The new style x86_64 backend has a todo for this: <a href="https://github.com/bytecodealliance/wasmtime/blob/8ac4bd1d0d8228b97a88b1841cfc0247e9ef4306/cranelift/codegen/src/isa/x64/lower.rs#L1749">https://github.com/bytecodealliance/wasmtime/blob/8ac4bd1d0d8228b97a88b1841cfc0247e9ef4306/cranelift/codegen/src/isa/x64/lower.rs#L1749</a></p>
</blockquote>



<a name="208474494"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208474494" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208474494">(Aug 30 2020 at 08:16)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683391073">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>@bjorn3 Good to know. Thanks!</p>
</blockquote>



<a name="208474690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208474690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208474690">(Aug 30 2020 at 08:23)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683349114">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>~@alexcrichton I'm wondering is it possible use <a href="https://doc.rust-lang.org/1.29.0/core/arch/x86/fn._mm_round_pd.html"><code>sse4.1 _mm_round_pd(ps) intrinsic</code></a> for this in wasmtime? And fallback to current polyfill for rest of architectures~~</p>
</blockquote>



<a name="208474691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208474691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208474691">(Aug 30 2020 at 08:23)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683349114">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p><del>@alexcrichton I'm wondering is it possible use <a href="https://doc.rust-lang.org/1.29.0/core/arch/x86/fn._mm_round_pd.html"><code>sse4.1 _mm_round_pd(ps) intrinsic</code></a> for this in wasmtime? And fallback to current polyfill for rest of architectures</del></p>
</blockquote>



<a name="208475714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208475714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208475714">(Aug 30 2020 at 08:58)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist. Update results (via <code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>):</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">344</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">691</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">893</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">300</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">487</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">328</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">51</span><span class="p">,</span><span class="mi">732</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">668</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">20</span><span class="p">,</span><span class="mi">537</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">958</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208477599"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208477599" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208477599">(Aug 30 2020 at 09:59)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist. Update results (via <code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>):</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">322</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">160</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">783</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="mi">887</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">049</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">080</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">751</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">244</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">452</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">967</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208479719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208479719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208479719">(Aug 30 2020 at 11:02)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist.</p>
<p><strong>Upd</strong><br>
<code>cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">31</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">883</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">911</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">852</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">282</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">079</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">106</span><span class="p">,</span><span class="mi">932</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="mi">186</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">41</span><span class="p">,</span><span class="mi">642</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">501</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


<p><code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">554</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="mi">914</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">44</span><span class="p">,</span><span class="mi">846</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">056</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">609</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">196</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">212</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">702</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">542</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">766</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208479851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208479851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208479851">(Aug 30 2020 at 11:05)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist.</p>
<p><strong>Upd</strong><br>
<code>cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">31</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">883</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">911</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">852</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">282</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">079</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">106</span><span class="p">,</span><span class="mi">932</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="mi">186</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">41</span><span class="p">,</span><span class="mi">642</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">501</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="n">implementation</span><span class="w"></span>
</code></pre></div>


<p><code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">554</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="mi">914</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">44</span><span class="p">,</span><span class="mi">846</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">056</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">609</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">196</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">212</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">702</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">542</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">766</span><span class="p">)</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208479914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208479914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208479914">(Aug 30 2020 at 11:07)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist.</p>
<p><strong>Upd</strong><br>
<code>cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">31</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">883</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">911</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">852</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">282</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">079</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">106</span><span class="p">,</span><span class="mi">932</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="mi">186</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">41</span><span class="p">,</span><span class="mi">642</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">501</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="n">implementation</span><span class="w"></span>
</code></pre></div>


<p><code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">554</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="mi">914</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">44</span><span class="p">,</span><span class="mi">846</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">056</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">609</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">196</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">212</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">702</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">542</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">766</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">rael</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">roundpd</span><span class="err">`</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208479920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208479920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208479920">(Aug 30 2020 at 11:07)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist.</p>
<p><strong>Upd</strong><br>
<code>cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">31</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">883</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">911</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">852</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">282</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">079</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">106</span><span class="p">,</span><span class="mi">932</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="mi">186</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">41</span><span class="p">,</span><span class="mi">642</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">501</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="n">implementation</span><span class="w"></span>
</code></pre></div>


<p><code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">554</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="mi">914</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">44</span><span class="p">,</span><span class="mi">846</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">056</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">609</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">196</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">212</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">702</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">542</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">766</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">real</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">roundpd</span><span class="err">`</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208479930"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208479930" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208479930">(Aug 30 2020 at 11:07)</a>:</h4>
<p>MaxGraey edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683394965">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Also added sse 4.1 intrinsic to gist.</p>
<p><strong>Upd</strong><br>
<code>cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">31</span><span class="p">,</span><span class="mi">500</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">883</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">35</span><span class="p">,</span><span class="mi">911</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="mi">852</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">32</span><span class="p">,</span><span class="mi">282</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="mi">079</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:     <span class="mi">106</span><span class="p">,</span><span class="mi">932</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="mi">186</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">41</span><span class="p">,</span><span class="mi">642</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">501</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">fallback</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">soft</span><span class="w"> </span><span class="n">implementation</span><span class="w"></span>
</code></pre></div>


<p><code>RUSTFLAGS='-C target-cpu=native' cargo bench</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">nearest_abs_copysign</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">29</span><span class="p">,</span><span class="mi">554</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="mi">914</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_branch</span><span class="w">       </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">44</span><span class="p">,</span><span class="mi">846</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="mi">056</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_copysign</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">33</span><span class="p">,</span><span class="mi">609</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="mi">196</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_original</span><span class="w">     </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">52</span><span class="p">,</span><span class="mi">212</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">702</span><span class="p">)</span><span class="w"></span>
<span class="n">test</span><span class="w"> </span><span class="n">nearest_sse41</span><span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">bench</span>:      <span class="mi">19</span><span class="p">,</span><span class="mi">542</span><span class="w"> </span><span class="n">ns</span><span class="o">/</span><span class="n">iter</span><span class="w"> </span><span class="p">(</span><span class="o">+/-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">766</span><span class="p">)</span><span class="w">  </span><span class="p">;;</span><span class="w"> </span><span class="n">real</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">roundpd</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">x86_64</span><span class="w"></span>
</code></pre></div>


</blockquote>



<a name="208499232"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208499232" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208499232">(Aug 30 2020 at 19:00)</a>:</h4>
<p>MaxGraey <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683457258">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Squashed commits</p>
</blockquote>



<a name="208583922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232171%20runtime%3A%20new%20implementations%20for%20n.../near/208583922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232171.20runtime.3A.20new.20implementations.20for.20n.2E.2E.2E.html#208583922">(Aug 31 2020 at 16:39)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/pull/2171#issuecomment-683892933">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2171">Issue #2171</a>:</p>
<blockquote>
<p>Great, thanks!</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>