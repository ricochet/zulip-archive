<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4908 ISLE: add support for multi-extrac... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html">wasmtime / issue #4908 ISLE: add support for multi-extrac...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="298690718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234908%20ISLE%3A%20add%20support%20for%20multi-extrac.../near/298690718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html#298690718">(Sep 14 2022 at 01:42)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/4908#issuecomment-1246125134">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4908">issue #4908</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="299648028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234908%20ISLE%3A%20add%20support%20for%20multi-extrac.../near/299648028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html#299648028">(Sep 19 2022 at 21:27)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4908#issuecomment-1251580298">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4908">issue #4908</a>:</p>
<blockquote>
<p>Updated, thanks!</p>
</blockquote>



<a name="299841205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234908%20ISLE%3A%20add%20support%20for%20multi-extrac.../near/299841205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html#299841205">(Sep 20 2022 at 20:17)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4908#issuecomment-1252865818">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4908">issue #4908</a>:</p>
<blockquote>
<p>I still need to read this more carefully, but I think it looks good.</p>
<p>One question so far: what's the intended difference between returning <code>Some</code> with an empty iterator, versus returning <code>None</code>? Put another way, what would we lose if we remove the <code>Option</code> wrapper from those return types? I understand the use of <code>Option</code> for fallible non-multi extractors, but I'm not sure how that extends here. I'd prefer to just use an empty iterator to indicate that the extractor failed, if that's not too much trouble, because otherwise the types appear to permit two ways of encoding the same situation.</p>
<p>I don't see any documentation for how someone writing an external multi-extractor should implement the auto-generated traits. I don't think that's strictly necessary before merging this, but if that documentation existed then I would look for the answer to the above question there.</p>
</blockquote>



<a name="299841675"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234908%20ISLE%3A%20add%20support%20for%20multi-extrac.../near/299841675" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html#299841675">(Sep 20 2022 at 20:20)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/4908#issuecomment-1252868450">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4908">issue #4908</a>:</p>
<blockquote>
<blockquote>
<p>One question so far: what's the intended difference between returning Some with an empty iterator, versus returning None? </p>
</blockquote>
<p>That's a good question. Functionally there is no difference, and the main reason is just to manage complexity: otherwise we have a special case wherever we have a match failure in that we have to invent an empty iterator rather than return <code>None</code>. If it were one code-generator site then maybe that's fine, but we also use the <code>?</code> operator everywhere and I didn't want to work out how to get auto-conversions going with that. It's simpler to stick to the invariant that all constructors live in the <code>Option</code> monad and let the <code>Try</code> magic do its thing.</p>
</blockquote>



<a name="300054535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234908%20ISLE%3A%20add%20support%20for%20multi-extrac.../near/300054535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234908.20ISLE.3A.20add.20support.20for.20multi-extrac.2E.2E.2E.html#300054535">(Sep 21 2022 at 23:28)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/pull/4908#issuecomment-1254333720">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/4908">issue #4908</a>:</p>
<blockquote>
<p>I asked Chris to show me a diff of the generated code for existing uses of ISLE. We verified that the only difference was additional types and traits related to <code>ContextIter</code>. As a result I'm convinced that this is safe to merge as-is. I haven't fully understood the multi-extractors and multi-constructors, but since we don't use any of those yet, we can fix any issues that come up when we start trying to use them, instead of worrying about them now.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>