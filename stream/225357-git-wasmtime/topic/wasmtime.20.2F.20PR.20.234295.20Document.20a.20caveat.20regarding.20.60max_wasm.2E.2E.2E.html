<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4295 Document a caveat regarding `max_wasm... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html">wasmtime / PR #4295 Document a caveat regarding `max_wasm...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="287051848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287051848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287051848">(Jun 22 2022 at 13:16)</a>:</h4>
<p>pepyakin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4295">PR #4295</a> from <code>pep-doc-stk-ovf</code> to <code>main</code>:</p>
<blockquote>
<p>I realized this when I was reading code while I was hacking on #4109. I figured that this would better be explicitly stated. <br>
</p>
</blockquote>



<a name="287061535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287061535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287061535">(Jun 22 2022 at 14:26)</a>:</h4>
<p>pepyakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4295">PR #4295</a> from <code>pep-doc-stk-ovf</code> to <code>main</code>.</p>



<a name="287077871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287077871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287077871">(Jun 22 2022 at 16:20)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#discussion_r903979286">PR review comment</a>:</p>
<blockquote>
<p>This actually isn't quite accurate in that <a href="https://github.com/bytecodealliance/wasmtime/blob/25a588c35f52a7005d7f455facc15e9e35273497/crates/wasmtime/src/func.rs#L1265-L1285">the stack limit is only set on the first function call</a>, although that's probably important to call out here. For example if wasm is allowed 2M of stack, then if a first wasm call consumes 1M, a host call then consumes 1M, then wasm is reentered it will immediately trap since the limit from the original 2M has been reached.</p>
</blockquote>



<a name="287077872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287077872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287077872">(Jun 22 2022 at 16:20)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#pullrequestreview-1015520595">PR review</a>.</p>



<a name="287077873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287077873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287077873">(Jun 22 2022 at 16:20)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#pullrequestreview-1015520595">PR review</a>.</p>



<a name="287081585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287081585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287081585">(Jun 22 2022 at 16:48)</a>:</h4>
<p>pepyakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4295">PR #4295</a> from <code>pep-doc-stk-ovf</code> to <code>main</code>.</p>



<a name="287081636"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287081636" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287081636">(Jun 22 2022 at 16:48)</a>:</h4>
<p>pepyakin created <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#discussion_r904018842">PR review comment</a>:</p>
<blockquote>
<p>Oh right, I ignored this part I assumed it is reftypes only. Nice to know! 5904b47 should fix that<br>
</p>
</blockquote>



<a name="287081637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287081637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287081637">(Jun 22 2022 at 16:48)</a>:</h4>
<p>pepyakin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#pullrequestreview-1015575993">PR review</a>.</p>



<a name="287098558"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287098558" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287098558">(Jun 22 2022 at 19:02)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4295#pullrequestreview-1015737663">PR review</a>.</p>



<a name="287098563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234295%20Document%20a%20caveat%20regarding%20%60max_wasm.../near/287098563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234295.20Document.20a.20caveat.20regarding.20.60max_wasm.2E.2E.2E.html#287098563">(Jun 22 2022 at 19:02)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4295">PR #4295</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>