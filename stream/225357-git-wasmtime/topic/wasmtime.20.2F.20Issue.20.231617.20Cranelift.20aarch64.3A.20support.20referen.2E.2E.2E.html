<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #1617 Cranelift aarch64: support referen... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html">wasmtime / Issue #1617 Cranelift aarch64: support referen...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="195556286"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195556286" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195556286">(Apr 28 2020 at 12:34)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>This will imply some work in <code>regalloc.rs</code> to tell where spilled ref-typed values might be, and some integration in the new backend.</p>
<p>cc @julian-seward1 @cfallin </p>
</blockquote>



<a name="195556287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195556287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195556287">(Apr 28 2020 at 12:34)</a>:</h4>
<p>bnjbvr labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>This will imply some work in <code>regalloc.rs</code> to tell where spilled ref-typed values might be, and some integration in the new backend.</p>
<p>cc @julian-seward1 @cfallin </p>
</blockquote>



<a name="195556288"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195556288" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195556288">(Apr 28 2020 at 12:34)</a>:</h4>
<p>bnjbvr labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>This will imply some work in <code>regalloc.rs</code> to tell where spilled ref-typed values might be, and some integration in the new backend.</p>
<p>cc @julian-seward1 @cfallin </p>
</blockquote>



<a name="195556356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195556356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195556356">(Apr 28 2020 at 12:34)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620577661" title="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620577661">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @bnjbvr</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>bnjbvr: cranelift</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action" title="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="195558541"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195558541" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195558541">(Apr 28 2020 at 12:53)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620587192" title="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620587192">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<blockquote>
<p>This will imply some work in <a href="http://regalloc.rs" title="http://regalloc.rs">regalloc.rs</a> to tell where spilled ref-typed values might be</p>
</blockquote>
<p>Also for refs stored in registers, right?</p>
</blockquote>



<a name="195560465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195560465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195560465">(Apr 28 2020 at 13:07)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620594895" title="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620594895">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<blockquote>
<p>Also for refs stored in registers, right?</p>
</blockquote>
<p>Eventually yes, but we don't require it in the short term at least in Spidermonkey, which scans the stack only at times where everything has been spilled onto the stack. (I wonder if that was accidentally working with the old regalloc, because it would inefficiently spill callee-preserved registers across a call...)</p>
</blockquote>



<a name="195569306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195569306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195569306">(Apr 28 2020 at 14:09)</a>:</h4>
<p>julian-seward1 <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620631617" title="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620631617">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>Sure; this will require tracking which <code>VirtualRange</code>s are ref-typed, or something like that.  It might turn into a whole barrel of fun once we take into account copy coalescing, too.</p>
</blockquote>



<a name="195569783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/195569783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#195569783">(Apr 28 2020 at 14:13)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620633908" title="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-620633908">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617" title="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>It would be nice to immediately do the more general version of tracking which <code>Value</code> is stored where. That is necessary to implement debuginfo for locals.</p>
</blockquote>



<a name="204282946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/204282946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#204282946">(Jul 18 2020 at 04:14)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/1617#issuecomment-660421639">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>Closing now, given that #1852 and subsequent bugfixes have landed; #1886 will track the wasmtime-specific work (which seems mainly to involve getting the right debug-info bits in place for the stack walk to work).</p>
</blockquote>



<a name="204282948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%231617%20Cranelift%20aarch64%3A%20support%20referen.../near/204282948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.231617.20Cranelift.20aarch64.3A.20support.20referen.2E.2E.2E.html#204282948">(Jul 18 2020 at 04:14)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/1617">Issue #1617</a>:</p>
<blockquote>
<p>This will imply some work in <code>regalloc.rs</code> to tell where spilled ref-typed values might be, and some integration in the new backend.</p>
<p>cc @julian-seward1 @cfallin </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>