<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6195 feat: align wasi-http with component ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html">wasmtime / PR #6195 feat: align wasi-http with component ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="348368018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/348368018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#348368018">(Apr 11 2023 at 06:40)</a>:</h4>
<p>eduardomourar opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a> from <code>eduardomourar:feat/wasi-http-align-component</code> to <code>bytecodealliance:main</code>.</p>



<a name="350433857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350433857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350433857">(Apr 17 2023 at 07:58)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350510487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350510487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350510487">(Apr 17 2023 at 13:14)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168674496">PR review comment</a>:</p>
<blockquote>
<p>Does this really belong in <code>wasi-http</code> crate or should it be living alongside the existing <a href="https://docs.wasmtime.dev/api/wasi_common/table/struct.Table.html">https://docs.wasmtime.dev/api/wasi_common/table/struct.Table.html</a> in <code>wasi_common</code>? Should there be a <code>wasi_common::component::table::Table</code> if this is component-model specific?</p>
</blockquote>



<a name="350510488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350510488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350510488">(Apr 17 2023 at 13:14)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388029915">PR review</a>.</p>



<a name="350511193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350511193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350511193">(Apr 17 2023 at 13:16)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388036272">PR review</a>.</p>



<a name="350511195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350511195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350511195">(Apr 17 2023 at 13:16)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168678899">PR review comment</a>:</p>



<a name="350511623"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350511623" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350511623">(Apr 17 2023 at 13:18)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388039424">PR review</a>.</p>



<a name="350511625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350511625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350511625">(Apr 17 2023 at 13:18)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168680939">PR review comment</a>:</p>
<blockquote>
<p>Aren't these <code>clone</code>s redundant? If you didn't call <code>iter()</code> you could just move these instead, since the vector is moved into this function, right?</p>
</blockquote>



<a name="350513042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350513042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350513042">(Apr 17 2023 at 13:23)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388051778">PR review</a>.</p>



<a name="350513044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350513044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350513044">(Apr 17 2023 at 13:23)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168688656">PR review comment</a>:</p>
<blockquote>
<p>This can be cleaner expressed with iterator operations and collect, but if you want to keep the for loop</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">entries</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">map</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="n">value</span><span class="p">])</span>
<span class="p">}</span>
</code></pre></div>
<p>it's just this, right?</p>
</blockquote>



<a name="350513802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350513802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350513802">(Apr 17 2023 at 13:25)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388059436">PR review</a>.</p>



<a name="350513804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350513804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350513804">(Apr 17 2023 at 13:25)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168693184">PR review comment</a>:</p>
<blockquote>
<p>How about extracting this to a <code>let body = req.body().unwrap_or_else(/* ... */)</code> for clarity?</p>
</blockquote>



<a name="350559511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350559511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350559511">(Apr 17 2023 at 16:03)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1388482061">PR review</a>.</p>



<a name="350559514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350559514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350559514">(Apr 17 2023 at 16:03)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1168962972">PR review comment</a>:</p>
<blockquote>
<p>yes, when wasmtime supports wasi preview2, the wasi common here will most likely contain the table (following the preview2-prototyping approach). until then, i just copied this over and made some small tweaks.</p>
</blockquote>



<a name="350560915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350560915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350560915">(Apr 17 2023 at 16:09)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350711724"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350711724" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350711724">(Apr 18 2023 at 08:53)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350813218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350813218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350813218">(Apr 18 2023 at 15:21)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350820996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350820996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350820996">(Apr 18 2023 at 15:51)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350821401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350821401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350821401">(Apr 18 2023 at 15:53)</a>:</h4>
<p><strong>eduardomourar</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a> as ready for review.</p>



<a name="350821404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350821404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350821404">(Apr 18 2023 at 15:53)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350821406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350821406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350821406">(Apr 18 2023 at 15:53)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="350828068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350828068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350828068">(Apr 18 2023 at 16:18)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>:</p>
<blockquote>
<p>In the context of <code>wasi-http</code>, this PR will prepare the ground for the migration from the <a href="https://github.com/bytecodealliance/preview2-prototyping">preview2-prototyping repo</a> to wasmtime. A table is being defined to simulate the future <code>resource</code> type. Additionally, it will simplify using <a href="https://github.com/bytecodealliance/wasmtime/blob/387db16d288c31c5fba5d6d5c81475d2ede60a4e/crates/wasmtime/src/component/linker.rs#L21-L27">Component Linker</a> with the wasi-http.</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;Usage example with WASI Preview2&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">host</span>::<span class="p">{</span><span class="n">command</span>::<span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="p">{</span><span class="n">any</span>::<span class="n">Any</span><span class="p">,</span><span class="w"> </span><span class="n">pin</span>::<span class="n">Pin</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasi_cap_std_sync</span>::<span class="n">WasiCtxBuilder</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">component</span>::<span class="p">{</span><span class="n">Component</span><span class="p">,</span><span class="w"> </span><span class="n">Linker</span><span class="p">},</span>
<span class="w">    </span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi_http</span>::<span class="p">{</span><span class="n">common</span><span class="p">,</span><span class="w"> </span><span class="n">WasiHttpCtx</span><span class="p">};</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">wasi</span>: <span class="nc">WasiCtx</span><span class="p">,</span>
<span class="w">    </span><span class="n">http</span>: <span class="nc">WasiHttpCtx</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">add_to_linker</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nb">Send</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="n">l</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">component</span>::<span class="n">Linker</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">f</span>: <span class="nc">impl</span><span class="w"> </span><span class="p">(</span><span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Copy</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="nb">static</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">wall_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">monotonic_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">timezone</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">instance_monotonic_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">instance_wall_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">filesystem</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">poll</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">random</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">exit</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">environment</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">preopens</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="nc">WritePipe</span><span class="w"> </span><span class="p">{}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">common</span>::<span class="n">OutputStream</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">as_any</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">dyn</span><span class="w"> </span><span class="n">Any</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">write</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span>: <span class="kp">&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span>::<span class="n">from_utf8_lossy</span><span class="p">(</span><span class="n">buf</span><span class="p">).</span><span class="n">into_owned</span><span class="p">());</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">buf</span><span class="p">.</span><span class="n">len</span><span class="p">().</span><span class="n">try_into</span><span class="p">()</span><span class="o">?</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">write_zeroes</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">nelem</span>: <span class="kt">u64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">nelem</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">readable</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">writable</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cp">#[tokio::main]</span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiCtxBuilder</span>::<span class="n">new</span><span class="p">().</span><span class="n">inherit_stdio</span><span class="p">().</span><span class="n">build</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiHttpCtx</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">http</span><span class="p">.</span><span class="n">set_stdout</span><span class="p">(</span><span class="nb">Box</span>::<span class="n">new</span><span class="p">(</span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{}));</span>
<span class="w">    </span><span class="n">http</span><span class="p">.</span><span class="n">set_stderr</span><span class="p">(</span><span class="nb">Box</span>::<span class="n">new</span><span class="p">(</span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{}));</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_backtrace_details</span><span class="p">(</span><span class="n">wasmtime</span>::<span class="n">WasmBacktraceDetails</span>::<span class="n">Enable</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_component_model</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_multi_memory</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Component</span>::<span class="n">from_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="s">"component.wasm"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Linker</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">);</span>

<span class="w">    </span><span class="n">add_to_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Ctx</span><span class="o">|</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">wasi</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasmtime_wasi_http</span>::<span class="n">add_to_component_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Ctx</span><span class="o">|</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">http</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">_instance</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">wasi</span>::<span class="n">Command</span>::<span class="n">instantiate_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">linker</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasi</span>
<span class="w">        </span><span class="p">.</span><span class="n">call_main</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="n">anyhow</span>::<span class="n">Error</span>::<span class="n">from</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">is_err</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">anyhow</span>::<span class="n">bail</span><span class="o">!</span><span class="p">(</span>
<span class="w">            </span><span class="s">"command returned with failing exit status: {:?}"</span><span class="p">,</span>
<span class="w">            </span><span class="n">result</span><span class="p">.</span><span class="n">err</span><span class="p">().</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>&lt;/details&gt;<br>
</p>
</blockquote>



<a name="350828391"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350828391" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350828391">(Apr 18 2023 at 16:19)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>:</p>
<blockquote>
<p>In the context of <code>wasi-http</code>, this PR will prepare the ground for the migration from the <a href="https://github.com/bytecodealliance/preview2-prototyping">preview2-prototyping repo</a> to wasmtime. A table is being defined to simulate the future <code>resource</code> type. Additionally, it will simplify using <a href="https://github.com/bytecodealliance/wasmtime/blob/387db16d288c31c5fba5d6d5c81475d2ede60a4e/crates/wasmtime/src/component/linker.rs#L21-L27">Component Linker</a> with the wasi-http module.</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;Usage example with WASI Preview2&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">host</span>::<span class="p">{</span><span class="n">command</span>::<span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="p">{</span><span class="n">any</span>::<span class="n">Any</span><span class="p">,</span><span class="w"> </span><span class="n">pin</span>::<span class="n">Pin</span><span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasi_cap_std_sync</span>::<span class="n">WasiCtxBuilder</span><span class="p">;</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">component</span>::<span class="p">{</span><span class="n">Component</span><span class="p">,</span><span class="w"> </span><span class="n">Linker</span><span class="p">},</span>
<span class="w">    </span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi_http</span>::<span class="p">{</span><span class="n">common</span><span class="p">,</span><span class="w"> </span><span class="n">WasiHttpCtx</span><span class="p">};</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">wasi</span>: <span class="nc">WasiCtx</span><span class="p">,</span>
<span class="w">    </span><span class="n">http</span>: <span class="nc">WasiHttpCtx</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">add_to_linker</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nb">Send</span><span class="o">&gt;</span><span class="p">(</span>
<span class="w">    </span><span class="n">l</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="n">component</span>::<span class="n">Linker</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">f</span>: <span class="nc">impl</span><span class="w"> </span><span class="p">(</span><span class="nb">Fn</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Copy</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Sync</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="nb">static</span><span class="p">,</span>
<span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">wall_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">monotonic_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">timezone</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">instance_monotonic_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">instance_wall_clock</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">filesystem</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">poll</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">random</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">exit</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">environment</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasi</span>::<span class="n">preopens</span>::<span class="n">add_to_linker</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="nc">WritePipe</span><span class="w"> </span><span class="p">{}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">common</span>::<span class="n">OutputStream</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">as_any</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">dyn</span><span class="w"> </span><span class="n">Any</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="bp">self</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">write</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span>: <span class="kp">&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">])</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{}"</span><span class="p">,</span><span class="w"> </span><span class="nb">String</span>::<span class="n">from_utf8_lossy</span><span class="p">(</span><span class="n">buf</span><span class="p">).</span><span class="n">into_owned</span><span class="p">());</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">buf</span><span class="p">.</span><span class="n">len</span><span class="p">().</span><span class="n">try_into</span><span class="p">()</span><span class="o">?</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">fn</span> <span class="nf">write_zeroes</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">nelem</span>: <span class="kt">u64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(</span><span class="n">nelem</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">readable</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">writable</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">common</span>::<span class="n">Error</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cp">#[tokio::main]</span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiCtxBuilder</span>::<span class="n">new</span><span class="p">().</span><span class="n">inherit_stdio</span><span class="p">().</span><span class="n">build</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiHttpCtx</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">http</span><span class="p">.</span><span class="n">set_stdout</span><span class="p">(</span><span class="nb">Box</span>::<span class="n">new</span><span class="p">(</span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{}));</span>
<span class="w">    </span><span class="n">http</span><span class="p">.</span><span class="n">set_stderr</span><span class="p">(</span><span class="nb">Box</span>::<span class="n">new</span><span class="p">(</span><span class="n">WritePipe</span><span class="w"> </span><span class="p">{}));</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_backtrace_details</span><span class="p">(</span><span class="n">wasmtime</span>::<span class="n">WasmBacktraceDetails</span>::<span class="n">Enable</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_component_model</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_multi_memory</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Component</span>::<span class="n">from_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="s">"component.wasm"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Linker</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">);</span>

<span class="w">    </span><span class="n">add_to_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Ctx</span><span class="o">|</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">wasi</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasmtime_wasi_http</span>::<span class="n">add_to_component_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">,</span><span class="w"> </span><span class="o">|</span><span class="n">ctx</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Ctx</span><span class="o">|</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">ctx</span><span class="p">.</span><span class="n">http</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">_instance</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">wasi</span>::<span class="n">Command</span>::<span class="n">instantiate_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">linker</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasi</span>
<span class="w">        </span><span class="p">.</span><span class="n">call_main</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="n">anyhow</span>::<span class="n">Error</span>::<span class="n">from</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">is_err</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">anyhow</span>::<span class="n">bail</span><span class="o">!</span><span class="p">(</span>
<span class="w">            </span><span class="s">"command returned with failing exit status: {:?}"</span><span class="p">,</span>
<span class="w">            </span><span class="n">result</span><span class="p">.</span><span class="n">err</span><span class="p">().</span><span class="n">unwrap</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>&lt;/details&gt;<br>
</p>
</blockquote>



<a name="350838803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350838803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350838803">(Apr 18 2023 at 16:59)</a>:</h4>
<p>brendandburns submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1390569500">PR review</a>.</p>



<a name="350838805"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350838805" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350838805">(Apr 18 2023 at 16:59)</a>:</h4>
<p>brendandburns created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1170331642">PR review comment</a>:</p>
<blockquote>
<p>remove dead code.</p>
</blockquote>



<a name="350838893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350838893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350838893">(Apr 18 2023 at 17:00)</a>:</h4>
<p>brendandburns submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1390569999">PR review</a>.</p>



<a name="350838908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350838908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350838908">(Apr 18 2023 at 17:00)</a>:</h4>
<p>brendandburns created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1170332035">PR review comment</a>:</p>
<blockquote>
<p>Is there a reason for the rename?</p>
</blockquote>



<a name="350846197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350846197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350846197">(Apr 18 2023 at 17:34)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1390620998">PR review</a>.</p>



<a name="350846208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350846208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350846208">(Apr 18 2023 at 17:34)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1170368295">PR review comment</a>:</p>
<blockquote>
<p>for this piece, we need to choose which errors we want to throw in place of others</p>
</blockquote>



<a name="350846413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350846413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350846413">(Apr 18 2023 at 17:35)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1390622687">PR review</a>.</p>



<a name="350846416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350846416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350846416">(Apr 18 2023 at 17:35)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1170369370">PR review comment</a>:</p>
<blockquote>
<p>just to follow the pattern in the other modules, and also to show that there is a breaking change to the API</p>
</blockquote>



<a name="350857406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/350857406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#350857406">(Apr 18 2023 at 18:28)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="380274100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/380274100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#380274100">(Jul 31 2023 at 10:08)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="381625912"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/381625912" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#381625912">(Aug 03 2023 at 22:56)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="381627037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/381627037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#381627037">(Aug 03 2023 at 23:06)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382169343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382169343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382169343">(Aug 05 2023 at 15:14)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/elliottt">elliottt</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382169344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382169344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382169344">(Aug 05 2023 at 15:14)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382169345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382169345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382169345">(Aug 05 2023 at 15:14)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382330894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382330894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382330894">(Aug 06 2023 at 11:03)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>:</p>
<blockquote>
<p>In the context of <code>wasi-http</code>, this PR will use the shared functionality from <code>wasmtime-wasi</code> <del>will prepare the ground for the migration from the <a href="https://github.com/bytecodealliance/preview2-prototyping">preview2-prototyping repo</a> to wasmtime</del>. A table is being defined to simulate the future <code>resource</code> type. Additionally, it will simplify using <a href="https://github.com/bytecodealliance/wasmtime/blob/387db16d288c31c5fba5d6d5c81475d2ede60a4e/crates/wasmtime/src/component/linker.rs#L21-L27">Component Linker</a> with the wasi-http module.</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;Usage example with WASI Preview2&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">component</span>::<span class="p">{</span><span class="n">Component</span><span class="p">,</span><span class="w"> </span><span class="n">Linker</span><span class="p">},</span>
<span class="w">    </span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span>::<span class="n">preview2</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">command</span>::<span class="n">Command</span><span class="p">,</span><span class="w"> </span><span class="n">Table</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtxBuilder</span><span class="p">,</span><span class="w"> </span><span class="n">WasiView</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi_http</span>::<span class="p">{</span><span class="n">WasiHttpCtx</span><span class="p">,</span><span class="w"> </span><span class="n">WasiHttpView</span><span class="p">};</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">table</span>: <span class="nc">Table</span><span class="p">,</span>
<span class="w">    </span><span class="n">wasi</span>: <span class="nc">WasiCtx</span><span class="p">,</span>
<span class="w">    </span><span class="n">http</span>: <span class="nc">WasiHttpCtx</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">WasiView</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">table</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Table</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">table</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">table_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">table</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ctx</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">WasiCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">wasi</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ctx_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">wasi</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">WasiHttpView</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">http_ctx</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">WasiHttpCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">http</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">http_ctx_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiHttpCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">http</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cp">#[tokio::main]</span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiCtxBuilder</span>::<span class="n">new</span><span class="p">().</span><span class="n">inherit_stdio</span><span class="p">().</span><span class="n">build</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiHttpCtx</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_backtrace_details</span><span class="p">(</span><span class="n">wasmtime</span>::<span class="n">WasmBacktraceDetails</span>::<span class="n">Enable</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_component_model</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Component</span>::<span class="n">from_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="s">"component.wasm"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Linker</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">);</span>

<span class="w">    </span><span class="n">add_to_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasmtime_wasi_http</span>::<span class="n">add_to_component_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">_instance</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">wasi</span>::<span class="n">Command</span>::<span class="n">instantiate_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">linker</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasi</span>
<span class="w">        </span><span class="p">.</span><span class="n">call_main</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">e</span><span class="o">|</span><span class="w"> </span><span class="n">anyhow</span>::<span class="n">anyhow</span><span class="o">!</span><span class="p">(</span><span class="s">"wasm failed with {e:?}"</span><span class="p">))</span><span class="o">?</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">e</span><span class="o">|</span><span class="w"> </span><span class="n">anyhow</span>::<span class="n">anyhow</span><span class="o">!</span><span class="p">(</span><span class="s">"command returned with failing exit status {e:?}"</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>&lt;/details&gt;<br>
</p>
</blockquote>



<a name="382332468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382332468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382332468">(Aug 06 2023 at 11:10)</a>:</h4>
<p><strong>eduardomourar</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382332471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382332471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382332471">(Aug 06 2023 at 11:10)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="382332693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382332693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382332693">(Aug 06 2023 at 11:11)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1564126008">PR review</a>.</p>



<a name="382332694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/382332694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#382332694">(Aug 06 2023 at 11:11)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1285197576">PR review comment</a>:</p>
<blockquote>
<p>we are using the shared table as provided by <code>wasmtime-wasi</code>.</p>
</blockquote>



<a name="383694115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383694115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383694115">(Aug 10 2023 at 16:44)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="383706437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383706437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383706437">(Aug 10 2023 at 17:24)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1572388114">PR review</a>.</p>



<a name="383706967"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383706967" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383706967">(Aug 10 2023 at 17:26)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1290454117">PR review comment</a>:</p>
<blockquote>
<p>@pchickey , here is the part where we have a shared stream for both read and write. i solved by populating the table with both streams and just keeping their ids for later use.</p>
</blockquote>



<a name="383783183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383783183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383783183">(Aug 11 2023 at 00:03)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1572872154">PR review</a>.</p>



<a name="383783184"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383783184" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383783184">(Aug 11 2023 at 00:03)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1290786159">PR review comment</a>:</p>
<blockquote>
<p>Why remove the closure argument here? (That's what's causing the CI build failures currently.)</p>
</blockquote>



<a name="383799200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383799200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383799200">(Aug 11 2023 at 01:53)</a>:</h4>
<p>eduardomourar edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>:</p>
<blockquote>
<p>In the context of <code>wasi-http</code>, this PR will use the shared functionality from <code>wasmtime-wasi</code> <del>will prepare the ground for the migration from the <a href="https://github.com/bytecodealliance/preview2-prototyping">preview2-prototyping repo</a> to wasmtime</del>. A table is being defined to simulate the future <code>resource</code> type. Additionally, it will simplify using <a href="https://github.com/bytecodealliance/wasmtime/blob/387db16d288c31c5fba5d6d5c81475d2ede60a4e/crates/wasmtime/src/component/linker.rs#L21-L27">Component Linker</a> with the wasi-http module.</p>
<p>&lt;details&gt;<br>
  &lt;summary&gt;Usage example with WASI Preview2&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">component</span>::<span class="p">{</span><span class="n">Component</span><span class="p">,</span><span class="w"> </span><span class="n">Linker</span><span class="p">},</span>
<span class="w">    </span><span class="n">Config</span><span class="p">,</span><span class="w"> </span><span class="n">Engine</span><span class="p">,</span><span class="w"> </span><span class="n">Store</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi</span>::<span class="n">preview2</span>::<span class="p">{</span>
<span class="w">    </span><span class="n">command</span>::<span class="n">Command</span><span class="p">,</span><span class="w"> </span><span class="n">Table</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtx</span><span class="p">,</span><span class="w"> </span><span class="n">WasiCtxBuilder</span><span class="p">,</span><span class="w"> </span><span class="n">WasiView</span><span class="p">,</span>
<span class="p">};</span>
<span class="k">use</span><span class="w"> </span><span class="n">wasmtime_wasi_http</span>::<span class="p">{</span><span class="n">WasiHttpCtx</span><span class="p">,</span><span class="w"> </span><span class="n">WasiHttpView</span><span class="p">};</span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="n">table</span>: <span class="nc">Table</span><span class="p">,</span>
<span class="w">    </span><span class="n">wasi</span>: <span class="nc">WasiCtx</span><span class="p">,</span>
<span class="w">    </span><span class="n">http</span>: <span class="nc">WasiHttpCtx</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">WasiView</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">table</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">Table</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">table</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">table_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">table</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ctx</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">WasiCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">wasi</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">ctx_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">wasi</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="k">impl</span><span class="w"> </span><span class="n">WasiHttpView</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">http_ctx</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">WasiHttpCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">http</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">http_ctx_mut</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">WasiHttpCtx</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">http</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="cp">#[tokio::main]</span>
<span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">anyhow</span>::<span class="nb">Result</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiCtxBuilder</span>::<span class="n">new</span><span class="p">().</span><span class="n">inherit_stdio</span><span class="p">().</span><span class="n">build</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">WasiHttpCtx</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Config</span>::<span class="n">new</span><span class="p">();</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_backtrace_details</span><span class="p">(</span><span class="n">wasmtime</span>::<span class="n">WasmBacktraceDetails</span>::<span class="n">Enable</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">wasm_component_model</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="n">async_support</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">engine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Engine</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">config</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Component</span>::<span class="n">from_file</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="s">"component.wasm"</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Store</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">,</span><span class="w"> </span><span class="n">Ctx</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Linker</span>::<span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">engine</span><span class="p">);</span>

<span class="w">    </span><span class="n">add_to_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="n">wasmtime_wasi_http</span>::<span class="n">add_to_component_linker</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">linker</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="p">(</span><span class="n">wasi</span><span class="p">,</span><span class="w"> </span><span class="n">_instance</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">wasi</span>::<span class="n">Command</span>::<span class="n">instantiate_async</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">component</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">linker</span><span class="p">).</span><span class="k">await</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasi</span>
<span class="w">        </span><span class="p">.</span><span class="n">call_main</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">store</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[])</span>
<span class="w">        </span><span class="p">.</span><span class="k">await</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">e</span><span class="o">|</span><span class="w"> </span><span class="n">anyhow</span>::<span class="n">anyhow</span><span class="o">!</span><span class="p">(</span><span class="s">"wasm failed with {e:?}"</span><span class="p">))</span><span class="o">?</span>
<span class="w">        </span><span class="p">.</span><span class="n">map_err</span><span class="p">(</span><span class="o">|</span><span class="n">e</span><span class="o">|</span><span class="w"> </span><span class="n">anyhow</span>::<span class="n">anyhow</span><span class="o">!</span><span class="p">(</span><span class="s">"command returned with failing exit status {e:?}"</span><span class="p">))</span><span class="o">?</span><span class="p">;</span>

<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>
<p>&lt;/details&gt;</p>
<p>Depends on: <a href="https://github.com/bytecodealliance/wasmtime/pull/6836">https://github.com/bytecodealliance/wasmtime/pull/6836</a>.</p>
</blockquote>



<a name="383799854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383799854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383799854">(Aug 11 2023 at 01:57)</a>:</h4>
<p>eduardomourar submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1572920782">PR review</a>.</p>



<a name="383799859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383799859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383799859">(Aug 11 2023 at 01:57)</a>:</h4>
<p>eduardomourar created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1290827685">PR review comment</a>:</p>
<blockquote>
<p>it will make more sense when using the <code>preview2::WasiCtx</code> as laid out in <a href="https://github.com/bytecodealliance/wasmtime/pull/6836">this pr</a>. the wasmtime cli tests will be fixed then</p>
</blockquote>



<a name="383804529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383804529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383804529">(Aug 11 2023 at 02:11)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="383817959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383817959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383817959">(Aug 11 2023 at 03:54)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="383820828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/383820828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#383820828">(Aug 11 2023 at 04:19)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="384516641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384516641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384516641">(Aug 13 2023 at 14:56)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="384517473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384517473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384517473">(Aug 13 2023 at 14:59)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="384536001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384536001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384536001">(Aug 13 2023 at 16:17)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="384919759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384919759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384919759">(Aug 14 2023 at 22:14)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1577728727">PR review</a>.</p>



<a name="384919760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384919760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384919760">(Aug 14 2023 at 22:14)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1577728727">PR review</a>.</p>



<a name="384919761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/384919761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#384919761">(Aug 14 2023 at 22:14)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1294018521">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    # Ensure wit definitions are in sync: both wasmtime-wasi and wasmtime-wasi-http need their own
    # copy of the wit definitions so publishing works, but we need to ensure they are identical copies.
</code></pre></div><br>
</p>
</blockquote>



<a name="385322054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385322054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385322054">(Aug 16 2023 at 02:05)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385322454"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385322454" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385322454">(Aug 16 2023 at 02:08)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385327522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385327522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385327522">(Aug 16 2023 at 02:54)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385558032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385558032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385558032">(Aug 16 2023 at 23:32)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581535271">PR review</a>:</p>
<blockquote>
<p>This is looking great! I just had two questions before we merge.</p>
</blockquote>



<a name="385558033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385558033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385558033">(Aug 16 2023 at 23:32)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581535271">PR review</a>:</p>
<blockquote>
<p>This is looking great! I just had two questions before we merge.</p>
</blockquote>



<a name="385558034"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385558034" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385558034">(Aug 16 2023 at 23:32)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296513777">PR review comment</a>:</p>
<blockquote>
<p>What do you think about renaming this module so that it's not colliding with a keyword? Maybe <code>types.rs</code> instead?</p>
</blockquote>



<a name="385558035"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385558035" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385558035">(Aug 16 2023 at 23:32)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296510342">PR review comment</a>:</p>
<blockquote>
<p>Does this need to be uncommented?</p>
</blockquote>



<a name="385573035"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573035" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573035">(Aug 17 2023 at 01:17)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581626051">PR review</a>.</p>



<a name="385573037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573037">(Aug 17 2023 at 01:17)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577349">PR review comment</a>:</p>
<blockquote>
<p>Eduardo mentioned this on zulip - we are removing it as a module runtime option in the CLI for now, and will re-enable it as part of the component linker once streams &amp; pollables are aligned with wasmtime-wasi, and <a href="https://github.com/bytecodealliance/wasmtime/pull/6836">https://github.com/bytecodealliance/wasmtime/pull/6836</a> lands.</p>
<p>The fix for now is to uncomment everything and <code>bail</code> on line 769 instead.</p>
</blockquote>



<a name="385573099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573099">(Aug 17 2023 at 01:18)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581626200">PR review</a>.</p>



<a name="385573100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573100">(Aug 17 2023 at 01:18)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577443">PR review comment</a>:</p>
<blockquote>
<p>We really should do that, but I think it can be done in a follow up PR.</p>
</blockquote>



<a name="385573342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573342">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581626422">PR review</a>.</p>



<a name="385573343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573343">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581626422">PR review</a>.</p>



<a name="385573344"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573344" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573344">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577593">PR review comment</a>:</p>



<a name="385573345"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573345" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573345">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577660">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        #[cfg(not(feature = "wasi-http"))]
</code></pre></div><br>
</p>
</blockquote>



<a name="385573346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573346">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577809">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        }
</code></pre></div><br>
</p>
</blockquote>



<a name="385573347"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573347" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573347">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577740">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        {
</code></pre></div><br>
</p>
</blockquote>



<a name="385573348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573348">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577860">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        #[cfg(feature = "wasi-http")]
</code></pre></div><br>
</p>
</blockquote>



<a name="385573349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573349">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296578248">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        bail!("wasi-http support will be swapped over to component CLI support soon");
</code></pre></div><br>
</p>
</blockquote>



<a name="385573350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573350">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296577925">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        {
</code></pre></div><br>
</p>
</blockquote>



<a name="385573351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573351">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296578297">PR review comment</a>:</p>



<a name="385573352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573352">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#discussion_r1296578354">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        }
</code></pre></div><br>
</p>
</blockquote>



<a name="385573381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573381">(Aug 17 2023 at 01:20)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573389"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573389" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573389">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573402"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573402" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573402">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573431">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573446"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573446" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573446">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573460">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573471">(Aug 17 2023 at 01:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573490">(Aug 17 2023 at 01:22)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573551">(Aug 17 2023 at 01:22)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385573658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573658">(Aug 17 2023 at 01:23)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6195#pullrequestreview-1581629635">PR review</a>.</p>



<a name="385573673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385573673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385573673">(Aug 17 2023 at 01:23)</a>:</h4>
<p>pchickey has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385643350"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385643350" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385643350">(Aug 17 2023 at 10:18)</a>:</h4>
<p>pchickey has disabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385643351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385643351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385643351">(Aug 17 2023 at 10:18)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385715385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385715385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385715385">(Aug 17 2023 at 16:50)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385716079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385716079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385716079">(Aug 17 2023 at 16:54)</a>:</h4>
<p>pchickey has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385721552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385721552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385721552">(Aug 17 2023 at 17:29)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385733052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385733052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385733052">(Aug 17 2023 at 18:51)</a>:</h4>
<p>eduardomourar updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385751293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385751293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385751293">(Aug 17 2023 at 20:58)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385757973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385757973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385757973">(Aug 17 2023 at 21:43)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385762360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385762360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385762360">(Aug 17 2023 at 22:27)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385763681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385763681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385763681">(Aug 17 2023 at 22:41)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385764195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385764195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385764195">(Aug 17 2023 at 22:46)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385764896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385764896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385764896">(Aug 17 2023 at 22:53)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385766469"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385766469" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385766469">(Aug 17 2023 at 23:09)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385769509"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385769509" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385769509">(Aug 17 2023 at 23:41)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385773103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385773103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385773103">(Aug 18 2023 at 00:16)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385778763"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385778763" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385778763">(Aug 18 2023 at 00:45)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385785788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385785788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385785788">(Aug 18 2023 at 01:16)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385796114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385796114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385796114">(Aug 18 2023 at 02:12)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385796223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385796223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385796223">(Aug 18 2023 at 02:12)</a>:</h4>
<p>elliottt has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<a name="385808349"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236195%20feat%3A%20align%20wasi-http%20with%20component%20.../near/385808349" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236195.20feat.3A.20align.20wasi-http.20with.20component.20.2E.2E.2E.html#385808349">(Aug 18 2023 at 03:34)</a>:</h4>
<p>elliottt merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6195">PR #6195</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>