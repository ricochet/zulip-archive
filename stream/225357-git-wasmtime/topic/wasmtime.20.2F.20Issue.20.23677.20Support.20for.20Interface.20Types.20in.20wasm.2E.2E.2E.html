<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #677 Support for Interface Types in wasm... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html">wasmtime / Issue #677 Support for Interface Types in wasm...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="190213032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/190213032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#190213032">(Mar 10 2020 at 19:13)</a>:</h4>
<p>darinmorrison <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-597264143" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-597264143">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>@alexcrichton I'm not sure how it fits into the current plans (per #1271) but I would like to volunteer to continue the work you started with <a href="https://github.com/bytecodealliance/wasmtime/pull/1013" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1013">https://github.com/bytecodealliance/wasmtime/pull/1013</a>.</p>
<p>I spent some time going through the source to get an idea of what is involved and have already started adding some of the missing instructions (from <a href="https://github.com/WebAssembly/interface-types/blob/master/proposals/interface-types/working-notes/instr.md" target="_blank" title="https://github.com/WebAssembly/interface-types/blob/master/proposals/interface-types/working-notes/instr.md">instr.md</a>) in a local branch (not published yet).</p>
<p>I might need guidance at various points (around strings, compilation, etc.) but I have time to focus on it and I've been looking for something more substantial to work on.</p>
</blockquote>



<a name="190227073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/190227073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#190227073">(Mar 10 2020 at 21:25)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-597325616" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-597325616">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>@darinmorrison that'd be awesome, and I'd be happy to help!</p>
<p>I think the <a href="https://github.com/bytecodealliance/wasmtime/pull/1013#issuecomment-592169767" target="_blank" title="https://github.com/bytecodealliance/wasmtime/pull/1013#issuecomment-592169767">TODO list</a> on that PR covers pretty well the major two remaining bits, and I'd probably recommend tackling the first two earlier rather than later to ensure that all the various integration points are largely working before an interpreter becomes more fleshed out. </p>
<p>Feel free to ping me on zulip or here if you've got questions though!</p>
</blockquote>



<a name="192985741"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/192985741" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#192985741">(Apr 06 2020 at 00:40)</a>:</h4>
<p>rheinardkorf <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-609513255" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-609513255">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>@alexcrichton , based on the last comment here <a href="https://github.com/bytecodealliance/wasmtime/pull/1289" title="https://github.com/bytecodealliance/wasmtime/pull/1289">https://github.com/bytecodealliance/wasmtime/pull/1289</a> it looks like @darinmorrison is not able to continue on this work.</p>
<p>I can't even begin to fathom how all this works, nor do I have the capacity right now to work on things.  I'm justing pinging it here so that the "interface types" work doesn't disappear. Its important :D </p>
</blockquote>



<a name="193211076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/193211076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#193211076">(Apr 07 2020 at 16:07)</a>:</h4>
<p>Serentty <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-610477354" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-610477354">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<blockquote>
<p>That's a good point about encodings, although I would initally sort of hope that we could preserve "utf-8 everywhere" as long as possible, but not with copies.</p>
</blockquote>
<p>I don't think that interface types are the place to push UTF-8. Ultimately it's up to the languages, not the bytecode. No one will _choose_ which encoding to used based on what interface types do, they'll choose based on what the languages involved do. Supporting more Unicode encodings means removing redundant copies, it's as simple as that. It won't lead to some dystopia where everyone is switching to UTF-16 because it wasn't barred up enough.</p>
</blockquote>



<a name="193299478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/193299478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#193299478">(Apr 08 2020 at 10:26)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-610878819" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-610878819">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<blockquote>
<p>I don't think that interface types are the place to push UTF-8</p>
</blockquote>
<p>Note that when it comes to Interface Types, we'll implement what gets standardized, so if the <a href="https://github.com/WebAssembly/interface-types" title="https://github.com/WebAssembly/interface-types">Interface Types proposal</a> ends up only supporting UTF-8, then we'll only implement that. I.e., arguments for additional encoding should be made to the WebAssembly CG, not here.</p>
</blockquote>



<a name="193369762"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/193369762" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#193369762">(Apr 08 2020 at 19:47)</a>:</h4>
<p>Serentty <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-611157100" title="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-611157100">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677" title="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Thanks, I left a comment on their repository saying the same thing.</p>
</blockquote>



<a name="211980440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/211980440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#211980440">(Oct 01 2020 at 21:51)</a>:</h4>
<p>onehundredfeet <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-702417094">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Sorry for the uninformed question, but how can I enable interface types at the moment? Do I need the wasm-interface-types crate?  Or is it a total no-go atm?</p>
</blockquote>



<a name="211985958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/211985958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#211985958">(Oct 01 2020 at 22:52)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-702437780">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Unfortuantely at this time there's not a prototype or a switch to turn on. This is not implemented, so testing this out (or even playing around with it) will have to wait until someone implements this.</p>
</blockquote>



<a name="224855996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/224855996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#224855996">(Feb 02 2021 at 11:01)</a>:</h4>
<p>slightknack <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-771554516">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<blockquote>
<p>This is not implemented, so testing this out (or even playing around with it) will have to wait until someone implements this.</p>
</blockquote>
<p>@alexcrichton Just out of curiosity, what is needs to be implemented for interface types to be supported? Is there a set of issues / roadmap / milestone we can refer to? Or is just a matter of reading through the spec and implementing the appropriate features in accordance with wasmtime's API?</p>
</blockquote>



<a name="224893768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/224893768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#224893768">(Feb 02 2021 at 16:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-771751139">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>I'm not aware of a milestone as-is at this time. The main blocker is still planning work to happen on this. There's a number of moving parts, though, especially in that the specification itself is not stable and is a moving target. This will likely be an effort that's much larger than simply implementing the current state of the specification in wasmtime itself.</p>
</blockquote>



<a name="228994810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/228994810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#228994810">(Mar 05 2021 at 17:47)</a>:</h4>
<p>morigs <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-791578402">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Is it possible to use some temporary workaround? For example witx? (especially after #2659 has been merged)<br>
I want to experiment with the implementation of the plugin system using wasm, but inventing your own ABI and manipulating memory and pointers every time you want to pass a struct to a function is kinda hell <span aria-label="big smile" class="emoji emoji-1f604" role="img" title="big smile">:big_smile:</span> </p>
</blockquote>



<a name="229314361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/229314361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#229314361">(Mar 08 2021 at 15:15)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-792822509">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Yes it's definitely true that working with raw pointers and such is painful and error-prone today. We're working on exactly what you're thinking, though, which is a system to use <code>*.witx</code> files to generate bindings for consumers and producers of wasm files. It won't be full interface types (no support in <code>wasmtime</code>-the-crate, but support generating code for <code>wasmtime</code>-the-crate), but we hope it's a good step towards interface types.</p>
</blockquote>



<a name="230552248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23677%20Support%20for%20Interface%20Types%20in%20wasm.../near/230552248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23677.20Support.20for.20Interface.20Types.20in.20wasm.2E.2E.2E.html#230552248">(Mar 16 2021 at 17:06)</a>:</h4>
<p>morigs <a href="https://github.com/bytecodealliance/wasmtime/issues/677#issuecomment-800445108">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/677">Issue #677</a>:</p>
<blockquote>
<p>Looking forward to a working prototype of what you've mentioned!<br>
Please let us know when it will be possible to try new witx in battle <span aria-label="sunglasses" class="emoji emoji-1f60e" role="img" title="sunglasses">:sunglasses:</span> </p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>