<html>
<head><meta charset="utf-8"><title>wasmtime / PR #3490 Remove unused dependencies in Cranelift · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html">wasmtime / PR #3490 Remove unused dependencies in Cranelift</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="259555542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555542">(Oct 29 2021 at 17:14)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/3490">PR #3490</a> from <code>remove-unused-cranelift-deps</code> to <code>main</code>:</p>
<blockquote>
<p>An attempt at using a new tool I made that removes spurious dependencies in Cargo.toml in a very naive fashion. Seems that I could still compile with <code>cargo test --all</code> locally with these changes, let's see what CI thinks.</p>
<p>One package is actually removed from the Cargo.lock file, which is surprising. Usually, the spurious dependencies exist because these are former dependencies of the package, but that have moved elsewhere. Removing these dependencies can sometimes help reorder the crate compilation graph, and slightly reduce overall build times on machines with multiple cores.</p>
</blockquote>



<a name="259555810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555810">(Oct 29 2021 at 17:16)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793284100">PR review</a>.</p>



<a name="259555811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555811">(Oct 29 2021 at 17:16)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739409833">PR review comment</a>:</p>
<blockquote>
<p>Did this and the <code>rand</code> dep removal in <a href="https://github.com/bytecodealliance/wasmtime/pull/3478">https://github.com/bytecodealliance/wasmtime/pull/3478</a> (approved, but not yet merged) too.</p>
</blockquote>



<a name="259555978"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555978" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555978">(Oct 29 2021 at 17:18)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793285205">PR review</a>.</p>



<a name="259555979"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555979" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555979">(Oct 29 2021 at 17:18)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739410627">PR review comment</a>:</p>
<blockquote>
<p>Is cranelift-serde still declared as dependency of a crate inside the workspace with this change? If not, running <code>cargo build -p cranelift-serde</code> or <code>cd cranelift/serde; cargo build</code> will fail.</p>
</blockquote>



<a name="259555994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555994">(Oct 29 2021 at 17:18)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793285377">PR review</a>.</p>



<a name="259555995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259555995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259555995">(Oct 29 2021 at 17:18)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739410749">PR review comment</a>:</p>
<blockquote>
<p>Nice!</p>
</blockquote>



<a name="259556040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259556040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259556040">(Oct 29 2021 at 17:18)</a>:</h4>
<p>bjorn3 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739410627">PR review comment</a>.</p>



<a name="259556199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259556199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259556199">(Oct 29 2021 at 17:20)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793286959">PR review</a>.</p>



<a name="259556200"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259556200" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259556200">(Oct 29 2021 at 17:20)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739411870">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>(Sorry @bjorn3, didn't see you open #3478 before)</p>
</blockquote>
<p>No problem. There are improvements in this PR I missed in my PR.</p>
</blockquote>



<a name="259556316"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259556316" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259556316">(Oct 29 2021 at 17:21)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793287776">PR review</a>.</p>



<a name="259556317"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259556317" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259556317">(Oct 29 2021 at 17:21)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739412469">PR review comment</a>:</p>
<blockquote>
<p>Ah right, that explains why it was removed, thanks! And indeed I can reproduce the error now. Would it make sense to manually add it to the workspace entries from the top-level <code>Cargo.toml</code> then, instead of marking it as an unused dependency?</p>
</blockquote>



<a name="259557055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259557055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259557055">(Oct 29 2021 at 17:27)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#pullrequestreview-793292464">PR review</a>.</p>



<a name="259557056"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259557056" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259557056">(Oct 29 2021 at 17:27)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/3490#discussion_r739415874">PR review comment</a>:</p>
<blockquote>
<p>I guess so.</p>
</blockquote>



<a name="259962796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259962796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259962796">(Nov 02 2021 at 07:58)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3490">PR #3490</a> from <code>remove-unused-cranelift-deps</code> to <code>main</code>.</p>



<a name="259968670"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%233490%20Remove%20unused%20dependencies%20in%20Cranelift/near/259968670" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.233490.20Remove.20unused.20dependencies.20in.20Cranelift.html#259968670">(Nov 02 2021 at 09:08)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/3490">PR #3490</a> from <code>remove-unused-cranelift-deps</code> to <code>main</code>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>