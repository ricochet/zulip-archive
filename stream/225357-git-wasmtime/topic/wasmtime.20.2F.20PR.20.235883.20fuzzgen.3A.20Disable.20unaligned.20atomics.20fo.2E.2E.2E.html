<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5883 fuzzgen: Disable unaligned atomics fo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html">wasmtime / PR #5883 fuzzgen: Disable unaligned atomics fo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="338017034"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338017034" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338017034">(Feb 25 2023 at 15:05)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>Fuzzgen found some issues on RISCV with unaligned <code>atomic_rmw</code>'s (#5882). Lets disable them for now.<br>
</p>
</blockquote>



<a name="338017035"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338017035" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338017035">(Feb 25 2023 at 15:05)</a>:</h4>
<p>afonso360 assigned <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> to jameysharp.</p>



<a name="338045097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338045097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338045097">(Feb 25 2023 at 18:23)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>.</p>



<a name="338045187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338045187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338045187">(Feb 25 2023 at 18:24)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>Fuzzgen found some issues on RISCV with unaligned <code>atomic_rmw</code>'s (#5882). Lets disable them for now.</p>
<p>Edit: And it turns out its not sufficient to just align addresses, the instruction is actually broken (#5884).</p>
</blockquote>



<a name="338161273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338161273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338161273">(Feb 26 2023 at 14:52)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>.</p>



<a name="338161401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338161401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338161401">(Feb 26 2023 at 14:53)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>.</p>



<a name="338168475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338168475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338168475">(Feb 26 2023 at 15:39)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>.</p>



<a name="338417872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338417872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338417872">(Feb 27 2023 at 18:27)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5883#pullrequestreview-1316199249">PR review</a>.</p>



<a name="338417873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338417873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338417873">(Feb 27 2023 at 18:27)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5883#pullrequestreview-1316199249">PR review</a>.</p>



<a name="338417875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338417875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338417875">(Feb 27 2023 at 18:27)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5883#discussion_r1119127238">PR review comment</a>:</p>
<blockquote>
<p>I think I'd prefer to write this like so, phrased as "requires aligned" instead of "supports unaligned" and with the comment placed earlier:</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        // Some backends have issues with unaligned atomics.
        // AArch64: https://github.com/bytecodealliance/wasmtime/issues/5483
        // RISCV: https://github.com/bytecodealliance/wasmtime/issues/5882
        let requires_aligned_atomics = matches!(
            self.target_triple.architecture,
            Architecture::Aarch64(_) | Architecture::Riscv64(_)
        );
        let aligned = if is_atomic &amp;&amp; requires_aligned_atomics {
</code></pre></div><br>
</p>
</blockquote>



<a name="338547916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338547916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338547916">(Feb 28 2023 at 10:22)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5883#pullrequestreview-1317214065">PR review</a>.</p>



<a name="338547917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338547917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338547917">(Feb 28 2023 at 10:22)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5883#discussion_r1119851552">PR review comment</a>:</p>
<blockquote>
<p>Yeah that looks better, thanks!</p>
</blockquote>



<a name="338547970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338547970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338547970">(Feb 28 2023 at 10:23)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a> (assigned to jameysharp) from <code>align-riscv-atomics</code> to <code>main</code>.</p>



<a name="338548036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338548036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338548036">(Feb 28 2023 at 10:23)</a>:</h4>
<p>afonso360 has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a>.</p>



<a name="338563692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235883%20fuzzgen%3A%20Disable%20unaligned%20atomics%20fo.../near/338563692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235883.20fuzzgen.3A.20Disable.20unaligned.20atomics.20fo.2E.2E.2E.html#338563692">(Feb 28 2023 at 11:41)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5883">PR #5883</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>