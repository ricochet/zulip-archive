<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6815 riscv64: Add SIMD IFMA instruction... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236815.20riscv64.3A.20Add.20SIMD.20IFMA.20instruction.2E.2E.2E.html">wasmtime / issue #6815 riscv64: Add SIMD IFMA instruction...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="383424650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236815%20riscv64%3A%20Add%20SIMD%20IFMA%20instruction.../near/383424650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236815.20riscv64.3A.20Add.20SIMD.20IFMA.20instruction.2E.2E.2E.html#383424650">(Aug 09 2023 at 21:57)</a>:</h4>
<p>afonso360 <a href="https://github.com/bytecodealliance/wasmtime/pull/6815#issuecomment-1672212397">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6815">issue #6815</a>:</p>
<blockquote>
<blockquote>
<p>These patterns are already being generated by fuzzgen, right? I've lost track of what works right now.</p>
</blockquote>
<p>Some of them. SIMD <code>ineg</code> doesen't yet work on the interpreter (This seems like a fairly easy issue, so I've opened  #6827), so those aren't generated. The rest of them should be.</p>
<p>However, more importantly we don't yet test RISC-V SIMD in fuzzgen. I've been meaning to do that, but it's the only architecture where SIMD does not work with the default feature set, and we don't have any infrastructure for that in fuzzgen. I definitely want to get this working before considering the SIMD work done, but just haven't gotten around to it yet.</p>
<blockquote>
<p>While reading this it occurred to me that someday we ought to have a lot more egraph rules for splat, such as rewriting (imul (splat x) (splat y)) to (splat (imul x y)). Those should probably go in cranelift/codegen/src/opts/vector.isle, and move some existing rules from extends.isle` there too I think.</p>
</blockquote>
<p>Yeah, those are good ones! And that also looks like a awesome starter issue! I've opened #6828.<br>
</p>
</blockquote>



<a name="383424679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236815%20riscv64%3A%20Add%20SIMD%20IFMA%20instruction.../near/383424679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236815.20riscv64.3A.20Add.20SIMD.20IFMA.20instruction.2E.2E.2E.html#383424679">(Aug 09 2023 at 21:57)</a>:</h4>
<p>afonso360 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6815#issuecomment-1672212397">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6815">issue #6815</a>:</p>
<blockquote>
<blockquote>
<p>These patterns are already being generated by fuzzgen, right? I've lost track of what works right now.</p>
</blockquote>
<p>Some of them. SIMD <code>ineg</code> doesen't yet work on the interpreter (This seems like a fairly easy issue, so I've opened  #6827), so those aren't generated. The rest of them should be.</p>
<p>However, more importantly we don't yet test RISC-V SIMD in fuzzgen. I've been meaning to do that, but it's the only architecture where SIMD does not work with the default feature set, and we don't have any infrastructure for that in fuzzgen. I definitely want to get this working before considering the SIMD work done, but just haven't gotten around to it yet.</p>
<blockquote>
<p>While reading this it occurred to me that someday we ought to have a lot more egraph rules for splat, such as rewriting (imul (splat x) (splat y)) to (splat (imul x y)). Those should probably go in cranelift/codegen/src/opts/vector.isle, and move some existing rules from extends.isle` there too I think.</p>
</blockquote>
<p>Yeah, those are good ones! And that also looks like an awesome starter issue! I've opened #6828.<br>
</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>