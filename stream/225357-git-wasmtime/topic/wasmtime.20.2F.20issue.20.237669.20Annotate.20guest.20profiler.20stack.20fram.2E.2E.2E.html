<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7669 Annotate guest profiler stack fram... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237669.20Annotate.20guest.20profiler.20stack.20fram.2E.2E.2E.html">wasmtime / issue #7669 Annotate guest profiler stack fram...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="406867254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237669%20Annotate%20guest%20profiler%20stack%20fram.../near/406867254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237669.20Annotate.20guest.20profiler.20stack.20fram.2E.2E.2E.html#406867254">(Dec 09 2023 at 01:24)</a>:</h4>
<p><a href="https://github.com/jameysharp">jameysharp</a> added the wasmtime label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7669">Issue #7669</a>.</p>



<a name="406867255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237669%20Annotate%20guest%20profiler%20stack%20fram.../near/406867255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237669.20Annotate.20guest.20profiler.20stack.20fram.2E.2E.2E.html#406867255">(Dec 09 2023 at 01:24)</a>:</h4>
<p><a href="https://github.com/jameysharp">jameysharp</a> added the enhancement label to <a href="https://github.com/bytecodealliance/wasmtime/issues/7669">Issue #7669</a>.</p>



<a name="406867258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237669%20Annotate%20guest%20profiler%20stack%20fram.../near/406867258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237669.20Annotate.20guest.20profiler.20stack.20fram.2E.2E.2E.html#406867258">(Dec 09 2023 at 01:24)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/issues/7669">issue #7669</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>So far usually a guest has consisted of only one core WebAssembly module, but with the component model on its way, that's changing. For each stack frame in a profile, the guest profiler should indicate which module that frame's function came from. If the same module is instantiated multiple times, ideally the profile would also report which instance was running.</p>
<h4>Benefit</h4>
<p>In multi-module guests, seeing only a function name is confusing. Including the module identity will help the user understand which part of their code is running.</p>
<h4>Implementation</h4>
<p>I'm not sure how to identify a module in a human-meaningful way. I'm not sure if modules have useful names inside components, or how to find those names if they exist. Similarly I don't think instances have an identity that we can find while stack-walking or that means anything to the user; I believe this is an open issue for our core-dump support as well.</p>
<h4>Alternatives</h4>
<p>We could continue to make the user guess which module each frame is from. In many cases probably the important function names are unique across modules anyway. For the moment, while multi-module guests remain unusual, the _status quo_ is probably fine.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>