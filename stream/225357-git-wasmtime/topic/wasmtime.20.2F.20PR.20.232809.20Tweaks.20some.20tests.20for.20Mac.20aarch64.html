<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2809 Tweaks some tests for Mac aarch64 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html">wasmtime / PR #2809 Tweaks some tests for Mac aarch64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="233327759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233327759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233327759">(Apr 06 2021 at 14:27)</a>:</h4>
<p>bnjbvr opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2809">PR #2809</a> from <code>mac-aarch64-test-tweaks</code> to <code>main</code>:</p>
<blockquote>
<ul>
<li>
<p>some tests don't pass because of bad interactions with the system's<br>
libunwind; ignore them for now.</p>
</li>
<li>
<p>the page size on mac aarch64 is 16K, not 4K; tweak some tests which<br>
were expecting 4K or multiples of 4K pages to use a multiple of host page size<br>
instead.</p>
</li>
<li>
<p>a cranelift-native test needed an update for the new calling convention.</p>
</li>
</ul>
<hr>
<p>This also documents the test failures on mac aarch64. I am pretty sure I saw more a few weeks ago, and they've been fixed since then, so congratulations to the team <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<p>With these changes, the test suite as run from the CI "test" step passes on my Mac M1.</p>
</blockquote>



<a name="233329713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233329713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233329713">(Apr 06 2021 at 14:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#pullrequestreview-629053756">PR Review</a>.</p>



<a name="233329714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233329714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233329714">(Apr 06 2021 at 14:39)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#discussion_r607910998">PR Review Comment</a>:</p>
<blockquote>
<p>Maybe move this <code>if cfg!(</code> above the <code>if cfg!(any(unix, ...</code>?</p>
</blockquote>



<a name="233341213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233341213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233341213">(Apr 06 2021 at 15:32)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#pullrequestreview-629116982">PR Review</a>.</p>



<a name="233341214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233341214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233341214">(Apr 06 2021 at 15:32)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#discussion_r607957594">PR Review Comment</a>:</p>
<blockquote>
<p>yep, and it's not even correct for macos x64, will fix.</p>
</blockquote>



<a name="233342107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233342107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233342107">(Apr 06 2021 at 15:38)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2809">PR #2809</a> from <code>mac-aarch64-test-tweaks</code> to <code>main</code>.</p>



<a name="233370414"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233370414" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233370414">(Apr 06 2021 at 18:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#pullrequestreview-629308750">PR Review</a>.</p>



<a name="233372518"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233372518" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233372518">(Apr 06 2021 at 19:10)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#discussion_r608112472">PR Review Comment</a>:</p>
<blockquote>
<p>s/instance/instance struct/? (I read it the other way and was puzzled briefly)</p>
</blockquote>



<a name="233372519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233372519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233372519">(Apr 06 2021 at 19:10)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#pullrequestreview-629321237">PR Review</a>.</p>



<a name="233453613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233453613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233453613">(Apr 07 2021 at 08:54)</a>:</h4>
<p>bnjbvr updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2809">PR #2809</a> from <code>mac-aarch64-test-tweaks</code> to <code>main</code>.</p>



<a name="233453694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233453694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233453694">(Apr 07 2021 at 08:55)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#pullrequestreview-629758746">PR Review</a>.</p>



<a name="233453697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233453697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233453697">(Apr 07 2021 at 08:55)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2809#discussion_r608467737">PR Review Comment</a>:</p>
<blockquote>
<p>done!</p>
</blockquote>



<a name="233481426"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232809%20Tweaks%20some%20tests%20for%20Mac%20aarch64/near/233481426" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232809.20Tweaks.20some.20tests.20for.20Mac.20aarch64.html#233481426">(Apr 07 2021 at 12:54)</a>:</h4>
<p>bnjbvr merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2809">PR #2809</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>