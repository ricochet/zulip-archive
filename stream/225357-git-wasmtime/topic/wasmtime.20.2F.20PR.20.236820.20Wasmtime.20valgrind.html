<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6820 Wasmtime valgrind · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html">wasmtime / PR #6820 Wasmtime valgrind</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="383036834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383036834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383036834">(Aug 08 2023 at 17:54)</a>:</h4>
<p>ssunkin-fastly opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a> from <code>ssunkin-fastly:wasmtime-valgrind-hacking</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This is a draft PR for Valgrind on Wasm for early review by cfallin and ixi.<br>
</p>
</blockquote>



<a name="383037260"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383037260" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383037260">(Aug 08 2023 at 17:56)</a>:</h4>
<p>ssunkin-fastly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383050838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050838">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1567889944">PR review</a>:</p>
<blockquote>
<p>This is looking really great! I have a whole bunch of minor comments but the overall shape of the code is good and we should be able to refine things fairly quickly, I think.</p>
<p>I know you're working on doc-comments but will note in particular that our CI checks will fail until there's a doc-comment on every public type, enum, function; it might feel a little tedious but it's good practice :-)</p>
<p>It'd be good to file some followup GitHub issues and refer to issue numbers where appropriate in comments as well. Off the top of my head:</p>
<ul>
<li>Support for multiple memories</li>
<li>Support for instrumenting SIMD loads/stores</li>
<li>Support for handling different memory layouts (assume whole initial memory size is valid, for example)</li>
<li>Option to print valgrind errors and continue (as the "real Valgrind" does) rather than trap</li>
</ul>
<p>and anything else on your to-do list you want to capture.</p>
<p>Happy to pair on any of the requests here if unclear!</p>
</blockquote>



<a name="383050839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050839">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1567889944">PR review</a>:</p>
<blockquote>
<p>This is looking really great! I have a whole bunch of minor comments but the overall shape of the code is good and we should be able to refine things fairly quickly, I think.</p>
<p>I know you're working on doc-comments but will note in particular that our CI checks will fail until there's a doc-comment on every public type, enum, function; it might feel a little tedious but it's good practice :-)</p>
<p>It'd be good to file some followup GitHub issues and refer to issue numbers where appropriate in comments as well. Off the top of my head:</p>
<ul>
<li>Support for multiple memories</li>
<li>Support for instrumenting SIMD loads/stores</li>
<li>Support for handling different memory layouts (assume whole initial memory size is valid, for example)</li>
<li>Option to print valgrind errors and continue (as the "real Valgrind" does) rather than trap</li>
</ul>
<p>and anything else on your to-do list you want to capture.</p>
<p>Happy to pair on any of the requests here if unclear!</p>
</blockquote>



<a name="383050841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050841">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287496884">PR review comment</a>:</p>
<blockquote>
<p>Let's call this <code>wasmtime-valgrind</code> for consistency with the other crates in <code>crates/</code>; also, the version should match the others (<code>11.0.0</code> here but likely <code>13</code> once you merge or rebase to a latest <code>main</code>).</p>
</blockquote>



<a name="383050842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050842">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287501775">PR review comment</a>:</p>
<blockquote>
<p>tiny style nit but there's a missing newline at the end of this file (GitHub flags it with a symbol) -- could you add one?</p>
</blockquote>



<a name="383050843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050843">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287502534">PR review comment</a>:</p>
<blockquote>
<p>stray comment about <code>Value</code> can be removed I think?</p>
</blockquote>



<a name="383050844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050844">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287498576">PR review comment</a>:</p>
<blockquote>
<p>Let's add a TODO referring to a filed issue to add the load/store hooks for vector operands -- something like <code>// TODO(#1234): add </code>before_load<code> / </code>before_store<code> for SIMD loads and stores.</code> where <code>1234</code> is a GitHub issue number for a new issue you've filed.</p>
</blockquote>



<a name="383050845"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050845" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050845">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287501233">PR review comment</a>:</p>
<blockquote>
<p>stray comment we can remove I think?</p>
</blockquote>



<a name="383050847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050847">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287500766">PR review comment</a>:</p>
<blockquote>
<p>Just making a note here of empty doc-comments to fill in before merge (I know you're working on this at the moment).</p>
</blockquote>



<a name="383050848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050848">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287505964">PR review comment</a>:</p>
<blockquote>
<p>To make this a bit more robust (someone <em>could</em> define a function named <code>malloc</code> with no args), let's check whether there actually is an arg 2. Something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">func_args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="n">func</span><span class="p">.</span><span class="n">dfg</span><span class="p">.</span><span class="n">block_params</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">func</span><span class="p">.</span><span class="n">layout</span><span class="p">.</span><span class="n">entry_block</span><span class="p">().</span><span class="n">unwrap</span><span class="p">());</span>
<span class="kd">let</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">func_args</span><span class="p">.</span><span class="n">len</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// If a function named `malloc` has at least one argument, we assume the</span>
<span class="w">  </span><span class="c1">// first argument is the requested allocation size.</span>
<span class="w">  </span><span class="n">func_args</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">};</span>
</code></pre></div>
<p>(also comment about the assumption, something like the above, would be good)</p>
</blockquote>



<a name="383050849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050849">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287502893">PR review comment</a>:</p>
<blockquote>
<p>commented-out println and comment can be removed</p>
</blockquote>



<a name="383050850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050850">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287506786">PR review comment</a>:</p>
<blockquote>
<p>Let's add a similar early return if <code>retvals</code> is empty (someone could define <code>void malloc()</code> if they wanted to!) and a comment about the assumption (that the returned value is a pointer to the allocated memory).</p>
</blockquote>



<a name="383050852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050852">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287503811">PR review comment</a>:</p>
<blockquote>
<p>Let's call this <code>hook_malloc_exit</code> I think -- it's a little clearer (we're "hooking" or inserting a hook, rather than checking right now at compile time). Likewise below for <code>check_free_exit</code>...</p>
</blockquote>



<a name="383050853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050853">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287509941">PR review comment</a>:</p>
<blockquote>
<p>Let's change this to a <code>panic</code> and add a helpful message -- "function name not a <code>UserFuncName::User</code> as expected" or something like that?</p>
</blockquote>



<a name="383050854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050854">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287507019">PR review comment</a>:</p>
<blockquote>
<p>Likewise here: check, early return, comment about assumption.</p>
</blockquote>



<a name="383050855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050855">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287508258">PR review comment</a>:</p>
<blockquote>
<p>Have we tested what happens if we don't have a name section? We should I think handle this case gracefully (I guess by treating it as if no functions match). You can test this by doing <code>wasm-strip program.wasm</code> and then running (<code>wasm-strip</code> is part of Binaryen I think; happy to help or run this for you if needed).</p>
</blockquote>



<a name="383050856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050856">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287511177">PR review comment</a>:</p>
<blockquote>
<p>This pattern occurs several times -- can we wrap it in a helper <code>current_func_name(&amp;self) -&gt; Option&lt;&amp;str&gt;</code>?</p>
<p>(The <code>Option</code> return lets us naturally handle the missing name section too: we can do <code>if self.current_func_name() == Some("malloc") { ... }</code> and we get no-match for <code>None</code>.)</p>
</blockquote>



<a name="383050857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050857">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287508955">PR review comment</a>:</p>
<blockquote>
<p>I think we can skip these calls here and below (and then rename the <code>builder</code> argument to <code>_builder</code> so we don't get warnings about unused variables/args).</p>
</blockquote>



<a name="383050858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050858">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287513801">PR review comment</a>:</p>
<blockquote>
<p>Let's add a TODO here to support multiple memories; for now we have just one <code>valgrind_state</code> and it corresponds to memory 0.</p>
</blockquote>



<a name="383050859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050859">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287513367">PR review comment</a>:</p>
<blockquote>
<p>likewise here, add newline at end of file</p>
</blockquote>



<a name="383050860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050860">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287511712">PR review comment</a>:</p>
<blockquote>
<p>Let's add a comment here about the assumption we're making -- that global 0 is the auxiliary stack pointer.</p>
</blockquote>



<a name="383050861"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050861" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050861">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287512560">PR review comment</a>:</p>
<blockquote>
<p>Can we add an argument here for the memory index (<code>MemoryIndex</code> type), and insert the below logic only if the grow is on memory 0? In practice we won't hit the case today but it's possible to define a Wasm module that has multiple memories, and a grow of some other memory could confuse this logic otherwise.</p>
</blockquote>



<a name="383050863"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050863" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050863">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287514141">PR review comment</a>:</p>
<blockquote>
<p>we can remove this println now I think (also search for printlns elsewhere to be sure)</p>
</blockquote>



<a name="383050864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050864">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287516364">PR review comment</a>:</p>
<blockquote>
<p>Let's make this a constant (and then uppercase it to keep rustc happy): <code>let KIB: usize = 1024;</code></p>
</blockquote>



<a name="383050865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050865">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287518302">PR review comment</a>:</p>
<blockquote>
<p>I think this is left-over from prior to the import of sources into the main repo -- you should be able to edit <code>.gitmodules</code> manually to remove the stanza?</p>
</blockquote>



<a name="383050866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050866">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287515567">PR review comment</a>:</p>
<blockquote>
<p>Let's re-enable this -- or is it disabled because of some assumption we're making wrt data location?</p>
</blockquote>



<a name="383050867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050867">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287517549">PR review comment</a>:</p>
<blockquote>
<p>enormously tiny nitpick but this would read slightly more naturally for me as <code>... * 64 * KIB</code></p>
</blockquote>



<a name="383050869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050869">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287518994">PR review comment</a>:</p>
<blockquote>
<p>Let's update all the metadata here to match the other crates in <code>crates/</code> -- developers as "The Wasmtime Developers", license, current version, etc (and remove the comment from the starter template below).</p>
</blockquote>



<a name="383050870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050870">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287519491">PR review comment</a>:</p>
<blockquote>
<p>We can probably remove this TODO?</p>
</blockquote>



<a name="383050871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050871">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287521352">PR review comment</a>:</p>
<blockquote>
<p>To reduce ambiguity I think this should be called <code>stack_end</code> or something similar? ("Stack size" makes me think of the actual size, so a stack from 1MiB down to 1MiB - 4KiB is 4KiB large; but the "end" is 1MiB)</p>
</blockquote>



<a name="383050872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050872">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287522865">PR review comment</a>:</p>
<blockquote>
<p>Let's add a doc-comment at the top of this module like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="sd">//! add some docs here</span>
<span class="sd">//!</span>
<span class="sd">//! in markdown format, with multiple paragraphs as desired</span>
<span class="sd">//!</span>
<span class="sd">//! like this</span>
</code></pre></div>
<p>documenting the assumptions about memory layout here.</p>
</blockquote>



<a name="383050873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050873">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287524480">PR review comment</a>:</p>
<blockquote>
<p>We'll want a much longer doc-comment of course, probably with a pointer to documentation for more details on how to use!</p>
</blockquote>



<a name="383050874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383050874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383050874">(Aug 08 2023 at 18:54)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1287523585">PR review comment</a>:</p>
<blockquote>
<p>I'm somewhat surprised this is needed -- could we document the case where it is if so (example addresses or whatnot)?</p>
</blockquote>



<a name="383423692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383423692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383423692">(Aug 09 2023 at 21:49)</a>:</h4>
<p>ssunkin-fastly submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1570615719">PR review</a>.</p>



<a name="383423693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383423693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383423693">(Aug 09 2023 at 21:49)</a>:</h4>
<p>ssunkin-fastly created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1289238077">PR review comment</a>:</p>
<blockquote>
<p>This was disabled because all memory below the start of the stack is just marked as read-write-ok</p>
</blockquote>



<a name="383435526"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383435526" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383435526">(Aug 09 2023 at 23:47)</a>:</h4>
<p>ssunkin-fastly submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1570780251">PR review</a>.</p>



<a name="383435527"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383435527" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383435527">(Aug 09 2023 at 23:47)</a>:</h4>
<p>ssunkin-fastly created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1289366790">PR review comment</a>:</p>
<blockquote>
<p>ah the reason these were added were to call the builtins so that there wouldn't be unused function warnings</p>
</blockquote>



<a name="383690698"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383690698" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383690698">(Aug 10 2023 at 16:33)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572305891">PR review</a>.</p>



<a name="383690699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383690699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383690699">(Aug 10 2023 at 16:33)</a>:</h4>
<p>iximeow created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290397404">PR review comment</a>:</p>
<blockquote>
<p>fwiw i think the error here is when <code>state.allocations.len() == 0</code>, if the length is one i expect this would choose the one valid index (<code>0</code>). maybe this comment predates the <code>if state.allocations.is_empty()</code> check above?</p>
</blockquote>



<a name="383693688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383693688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383693688">(Aug 10 2023 at 16:42)</a>:</h4>
<p>iximeow submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572323796">PR review</a>.</p>



<a name="383693690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383693690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383693690">(Aug 10 2023 at 16:42)</a>:</h4>
<p>iximeow created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290409452">PR review comment</a>:</p>
<blockquote>
<p>Chris mentioned a longer doc comment on the CLI flag below, but this also seems to have <a href="https://github.com/bytecodealliance/wasmtime/blob/fe3db2a59e8b5f05d6c58c23a59799067a4dcb35/crates/wasmtime/src/config.rs#L1004">prior art</a> for linking to <a href="http://bytecodealliance.github.io">bytecodealliance.github.io</a> for docs pages. i'm not sure if it makes sense to basically copy the CLI flag's help text here, or maybe have the flag say something a little shorter like "enables memory checking for wasm programs, see the doc comment over on config for more"...?</p>
<p>suppose that also depends on what you've changed through the first iteration of feedback here. i'll keep an eye out!</p>
</blockquote>



<a name="383724194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383724194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383724194">(Aug 10 2023 at 18:31)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383724287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383724287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383724287">(Aug 10 2023 at 18:32)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383724399"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383724399" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383724399">(Aug 10 2023 at 18:32)</a>:</h4>
<p>ssunkin-fastly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383724432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383724432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383724432">(Aug 10 2023 at 18:32)</a>:</h4>
<p><strong>cfallin</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a> as ready for review.</p>



<a name="383725261"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383725261" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383725261">(Aug 10 2023 at 18:35)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383725796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383725796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383725796">(Aug 10 2023 at 18:37)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383727380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383727380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383727380">(Aug 10 2023 at 18:43)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290543648">PR review comment</a>:</p>
<blockquote>
<p>Let's add a brief note that wmemcheck requires a non-stripped wasm (with a name section) so that it can recognize the malloc and free functions, and doesn't work with custom allocators yet.</p>
<p>Also, can we add a reference to Valgrind? Something like "wmemcheck is inspired by, and replicates the basic functionality of, Valgrind's memcheck tool."</p>
</blockquote>



<a name="383727737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383727737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383727737">(Aug 10 2023 at 18:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572520278">PR review</a>:</p>
<blockquote>
<p>Very close now!</p>
</blockquote>



<a name="383727757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383727757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383727757">(Aug 10 2023 at 18:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290541450">PR review comment</a>:</p>
<blockquote>
<p>Let's write these from the generic perspective of Cranelift, without knowledge of wasmtime or wmemcheck (here we're defining the interface/tools that the higher abstraction layer uses). So something like "Insert code before a function return."</p>
<p>Likewise below: before loads/stores/global updates/memory growths.</p>
</blockquote>



<a name="383728295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383728295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383728295">(Aug 10 2023 at 18:47)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290544510">PR review comment</a>:</p>
<blockquote>
<p>No need to refer to the implementation ("including wmemcheck_state") here -- the relevant bit for the CLI user is just that it does memory-usage error checking.</p>
</blockquote>



<a name="383731534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383731534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383731534">(Aug 10 2023 at 19:00)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572531315">PR review</a>.</p>



<a name="383732689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383732689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383732689">(Aug 10 2023 at 19:05)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572520278">PR review</a>:</p>
<blockquote>
<p>Very close now!</p>
</blockquote>



<a name="383732751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383732751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383732751">(Aug 10 2023 at 19:05)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383733333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383733333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383733333">(Aug 10 2023 at 19:08)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572553969">PR review</a>:</p>
<blockquote>
<p>LGTM, thanks so much!</p>
</blockquote>



<a name="383733801"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383733801" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383733801">(Aug 10 2023 at 19:10)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572562232">PR review</a>.</p>



<a name="383733842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383733842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383733842">(Aug 10 2023 at 19:10)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290571820">PR review comment</a>:</p>
<blockquote>
<p>Could this perhaps cause an error to get returned during <code>Engine::new</code> if <code>wmemcheck</code> wasn't enabled at compile time?</p>
</blockquote>



<a name="383733929"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383733929" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383733929">(Aug 10 2023 at 19:10)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290548929">PR review comment</a>:</p>
<blockquote>
<p>Let's rename this to <code>wasmtime-wmemcheck</code>, to stick with the convention that everything in <code>crates/</code> is named with that prefix.</p>
</blockquote>



<a name="383733990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383733990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383733990">(Aug 10 2023 at 19:11)</a>:</h4>
<p>ssunkin-fastly updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383734658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383734658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383734658">(Aug 10 2023 at 19:14)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572562232">PR review</a>.</p>



<a name="383734666"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383734666" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383734666">(Aug 10 2023 at 19:14)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290570736">PR review comment</a>:</p>
<blockquote>
<p>Could this be added to the overall workspace in this repository? (there's a few other examples of crates that have their own fuzzers which are also part of the main workspace)</p>
</blockquote>



<a name="383742597"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383742597" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383742597">(Aug 10 2023 at 19:52)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290569301">PR review comment</a>:</p>
<blockquote>
<p>Instead of making this <code>pub</code> can access to the underlying index go through <code>.as_u32()</code>?</p>
</blockquote>



<a name="383765114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765114">(Aug 10 2023 at 21:47)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>.</p>



<a name="383765137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765137">(Aug 10 2023 at 21:47)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572779410">PR review</a>.</p>



<a name="383765138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765138">(Aug 10 2023 at 21:47)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290714595">PR review comment</a>:</p>
<blockquote>
<p>Yup, added a check to <code>Config::validate()</code>!</p>
</blockquote>



<a name="383765228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765228">(Aug 10 2023 at 21:48)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572779822">PR review</a>.</p>



<a name="383765229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765229">(Aug 10 2023 at 21:48)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290714910">PR review comment</a>:</p>
<blockquote>
<p>I've gone ahead and deleted the <code>fuzz</code> crate -- I think we had talked about this earlier but missed it, as the fuzz targets are out-of-date anyway.</p>
</blockquote>



<a name="383765242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765242">(Aug 10 2023 at 21:48)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#pullrequestreview-1572779903">PR review</a>.</p>



<a name="383765243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765243">(Aug 10 2023 at 21:48)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/6820#discussion_r1290714989">PR review comment</a>:</p>
<blockquote>
<p>Fixed.</p>
</blockquote>



<a name="383765619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236820%20Wasmtime%20valgrind/near/383765619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236820.20Wasmtime.20valgrind.html#383765619">(Aug 10 2023 at 21:50)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6820">PR #6820</a>:</p>
<blockquote>
<p>This PR introduces <code>wmemcheck</code>, a memory checker for a Wasm guest running inside Wasmtime.</p>
<p><code>wmemcheck</code> operates by recognizing calls to malloc and free inside the Wasm module, and tracking which bytes are valid. It then instruments loads and stores and flags errors when accesses are invalid. This is inspired by the <code>memcheck</code> tool in Valgrind, hence the name.</p>
<p>The functionality is off by default and is enabled with <code>wasmtime run --wmemcheck</code>.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>