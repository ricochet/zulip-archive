<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6945 aarch64: Use `RegScaled*` addressing ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html">wasmtime / PR #6945 aarch64: Use `RegScaled*` addressing ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="388393370"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388393370" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388393370">(Aug 31 2023 at 19:34)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a> from <code>alexcrichton:aarch64-scaled-amode</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit adds a few cases to <code>amode</code> construction on AArch64 for using the <code>RegScaled*</code> variants of <code>AMode</code>. This won't affect wasm due to this only matching the sign-extension happening before the shift, but it should otherwise help non-wasm Cranelift use cases.</p>
<p>Closes #6742</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="388393371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388393371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388393371">(Aug 31 2023 at 19:34)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a>.</p>



<a name="388393372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388393372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388393372">(Aug 31 2023 at 19:34)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a>.</p>



<a name="388394991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388394991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388394991">(Aug 31 2023 at 19:44)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605593732">PR review</a>:</p>
<blockquote>
<p>r=me with testing request below addressed</p>
</blockquote>



<a name="388394992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388394992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388394992">(Aug 31 2023 at 19:44)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605593732">PR review</a>:</p>
<blockquote>
<p>r=me with testing request below addressed</p>
</blockquote>



<a name="388394996"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388394996" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388394996">(Aug 31 2023 at 19:44)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#discussion_r1312146085">PR review comment</a>:</p>
<blockquote>
<p>Can we add some tests for when the order of the shift vs extend is wrong in the filetests? IIRC we had some historical issues with amodes and doing the extend at the wrong time, so it would be good to get some future-proofing here.</p>
</blockquote>



<a name="388395511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388395511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388395511">(Aug 31 2023 at 19:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605601467">PR review</a>.</p>



<a name="388395512"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388395512" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388395512">(Aug 31 2023 at 19:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#discussion_r1312151424">PR review comment</a>:</p>
<blockquote>
<p>Indeed! I tried to make sure those existed <a href="https://github.com/bytecodealliance/wasmtime/pull/6945/files#diff-24cb46c4d5e7fb0dd8b989bacc6ea06ea7ae25adf616836fd2564113a602a788R691-R710">here</a> and <a href="https://github.com/bytecodealliance/wasmtime/pull/6945/files#diff-24cb46c4d5e7fb0dd8b989bacc6ea06ea7ae25adf616836fd2564113a602a788R594-R612">here</a></p>
</blockquote>



<a name="388395598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388395598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388395598">(Aug 31 2023 at 19:49)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a>.</p>



<a name="388396496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388396496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388396496">(Aug 31 2023 at 19:56)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605613736">PR review</a>:</p>
<blockquote>
<p>Looks good to me as well, thanks! Thorough tests definitely appreciated.</p>
</blockquote>



<a name="388396630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388396630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388396630">(Aug 31 2023 at 19:56)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a>.</p>



<a name="388398677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388398677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388398677">(Aug 31 2023 at 20:11)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605635711">PR review</a>.</p>



<a name="388398679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388398679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388398679">(Aug 31 2023 at 20:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#discussion_r1312174059">PR review comment</a>:</p>
<blockquote>
<p>Ah sorry I thought I only saw <code>shift(extend(..))</code> and not <code>extend(shift(..))</code></p>
</blockquote>



<a name="388398690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388398690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388398690">(Aug 31 2023 at 20:11)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#pullrequestreview-1605635885">PR review</a>.</p>



<a name="388398691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388398691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388398691">(Aug 31 2023 at 20:11)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/6945#discussion_r1312174171">PR review comment</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="388405785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236945%20aarch64%3A%20Use%20%60RegScaled%2A%60%20addressing%20.../near/388405785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236945.20aarch64.3A.20Use.20.60RegScaled.2A.60.20addressing.20.2E.2E.2E.html#388405785">(Aug 31 2023 at 21:04)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6945">PR #6945</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>