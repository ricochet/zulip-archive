<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4399 Implement `iabs` in ISLE (AArch64) · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html">wasmtime / PR #4399 Implement `iabs` in ISLE (AArch64)</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="288809357"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/288809357" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#288809357">(Jul 07 2022 at 13:57)</a>:</h4>
<p>dheaton-arm opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4399">PR #4399</a> from <code>isle-iabs</code> to <code>main</code>:</p>
<blockquote>
<p>Converts the existing implementation of <code>iabs</code> for AArch64 into ISLE,<br>
and fixes support for <code>iabs</code> on scalar values.</p>
<p>Copyright (c) 2022 Arm Limited.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="288819756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/288819756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#288819756">(Jul 07 2022 at 15:10)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4399#pullrequestreview-1031746304">PR review</a>.</p>



<a name="288819757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/288819757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#288819757">(Jul 07 2022 at 15:10)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4399#discussion_r915990130">PR review comment</a>:</p>
<blockquote>
<p>Just a drive-by-comment from me, but I think that the intention is that while this technically works today we'd one day like to add a "chaos mode" of sorts to ISLE selection where any matching rule can be chosen for a lowering. In that sense <code>iabs</code> with an <code>i64</code> result would match this rule but it's not valid to match this rule since it only works for vectors. I think that this would probably be best to have a matcher/extractor of some sort for the <code>ty</code> here like <code>multi_lane</code> (or ideally something like <code>multi_integer_lane</code> to avoid matching <code>f64x2</code> but I don't think we have that yet)</p>
</blockquote>



<a name="288839208"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/288839208" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#288839208">(Jul 07 2022 at 17:33)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/4399#discussion_r916122904">PR review comment</a>:</p>
<blockquote>
<p>Yep, this is a somewhat persistent subtle issue to keep in mind, sorry @dheaton-arm -- each rule has to be correct on its own. One can use rule priorities to make one rule semantically shadowed by others though; that's probably the easiest approach here. So <code>(rule -1 (lower (has_type ty ...)))</code> (lower numbers are lower priority).</p>
</blockquote>



<a name="288839212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/288839212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#288839212">(Jul 07 2022 at 17:33)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4399#pullrequestreview-1031936742">PR review</a>.</p>



<a name="289468001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/289468001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#289468001">(Jul 13 2022 at 14:33)</a>:</h4>
<p>dheaton-arm updated <a href="https://github.com/bytecodealliance/wasmtime/pull/4399">PR #4399</a> from <code>isle-iabs</code> to <code>main</code>.</p>



<a name="290003147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/290003147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#290003147">(Jul 18 2022 at 18:12)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4399#pullrequestreview-1042289151">PR review</a>.</p>



<a name="290003161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234399%20Implement%20%60iabs%60%20in%20ISLE%20%28AArch64%29/near/290003161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234399.20Implement.20.60iabs.60.20in.20ISLE.20.28AArch64.29.html#290003161">(Jul 18 2022 at 18:12)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4399">PR #4399</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>