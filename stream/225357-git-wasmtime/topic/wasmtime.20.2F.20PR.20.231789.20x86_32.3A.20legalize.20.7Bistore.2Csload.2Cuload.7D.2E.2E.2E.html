<html>
<head><meta charset="utf-8"><title>wasmtime / PR #1789 x86_32: legalize {istore,sload,uload}... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html">wasmtime / PR #1789 x86_32: legalize {istore,sload,uload}...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="199187753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199187753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199187753">(May 29 2020 at 17:46)</a>:</h4>
<p>whitequark edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>master</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
<p>Doesn't work yet due to <a href="https://github.com/bytecodealliance/wasmtime/issues/1747#issuecomment-636098907">https://github.com/bytecodealliance/wasmtime/issues/1747#issuecomment-636098907</a>.</p>
</blockquote>



<a name="199202097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199202097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199202097">(May 29 2020 at 19:39)</a>:</h4>
<p>whitequark updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>master</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
<p>Doesn't work yet due to <a href="https://github.com/bytecodealliance/wasmtime/issues/1747#issuecomment-636098907">https://github.com/bytecodealliance/wasmtime/issues/1747#issuecomment-636098907</a>.</p>
</blockquote>



<a name="199202824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199202824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199202824">(May 29 2020 at 19:46)</a>:</h4>
<p>whitequark edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>master</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
</blockquote>



<a name="199202864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199202864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199202864">(May 29 2020 at 19:46)</a>:</h4>
<p>whitequark updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>master</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
</blockquote>



<a name="199211051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199211051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199211051">(May 29 2020 at 20:56)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-421282259">PR Review</a>.</p>



<a name="199211052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199211052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199211052">(May 29 2020 at 20:56)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-421282259">PR Review</a>.</p>



<a name="199211053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199211053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199211053">(May 29 2020 at 20:56)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r432731219">PR Review Comment</a>:</p>
<blockquote>
<div class="codehilite"><pre><span></span><code>    v1 = sload32.i32 v0
</code></pre></div>


<p>same for <code>uload32</code>.</p>
</blockquote>



<a name="199240756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199240756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199240756">(May 30 2020 at 05:59)</a>:</h4>
<p>whitequark updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>master</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
</blockquote>



<a name="199240758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199240758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199240758">(May 30 2020 at 05:59)</a>:</h4>
<p><strong>whitequark</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> as ready for review.</p>



<a name="199240760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199240760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199240760">(May 30 2020 at 05:59)</a>:</h4>
<p>whitequark created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r432814238">PR Review Comment</a>:</p>
<blockquote>
<p>Done. I'm not sure why it worked before the change...</p>
</blockquote>



<a name="199240761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199240761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199240761">(May 30 2020 at 05:59)</a>:</h4>
<p>whitequark submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-421381528">PR Review</a>.</p>



<a name="199693167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693167">(Jun 04 2020 at 00:17)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424019903">PR Review</a>.</p>



<a name="199693168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693168">(Jun 04 2020 at 00:17)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434924500">PR Review Comment</a>:</p>
<blockquote>
<p>In this legalization we are trying to store the lower 32 bits of an <code>I64</code>. It makes sense to me that this would be in <code>narrow</code>.</p>
</blockquote>



<a name="199693292"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693292" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693292">(Jun 04 2020 at 00:19)</a>:</h4>
<p>abrown edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434924500">PR Review Comment</a>.</p>



<a name="199693678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693678">(Jun 04 2020 at 00:25)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424022337">PR Review</a>.</p>



<a name="199693679"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693679" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693679">(Jun 04 2020 at 00:25)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434926551">PR Review Comment</a>:</p>
<blockquote>
<p>This seems to use an <code>I32</code> pointer (the controlling type) to load the low 32 bits of a register and then sign-extend to 64 bits (from the instruction definition). In 32-bit x86, what is this operation supposed to be doing? If there are no 64-bit registers available for this sign-extension, is <code>sextend.I64</code> going to legalize further to something else? And is that actually what you want? E.g. if bit 31 is 0, should another register be zeroed out; or if bit 31 is 1, should another register be set to all 1s?</p>
</blockquote>



<a name="199693875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693875">(Jun 04 2020 at 00:28)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424023330">PR Review</a>.</p>



<a name="199693915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199693915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199693915">(Jun 04 2020 at 00:29)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434927372">PR Review Comment</a>:</p>
<blockquote>
<p>This uses an <code>I32</code> pointer (the controlling type) to load the low 32 bits of a register and then just extend (unsigned) to 64 bits. In 32-bit x86, I would think that <code>uextend.I64</code> should just zero out another register?</p>
</blockquote>



<a name="199694222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199694222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199694222">(Jun 04 2020 at 00:34)</a>:</h4>
<p>whitequark submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424025067">PR Review</a>.</p>



<a name="199694223"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199694223" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199694223">(Jun 04 2020 at 00:34)</a>:</h4>
<p>whitequark created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434928844">PR Review Comment</a>:</p>
<blockquote>
<blockquote>
<p>is <code>sextend.I64</code> going to legalize further to something else?</p>
</blockquote>
<p>Yes. In cases that I see (and I get no new legalizer failures with the <code>*32</code> instructions) <code>sextend.I64</code> is then processed by <code>isplit</code>, and the top half is usually just thrown away. I have no special insight for why Cranelift emits <code>sload32</code> instructions though.</p>
</blockquote>



<a name="199694254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199694254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199694254">(Jun 04 2020 at 00:35)</a>:</h4>
<p>whitequark submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424025261">PR Review</a>.</p>



<a name="199694255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199694255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199694255">(Jun 04 2020 at 00:35)</a>:</h4>
<p>whitequark created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r434929020">PR Review Comment</a>:</p>
<blockquote>
<p>You're correct that this could be replaced with just <code>iconst</code>, I kept it symmetric but there's no reason other than that.</p>
</blockquote>



<a name="199710659"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199710659" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199710659">(Jun 04 2020 at 06:49)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424146922">PR Review</a>.</p>



<a name="199710660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199710660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199710660">(Jun 04 2020 at 06:49)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435028189">PR Review Comment</a>:</p>
<blockquote>
<p><code>sload32</code> instuctions are emitted for a certain WASM instruction.</p>
</blockquote>



<a name="199710732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199710732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199710732">(Jun 04 2020 at 06:50)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424147609">PR Review</a>.</p>



<a name="199710733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199710733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199710733">(Jun 04 2020 at 06:50)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435028731">PR Review Comment</a>:</p>
<blockquote>
<p>I believe that is exactly how <code>uextend.i64</code> is legalized on i686.</p>
</blockquote>



<a name="199777392"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777392" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777392">(Jun 04 2020 at 16:58)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424649750">PR Review</a>.</p>



<a name="199777393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777393">(Jun 04 2020 at 16:58)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435409349">PR Review Comment</a>:</p>
<blockquote>
<p>Ok, yeah I see it in <code>code_translator.rs</code>. I think a summary of our back and forth here would be helpful as a comment on these legalizations. The only other remaining issue is: why can't this be in the <code>widen</code> group? @bjorn3, is that clear to you?</p>
</blockquote>



<a name="199777474"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777474" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777474">(Jun 04 2020 at 16:59)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424650332">PR Review</a>.</p>



<a name="199777475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777475">(Jun 04 2020 at 16:59)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435409796">PR Review Comment</a>:</p>
<blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="199777850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777850">(Jun 04 2020 at 17:01)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424652301">PR Review</a>.</p>



<a name="199777851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199777851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199777851">(Jun 04 2020 at 17:01)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435411294">PR Review Comment</a>:</p>
<blockquote>
<p>The ctrl typevar is <code>I32</code>, which matches the native pointer size on x86_32, so it requires the <code>expand</code> group. <code>widen</code> is only for ctrl typevars that are smaller than the native pointer size.</p>
</blockquote>



<a name="199778222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199778222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199778222">(Jun 04 2020 at 17:04)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#pullrequestreview-424654015">PR Review</a>.</p>



<a name="199778224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/199778224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#199778224">(Jun 04 2020 at 17:04)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/1789#discussion_r435412660">PR Review Comment</a>:</p>
<blockquote>
<p>Ah, good. Yeah, let's add that nice detail to the comment as well.</p>
</blockquote>



<a name="202009267"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/202009267" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#202009267">(Jun 25 2020 at 18:49)</a>:</h4>
<p>alexcrichton edited <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>main</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
</blockquote>



<a name="202912289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/202912289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#202912289">(Jul 05 2020 at 08:50)</a>:</h4>
<p>whitequark updated <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a> from <code>x86_32-legalize-loadstore32.i64</code> to <code>main</code>:</p>
<blockquote>
<p>Fixes #1747.</p>
</blockquote>



<a name="202912296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%231789%20x86_32%3A%20legalize%20%7Bistore%2Csload%2Cuload%7D.../near/202912296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.231789.20x86_32.3A.20legalize.20.7Bistore.2Csload.2Cuload.7D.2E.2E.2E.html#202912296">(Jul 05 2020 at 08:50)</a>:</h4>
<p>whitequark closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/1789">PR #1789</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>