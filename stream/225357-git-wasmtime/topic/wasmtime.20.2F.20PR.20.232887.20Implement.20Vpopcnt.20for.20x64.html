<html>
<head><meta charset="utf-8"><title>wasmtime / PR #2887 Implement Vpopcnt for x64 · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html">wasmtime / PR #2887 Implement Vpopcnt for x64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="238187261"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238187261" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238187261">(May 10 2021 at 18:11)</a>:</h4>
<p>jlb6740 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>:</p>
<blockquote>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="238206511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238206511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238206511">(May 10 2021 at 20:28)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-656057791">PR Review</a>.</p>



<a name="238206512"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238206512" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238206512">(May 10 2021 at 20:28)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r629662411">PR Review Comment</a>:</p>
<blockquote>
<p>You can use <code>[0x0F; 16]</code>.</p>
</blockquote>



<a name="238672025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238672025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238672025">(May 13 2021 at 19:57)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="238672700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238672700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238672700">(May 13 2021 at 20:02)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="238673822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238673822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238673822">(May 13 2021 at 20:10)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659262500">PR review</a>.</p>



<a name="238673823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238673823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238673823">(May 13 2021 at 20:10)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632074361">PR review comment</a>:</p>
<blockquote>
<p>Why don't we just use <code>popcnt</code>? If <code>popcnt</code> and <code>vpopcnt</code> have the same semantics then we can just use <code>popcnt</code> with a vector type?</p>
</blockquote>



<a name="238686605"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238686605" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238686605">(May 13 2021 at 21:52)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659331984">PR review</a>.</p>



<a name="238686606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238686606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238686606">(May 13 2021 at 21:52)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632127327">PR review comment</a>:</p>
<blockquote>
<p>It's been a while since I made that decision but it does indeed look like I've created identical lowerings. Perhaps I was duplicating an earlier effort where two instruction conversions were needed due to the input args?? Not sure. In any case, good question and I'll attempt to combine the two and hopefully it will cause not trouble. Thanks!</p>
</blockquote>



<a name="238686629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238686629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238686629">(May 13 2021 at 21:52)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632127327">PR review comment</a>.</p>



<a name="238689437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238689437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238689437">(May 13 2021 at 22:17)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632137963">PR review comment</a>:</p>
<blockquote>
<p>Ahh .. now I see why we had to do that. It has something to do with needing to pop1_with_bitcast in the code_translator. Ultimately the verifier did not like the vector sharing the definition when compiling even though the translations in <a href="http://instructions.rs">instructions.rs</a> are identical. Perhaps you know or @cfallin knows but I remember trying this now and consciously implementing a separate translation/lowering because of an issue along these lines:</p>
<p>`Caused by:<br>
    0: WebAssembly failed to compile<br>
    1: Compilation error: function u0:0(i64 vmctx, i64, i8x16) -&gt; i8x16 wasmtime_system_v {<br>
           gv0 = vmctx<br>
           gv1 = load.i64 notrap aligned readonly gv0<br>
           gv2 = load.i64 notrap aligned gv1<br>
           stack_limit = gv2</p>
<div class="codehilite"><pre><span></span><code>                                   block0(v0: i64, v1: i64, v2: i8x16):
   @004f                               v4 = popcnt v2
   ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   ; error: inst0 (v4 = popcnt.i8x16 v2): has an invalid controlling type i8x16

   @0051                               jump block1(v4)

                                   block1(v3: i8x16):
   @0051                               return v3
   }

   ; 1 verifier error detected (see above). Compilation aborted.
   &#39;, /home/jlbirch/wasmtime_jlb6740/target/debug/build/wasmtime-cli-89f47d7a9050963a/out/wast_testsuite_tests.rs:3645:18
</code></pre></div>

<p>note: run with <code>RUST_BACKTRACE=1</code> environment variable to display a backtrace`</p>
</blockquote>



<a name="238689438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238689438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238689438">(May 13 2021 at 22:17)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659344847">PR review</a>.</p>



<a name="238692830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238692830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238692830">(May 13 2021 at 22:50)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659359608">PR review</a>.</p>



<a name="238692833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238692833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238692833">(May 13 2021 at 22:50)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632150328">PR review comment</a>:</p>
<blockquote>
<p>That's a good find; I think the issue is that the types allowed for <code>popcnt</code> are too restrictive. <code>popcnt</code> uses the <code>iB</code> type, which only includes scalar integers, but I think we should make it use the <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L720-L727"><code>Int</code></a> type, which allows both scalar and vector integers. </p>
</blockquote>



<a name="238692892"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238692892" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238692892">(May 13 2021 at 22:51)</a>:</h4>
<p>abrown edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632150328">PR review comment</a>.</p>



<a name="238697827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238697827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238697827">(May 13 2021 at 23:48)</a>:</h4>
<p>jlb6740 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659381740">PR review</a>.</p>



<a name="238697828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238697828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238697828">(May 13 2021 at 23:48)</a>:</h4>
<p>jlb6740 created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632169158">PR review comment</a>:</p>
<blockquote>
<p>Ok .. Yes, makes sense. Do we want to just merged this here and refactor that in a separate patch or do it here?? My only thought is fixing a patch that currently works (should work) .. creating some unintended consequence not realizing the restriction to 1b was there for some non-obvious reason. In any case I do suddenly have failures below to check on so I'll fix that first. Will likely continue to be very slow to respond to updates this coming week unfortunately but will get back to normal soon.  </p>
</blockquote>



<a name="238697843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238697843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238697843">(May 13 2021 at 23:48)</a>:</h4>
<p>jlb6740 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632169158">PR review comment</a>.</p>



<a name="238699250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238699250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238699250">(May 14 2021 at 00:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-659388030">PR review</a>.</p>



<a name="238699251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/238699251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#238699251">(May 14 2021 at 00:06)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r632174650">PR review comment</a>:</p>
<blockquote>
<p>I think it's probably better to avoid adding <code>vpopcnt</code> in the first place rather than cleaning up in a subsequent PR -- hopefully the changes are minor on the lowering side (basically it should be just a conditional in the <code>Opcode::Popcnt</code> case, on the type, like the arithmetic operators have). Thanks!</p>
</blockquote>



<a name="239692459"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239692459" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239692459">(May 21 2021 at 03:46)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="239694268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239694268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239694268">(May 21 2021 at 04:17)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="239783901"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239783901" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239783901">(May 21 2021 at 17:13)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637079777">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            let ty = ty.unwrap();
            if !ty.is_vector() {
</code></pre></div><br>
</p>
</blockquote>



<a name="239783902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239783902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239783902">(May 21 2021 at 17:13)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-665684674">PR review</a>.</p>



<a name="239784068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239784068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239784068">(May 21 2021 at 17:14)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-665685499">PR review</a>.</p>



<a name="239784069"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239784069" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239784069">(May 21 2021 at 17:14)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637080416">PR review comment</a>:</p>
<blockquote>
<p>Rename <code>ty</code> to <code>input_ty</code>? Or is this necessary?</p>
</blockquote>



<a name="239784411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239784411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239784411">(May 21 2021 at 17:17)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-665687472">PR review</a>.</p>



<a name="239784413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239784413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239784413">(May 21 2021 at 17:17)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637081995">PR review comment</a>:</p>
<blockquote>
<p>@bnjbvr, what does <code>ty</code> mean here?</p>
</blockquote>



<a name="239784699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239784699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239784699">(May 21 2021 at 17:20)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-665689341">PR review</a>.</p>



<a name="239785150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239785150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239785150">(May 21 2021 at 17:23)</a>:</h4>
<p>abrown edited <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637081995">PR review comment</a>.</p>



<a name="239785159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239785159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239785159">(May 21 2021 at 17:23)</a>:</h4>
<p>abrown deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637080416">PR review comment</a>.</p>



<a name="239785213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239785213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239785213">(May 21 2021 at 17:23)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-665689341">PR review</a>.</p>



<a name="239785388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239785388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239785388">(May 21 2021 at 17:25)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="239817408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239817408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239817408">(May 21 2021 at 21:53)</a>:</h4>
<p>jlb6740 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a> from <code>x64_implement_packed_popcnt</code> to <code>main</code>.</p>



<a name="239836297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/239836297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#239836297">(May 22 2021 at 02:23)</a>:</h4>
<p>jlb6740 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/2887">PR #2887</a>.</p>



<a name="240018479"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/240018479" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#240018479">(May 24 2021 at 08:02)</a>:</h4>
<p>bnjbvr submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#pullrequestreview-666492564">PR review</a>.</p>



<a name="240018480"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%232887%20Implement%20Vpopcnt%20for%20x64/near/240018480" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.232887.20Implement.20Vpopcnt.20for.20x64.html#240018480">(May 24 2021 at 08:02)</a>:</h4>
<p>bnjbvr created <a href="https://github.com/bytecodealliance/wasmtime/pull/2887#discussion_r637763390">PR review comment</a>:</p>
<blockquote>
<p>Yeah, it was something along those lines, from peaking at the previous version of this source code, when the input type is narrower than 32-bits, we'd just do the 32-bits version of the instruction, zero-extending the input prior to this.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>