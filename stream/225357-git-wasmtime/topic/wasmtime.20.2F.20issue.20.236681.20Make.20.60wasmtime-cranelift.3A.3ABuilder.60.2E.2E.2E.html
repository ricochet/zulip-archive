<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6681 Make `wasmtime-cranelift::Builder`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html">wasmtime / issue #6681 Make `wasmtime-cranelift::Builder`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="372271732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372271732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372271732">(Jul 04 2023 at 11:22)</a>:</h4>
<p>clearloop opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>wasmtime-cranelift only has 1 public function <code>builder()</code> which is really strange...</p>
<p><a href="https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift">https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift</a></p>
<p>at least make <code>wasmtime-cranelift::Builder</code> public</p>
<h4>Benefit</h4>
<p>developers can use customized Isa to work with <code>wasmtime-cranelift</code></p>
<h4>Implementation</h4>
<p>based on <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="nb">From</span><span class="o">&lt;</span><span class="n">T</span>: <span class="nc">cranelift_shared</span>::<span class="n">IsaBuilder</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Builder</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">inner</span>: <span class="nc">IsaBuilder</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">inner</span><span class="p">,</span>
<span class="w">        </span><span class="n">linkopts</span>: <span class="nc">LinkOptions</span>::<span class="n">default</span><span class="p">(),</span>
<span class="w">        </span><span class="n">cache_store</span>: <span class="nb">None</span><span class="p">,</span>
<span class="w">        </span><span class="n">clif_dir</span>: <span class="nb">None</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</blockquote>



<a name="372339434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372339434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372339434">(Jul 04 2023 at 14:57)</a>:</h4>
<p>clearloop edited <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>wasmtime-cranelift only has 1 public function <code>builder()</code> which is really strange...</p>
<p><a href="https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift">https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift</a></p>
<p>at least make <code>wasmtime-cranelift::Builder</code> public</p>
<h4>Benefit</h4>
<p>developers can use customized Isa to work with <code>wasmtime-cranelift</code></p>
<h4>Implementation</h4>
<p>based on <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17</a></p>
</blockquote>



<a name="372408315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372408315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372408315">(Jul 04 2023 at 20:08)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1620684010">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<p>Can you say more what you're wanting to do with this API?</p>
<p><code>wasmtime-cranelift</code> is an internal crate of Wasmtime -- the engine is split into several crates for pragmatic reasons (build time, etc) but the APIs between these crates are not meant to be used by anyone else. Users of Wasmtime should use the <code>wasmtime</code> crate's API, and users of bare Cranelift should use <code>cranelift-codegen</code>, <code>cranelift-frontend</code> or <code>cranelift-wasm</code> as appropriate.</p>
</blockquote>



<a name="372456789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372456789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372456789">(Jul 05 2023 at 03:49)</a>:</h4>
<p>clearloop <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1620979131">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>Can you say more what you're wanting to do with this API?</p>
</blockquote>
<p>I'm writing a project compiling wasm into EVM bytecode, wanna the 100% features of cranelift, however, the TargetIsa is hardcoded in wasmtime-cranelift that I can not integrate the compiled cranelift IR with my customized Isa ))</p>
</blockquote>



<a name="372456986"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372456986" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372456986">(Jul 05 2023 at 03:51)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1620979131">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>Can you say more what you're wanting to do with this API?</p>
</blockquote>
<p>I'm writing a project compiling wasm into EVM bytecode, wanna the 100% features of cranelift, however, the TargetIsa is hardcoded in wasmtime-cranelift that I can not integrate the compiled cranelift IR with my customized Isa ))</p>
<p>I'm using the winch API instead now but it would be best if I can use the API in wasmtime-cranelift</p>
</blockquote>



<a name="372457113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372457113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372457113">(Jul 05 2023 at 03:52)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1620979131">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>Can you say more what you're wanting to do with this API?</p>
</blockquote>
<p>I'm writing a project compiling wasm into EVM bytecode, wanna the 100% features of <code>cranelift</code>, however, the TargetIsa is hardcoded in <code>wasmtime-cranelift</code> that I can not integrate the compiled <code>cranelift</code> IR with my customized Isa ))</p>
<p>I'm using the winch API instead now but it would be best if I can use the API provided in <code>wasmtime-cranelift</code></p>
</blockquote>



<a name="372457316"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372457316" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372457316">(Jul 05 2023 at 03:54)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1620979131">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>Can you say more what you're wanting to do with this API?</p>
</blockquote>
<p>I'm writing a project compiling wasm into EVM bytecode, wanna the 100% features of <code>cranelift</code>, however, the TargetIsa is hardcoded in <code>wasmtime-cranelift</code> that I can not integrate the translated <code>cranelift</code> IR with my customized Isa ))</p>
<p>I'm using the winch API instead now but it would be best if I can use the API provided in <code>wasmtime-cranelift</code></p>
</blockquote>



<a name="372459677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372459677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372459677">(Jul 05 2023 at 04:21)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621000048">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<p>OK, it's still not totally clear to me how the pieces fit together there. You are compiling Wasm to some target: does that mean that you have ported all of Wasmtime? Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) and getting at it via Wasmtime APIs? What is "EVM bytecode"? Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
<p>The standard and supported way to use Cranelift to compile Wasm is to use <code>cranelift-wasm</code>, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits. We don't support taking internal pieces of Wasmtime and invoking them in nonstandard ways, and we don't want there to be external dependencies on these aspects of our design, so I would say the private APIs are private for a reason. We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>



<a name="372467465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372467465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372467465">(Jul 05 2023 at 05:26)</a>:</h4>
<p>clearloop <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa even though my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API, bcz I need the cranelift IR from wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372467671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372467671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372467671">(Jul 05 2023 at 05:27)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa even though my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372468012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372468012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372468012">(Jul 05 2023 at 05:29)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa even though my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372468158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372468158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372468158">(Jul 05 2023 at 05:30)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa? but my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>, why wasmtime-cranelift can not support it?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372468198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372468198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372468198">(Jul 05 2023 at 05:30)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa? but since my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>, why <code>wasmtime-cranelift</code> can not support it?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372468412"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372468412" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372468412">(Jul 05 2023 at 05:32)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm ( running with JIT )? so what I need to do is translating wasm to cranelift IR again on my own and customize the <code>FunctionEnvironment</code> just for my target Isa? but since my target Isa follows the basic rules like other Isas defined in <code>cranelift-codegen</code>, why <code>wasmtime-cranelift</code> can not support it?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372468586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372468586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372468586">(Jul 05 2023 at 05:33)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, probably got you, do you mean the optimization in <code>wasmtime-cranelift</code> is just for the execution logic of wasm ( running with JIT )? </p>
<p>so I don't even need to translate wasm to cranelift IR because I'm not about to execute my wasm?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372470265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372470265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372470265">(Jul 05 2023 at 05:43)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), my customized target Isa is not supported by wasmtime-cranelift bcz the target lookup function is hardcoded in <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372470335"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372470335" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372470335">(Jul 05 2023 at 05:43)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), my customized target Isa is not supported by <code>wasmtime-cranelift</code> and the target lookup function is hardcoded in <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372470714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372470714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372470714">(Jul 05 2023 at 05:46)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), my customized target Isa is not supported by <code>wasmtime-cranelift</code> and the target lookup function is hardcoded in <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, how could I use cranelift to make it easier?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471053">(Jul 05 2023 at 05:48)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), my customized target Isa is not supported by <code>wasmtime-cranelift</code> and the target lookup function is hardcoded in <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471165">(Jul 05 2023 at 05:49)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ) because my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471332">(Jul 05 2023 at 05:50)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ) because my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I just can implement a "base-line" compiler like what winch says xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471386"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471386" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471386">(Jul 05 2023 at 05:51)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ) because my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471895">(Jul 05 2023 at 05:54)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), but my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky so I want to reuse the work <code>wasm -&gt; cranelift IR</code> in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471928"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471928" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471928">(Jul 05 2023 at 05:55)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), but my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift IR</code> again on my own bcz it is risky so I want to reuse the work in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372471980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372471980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372471980">(Jul 05 2023 at 05:55)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just start to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), while my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift IR</code> again on my own bcz it is risky so I want to reuse the work in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372472343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372472343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372472343">(Jul 05 2023 at 05:57)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just started to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), while my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift IR</code> again on my own bcz it is risky so I want to reuse the work in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372472767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372472767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372472767">(Jul 05 2023 at 06:00)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just started to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), while my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift IR</code> again on my own bcz it is risky so I want to reuse the work in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<p>From the docs of <code>cranelift-wasm</code>, it says:</p>
<blockquote>
<p>Performs translation from a wasm module in binary format to the in-memory form of Cranelift IR</p>
</blockquote>
<p>I'm confused why it just does the in-memory form job but not to cranelift IR directly?</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372473015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372473015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372473015">(Jul 05 2023 at 06:02)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621077150">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ) because my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift</code> again on my own bcz it is risky that's why I want to reuse <code>wasmtime-cranelift</code></p>
</blockquote>
<p>OK, I see the confusion here: <code>wasmtime-cranelift</code> does not translate Wasm code to Cranelift IR (CLIF). <code>wasmtime-cranelift</code> is only the bridge between Wasmtime and Cranelift. If you are not using or porting Wasmtime, you don't want to use <code>wasmtime-cranelift</code>.</p>
<p>Instead, <code>cranelift-wasm</code> is the crate (used by <code>wasmtime-cranelift</code>) that actually does the Wasm to CLIF translation. It requires some "hooks" to be filled in that are specific to the Wasm runtime the code will be running under.</p>
<blockquote>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
</blockquote>
<p>Maybe; it depends what sort of translation you want. Cranelift is an optimizing compiler, so if you want the Wasm -&gt; custom bytecode translation to do optimizations, you'll for sure get that. However it also makes a bunch of assumptions about the target architecture: it's really meant for "real hardware" ISAs like x86 or aarch64, and porting it to emit a custom bytecode may or may not be easy, depending on the bytecode's design. For example, Cranelift uses a register allocator and assumes that the target ISA has a fixed number of physical registers. If your bytecode is stack-based rather than register-based, that may be a problem.</p>
<p>Porting Cranelift is also not easy (no compiler is really super-easy to retarget; "real ISAs" tend to be large). The initial PR to add support for RISC-V, our latest addition (#4271), was 21k lines of code.</p>
<blockquote>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?)</p>
</blockquote>
<p>for example, the stack limit check in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">wasmtime-cranelift</a></p>
<blockquote>
<p>and getting at it via Wasmtime APIs?</p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
</blockquote>
<p>OK, yeah, given the above, using <code>wasmtime-cranelift</code> is definitely not the right answer. In fact the stack-limit check you link is closely related to Wasmtime's data structures (its <code>VMRuntimeLimits</code>) so if you're not actually using Wasmtime, it doesn't make any sense to use that implementation. You'll need to develop your own CLIF lowerings for Wasm features that target your own bytecode VM.</p>
<p>I'll make a note on terminology here too: you need <em>some</em> "runtime" for the Wasm specifically, on top of your custom bytecode VM's runtime. In this context, "runtime" means support for Wasm semantics and state: for example, handling Wasm memories and tables. It could be a very simple mapping, but somehow you need to decide what a "memory load" or "table set" op becomes, and this is what you provide in your "hooks" to <code>cranelift-wasm</code>. <code>wasmtime-cranelift</code> provides code for all of this that assumes Wasmtime's data structures for memories, tables, function references, etc. exist. You'll need equivalents for all of these in order to run Wasm.</p>
<blockquote>
<blockquote>
<p>What is "EVM bytecode"?</p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
</blockquote>
<p>I'm not sure I understand what you're doing here: <code>cranelift-wasm</code> produces CLIF, an input format specific to Cranelift, but <code>winch-codegen</code> consumes Wasm and directly produces machine code, and has no understanding of CLIF at all. How are you combining the two?</p>
</blockquote>



<a name="372473340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372473340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372473340">(Jul 05 2023 at 06:04)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621047002">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>We'd be happy to try to help you reuse things in some other way though, if you can fill in some more detail.</p>
</blockquote>
<p>Thank you for your support! just started to learn cranelift yesterday and feeling it is really helpful for expanding the usages of WASM!</p>
<blockquote>
<p>The standard and supported way to use Cranelift to compile Wasm is to use cranelift-wasm, and plug in your environment's specific lowerings for things like heap accesses via the relevant traits.</p>
</blockquote>
<p>hmmm, as I learnt from the code, <code>wasmtime-cranelift</code> does a job translating wasm to cranelift IR with optimization ( plz point me out if I'm mistaken ), while my customized target Isa is not supported by <code>wasmtime-cranelift</code>, I don't want to do the job <code>wasm -&gt; cranelift IR</code> again on my own bcz it is risky so I want to reuse the work in <code>wasmtime-cranelift</code></p>
<p>I want to translate wasm to the binary code of a virtual machine, if it is possible to use cranelift to make it high quality and efficient?</p>
<p>From the docs of <code>cranelift-wasm</code>, it says:</p>
<blockquote>
<p>Performs translation from a wasm module in binary format to the in-memory form of Cranelift IR</p>
</blockquote>
<p>I'm confused why it just does the in-memory form job but not to cranelift IR directly? From my intuition, <code>cranelift-wasm</code> should include the job translating wasm to cranelift IR, and for <code>wasmtime-cranelift</code>, it should not do the job translating wasm to cranelift IR but just operating the IR with specific purposes</p>
<hr>
<blockquote>
<p>does that mean that you have ported all of Wasmtime?</p>
</blockquote>
<p>nope, I just need the part wasm -&gt; cranelift IR with optimization</p>
<blockquote>
<p>Or instead are you mostly using the Cranelift pipeline (is this what you mean by "wanna the 100% features of cranelift"?) </p>
</blockquote>
<p>for example, the stack limit check in [wasmtime-cranelift][0]</p>
<blockquote>
<p>and getting at it via Wasmtime APIs? </p>
</blockquote>
<p>nope, I don't need wasmtime API and don't need to run the wasm in wasmtime or any other wasm runtimes</p>
<blockquote>
<p>What is "EVM bytecode"? </p>
</blockquote>
<p>Just the binary format for a virtual machine</p>
<blockquote>
<p>Have you ported Cranelift to this as well? (Out-of-tree Cranelift backends are another somewhat unsupported case, though we've had discussions about this one before at least.)</p>
</blockquote>
<p>I'm using <code>cranelift-wasm</code> + <code>winch-codegen</code> now, but I'm implementing a "base-line" compiler like what winch does xd</p>
<p>[0]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/compiler.rs#L150</a><br>
[1]: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/src/isa/mod.rs</a></p>
</blockquote>



<a name="372478425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372478425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372478425">(Jul 05 2023 at 06:33)</a>:</h4>
<p>clearloop <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1621112071">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<blockquote>
<p>Cranelift is an optimizing compiler, so if you want the Wasm -&gt; custom bytecode translation to do optimizations, you'll for sure get that. </p>
</blockquote>
<p>yeah, this is what I want! and the compiler time doesn't matter to my project!</p>
<blockquote>
<p>If your bytecode is stack-based rather than register-based, that may be a problem.</p>
</blockquote>
<p>Sadly it's stack-based...but while my target vm's instructions are super easy, I'll find it out if it is possible and necessary soon!</p>
<blockquote>
<p>In fact the stack-limit check you link is closely related to Wasmtime's data structures (its VMRuntimeLimits) so if you're not actually using Wasmtime, it doesn't make any sense to use that implementation. </p>
</blockquote>
<p>got you now, so what I can do is learning from the implementation of <code>wasmtime-cranelift</code> to write my own CLIF</p>
<blockquote>
<p>but winch-codegen consumes Wasm and directly produces machine code</p>
</blockquote>
<p>I just implemented the <code>TargetIsa</code> trait from [winch-codegen][0] for using the private <code>CodeGen</code> implementation xD</p>
<p>thank you for your patient explanation @cfallin, I'm closing this issue since ur right and now I know what to do next!</p>
<p>[0]: <a href="https://docs.rs/winch-codegen/latest/winch_codegen/isa/trait.TargetIsa.html">https://docs.rs/winch-codegen/latest/winch_codegen/isa/trait.TargetIsa.html</a></p>
</blockquote>



<a name="372478428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372478428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372478428">(Jul 05 2023 at 06:33)</a>:</h4>
<p>clearloop closed <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>wasmtime-cranelift only has 1 public function <code>builder()</code> which is really strange...</p>
<p><a href="https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift">https://docs.rs/wasmtime-cranelift/latest/wasmtime_cranelift</a></p>
<p>at least make <code>wasmtime-cranelift::Builder</code> public</p>
<h4>Benefit</h4>
<p>developers can use customized Isa to work with <code>wasmtime-cranelift</code></p>
<h4>Implementation</h4>
<p>based on <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17">https://github.com/bytecodealliance/wasmtime/blob/main/crates/cranelift/src/builder.rs#L17</a></p>
</blockquote>



<a name="372656783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372656783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372656783">(Jul 05 2023 at 16:48)</a>:</h4>
<p>clearloop <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1622128176">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<p>@cfallin  ur totally correct xD, I have to write my compiler on my own now since my target vm is stack-based... but <code>wasmparser</code> and the compiler ( both winch and cranelift ) implementation have inspired me really a lot! thank you for your great work!</p>
</blockquote>



<a name="372657988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372657988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372657988">(Jul 05 2023 at 16:52)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1622128176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<p>@cfallin  ur totally correct xD, I have to write my compiler on my own now since my target vm is stack-based... but <code>wasmparser</code> and the compiler ( both winch and cranelift ) implementation have inspired me really a lot! thank you for your great work! </p>
<p>btw if there is any public methods in cranelift can help me building an optimizing compiler like cranelift for my stack-based vm target implementation, I'd be really grateful if you can point me out ; )</p>
</blockquote>



<a name="372658733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236681%20Make%20%60wasmtime-cranelift%3A%3ABuilder%60.../near/372658733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236681.20Make.20.60wasmtime-cranelift.3A.3ABuilder.60.2E.2E.2E.html#372658733">(Jul 05 2023 at 16:54)</a>:</h4>
<p>clearloop edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/6681#issuecomment-1622128176">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6681">issue #6681</a>:</p>
<blockquote>
<p>@cfallin  ur totally correct xD, I have to write my compiler on my own now since my target vm is stack-based... but <code>wasmparser</code> and the compiler ( both winch and cranelift ) implementation have inspired me really a lot! thank you for your great work! </p>
<p>btw if there is any public methods in cranelift that I can re-use for building an optimizing compiler for wasm like cranelift but to stack-based vm target implementation, I'd be really grateful if you can point me out ; )</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>