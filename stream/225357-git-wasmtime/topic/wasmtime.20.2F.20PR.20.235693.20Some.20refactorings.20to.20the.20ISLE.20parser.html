<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5693 Some refactorings to the ISLE parser · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html">wasmtime / PR #5693 Some refactorings to the ISLE parser</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="325443393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325443393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325443393">(Feb 02 2023 at 16:36)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5693">PR #5693</a> from <code>isle_cleanup1</code> to <code>main</code>:</p>
<blockquote>
<p>This uses a couple of functions in the ISLE lexer than significantly simply the code.</p>
<p>In addition it introduces a token eating api which tries to eat a specific token but returns <code>None</code> rather than an error if this fails and it renames take to expect. This brings it a bit more in line with the names used in rustc's parser and IMHO it is a bit nicer.</p>
</blockquote>



<a name="325518829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325518829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325518829">(Feb 02 2023 at 23:34)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1282055583">PR review</a>.</p>



<a name="325518830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325518830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325518830">(Feb 02 2023 at 23:34)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1282055583">PR review</a>.</p>



<a name="325518831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325518831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325518831">(Feb 02 2023 at 23:34)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1095199629">PR review comment</a>:</p>
<blockquote>
<p>This can just be <code>let infallible = self.eat_sym_str("infallible")?;</code> now, in yet another demonstration of why your suggested change is a good idea.</p>
</blockquote>



<a name="325518832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325518832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325518832">(Feb 02 2023 at 23:34)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1095192831">PR review comment</a>:</p>
<blockquote>
<p>Does Rust allow using the following syntax instead, and would you agree it's easier to read?</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>            c @ (b'0'..=b'9' | b'-') =&gt; {
</code></pre></div><br>
</p>
</blockquote>



<a name="325518833"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325518833" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325518833">(Feb 02 2023 at 23:34)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1095197938">PR review comment</a>:</p>
<blockquote>
<p>I would have expected <code>eat</code> to return <code>Some(token)</code> if there is a next token and it matches the predicate, and on the other hand, return <code>None</code> if there's no more tokens or the next token doesn't match. I'm not convinced that returning a <code>Result</code> in order to distinguish the EOF case makes sense here.</p>
<p>It doesn't exactly matter since everywhere this is used we expect more tokens to follow anyway, so it's okay to detect the EOF here, but I think this is simpler to use and its behavior is easier to explain if it simply returns <code>None</code> at EOF.</p>
</blockquote>



<a name="325862919"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325862919" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325862919">(Feb 04 2023 at 17:39)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5693">PR #5693</a> from <code>isle_cleanup1</code> to <code>main</code>.</p>



<a name="325862938"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325862938" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325862938">(Feb 04 2023 at 17:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1284096910">PR review</a>.</p>



<a name="325862939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325862939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325862939">(Feb 04 2023 at 17:39)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1096565180">PR review comment</a>:</p>
<blockquote>
<p>Indeed. Fixed a couple of other cases like this too.</p>
</blockquote>



<a name="325862969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325862969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325862969">(Feb 04 2023 at 17:39)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1284096936">PR review</a>.</p>



<a name="325862970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325862970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325862970">(Feb 04 2023 at 17:39)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1096565245">PR review comment</a>:</p>
<blockquote>
<p>It does. Changed it.</p>
</blockquote>



<a name="325863052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325863052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325863052">(Feb 04 2023 at 17:40)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1284097007">PR review</a>.</p>



<a name="325863053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325863053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325863053">(Feb 04 2023 at 17:40)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#discussion_r1096565338">PR review comment</a>:</p>
<blockquote>
<p>Changed to return <code>Ok(None)</code> on EOF.</p>
</blockquote>



<a name="325867033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/325867033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#325867033">(Feb 04 2023 at 18:16)</a>:</h4>
<p>bjorn3 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5693">PR #5693</a> from <code>isle_cleanup1</code> to <code>main</code>.</p>



<a name="326256140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/326256140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#326256140">(Feb 06 2023 at 23:10)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5693#pullrequestreview-1286159602">PR review</a>.</p>



<a name="326256188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235693%20Some%20refactorings%20to%20the%20ISLE%20parser/near/326256188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235693.20Some.20refactorings.20to.20the.20ISLE.20parser.html#326256188">(Feb 06 2023 at 23:11)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5693">PR #5693</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>