<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4178 Memory usage of a wasm program · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html">wasmtime / issue #4178 Memory usage of a wasm program</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="283143131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/283143131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#283143131">(May 21 2022 at 00:51)</a>:</h4>
<p>hainsdominic opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Greetings,</p>
<p>Is there a way of knowing how many pages a wasm program used during its execution? I did not find references to this on the documentation. Would it be possible to use the <a href="https://docs.rs/wasmtime/0.28.0/wasmtime/struct.Store.html#method.data">data method</a> of the Store in order to do this?</p>
<p>Thanks!</p>
</blockquote>



<a name="283153508"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/283153508" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#283153508">(May 21 2022 at 04:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1133532532">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>For this you can use the <a href="https://docs.rs/wasmtime/latest/wasmtime/trait.ResourceLimiter.html"><code>ResourceLimiter</code></a> trait combined with <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.limiter"><code>Store::limiter</code></a> to sum up all memories grown within a <code>Store</code>. That will indicate memory that wasm had accessible but not necessarily the memory that wasm used (e.g. reserved address space but it it may not all be paged in by the OS). If you're curious about actual page usage you'd need to get the actual <code>Memory</code> object to use APIs like <code>mincore</code> to see if it's actually paged in.</p>
</blockquote>



<a name="283798982"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/283798982" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#283798982">(May 24 2022 at 20:09)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1136383897">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>I think this is solved with what I mentioned above so I'm going to close this, but if it doesn't work for you feel free to reopen and we can try to continue helping.</p>
</blockquote>



<a name="283798983"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/283798983" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#283798983">(May 24 2022 at 20:09)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Greetings,</p>
<p>Is there a way of knowing how many pages a wasm program used during its execution? I did not find references to this on the documentation. Would it be possible to use the <a href="https://docs.rs/wasmtime/0.28.0/wasmtime/struct.Store.html#method.data">data method</a> of the Store in order to do this?</p>
<p>Thanks!</p>
</blockquote>



<a name="283892540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/283892540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#283892540">(May 25 2022 at 14:45)</a>:</h4>
<p>hainsdominic <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1137362366">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Thank you! I'll try to implement it soon</p>
</blockquote>



<a name="284015289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/284015289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#284015289">(May 26 2022 at 14:49)</a>:</h4>
<p>hainsdominic <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1138659893">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Would <code>memory.data_size</code> work in this use case?</p>
</blockquote>



<a name="284015400"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/284015400" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#284015400">(May 26 2022 at 14:50)</a>:</h4>
<p>hainsdominic edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1138659893">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Would <code>memory.data_size</code> work in this use case? It seems like a simpler implementation than using the trait and the limiter. But correct me if I'm wrong.</p>
</blockquote>



<a name="284016548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234178%20Memory%20usage%20of%20a%20wasm%20program/near/284016548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234178.20Memory.20usage.20of.20a.20wasm.20program.html#284016548">(May 26 2022 at 14:59)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4178#issuecomment-1138671999">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4178">issue #4178</a>:</p>
<blockquote>
<p>Yes if you have access to the <code>Memory</code> then the <code>data_size</code> reported will be the size of memory that wasm was allowed to use.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>