<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6100 Consider only maintaining frame po... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236100.20Consider.20only.20maintaining.20frame.20po.2E.2E.2E.html">wasmtime / issue #6100 Consider only maintaining frame po...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="344335022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236100%20Consider%20only%20maintaining%20frame%20po.../near/344335022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236100.20Consider.20only.20maintaining.20frame.20po.2E.2E.2E.html#344335022">(Mar 24 2023 at 17:53)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6100">issue #6100</a>:</p>
<blockquote>
<p>We use frame pointers for fast stack walking, but we only walk the stack from function calls and from trap locations, so we only need to preserve the frame pointers at those locations. In between such sites, we could reuse the frame pointer register for whatever else we need, getting a bit of an execution speed up.</p>
<p>This would, however, mean that we would stop playing nice with external profilers that do not rely on DWARF/<code>.eh_frame</code>.</p>
<p>Right now cranelift has a <code>preserve_frame_pointers=&lt;bool&gt;</code> option. We could turn that into a tribool of <code>yes/no/call-and-trap-sites</code> and surface the option through <code>wasmtime::Config</code> as well.</p>
</blockquote>



<a name="344335024"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236100%20Consider%20only%20maintaining%20frame%20po.../near/344335024" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236100.20Consider.20only.20maintaining.20frame.20po.2E.2E.2E.html#344335024">(Mar 24 2023 at 17:53)</a>:</h4>
<p>fitzgen labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/6100">issue #6100</a>:</p>
<blockquote>
<p>We use frame pointers for fast stack walking, but we only walk the stack from function calls and from trap locations, so we only need to preserve the frame pointers at those locations. In between such sites, we could reuse the frame pointer register for whatever else we need, getting a bit of an execution speed up.</p>
<p>This would, however, mean that we would stop playing nice with external profilers that do not rely on DWARF/<code>.eh_frame</code>.</p>
<p>Right now cranelift has a <code>preserve_frame_pointers=&lt;bool&gt;</code> option. We could turn that into a tribool of <code>yes/no/call-and-trap-sites</code> and surface the option through <code>wasmtime::Config</code> as well.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>