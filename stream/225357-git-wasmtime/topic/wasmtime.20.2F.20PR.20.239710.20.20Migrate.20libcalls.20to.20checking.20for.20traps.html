<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9710  Migrate libcalls to checking for traps · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html">wasmtime / PR #9710  Migrate libcalls to checking for traps</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="485721709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721709">(Dec 02 2024 at 22:48)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485721710"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721710" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721710">(Dec 02 2024 at 22:48)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a> from <code>alexcrichton:libcall-manual-trap</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This PR is the equivalent of <a href="https://github.com/bytecodealliance/wasmtime/pull/9675">https://github.com/bytecodealliance/wasmtime/pull/9675</a> for libcalls used in core wasm and components.<br>
All libcalls now communicate whether or not they trapped through their<br>
return value instead of implicitly calling <code>longjmp</code> to exit from the<br>
libcall. This is to make integration with Pulley easier to avoid the<br>
need to <code>longjmp</code> over Pulley execution.</p>
<p>Libcall definitions have changed where appropriate and the<br>
<code>catch_unwind_and_record_trap</code> function introduced in <a href="https://github.com/bytecodealliance/wasmtime/pull/9675">https://github.com/bytecodealliance/wasmtime/pull/9675</a> was<br>
refactored to better support multiple types of values being returned<br>
from libcalls (instead of just <code>Result&lt;()&gt;</code>).</p>
<p>Note that changes have been made to both the Cranelift translation layer<br>
and the Winch translation layer for this as the ABI of various libcalls<br>
are all changing.</p>
</blockquote>



<a name="485721712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721712">(Dec 02 2024 at 22:48)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485721714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721714">(Dec 02 2024 at 22:48)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485721715"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721715" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721715">(Dec 02 2024 at 22:48)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485721866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721866">(Dec 02 2024 at 22:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#pullrequestreview-2474107342">PR review</a>.</p>



<a name="485721869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721869">(Dec 02 2024 at 22:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#discussion_r1866733524">PR review comment</a>:</p>
<blockquote>
<p>@saulecabrera I'm particularly curious to get your eyes on this file and the changes I made here. I had to make this change to keep things working because fuel checks now involve calling 2 libcalls instead of 1 and the second one tried to reload the <code>VMContext</code> before it was saved, so I pushed this below the <code>spill_register_arguments</code> below.</p>
</blockquote>



<a name="485721949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721949">(Dec 02 2024 at 22:50)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#pullrequestreview-2474107839">PR review</a>.</p>



<a name="485721950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485721950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485721950">(Dec 02 2024 at 22:50)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#discussion_r1866733873">PR review comment</a>:</p>
<blockquote>
<p>Similarly @saulecabrera I had to move this up since <code>fuel_var</code> was assigned rax but rax was needed as the return value of the hostcall, so this was needed to fix some panics during compilation.</p>
</blockquote>



<a name="485722269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485722269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485722269">(Dec 02 2024 at 22:53)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485723914"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485723914" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485723914">(Dec 02 2024 at 23:08)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485734721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485734721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485734721">(Dec 03 2024 at 01:05)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#issuecomment-2513316247">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api", "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="485989174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485989174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485989174">(Dec 04 2024 at 01:23)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485989416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485989416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485989416">(Dec 04 2024 at 01:25)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="485990259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/485990259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#485990259">(Dec 04 2024 at 01:33)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#issuecomment-2515969265">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>:</p>
<blockquote>
<p>Does this significantly change overall code size of Cranelift-generated code, due to needing inline trap check code at each libcall callsite?</p>
</blockquote>



<a name="486122857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486122857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486122857">(Dec 04 2024 at 15:44)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#issuecomment-2517822494">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>:</p>
<blockquote>
<p>Yes as-is all libcalls that can trap have a check after them, so it's inflating code by at least that much.</p>
<p>In thinking though this can be pretty easily optimized. We already generate a trampoline-per-libcall so I'll move the check-for-trap logic to the trampoline instead of the callsite of the trampoline.</p>
</blockquote>



<a name="486137849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486137849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486137849">(Dec 04 2024 at 16:52)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="486138004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486138004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486138004">(Dec 04 2024 at 16:53)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#issuecomment-2518014941">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>:</p>
<blockquote>
<p>Ok I've updated this where the trampoline itself now checks for a trap, so the code size impact on wasm itself should be minimal.</p>
</blockquote>



<a name="486138192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486138192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486138192">(Dec 04 2024 at 16:54)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="486148063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486148063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486148063">(Dec 04 2024 at 17:49)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="486352138"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486352138" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486352138">(Dec 05 2024 at 16:56)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#pullrequestreview-2482315986">PR review</a>:</p>
<blockquote>
<p>LGTM modulo one comment below</p>
</blockquote>



<a name="486352140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486352140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486352140">(Dec 05 2024 at 16:56)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#discussion_r1871744538">PR review comment</a>:</p>
<blockquote>
<p>Wait, we should only ever have <code>i32</code> values in stack maps, but this will make it include an <code>i64</code> that represents a <code>Result&lt;u32&gt;</code> IIUC, so this change looks pretty suspect to me. Is this intentional?</p>
</blockquote>



<a name="486352740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486352740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486352740">(Dec 05 2024 at 16:58)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#pullrequestreview-2482344028">PR review</a>.</p>



<a name="486352742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486352742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486352742">(Dec 05 2024 at 16:58)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#discussion_r1871761552">PR review comment</a>:</p>
<blockquote>
<p>Oh I thought that the <code>ireduce</code> preceding this would take care of that, but is that not the case?</p>
</blockquote>



<a name="486368120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486368120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486368120">(Dec 05 2024 at 18:19)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#pullrequestreview-2482547708">PR review</a>.</p>



<a name="486368122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486368122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486368122">(Dec 05 2024 at 18:19)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/9710#discussion_r1871888153">PR review comment</a>:</p>
<blockquote>
<p>Ah whoops I misread this as moving the <code>ireduce</code> <em>after</em> the needs-stack-map declaration. Carry on!</p>
</blockquote>



<a name="486369099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486369099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486369099">(Dec 05 2024 at 18:25)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="486369108"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486369108" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486369108">(Dec 05 2024 at 18:25)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<a name="486372838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239710%20%20Migrate%20libcalls%20to%20checking%20for%20traps/near/486372838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239710.20.20Migrate.20libcalls.20to.20checking.20for.20traps.html#486372838">(Dec 05 2024 at 18:51)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9710">PR #9710</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>