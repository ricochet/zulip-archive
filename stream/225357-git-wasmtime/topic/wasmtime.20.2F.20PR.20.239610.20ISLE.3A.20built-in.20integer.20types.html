<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9610 ISLE: built-in integer types · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html">wasmtime / PR #9610 ISLE: built-in integer types</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="482516654"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482516654" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482516654">(Nov 15 2024 at 01:50)</a>:</h4>
<p>Kmeakin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a> from <code>Kmeakin:km/isle/int-types</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Follow up to <a href="https://github.com/bytecodealliance/wasmtime/pull/9593">https://github.com/bytecodealliance/wasmtime/pull/9593</a>, adding all the built-in integer types (<code>u8</code> .. <code>u128</code>, <code>i8</code> .. <code>i128</code>).</p>
<p>Integer literal expressions and patterns are still allowed to type-check against primitive types, because there are a lot of places in the lowering/optimization code that uses <code>(type Foo (primitive Foo))</code> where <code>Foo</code> is declared as a type alias of an integer type in Rust code. Not sure what to do about this. Perhaps it would be clearer to rename "primitive" types to "opaque" or "extern" types (and also have a mechanism for declaring transparent type aliases in ISLE)?</p>
<p>Closes <a href="https://github.com/bytecodealliance/wasmtime/issues/5431">https://github.com/bytecodealliance/wasmtime/issues/5431</a></p>
</blockquote>



<a name="482516656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482516656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482516656">(Nov 15 2024 at 01:50)</a>:</h4>
<p><strong>Kmeakin</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="482516657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482516657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482516657">(Nov 15 2024 at 01:50)</a>:</h4>
<p><strong>Kmeakin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="482516703"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482516703" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482516703">(Nov 15 2024 at 01:51)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>:</p>
<blockquote>
<p>Follow up to <a href="https://github.com/bytecodealliance/wasmtime/pull/9593">https://github.com/bytecodealliance/wasmtime/pull/9593</a>, adding all the built-in integer types (<code>u8</code> .. <code>u128</code>, <code>i8</code> .. <code>i128</code> plus <code>usize</code> and <code>isize</code>).</p>
<p>Integer literal expressions and patterns are still allowed to type-check against primitive types, because there are a lot of places in the lowering/optimization code that uses <code>(type Foo (primitive Foo))</code> where <code>Foo</code> is declared as a type alias of an integer type in Rust code. Not sure what to do about this. Perhaps it would be clearer to rename "primitive" types to "opaque" or "extern" types (and also have a mechanism for declaring transparent type aliases in ISLE)?</p>
<p>Closes <a href="https://github.com/bytecodealliance/wasmtime/issues/5431">https://github.com/bytecodealliance/wasmtime/issues/5431</a></p>
</blockquote>



<a name="482516899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482516899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482516899">(Nov 15 2024 at 01:54)</a>:</h4>
<p>Kmeakin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>:</p>
<blockquote>
<p>Follow up to <a href="https://github.com/bytecodealliance/wasmtime/pull/9593">https://github.com/bytecodealliance/wasmtime/pull/9593</a>, adding all the built-in integer types (<code>u8</code> .. <code>u128</code>, <code>i8</code> .. <code>i128</code> plus <code>usize</code> and <code>isize</code>).</p>
<p>Integer literal expressions and patterns are still allowed to type-check against primitive types, because there are a lot of places in the lowering/optimization code that uses <code>(type Foo (primitive Foo))</code> where <code>Foo</code> is declared as a type alias of an integer type in Rust code. Not sure what to do about this. Perhaps it would be clearer to rename "primitive" types to "opaque" or "extern" types (and also have a mechanism for declaring transparent type aliases in ISLE)?</p>
<p>Closes <a href="https://github.com/bytecodealliance/wasmtime/issues/5431">https://github.com/bytecodealliance/wasmtime/issues/5431</a> and <a href="https://github.com/bytecodealliance/wasmtime/issues/3573">https://github.com/bytecodealliance/wasmtime/issues/3573</a></p>
</blockquote>



<a name="482518183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482518183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482518183">(Nov 15 2024 at 02:05)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="482523233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482523233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482523233">(Nov 15 2024 at 03:01)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#issuecomment-2477858884">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="482550578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482550578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482550578">(Nov 15 2024 at 07:52)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#pullrequestreview-2437883235">PR review</a>:</p>
<blockquote>
<p>Thanks! Some comments below but nothing major. This is a nice refactor and makes the language semantically a little cleaner; I like it.</p>
</blockquote>



<a name="482550579"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482550579" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482550579">(Nov 15 2024 at 07:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#discussion_r1843321054">PR review comment</a>:</p>
<blockquote>
<p>I'm not sure I like this rename -- semantically I think of interning as the action of getting the existing ID, or creating a new one -- that is, "to intern" covers both cases; and <code>intern_mut</code> indicates we're permitting new cases to update the table, vs. <code>intern</code> that only looks up existing cases.</p>
<p>(To see this another way, consider <code>intern</code> below -- it should be renamed to something else if we take this rename, because this rename implies that adding to the table is the "intern" bit, which is exactly the bit that the non-mut version below does not do.)</p>
</blockquote>



<a name="482550580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482550580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482550580">(Nov 15 2024 at 07:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#discussion_r1843316019">PR review comment</a>:</p>
<blockquote>
<p>Can we write a <code>match</code> with explicit arms for all types here? I'd prefer that so we are forced to think about any new types we add explicitly. The pattern as written makes that easy to miss...</p>
</blockquote>



<a name="482889348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/482889348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#482889348">(Nov 17 2024 at 19:27)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="483342650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/483342650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#483342650">(Nov 19 2024 at 19:57)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#pullrequestreview-2446534099">PR review</a>.</p>



<a name="483342751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/483342751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#483342751">(Nov 19 2024 at 19:58)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/9610#issuecomment-2486629388">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>:</p>
<blockquote>
<p>Something is broken in the build in CI; once it's green I'm happy to merge.</p>
</blockquote>



<a name="484813574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/484813574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#484813574">(Nov 27 2024 at 23:18)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="485100690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/485100690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#485100690">(Nov 29 2024 at 13:36)</a>:</h4>
<p>Kmeakin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<a name="485446127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239610%20ISLE%3A%20built-in%20integer%20types/near/485446127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239610.20ISLE.3A.20built-in.20integer.20types.html#485446127">(Dec 01 2024 at 04:27)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9610">PR #9610</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>