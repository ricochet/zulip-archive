<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #911 Small wasm modules taking excessive... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html">wasmtime / Issue #911 Small wasm modules taking excessive...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="189802689"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/189802689" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#189802689">(Mar 05 2020 at 15:29)</a>:</h4>
<p>bnjbvr <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-595289974" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-595289974">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Noted, thanks for the pings! I'll make sure to revisit these test cases once we have isel and regalloc in a position where we can test useful benchmarks.</p>
</blockquote>



<a name="190103089"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/190103089" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#190103089">(Mar 09 2020 at 18:41)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-596713801" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-596713801">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Here is another test case that hangs in register allocation: <a href="https://github.com/bytecodealliance/wasmtime/files/4308387/slow-regalloc.wat.gz" target="_blank" title="https://github.com/bytecodealliance/wasmtime/files/4308387/slow-regalloc.wat.gz">slow-regalloc.wat.gz</a></p>
</blockquote>



<a name="190762085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/190762085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#190762085">(Mar 16 2020 at 18:24)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-599692567" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-599692567">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Here is another that hangs in register allocation: <a href="https://github.com/bytecodealliance/wasmtime/files/4339762/testcase1.wasm.gz" target="_blank" title="https://github.com/bytecodealliance/wasmtime/files/4339762/testcase1.wasm.gz">testcase1.wasm.gz</a></p>
<p>Wondering if some of these might be the same as <a href="https://github.com/bytecodealliance/wasmtime/issues/1306" target="_blank" title="https://github.com/bytecodealliance/wasmtime/issues/1306">https://github.com/bytecodealliance/wasmtime/issues/1306</a>...</p>
</blockquote>



<a name="192273313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/192273313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#192273313">(Mar 30 2020 at 15:34)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-606073038" title="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-606073038">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911" title="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/files/4403805/foo.wasm.gz" title="https://github.com/bytecodealliance/wasmtime/files/4403805/foo.wasm.gz">foo.wasm.gz</a></p>
<p>Another fuzz bug that came up over the weekend, again looks like it's largely register allocation.</p>
</blockquote>



<a name="206139157"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/206139157" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#206139157">(Aug 06 2020 at 13:19)</a>:</h4>
<p>julian-seward1 <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-669921945">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Note that <a href="https://github.com/bytecodealliance/regalloc.rs/pull/89">https://github.com/bytecodealliance/regalloc.rs/pull/89</a> fixes extreme slowness in the new regalloc's coalescing analysis, that was reported for some of the examples listed here.</p>
</blockquote>



<a name="206227742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/206227742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#206227742">(Aug 07 2020 at 06:31)</a>:</h4>
<p>julian-seward1 <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-670351918">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>With the abovementioned fix (<a href="http://regalloc.rs">regalloc.rs</a> PR89) in place, having looked at the profiles on one of these cases, I reckon we could probably chop another 10% off the allocation costs by rewriting the allocator's <code>avl_tree.rs</code> <code>fn insert_wrk</code> to be non-recursive.  Not sure if this is really worth it though; these test cases are pretty artificial -- a function with 2 basic blocks containing in total 400000+ instructions, including several tens of thousands of calls.</p>
</blockquote>



<a name="206269724"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/206269724" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#206269724">(Aug 07 2020 at 15:17)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-670568296">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>FWIW these are all fuzz bugs so it's not like they're representative of actual code. If they're generating ridiculously large functions it may be that we just need to tweak the fuzzer limits, so once your patch lands seems reasonable to basically close this out!</p>
</blockquote>



<a name="214795292"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/214795292" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#214795292">(Oct 28 2020 at 04:26)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-717687362">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Another fuzz bug: <br>
<a href="https://github.com/bytecodealliance/wasmtime/files/5449653/foo.wasm.gz">foo.wasm.gz</a></p>
</blockquote>



<a name="215329281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%23911%20Small%20wasm%20modules%20taking%20excessive.../near/215329281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.23911.20Small.20wasm.20modules.20taking.20excessive.2E.2E.2E.html#215329281">(Nov 02 2020 at 15:00)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/911#issuecomment-720524678">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/911">Issue #911</a>:</p>
<blockquote>
<p>Another fuzz bug that cropped up today - <a href="https://gist.github.com/alexcrichton/fc234498ac40b718ed2d1b0aead6bc79">https://gist.github.com/alexcrichton/fc234498ac40b718ed2d1b0aead6bc79</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>