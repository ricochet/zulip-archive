<html>
<head><meta charset="utf-8"><title>wasmtime / issue #7148 feat(wasi-sockets): implement UDP · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html">wasmtime / issue #7148 feat(wasi-sockets): implement UDP</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="394948338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/394948338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#394948338">(Oct 05 2023 at 02:28)</a>:</h4>
<p>jeffparsons <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1747943612">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Is this meant to support broadcast? I couldn't find any mention of it in the spec (maybe I just wasn't looking properly?) so I'm wondering whether this is just a question of whether the host is configured to allow<br>
 the guest to send to a broadcast address.</p>
</blockquote>



<a name="395014028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395014028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395014028">(Oct 05 2023 at 10:48)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1748645009">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<blockquote>
<p>Is this meant to support broadcast? I couldn't find any mention of it in the spec (maybe I just wasn't looking properly?) so I'm wondering whether this is just a question of whether the host is configured to allow the guest to send to a broadcast address.</p>
</blockquote>
<p>I feel like this is something that belongs in <a href="https://github.com/WebAssembly/wasi-sockets/blob/main/wit/udp.wit">https://github.com/WebAssembly/wasi-sockets/blob/main/wit/udp.wit</a>, e.g. <code>set-broadcast</code> method on <code>udp-socket</code></p>
</blockquote>



<a name="395062991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395062991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395062991">(Oct 05 2023 at 15:02)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1749088809">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>I might also recommend opening an issue on <a href="https://github.com/WebAssembly/wasi-sockets/issues">https://github.com/WebAssembly/wasi-sockets/issues</a> for support if you're interested</p>
</blockquote>



<a name="395311783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395311783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395311783">(Oct 06 2023 at 18:40)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751241685">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>@alexcrichton I believe I've addressed everything apart from the <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#discussion_r1348810978">https://github.com/bytecodealliance/wasmtime/pull/7148#discussion_r1348810978</a></p>
</blockquote>



<a name="395327046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395327046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395327046">(Oct 06 2023 at 20:50)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751388235">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Any idea what went wrong with the merge? Did I miss something?</p>
</blockquote>



<a name="395327379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395327379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395327379">(Oct 06 2023 at 20:53)</a>:</h4>
<p>rvolosatovs edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751388235">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Any idea what went wrong with the merge? Did I miss something?</p>
<p>Update: I see it now <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/6435495256/job/17476888343#step:13:1">https://github.com/bytecodealliance/wasmtime/actions/runs/6435495256/job/17476888343#step:13:1</a></p>
<p>I'm away from my laptop already, but I will fix it as soon as I'm back</p>
</blockquote>



<a name="395339255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395339255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395339255">(Oct 06 2023 at 23:03)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751485806">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>@alexcrichton this should be good to merge now</p>
</blockquote>



<a name="395342363"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395342363" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395342363">(Oct 06 2023 at 23:47)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751506912">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Ah, looks like there's also a wit syntax change to address after a rebase</p>
</blockquote>



<a name="395418939"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395418939" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395418939">(Oct 07 2023 at 13:16)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1751710761">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Rebased/updated yet again</p>
</blockquote>



<a name="395552453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395552453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395552453">(Oct 08 2023 at 15:23)</a>:</h4>
<p>badeend <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1752058334">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>Apologies for the late comment, I just noticed this PR.</p>
<ul>
<li>Why does <code>start_connect</code> perform an explicit bind to <code>0.0.0.0:0</code>? This shouldn't be necessary. The first call to <code>connect</code> will implicitly bind the socket for you, right?</li>
<li>On UDP sockets, the native <code>connect</code> call doesn't perform any IO and always succeeds or fails synchronously. It never returns EINPROGRESS. I suspect you can drop a lot of complexity in <code>start_connect</code> &amp; <code>finish_connect</code>.</li>
</ul>
<p>I have the changes ready to go if you want: <a href="https://github.com/rvolosatovs/wasmtime/pull/1">https://github.com/rvolosatovs/wasmtime/pull/1</a></p>
</blockquote>



<a name="395552908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395552908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395552908">(Oct 08 2023 at 15:27)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1752064117">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<blockquote>
<p>Apologies for the late comment, I just noticed this PR.</p>
<ul>
<li>Why does <code>start_connect</code> perform an explicit bind to <code>0.0.0.0:0</code>? This shouldn't be necessary. The first call to <code>connect</code> will implicitly bind the socket for you, right?</li>
<li>On UDP sockets, the native <code>connect</code> call doesn't perform any IO and always succeeds or fails synchronously. It never returns EINPROGRESS. I suspect you can drop a lot of complexity in <code>start_connect</code> &amp; <code>finish_connect</code>.</li>
</ul>
<p>I have the changes ready to go if you want: <a href="https://github.com/rvolosatovs/wasmtime/pull/1">https://github.com/rvolosatovs/wasmtime/pull/1</a></p>
</blockquote>
<p>Thank you, integrated into this PR!</p>
</blockquote>



<a name="395618607"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395618607" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395618607">(Oct 09 2023 at 05:08)</a>:</h4>
<p>badeend <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1752354246">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>#7120 was just merged and is causing some conflicts with this one. I've resolved them for you in <a href="https://github.com/rvolosatovs/wasmtime/pull/2">https://github.com/rvolosatovs/wasmtime/pull/2</a>. Also I've revised the test case; that may help with the CI failure.</p>
</blockquote>



<a name="395637949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395637949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395637949">(Oct 09 2023 at 07:42)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1752490996">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>@badeend thank you for working on this. Yes, my initial thought was to wait for #7120 actually, but back then it was not ready for merge, and I hoped to get this one in quick (which did not really work out as planned)</p>
<p>I've integrated your changes</p>
</blockquote>



<a name="395637990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%237148%20feat%28wasi-sockets%29%3A%20implement%20UDP/near/395637990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.237148.20feat.28wasi-sockets.29.3A.20implement.20UDP.html#395637990">(Oct 09 2023 at 07:42)</a>:</h4>
<p>rvolosatovs edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/7148#issuecomment-1752490996">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/7148">issue #7148</a>:</p>
<blockquote>
<p>@badeend thank you for working on this. Yes, my initial thought was to wait for #7120 actually, but back then it was not ready for merge, and I hoped to get this one in quick (which did not really work out as planned)</p>
<p>I've integrated and tested your changes</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>