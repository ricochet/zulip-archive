<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6879 egraphs: Recognize `bitselect` from b... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html">wasmtime / PR #6879 egraphs: Recognize `bitselect` from b...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="386585985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386585985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386585985">(Aug 22 2023 at 11:27)</a>:</h4>
<p>afonso360 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a> from <code>afonso360:opt-bitselect</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>While working on #6876, I noticed we don't yet recognize this pattern for bitselects. I've also added the various permutations of this rule since I don't think we rotate inputs on bitwise operations.</p>
</blockquote>



<a name="386585986"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386585986" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386585986">(Aug 22 2023 at 11:27)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<a name="386585988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386585988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386585988">(Aug 22 2023 at 11:27)</a>:</h4>
<p><strong>afonso360</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<a name="386586150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386586150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386586150">(Aug 22 2023 at 11:28)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>:</p>
<blockquote>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> Hey,</p>
<p>While working on #6876, I noticed we don't yet recognize this pattern for bitselects. I've also added the various permutations of this rule since I don't think we rotate inputs on bitwise operations. (And my understanding is that we shouldn't do so)</p>
</blockquote>



<a name="386642439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386642439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386642439">(Aug 22 2023 at 15:58)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6879#pullrequestreview-1589793608">PR review</a>:</p>
<blockquote>
<p>LGTM, but can we please add some runtests as well? Thanks!</p>
<p>A bit of an aside, but it also makes me think that we should make the runtest runner automatically run tests twice, once with optimizations and once without them. Because we want that for every single runtest that exercises any mid-end rewrite rule, and it definitely doesn't hurt for runtests that are just stressing lowering or something.</p>
</blockquote>



<a name="386656369"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/386656369" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#386656369">(Aug 22 2023 at 17:01)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<a name="387882905"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/387882905" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#387882905">(Aug 29 2023 at 13:29)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<a name="387884052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/387884052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#387884052">(Aug 29 2023 at 13:36)</a>:</h4>
<p>afonso360 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<a name="387942671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/387942671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#387942671">(Aug 29 2023 at 18:45)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6879#pullrequestreview-1601059370">PR review</a>:</p>
<blockquote>
<p>That's a good restriction to adopt for now and a good assortment of new tests. Thanks!</p>
</blockquote>



<a name="387961994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236879%20egraphs%3A%20Recognize%20%60bitselect%60%20from%20b.../near/387961994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236879.20egraphs.3A.20Recognize.20.60bitselect.60.20from.20b.2E.2E.2E.html#387961994">(Aug 29 2023 at 20:36)</a>:</h4>
<p>afonso360 merged <a href="https://github.com/bytecodealliance/wasmtime/pull/6879">PR #6879</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>