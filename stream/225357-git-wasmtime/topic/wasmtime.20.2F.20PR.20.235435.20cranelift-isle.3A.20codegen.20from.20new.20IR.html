<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5435 cranelift-isle: codegen from new IR · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html">wasmtime / PR #5435 cranelift-isle: codegen from new IR</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="315726670"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315726670" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315726670">(Dec 14 2022 at 02:48)</a>:</h4>
<p>jameysharp opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>:</p>
<blockquote>
<p>ISLE's existing code-generation strategy doesn't generate the most efficient matching order for rules. This PR completely replaces it.</p>
<p>With this PR applied, <code>wasmtime compile</code> retires 2% fewer instructions on the pulldown-cmark and spidermonkey benchmarks from Sightglass.</p>
<p>A dev build of <code>cranelift-codegen</code> from an empty <code>target/</code> directory takes 2% less time. The build script, invoking ISLE, takes a little longer, but Rust can compile the generated code faster, so it balances out.</p>
<p>This PR is ready for review, but I'm expecting review to take a few rounds of back-and-forth while we figure out what comments I should have written.</p>
</blockquote>



<a name="315726671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315726671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315726671">(Dec 14 2022 at 02:48)</a>:</h4>
<p><strong>jameysharp</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a>.</p>



<a name="315906510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315906510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315906510">(Dec 14 2022 at 20:10)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="315929295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315929295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315929295">(Dec 14 2022 at 22:47)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="315940574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940574">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1218404576">PR review</a>.</p>



<a name="315940580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940580">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049080103">PR review comment</a>:</p>
<blockquote>
<p>Better name -- something like <code>ReadyTracker</code>?</p>
</blockquote>



<a name="315940581"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940581" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940581">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049078375">PR review comment</a>:</p>
<blockquote>
<p>I wonder if there's a better name here: maybe <code>Item</code> or <code>Seq</code> or something like that?</p>
</blockquote>



<a name="315940582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940582">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049091308">PR review comment</a>:</p>
<blockquote>
<p>Verify that equality constraints are processed in the right order, such that we always have one non-<code>Matched</code> input to trigger the evaluation? Consider e.g. <code>a == b</code>, <code>c == d</code>, <code>b == c</code> in order: after the first two, all four are <code>Matched</code> but we haven't yet processed <code>b == c</code>...</p>
</blockquote>



<a name="315940583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940583">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1218404576">PR review</a>.</p>



<a name="315940584"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940584" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940584">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049092227">PR review comment</a>:</p>
<blockquote>
<p>Comment here to describe how many rules may reach this point: if not a multi-term, and if we've passed the overlap checker, then we should only have one rule if there is nothing to split on. But in a multi-term we may just be left with a bunch of rules to evaluate in priority order</p>
</blockquote>



<a name="315940585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940585">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049078583">PR review comment</a>:</p>
<blockquote>
<p>A top-level doc comment describing the structure of the code would be helpful here!</p>
</blockquote>



<a name="315940586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940586">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049079983">PR review comment</a>:</p>
<blockquote>
<p>Can we define what <code>order</code> is here? Is it necessary to carry it separately from <code>Ready</code> or can it be integrated?</p>
</blockquote>



<a name="315940587"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940587" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940587">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049081842">PR review comment</a>:</p>
<blockquote>
<p>doc: indexed by binding ID</p>
</blockquote>



<a name="315940588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940588">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049085867">PR review comment</a>:</p>
<blockquote>
<p>Document <code>order</code>: on input, it contains indices of rules we need to order at this point in recursion tree?</p>
<p>Document recursion: does the recursive structure of the calls mirror the tree structure of output?</p>
</blockquote>



<a name="315940589"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940589" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940589">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049088302">PR review comment</a>:</p>
<blockquote>
<p>Also: document that there is one ReadyTracker per block; they are created recursively</p>
</blockquote>



<a name="315940590"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940590" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940590">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049083800">PR review comment</a>:</p>
<blockquote>
<p>Make note of binding-dependence-ID-order invariant allowing for a single pass propagation of transitive availability here</p>
</blockquote>



<a name="315940591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940591">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049095616">PR review comment</a>:</p>
<blockquote>
<p>Can we explicitly list all <code>Binding</code> kinds here so that adding a new one forces consideration of this property?</p>
</blockquote>



<a name="315940592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940592">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049099195">PR review comment</a>:</p>
<blockquote>
<p>This is super-confusing and it seems maybe a different representation is in order: why should there ever be a test of <code>source == source</code> present? The explanation given seems to indicate that this triggers some other check; if so can we make that explicit?</p>
</blockquote>



<a name="315940593"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940593" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940593">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049089189">PR review comment</a>:</p>
<blockquote>
<p><code>changed</code> here needs to consider whether <code>set_ready</code> above (line 225) updated the readiness of <code>source</code> as well</p>
</blockquote>



<a name="315940594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940594">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049080910">PR review comment</a>:</p>
<blockquote>
<p>Note here that the order is load-bearing, and why this order?</p>
</blockquote>



<a name="315940595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940595">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049093257">PR review comment</a>:</p>
<blockquote>
<p>Clarify invariant here and elsewhere: are the bindings named in <code>Condition</code> variants required to already be <code>use_expr</code>'d, or does the consumer of the <code>Condition</code>s do so?</p>
</blockquote>



<a name="315940596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/315940596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#315940596">(Dec 15 2022 at 00:30)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1049078900">PR review comment</a>:</p>
<blockquote>
<p>Define what this means: produce a result (return or add to list of results)?</p>
</blockquote>



<a name="316389731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/316389731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#316389731">(Dec 17 2022 at 01:31)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="316860799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/316860799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#316860799">(Dec 20 2022 at 01:17)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1052760342">PR review comment</a>:</p>
<blockquote>
<p>The name <code>scrutinee</code> is a little... archaic?... here -- perhaps something like <code>emit_expr_for_constraint_eval()</code>?</p>
</blockquote>



<a name="316860803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/316860803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#316860803">(Dec 20 2022 at 01:17)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1223705047">PR review</a>.</p>



<a name="316860807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/316860807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#316860807">(Dec 20 2022 at 01:17)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1052759585">PR review comment</a>:</p>
<blockquote>
<p>Can we add a TODO here with the issue tracking a more full-featured integer type system in ISLE?</p>
</blockquote>



<a name="316860810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/316860810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#316860810">(Dec 20 2022 at 01:17)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1223705047">PR review</a>.</p>



<a name="317075158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317075158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317075158">(Dec 21 2022 at 02:43)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="317268889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317268889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317268889">(Dec 21 2022 at 23:50)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="317279124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317279124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317279124">(Dec 22 2022 at 02:15)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="317420869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420869">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055695022">PR review comment</a>:</p>
<blockquote>
<p>A helper on <code>equal</code> might make this idiom a little clearer: it's basically asserting that <code>x</code> and <code>y</code> have overlapping equivalence classes (at least one element in common), right? Maybe something like <code>self.equal.overlaps(x, y)</code>?</p>
</blockquote>



<a name="317420870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420870">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228022447">PR review</a>.</p>



<a name="317420871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420871">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228022447">PR review</a>.</p>



<a name="317420872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420872">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055701567">PR review comment</a>:</p>
<blockquote>
<p>This version of the logic is really close to complete, I think; the main thing that's still a bit unsatisfying to me is the dual use of <code>HasControlFlow::Equal(x, y)</code> as a sort of sentinel for "check anything related to <code>x</code> (and normally inserted as <code>Equal(x, x)</code> but the second tuple field is ignored here) and as an actual pair to emit a check for below. Could we instead have two variants on <code>HasControlFlow</code> for the two cases, something like <code>EqualityInvolving(x)</code> and <code>Equal(x, y)</code>? Then we can insert the former as a candidate elsewhere, and we can panic if we see it when converting to <code>ControlFlow</code>. (Alternately, two different enums, one for the domain of each stage of processing; but I'm fine with keeping the union of the domains in one enum for expediency here if you want.)</p>
</blockquote>



<a name="317420873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420873">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055695360">PR review comment</a>:</p>
<blockquote>
<p>Could we have a bit more on the comment above describing why we are asserting something about equality-check candidates in particular below?</p>
</blockquote>



<a name="317420874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317420874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317420874">(Dec 22 2022 at 17:52)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055696618">PR review comment</a>:</p>
<blockquote>
<p>Is this just a reverse sort...? Could we use <code>Reverse</code> if so (<code>sort_unstable_by_key(|x| Reverse(*x))</code> or somesuch)?</p>
</blockquote>



<a name="317470161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470161">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="317470167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470167">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228066595">PR review</a>.</p>



<a name="317470168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470168">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228066595">PR review</a>.</p>



<a name="317470170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470170">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055895844">PR review comment</a>:</p>
<blockquote>
<p>Nope, I can't add to the comment to explain why I did that, because I shouldn't have done that. <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> </p>
</blockquote>



<a name="317470171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470171">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055736093">PR review comment</a>:</p>
<blockquote>
<p>Good idea. I'm adding a <code>DisjointSets::in_same_set</code> helper and using it the three places that I had some variant of this idiom.</p>
</blockquote>



<a name="317470172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470172">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055725368">PR review comment</a>:</p>
<blockquote>
<p>It is just a reverse sort, yes. <code>by_key</code> is annoying for types that aren't <code>Copy</code>, and I didn't want to make <code>Candidate</code> be <code>Copy</code> because I'd rather have the compiler tell me if I tried to copy it somewhere I didn't intend to. Using <code>by</code> instead lets me operate on borrows.</p>
<p>If it helps, I could write it as <a href="https://doc.rust-lang.org/std/cmp/enum.Ordering.html#method.reverse"><code>x.cmp(y).reverse()</code></a>. I didn't do that because we run this from a build script, so it's built in debug mode, which means these calls aren't inlined and have a non-trivial cost. But I haven't measured, so that might just be premature optimization.</p>
</blockquote>



<a name="317470174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470174">(Dec 22 2022 at 23:41)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055899466">PR review comment</a>:</p>
<blockquote>
<p>I'm still hesitant to stop (mis-)using <code>HasControlFlow::Equal</code> in this way because every alternative I've considered so far feels worse to me. But I've at least changed it so that this quirk is entirely contained within <code>best_control_flow</code>, and I've improved the comments there about it. Now anywhere outside that function, the <code>Equal</code> variant only appears with two different binding sites. And I'm still thinking about whether I can improve this further.</p>
</blockquote>



<a name="317470470"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470470" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470470">(Dec 22 2022 at 23:44)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055934288">PR review comment</a>:</p>
<blockquote>
<p>Also now that I look at it again: is it meant to be <code>x.zip(y)</code>, that is, find if there's an overlap but only if the identical element is at the same position in both sequences, or is it meant instead to be an all-pairs check?</p>
</blockquote>



<a name="317470471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470471">(Dec 22 2022 at 23:44)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228386467">PR review</a>.</p>



<a name="317470540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470540">(Dec 22 2022 at 23:45)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228386965">PR review</a>.</p>



<a name="317470541"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317470541" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317470541">(Dec 22 2022 at 23:45)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055934575">PR review comment</a>:</p>
<blockquote>
<p>Fair enough; just a comment "note that <code>x</code> and <code>y</code> are reversed below, to sort in reverse" is probably enough then, IMHO.</p>
</blockquote>



<a name="317479014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479014">(Dec 23 2022 at 01:18)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228432891">PR review</a>.</p>



<a name="317479015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479015">(Dec 23 2022 at 01:18)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055967454">PR review comment</a>:</p>
<blockquote>
<p>I _think_ I've confused you because I used <code>Option::zip</code>, not <code>Iterator::zip</code>. The <code>Iterator</code> for <code>Option</code> returns zero or one results for <code>None</code> or <code>Some</code>, respectively, so the two are equivalent, but it might be easier to think of this as more like a logical-and.</p>
<p>So this says, if <code>DisjointSets::find</code> returns <code>Some(representative)</code> of a set for both lookups, and the representative is the same for both, then return <code>true</code>.</p>
</blockquote>



<a name="317479577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479577">(Dec 23 2022 at 01:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228436072">PR review</a>.</p>



<a name="317479578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479578">(Dec 23 2022 at 01:25)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055970076">PR review comment</a>:</p>
<blockquote>
<p>Ah! Right, I had somehow thought this was an iteration over the whole equivalence class. That makes much more sense, thanks.</p>
</blockquote>



<a name="317479693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479693">(Dec 23 2022 at 01:26)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1228436615">PR review</a>.</p>



<a name="317479694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/317479694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#317479694">(Dec 23 2022 at 01:26)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1055970490">PR review comment</a>:</p>
<blockquote>
<p>Sure thing! I've added that comment locally now. I don't feel like making CI run again for a comment change so I'll push it after building the translation verifier we talked about.</p>
</blockquote>



<a name="321053721"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321053721" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321053721">(Jan 12 2023 at 23:22)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246715352">PR review</a>.</p>



<a name="321053723"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321053723" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321053723">(Jan 12 2023 at 23:22)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068765148">PR review comment</a>:</p>
<blockquote>
<p>Is it worth stating here that the returned index will always be <code>&lt;= partition_point</code>?</p>
</blockquote>



<a name="321054734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321054734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321054734">(Jan 12 2023 at 23:32)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246721221">PR review</a>.</p>



<a name="321054735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321054735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321054735">(Jan 12 2023 at 23:32)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068770391">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    /// Construct a candidate where the sort key is not set. The score will
</code></pre></div><br>
</p>
</blockquote>



<a name="321055663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321055663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321055663">(Jan 12 2023 at 23:41)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246726739">PR review</a>.</p>



<a name="321055664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321055664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321055664">(Jan 12 2023 at 23:41)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068775674">PR review comment</a>:</p>
<blockquote>
<p>There are more references to fields named <code>score</code> as <code>sort key</code>, so maybe this isn't a big deal :)</p>
</blockquote>



<a name="321059068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321059068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321059068">(Jan 13 2023 at 00:12)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246745481">PR review</a>.</p>



<a name="321059069"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321059069" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321059069">(Jan 13 2023 at 00:12)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068792147">PR review comment</a>:</p>
<blockquote>
<p>Is this because that would generate dead code?</p>
</blockquote>



<a name="321061257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321061257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321061257">(Jan 13 2023 at 00:31)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246757874">PR review</a>.</p>



<a name="321061258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321061258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321061258">(Jan 13 2023 at 00:31)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068801693">PR review comment</a>:</p>
<blockquote>
<p>What do you think about introducing a function on <code>HasControlFlow</code> called something like <code>any_equiv_class</code> that constructs the <code>Equal(source, source)</code> case? Something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="n">HasControlFlow</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">fn</span> <span class="nf">any_equivalence_class</span><span class="p">(</span><span class="n">source</span>: <span class="nc">BindingId</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="bp">Self</span>::<span class="n">Equal</span><span class="p">(</span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">)</span><span class="w"></span>
<span class="w">  </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>It might help when seeing uses where the args are the same.</p>
</blockquote>



<a name="321062752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321062752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321062752">(Jan 13 2023 at 00:44)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246765184">PR review</a>.</p>



<a name="321062754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321062754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321062754">(Jan 13 2023 at 00:44)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068807949">PR review comment</a>:</p>
<blockquote>
<p>Good question. No, I was concerned about the codegen going into an infinite loop of trying to match the same binding site repeatedly. The first time, it would reduce the partition to only those rules that all have the same pattern for that binding site. Matching the same binding site again within that partition won't move any rules out of the partition and it won't make any more binding sites available, so we'd come back to the same evaluation point without making any progress.</p>
<p>The other argument for this is that there's never anything to be gained from matching a binding site when you're in an evaluation path where you already know exactly what pattern that binding site matches. But the full justification for that is a little complicated because you have to reason about both fall-through cases and equality constraints. It's probably worth writing that argument out in some more detail, but the thought of doing so is making me tired <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
</blockquote>



<a name="321064054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321064054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321064054">(Jan 13 2023 at 00:55)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246771652">PR review</a>.</p>



<a name="321064055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321064055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321064055">(Jan 13 2023 at 00:55)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068813673">PR review comment</a>:</p>
<blockquote>
<p>Or maybe it means I should make changes in more places than this for consistency <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> </p>
<p>I was hoping the doc comment for <code>Score</code> describing it as "A sort key ..." would be clear enough about the two terms being interchangeable. But then, if they're interchangeable, then why not pick one and stick with it?</p>
</blockquote>



<a name="321066705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321066705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321066705">(Jan 13 2023 at 01:21)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246785368">PR review</a>.</p>



<a name="321066706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321066706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321066706">(Jan 13 2023 at 01:21)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068825973">PR review comment</a>:</p>
<blockquote>
<p>Maybe <code>emit_source</code> to mirror the name from the <code>Match</code> constructor?</p>
</blockquote>



<a name="321073633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321073633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321073633">(Jan 13 2023 at 02:49)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="321073748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321073748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321073748">(Jan 13 2023 at 02:50)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246835544">PR review</a>.</p>



<a name="321073749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321073749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321073749">(Jan 13 2023 at 02:50)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068869408">PR review comment</a>:</p>
<blockquote>
<p>Since both you and Chris found the <code>Equal(x, x)</code> pattern confusing, I've implemented an alternative. What do you think of 2bb7988?</p>
</blockquote>



<a name="321074189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321074189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321074189">(Jan 13 2023 at 02:56)</a>:</h4>
<p>jameysharp updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a> from <code>isle-codegen</code> to <code>main</code>.</p>



<a name="321074237"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321074237" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321074237">(Jan 13 2023 at 02:57)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1246839075">PR review</a>.</p>



<a name="321074238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/321074238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#321074238">(Jan 13 2023 at 02:57)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#discussion_r1068872503">PR review comment</a>:</p>
<blockquote>
<p>I like "scrutinee", and it's what the Rust reference calls that part of a <code>match</code> expression—but Trevor's suggestion is compelling enough I've taken it. Thanks!</p>
</blockquote>



<a name="322625637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/322625637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#322625637">(Jan 20 2023 at 22:11)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5435#pullrequestreview-1264409753">PR review</a>.</p>



<a name="323111829"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235435%20cranelift-isle%3A%20codegen%20from%20new%20IR/near/323111829" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235435.20cranelift-isle.3A.20codegen.20from.20new.20IR.html#323111829">(Jan 23 2023 at 20:27)</a>:</h4>
<p>jameysharp merged <a href="https://github.com/bytecodealliance/wasmtime/pull/5435">PR #5435</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>