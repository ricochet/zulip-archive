<html>
<head><meta charset="utf-8"><title>wasmtime / PR #9031 Use cmake to build wasmtime-c-api · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html">wasmtime / PR #9031 Use cmake to build wasmtime-c-api</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="454718111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454718111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454718111">(Jul 29 2024 at 04:34)</a>:</h4>
<p>CGamesPlay opened <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a> from <code>CGamesPlay:main</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This resolves #8890, and allows a rust project to use the <code>wasmtime-c-api</code> crate again.</p>
<p>In #8642, the build process was changed but the rust build script was not changed to match. In addition, because the CMake configuration invokes cargo, it isn't possible for cargo to then invoke CMake (cylic dependency). To resolve this, we introduce a new CMake target that only produces the necessary files for the build to succeed, and then allow cargo to build the API as normal.</p>
<p>I've tested that this works in my local copy of tree-sitter, which depends on the <code>wasmtime-c-api-impl</code> crate.</p>
</blockquote>



<a name="454718112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454718112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454718112">(Jul 29 2024 at 04:34)</a>:</h4>
<p><strong>CGamesPlay</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="454718115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454718115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454718115">(Jul 29 2024 at 04:34)</a>:</h4>
<p><strong>CGamesPlay</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="454718116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454718116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454718116">(Jul 29 2024 at 04:34)</a>:</h4>
<p><strong>CGamesPlay</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="454852012"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454852012" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454852012">(Jul 29 2024 at 14:27)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2205138416">PR review</a>:</p>
<blockquote>
<p>Thanks! Do you know if it's possible to have an install target which only installs header files? That way there wouldn't need to be two includes and only one would be necessary.</p>
<p>Additionally can you forward along the <code>-D</code> flags for the features of Wasmtime? Otherwise the <code>conf.h</code> could report the wrong set of supported features.</p>
</blockquote>



<a name="454981441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454981441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454981441">(Jul 30 2024 at 00:34)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2257245104">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Sure, we just need to use <code>COMPONENT Headers</code>, see <a href="https://cmake.org/cmake/help/latest/command/install.html">docs</a>. I think only having one header would be ideal, especially if they are in different directories.</p>
<p>Are you suggesting that instead of just generating the header, I install all the headers to the cargo output directory, and then report that as the sole include directory? That makes sense, I just want to confirm.</p>
</blockquote>



<a name="454986217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/454986217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#454986217">(Jul 30 2024 at 01:01)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455001188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455001188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455001188">(Jul 30 2024 at 02:50)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455001339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455001339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455001339">(Jul 30 2024 at 02:51)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2257357773">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Updated commits properly configure the headers, and install all headers to the right place, so we can get rid of the second metadata variable.</p>
</blockquote>



<a name="455001455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455001455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455001455">(Jul 30 2024 at 02:52)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455136248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455136248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455136248">(Jul 30 2024 at 14:21)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2207849647">PR review</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="455136999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455136999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455136999">(Jul 30 2024 at 14:23)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455137028"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455137028" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455137028">(Jul 30 2024 at 14:23)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455159475"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455159475" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455159475">(Jul 30 2024 at 16:10)</a>:</h4>
<p>clason <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2258713304">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Can this be backported to release-23, too?</p>
</blockquote>



<a name="455168352"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455168352" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455168352">(Jul 30 2024 at 16:49)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2258788598">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I think that would be reasonable yeah, just needs to land on <code>main</code> first and then the backport is a cherry-pick + new PR. </p>
<p>I believe CI is failing here on MinGW for cmake-related reasons? (compiler detection not working presumbably because <code>cl.exe</code> is used when mingw flags are passed)</p>
</blockquote>



<a name="455184876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455184876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455184876">(Jul 30 2024 at 17:58)</a>:</h4>
<p>maxbrunsfeld <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2258904910">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Is there any way we could avoid adding this <code>cmake</code> build dependency to <code>wasmtime-c-api-impl</code>?</p>
<p>Could the <code>build.rs</code> just generate <code>conf.h</code>, instead of using cmake to do it? It looks like that <code>build.rs</code> file already has to explicitly list out a bunch of cargo features and convert them to C macro names. Could it just write that to a <code>conf.h</code> file directly, instead of passing them as arguments to cmake?</p>
<p>Maybe I'm missing something, and the CMake build is doing something too significant to duplicate, but if not, it would be great to avoid the build-time dependency.</p>
</blockquote>



<a name="455204860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455204860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455204860">(Jul 30 2024 at 19:37)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259073199">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Is the <code>cmake</code> dependency too heavy for end users to arrange? I do think it's nice to have the same logic not duplicated. It's already broken once now so keeping it synchronized seems like the best bet.</p>
</blockquote>



<a name="455214262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455214262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455214262">(Jul 30 2024 at 20:22)</a>:</h4>
<p>maxbrunsfeld <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259144010">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I just anticipate that  consumers of the <code>tree-sitter</code> crate won't necessarily have <code>cmake</code> installed on their CI / dev machines, if they are mainly set up for Rust development.</p>
<p>Just to double check, I think that if we wanted to avoid requiring Cmake, we'd change this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PathBuf</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="s">"CARGO_MANIFEST_DIR"</span><span class="p">).</span><span class="n">unwrap</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmake</span><span class="p">::</span><span class="n">Config</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dir</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span>
<span class="w">        </span><span class="p">.</span><span class="n">define</span><span class="p">(</span><span class="s">"WASMTIME_DISABLE_ALL_FEATURES"</span><span class="p">,</span><span class="w"> </span><span class="s">"ON"</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">always_configure</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">build_target</span><span class="p">(</span><span class="s">"headers"</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">FEATURES</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"CARGO_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)).</span><span class="n">is_some</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">config</span><span class="p">.</span><span class="n">define</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"WASMTIME_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">),</span><span class="w"> </span><span class="s">"ON"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">dst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">build</span><span class="p">();</span>
</code></pre></div>
<p>into this (or something similar). </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#ifndef WASMTIME_CONF_H</span><span class="se">\n</span><span class="s">#define WASMTIME_CONF_H</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">suffix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#endif</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prefix</span><span class="p">.</span><span class="n">to_string</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">FEATURES</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"CARGO_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)).</span><span class="n">is_some</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">writeln!</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="s">"WASMTIME_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">header</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">suffix</span><span class="p">;</span>
</code></pre></div>
<p>And you wouldn't need to add the <code>headers</code> target to the cmake file. It doesn't seem any more brittle to me. Either way, the build script needs to know the set of features, and how they map to C macro names.</p>
</blockquote>



<a name="455214368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455214368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455214368">(Jul 30 2024 at 20:22)</a>:</h4>
<p>maxbrunsfeld edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259144010">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I just anticipate that  consumers of the <code>tree-sitter</code> crate won't necessarily have <code>cmake</code> installed on their CI / dev machines, if they are mainly set up for Rust development. It's not the end of the world, but it adds one more gotcha and potentially dependency issue for users of the crate.</p>
<p>Just to double check, I think that if we wanted to avoid requiring Cmake, we'd change this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PathBuf</span><span class="p">::</span><span class="n">from</span><span class="p">(</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="s">"CARGO_MANIFEST_DIR"</span><span class="p">).</span><span class="n">unwrap</span><span class="p">());</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cmake</span><span class="p">::</span><span class="n">Config</span><span class="p">::</span><span class="n">new</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dir</span><span class="p">);</span>
<span class="w">    </span><span class="n">config</span>
<span class="w">        </span><span class="p">.</span><span class="n">define</span><span class="p">(</span><span class="s">"WASMTIME_DISABLE_ALL_FEATURES"</span><span class="p">,</span><span class="w"> </span><span class="s">"ON"</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">always_configure</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">build_target</span><span class="p">(</span><span class="s">"headers"</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">FEATURES</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"CARGO_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)).</span><span class="n">is_some</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">config</span><span class="p">.</span><span class="n">define</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"WASMTIME_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">),</span><span class="w"> </span><span class="s">"ON"</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">dst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="n">build</span><span class="p">();</span>
</code></pre></div>
<p>into this (or something similar). </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">prefix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#ifndef WASMTIME_CONF_H</span><span class="se">\n</span><span class="s">#define WASMTIME_CONF_H</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">suffix</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"#endif</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">prefix</span><span class="p">.</span><span class="n">to_string</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">FEATURES</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">env</span><span class="p">::</span><span class="n">var_os</span><span class="p">(</span><span class="fm">format!</span><span class="p">(</span><span class="s">"CARGO_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">)).</span><span class="n">is_some</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="fm">writeln!</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="s">"WASMTIME_FEATURE_{}"</span><span class="p">,</span><span class="w"> </span><span class="n">f</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">header</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">suffix</span><span class="p">;</span>
</code></pre></div>
<p>And you wouldn't need to add the <code>headers</code> target to the cmake file. It doesn't seem any more brittle to me. Either way, the build script needs to know the set of features, and how they map to C macro names.</p>
</blockquote>



<a name="455225886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455225886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455225886">(Jul 30 2024 at 21:40)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259258701">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>The brittle part is that it's a duplication of copying over headers and there is no longer a single source of truth for how headers are created. Additionally there are no tests in this repository testing the header as-generated by the build script and without that there's also no tests that the duplicated logic for the header file generation is correct. What you're describing is correct as-is today but that may not hold true indefinitely into the future.</p>
</blockquote>



<a name="455247989"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455247989" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455247989">(Jul 31 2024 at 00:18)</a>:</h4>
<p>maxbrunsfeld <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259405087">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Oh, I would have thought that if there are tests for <code>wasmtime-c-api</code>, then they would cover the correctness of the <code>wasmtime-c-api-impl</code> build script. Is there a tested code path that doesn't run this build script?</p>
</blockquote>



<a name="455248398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455248398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455248398">(Jul 31 2024 at 00:22)</a>:</h4>
<p>maxbrunsfeld edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259405087">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Oh, I would have thought that if there are tests for <code>wasmtime-c-api</code>, then they would cover the correctness of the <code>wasmtime-c-api-impl</code> build script. Is there a tested code path that doesn't run this build script?</p>
<p>Edit - Sorry never mind; I don't want to hold this up.</p>
</blockquote>



<a name="455248442"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455248442" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455248442">(Jul 31 2024 at 00:23)</a>:</h4>
<p>maxbrunsfeld edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259405087">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>~Oh, I would have thought that if there are tests for <code>wasmtime-c-api</code>, then they would cover the correctness of the <code>wasmtime-c-api-impl</code> build script. Is there a tested code path that doesn't run this build script?~</p>
<p>Edit - Sorry never mind, it doesn't matter that much, and I don't want to hold this up.</p>
</blockquote>



<a name="455252115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455252115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455252115">(Jul 31 2024 at 00:59)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259437666">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Is there are test that mingw compilation is working at all presently? This invocation of cmake looks correct, but it detects MSVC anyways:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">running</span><span class="p">:</span><span class="w"> </span><span class="s">"cmake"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">crates</span><span class="se">\\</span><span class="s">c-api"</span>
<span class="w">        </span><span class="s">"-G"</span><span class="w"> </span><span class="s">"MSYS Makefiles"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_DISABLE_ALL_FEATURES=ON"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_FEATURE_DISABLE_LOGGING=ON"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_NAME=Windows"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_PROCESSOR=AMD64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_INSTALL_PREFIX=D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">x86_64-pc-windows-gnu</span><span class="se">\\</span><span class="s">release</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-c-api-impl-dfbdb5120f123319</span><span class="se">\\</span><span class="s">out"</span>
<span class="w">        </span><span class="s">"-DCMAKE_C_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_CXX_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_ASM_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_BUILD_TYPE=MinSizeRel"</span>
<span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">MSVC</span><span class="w"> </span><span class="mf">19.40.33812.0</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="455253068"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455253068" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455253068">(Jul 31 2024 at 01:08)</a>:</h4>
<p>CGamesPlay edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259437666">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Is there are test that mingw compilation is working at all presently? This invocation of cmake looks correct, but it detects MSVC anyways:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">running</span><span class="p">:</span><span class="w"> </span><span class="s">"cmake"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">crates</span><span class="se">\\</span><span class="s">c-api"</span>
<span class="w">        </span><span class="s">"-G"</span><span class="w"> </span><span class="s">"MSYS Makefiles"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_DISABLE_ALL_FEATURES=ON"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_FEATURE_DISABLE_LOGGING=ON"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_NAME=Windows"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_PROCESSOR=AMD64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_INSTALL_PREFIX=D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">x86_64-pc-windows-gnu</span><span class="se">\\</span><span class="s">release</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-c-api-impl-dfbdb5120f123319</span><span class="se">\\</span><span class="s">out"</span>
<span class="w">        </span><span class="s">"-DCMAKE_C_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_CXX_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_ASM_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_BUILD_TYPE=MinSizeRel"</span>
<span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">MSVC</span><span class="w"> </span><span class="mf">19.40.33812.0</span>
</code></pre></div>
<p>Looking at <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/10171658273/job/28133093090">another mingw job</a> I see that <code>C:/msys64/usr/bin/pacman.exe -S --needed mingw-w64-x86_64-gcc --noconfirm</code> and possibly a few others are likely needed?</p>
</blockquote>



<a name="455253120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455253120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455253120">(Jul 31 2024 at 01:09)</a>:</h4>
<p>CGamesPlay edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259437666">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>Is there are test that mingw compilation is working at all presently? This invocation of cmake looks correct, but it detects MSVC anyways:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">running</span><span class="p">:</span><span class="w"> </span><span class="s">"cmake"</span><span class="w"> </span><span class="s">"D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">crates</span><span class="se">\\</span><span class="s">c-api"</span>
<span class="w">        </span><span class="s">"-G"</span><span class="w"> </span><span class="s">"MSYS Makefiles"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_DISABLE_ALL_FEATURES=ON"</span>
<span class="w">        </span><span class="s">"-DWASMTIME_FEATURE_DISABLE_LOGGING=ON"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_NAME=Windows"</span>
<span class="w">        </span><span class="s">"-DCMAKE_SYSTEM_PROCESSOR=AMD64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_INSTALL_PREFIX=D:</span><span class="se">\\</span><span class="s">a</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">wasmtime</span><span class="se">\\</span><span class="s">target</span><span class="se">\\</span><span class="s">x86_64-pc-windows-gnu</span><span class="se">\\</span><span class="s">release</span><span class="se">\\</span><span class="s">build</span><span class="se">\\</span><span class="s">wasmtime-c-api-impl-dfbdb5120f123319</span><span class="se">\\</span><span class="s">out"</span>
<span class="w">        </span><span class="s">"-DCMAKE_C_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_CXX_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_ASM_FLAGS= -ffunction-sections -fdata-sections -m64"</span>
<span class="w">        </span><span class="s">"-DCMAKE_BUILD_TYPE=MinSizeRel"</span>
<span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="n">The</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="n">compiler</span><span class="w"> </span><span class="n">identification</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">MSVC</span><span class="w"> </span><span class="mf">19.40.33812.0</span>
</code></pre></div>
<h2>Updated</h2>
<p>Looking at <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/10171658273/job/28133093090">another mingw job</a> I see that <code>C:/msys64/usr/bin/pacman.exe -S --needed mingw-w64-x86_64-gcc --noconfirm</code> and possibly a few others are likely needed?</p>
</blockquote>



<a name="455256514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455256514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455256514">(Jul 31 2024 at 01:45)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455256563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455256563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455256563">(Jul 31 2024 at 01:45)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259475595">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I've added a workflow change to include the commands that I suspect fix the issue.</p>
</blockquote>



<a name="455256610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455256610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455256610">(Jul 31 2024 at 01:46)</a>:</h4>
<p>CGamesPlay edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2259475595">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I've added a workflow change to include the commands that I suspect fix the issue. And I rebased.</p>
</blockquote>



<a name="455392748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455392748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455392748">(Jul 31 2024 at 14:49)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455396828"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455396828" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455396828">(Jul 31 2024 at 15:05)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2260744110">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I've added an extra commit to this PR which runs the full tests suite on this PR instead of waiting for the merge queue, and it looks like there may still be some CI issues</p>
</blockquote>



<a name="455527568"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455527568" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455527568">(Aug 01 2024 at 02:25)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455529719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455529719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455529719">(Aug 01 2024 at 02:41)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455555046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455555046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455555046">(Aug 01 2024 at 05:27)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455556166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455556166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455556166">(Aug 01 2024 at 05:41)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2262084885">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>The one remaining CI failure is a network failure. Changes made to make CI happy:</p>
<ul>
<li>Force CC and CXX in mingw. Turns out the other mingw build configurations don't build the C API anyways.</li>
<li>Use <code>cargo package --no-verify</code> on the C API since it is hard-coded to create an <code>artifact</code> directory in the source directory and it isn't possible to package that directory because cargo is hard-coded to exclude any directory with <code>Cargo.toml</code> in it.<ul>
<li>By the way, the <code>--no-verify</code> on <code>wasi-nn</code> seems unnecessary (it worked fine on my machine).</li>
</ul>
</li>
</ul>
</blockquote>



<a name="455740768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455740768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455740768">(Aug 01 2024 at 19:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2213753742">PR review</a>:</p>
<blockquote>
<p>Thanks! Given the possible fragility here with packaging and how you had to modify <code>include</code>, could verification via <code>publish.rs</code> be made to work? Basically could this be updated to undo the addition of <code>--no-verify</code>?</p>
<p>As for wasi-nn, if you'd like I think it's reasonable to try dropping that here too (and verify it), but it's ok to defer that to a different PR as well.</p>
</blockquote>



<a name="455740769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455740769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455740769">(Aug 01 2024 at 19:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2213753742">PR review</a>:</p>
<blockquote>
<p>Thanks! Given the possible fragility here with packaging and how you had to modify <code>include</code>, could verification via <code>publish.rs</code> be made to work? Basically could this be updated to undo the addition of <code>--no-verify</code>?</p>
<p>As for wasi-nn, if you'd like I think it's reasonable to try dropping that here too (and verify it), but it's ok to defer that to a different PR as well.</p>
</blockquote>



<a name="455740771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455740771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455740771">(Aug 01 2024 at 19:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1700732498">PR review comment</a>:</p>
<blockquote>
<p>Should the <code>BINARY_DIR</code> configuration be dropped entirely? That should probably be somewhere within <code>CMAKE_CURRENT_BINARY_DIR</code> if it's still being used to avoid modifying the source tree.</p>
</blockquote>



<a name="455740966"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455740966" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455740966">(Aug 01 2024 at 19:43)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2213763216">PR review</a>.</p>



<a name="455740967"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455740967" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455740967">(Aug 01 2024 at 19:43)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1700737463">PR review comment</a>:</p>
<blockquote>
<p>Mind leaving a comment as to why these steps are necessary? (this doesn't seem to directly follow from <a href="https://github.com/rust-lang/rust/issues/112368">rust-lang/rust#112368</a> by my read</p>
</blockquote>



<a name="455782236"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455782236" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455782236">(Aug 02 2024 at 00:18)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455787326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455787326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455787326">(Aug 02 2024 at 00:36)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455796047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455796047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455796047">(Aug 02 2024 at 01:17)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455798561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455798561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455798561">(Aug 02 2024 at 01:44)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2264333787">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<blockquote>
<p>Given the possible fragility here with packaging and how you had to modify include, could verification via <a href="http://publish.rs">publish.rs</a> be made to work? Basically could this be updated to undo the addition of --no-verify?</p>
</blockquote>
<p>Short answer: no. Longer answer: yes, but I probably can't do it in this PR. Any change I make here will at best be "works on my machine", and will likely involve knowing the details of all supported configurations and what went into <a href="https://github.com/bytecodealliance/wasmtime/pull/8642">https://github.com/bytecodealliance/wasmtime/pull/8642</a>. Plus, I'm not a core developer of this project, I'm trying to get access to the 1-line method I added in <a href="https://github.com/bytecodealliance/wasmtime/pull/8907">https://github.com/bytecodealliance/wasmtime/pull/8907</a> so that I can update tree-sitter so that I can use wasm modules in my project. Basically, I'm already 2 projects deep in a rabbit hole <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<p>Hopefully you'll appreciate that I've taken the rust c-api crate from definitely-not-working to working-but-not-thoroughly-tested, and can add a follow-up task to the backlog to improve the testing.</p>
</blockquote>



<a name="455943674"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455943674" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455943674">(Aug 02 2024 at 14:12)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455946592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455946592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455946592">(Aug 02 2024 at 14:21)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455947582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455947582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455947582">(Aug 02 2024 at 14:27)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2265517797">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>That's fine yeah, I can try to help out here too. </p>
<p>It's worth nothing though the other side of the coin here. Most of us working on Wasmtime know very little about cmake and don't expect the C API to be used through Rust like this. #6765 has some more discussion of the addition of this feature about how things might break without tests in the repository. I tried to make it clear at least that this current situation was a risk of happening.</p>
<p>I understand you're short on time and don't want to maintain this here but at the same time as maintainers responsible for Wasmtime we need to make sure that introduction of features we don't fully understand don't hinder the development elsewhere. Here specifically our crate publication process is fully automated and only runs once a month so is at a very high risk of going wrong if we don't have protections in place. Explicitly passing <code>--no-verify</code> to new crates raises that risk even further. Failing publication due to errors with the c-api can then be difficult to understand without precise knowledge of everything working here.</p>
<p>Basically what I'm trying to say is that I'm not trying to get this PR to a picture-perfect state but rather get it to a point where it (a) passes tests and (b) doesn't increase maintenance burden. Dealing with CMake isn't always fun and easy and I understand it can be a slog, but that's part of the reality of having a cross-platform project sometimes.</p>
</blockquote>



<a name="455949295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455949295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455949295">(Aug 02 2024 at 14:37)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455972194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455972194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455972194">(Aug 02 2024 at 15:55)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455975556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455975556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455975556">(Aug 02 2024 at 16:11)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="455977296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455977296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455977296">(Aug 02 2024 at 16:19)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2265737104">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I'm losing steam on this and I don't know how best to proceed. Running a full <code>cmake</code> configure step has issues with needing extra CI configuration and new build dependencies (not just <code>cmake</code> but the build system like make/ninja as well). It additionally resurfaced android errors in <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/10217416984/job/28271193012">https://github.com/bytecodealliance/wasmtime/actions/runs/10217416984/job/28271193012</a> which I don't know what's going on.</p>
<p>I tried an alternate approach of installing headers with a <code>*.cmake</code> script to use <code>cmake -P</code> instead. That skips the whole configure step and only requires a single <code>cmake</code> invocation and should be pretty portable and more lightweight. That is causing all sorts of issues of having to install headers in a few places as part of the build for things like docs and examples. I don't know how to best handle that.</p>
<p>Overall I don't know the best way forward on this. It might be to stop relying on cmake for features and use a rust-based script that can be shared between the normal cmake build and the build script. Unsure.</p>
</blockquote>



<a name="455978506"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/455978506" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#455978506">(Aug 02 2024 at 16:24)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2265744702">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I’m not at my computer right now but about the Android failure, one thing I noticed is that the NDK is v27 on -min and v25 on the regular one, with a different rust toolchain and a different runner image version. I set <code>CMAKE_MAKE_PROGRAM</code> to <code>make</code> and I got a successful run, but I am suspicious that its actually a nondeterministic failure. </p>
</blockquote>



<a name="457238167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/457238167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#457238167">(Aug 08 2024 at 01:36)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="457245789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/457245789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#457245789">(Aug 08 2024 at 02:22)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="457248086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/457248086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#457248086">(Aug 08 2024 at 02:43)</a>:</h4>
<p>CGamesPlay updated <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="457249979"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/457249979" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#457249979">(Aug 08 2024 at 03:00)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2274860590">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>The remaining 2 build failures were pretty simple tweaks, so I went ahead and made them. The CI is passing now, and I confirmed that it still works when referenced from a rust crate. There was a network failure int he build, but I rebased to trigger a test rerun.</p>
<p>Do you think this is good to merge in its latest state?</p>
</blockquote>



<a name="459414247"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459414247" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459414247">(Aug 09 2024 at 08:59)</a>:</h4>
<p>clason submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2229714730">PR review</a>.</p>



<a name="459414248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459414248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459414248">(Aug 09 2024 at 08:59)</a>:</h4>
<p>clason created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1711090740">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code># When adding or removing a feature, make sure to keep the C API in sync by
</code></pre></div><br>
</p>
</blockquote>



<a name="459414671"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459414671" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459414671">(Aug 09 2024 at 09:00)</a>:</h4>
<p>clason submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2229717037">PR review</a>.</p>



<a name="459414673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459414673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459414673">(Aug 09 2024 at 09:00)</a>:</h4>
<p>clason created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1711092674">PR review comment</a>:</p>
<blockquote>
<p>unrelated changes?</p>
</blockquote>



<a name="459415091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459415091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459415091">(Aug 09 2024 at 09:02)</a>:</h4>
<p>clason submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2229719490">PR review</a>.</p>



<a name="459415094"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459415094" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459415094">(Aug 09 2024 at 09:02)</a>:</h4>
<p>clason created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1711094865">PR review comment</a>:</p>
<blockquote>
<p>If you move this comment _above_ the list (here and elsewhere), then you can avoid the duplicate nonce (less noise when <code>grep</code>ping).</p>
</blockquote>



<a name="459549230"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459549230" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459549230">(Aug 09 2024 at 18:36)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2230834998">PR review</a>:</p>
<blockquote>
<p>Ah thanks for debugging that! This looks good to me yeah, so I'm going to go ahead and merge. I'm going to follow up with some responses to @clason as well and there can always be follow-ups too to handle things.</p>
</blockquote>



<a name="459549395"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459549395" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459549395">(Aug 09 2024 at 18:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2230836702">PR review</a>.</p>



<a name="459549396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459549396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459549396">(Aug 09 2024 at 18:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1711975042">PR review comment</a>:</p>
<blockquote>
<p>Personally I like having this at the end because features are often added at the end and a comment only at the top might get missed. The amount of duplication here though is unfortunate across the codebase but that would probably be best fixed with a "tidy" script or something like that rather than relying on us humans to handle everything.</p>
</blockquote>



<a name="459549452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459549452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459549452">(Aug 09 2024 at 18:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1711975563">PR review comment</a>:</p>
<blockquote>
<p>I found this was necessary at one stage of testing to appease doxygen. That being said I barely understanding doxygen and we could very well be holding doxygen wrong where this should work when it doesn't.</p>
</blockquote>



<a name="459549453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459549453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459549453">(Aug 09 2024 at 18:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2230837296">PR review</a>.</p>



<a name="459551392"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459551392" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459551392">(Aug 09 2024 at 18:51)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>.</p>



<a name="459556330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459556330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459556330">(Aug 09 2024 at 19:17)</a>:</h4>
<p>clason submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#pullrequestreview-2230894983">PR review</a>.</p>



<a name="459556332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459556332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459556332">(Aug 09 2024 at 19:17)</a>:</h4>
<p>clason created <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#discussion_r1712026314">PR review comment</a>:</p>
<blockquote>
<p>I just mean as a trivial way to halve the number of hits: no need to have the nonce both before _and_ after the list; once is enough (no matter where).</p>
</blockquote>



<a name="459556419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459556419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459556419">(Aug 09 2024 at 19:17)</a>:</h4>
<p>clason <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2278592432">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>And also backport (24.0 is probably good enough) ;)</p>
</blockquote>



<a name="459965821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459965821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459965821">(Aug 12 2024 at 01:32)</a>:</h4>
<p>CGamesPlay <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2282982948">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I'd definitely love to get this in 24 if possible. Link to @clason's backport PRs:</p>
<ul>
<li>#9101</li>
<li>#9102</li>
</ul>
</blockquote>



<a name="459965856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%239031%20Use%20cmake%20to%20build%20wasmtime-c-api/near/459965856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.239031.20Use.20cmake.20to.20build.20wasmtime-c-api.html#459965856">(Aug 12 2024 at 01:33)</a>:</h4>
<p>CGamesPlay edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/9031#issuecomment-2282982948">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/9031">PR #9031</a>:</p>
<blockquote>
<p>I'd definitely love to get this in 24, and 23 would be nice if possible. Link to @clason's backport PRs:</p>
<ul>
<li>#9101</li>
<li>#9102</li>
</ul>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>