<html>
<head><meta charset="utf-8"><title>wasmtime / issue #5302 Wiggle: make wasmtime an optional ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235302.20Wiggle.3A.20make.20wasmtime.20an.20optional.20.2E.2E.2E.html">wasmtime / issue #5302 Wiggle: make wasmtime an optional ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="311031442"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235302%20Wiggle%3A%20make%20wasmtime%20an%20optional%20.../near/311031442" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235302.20Wiggle.3A.20make.20wasmtime.20an.20optional.20.2E.2E.2E.html#311031442">(Nov 19 2022 at 15:07)</a>:</h4>
<p>Berrysoft opened <a href="https://github.com/bytecodealliance/wasmtime/issues/5302">issue #5302</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Wiggle will forcely depend on wasmtime in future releases, according to #5137 . However, recently <a href="https://github.com/paritytech/wasmi">wasmi</a> begins support for WASI with wiggle (<a href="https://github.com/paritytech/wasmi/pull/557">https://github.com/paritytech/wasmi/pull/557</a>). We need to avoid importing wasmtime when using it. With the current latest version 2.0.x, it is easy to control with features, but this will not work in future releases.</p>
<p>Therefore I suggest making wasmtime an optional dependency of wiggle again.</p>
<h4>Benefit</h4>
<p>Wasmtime is a de facto standard of WASM. It provides many standard implementations and benefits many other projects in the community. Cranelift is a good example, it is not only a JIT of wasmtime, but also a codegen of many frontends. If wiggle provide an option to remove wasmtime dependency, it (and wasi-common) could be another standard implementation of WASI.</p>
<h4>Implementation</h4>
<p>I'm aware of the huge work to make a dependency optional, but I think it worth. If there are no prettier attempts, reverting the commit might be a choice.</p>
</blockquote>



<a name="311032040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235302%20Wiggle%3A%20make%20wasmtime%20an%20optional%20.../near/311032040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235302.20Wiggle.3A.20make.20wasmtime.20an.20optional.20.2E.2E.2E.html#311032040">(Nov 19 2022 at 15:12)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/5302#issuecomment-1320905270">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5302">issue #5302</a>:</p>
<blockquote>
<p>You might want to read the thread at <a href="#narrow/stream/219900-wasi/topic/wasi-common.3A.20General.20WASI.20implementation.3F">https://bytecodealliance.zulipchat.com/#narrow/stream/219900-wasi/topic/wasi-common.3A.20General.20WASI.20implementation.3F</a></p>
</blockquote>



<a name="311436001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235302%20Wiggle%3A%20make%20wasmtime%20an%20optional%20.../near/311436001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235302.20Wiggle.3A.20make.20wasmtime.20an.20optional.20.2E.2E.2E.html#311436001">(Nov 21 2022 at 17:54)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/5302#issuecomment-1322442971">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/5302">issue #5302</a>:</p>
<blockquote>
<p>Personally I can see the value in having an implementation of a host API decoupled from the wasm engine it's running on, but such an implementation requires a fair bit of macro-trickery to keep it maintainable. The <code>wiggle</code> of old, as you've found, did this as it was multiplexing the Lucet and Wasmtime runtimes. Nowadays, however, the design of <code>wasi-common</code> is evolving, especially with an upcoming implementation of the preview2 snapshot of WASI. With all the shuffling going on we need to focus on the needs of Wasmtime and the component model right now. Once the dust settles I think it would be reasonable to look at this issue again and see where things are at and whether it can be reasonably supported. For now though I'm going to close this as this was something intentionally removed (with more information on Zulip as well in that linked thread)</p>
</blockquote>



<a name="311436004"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%235302%20Wiggle%3A%20make%20wasmtime%20an%20optional%20.../near/311436004" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.235302.20Wiggle.3A.20make.20wasmtime.20an.20optional.20.2E.2E.2E.html#311436004">(Nov 21 2022 at 17:54)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/5302">issue #5302</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Wiggle will forcely depend on wasmtime in future releases, according to #5137 . However, recently <a href="https://github.com/paritytech/wasmi">wasmi</a> begins support for WASI with wiggle (<a href="https://github.com/paritytech/wasmi/pull/557">https://github.com/paritytech/wasmi/pull/557</a>). We need to avoid importing wasmtime when using it. With the current latest version 2.0.x, it is easy to control with features, but this will not work in future releases.</p>
<p>Therefore I suggest making wasmtime an optional dependency of wiggle again.</p>
<h4>Benefit</h4>
<p>Wasmtime is a de facto standard of WASM. It provides many standard implementations and benefits many other projects in the community. Cranelift is a good example, it is not only a JIT of wasmtime, but also a codegen of many frontends. If wiggle provide an option to remove wasmtime dependency, it (and wasi-common) could be another standard implementation of WASI.</p>
<h4>Implementation</h4>
<p>I'm aware of the huge work to make a dependency optional, but I think it worth. If there are no prettier attempts, reverting the commit might be a choice.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>