<html>
<head><meta charset="utf-8"><title>wasmtime / issue #6589 Preview2: No Easy Way To Set Custo... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236589.20Preview2.3A.20No.20Easy.20Way.20To.20Set.20Custo.2E.2E.2E.html">wasmtime / issue #6589 Preview2: No Easy Way To Set Custo...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="366820834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236589%20Preview2%3A%20No%20Easy%20Way%20To%20Set%20Custo.../near/366820834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236589.20Preview2.3A.20No.20Easy.20Way.20To.20Set.20Custo.2E.2E.2E.html#366820834">(Jun 16 2023 at 12:57)</a>:</h4>
<p>adamgfraser opened <a href="https://github.com/bytecodealliance/wasmtime/issues/6589">issue #6589</a>:</p>
<blockquote>
<p>Currently all monotonic clock times are based on the time since the clock was created. See <a href="https://github.com/bytecodealliance/wasmtime/blob/9a67597cae9199864ae17b4f3bf18a84863de2b0/crates/wasi/src/preview2/clocks/host.rs#L43">here</a>. It would be nice to have an easy way to set this initial time to some other arbitrary value.</p>
</blockquote>



<a name="367024656"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236589%20Preview2%3A%20No%20Easy%20Way%20To%20Set%20Custo.../near/367024656" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236589.20Preview2.3A.20No.20Easy.20Way.20To.20Set.20Custo.2E.2E.2E.html#367024656">(Jun 16 2023 at 23:58)</a>:</h4>
<p>jameysharp <a href="https://github.com/bytecodealliance/wasmtime/issues/6589#issuecomment-1595494484">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6589">issue #6589</a>:</p>
<blockquote>
<p>I'd love to hear more about the use case for this. At least in POSIX, the monotonic clock "represents the amount of time since an unspecified point in the past", so a consumer of such a clock is not allowed to care about when that base time was. Under what circumstance are you finding that it's important to be able to control this?</p>
</blockquote>



<a name="367036688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236589%20Preview2%3A%20No%20Easy%20Way%20To%20Set%20Custo.../near/367036688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236589.20Preview2.3A.20No.20Easy.20Way.20To.20Set.20Custo.2E.2E.2E.html#367036688">(Jun 17 2023 at 01:41)</a>:</h4>
<p>adamgfraser <a href="https://github.com/bytecodealliance/wasmtime/issues/6589#issuecomment-1595571015">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6589">issue #6589</a>:</p>
<blockquote>
<p>If we have different instances we would like the monotonic time to represent the length of time since the same unspecified point in time.</p>
</blockquote>



<a name="367980022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%236589%20Preview2%3A%20No%20Easy%20Way%20To%20Set%20Custo.../near/367980022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.236589.20Preview2.3A.20No.20Easy.20Way.20To.20Set.20Custo.2E.2E.2E.html#367980022">(Jun 20 2023 at 16:02)</a>:</h4>
<p>sunfishcode <a href="https://github.com/bytecodealliance/wasmtime/issues/6589#issuecomment-1599083967">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/6589">issue #6589</a>:</p>
<blockquote>
<p>Are your instances running inside the same store, or are they in different stores?</p>
<p>Also, are you relying on the clocks being in sync for correctness, or is it just for performance measurements or some other perhaps non-critical activity?</p>
<p>At a high level, this is an interesting question. If two independent components can assume that they're seeing the same monotonic clock without any explicit coordination, that's an implicit contract which breaks virtualization. In practical terms, this would prevent them from running on different machines connected via a network, without some kind of prearranged side channel to coordinate the clocks, for example.</p>
<p>One possible direction to explore here would be APIs for <a href="https://github.com/WebAssembly/wasi-clocks/issues/39">TAI time</a>, which would add monotonic clocks that have a physical-world correspondence, that instances could share just by virtue of occupying the same physical world. Strictly speaking, virtualization doesn't guarantee that two instances have the same physical-world correspondence, but we may be able to find some way to rationalize this.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>