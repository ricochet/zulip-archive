<html>
<head><meta charset="utf-8"><title>wasmtime / issue #4311 Implement support in the component... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234311.20Implement.20support.20in.20the.20component.2E.2E.2E.html">wasmtime / issue #4311 Implement support in the component...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="287263812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234311%20Implement%20support%20in%20the%20component.../near/287263812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234311.20Implement.20support.20in.20the.20component.2E.2E.2E.html#287263812">(Jun 23 2022 at 21:57)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/4311">issue #4311</a>:</p>
<blockquote>
<p>I'm going to split this work item from <a href="https://github.com/bytecodealliance/wasmtime/issues/4185">https://github.com/bytecodealliance/wasmtime/issues/4185</a> since I suspect it's going to be somewhat significant. The intention here is to track issues related to the memory64 proposal for WebAssembly and the component model. At the time of this writing neither of these proposals are "stable". Additionally the component model does not actually define what the canonical ABI is with respect to the memory64 proposal. Fully implementing this item will be a blend of "do the obvious thing" where possible such as making pointers 64-bits large, while at the same time also identifying question that don't have "obvious" answers such as "what's the maximum length of a string or list?"</p>
<p>Currently there are a lot of TODO items sprinkled throughout <code>typed.rs</code> which note various places that I suspect will need memory64 treatment. Fully implementing this issue, however, will likely require fuzzer integration because otherwise it'll be difficult to ensure that we've covered all cases.</p>
<p>Some examples of things that need updating are:</p>
<ul>
<li>Need to call <code>realloc</code> with a different signature</li>
<li>All reads/writes of pointers to linear memory need to have a 32/64 bit switch</li>
<li>Reading and writing pointers to <code>ValRaw</code> needs to be audited</li>
<li>Size and alignment calculations all need to be duplicated or have a parameter for 64 bit </li>
<li>Somehow should probably confirm that this doesn't vastly affect performance for 32-bit</li>
</ul>
<p>The last point here is an open question I don't know how best to answer. </p>
</blockquote>



<a name="287263813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234311%20Implement%20support%20in%20the%20component.../near/287263813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234311.20Implement.20support.20in.20the.20component.2E.2E.2E.html#287263813">(Jun 23 2022 at 21:57)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4311">issue #4311</a>:</p>
<blockquote>
<p>I'm going to split this work item from <a href="https://github.com/bytecodealliance/wasmtime/issues/4185">https://github.com/bytecodealliance/wasmtime/issues/4185</a> since I suspect it's going to be somewhat significant. The intention here is to track issues related to the memory64 proposal for WebAssembly and the component model. At the time of this writing neither of these proposals are "stable". Additionally the component model does not actually define what the canonical ABI is with respect to the memory64 proposal. Fully implementing this item will be a blend of "do the obvious thing" where possible such as making pointers 64-bits large, while at the same time also identifying question that don't have "obvious" answers such as "what's the maximum length of a string or list?"</p>
<p>Currently there are a lot of TODO items sprinkled throughout <code>typed.rs</code> which note various places that I suspect will need memory64 treatment. Fully implementing this issue, however, will likely require fuzzer integration because otherwise it'll be difficult to ensure that we've covered all cases.</p>
<p>Some examples of things that need updating are:</p>
<ul>
<li>Need to call <code>realloc</code> with a different signature</li>
<li>All reads/writes of pointers to linear memory need to have a 32/64 bit switch</li>
<li>Reading and writing pointers to <code>ValRaw</code> needs to be audited</li>
<li>Size and alignment calculations all need to be duplicated or have a parameter for 64 bit </li>
<li>Somehow should probably confirm that this doesn't vastly affect performance for 32-bit</li>
</ul>
<p>The last point here is an open question I don't know how best to answer. </p>
</blockquote>



<a name="287263814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234311%20Implement%20support%20in%20the%20component.../near/287263814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234311.20Implement.20support.20in.20the.20component.2E.2E.2E.html#287263814">(Jun 23 2022 at 21:57)</a>:</h4>
<p>alexcrichton labeled <a href="https://github.com/bytecodealliance/wasmtime/issues/4311">issue #4311</a>:</p>
<blockquote>
<p>I'm going to split this work item from <a href="https://github.com/bytecodealliance/wasmtime/issues/4185">https://github.com/bytecodealliance/wasmtime/issues/4185</a> since I suspect it's going to be somewhat significant. The intention here is to track issues related to the memory64 proposal for WebAssembly and the component model. At the time of this writing neither of these proposals are "stable". Additionally the component model does not actually define what the canonical ABI is with respect to the memory64 proposal. Fully implementing this item will be a blend of "do the obvious thing" where possible such as making pointers 64-bits large, while at the same time also identifying question that don't have "obvious" answers such as "what's the maximum length of a string or list?"</p>
<p>Currently there are a lot of TODO items sprinkled throughout <code>typed.rs</code> which note various places that I suspect will need memory64 treatment. Fully implementing this issue, however, will likely require fuzzer integration because otherwise it'll be difficult to ensure that we've covered all cases.</p>
<p>Some examples of things that need updating are:</p>
<ul>
<li>Need to call <code>realloc</code> with a different signature</li>
<li>All reads/writes of pointers to linear memory need to have a 32/64 bit switch</li>
<li>Reading and writing pointers to <code>ValRaw</code> needs to be audited</li>
<li>Size and alignment calculations all need to be duplicated or have a parameter for 64 bit </li>
<li>Somehow should probably confirm that this doesn't vastly affect performance for 32-bit</li>
</ul>
<p>The last point here is an open question I don't know how best to answer. </p>
</blockquote>



<a name="287263899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%234311%20Implement%20support%20in%20the%20component.../near/287263899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.234311.20Implement.20support.20in.20the.20component.2E.2E.2E.html#287263899">(Jun 23 2022 at 21:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/4311#issuecomment-1164920913">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/4311">issue #4311</a>:</p>
<blockquote>
<p>The upstream issue for the component model repository and the spec defining what to do with the memory64 proposal is <a href="https://github.com/WebAssembly/component-model/issues/22">https://github.com/WebAssembly/component-model/issues/22</a></p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>