<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2282 add new_with_user_state · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html">wasmtime / Issue #2282 add new_with_user_state</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="212687409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212687409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212687409">(Oct 08 2020 at 13:17)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-705561201">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="212750062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212750062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212750062">(Oct 08 2020 at 21:13)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-705826747">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>Thanks for the PR! Can you describe in a bit more detail how you see this being used though? As-is this seems like it's only useful in that you can get a destructor called when the instance itself is deallocated, but I'm not sure if that's the intention or if there's another use case you'd like to unlock. (I'm also not entirely sure how that ability would be used itself)</p>
</blockquote>



<a name="212763803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212763803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212763803">(Oct 08 2020 at 23:56)</a>:</h4>
<p>zhiqiangxu <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-705888431">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<blockquote>
<p>Thanks for the PR! Can you describe in a bit more detail how you see this being used though? As-is this seems like it's only useful in that you can get a destructor called when the instance itself is deallocated, but I'm not sure if that's the intention or if there's another use case you'd like to unlock. (I'm also not entirely sure how that ability would be used itself)</p>
</blockquote>
<p>This is useful if you want to add extra logic such as gas limit for blockchain, the limit can be stored in user state, and checked in FunctionEnvironment::before_translate_operator。I will try to submit code for customize that in another PR.</p>
</blockquote>



<a name="212763949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212763949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212763949">(Oct 08 2020 at 23:58)</a>:</h4>
<p>zhiqiangxu edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-705888431">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<blockquote>
<p>Thanks for the PR! Can you describe in a bit more detail how you see this being used though? As-is this seems like it's only useful in that you can get a destructor called when the instance itself is deallocated, but I'm not sure if that's the intention or if there's another use case you'd like to unlock. (I'm also not entirely sure how that ability would be used itself)</p>
</blockquote>
<p>This is useful if you want to add extra logic such as gas limit for blockchain, the limit can be stored in user state, and checked in FunctionEnvironment::before_translate_operator(extra built in function is required to do that).I will try to submit code for customize that in another PR.</p>
</blockquote>



<a name="212973734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212973734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212973734">(Oct 11 2020 at 17:26)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-706738412">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>Hm ok, although the <code>wasmtime</code> crate is not intended to be used where you're <em>also</em> using lots of cranelift internals. At that point it may be best to add a first-class feature to Wasmtime.</p>
</blockquote>



<a name="212974100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212974100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212974100">(Oct 11 2020 at 17:35)</a>:</h4>
<p>zhiqiangxu <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-706739585">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>I see. Gas limiting is a fundamental feature for blockchain,so such feature will be very handy for whoever implements vm layer based on wasmtime.</p>
</blockquote>



<a name="212976204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212976204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212976204">(Oct 11 2020 at 18:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-706747294">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>Oh sure yeah I don't mean to imply that we're not interested in this feature, just that this probably isn't the best way to implement it in Wasmtime.</p>
</blockquote>



<a name="212988735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/212988735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#212988735">(Oct 12 2020 at 00:41)</a>:</h4>
<p>zhiqiangxu <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-706797247">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>What way do you recommend ? I don’t mind if there is a better solution:)</p>
</blockquote>



<a name="213088182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232282%20add%20new_with_user_state/near/213088182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232282.20add.20new_with_user_state.html#213088182">(Oct 12 2020 at 21:27)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/2282#issuecomment-707354227">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2282">Issue #2282</a>:</p>
<blockquote>
<p>This sort of limiting execution seems like it would probably be implemented similar to how timeouts are implemented right now, which is to say that there's a configuration option in <code>Config</code> which allows you to tweak an object from <code>Store</code>. The configuration option would then get plumbed through to the codegen backend to affect the generated code.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>