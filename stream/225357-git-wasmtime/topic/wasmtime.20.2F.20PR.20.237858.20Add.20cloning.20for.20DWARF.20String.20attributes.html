<html>
<head><meta charset="utf-8"><title>wasmtime / PR #7858 Add cloning for DWARF String attributes · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html">wasmtime / PR #7858 Add cloning for DWARF String attributes</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="419343069"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419343069" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419343069">(Feb 01 2024 at 22:16)</a>:</h4>
<p>yowl opened <a href="https://github.com/bytecodealliance/wasmtime/pull/7858">PR #7858</a> from <code>yowl:dwarf-att-string</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This PR (my first here), adds cloning for DWARF <code>String</code> attributes, copying how <code>Block</code> was done.  This allows <code>wasmtime -D debug-info</code> to work with programs compiled with emscripten:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">emcc</span><span class="w"> </span><span class="mf">1.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="mf">1.</span><span class="n">wasm</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">gdwarf</span><span class="o">-</span><span class="mi">5</span><span class="w"> </span><span class="o">-</span><span class="n">sWASM_BIGINT</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="o">-</span><span class="n">sSTANDALONE_WASM</span><span class="o">=</span><span class="mi">1</span>
</code></pre></div>
<p>And consequently that they can be debugged in lldb:</p>
<p>![image](<a href="https://github.com/bytecodealliance/wasmtime/assets/2720041/e149ab81-d9ff-4c50-9b75-8f93e239703c">https://github.com/bytecodealliance/wasmtime/assets/2720041/e149ab81-d9ff-4c50-9b75-8f93e239703c</a>)</p>
</blockquote>



<a name="419343073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419343073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419343073">(Feb 01 2024 at 22:16)</a>:</h4>
<p><strong>yowl</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7858">PR #7858</a>.</p>



<a name="419343074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419343074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419343074">(Feb 01 2024 at 22:16)</a>:</h4>
<p><strong>yowl</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/7858">PR #7858</a>.</p>



<a name="419344325"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419344325" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419344325">(Feb 01 2024 at 22:25)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#pullrequestreview-1857785151">PR review</a>.</p>



<a name="419344327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419344327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419344327">(Feb 01 2024 at 22:25)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#discussion_r1475230964">PR review comment</a>:</p>
<blockquote>
<p>I think you can use <code>into_owned()</code> instead of <code>to_vec()</code>.</p>
</blockquote>



<a name="419347734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419347734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419347734">(Feb 01 2024 at 22:53)</a>:</h4>
<p>yowl created <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#discussion_r1475273704">PR review comment</a>:</p>
<blockquote>
<p>Thanks, shall  I change <code>AttributeValue::Block(d) =&gt; write::AttributeValue::Block(d.to_slice()?.to_vec()),</code> as well?</p>
</blockquote>



<a name="419347735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419347735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419347735">(Feb 01 2024 at 22:53)</a>:</h4>
<p>yowl submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#pullrequestreview-1857855652">PR review</a>.</p>



<a name="419354604"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419354604" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419354604">(Feb 01 2024 at 23:46)</a>:</h4>
<p>yowl updated <a href="https://github.com/bytecodealliance/wasmtime/pull/7858">PR #7858</a>.</p>



<a name="419354735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419354735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419354735">(Feb 01 2024 at 23:47)</a>:</h4>
<p>yowl submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#pullrequestreview-1857938417">PR review</a>.</p>



<a name="419354737"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419354737" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419354737">(Feb 01 2024 at 23:47)</a>:</h4>
<p>yowl created <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#discussion_r1475328630">PR review comment</a>:</p>
<blockquote>
<p>I went ahead and changed <code>Block</code>, I have limited experience of <code>Cow</code> and slicing, but it seemed logical being as how similar <code>Block</code> is to <code>String</code></p>
</blockquote>



<a name="419880844"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419880844" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419880844">(Feb 05 2024 at 16:31)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/7858#pullrequestreview-1863248300">PR review</a>:</p>
<blockquote>
<p>I won't really pretend to know what's going on here but I don't think many of us know much about the native dwarf transform this is doing. That being said it seems not obviously wrong at least and the same as everything else in this area.</p>
<p>Ideally we'd have tests for changes like this but we don't have many preexisting tests here yet so I think it's ok to land this as-is and we can look to improve testing later.</p>
</blockquote>



<a name="419887551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%237858%20Add%20cloning%20for%20DWARF%20String%20attributes/near/419887551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.237858.20Add.20cloning.20for.20DWARF.20String.20attributes.html#419887551">(Feb 05 2024 at 17:03)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/7858">PR #7858</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>