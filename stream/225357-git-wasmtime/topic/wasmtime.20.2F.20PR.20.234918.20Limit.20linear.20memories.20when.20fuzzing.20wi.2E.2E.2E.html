<html>
<head><meta charset="utf-8"><title>wasmtime / PR #4918 Limit linear memories when fuzzing wi... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html">wasmtime / PR #4918 Limit linear memories when fuzzing wi...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="299206006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299206006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299206006">(Sep 16 2022 at 17:11)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/4918">PR #4918</a> from <code>reduce-pooling-size-when-fuzzing</code> to <code>main</code>:</p>
<blockquote>
<p>This commit limits the maximum number of linear memories when the pooling allocator is used to ensure that the virtual memory mapping for the pooling allocator itself can succeed. Currently there are a number of crashes in the differential fuzzer where the pooling allocator can't allocate its mapping because the maximum specified number of linear memories times the number of instances exceeds the address space presumably.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="299206080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299206080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299206080">(Sep 16 2022 at 17:12)</a>:</h4>
<p><strong>alexcrichton</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/4918">PR #4918</a> as ready for review.</p>



<a name="299209785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299209785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299209785">(Sep 16 2022 at 17:34)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111009587">PR review</a>.</p>



<a name="299209788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299209788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299209788">(Sep 16 2022 at 17:34)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111009587">PR review</a>.</p>



<a name="299209789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299209789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299209789">(Sep 16 2022 at 17:34)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#discussion_r973244991">PR review comment</a>:</p>
<blockquote>
<p>Shouldn't <code>min</code> be 0 or 1?</p>
</blockquote>



<a name="299214166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299214166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299214166">(Sep 16 2022 at 18:00)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111046721">PR review</a>.</p>



<a name="299214171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299214171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299214171">(Sep 16 2022 at 18:00)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#discussion_r973271274">PR review comment</a>:</p>
<blockquote>
<p>The maximum/minimum being bigger than 1 indicates the multi-memory proposal is active, if that's your question? I wanted to leave that part of fuzzing active ideally.</p>
</blockquote>



<a name="299215323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299215323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299215323">(Sep 16 2022 at 18:07)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#discussion_r973275794">PR review comment</a>:</p>
<blockquote>
<p>Yeah, but I would have thought we would have also wanted to generate modules that may between 0 and 10 memories when we use the pooling allocator just to check that things don't break if, e.g., no memories are defined?</p>
</blockquote>



<a name="299215324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299215324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299215324">(Sep 16 2022 at 18:07)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111053723">PR review</a>.</p>



<a name="299215799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299215799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299215799">(Sep 16 2022 at 18:10)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#discussion_r973277916">PR review comment</a>:</p>
<blockquote>
<p>This style of using <code>min()</code> always confuses me, and I think it's confusing you too. It's setting <code>min_memories</code> to whichever is smaller of 10 or the randomly-chosen value, which means that it's at _most_ 10.</p>
</blockquote>



<a name="299215800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299215800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299215800">(Sep 16 2022 at 18:10)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111056933">PR review</a>.</p>



<a name="299218053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299218053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299218053">(Sep 16 2022 at 18:23)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#discussion_r973286811">PR review comment</a>:</p>
<blockquote>
<p>Ah! Ok, sorry, didn't see it right. There's a previously generated random value in <code>min_memories</code> that we are trying to constrain. Please ignore me!</p>
</blockquote>



<a name="299218054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299218054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299218054">(Sep 16 2022 at 18:23)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111069580">PR review</a>.</p>



<a name="299218078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299218078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299218078">(Sep 16 2022 at 18:23)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/4918#pullrequestreview-1111069807">PR review</a>.</p>



<a name="299222434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%234918%20Limit%20linear%20memories%20when%20fuzzing%20wi.../near/299222434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.234918.20Limit.20linear.20memories.20when.20fuzzing.20wi.2E.2E.2E.html#299222434">(Sep 16 2022 at 18:50)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/4918">PR #4918</a>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>