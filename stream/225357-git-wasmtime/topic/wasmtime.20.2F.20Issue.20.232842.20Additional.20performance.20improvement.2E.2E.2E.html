<html>
<head><meta charset="utf-8"><title>wasmtime / Issue #2842 Additional performance improvement... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html">wasmtime / Issue #2842 Additional performance improvement...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="234594196"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234594196" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234594196">(Apr 14 2021 at 23:46)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-819920122">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>@alexcrichton Hopefully this didn't step on the work you were in the middle of for the feedback on #2820 (<span aria-label="fingers crossed" class="emoji emoji-1f91e" role="img" title="fingers crossed">:fingers_crossed:</span> that you hadn't started work on it before going on vacation).  As I needed to refactor <code>StoreFrameInfo</code> into a more general "module registry" for the signature registry changes anyway, it was pretty simple to remove <code>StackMapRegistry</code> entirely at that point.</p>
</blockquote>



<a name="234594273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234594273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234594273">(Apr 14 2021 at 23:46)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-819920122">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>@alexcrichton Hopefully this didn't step on the work you were in the middle of for the <a href="https://github.com/bytecodealliance/wasmtime/pull/2820#discussion_r610105761">feedback on #2820</a> (<span aria-label="fingers crossed" class="emoji emoji-1f91e" role="img" title="fingers crossed">:fingers_crossed:</span> that you hadn't started work on it before going on vacation).  As I needed to refactor <code>StoreFrameInfo</code> into a more general "module registry" for the signature registry changes anyway, it was pretty simple to remove <code>StackMapRegistry</code> entirely at that point.</p>
</blockquote>



<a name="234596922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234596922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234596922">(Apr 15 2021 at 00:15)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-819930192">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @peterhuene</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wasmtime:api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>peterhuene: wasmtime:api</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="234896889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234896889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234896889">(Apr 16 2021 at 18:02)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821369489">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>That push of the latest commit broke the build in a really strange way (as if the CI wasn't building all the changes) <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span>.</p>
</blockquote>



<a name="234897618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234897618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234897618">(Apr 16 2021 at 18:07)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821369489">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>That push of the latest commit broke the build in a really strange way (as if the CI wasn't building all the changes) <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span>.</p>
<p>Oh, upstream just added a new call to initialize trap handling, noticed it on a rebase.  Will fix.</p>
</blockquote>



<a name="234897946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234897946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234897946">(Apr 16 2021 at 18:09)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821369489">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>That push of the latest commit broke the build in a really strange way (as if the CI wasn't building all the changes) <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span>.</p>
<p>Oh, upstream just added a new call to initialize trap handling, noticed it on a rebase (weird that GitHub is reporting no merge conflicts though).  Will fix.</p>
</blockquote>



<a name="234898023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234898023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234898023">(Apr 16 2021 at 18:10)</a>:</h4>
<p>peterhuene edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821369489">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>That push of the latest commit broke the build in a really strange way (as if the CI wasn't building all the changes) <span aria-label="oh no" class="emoji emoji-1f615" role="img" title="oh no">:oh_no:</span>.</p>
<p>Oh, upstream just added a new call to initialize trap handling, noticed it on a rebase (weird that GitHub is reporting no merge conflicts though as I had one on the rebase).  Will fix.</p>
</blockquote>



<a name="234899315"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234899315" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234899315">(Apr 16 2021 at 18:19)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821403816">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>Wouldn't the two-stage lookup suffer the same problem as we're borrowing from an interior reference of a <code>RefCell</code> _optionally_, regardless of returning the module to look up the stack map for or the stack map itself?</p>
</blockquote>



<a name="234900076"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234900076" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234900076">(Apr 16 2021 at 18:24)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821414954">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>Oh I guess if it's <code>Arc</code> that's fine (no more borrow); I see how to implement this, so I'll make that change.</p>
</blockquote>



<a name="234908569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20Issue%20%232842%20Additional%20performance%20improvement.../near/234908569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20Issue.20.232842.20Additional.20performance.20improvement.2E.2E.2E.html#234908569">(Apr 16 2021 at 19:32)</a>:</h4>
<p>peterhuene <a href="https://github.com/bytecodealliance/wasmtime/pull/2842#issuecomment-821516750">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/2842">Issue #2842</a>:</p>
<blockquote>
<p>@alexcrichton all feedback should now be addressed.</p>
</blockquote>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>