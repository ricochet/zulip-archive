<html>
<head><meta charset="utf-8"><title>wasmtime / PR #5482 Add a cranelift-compile fuzz target · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html">wasmtime / PR #5482 Add a cranelift-compile fuzz target</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="317017581"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317017581" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317017581">(Dec 20 2022 at 18:56)</a>:</h4>
<p>elliottt opened <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>:</p>
<blockquote>
<p>Add a cranelift-compile fuzz target that generates test cases to try to compile for all supported architectures.</p>
<p>&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="317020455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317020455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317020455">(Dec 20 2022 at 19:11)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="317020853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317020853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317020853">(Dec 20 2022 at 19:14)</a>:</h4>
<p><strong>elliottt</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> as ready for review.</p>



<a name="317020894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317020894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317020894">(Dec 20 2022 at 19:14)</a>:</h4>
<p><strong>elliottt</strong> requested <a href="https://github.com/jameysharp">jameysharp</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a>.</p>



<a name="317022211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317022211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317022211">(Dec 20 2022 at 19:20)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="317024241"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317024241" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317024241">(Dec 20 2022 at 19:30)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225017862">PR review</a>.</p>



<a name="317024242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317024242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317024242">(Dec 20 2022 at 19:30)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053669210">PR review comment</a>:</p>
<blockquote>
<p>I can't comment on the exact line (61), but can we print only the correct <code>target {}</code> line here?</p>
</blockquote>



<a name="317024243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317024243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317024243">(Dec 20 2022 at 19:30)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225017862">PR review</a>.</p>



<a name="317024244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317024244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317024244">(Dec 20 2022 at 19:30)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053671800">PR review comment</a>:</p>
<blockquote>
<p>I think we might be able to reuse this for the icache fuzzer as well. Feel free to ignore it if it's too much work to change that.</p>
</blockquote>



<a name="317027295"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317027295" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317027295">(Dec 20 2022 at 19:46)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225017862">PR review</a>.</p>



<a name="317029962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317029962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317029962">(Dec 20 2022 at 20:02)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053700073">PR review comment</a>:</p>
<blockquote>
<p>That's a great point! I'd be happy to pull this type back into cranelift-fuzzgen so that we can use it in both targets <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> <br>
</p>
</blockquote>



<a name="317029963"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317029963" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317029963">(Dec 20 2022 at 20:02)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225063811">PR review</a>.</p>



<a name="317030742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317030742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317030742">(Dec 20 2022 at 20:07)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225070615">PR review</a>.</p>



<a name="317030743"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317030743" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317030743">(Dec 20 2022 at 20:07)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053704479">PR review comment</a>:</p>
<blockquote>
<p>Yep! I'll duplicate the match in <a href="http://cranelift-compile.rs">cranelift-compile.rs</a> here.</p>
</blockquote>



<a name="317032614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317032614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317032614">(Dec 20 2022 at 20:19)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="317032866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317032866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317032866">(Dec 20 2022 at 20:21)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053714542">PR review comment</a>:</p>
<blockquote>
<p>@afonso360 is this what you had in mind?</p>
</blockquote>



<a name="317032868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317032868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317032868">(Dec 20 2022 at 20:21)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225085623">PR review</a>.</p>



<a name="317033789"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317033789" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317033789">(Dec 20 2022 at 20:26)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="317033902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317033902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317033902">(Dec 20 2022 at 20:27)</a>:</h4>
<p>elliottt submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225091571">PR review</a>.</p>



<a name="317033903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317033903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317033903">(Dec 20 2022 at 20:27)</a>:</h4>
<p>elliottt created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053718626">PR review comment</a>:</p>
<blockquote>
<p>I've added a new struct <code>FunctionWithIsa</code> in cranelift-fuzzgen, and will rework cranelift-icache in a separate PR once this one has landed.</p>
</blockquote>



<a name="317035214"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317035214" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317035214">(Dec 20 2022 at 20:35)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225102944">PR review</a>.</p>



<a name="317035215"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317035215" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317035215">(Dec 20 2022 at 20:35)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053726374">PR review comment</a>:</p>
<blockquote>
<p>Yeah that looks good!</p>
<p>The reason for that is mostly that when we generate a function it is only guaranteed to compile for a particular architecture (due to unimplemented instructions), and having all of them there is slightly misleading.</p>
</blockquote>



<a name="317038669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317038669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317038669">(Dec 20 2022 at 20:57)</a>:</h4>
<p>afonso360 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053726374">PR review comment</a>.</p>



<a name="317040695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317040695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317040695">(Dec 20 2022 at 21:10)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="317071052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317071052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317071052">(Dec 21 2022 at 01:40)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225301077">PR review</a>.</p>



<a name="317071053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317071053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317071053">(Dec 21 2022 at 01:40)</a>:</h4>
<p>jameysharp submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225301077">PR review</a>.</p>



<a name="317071054"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317071054" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317071054">(Dec 21 2022 at 01:40)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053864019">PR review comment</a>:</p>
<blockquote>
<p>Wishlist: keep this list in <code>cranelift/codegen/src/isa/mod.rs</code> instead, and guard each entry with the same <code>#[cfg]</code> attributes as <code>lookup</code>/<code>isa_builder!</code>.</p>
</blockquote>



<a name="317071055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317071055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317071055">(Dec 21 2022 at 01:40)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053869403">PR review comment</a>:</p>
<blockquote>
<p>I believe this alternative is guaranteed to work for all future targets, by relying on <code>target_lexicon</code>'s own mapping between its enum values and strings:</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        writeln!(f, "target {}", self.isa.triple().architecture)?;
</code></pre></div>
<p>A wishlist item: share most of the code in the <code>Debug</code> implementations of <code>FunctionWithIsa</code> and <code>TestCase</code>. Both print the same flags, target, and function. They just have different preambles (I believe you can move "test compile" before the flags), and <code>TestCase</code> also prints sample outputs at the end, but the middles are the same.</p>
</blockquote>



<a name="317071056"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317071056" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317071056">(Dec 21 2022 at 01:40)</a>:</h4>
<p>jameysharp created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1053885141">PR review comment</a>:</p>
<blockquote>
<p><code>run_func_passes</code> builds a <code>TargetIsa</code> which probably doesn't match <code>self.isa</code>. I think the passes it runs probably don't actually look at anything except the target-independent flags, so that's probably fine, but I'm not sure. I think I've been confused about this before and forgotten the answer. Maybe @afonso360 knows?</p>
</blockquote>



<a name="317122100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317122100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317122100">(Dec 21 2022 at 10:09)</a>:</h4>
<p>afonso360 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#pullrequestreview-1225811437">PR review</a>.</p>



<a name="317122102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/317122102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#317122102">(Dec 21 2022 at 10:09)</a>:</h4>
<p>afonso360 created <a href="https://github.com/bytecodealliance/wasmtime/pull/5482#discussion_r1054207815">PR review comment</a>:</p>
<blockquote>
<p>Yeah it does. We only need to build it because <code>canonicalize_nans</code> requires it, although it doesn't use it besides the <code>enable_verifier</code> flag.</p>
<p>It would remove quite a bit of code to not have to build it again, but it would be nice if we could avoid verifying it there, since I benchmarked it once and it ended up showing on the profiling. (We still run the verifier while compiling)</p>
<p>The other passes don't use the target ISA.</p>
</blockquote>



<a name="319310270"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319310270" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319310270">(Jan 04 2023 at 01:43)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319310289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319310289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319310289">(Jan 04 2023 at 01:43)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319478546"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319478546" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319478546">(Jan 04 2023 at 21:44)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319515956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319515956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319515956">(Jan 05 2023 at 05:01)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319516301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319516301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319516301">(Jan 05 2023 at 05:06)</a>:</h4>
<p>elliottt edited <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>:</p>
<blockquote>
<p>Fuzz additional targets in the cranelift-icache target. The list of targets fuzzed is controlled by the targets enabled in <code>fuzz/Cargo.toml</code>.</p>
<p>This PR also reworks how instruction disabling is done in function generator, moving the deny-list to a function to make the decision at runtime instead of compile time.<br>
&lt;!--</p>
<p>Please ensure that the following steps are all taken care of before submitting<br>
the PR.</p>
<ul>
<li>
<p>[ ] This has been discussed in issue #..., or if not, please tell us why<br>
  here.</p>
</li>
<li>
<p>[ ] A short description of what this does, why it is needed; if the<br>
  description becomes long, the matter should probably be discussed in an issue<br>
  first.</p>
</li>
<li>
<p>[ ] This PR contains test cases, if meaningful.</p>
</li>
<li>[ ] A reviewer from the core maintainer team has been assigned for this PR.<br>
  If you don't know who could review this, please indicate so. The list of<br>
  suggested reviewers on the right can help you.</li>
</ul>
<p>Please ensure all communication adheres to the <a href="https://github.com/bytecodealliance/wasmtime/blob/master/CODE_OF_CONDUCT.md">code of
conduct</a>.<br>
--&gt;<br>
</p>
</blockquote>



<a name="319516456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319516456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319516456">(Jan 05 2023 at 05:08)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319517545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319517545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319517545">(Jan 05 2023 at 05:28)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<a name="319517832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%235482%20Add%20a%20cranelift-compile%20fuzz%20target/near/319517832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.235482.20Add.20a.20cranelift-compile.20fuzz.20target.html#319517832">(Jan 05 2023 at 05:33)</a>:</h4>
<p>elliottt updated <a href="https://github.com/bytecodealliance/wasmtime/pull/5482">PR #5482</a> from <code>trevor/compile-fuzz-all-targets</code> to <code>main</code>.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>