<html>
<head><meta charset="utf-8"><title>sockets on node.js 路 jco 路 Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/index.html">jco</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html">sockets on node.js</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="397192973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397192973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397192973">(Oct 17 2023 at 22:55)</a>:</h4>
<p>Yay! I managed to create a new topic!</p>



<a name="397193090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397193090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397193090">(Oct 17 2023 at 22:56)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span>  please let me know If I am heading in the right direction: <a href="https://github.com/bytecodealliance/jco/pull/214">https://github.com/bytecodealliance/jco/pull/214</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/ac21b9c4ff06e9644671dce054b285046ae85a12\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f356565363136346364343131356132646530616161626130633865636465663934343163636330346633666534613663376265356339326366303438633565312f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f323134)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214" title="WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.</div></div></div>



<a name="397193895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397193895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397193895">(Oct 17 2023 at 23:05)</a>:</h4>
<p>@Wassim Chegham nice start that's definitely the right track!</p>



<a name="397263026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397263026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397263026">(Oct 18 2023 at 08:50)</a>:</h4>
<p>awesome! Thanks <span class="user-mention" data-user-id="553681">@Guy Bedford</span></p>



<a name="397263072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397263072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397263072">(Oct 18 2023 at 08:51)</a>:</h4>
<p>bless you people</p>



<a name="397263348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397263348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397263348">(Oct 18 2023 at 08:52)</a>:</h4>
<p>Q: are we supposed to write our own implementations for wasi-sockets, or use node:net, node:dgram, etc?</p>



<a name="397263390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397263390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397263390">(Oct 18 2023 at 08:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="268586">Ralph</span> <a href="#narrow/stream/409526-jco/topic/sockets.20on.20node.2Ejs/near/397263072">said</a>:</p>
<blockquote>
<p>bless you people</p>
</blockquote>
<p>Hi <span class="user-mention" data-user-id="268586">@Ralph</span> <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="397288667"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397288667" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397288667">(Oct 18 2023 at 11:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="653616">Wassim Chegham</span> <a href="#narrow/stream/409526-jco/topic/sockets.20on.20node.2Ejs/near/397263348">said</a>:</p>
<blockquote>
<p>Q: are we supposed to write our own implementations for wasi-sockets, or use node:net, node:dgram, etc?</p>
</blockquote>
<p>We should be reusing <code>node:net</code>, <code>node:dgram</code>, etc. for this. The way we're implementing this is by "virtualizing" the Wasi Preview 2 syscalls, backing them with Node's built-ins.</p>



<a name="397289018"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397289018" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397289018">(Oct 18 2023 at 11:15)</a>:</h4>
<p>Eventually the plan is to move these bindings from being a virtualized JS layer to the <a href="https://github.com/nodejs/uvwasi">uvwasi</a> project directly. But that will require some work to implement, upstream, and validate. It's all C++, and we'd need to not only land this in <code>uvwasi</code> but also upstream it to Node.js proper. So we're essentially punting on that and thinking of it as just an optimization.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/nodejs/uvwasi" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/4c055ec2bfe6754391a0f9b075cadd1d1cafcb1c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f333034333430323766313730336632346532316131363534653561653033366561316466303564653437326534313837383830623439326636636264636166662f6e6f64656a732f757677617369)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/nodejs/uvwasi" title="GitHub - nodejs/uvwasi: WASI syscall API built atop libuv">GitHub - nodejs/uvwasi: WASI syscall API built atop libuv</a></div><div class="message_embed_description">WASI syscall API built atop libuv. Contribute to nodejs/uvwasi development by creating an account on GitHub.</div></div></div>



<a name="397289357"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397289357" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yoshua Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397289357">(Oct 18 2023 at 11:17)</a>:</h4>
<p><span class="user-mention" data-user-id="653616">@Wassim Chegham</span> oh by the way, the <code>sockets</code> API is one of the biggest surface areas of Wasi (52 methods). Doing it all in a single PR might be a lot, so please feel free to like file multiple PRs. That might make it easier to validate, review, test, etc.</p>



<a name="397316976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397316976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397316976">(Oct 18 2023 at 13:46)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="344849">@Yoshua Wuyts</span>  that was my understanding from what <span class="user-mention" data-user-id="553681">@Guy Bedford</span>  said on the call. I was double-checking ^_^</p>



<a name="397350726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397350726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397350726">(Oct 18 2023 at 16:45)</a>:</h4>
<p>yeah, that's exactly the approach - using the Node.js sync but streaming APIs where appropriate. When we have the asyncify work we will be able to call promise-based builtins, but for now perhaps we can see how far we can get while that work is still outstanding.</p>



<a name="397353419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397353419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397353419">(Oct 18 2023 at 17:03)</a>:</h4>
<p>the other stopgap we have for not having asyncify support in Node.js is the approach we use here to syncify async APIs - <a href="https://github.com/bytecodealliance/jco/blob/main/packages/preview2-shim/lib/http/wasi-http.js#L20">https://github.com/bytecodealliance/jco/blob/main/packages/preview2-shim/lib/http/wasi-http.js#L20</a></p>



<a name="397353487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397353487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397353487">(Oct 18 2023 at 17:04)</a>:</h4>
<p>the asyncify work will be a little while out so we do just have to work around that for now</p>



<a name="397453867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397453867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397453867">(Oct 19 2023 at 08:15)</a>:</h4>
<p>is there a reason why IP addresses are typed as tuples?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">ipv4</span><span class="o">-</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="kt">u8</span><span class="o">&gt;</span>
<span class="k">type</span> <span class="nc">ipv6</span><span class="o">-</span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w"> </span><span class="kt">u16</span><span class="o">&gt;</span>
</code></pre></div>
<p>which translate to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">export</span><span class="w"> </span><span class="k">type</span> <span class="nc">Ipv4Address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">];</span>
<span class="n">export</span><span class="w"> </span><span class="k">type</span> <span class="nc">Ipv6Address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">];</span>
</code></pre></div>



<a name="397454381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397454381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397454381">(Oct 19 2023 at 08:18)</a>:</h4>
<p>follwing that interface, a localAdress object would look like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">        </span><span class="k">const</span><span class="w"> </span><span class="n">localAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">tag</span>: <span class="nc">sockets</span><span class="p">.</span><span class="n">network</span><span class="p">.</span><span class="n">IpAddressFamily</span><span class="p">.</span><span class="n">ipv4</span><span class="p">,</span>
<span class="w">          </span><span class="n">val</span>: <span class="p">{</span>
<span class="w">            </span><span class="n">address</span>: <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span>
<span class="w">            </span><span class="n">port</span>: <span class="mi">0</span><span class="p">,</span>
<span class="w">          </span><span class="p">},</span>
<span class="w">        </span><span class="p">};</span>
</code></pre></div>



<a name="397454528"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397454528" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397454528">(Oct 19 2023 at 08:19)</a>:</h4>
<p>is that what we are expecting?</p>



<a name="397540886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397540886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397540886">(Oct 19 2023 at 16:35)</a>:</h4>
<p>Yes in JS that's the representation of a tuple</p>



<a name="397584962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/397584962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#397584962">(Oct 19 2023 at 22:17)</a>:</h4>
<p>Great! thank you!</p>



<a name="398248047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398248047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398248047">(Oct 24 2023 at 09:34)</a>:</h4>
<p>I am trying to write integration tests for wasi-sockets (nodejs impl) inside of <code>./test/preview2.js</code>, but it looks like I am missing the <code>obj/</code> folder. I assumed this folder gets generate after building the projet. I tried to run <code>npm run build</code> from the root and I am getting these errors. Did I miss something?</p>
<p><a href="/user_uploads/15107/DmkTiiX_1FU0Odd9xQey-30w/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/DmkTiiX_1FU0Odd9xQey-30w/image.png" title="image.png"><img src="/user_uploads/15107/DmkTiiX_1FU0Odd9xQey-30w/image.png"></a></div>



<a name="398331747"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398331747" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398331747">(Oct 24 2023 at 17:24)</a>:</h4>
<p><span class="user-mention" data-user-id="653616">@Wassim Chegham</span> make sure you are on the latest Rust toolchain - <code>rustup update</code> and then with <code>wasm32-unknown-unknown</code> and <code>wasm32-wasi</code> targets installed. <code>npm install &amp;&amp; npm run build</code> should then be all you need.</p>



<a name="398443720"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398443720" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398443720">(Oct 25 2023 at 09:13)</a>:</h4>
<p>good catch <span class="user-mention" data-user-id="553681">@Guy Bedford</span> I was missing the wasm32-wasi target う now it's building. Thanks</p>



<a name="398526188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398526188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398526188">(Oct 25 2023 at 16:49)</a>:</h4>
<p>I've updated <a href="https://github.com/bytecodealliance/jco/pull/214">https://github.com/bytecodealliance/jco/pull/214</a> to match the latest WIT updates</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/5249d21f7133358700084e22325061d7bd92062c\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f316131613561313262353232393437666430666366323733663738363562333163366434326435613535633530353030633662313336373538613432366636642f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f323134)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214" title="WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.
Closes #154
Done

 instance-network.instance-network
 ip-name-lookup.resolve-addresses
 ip-name-lookup.resolve-next-address
 ip-name-lookup...</div></div></div>



<a name="398526547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398526547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398526547">(Oct 25 2023 at 16:51)</a>:</h4>
<p>Also, <span class="user-mention" data-user-id="553681">@Guy Bedford</span>  I've changed the impl to use node.js's internal <em>libuv</em> bindings (tcp_wrap). That was the only way for us to be able to implement the specified WIT ressources.</p>



<a name="398526697"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398526697" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398526697">(Oct 25 2023 at 16:52)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/jco/pull/214/files#diff-73e7565cdc5599fda2d180adcdb08293c5116cfb26eef129343727c94c0f4052R15-R20">https://github.com/bytecodealliance/jco/pull/214/files#diff-73e7565cdc5599fda2d180adcdb08293c5116cfb26eef129343727c94c0f4052R15-R20</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214/files#diff-73e7565cdc5599fda2d180adcdb08293c5116cfb26eef129343727c94c0f4052R15-R20" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0cca35bad3d333b25f2d1eccc5b4de1854e00a72\/68747470733a2f2f617661746172732e67697468756275736572636f6e74656e742e636f6d2f752f313639393335373f733d34303026763d34)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214/files#diff-73e7565cdc5599fda2d180adcdb08293c5116cfb26eef129343727c94c0f4052R15-R20" title="WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.
Closes #154
Done

 instance-network.instance-network
 ip-name-lookup.resolve-addresses
 ip-name-lookup.resolve-next-address
 ip-name-lookup...</div></div></div>



<a name="398527166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527166">(Oct 25 2023 at 16:55)</a>:</h4>
<p>nice, I guess that will mean we don't support other JS runtimes like Deno or Bun, but we can investigate deno and Bun-specific implementations instead I think then?</p>



<a name="398527172"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527172" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527172">(Oct 25 2023 at 16:55)</a>:</h4>
<p>But (yes there is a but), I could not figure out what should be the impl of:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">accept</span>: <span class="nc">func</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">tcp</span><span class="o">-</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="n">input</span><span class="o">-</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">output</span><span class="o">-</span><span class="n">stream</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">receive</span><span class="o">-</span><span class="n">buffer</span><span class="o">-</span><span class="n">size</span>: <span class="nc">func</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">set</span><span class="o">-</span><span class="n">receive</span><span class="o">-</span><span class="n">buffer</span><span class="o">-</span><span class="n">size</span>: <span class="nc">func</span><span class="p">(</span><span class="n">value</span>: <span class="kt">u64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">send</span><span class="o">-</span><span class="n">buffer</span><span class="o">-</span><span class="n">size</span>: <span class="nc">func</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="kt">u64</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">set</span><span class="o">-</span><span class="n">send</span><span class="o">-</span><span class="n">buffer</span><span class="o">-</span><span class="n">size</span>: <span class="nc">func</span><span class="p">(</span><span class="n">value</span>: <span class="kt">u64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">unicast</span><span class="o">-</span><span class="n">hop</span><span class="o">-</span><span class="n">limit</span>: <span class="nc">func</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
<span class="n">set</span><span class="o">-</span><span class="n">unicast</span><span class="o">-</span><span class="n">hop</span><span class="o">-</span><span class="n">limit</span>: <span class="nc">func</span><span class="p">(</span><span class="n">value</span>: <span class="kt">u8</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">result</span><span class="o">&lt;</span><span class="n">_</span><span class="p">,</span><span class="w"> </span><span class="n">error</span><span class="o">-</span><span class="n">code</span><span class="o">&gt;</span><span class="p">;</span>
</code></pre></div>



<a name="398527180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527180">(Oct 25 2023 at 16:55)</a>:</h4>
<p>it seems to me like the correct approach</p>



<a name="398527300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527300">(Oct 25 2023 at 16:56)</a>:</h4>
<p>there have been a number of changes to the sockets API</p>



<a name="398527329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527329">(Oct 25 2023 at 16:56)</a>:</h4>
<p>it can be worth keeping an eye on <a href="https://github.com/bytecodealliance/wasmtime/pulls?q=is%3Apr+sockets+is%3Aclosed">https://github.com/bytecodealliance/wasmtime/pulls?q=is%3Apr+sockets+is%3Aclosed</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pulls?q=is%3Apr+sockets+is%3Aclosed" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/6d514fc8c0c528462a708309bcb8b443fadf974d\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f333962663735643162313061363135376332666563653631636439323831356334623265353937316439643566656239663338623237646633376466666532652f62797465636f6465616c6c69616e63652f7761736d74696d65)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pulls?q=is%3Apr+sockets+is%3Aclosed" title="Pull requests 路 bytecodealliance/wasmtime">Pull requests 路 bytecodealliance/wasmtime</a></div><div class="message_embed_description">A fast and secure runtime for WebAssembly. Contribute to bytecodealliance/wasmtime development by creating an account on GitHub.</div></div></div>



<a name="398527343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527343">(Oct 25 2023 at 16:56)</a>:</h4>
<p>yes, I went through them and updated the impl</p>



<a name="398527363"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527363" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527363">(Oct 25 2023 at 16:56)</a>:</h4>
<p>to see the history and upcoming changes as well</p>



<a name="398527444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527444">(Oct 25 2023 at 16:57)</a>:</h4>
<p>those seem like network configurations</p>



<a name="398527445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527445">(Oct 25 2023 at 16:57)</a>:</h4>
<p>Will do</p>



<a name="398527471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527471">(Oct 25 2023 at 16:57)</a>:</h4>
<p>perhaps if we don't have those hooks in Node.js we do just need noops</p>



<a name="398527516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527516">(Oct 25 2023 at 16:57)</a>:</h4>
<p>it's looking really great though, congrats</p>



<a name="398527562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527562">(Oct 25 2023 at 16:57)</a>:</h4>
<p>the resources update is the current big one I'm working on for HTTP</p>



<a name="398527585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527585">(Oct 25 2023 at 16:58)</a>:</h4>
<p>I guess we will need similar updates on sockets</p>



<a name="398527626"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527626" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527626">(Oct 25 2023 at 16:58)</a>:</h4>
<p>perhaps have a look at my next HTTP PR I'm hoping to finish up today or tomorrow</p>



<a name="398527631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527631">(Oct 25 2023 at 16:58)</a>:</h4>
<p>Thanks! </p>
<p><span class="user-mention silent" data-user-id="553681">Guy Bedford</span> <a href="#narrow/stream/409526-jco/topic/sockets.20on.20node.2Ejs/near/398527516">said</a>:</p>
<blockquote>
<p>it's looking really great though, congrats</p>
</blockquote>
<p>It's missing reads and writes thouhg <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="398527669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527669">(Oct 25 2023 at 16:58)</a>:</h4>
<p>right, perhaps that will be related to the streams updates then</p>



<a name="398527795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398527795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398527795">(Oct 25 2023 at 16:59)</a>:</h4>
<p>In my last commit, I update the impl to remove all the IDs <a href="https://github.com/bytecodealliance/jco/pull/214/commits/54ab5cc3fe948f547f2f107cf1cd03f77d388e04">https://github.com/bytecodealliance/jco/pull/214/commits/54ab5cc3fe948f547f2f107cf1cd03f77d388e04</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214/commits/54ab5cc3fe948f547f2f107cf1cd03f77d388e04" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0cca35bad3d333b25f2d1eccc5b4de1854e00a72\/68747470733a2f2f617661746172732e67697468756275736572636f6e74656e742e636f6d2f752f313639393335373f733d34303026763d34)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214/commits/54ab5cc3fe948f547f2f107cf1cd03f77d388e04" title="WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">WIP: feat: add impl for node sockets by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.
Closes #154
Done

 instance-network.instance-network
 ip-name-lookup.resolve-addresses
 ip-name-lookup.resolve-next-address
 ip-name-lookup...</div></div></div>



<a name="398528275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398528275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398528275">(Oct 25 2023 at 17:01)</a>:</h4>
<p>I am planning to start working on upd next  <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="398528388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398528388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398528388">(Oct 25 2023 at 17:02)</a>:</h4>
<p>ah nice to see you figured that out</p>



<a name="398528565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398528565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398528565">(Oct 25 2023 at 17:03)</a>:</h4>
<p>if you want to verify the interface against the types in <a href="https://github.com/bytecodealliance/jco/blob/main/packages/preview2-shim/types/interfaces/wasi-sockets-tcp.d.ts">https://github.com/bytecodealliance/jco/blob/main/packages/preview2-shim/types/interfaces/wasi-sockets-tcp.d.ts</a> that should roughly match what is the expected shape</p>



<a name="398529182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398529182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398529182">(Oct 25 2023 at 17:07)</a>:</h4>
<p>Yes. That what I did. I see you updated the type def <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="398529555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398529555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398529555">(Oct 25 2023 at 17:09)</a>:</h4>
<p>yeah it was a bunch of diffs, thank you for figuring it out there, that wasn't obvious I know</p>



<a name="398564273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398564273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398564273">(Oct 25 2023 at 21:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="553681">Guy Bedford</span> <a href="#narrow/stream/409526-jco/topic/sockets.20on.20node.2Ejs/near/398529555">said</a>:</p>
<blockquote>
<p>yeah it was a bunch of diffs, thank you for figuring it out there, that wasn't obvious I know</p>
</blockquote>
<p>haha! I am used to reading diffs <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="398564337"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398564337" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398564337">(Oct 25 2023 at 21:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="653616">Wassim Chegham</span> <a href="#narrow/stream/409526-jco/topic/sockets.20on.20node.2Ejs/near/398528275">said</a>:</p>
<blockquote>
<p>I am planning to start working on upd next  <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>
</blockquote>
<p>obviously I meant UDP う</p>



<a name="398778788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398778788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398778788">(Oct 26 2023 at 22:51)</a>:</h4>
<p><span class="user-mention" data-user-id="653616">@Wassim Chegham</span> I've been implementing private fields on the other classes, based on what you were doing</p>



<a name="398778792"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/398778792" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#398778792">(Oct 26 2023 at 22:51)</a>:</h4>
<p>thanks for the idea on that one!</p>



<a name="400205057"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205057" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205057">(Nov 03 2023 at 21:04)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span> I applied the latest changes from the main branch to my WIP branch and the FS test is failing because of the new <code>Symbol.dispose</code>: <code>TypeError: stream[Symbol.dispose] is not a function</code>.  Any idea why is that?<br>
<a href="/user_uploads/15107/5rQ4_Am8WBbXowyuJWbyJFNf/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/5rQ4_Am8WBbXowyuJWbyJFNf/image.png" title="image.png"><img src="/user_uploads/15107/5rQ4_Am8WBbXowyuJWbyJFNf/image.png"></a></div>



<a name="400205098"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205098" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205098">(Nov 03 2023 at 21:04)</a>:</h4>
<p>perhaps try deleting node_modules and reinstalling?</p>



<a name="400205173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205173">(Nov 03 2023 at 21:05)</a>:</h4>
<p>still failing</p>



<a name="400205240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205240">(Nov 03 2023 at 21:06)</a>:</h4>
<p>can I like <code>cargo xtask</code> clean build?</p>



<a name="400205248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205248">(Nov 03 2023 at 21:06)</a>:</h4>
<p>sounds like it might be a bug only exposed on your branch then</p>



<a name="400205299"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205299" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205299">(Nov 03 2023 at 21:06)</a>:</h4>
<p>would you like to pair on it?</p>



<a name="400205471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400205471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400205471">(Nov 03 2023 at 21:08)</a>:</h4>
<p>sure. Let me switch computer. WIll ping you back.</p>



<a name="400206105"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/400206105" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#400206105">(Nov 03 2023 at 21:15)</a>:</h4>
<p>Sent you a DM on Twitter</p>



<a name="402652626"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/402652626" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#402652626">(Nov 17 2023 at 09:27)</a>:</h4>
<blockquote>
<p>Adds a new --jco-debug option to jco run which doesn't delete the temporary files (so they can be debugged) and also outputs the trace calls. (<a href="https://github.com/bytecodealliance/jco/pull/266">https://github.com/bytecodealliance/jco/pull/266</a>)</p>
</blockquote>
<p>Thank you so much <span class="user-mention" data-user-id="553681">@Guy Bedford</span>  for this! It will save me a lot of headaches. I was currently basically manually compiling each test program and copying it around so I could debug it</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">.</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">jco</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">submodules</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasi</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">preview2_udp_connect</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="o">--</span><span class="n">wasi</span><span class="o">-</span><span class="n">command</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">__test</span><span class="p">.</span><span class="n">wasm</span>
<span class="p">.</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">jco</span><span class="p">.</span><span class="n">js</span><span class="w"> </span><span class="n">transpile</span><span class="w"> </span><span class="n">__test</span><span class="p">.</span><span class="n">wasm</span><span class="w">  </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="p">.</span><span class="o">/</span>
</code></pre></div>



<a name="402654652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/402654652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#402654652">(Nov 17 2023 at 09:35)</a>:</h4>
<p>Yay! Made my 1st conformance test pass!!<br>
<a href="/user_uploads/15107/Xz2Y64q6J-v5eD646LzgTtkd/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/Xz2Y64q6J-v5eD646LzgTtkd/image.png" title="image.png"><img src="/user_uploads/15107/Xz2Y64q6J-v5eD646LzgTtkd/image.png"></a></div>



<a name="403804825"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/403804825" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#403804825">(Nov 23 2023 at 14:55)</a>:</h4>
<p>Moar conformace tests passing for wasi-socket<br>
<a href="/user_uploads/15107/-RlhpHOtjNPPPXUNqGxiSZO5/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/-RlhpHOtjNPPPXUNqGxiSZO5/image.png" title="image.png"><img src="/user_uploads/15107/-RlhpHOtjNPPPXUNqGxiSZO5/image.png"></a></div>



<a name="403938736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/403938736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#403938736">(Nov 24 2023 at 10:19)</a>:</h4>
<p>Hi, I just opened an issue in the wasi-socket repo about a question I have, would love if any of you can help <a href="https://github.com/WebAssembly/wasi-sockets/issues/82">https://github.com/WebAssembly/wasi-sockets/issues/82</a> (cc <span class="user-mention" data-user-id="253992">@Pat Hickey</span> )</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sockets/issues/82" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/4e6077d4ea9e698b45bf7cc622158c566d01362a\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313261303261336261306335336565616533356561303131303835326663646438323433323963353861303661333836656566643665613837306134366436612f576562417373656d626c792f776173692d736f636b6574732f6973737565732f3832)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sockets/issues/82" title="Should socket.local_address() throw an invalid-state error? 路 Issue #82 路 WebAssembly/wasi-sockets">Should socket.local_address() throw an invalid-state error? 路 Issue #82 路 WebAssembly/wasi-sockets</a></div><div class="message_embed_description">Hi, I am currently implementing wasi-sockets for jco, and I am encountering an unspecificed behavior. The test_tcp_connect_dual_stack test inside of the test programm preview2_tcp_connect.rs, creat...</div></div></div>



<a name="404658858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/404658858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#404658858">(Nov 28 2023 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span> as discussed yesterday, the wasi-sockets impl for node.js PR is ready for merge: <a href="https://github.com/bytecodealliance/jco/pull/214">https://github.com/bytecodealliance/jco/pull/214</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/5ff1097c53d0b9720e1cfd3b9f3a6c87f7ace2b8\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f666232393132343465666339333038343966323933383165306138616362306532363336383564376335353133356366633562326631373766346533316638662f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f323134)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214" title="feat: add impl for node sockets (wip) by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">feat: add impl for node sockets (wip) by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.
Closes #154 (check issue for progress)</div></div></div>



<a name="404658865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/404658865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#404658865">(Nov 28 2023 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span> as discussed yesterday, the wasi-sockets impl for node.js PR is ready for merge: <a href="https://github.com/bytecodealliance/jco/pull/214">https://github.com/bytecodealliance/jco/pull/214</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/214" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/5ff1097c53d0b9720e1cfd3b9f3a6c87f7ace2b8\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f666232393132343465666339333038343966323933383165306138616362306532363336383564376335353133356366633562326631373766346533316638662f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f323134)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/214" title="feat: add impl for node sockets (wip) by manekinekko 路 Pull Request #214 路 bytecodealliance/jco">feat: add impl for node sockets (wip) by manekinekko 路 Pull Request #214 路 bytecodealliance/jco</a></div><div class="message_embed_description">A work in progress PR that adds support for node sockets.
Closes #154 (check issue for progress)</div></div></div>



<a name="407516817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/407516817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#407516817">(Dec 12 2023 at 16:34)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span>  The wasi-sockets UDP implem is fully complete (minus a few edge cases - see TODOs in the code) <a href="https://github.com/bytecodealliance/jco/pull/306">https://github.com/bytecodealliance/jco/pull/306</a> - I am planning to tackle wasi-sockets TCP next.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/306" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/dc553ba60d820c8175e94e84bed9141f5e3401e6\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f333366613638366637643733326333363735313839323930633765313937343333396566396234383336646335333835316239616363383361373562643035622f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f333036)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/306" title="WIP: move UDP sockets to worker thread by manekinekko 路 Pull Request #306 路 bytecodealliance/jco">WIP: move UDP sockets to worker thread by manekinekko 路 Pull Request #306 路 bytecodealliance/jco</a></div><div class="message_embed_description">preview2_udp_bind

 test_udp_bind_ephemeral_port(&amp;net, IpAddress::IPV4_LOOPBACK);
 test_udp_bind_ephemeral_port(&amp;net, IpAddress::IPV6_LOOPBACK);
 test_udp_bind_ephemeral_port(&amp;net, IpAddress::IPV4_...</div></div></div>



<a name="407517098"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/407517098" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#407517098">(Dec 12 2023 at 16:36)</a>:</h4>
<p>yay!!!!</p>



<a name="407517530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/407517530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#407517530">(Dec 12 2023 at 16:38)</a>:</h4>
<p>fantastic, will review shortly</p>



<a name="407935517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/407935517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#407935517">(Dec 14 2023 at 11:01)</a>:</h4>
<p>Heya <span class="user-mention" data-user-id="553681">@Guy Bedford</span>  is there an issue with the recent changes on main? The test runner is now broken. Do we now need to build the tests separatly?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">[</span><span class="n">cause</span><span class="p">]</span>: <span class="o">'</span><span class="na">Unable</span> <span class="nc">to</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="err">\</span><span class="n">x1B</span><span class="p">[</span><span class="mi">1</span><span class="n">m</span><span class="p">.</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">rundir</span><span class="o">/</span><span class="n">preview2_udp_bind</span><span class="p">.</span><span class="n">component</span><span class="p">.</span><span class="n">wasm</span><span class="err">\</span><span class="n">x1B</span><span class="p">[</span><span class="mi">22</span><span class="n">m</span><span class="o">'</span>
</code></pre></div>
<p><a href="/user_uploads/15107/_32uOS70jbZpQ-vcI4MXGZ2V/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/_32uOS70jbZpQ-vcI4MXGZ2V/image.png" title="image.png"><img src="/user_uploads/15107/_32uOS70jbZpQ-vcI4MXGZ2V/image.png"></a></div>



<a name="408006367"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408006367" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408006367">(Dec 14 2023 at 17:10)</a>:</h4>
<p>run <code>cargo xtask generate tests</code></p>



<a name="408057893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408057893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408057893">(Dec 14 2023 at 22:29)</a>:</h4>
<p>anyone knows why socket.getRecvbufferSize() would report a different value than the one is set. Eg. in the <a href="http://preview2_udp_sockopts.rs">preview2_udp_sockopts.rs</a> we are setting a buffer size of 0x10000 (66kb) but when reading the value, we get 213kb?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">programs</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">preview2_udp_sockopts</span><span class="p">.</span><span class="n">rs</span>:<span class="mi">61</span>:<span class="mi">5</span>:
<span class="nc">assertion</span><span class="w"> </span><span class="err">`</span><span class="n">left</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">right</span><span class="err">`</span><span class="w"> </span><span class="n">failed</span>
<span class="w">  </span><span class="n">left</span>: <span class="mi">212992</span>
<span class="w"> </span><span class="n">right</span>: <span class="mi">65536</span>
<span class="n">note</span>: <span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
</code></pre></div>
<p><a href="/user_uploads/15107/01D5d3mqdxLEQr2KJYdbBkBk/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/01D5d3mqdxLEQr2KJYdbBkBk/image.png" title="image.png"><img src="/user_uploads/15107/01D5d3mqdxLEQr2KJYdbBkBk/image.png"></a></div>



<a name="408059492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059492">(Dec 14 2023 at 22:42)</a>:</h4>
<p><span class="user-mention" data-user-id="653616">@Wassim Chegham</span> perhaps you need to conver the BigInt to a number when setting it</p>



<a name="408059503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059503">(Dec 14 2023 at 22:43)</a>:</h4>
<p><code>Number(size)</code></p>



<a name="408059630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059630">(Dec 14 2023 at 22:44)</a>:</h4>
<p>Sure. I tried that but that wasn't the issue <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span><br>
<a href="/user_uploads/15107/LMbQH4GAQhmOHvf2cZVA1m9n/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/LMbQH4GAQhmOHvf2cZVA1m9n/image.png" title="image.png"><img src="/user_uploads/15107/LMbQH4GAQhmOHvf2cZVA1m9n/image.png"></a></div>



<a name="408059766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059766">(Dec 14 2023 at 22:45)</a>:</h4>
<p>While browsing the Internet, I found this affirmation: "In this system, by default, each socket will get a receive buffer with a size of 213 KB. Additionally, the rmem_max value of 213 KB restricts the maximum allowable receive buffer size to 213 KB during socket creation."<br>
<a href="https://www.baeldung.com/linux/udp-socket-buffer">https://www.baeldung.com/linux/udp-socket-buffer</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://www.baeldung.com/linux/udp-socket-buffer" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/f9aa8a90774dd144d73fa8df41eb860191e47900\/68747470733a2f2f7777772e6261656c64756e672e636f6d2f77702d636f6e74656e742f75706c6f6164732f73697465732f322f323032322f31312f4c696e75782d46656174757265642d496d6167652d30392d6b2e706e67)"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.baeldung.com/linux/udp-socket-buffer" title="UDP Socket Buffer in Linux | Baeldung on Linux">UDP Socket Buffer in Linux | Baeldung on Linux</a></div><div class="message_embed_description">Learn about UDP sockets in Linux.</div></div></div>



<a name="408059851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059851">(Dec 14 2023 at 22:46)</a>:</h4>
<p>so does this mean that setting a value has no effect?!</p>



<a name="408059879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059879">(Dec 14 2023 at 22:46)</a>:</h4>
<p>so I guess it's something that should have an isolated replication</p>



<a name="408059934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408059934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408059934">(Dec 14 2023 at 22:47)</a>:</h4>
<p>trying now... will report</p>



<a name="408060031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060031">(Dec 14 2023 at 22:48)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">var</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">dgram</span><span class="p">.</span><span class="n">Socket</span><span class="p">(</span><span class="o">'</span><span class="na">udp4</span><span class="o">'</span><span class="p">)</span>
<span class="n">s</span><span class="p">.</span><span class="n">bind</span><span class="p">();</span>
<span class="n">s</span><span class="p">.</span><span class="n">setRecvBufferSize</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="n">s</span><span class="p">.</span><span class="n">getRecvBufferSize</span><span class="p">()</span>
</code></pre></div>
<p>definitely seems to work for me</p>



<a name="408060130"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060130" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060130">(Dec 14 2023 at 22:48)</a>:</h4>
<p>and <code>65536</code> also works</p>



<a name="408060152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060152">(Dec 14 2023 at 22:48)</a>:</h4>
<p>perhaps enable the worker-io call logging to verify its definitely being set</p>



<a name="408060173"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060173" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060173">(Dec 14 2023 at 22:49)</a>:</h4>
<p>or log around the call sites for the set and get</p>



<a name="408060203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060203">(Dec 14 2023 at 22:49)</a>:</h4>
<p>or maybe the replication is more specific and is socket-specific</p>



<a name="408060396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060396">(Dec 14 2023 at 22:51)</a>:</h4>
<p>interesting. Your exact code gave me a EBADF error.</p>



<a name="408060572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060572">(Dec 14 2023 at 22:52)</a>:</h4>
<p>Hummm<br>
<a href="/user_uploads/15107/NgoxRLpbD8TMMYDujCT57CBQ/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/NgoxRLpbD8TMMYDujCT57CBQ/image.png" title="image.png"><img src="/user_uploads/15107/NgoxRLpbD8TMMYDujCT57CBQ/image.png"></a></div>



<a name="408060614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060614">(Dec 14 2023 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="553681">@Guy Bedford</span>  can you try this code please?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Socket</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="s">"node:dgram"</span><span class="p">;</span>
<span class="n">var</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Socket</span><span class="p">(</span><span class="o">'</span><span class="na">udp4</span><span class="o">'</span><span class="p">)</span>
<span class="n">s</span><span class="p">.</span><span class="n">bind</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="o">'</span><span class="na">set</span><span class="w"> </span><span class="mi">1000</span><span class="o">'</span><span class="p">);</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">setRecvBufferSize</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<span class="w">    </span><span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="o">'</span><span class="na">get</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">getRecvBufferSize</span><span class="p">())</span>
<span class="p">});</span>
</code></pre></div>
<p>I get this on WSL:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">set</span><span class="w"> </span><span class="mi">1000</span>
<span class="n">get</span><span class="w"> </span><span class="mi">2304</span>
</code></pre></div>



<a name="408060680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060680">(Dec 14 2023 at 22:53)</a>:</h4>
<p>so on my machine, I'm getting the same value in <code>get</code></p>



<a name="408060684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060684">(Dec 14 2023 at 22:53)</a>:</h4>
<p>on that exact case</p>



<a name="408060732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060732">(Dec 14 2023 at 22:54)</a>:</h4>
<p>macOS?</p>



<a name="408060733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060733">(Dec 14 2023 at 22:54)</a>:</h4>
<p>so perhaps this is system specific or something? are you on Windows?</p>



<a name="408060756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060756">(Dec 14 2023 at 22:54)</a>:</h4>
<p>Yes, WSL (ubuntu)</p>



<a name="408060785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060785">(Dec 14 2023 at 22:54)</a>:</h4>
<p>it might be specific to that environment somehow, I'm not sure</p>



<a name="408060822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060822">(Dec 14 2023 at 22:54)</a>:</h4>
<p>ok will add a comment and push so that CI runs</p>



<a name="408060827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408060827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408060827">(Dec 14 2023 at 22:55)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">set</span><span class="w"> </span><span class="mi">1000</span>
<span class="n">get</span><span class="w"> </span><span class="mi">1000</span>
</code></pre></div>



<a name="408271943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408271943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408271943">(Dec 15 2023 at 23:28)</a>:</h4>
<p>Heya. So I've submitted a bunch of PRs that are migrating TCP impl to worker thread:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/jco/pull/316">https://github.com/bytecodealliance/jco/pull/316</a></li>
<li><a href="https://github.com/bytecodealliance/jco/pull/319">https://github.com/bytecodealliance/jco/pull/319</a></li>
<li><a href="https://github.com/bytecodealliance/jco/pull/320">https://github.com/bytecodealliance/jco/pull/320</a><br>
These PR also fix 3 test programs (out of 5). </li>
</ul>
<p>I am tracking the remaining tests to be fixed in <a href="https://github.com/bytecodealliance/jco/issues/315">https://github.com/bytecodealliance/jco/issues/315</a>. Will work on it over the weekend (once 320 is merged).</p>
<p>So now I am gonna get some Zzzzzzzzz <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/issues/315" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/e24aa23e046f5db0f9f07674b24493ea1800170a\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313064313963386463666463646133616433333034343139653362383731646131376636323866326537366636363732656162326364666138656539643061322f62797465636f6465616c6c69616e63652f6a636f2f6973737565732f333135)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/issues/315" title="Migrate current wasi-sockets TCP impl to worker thread 路 Issue #315 路 bytecodealliance/jco">Migrate current wasi-sockets TCP impl to worker thread 路 Issue #315 路 bytecodealliance/jco</a></div><div class="message_embed_description">preview2_tcp_bind  preview2_tcp_sockopts  preview2_tcp_states  preview2_tcp_connect  preview2_tcp_sample_application Closes #154</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/316" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/7d1d25741e51e9b73964f525e550f244e2c8c606\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f653130333437626633633736326337353632366532303164356532633063646235643030383731336233303564343937346466366463383432343838613136632f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f333136)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/316" title="chore: migrate wasi-sockets tcp to worker thread by manekinekko 路 Pull Request #316 路 bytecodealliance/jco">chore: migrate wasi-sockets tcp to worker thread by manekinekko 路 Pull Request #316 路 bytecodealliance/jco</a></div><div class="message_embed_description">preview2_tcp_bind
   preview2_tcp_connect
  preview2_tcp_sample_application
  preview2_tcp_sockopts
  preview2_tcp_states

* Failing tests are due to missing stream impl
Closes #315</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/319" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/46abb4ae51f5a1b1248f336a8b76f1addb147730\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393264643130353361306364343834656464376634303036396562393233613966383464353836356138343531373563643735616463623464336133306262622f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f333139)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/319" title="chore: fix tcp lint by manekinekko 路 Pull Request #319 路 bytecodealliance/jco">chore: fix tcp lint by manekinekko 路 Pull Request #319 路 bytecodealliance/jco</a></div><div class="message_embed_description">JavaScript tooling for working with WebAssembly Components - chore: fix tcp lint by manekinekko 路 Pull Request #319 路 bytecodealliance/jco</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/320" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/7d2d6840af121c25fcc8d4a900a31c184d03edad\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f316165393664393032623763373632303033393164376663653339646639613631656163653262313733623532653866303534386264366665373530366233652f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f333230)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/320" title="chore: preview2_tcp_sockopts passing by manekinekko 路 Pull Request #320 路 bytecodealliance/jco">chore: preview2_tcp_sockopts passing by manekinekko 路 Pull Request #320 路 bytecodealliance/jco</a></div><div class="message_embed_description">Both preview2_tcp_states and preview2_tcp_sockopts are passing.
Related #315</div></div></div>



<a name="408273718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408273718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408273718">(Dec 15 2023 at 23:50)</a>:</h4>
<p>amazing!!!! thank you Wassim this is phenomenal progress, and yes please get some rest there!</p>



<a name="408396505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/409526-jco/topic/sockets%20on%20node.js/near/408396505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wassim Chegham <a href="https://bytecodealliance.github.io/zulip-archive/stream/409526-jco/topic/sockets.20on.20node.2Ejs.html#408396505">(Dec 17 2023 at 02:00)</a>:</h4>
<p>Just submitted a new PR that makes <code>preview2_tcp_connect</code>  pass! <a href="https://github.com/bytecodealliance/jco/pull/321">https://github.com/bytecodealliance/jco/pull/321</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/jco/pull/321" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/0913019a7f737b679f5938e60460ab02f8528f94\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f376535656434363432313838373135353331316631656430653662623264303030656266316233333665323037646435316161643664353765346562386566302f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f333231)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/jco/pull/321" title="chore: preview2_tcp_connect passing by manekinekko 路 Pull Request #321 路 bytecodealliance/jco">chore: preview2_tcp_connect passing by manekinekko 路 Pull Request #321 路 bytecodealliance/jco</a></div><div class="message_embed_description">Related #315</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>