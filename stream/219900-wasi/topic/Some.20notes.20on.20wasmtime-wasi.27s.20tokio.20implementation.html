<html>
<head><meta charset="utf-8"><title>Some notes on wasmtime-wasi&#x27;s tokio implementation · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Some.20notes.20on.20wasmtime-wasi.27s.20tokio.20implementation.html">Some notes on wasmtime-wasi&#x27;s tokio implementation</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="422923775"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/Some%20notes%20on%20wasmtime-wasi%27s%20tokio%20implementation/near/422923775" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Some.20notes.20on.20wasmtime-wasi.27s.20tokio.20implementation.html#422923775">(Feb 22 2024 at 23:42)</a>:</h4>
<p>I just wrote this response on GitHub that gives a bunch of context on why wasmtime-wasi uses tokio, even in a synchronous embedding, despite that being (apprently) pretty costly in terms of File IO performance compared to competing runtimes. Maybe this is good reading for folks who weren't involved in that design, and I welcome questions and comments on it <a href="https://github.com/bytecodealliance/wasmtime/issues/7973#issuecomment-1960513214">https://github.com/bytecodealliance/wasmtime/issues/7973#issuecomment-1960513214</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/7973#issuecomment-1960513214" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/1cdb6d70818b693a40495cab9bfd57f59a855334\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f623939666263633964343436666338373761336666343964613665326138376333653434343537303431663338333064636664656237613838383537633833302f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f37393733)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/7973#issuecomment-1960513214" title="Poor performance of wasmtime file I/O maybe because tokio  · Issue #7973 · bytecodealliance/wasmtime">Poor performance of wasmtime file I/O maybe because tokio  · Issue #7973 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Test Case test.c #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;unistd.h&gt; #include &lt;fcntl.h&gt; int main() { FILE *fp; char str[14]; for (int i = 1; i &lt; 1000; i++) { int fd = open("test.txt", O_CREA...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>