<html>
<head><meta charset="utf-8"><title>How to extend WasiCtx · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/How.20to.20extend.20WasiCtx.html">How to extend WasiCtx</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="320896716"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/How%20to%20extend%20WasiCtx/near/320896716" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Blignaut <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/How.20to.20extend.20WasiCtx.html#320896716">(Jan 12 2023 at 10:03)</a>:</h4>
<p>Hi,</p>
<p>I've added some custom host functions that require some change to the context object. Additionally I'm using the Wasi Snapshot. Is it possible to extend the WasiCtx struct to:</p>
<ol>
<li>Add additional attributes that I want to keep track of for my WASM module execution (e.g. an open socket)</li>
<li>Implement functions (e.g. sock_open). I know this is possible by just adding impl sections but I'm unsure on how to add additional attributes as Rust doesn't support native inheritence.</li>
</ol>
<p>I also can't copy paste the WasiCtx struct definition as it uses private crate references. Any help would be appreciated.</p>



<a name="320994103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/How%20to%20extend%20WasiCtx/near/320994103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Blignaut <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/How.20to.20extend.20WasiCtx.html#320994103">(Jan 12 2023 at 17:32)</a>:</h4>
<p>I've seen the add_to_linker function and how this assists however this uses a macro from wiggle which in turn uses .wit definitions to generate. Is there a way to define the add_to_linker without a .wit file? I'm manually doing it now but seems like a real pain</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>