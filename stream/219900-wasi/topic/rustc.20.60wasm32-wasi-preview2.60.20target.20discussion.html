<html>
<head><meta charset="utf-8"><title>rustc `wasm32-wasi-preview2` target discussion · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/rustc.20.60wasm32-wasi-preview2.60.20target.20discussion.html">rustc `wasm32-wasi-preview2` target discussion</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="412305834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/rustc%20%60wasm32-wasi-preview2%60%20target%20discussion/near/412305834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryan Levick (rylev) <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/rustc.20.60wasm32-wasi-preview2.60.20target.20discussion.html#412305834">(Jan 11 2024 at 09:57)</a>:</h4>
<p>I've <a href="https://github.com/rust-lang/rust/pull/119616">opened a PR</a> to rustc creating a new target for <code>wasm32-wasi-preview2</code>.</p>
<p>So far the only aspect that's up for debate is the cfg flag that controls whether code gets compiled for preview1 or preview2. The PR originally laid out preview2 as different OS  (i.e., <code>#[cfg(target_os ="wasi-preview2")]</code>), but a commenter suggested using <code>target_env</code> instead. It seems like we'll be going with <code>target_env</code>, and you can read the discussion of why <a href="https://github.com/rust-lang/rust/pull/119616#issuecomment-1886746431">here</a>. Please leave your opinion if you disagree with where we've landed!</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rust/pull/119616" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/89e8aa44af258e4f39a67b1b2d5982ca923e3337\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323833643465636439346132613235353735646665343734633565303963386663393139616261646239633939663439383964376534363065303066626138612f727573742d6c616e672f727573742f70756c6c2f313139363136)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rust/pull/119616" title="Add a new `wasm32-wasi-preview2` target by rylev · Pull Request #119616 · rust-lang/rust">Add a new `wasm32-wasi-preview2` target by rylev · Pull Request #119616 · rust-lang/rust</a></div><div class="message_embed_description">This is the initial implementation of the MCP rust-lang/compiler-team#694 creating a new tier 3 target wasm32-wasi-preview2. That MCP has been seconded and will most likely be approved in a little ...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-lang/rust/pull/119616#issuecomment-1886746431" style="background-image: url(https\:\/\/uploads\.zulipusercontent\.net\/89e8aa44af258e4f39a67b1b2d5982ca923e3337\/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323833643465636439346132613235353735646665343734633565303963386663393139616261646239633939663439383964376534363065303066626138612f727573742d6c616e672f727573742f70756c6c2f313139363136)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-lang/rust/pull/119616#issuecomment-1886746431" title="Add a new `wasm32-wasi-preview2` target by rylev · Pull Request #119616 · rust-lang/rust">Add a new `wasm32-wasi-preview2` target by rylev · Pull Request #119616 · rust-lang/rust</a></div><div class="message_embed_description">This is the initial implementation of the MCP rust-lang/compiler-team#694 creating a new tier 3 target wasm32-wasi-preview2. That MCP has been seconded and will most likely be approved in a little ...</div></div></div>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>