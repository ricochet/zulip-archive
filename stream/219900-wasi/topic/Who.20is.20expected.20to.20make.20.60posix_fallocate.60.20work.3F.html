<html>
<head><meta charset="utf-8"><title>Who is expected to make `posix_fallocate` work? · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Who.20is.20expected.20to.20make.20.60posix_fallocate.60.20work.3F.html">Who is expected to make `posix_fallocate` work?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="400628885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/Who%20is%20expected%20to%20make%20%60posix_fallocate%60%20work%3F/near/400628885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Who.20is.20expected.20to.20make.20.60posix_fallocate.60.20work.3F.html#400628885">(Nov 06 2023 at 23:40)</a>:</h4>
<p>It looks like <code>posix_fallocate()</code> is defined by WASI-libc, but it is returning a 58 error code when used under wasmtime. Is this a WASI-libc issue or a wasmtime issue? I ask because this apparently used to work with much older versions of both, but not with WASI-SDK 20 and wasmtime 14, so I'm trying to track down where to ask for more information.</p>



<a name="400666781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/Who%20is%20expected%20to%20make%20%60posix_fallocate%60%20work%3F/near/400666781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Who.20is.20expected.20to.20make.20.60posix_fallocate.60.20work.3F.html#400666781">(Nov 07 2023 at 05:29)</a>:</h4>
<p>I believe fallocate is not implemented in wasmtime's implementation of wasi_snapshot_preview1 because it's been removed from preview2 due to portability concerns</p>



<a name="400818217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/Who%20is%20expected%20to%20make%20%60posix_fallocate%60%20work%3F/near/400818217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Brett Cannon <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/Who.20is.20expected.20to.20make.20.60posix_fallocate.60.20work.3F.html#400818217">(Nov 07 2023 at 21:24)</a>:</h4>
<p>Thanks! I'll then forcibly skip it existing in Python then.</p>



<hr><p>Last updated: Jan 20 2025 at 06:04 UTC</p>
</html>